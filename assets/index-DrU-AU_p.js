(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))c(j);new MutationObserver(j=>{for(const h of j)if(h.type==="childList")for(const et of h.addedNodes)et.tagName==="LINK"&&et.rel==="modulepreload"&&c(et)}).observe(document,{childList:!0,subtree:!0});function a(j){const h={};return j.integrity&&(h.integrity=j.integrity),j.referrerPolicy&&(h.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?h.credentials="include":j.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function c(j){if(j.ep)return;j.ep=!0;const h=a(j);fetch(j.href,h)}})();var buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(o){var e=o.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=o.indexOf("=");a===-1&&(a=e);var c=a===e?0:4-a%4;return[a,c]}function byteLength(o){var e=getLens(o),a=e[0],c=e[1];return(a+c)*3/4-c}function _byteLength(o,e,a){return(e+a)*3/4-a}function toByteArray(o){var e,a=getLens(o),c=a[0],j=a[1],h=new Arr(_byteLength(o,c,j)),et=0,ot=j>0?c-4:c,st;for(st=0;st<ot;st+=4)e=revLookup[o.charCodeAt(st)]<<18|revLookup[o.charCodeAt(st+1)]<<12|revLookup[o.charCodeAt(st+2)]<<6|revLookup[o.charCodeAt(st+3)],h[et++]=e>>16&255,h[et++]=e>>8&255,h[et++]=e&255;return j===2&&(e=revLookup[o.charCodeAt(st)]<<2|revLookup[o.charCodeAt(st+1)]>>4,h[et++]=e&255),j===1&&(e=revLookup[o.charCodeAt(st)]<<10|revLookup[o.charCodeAt(st+1)]<<4|revLookup[o.charCodeAt(st+2)]>>2,h[et++]=e>>8&255,h[et++]=e&255),h}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[o&63]}function encodeChunk(o,e,a){for(var c,j=[],h=e;h<a;h+=3)c=(o[h]<<16&16711680)+(o[h+1]<<8&65280)+(o[h+2]&255),j.push(tripletToBase64(c));return j.join("")}function fromByteArray(o){for(var e,a=o.length,c=a%3,j=[],h=16383,et=0,ot=a-c;et<ot;et+=h)j.push(encodeChunk(o,et,et+h>ot?ot:et+h));return c===1?(e=o[a-1],j.push(lookup[e>>2]+lookup[e<<4&63]+"==")):c===2&&(e=(o[a-2]<<8)+o[a-1],j.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),j.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(o,e,a,c,j){var h,et,ot=j*8-c-1,st=(1<<ot)-1,lt=st>>1,nt=-7,gt=a?j-1:0,dt=a?-1:1,mt=o[e+gt];for(gt+=dt,h=mt&(1<<-nt)-1,mt>>=-nt,nt+=ot;nt>0;h=h*256+o[e+gt],gt+=dt,nt-=8);for(et=h&(1<<-nt)-1,h>>=-nt,nt+=c;nt>0;et=et*256+o[e+gt],gt+=dt,nt-=8);if(h===0)h=1-lt;else{if(h===st)return et?NaN:(mt?-1:1)*(1/0);et=et+Math.pow(2,c),h=h-lt}return(mt?-1:1)*et*Math.pow(2,h-c)};ieee754.write=function(o,e,a,c,j,h){var et,ot,st,lt=h*8-j-1,nt=(1<<lt)-1,gt=nt>>1,dt=j===23?Math.pow(2,-24)-Math.pow(2,-77):0,mt=c?0:h-1,vt=c?1:-1,tt=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(ot=isNaN(e)?1:0,et=nt):(et=Math.floor(Math.log(e)/Math.LN2),e*(st=Math.pow(2,-et))<1&&(et--,st*=2),et+gt>=1?e+=dt/st:e+=dt*Math.pow(2,1-gt),e*st>=2&&(et++,st/=2),et+gt>=nt?(ot=0,et=nt):et+gt>=1?(ot=(e*st-1)*Math.pow(2,j),et=et+gt):(ot=e*Math.pow(2,gt-1)*Math.pow(2,j),et=0));j>=8;o[a+mt]=ot&255,mt+=vt,ot/=256,j-=8);for(et=et<<j|ot,lt+=j;lt>0;o[a+mt]=et&255,mt+=vt,et/=256,lt-=8);o[a+mt-vt]|=tt*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(o){const e=base64Js,a=ieee754,c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.Buffer=nt,o.SlowBuffer=ft,o.INSPECT_MAX_BYTES=50;const j=2147483647;o.kMaxLength=j;const{Uint8Array:h,ArrayBuffer:et,SharedArrayBuffer:ot}=globalThis;nt.TYPED_ARRAY_SUPPORT=st(),!nt.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function st(){try{const Wt=new h(1),Lt={foo:function(){return 42}};return Object.setPrototypeOf(Lt,h.prototype),Object.setPrototypeOf(Wt,Lt),Wt.foo()===42}catch{return!1}}Object.defineProperty(nt.prototype,"parent",{enumerable:!0,get:function(){if(nt.isBuffer(this))return this.buffer}}),Object.defineProperty(nt.prototype,"offset",{enumerable:!0,get:function(){if(nt.isBuffer(this))return this.byteOffset}});function lt(Wt){if(Wt>j)throw new RangeError('The value "'+Wt+'" is invalid for option "size"');const Lt=new h(Wt);return Object.setPrototypeOf(Lt,nt.prototype),Lt}function nt(Wt,Lt,zt){if(typeof Wt=="number"){if(typeof Lt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return vt(Wt)}return gt(Wt,Lt,zt)}nt.poolSize=8192;function gt(Wt,Lt,zt){if(typeof Wt=="string")return tt(Wt,Lt);if(et.isView(Wt))return ht(Wt);if(Wt==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Wt);if(Gr(Wt,et)||Wt&&Gr(Wt.buffer,et)||typeof ot<"u"&&(Gr(Wt,ot)||Wt&&Gr(Wt.buffer,ot)))return St(Wt,Lt,zt);if(typeof Wt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Zt=Wt.valueOf&&Wt.valueOf();if(Zt!=null&&Zt!==Wt)return nt.from(Zt,Lt,zt);const ar=At(Wt);if(ar)return ar;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Wt[Symbol.toPrimitive]=="function")return nt.from(Wt[Symbol.toPrimitive]("string"),Lt,zt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Wt)}nt.from=function(Wt,Lt,zt){return gt(Wt,Lt,zt)},Object.setPrototypeOf(nt.prototype,h.prototype),Object.setPrototypeOf(nt,h);function dt(Wt){if(typeof Wt!="number")throw new TypeError('"size" argument must be of type number');if(Wt<0)throw new RangeError('The value "'+Wt+'" is invalid for option "size"')}function mt(Wt,Lt,zt){return dt(Wt),Wt<=0?lt(Wt):Lt!==void 0?typeof zt=="string"?lt(Wt).fill(Lt,zt):lt(Wt).fill(Lt):lt(Wt)}nt.alloc=function(Wt,Lt,zt){return mt(Wt,Lt,zt)};function vt(Wt){return dt(Wt),lt(Wt<0?0:Tt(Wt)|0)}nt.allocUnsafe=function(Wt){return vt(Wt)},nt.allocUnsafeSlow=function(Wt){return vt(Wt)};function tt(Wt,Lt){if((typeof Lt!="string"||Lt==="")&&(Lt="utf8"),!nt.isEncoding(Lt))throw new TypeError("Unknown encoding: "+Lt);const zt=_t(Wt,Lt)|0;let Zt=lt(zt);const ar=Zt.write(Wt,Lt);return ar!==zt&&(Zt=Zt.slice(0,ar)),Zt}function bt(Wt){const Lt=Wt.length<0?0:Tt(Wt.length)|0,zt=lt(Lt);for(let Zt=0;Zt<Lt;Zt+=1)zt[Zt]=Wt[Zt]&255;return zt}function ht(Wt){if(Gr(Wt,h)){const Lt=new h(Wt);return St(Lt.buffer,Lt.byteOffset,Lt.byteLength)}return bt(Wt)}function St(Wt,Lt,zt){if(Lt<0||Wt.byteLength<Lt)throw new RangeError('"offset" is outside of buffer bounds');if(Wt.byteLength<Lt+(zt||0))throw new RangeError('"length" is outside of buffer bounds');let Zt;return Lt===void 0&&zt===void 0?Zt=new h(Wt):zt===void 0?Zt=new h(Wt,Lt):Zt=new h(Wt,Lt,zt),Object.setPrototypeOf(Zt,nt.prototype),Zt}function At(Wt){if(nt.isBuffer(Wt)){const Lt=Tt(Wt.length)|0,zt=lt(Lt);return zt.length===0||Wt.copy(zt,0,0,Lt),zt}if(Wt.length!==void 0)return typeof Wt.length!="number"||Dn(Wt.length)?lt(0):bt(Wt);if(Wt.type==="Buffer"&&Array.isArray(Wt.data))return bt(Wt.data)}function Tt(Wt){if(Wt>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return Wt|0}function ft(Wt){return+Wt!=Wt&&(Wt=0),nt.alloc(+Wt)}nt.isBuffer=function(Lt){return Lt!=null&&Lt._isBuffer===!0&&Lt!==nt.prototype},nt.compare=function(Lt,zt){if(Gr(Lt,h)&&(Lt=nt.from(Lt,Lt.offset,Lt.byteLength)),Gr(zt,h)&&(zt=nt.from(zt,zt.offset,zt.byteLength)),!nt.isBuffer(Lt)||!nt.isBuffer(zt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Lt===zt)return 0;let Zt=Lt.length,ar=zt.length;for(let Or=0,vr=Math.min(Zt,ar);Or<vr;++Or)if(Lt[Or]!==zt[Or]){Zt=Lt[Or],ar=zt[Or];break}return Zt<ar?-1:ar<Zt?1:0},nt.isEncoding=function(Lt){switch(String(Lt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},nt.concat=function(Lt,zt){if(!Array.isArray(Lt))throw new TypeError('"list" argument must be an Array of Buffers');if(Lt.length===0)return nt.alloc(0);let Zt;if(zt===void 0)for(zt=0,Zt=0;Zt<Lt.length;++Zt)zt+=Lt[Zt].length;const ar=nt.allocUnsafe(zt);let Or=0;for(Zt=0;Zt<Lt.length;++Zt){let vr=Lt[Zt];if(Gr(vr,h))Or+vr.length>ar.length?(nt.isBuffer(vr)||(vr=nt.from(vr)),vr.copy(ar,Or)):h.prototype.set.call(ar,vr,Or);else if(nt.isBuffer(vr))vr.copy(ar,Or);else throw new TypeError('"list" argument must be an Array of Buffers');Or+=vr.length}return ar};function _t(Wt,Lt){if(nt.isBuffer(Wt))return Wt.length;if(et.isView(Wt)||Gr(Wt,et))return Wt.byteLength;if(typeof Wt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Wt);const zt=Wt.length,Zt=arguments.length>2&&arguments[2]===!0;if(!Zt&&zt===0)return 0;let ar=!1;for(;;)switch(Lt){case"ascii":case"latin1":case"binary":return zt;case"utf8":case"utf-8":return En(Wt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zt*2;case"hex":return zt>>>1;case"base64":return Bn(Wt).length;default:if(ar)return Zt?-1:En(Wt).length;Lt=(""+Lt).toLowerCase(),ar=!0}}nt.byteLength=_t;function Rt(Wt,Lt,zt){let Zt=!1;if((Lt===void 0||Lt<0)&&(Lt=0),Lt>this.length||((zt===void 0||zt>this.length)&&(zt=this.length),zt<=0)||(zt>>>=0,Lt>>>=0,zt<=Lt))return"";for(Wt||(Wt="utf8");;)switch(Wt){case"hex":return Ct(this,Lt,zt);case"utf8":case"utf-8":return pt(this,Lt,zt);case"ascii":return _(this,Lt,zt);case"latin1":case"binary":return rt(this,Lt,zt);case"base64":return it(this,Lt,zt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return It(this,Lt,zt);default:if(Zt)throw new TypeError("Unknown encoding: "+Wt);Wt=(Wt+"").toLowerCase(),Zt=!0}}nt.prototype._isBuffer=!0;function Mt(Wt,Lt,zt){const Zt=Wt[Lt];Wt[Lt]=Wt[zt],Wt[zt]=Zt}nt.prototype.swap16=function(){const Lt=this.length;if(Lt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let zt=0;zt<Lt;zt+=2)Mt(this,zt,zt+1);return this},nt.prototype.swap32=function(){const Lt=this.length;if(Lt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let zt=0;zt<Lt;zt+=4)Mt(this,zt,zt+3),Mt(this,zt+1,zt+2);return this},nt.prototype.swap64=function(){const Lt=this.length;if(Lt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let zt=0;zt<Lt;zt+=8)Mt(this,zt,zt+7),Mt(this,zt+1,zt+6),Mt(this,zt+2,zt+5),Mt(this,zt+3,zt+4);return this},nt.prototype.toString=function(){const Lt=this.length;return Lt===0?"":arguments.length===0?pt(this,0,Lt):Rt.apply(this,arguments)},nt.prototype.toLocaleString=nt.prototype.toString,nt.prototype.equals=function(Lt){if(!nt.isBuffer(Lt))throw new TypeError("Argument must be a Buffer");return this===Lt?!0:nt.compare(this,Lt)===0},nt.prototype.inspect=function(){let Lt="";const zt=o.INSPECT_MAX_BYTES;return Lt=this.toString("hex",0,zt).replace(/(.{2})/g,"$1 ").trim(),this.length>zt&&(Lt+=" ... "),"<Buffer "+Lt+">"},c&&(nt.prototype[c]=nt.prototype.inspect),nt.prototype.compare=function(Lt,zt,Zt,ar,Or){if(Gr(Lt,h)&&(Lt=nt.from(Lt,Lt.offset,Lt.byteLength)),!nt.isBuffer(Lt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Lt);if(zt===void 0&&(zt=0),Zt===void 0&&(Zt=Lt?Lt.length:0),ar===void 0&&(ar=0),Or===void 0&&(Or=this.length),zt<0||Zt>Lt.length||ar<0||Or>this.length)throw new RangeError("out of range index");if(ar>=Or&&zt>=Zt)return 0;if(ar>=Or)return-1;if(zt>=Zt)return 1;if(zt>>>=0,Zt>>>=0,ar>>>=0,Or>>>=0,this===Lt)return 0;let vr=Or-ar,Rr=Zt-zt;const fr=Math.min(vr,Rr),tr=this.slice(ar,Or),yr=Lt.slice(zt,Zt);for(let hn=0;hn<fr;++hn)if(tr[hn]!==yr[hn]){vr=tr[hn],Rr=yr[hn];break}return vr<Rr?-1:Rr<vr?1:0};function Et(Wt,Lt,zt,Zt,ar){if(Wt.length===0)return-1;if(typeof zt=="string"?(Zt=zt,zt=0):zt>2147483647?zt=2147483647:zt<-2147483648&&(zt=-2147483648),zt=+zt,Dn(zt)&&(zt=ar?0:Wt.length-1),zt<0&&(zt=Wt.length+zt),zt>=Wt.length){if(ar)return-1;zt=Wt.length-1}else if(zt<0)if(ar)zt=0;else return-1;if(typeof Lt=="string"&&(Lt=nt.from(Lt,Zt)),nt.isBuffer(Lt))return Lt.length===0?-1:kt(Wt,Lt,zt,Zt,ar);if(typeof Lt=="number")return Lt=Lt&255,typeof h.prototype.indexOf=="function"?ar?h.prototype.indexOf.call(Wt,Lt,zt):h.prototype.lastIndexOf.call(Wt,Lt,zt):kt(Wt,[Lt],zt,Zt,ar);throw new TypeError("val must be string, number or Buffer")}function kt(Wt,Lt,zt,Zt,ar){let Or=1,vr=Wt.length,Rr=Lt.length;if(Zt!==void 0&&(Zt=String(Zt).toLowerCase(),Zt==="ucs2"||Zt==="ucs-2"||Zt==="utf16le"||Zt==="utf-16le")){if(Wt.length<2||Lt.length<2)return-1;Or=2,vr/=2,Rr/=2,zt/=2}function fr(yr,hn){return Or===1?yr[hn]:yr.readUInt16BE(hn*Or)}let tr;if(ar){let yr=-1;for(tr=zt;tr<vr;tr++)if(fr(Wt,tr)===fr(Lt,yr===-1?0:tr-yr)){if(yr===-1&&(yr=tr),tr-yr+1===Rr)return yr*Or}else yr!==-1&&(tr-=tr-yr),yr=-1}else for(zt+Rr>vr&&(zt=vr-Rr),tr=zt;tr>=0;tr--){let yr=!0;for(let hn=0;hn<Rr;hn++)if(fr(Wt,tr+hn)!==fr(Lt,hn)){yr=!1;break}if(yr)return tr}return-1}nt.prototype.includes=function(Lt,zt,Zt){return this.indexOf(Lt,zt,Zt)!==-1},nt.prototype.indexOf=function(Lt,zt,Zt){return Et(this,Lt,zt,Zt,!0)},nt.prototype.lastIndexOf=function(Lt,zt,Zt){return Et(this,Lt,zt,Zt,!1)};function at(Wt,Lt,zt,Zt){zt=Number(zt)||0;const ar=Wt.length-zt;Zt?(Zt=Number(Zt),Zt>ar&&(Zt=ar)):Zt=ar;const Or=Lt.length;Zt>Or/2&&(Zt=Or/2);let vr;for(vr=0;vr<Zt;++vr){const Rr=parseInt(Lt.substr(vr*2,2),16);if(Dn(Rr))return vr;Wt[zt+vr]=Rr}return vr}function s(Wt,Lt,zt,Zt){return Br(En(Lt,Wt.length-zt),Wt,zt,Zt)}function b(Wt,Lt,zt,Zt){return Br(Dr(Lt),Wt,zt,Zt)}function $(Wt,Lt,zt,Zt){return Br(Bn(Lt),Wt,zt,Zt)}function _e(Wt,Lt,zt,Zt){return Br(Qr(Lt,Wt.length-zt),Wt,zt,Zt)}nt.prototype.write=function(Lt,zt,Zt,ar){if(zt===void 0)ar="utf8",Zt=this.length,zt=0;else if(Zt===void 0&&typeof zt=="string")ar=zt,Zt=this.length,zt=0;else if(isFinite(zt))zt=zt>>>0,isFinite(Zt)?(Zt=Zt>>>0,ar===void 0&&(ar="utf8")):(ar=Zt,Zt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Or=this.length-zt;if((Zt===void 0||Zt>Or)&&(Zt=Or),Lt.length>0&&(Zt<0||zt<0)||zt>this.length)throw new RangeError("Attempt to write outside buffer bounds");ar||(ar="utf8");let vr=!1;for(;;)switch(ar){case"hex":return at(this,Lt,zt,Zt);case"utf8":case"utf-8":return s(this,Lt,zt,Zt);case"ascii":case"latin1":case"binary":return b(this,Lt,zt,Zt);case"base64":return $(this,Lt,zt,Zt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,Lt,zt,Zt);default:if(vr)throw new TypeError("Unknown encoding: "+ar);ar=(""+ar).toLowerCase(),vr=!0}},nt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function it(Wt,Lt,zt){return Lt===0&&zt===Wt.length?e.fromByteArray(Wt):e.fromByteArray(Wt.slice(Lt,zt))}function pt(Wt,Lt,zt){zt=Math.min(Wt.length,zt);const Zt=[];let ar=Lt;for(;ar<zt;){const Or=Wt[ar];let vr=null,Rr=Or>239?4:Or>223?3:Or>191?2:1;if(ar+Rr<=zt){let fr,tr,yr,hn;switch(Rr){case 1:Or<128&&(vr=Or);break;case 2:fr=Wt[ar+1],(fr&192)===128&&(hn=(Or&31)<<6|fr&63,hn>127&&(vr=hn));break;case 3:fr=Wt[ar+1],tr=Wt[ar+2],(fr&192)===128&&(tr&192)===128&&(hn=(Or&15)<<12|(fr&63)<<6|tr&63,hn>2047&&(hn<55296||hn>57343)&&(vr=hn));break;case 4:fr=Wt[ar+1],tr=Wt[ar+2],yr=Wt[ar+3],(fr&192)===128&&(tr&192)===128&&(yr&192)===128&&(hn=(Or&15)<<18|(fr&63)<<12|(tr&63)<<6|yr&63,hn>65535&&hn<1114112&&(vr=hn))}}vr===null?(vr=65533,Rr=1):vr>65535&&(vr-=65536,Zt.push(vr>>>10&1023|55296),vr=56320|vr&1023),Zt.push(vr),ar+=Rr}return ct(Zt)}const yt=4096;function ct(Wt){const Lt=Wt.length;if(Lt<=yt)return String.fromCharCode.apply(String,Wt);let zt="",Zt=0;for(;Zt<Lt;)zt+=String.fromCharCode.apply(String,Wt.slice(Zt,Zt+=yt));return zt}function _(Wt,Lt,zt){let Zt="";zt=Math.min(Wt.length,zt);for(let ar=Lt;ar<zt;++ar)Zt+=String.fromCharCode(Wt[ar]&127);return Zt}function rt(Wt,Lt,zt){let Zt="";zt=Math.min(Wt.length,zt);for(let ar=Lt;ar<zt;++ar)Zt+=String.fromCharCode(Wt[ar]);return Zt}function Ct(Wt,Lt,zt){const Zt=Wt.length;(!Lt||Lt<0)&&(Lt=0),(!zt||zt<0||zt>Zt)&&(zt=Zt);let ar="";for(let Or=Lt;Or<zt;++Or)ar+=Fr[Wt[Or]];return ar}function It(Wt,Lt,zt){const Zt=Wt.slice(Lt,zt);let ar="";for(let Or=0;Or<Zt.length-1;Or+=2)ar+=String.fromCharCode(Zt[Or]+Zt[Or+1]*256);return ar}nt.prototype.slice=function(Lt,zt){const Zt=this.length;Lt=~~Lt,zt=zt===void 0?Zt:~~zt,Lt<0?(Lt+=Zt,Lt<0&&(Lt=0)):Lt>Zt&&(Lt=Zt),zt<0?(zt+=Zt,zt<0&&(zt=0)):zt>Zt&&(zt=Zt),zt<Lt&&(zt=Lt);const ar=this.subarray(Lt,zt);return Object.setPrototypeOf(ar,nt.prototype),ar};function Nt(Wt,Lt,zt){if(Wt%1!==0||Wt<0)throw new RangeError("offset is not uint");if(Wt+Lt>zt)throw new RangeError("Trying to access beyond buffer length")}nt.prototype.readUintLE=nt.prototype.readUIntLE=function(Lt,zt,Zt){Lt=Lt>>>0,zt=zt>>>0,Zt||Nt(Lt,zt,this.length);let ar=this[Lt],Or=1,vr=0;for(;++vr<zt&&(Or*=256);)ar+=this[Lt+vr]*Or;return ar},nt.prototype.readUintBE=nt.prototype.readUIntBE=function(Lt,zt,Zt){Lt=Lt>>>0,zt=zt>>>0,Zt||Nt(Lt,zt,this.length);let ar=this[Lt+--zt],Or=1;for(;zt>0&&(Or*=256);)ar+=this[Lt+--zt]*Or;return ar},nt.prototype.readUint8=nt.prototype.readUInt8=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,1,this.length),this[Lt]},nt.prototype.readUint16LE=nt.prototype.readUInt16LE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,2,this.length),this[Lt]|this[Lt+1]<<8},nt.prototype.readUint16BE=nt.prototype.readUInt16BE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,2,this.length),this[Lt]<<8|this[Lt+1]},nt.prototype.readUint32LE=nt.prototype.readUInt32LE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),(this[Lt]|this[Lt+1]<<8|this[Lt+2]<<16)+this[Lt+3]*16777216},nt.prototype.readUint32BE=nt.prototype.readUInt32BE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),this[Lt]*16777216+(this[Lt+1]<<16|this[Lt+2]<<8|this[Lt+3])},nt.prototype.readBigUInt64LE=_i(function(Lt){Lt=Lt>>>0,Ar(Lt,"offset");const zt=this[Lt],Zt=this[Lt+7];(zt===void 0||Zt===void 0)&&yn(Lt,this.length-8);const ar=zt+this[++Lt]*2**8+this[++Lt]*2**16+this[++Lt]*2**24,Or=this[++Lt]+this[++Lt]*2**8+this[++Lt]*2**16+Zt*2**24;return BigInt(ar)+(BigInt(Or)<<BigInt(32))}),nt.prototype.readBigUInt64BE=_i(function(Lt){Lt=Lt>>>0,Ar(Lt,"offset");const zt=this[Lt],Zt=this[Lt+7];(zt===void 0||Zt===void 0)&&yn(Lt,this.length-8);const ar=zt*2**24+this[++Lt]*2**16+this[++Lt]*2**8+this[++Lt],Or=this[++Lt]*2**24+this[++Lt]*2**16+this[++Lt]*2**8+Zt;return(BigInt(ar)<<BigInt(32))+BigInt(Or)}),nt.prototype.readIntLE=function(Lt,zt,Zt){Lt=Lt>>>0,zt=zt>>>0,Zt||Nt(Lt,zt,this.length);let ar=this[Lt],Or=1,vr=0;for(;++vr<zt&&(Or*=256);)ar+=this[Lt+vr]*Or;return Or*=128,ar>=Or&&(ar-=Math.pow(2,8*zt)),ar},nt.prototype.readIntBE=function(Lt,zt,Zt){Lt=Lt>>>0,zt=zt>>>0,Zt||Nt(Lt,zt,this.length);let ar=zt,Or=1,vr=this[Lt+--ar];for(;ar>0&&(Or*=256);)vr+=this[Lt+--ar]*Or;return Or*=128,vr>=Or&&(vr-=Math.pow(2,8*zt)),vr},nt.prototype.readInt8=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,1,this.length),this[Lt]&128?(255-this[Lt]+1)*-1:this[Lt]},nt.prototype.readInt16LE=function(Lt,zt){Lt=Lt>>>0,zt||Nt(Lt,2,this.length);const Zt=this[Lt]|this[Lt+1]<<8;return Zt&32768?Zt|4294901760:Zt},nt.prototype.readInt16BE=function(Lt,zt){Lt=Lt>>>0,zt||Nt(Lt,2,this.length);const Zt=this[Lt+1]|this[Lt]<<8;return Zt&32768?Zt|4294901760:Zt},nt.prototype.readInt32LE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),this[Lt]|this[Lt+1]<<8|this[Lt+2]<<16|this[Lt+3]<<24},nt.prototype.readInt32BE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),this[Lt]<<24|this[Lt+1]<<16|this[Lt+2]<<8|this[Lt+3]},nt.prototype.readBigInt64LE=_i(function(Lt){Lt=Lt>>>0,Ar(Lt,"offset");const zt=this[Lt],Zt=this[Lt+7];(zt===void 0||Zt===void 0)&&yn(Lt,this.length-8);const ar=this[Lt+4]+this[Lt+5]*2**8+this[Lt+6]*2**16+(Zt<<24);return(BigInt(ar)<<BigInt(32))+BigInt(zt+this[++Lt]*2**8+this[++Lt]*2**16+this[++Lt]*2**24)}),nt.prototype.readBigInt64BE=_i(function(Lt){Lt=Lt>>>0,Ar(Lt,"offset");const zt=this[Lt],Zt=this[Lt+7];(zt===void 0||Zt===void 0)&&yn(Lt,this.length-8);const ar=(zt<<24)+this[++Lt]*2**16+this[++Lt]*2**8+this[++Lt];return(BigInt(ar)<<BigInt(32))+BigInt(this[++Lt]*2**24+this[++Lt]*2**16+this[++Lt]*2**8+Zt)}),nt.prototype.readFloatLE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),a.read(this,Lt,!0,23,4)},nt.prototype.readFloatBE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),a.read(this,Lt,!1,23,4)},nt.prototype.readDoubleLE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,8,this.length),a.read(this,Lt,!0,52,8)},nt.prototype.readDoubleBE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,8,this.length),a.read(this,Lt,!1,52,8)};function Ut(Wt,Lt,zt,Zt,ar,Or){if(!nt.isBuffer(Wt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Lt>ar||Lt<Or)throw new RangeError('"value" argument is out of bounds');if(zt+Zt>Wt.length)throw new RangeError("Index out of range")}nt.prototype.writeUintLE=nt.prototype.writeUIntLE=function(Lt,zt,Zt,ar){if(Lt=+Lt,zt=zt>>>0,Zt=Zt>>>0,!ar){const Rr=Math.pow(2,8*Zt)-1;Ut(this,Lt,zt,Zt,Rr,0)}let Or=1,vr=0;for(this[zt]=Lt&255;++vr<Zt&&(Or*=256);)this[zt+vr]=Lt/Or&255;return zt+Zt},nt.prototype.writeUintBE=nt.prototype.writeUIntBE=function(Lt,zt,Zt,ar){if(Lt=+Lt,zt=zt>>>0,Zt=Zt>>>0,!ar){const Rr=Math.pow(2,8*Zt)-1;Ut(this,Lt,zt,Zt,Rr,0)}let Or=Zt-1,vr=1;for(this[zt+Or]=Lt&255;--Or>=0&&(vr*=256);)this[zt+Or]=Lt/vr&255;return zt+Zt},nt.prototype.writeUint8=nt.prototype.writeUInt8=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,1,255,0),this[zt]=Lt&255,zt+1},nt.prototype.writeUint16LE=nt.prototype.writeUInt16LE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,2,65535,0),this[zt]=Lt&255,this[zt+1]=Lt>>>8,zt+2},nt.prototype.writeUint16BE=nt.prototype.writeUInt16BE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,2,65535,0),this[zt]=Lt>>>8,this[zt+1]=Lt&255,zt+2},nt.prototype.writeUint32LE=nt.prototype.writeUInt32LE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,4,4294967295,0),this[zt+3]=Lt>>>24,this[zt+2]=Lt>>>16,this[zt+1]=Lt>>>8,this[zt]=Lt&255,zt+4},nt.prototype.writeUint32BE=nt.prototype.writeUInt32BE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,4,4294967295,0),this[zt]=Lt>>>24,this[zt+1]=Lt>>>16,this[zt+2]=Lt>>>8,this[zt+3]=Lt&255,zt+4};function Gt(Wt,Lt,zt,Zt,ar){hr(Lt,Zt,ar,Wt,zt,7);let Or=Number(Lt&BigInt(4294967295));Wt[zt++]=Or,Or=Or>>8,Wt[zt++]=Or,Or=Or>>8,Wt[zt++]=Or,Or=Or>>8,Wt[zt++]=Or;let vr=Number(Lt>>BigInt(32)&BigInt(4294967295));return Wt[zt++]=vr,vr=vr>>8,Wt[zt++]=vr,vr=vr>>8,Wt[zt++]=vr,vr=vr>>8,Wt[zt++]=vr,zt}function Pt(Wt,Lt,zt,Zt,ar){hr(Lt,Zt,ar,Wt,zt,7);let Or=Number(Lt&BigInt(4294967295));Wt[zt+7]=Or,Or=Or>>8,Wt[zt+6]=Or,Or=Or>>8,Wt[zt+5]=Or,Or=Or>>8,Wt[zt+4]=Or;let vr=Number(Lt>>BigInt(32)&BigInt(4294967295));return Wt[zt+3]=vr,vr=vr>>8,Wt[zt+2]=vr,vr=vr>>8,Wt[zt+1]=vr,vr=vr>>8,Wt[zt]=vr,zt+8}nt.prototype.writeBigUInt64LE=_i(function(Lt,zt=0){return Gt(this,Lt,zt,BigInt(0),BigInt("0xffffffffffffffff"))}),nt.prototype.writeBigUInt64BE=_i(function(Lt,zt=0){return Pt(this,Lt,zt,BigInt(0),BigInt("0xffffffffffffffff"))}),nt.prototype.writeIntLE=function(Lt,zt,Zt,ar){if(Lt=+Lt,zt=zt>>>0,!ar){const fr=Math.pow(2,8*Zt-1);Ut(this,Lt,zt,Zt,fr-1,-fr)}let Or=0,vr=1,Rr=0;for(this[zt]=Lt&255;++Or<Zt&&(vr*=256);)Lt<0&&Rr===0&&this[zt+Or-1]!==0&&(Rr=1),this[zt+Or]=(Lt/vr>>0)-Rr&255;return zt+Zt},nt.prototype.writeIntBE=function(Lt,zt,Zt,ar){if(Lt=+Lt,zt=zt>>>0,!ar){const fr=Math.pow(2,8*Zt-1);Ut(this,Lt,zt,Zt,fr-1,-fr)}let Or=Zt-1,vr=1,Rr=0;for(this[zt+Or]=Lt&255;--Or>=0&&(vr*=256);)Lt<0&&Rr===0&&this[zt+Or+1]!==0&&(Rr=1),this[zt+Or]=(Lt/vr>>0)-Rr&255;return zt+Zt},nt.prototype.writeInt8=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,1,127,-128),Lt<0&&(Lt=255+Lt+1),this[zt]=Lt&255,zt+1},nt.prototype.writeInt16LE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,2,32767,-32768),this[zt]=Lt&255,this[zt+1]=Lt>>>8,zt+2},nt.prototype.writeInt16BE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,2,32767,-32768),this[zt]=Lt>>>8,this[zt+1]=Lt&255,zt+2},nt.prototype.writeInt32LE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,4,2147483647,-2147483648),this[zt]=Lt&255,this[zt+1]=Lt>>>8,this[zt+2]=Lt>>>16,this[zt+3]=Lt>>>24,zt+4},nt.prototype.writeInt32BE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,4,2147483647,-2147483648),Lt<0&&(Lt=4294967295+Lt+1),this[zt]=Lt>>>24,this[zt+1]=Lt>>>16,this[zt+2]=Lt>>>8,this[zt+3]=Lt&255,zt+4},nt.prototype.writeBigInt64LE=_i(function(Lt,zt=0){return Gt(this,Lt,zt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),nt.prototype.writeBigInt64BE=_i(function(Lt,zt=0){return Pt(this,Lt,zt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function qt(Wt,Lt,zt,Zt,ar,Or){if(zt+Zt>Wt.length)throw new RangeError("Index out of range");if(zt<0)throw new RangeError("Index out of range")}function Kt(Wt,Lt,zt,Zt,ar){return Lt=+Lt,zt=zt>>>0,ar||qt(Wt,Lt,zt,4),a.write(Wt,Lt,zt,Zt,23,4),zt+4}nt.prototype.writeFloatLE=function(Lt,zt,Zt){return Kt(this,Lt,zt,!0,Zt)},nt.prototype.writeFloatBE=function(Lt,zt,Zt){return Kt(this,Lt,zt,!1,Zt)};function jt(Wt,Lt,zt,Zt,ar){return Lt=+Lt,zt=zt>>>0,ar||qt(Wt,Lt,zt,8),a.write(Wt,Lt,zt,Zt,52,8),zt+8}nt.prototype.writeDoubleLE=function(Lt,zt,Zt){return jt(this,Lt,zt,!0,Zt)},nt.prototype.writeDoubleBE=function(Lt,zt,Zt){return jt(this,Lt,zt,!1,Zt)},nt.prototype.copy=function(Lt,zt,Zt,ar){if(!nt.isBuffer(Lt))throw new TypeError("argument should be a Buffer");if(Zt||(Zt=0),!ar&&ar!==0&&(ar=this.length),zt>=Lt.length&&(zt=Lt.length),zt||(zt=0),ar>0&&ar<Zt&&(ar=Zt),ar===Zt||Lt.length===0||this.length===0)return 0;if(zt<0)throw new RangeError("targetStart out of bounds");if(Zt<0||Zt>=this.length)throw new RangeError("Index out of range");if(ar<0)throw new RangeError("sourceEnd out of bounds");ar>this.length&&(ar=this.length),Lt.length-zt<ar-Zt&&(ar=Lt.length-zt+Zt);const Or=ar-Zt;return this===Lt&&typeof h.prototype.copyWithin=="function"?this.copyWithin(zt,Zt,ar):h.prototype.set.call(Lt,this.subarray(Zt,ar),zt),Or},nt.prototype.fill=function(Lt,zt,Zt,ar){if(typeof Lt=="string"){if(typeof zt=="string"?(ar=zt,zt=0,Zt=this.length):typeof Zt=="string"&&(ar=Zt,Zt=this.length),ar!==void 0&&typeof ar!="string")throw new TypeError("encoding must be a string");if(typeof ar=="string"&&!nt.isEncoding(ar))throw new TypeError("Unknown encoding: "+ar);if(Lt.length===1){const vr=Lt.charCodeAt(0);(ar==="utf8"&&vr<128||ar==="latin1")&&(Lt=vr)}}else typeof Lt=="number"?Lt=Lt&255:typeof Lt=="boolean"&&(Lt=Number(Lt));if(zt<0||this.length<zt||this.length<Zt)throw new RangeError("Out of range index");if(Zt<=zt)return this;zt=zt>>>0,Zt=Zt===void 0?this.length:Zt>>>0,Lt||(Lt=0);let Or;if(typeof Lt=="number")for(Or=zt;Or<Zt;++Or)this[Or]=Lt;else{const vr=nt.isBuffer(Lt)?Lt:nt.from(Lt,ar),Rr=vr.length;if(Rr===0)throw new TypeError('The value "'+Lt+'" is invalid for argument "value"');for(Or=0;Or<Zt-zt;++Or)this[Or+zt]=vr[Or%Rr]}return this};const Ht={};function Bt(Wt,Lt,zt){Ht[Wt]=class extends zt{constructor(){super(),Object.defineProperty(this,"message",{value:Lt.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Wt}]`,this.stack,delete this.name}get code(){return Wt}set code(ar){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ar,writable:!0})}toString(){return`${this.name} [${Wt}]: ${this.message}`}}}Bt("ERR_BUFFER_OUT_OF_BOUNDS",function(Wt){return Wt?`${Wt} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Bt("ERR_INVALID_ARG_TYPE",function(Wt,Lt){return`The "${Wt}" argument must be of type number. Received type ${typeof Lt}`},TypeError),Bt("ERR_OUT_OF_RANGE",function(Wt,Lt,zt){let Zt=`The value of "${Wt}" is out of range.`,ar=zt;return Number.isInteger(zt)&&Math.abs(zt)>2**32?ar=Jt(String(zt)):typeof zt=="bigint"&&(ar=String(zt),(zt>BigInt(2)**BigInt(32)||zt<-(BigInt(2)**BigInt(32)))&&(ar=Jt(ar)),ar+="n"),Zt+=` It must be ${Lt}. Received ${ar}`,Zt},RangeError);function Jt(Wt){let Lt="",zt=Wt.length;const Zt=Wt[0]==="-"?1:0;for(;zt>=Zt+4;zt-=3)Lt=`_${Wt.slice(zt-3,zt)}${Lt}`;return`${Wt.slice(0,zt)}${Lt}`}function sr(Wt,Lt,zt){Ar(Lt,"offset"),(Wt[Lt]===void 0||Wt[Lt+zt]===void 0)&&yn(Lt,Wt.length-(zt+1))}function hr(Wt,Lt,zt,Zt,ar,Or){if(Wt>zt||Wt<Lt){const vr=typeof Lt=="bigint"?"n":"";let Rr;throw Lt===0||Lt===BigInt(0)?Rr=`>= 0${vr} and < 2${vr} ** ${(Or+1)*8}${vr}`:Rr=`>= -(2${vr} ** ${(Or+1)*8-1}${vr}) and < 2 ** ${(Or+1)*8-1}${vr}`,new Ht.ERR_OUT_OF_RANGE("value",Rr,Wt)}sr(Zt,ar,Or)}function Ar(Wt,Lt){if(typeof Wt!="number")throw new Ht.ERR_INVALID_ARG_TYPE(Lt,"number",Wt)}function yn(Wt,Lt,zt){throw Math.floor(Wt)!==Wt?(Ar(Wt,zt),new Ht.ERR_OUT_OF_RANGE("offset","an integer",Wt)):Lt<0?new Ht.ERR_BUFFER_OUT_OF_BOUNDS:new Ht.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Lt}`,Wt)}const Lr=/[^+/0-9A-Za-z-_]/g;function wr(Wt){if(Wt=Wt.split("=")[0],Wt=Wt.trim().replace(Lr,""),Wt.length<2)return"";for(;Wt.length%4!==0;)Wt=Wt+"=";return Wt}function En(Wt,Lt){Lt=Lt||1/0;let zt;const Zt=Wt.length;let ar=null;const Or=[];for(let vr=0;vr<Zt;++vr){if(zt=Wt.charCodeAt(vr),zt>55295&&zt<57344){if(!ar){if(zt>56319){(Lt-=3)>-1&&Or.push(239,191,189);continue}else if(vr+1===Zt){(Lt-=3)>-1&&Or.push(239,191,189);continue}ar=zt;continue}if(zt<56320){(Lt-=3)>-1&&Or.push(239,191,189),ar=zt;continue}zt=(ar-55296<<10|zt-56320)+65536}else ar&&(Lt-=3)>-1&&Or.push(239,191,189);if(ar=null,zt<128){if((Lt-=1)<0)break;Or.push(zt)}else if(zt<2048){if((Lt-=2)<0)break;Or.push(zt>>6|192,zt&63|128)}else if(zt<65536){if((Lt-=3)<0)break;Or.push(zt>>12|224,zt>>6&63|128,zt&63|128)}else if(zt<1114112){if((Lt-=4)<0)break;Or.push(zt>>18|240,zt>>12&63|128,zt>>6&63|128,zt&63|128)}else throw new Error("Invalid code point")}return Or}function Dr(Wt){const Lt=[];for(let zt=0;zt<Wt.length;++zt)Lt.push(Wt.charCodeAt(zt)&255);return Lt}function Qr(Wt,Lt){let zt,Zt,ar;const Or=[];for(let vr=0;vr<Wt.length&&!((Lt-=2)<0);++vr)zt=Wt.charCodeAt(vr),Zt=zt>>8,ar=zt%256,Or.push(ar),Or.push(Zt);return Or}function Bn(Wt){return e.toByteArray(wr(Wt))}function Br(Wt,Lt,zt,Zt){let ar;for(ar=0;ar<Zt&&!(ar+zt>=Lt.length||ar>=Wt.length);++ar)Lt[ar+zt]=Wt[ar];return ar}function Gr(Wt,Lt){return Wt instanceof Lt||Wt!=null&&Wt.constructor!=null&&Wt.constructor.name!=null&&Wt.constructor.name===Lt.name}function Dn(Wt){return Wt!==Wt}const Fr=function(){const Wt="0123456789abcdef",Lt=new Array(256);for(let zt=0;zt<16;++zt){const Zt=zt*16;for(let ar=0;ar<16;++ar)Lt[Zt+ar]=Wt[zt]+Wt[ar]}return Lt}();function _i(Wt){return typeof BigInt>"u"?Gn:Wt}function Gn(){throw new Error("BigInt not supported")}})(buffer$1);const Buffer=buffer$1.Buffer,Blob$1=buffer$1.Blob,BlobOptions=buffer$1.BlobOptions,Buffer$1=buffer$1.Buffer,File=buffer$1.File,FileOptions=buffer$1.FileOptions,INSPECT_MAX_BYTES=buffer$1.INSPECT_MAX_BYTES,SlowBuffer=buffer$1.SlowBuffer,TranscodeEncoding=buffer$1.TranscodeEncoding,atob$1=buffer$1.atob,btoa$1=buffer$1.btoa,constants$2=buffer$1.constants,isAscii=buffer$1.isAscii,isUtf8=buffer$1.isUtf8,kMaxLength=buffer$1.kMaxLength,kStringMaxLength=buffer$1.kStringMaxLength,resolveObjectURL=buffer$1.resolveObjectURL,transcode=buffer$1.transcode,dist$1=Object.freeze(Object.defineProperty({__proto__:null,Blob:Blob$1,BlobOptions,Buffer:Buffer$1,File,FileOptions,INSPECT_MAX_BYTES,SlowBuffer,TranscodeEncoding,atob:atob$1,btoa:btoa$1,constants:constants$2,default:Buffer,isAscii,isUtf8,kMaxLength,kStringMaxLength,resolveObjectURL,transcode},Symbol.toStringTag,{value:"Module"}));window.Buffer=Buffer$1;var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function getAugmentedNamespace(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var a=function c(){return this instanceof c?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(o).forEach(function(c){var j=Object.getOwnPropertyDescriptor(o,c);Object.defineProperty(a,c,j.get?j:{enumerable:!0,get:function(){return o[c]}})}),a}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(o){return o===null||typeof o!="object"?null:(o=z$1&&o[z$1]||o["@@iterator"],typeof o=="function"?o:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(o,e,a){this.props=o,this.context=e,this.refs=D$1,this.updater=a||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(o,e){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,e,"setState")};E$1.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(o,e,a){this.props=o,this.context=e,this.refs=D$1,this.updater=a||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(o,e,a){var c,j={},h=null,et=null;if(e!=null)for(c in e.ref!==void 0&&(et=e.ref),e.key!==void 0&&(h=""+e.key),e)J.call(e,c)&&!L$1.hasOwnProperty(c)&&(j[c]=e[c]);var ot=arguments.length-2;if(ot===1)j.children=a;else if(1<ot){for(var st=Array(ot),lt=0;lt<ot;lt++)st[lt]=arguments[lt+2];j.children=st}if(o&&o.defaultProps)for(c in ot=o.defaultProps,ot)j[c]===void 0&&(j[c]=ot[c]);return{$$typeof:l$1,type:o,key:h,ref:et,props:j,_owner:K$1.current}}function N$1(o,e){return{$$typeof:l$1,type:o.type,key:e,ref:o.ref,props:o.props,_owner:o._owner}}function O$1(o){return typeof o=="object"&&o!==null&&o.$$typeof===l$1}function escape$1(o){var e={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(a){return e[a]})}var P$1=/\/+/g;function Q$1(o,e){return typeof o=="object"&&o!==null&&o.key!=null?escape$1(""+o.key):e.toString(36)}function R$2(o,e,a,c,j){var h=typeof o;(h==="undefined"||h==="boolean")&&(o=null);var et=!1;if(o===null)et=!0;else switch(h){case"string":case"number":et=!0;break;case"object":switch(o.$$typeof){case l$1:case n$1:et=!0}}if(et)return et=o,j=j(et),o=c===""?"."+Q$1(et,0):c,I$1(j)?(a="",o!=null&&(a=o.replace(P$1,"$&/")+"/"),R$2(j,e,a,"",function(lt){return lt})):j!=null&&(O$1(j)&&(j=N$1(j,a+(!j.key||et&&et.key===j.key?"":(""+j.key).replace(P$1,"$&/")+"/")+o)),e.push(j)),1;if(et=0,c=c===""?".":c+":",I$1(o))for(var ot=0;ot<o.length;ot++){h=o[ot];var st=c+Q$1(h,ot);et+=R$2(h,e,a,st,j)}else if(st=A$1(o),typeof st=="function")for(o=st.call(o),ot=0;!(h=o.next()).done;)h=h.value,st=c+Q$1(h,ot++),et+=R$2(h,e,a,st,j);else if(h==="object")throw e=String(o),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return et}function S$1(o,e,a){if(o==null)return o;var c=[],j=0;return R$2(o,c,"","",function(h){return e.call(a,h,j++)}),c}function T$1(o){if(o._status===-1){var e=o._result;e=e(),e.then(function(a){(o._status===0||o._status===-1)&&(o._status=1,o._result=a)},function(a){(o._status===0||o._status===-1)&&(o._status=2,o._result=a)}),o._status===-1&&(o._status=0,o._result=e)}if(o._status===1)return o._result.default;throw o._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(o,e,a){S$1(o,function(){e.apply(this,arguments)},a)},count:function(o){var e=0;return S$1(o,function(){e++}),e},toArray:function(o){return S$1(o,function(e){return e})||[]},only:function(o){if(!O$1(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(o,e,a){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var c=C$1({},o.props),j=o.key,h=o.ref,et=o._owner;if(e!=null){if(e.ref!==void 0&&(h=e.ref,et=K$1.current),e.key!==void 0&&(j=""+e.key),o.type&&o.type.defaultProps)var ot=o.type.defaultProps;for(st in e)J.call(e,st)&&!L$1.hasOwnProperty(st)&&(c[st]=e[st]===void 0&&ot!==void 0?ot[st]:e[st])}var st=arguments.length-2;if(st===1)c.children=a;else if(1<st){ot=Array(st);for(var lt=0;lt<st;lt++)ot[lt]=arguments[lt+2];c.children=ot}return{$$typeof:l$1,type:o.type,key:j,ref:h,props:c,_owner:et}};react_production_min.createContext=function(o){return o={$$typeof:u,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:t,_context:o},o.Consumer=o};react_production_min.createElement=M$1;react_production_min.createFactory=function(o){var e=M$1.bind(null,o);return e.type=o,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:v$1,render:o}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(o){return{$$typeof:y,_payload:{_status:-1,_result:o},_init:T$1}};react_production_min.memo=function(o,e){return{$$typeof:x,type:o,compare:e===void 0?null:e}};react_production_min.startTransition=function(o){var e=V$1.transition;V$1.transition={};try{o()}finally{V$1.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(o,e){return U$1.current.useCallback(o,e)};react_production_min.useContext=function(o){return U$1.current.useContext(o)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(o){return U$1.current.useDeferredValue(o)};react_production_min.useEffect=function(o,e){return U$1.current.useEffect(o,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(o,e,a){return U$1.current.useImperativeHandle(o,e,a)};react_production_min.useInsertionEffect=function(o,e){return U$1.current.useInsertionEffect(o,e)};react_production_min.useLayoutEffect=function(o,e){return U$1.current.useLayoutEffect(o,e)};react_production_min.useMemo=function(o,e){return U$1.current.useMemo(o,e)};react_production_min.useReducer=function(o,e,a){return U$1.current.useReducer(o,e,a)};react_production_min.useRef=function(o){return U$1.current.useRef(o)};react_production_min.useState=function(o){return U$1.current.useState(o)};react_production_min.useSyncExternalStore=function(o,e,a){return U$1.current.useSyncExternalStore(o,e,a)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs$1(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(o,e,a){var c,j={},h=null,et=null;a!==void 0&&(h=""+a),e.key!==void 0&&(h=""+e.key),e.ref!==void 0&&(et=e.ref);for(c in e)m$1.call(e,c)&&!p$1.hasOwnProperty(c)&&(j[c]=e[c]);if(o&&o.defaultProps)for(c in e=o.defaultProps,e)j[c]===void 0&&(j[c]=e[c]);return{$$typeof:k,type:o,key:h,ref:et,props:j,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function e(yt,ct){var _=yt.length;yt.push(ct);e:for(;0<_;){var rt=_-1>>>1,Ct=yt[rt];if(0<j(Ct,ct))yt[rt]=ct,yt[_]=Ct,_=rt;else break e}}function a(yt){return yt.length===0?null:yt[0]}function c(yt){if(yt.length===0)return null;var ct=yt[0],_=yt.pop();if(_!==ct){yt[0]=_;e:for(var rt=0,Ct=yt.length,It=Ct>>>1;rt<It;){var Nt=2*(rt+1)-1,Ut=yt[Nt],Gt=Nt+1,Pt=yt[Gt];if(0>j(Ut,_))Gt<Ct&&0>j(Pt,Ut)?(yt[rt]=Pt,yt[Gt]=_,rt=Gt):(yt[rt]=Ut,yt[Nt]=_,rt=Nt);else if(Gt<Ct&&0>j(Pt,_))yt[rt]=Pt,yt[Gt]=_,rt=Gt;else break e}}return ct}function j(yt,ct){var _=yt.sortIndex-ct.sortIndex;return _!==0?_:yt.id-ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;o.unstable_now=function(){return h.now()}}else{var et=Date,ot=et.now();o.unstable_now=function(){return et.now()-ot}}var st=[],lt=[],nt=1,gt=null,dt=3,mt=!1,vt=!1,tt=!1,bt=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,St=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function At(yt){for(var ct=a(lt);ct!==null;){if(ct.callback===null)c(lt);else if(ct.startTime<=yt)c(lt),ct.sortIndex=ct.expirationTime,e(st,ct);else break;ct=a(lt)}}function Tt(yt){if(tt=!1,At(yt),!vt)if(a(st)!==null)vt=!0,it(ft);else{var ct=a(lt);ct!==null&&pt(Tt,ct.startTime-yt)}}function ft(yt,ct){vt=!1,tt&&(tt=!1,ht(Mt),Mt=-1),mt=!0;var _=dt;try{for(At(ct),gt=a(st);gt!==null&&(!(gt.expirationTime>ct)||yt&&!at());){var rt=gt.callback;if(typeof rt=="function"){gt.callback=null,dt=gt.priorityLevel;var Ct=rt(gt.expirationTime<=ct);ct=o.unstable_now(),typeof Ct=="function"?gt.callback=Ct:gt===a(st)&&c(st),At(ct)}else c(st);gt=a(st)}if(gt!==null)var It=!0;else{var Nt=a(lt);Nt!==null&&pt(Tt,Nt.startTime-ct),It=!1}return It}finally{gt=null,dt=_,mt=!1}}var _t=!1,Rt=null,Mt=-1,Et=5,kt=-1;function at(){return!(o.unstable_now()-kt<Et)}function s(){if(Rt!==null){var yt=o.unstable_now();kt=yt;var ct=!0;try{ct=Rt(!0,yt)}finally{ct?b():(_t=!1,Rt=null)}}else _t=!1}var b;if(typeof St=="function")b=function(){St(s)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,_e=$.port2;$.port1.onmessage=s,b=function(){_e.postMessage(null)}}else b=function(){bt(s,0)};function it(yt){Rt=yt,_t||(_t=!0,b())}function pt(yt,ct){Mt=bt(function(){yt(o.unstable_now())},ct)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(yt){yt.callback=null},o.unstable_continueExecution=function(){vt||mt||(vt=!0,it(ft))},o.unstable_forceFrameRate=function(yt){0>yt||125<yt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Et=0<yt?Math.floor(1e3/yt):5},o.unstable_getCurrentPriorityLevel=function(){return dt},o.unstable_getFirstCallbackNode=function(){return a(st)},o.unstable_next=function(yt){switch(dt){case 1:case 2:case 3:var ct=3;break;default:ct=dt}var _=dt;dt=ct;try{return yt()}finally{dt=_}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(yt,ct){switch(yt){case 1:case 2:case 3:case 4:case 5:break;default:yt=3}var _=dt;dt=yt;try{return ct()}finally{dt=_}},o.unstable_scheduleCallback=function(yt,ct,_){var rt=o.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?rt+_:rt):_=rt,yt){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=_+Ct,yt={id:nt++,callback:ct,priorityLevel:yt,startTime:_,expirationTime:Ct,sortIndex:-1},_>rt?(yt.sortIndex=_,e(lt,yt),a(st)===null&&yt===a(lt)&&(tt?(ht(Mt),Mt=-1):tt=!0,pt(Tt,_-rt))):(yt.sortIndex=Ct,e(st,yt),vt||mt||(vt=!0,it(ft))),yt},o.unstable_shouldYield=at,o.unstable_wrapCallback=function(yt){var ct=dt;return function(){var _=dt;dt=ct;try{return yt.apply(this,arguments)}finally{dt=_}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(o){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+o,a=1;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+o+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(o,e){ha(o,e),ha(o+"Capture",e)}function ha(o,e){for(ea[o]=e,o=0;o<e.length;o++)da.add(e[o])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(o){return ja.call(ma,o)?!0:ja.call(la,o)?!1:ka.test(o)?ma[o]=!0:(la[o]=!0,!1)}function pa(o,e,a,c){if(a!==null&&a.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function qa(o,e,a,c){if(e===null||typeof e>"u"||pa(o,e,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(o,e,a,c,j,h,et){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=c,this.attributeNamespace=j,this.mustUseProperty=a,this.propertyName=o,this.type=e,this.sanitizeURL=h,this.removeEmptyString=et}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){z[o]=new v(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var e=o[0];z[e]=new v(e,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){z[o]=new v(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){z[o]=new v(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){z[o]=new v(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){z[o]=new v(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){z[o]=new v(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){z[o]=new v(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){z[o]=new v(o,5,!1,o.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){z[o]=new v(o,1,!1,o.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){z[o]=new v(o,1,!1,o.toLowerCase(),null,!0,!0)});function ta(o,e,a,c){var j=z.hasOwnProperty(e)?z[e]:null;(j!==null?j.type!==0:c||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,a,j,c)&&(a=null),c||j===null?oa(e)&&(a===null?o.removeAttribute(e):o.setAttribute(e,""+a)):j.mustUseProperty?o[j.propertyName]=a===null?j.type===3?!1:"":a:(e=j.attributeName,c=j.attributeNamespace,a===null?o.removeAttribute(e):(j=j.type,a=j===3||j===4&&a===!0?"":""+a,c?o.setAttributeNS(c,e,a):o.setAttribute(e,a))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(o){return o===null||typeof o!="object"?null:(o=Ja&&o[Ja]||o["@@iterator"],typeof o=="function"?o:null)}var A=Object.assign,La;function Ma(o){if(La===void 0)try{throw Error()}catch(a){var e=a.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+o}var Na=!1;function Oa(o,e){if(!o||Na)return"";Na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(lt){var c=lt}Reflect.construct(o,[],e)}else{try{e.call()}catch(lt){c=lt}o.call(e.prototype)}else{try{throw Error()}catch(lt){c=lt}o()}}catch(lt){if(lt&&c&&typeof lt.stack=="string"){for(var j=lt.stack.split(`
`),h=c.stack.split(`
`),et=j.length-1,ot=h.length-1;1<=et&&0<=ot&&j[et]!==h[ot];)ot--;for(;1<=et&&0<=ot;et--,ot--)if(j[et]!==h[ot]){if(et!==1||ot!==1)do if(et--,ot--,0>ot||j[et]!==h[ot]){var st=`
`+j[et].replace(" at new "," at ");return o.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",o.displayName)),st}while(1<=et&&0<=ot);break}}}finally{Na=!1,Error.prepareStackTrace=a}return(o=o?o.displayName||o.name:"")?Ma(o):""}function Pa(o){switch(o.tag){case 5:return Ma(o.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return o=Oa(o.type,!1),o;case 11:return o=Oa(o.type.render,!1),o;case 1:return o=Oa(o.type,!0),o;default:return""}}function Qa(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ca:return(o.displayName||"Context")+".Consumer";case Ba:return(o._context.displayName||"Context")+".Provider";case Da:var e=o.render;return o=o.displayName,o||(o=e.displayName||e.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ga:return e=o.displayName||null,e!==null?e:Qa(o.type)||"Memo";case Ha:e=o._payload,o=o._init;try{return Qa(o(e))}catch{}}return null}function Ra(o){var e=o.type;switch(o.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=e.render,o=o.displayName||o.name||"",e.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ta(o){var e=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(o){var e=Ta(o)?"checked":"value",a=Object.getOwnPropertyDescriptor(o.constructor.prototype,e),c=""+o[e];if(!o.hasOwnProperty(e)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var j=a.get,h=a.set;return Object.defineProperty(o,e,{configurable:!0,get:function(){return j.call(this)},set:function(et){c=""+et,h.call(this,et)}}),Object.defineProperty(o,e,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(et){c=""+et},stopTracking:function(){o._valueTracker=null,delete o[e]}}}}function Va(o){o._valueTracker||(o._valueTracker=Ua(o))}function Wa(o){if(!o)return!1;var e=o._valueTracker;if(!e)return!0;var a=e.getValue(),c="";return o&&(c=Ta(o)?o.checked?"true":"false":o.value),o=c,o!==a?(e.setValue(o),!0):!1}function Xa(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya(o,e){var a=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??o._wrapperState.initialChecked})}function Za(o,e){var a=e.defaultValue==null?"":e.defaultValue,c=e.checked!=null?e.checked:e.defaultChecked;a=Sa(e.value!=null?e.value:a),o._wrapperState={initialChecked:c,initialValue:a,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(o,e){e=e.checked,e!=null&&ta(o,"checked",e,!1)}function bb(o,e){ab(o,e);var a=Sa(e.value),c=e.type;if(a!=null)c==="number"?(a===0&&o.value===""||o.value!=a)&&(o.value=""+a):o.value!==""+a&&(o.value=""+a);else if(c==="submit"||c==="reset"){o.removeAttribute("value");return}e.hasOwnProperty("value")?cb(o,e.type,a):e.hasOwnProperty("defaultValue")&&cb(o,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(o.defaultChecked=!!e.defaultChecked)}function db(o,e,a){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var c=e.type;if(!(c!=="submit"&&c!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+o._wrapperState.initialValue,a||e===o.value||(o.value=e),o.defaultValue=e}a=o.name,a!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,a!==""&&(o.name=a)}function cb(o,e,a){(e!=="number"||Xa(o.ownerDocument)!==o)&&(a==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+a&&(o.defaultValue=""+a))}var eb=Array.isArray;function fb(o,e,a,c){if(o=o.options,e){e={};for(var j=0;j<a.length;j++)e["$"+a[j]]=!0;for(a=0;a<o.length;a++)j=e.hasOwnProperty("$"+o[a].value),o[a].selected!==j&&(o[a].selected=j),j&&c&&(o[a].defaultSelected=!0)}else{for(a=""+Sa(a),e=null,j=0;j<o.length;j++){if(o[j].value===a){o[j].selected=!0,c&&(o[j].defaultSelected=!0);return}e!==null||o[j].disabled||(e=o[j])}e!==null&&(e.selected=!0)}}function gb(o,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb(o,e){var a=e.value;if(a==null){if(a=e.children,e=e.defaultValue,a!=null){if(e!=null)throw Error(p(92));if(eb(a)){if(1<a.length)throw Error(p(93));a=a[0]}e=a}e==null&&(e=""),a=e}o._wrapperState={initialValue:Sa(a)}}function ib(o,e){var a=Sa(e.value),c=Sa(e.defaultValue);a!=null&&(a=""+a,a!==o.value&&(o.value=a),e.defaultValue==null&&o.defaultValue!==a&&(o.defaultValue=a)),c!=null&&(o.defaultValue=""+c)}function jb(o){var e=o.textContent;e===o._wrapperState.initialValue&&e!==""&&e!==null&&(o.value=e)}function kb(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(o,e){return o==null||o==="http://www.w3.org/1999/xhtml"?kb(e):o==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mb,nb=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,a,c,j){MSApp.execUnsafeLocalFunction(function(){return o(e,a,c,j)})}:o}(function(o,e){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;e.firstChild;)o.appendChild(e.firstChild)}});function ob(o,e){if(e){var a=o.firstChild;if(a&&a===o.lastChild&&a.nodeType===3){a.nodeValue=e;return}}o.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(o){qb.forEach(function(e){e=e+o.charAt(0).toUpperCase()+o.substring(1),pb[e]=pb[o]})});function rb(o,e,a){return e==null||typeof e=="boolean"||e===""?"":a||typeof e!="number"||e===0||pb.hasOwnProperty(o)&&pb[o]?(""+e).trim():e+"px"}function sb(o,e){o=o.style;for(var a in e)if(e.hasOwnProperty(a)){var c=a.indexOf("--")===0,j=rb(a,e[a],c);a==="float"&&(a="cssFloat"),c?o.setProperty(a,j):o[a]=j}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(o,e){if(e){if(tb[o]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,o));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(o,e){if(o.indexOf("-")===-1)return typeof e.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb=null,zb=null,Ab=null;function Bb(o){if(o=Cb(o)){if(typeof yb!="function")throw Error(p(280));var e=o.stateNode;e&&(e=Db(e),yb(o.stateNode,o.type,e))}}function Eb(o){zb?Ab?Ab.push(o):Ab=[o]:zb=o}function Fb(){if(zb){var o=zb,e=Ab;if(Ab=zb=null,Bb(o),e)for(o=0;o<e.length;o++)Bb(e[o])}}function Gb(o,e){return o(e)}function Hb(){}var Ib=!1;function Jb(o,e,a){if(Ib)return o(e,a);Ib=!0;try{return Gb(o,e,a)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(o,e){var a=o.stateNode;if(a===null)return null;var c=Db(a);if(c===null)return null;a=c[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(o=o.type,c=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!c;break e;default:o=!1}if(o)return null;if(a&&typeof a!="function")throw Error(p(231,e,typeof a));return a}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(o,e,a,c,j,h,et,ot,st){var lt=Array.prototype.slice.call(arguments,3);try{e.apply(a,lt)}catch(nt){this.onError(nt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(o){Ob=!0,Pb=o}};function Tb(o,e,a,c,j,h,et,ot,st){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(o,e,a,c,j,h,et,ot,st){if(Tb.apply(this,arguments),Ob){if(Ob){var lt=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=lt)}}function Vb(o){var e=o,a=o;if(o.alternate)for(;e.return;)e=e.return;else{o=e;do e=o,e.flags&4098&&(a=e.return),o=e.return;while(o)}return e.tag===3?a:null}function Wb(o){if(o.tag===13){var e=o.memoizedState;if(e===null&&(o=o.alternate,o!==null&&(e=o.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(o){if(Vb(o)!==o)throw Error(p(188))}function Yb(o){var e=o.alternate;if(!e){if(e=Vb(o),e===null)throw Error(p(188));return e!==o?null:o}for(var a=o,c=e;;){var j=a.return;if(j===null)break;var h=j.alternate;if(h===null){if(c=j.return,c!==null){a=c;continue}break}if(j.child===h.child){for(h=j.child;h;){if(h===a)return Xb(j),o;if(h===c)return Xb(j),e;h=h.sibling}throw Error(p(188))}if(a.return!==c.return)a=j,c=h;else{for(var et=!1,ot=j.child;ot;){if(ot===a){et=!0,a=j,c=h;break}if(ot===c){et=!0,c=j,a=h;break}ot=ot.sibling}if(!et){for(ot=h.child;ot;){if(ot===a){et=!0,a=h,c=j;break}if(ot===c){et=!0,c=h,a=j;break}ot=ot.sibling}if(!et)throw Error(p(189))}}if(a.alternate!==c)throw Error(p(190))}if(a.tag!==3)throw Error(p(188));return a.stateNode.current===a?o:e}function Zb(o){return o=Yb(o),o!==null?$b(o):null}function $b(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var e=$b(o);if(e!==null)return e;o=o.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(o){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,o,void 0,(o.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(o){return o>>>=0,o===0?32:31-(pc(o)/qc|0)|0}var rc=64,sc=4194304;function tc(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uc(o,e){var a=o.pendingLanes;if(a===0)return 0;var c=0,j=o.suspendedLanes,h=o.pingedLanes,et=a&268435455;if(et!==0){var ot=et&~j;ot!==0?c=tc(ot):(h&=et,h!==0&&(c=tc(h)))}else et=a&~j,et!==0?c=tc(et):h!==0&&(c=tc(h));if(c===0)return 0;if(e!==0&&e!==c&&!(e&j)&&(j=c&-c,h=e&-e,j>=h||j===16&&(h&4194240)!==0))return e;if(c&4&&(c|=a&16),e=o.entangledLanes,e!==0)for(o=o.entanglements,e&=c;0<e;)a=31-oc(e),j=1<<a,c|=o[a],e&=~j;return c}function vc(o,e){switch(o){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(o,e){for(var a=o.suspendedLanes,c=o.pingedLanes,j=o.expirationTimes,h=o.pendingLanes;0<h;){var et=31-oc(h),ot=1<<et,st=j[et];st===-1?(!(ot&a)||ot&c)&&(j[et]=vc(ot,e)):st<=e&&(o.expiredLanes|=ot),h&=~ot}}function xc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function yc(){var o=rc;return rc<<=1,!(rc&4194240)&&(rc=64),o}function zc(o){for(var e=[],a=0;31>a;a++)e.push(o);return e}function Ac(o,e,a){o.pendingLanes|=e,e!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,e=31-oc(e),o[e]=a}function Bc(o,e){var a=o.pendingLanes&~e;o.pendingLanes=e,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=e,o.mutableReadLanes&=e,o.entangledLanes&=e,e=o.entanglements;var c=o.eventTimes;for(o=o.expirationTimes;0<a;){var j=31-oc(a),h=1<<j;e[j]=0,c[j]=-1,o[j]=-1,a&=~h}}function Cc(o,e){var a=o.entangledLanes|=e;for(o=o.entanglements;a;){var c=31-oc(a),j=1<<c;j&e|o[c]&e&&(o[c]|=e),a&=~j}}var C=0;function Dc(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(o,e){switch(o){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(o,e,a,c,j,h){return o===null||o.nativeEvent!==h?(o={blockedOn:e,domEventName:a,eventSystemFlags:c,nativeEvent:h,targetContainers:[j]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),o):(o.eventSystemFlags|=c,e=o.targetContainers,j!==null&&e.indexOf(j)===-1&&e.push(j),o)}function Uc(o,e,a,c,j){switch(e){case"focusin":return Lc=Tc(Lc,o,e,a,c,j),!0;case"dragenter":return Mc=Tc(Mc,o,e,a,c,j),!0;case"mouseover":return Nc=Tc(Nc,o,e,a,c,j),!0;case"pointerover":var h=j.pointerId;return Oc.set(h,Tc(Oc.get(h)||null,o,e,a,c,j)),!0;case"gotpointercapture":return h=j.pointerId,Pc.set(h,Tc(Pc.get(h)||null,o,e,a,c,j)),!0}return!1}function Vc(o){var e=Wc(o.target);if(e!==null){var a=Vb(e);if(a!==null){if(e=a.tag,e===13){if(e=Wb(a),e!==null){o.blockedOn=e,Ic(o.priority,function(){Gc(a)});return}}else if(e===3&&a.stateNode.current.memoizedState.isDehydrated){o.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xc(o){if(o.blockedOn!==null)return!1;for(var e=o.targetContainers;0<e.length;){var a=Yc(o.domEventName,o.eventSystemFlags,e[0],o.nativeEvent);if(a===null){a=o.nativeEvent;var c=new a.constructor(a.type,a);wb=c,a.target.dispatchEvent(c),wb=null}else return e=Cb(a),e!==null&&Fc(e),o.blockedOn=a,!1;e.shift()}return!0}function Zc(o,e,a){Xc(o)&&a.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(o,e){o.blockedOn===e&&(o.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(o){function e(j){return ad(j,o)}if(0<Kc.length){ad(Kc[0],o);for(var a=1;a<Kc.length;a++){var c=Kc[a];c.blockedOn===o&&(c.blockedOn=null)}}for(Lc!==null&&ad(Lc,o),Mc!==null&&ad(Mc,o),Nc!==null&&ad(Nc,o),Oc.forEach(e),Pc.forEach(e),a=0;a<Qc.length;a++)c=Qc[a],c.blockedOn===o&&(c.blockedOn=null);for(;0<Qc.length&&(a=Qc[0],a.blockedOn===null);)Vc(a),a.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(o,e,a,c){var j=C,h=cd.transition;cd.transition=null;try{C=1,fd(o,e,a,c)}finally{C=j,cd.transition=h}}function gd(o,e,a,c){var j=C,h=cd.transition;cd.transition=null;try{C=4,fd(o,e,a,c)}finally{C=j,cd.transition=h}}function fd(o,e,a,c){if(dd){var j=Yc(o,e,a,c);if(j===null)hd(o,e,c,id,a),Sc(o,c);else if(Uc(j,o,e,a,c))c.stopPropagation();else if(Sc(o,c),e&4&&-1<Rc.indexOf(o)){for(;j!==null;){var h=Cb(j);if(h!==null&&Ec(h),h=Yc(o,e,a,c),h===null&&hd(o,e,c,id,a),h===j)break;j=h}j!==null&&c.stopPropagation()}else hd(o,e,c,null,a)}}var id=null;function Yc(o,e,a,c){if(id=null,o=xb(c),o=Wc(o),o!==null)if(e=Vb(o),e===null)o=null;else if(a=e.tag,a===13){if(o=Wb(e),o!==null)return o;o=null}else if(a===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;o=null}else e!==o&&(o=null);return id=o,null}function jd(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var o,e=ld,a=e.length,c,j="value"in kd?kd.value:kd.textContent,h=j.length;for(o=0;o<a&&e[o]===j[o];o++);var et=a-o;for(c=1;c<=et&&e[a-c]===j[h-c];c++);return md=j.slice(o,1<c?1-c:void 0)}function od(o){var e=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&e===13&&(o=13)):o=e,o===10&&(o=13),32<=o||o===13?o:0}function pd(){return!0}function qd(){return!1}function rd(o){function e(a,c,j,h,et){this._reactName=a,this._targetInst=j,this.type=c,this.nativeEvent=h,this.target=et,this.currentTarget=null;for(var ot in o)o.hasOwnProperty(ot)&&(a=o[ot],this[ot]=a?a(h):h[ot]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd&&(yd&&o.type==="mousemove"?(wd=o.screenX-yd.screenX,xd=o.screenY-yd.screenY):xd=wd=0,yd=o),wd)},movementY:function(o){return"movementY"in o?o.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(o){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(o):(o=Od[o])?!!e[o]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(o){if(o.key){var e=Md[o.key]||o.key;if(e!=="Unidentified")return e}return o.type==="keypress"?(o=od(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(o){return o.type==="keypress"?od(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(o,e){switch(o){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie=!1;function je(o,e){switch(o){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return o=e.data,o===ee&&fe?null:o;default:return null}}function ke(o,e){if(ie)return o==="compositionend"||!ae&&ge(o,e)?(o=nd(),md=ld=kd=null,ie=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e==="input"?!!le[o.type]:e==="textarea"}function ne(o,e,a,c){Eb(c),e=oe(e,"onChange"),0<e.length&&(a=new td("onChange","change",null,a,c),o.push({event:a,listeners:e}))}var pe=null,qe=null;function re(o){se(o,0)}function te(o){var e=ue(o);if(Wa(e))return o}function ve(o,e){if(o==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(o){if(o.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,o,xb(o)),Jb(re,e)}}function Ce(o,e,a){o==="focusin"?(Ae(),pe=e,qe=a,pe.attachEvent("onpropertychange",Be)):o==="focusout"&&Ae()}function De(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te(qe)}function Ee(o,e){if(o==="click")return te(e)}function Fe(o,e){if(o==="input"||o==="change")return te(e)}function Ge(o,e){return o===e&&(o!==0||1/o===1/e)||o!==o&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(o,e){if(He(o,e))return!0;if(typeof o!="object"||o===null||typeof e!="object"||e===null)return!1;var a=Object.keys(o),c=Object.keys(e);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var j=a[c];if(!ja.call(e,j)||!He(o[j],e[j]))return!1}return!0}function Je(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ke(o,e){var a=Je(o);o=0;for(var c;a;){if(a.nodeType===3){if(c=o+a.textContent.length,o<=e&&c>=e)return{node:a,offset:e-o};o=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Je(a)}}function Le(o,e){return o&&e?o===e?!0:o&&o.nodeType===3?!1:e&&e.nodeType===3?Le(o,e.parentNode):"contains"in o?o.contains(e):o.compareDocumentPosition?!!(o.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var o=window,e=Xa();e instanceof o.HTMLIFrameElement;){try{var a=typeof e.contentWindow.location.href=="string"}catch{a=!1}if(a)o=e.contentWindow;else break;e=Xa(o.document)}return e}function Ne(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e&&(e==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||e==="textarea"||o.contentEditable==="true")}function Oe(o){var e=Me(),a=o.focusedElem,c=o.selectionRange;if(e!==a&&a&&a.ownerDocument&&Le(a.ownerDocument.documentElement,a)){if(c!==null&&Ne(a)){if(e=c.start,o=c.end,o===void 0&&(o=e),"selectionStart"in a)a.selectionStart=e,a.selectionEnd=Math.min(o,a.value.length);else if(o=(e=a.ownerDocument||document)&&e.defaultView||window,o.getSelection){o=o.getSelection();var j=a.textContent.length,h=Math.min(c.start,j);c=c.end===void 0?h:Math.min(c.end,j),!o.extend&&h>c&&(j=c,c=h,h=j),j=Ke(a,h);var et=Ke(a,c);j&&et&&(o.rangeCount!==1||o.anchorNode!==j.node||o.anchorOffset!==j.offset||o.focusNode!==et.node||o.focusOffset!==et.offset)&&(e=e.createRange(),e.setStart(j.node,j.offset),o.removeAllRanges(),h>c?(o.addRange(e),o.extend(et.node,et.offset)):(e.setEnd(et.node,et.offset),o.addRange(e)))}}for(e=[],o=a;o=o.parentNode;)o.nodeType===1&&e.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<e.length;a++)o=e[a],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(o,e,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Te||Qe==null||Qe!==Xa(c)||(c=Qe,"selectionStart"in c&&Ne(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Se&&Ie(Se,c)||(Se=c,c=oe(Re,"onSelect"),0<c.length&&(e=new td("onSelect","select",null,e,a),o.push({event:e,listeners:c}),e.target=Qe)))}function Ve(o,e){var a={};return a[o.toLowerCase()]=e.toLowerCase(),a["Webkit"+o]="webkit"+e,a["Moz"+o]="moz"+e,a}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(o){if(Xe[o])return Xe[o];if(!We[o])return o;var e=We[o],a;for(a in e)if(e.hasOwnProperty(a)&&a in Ye)return Xe[o]=e[a];return o}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(o,e){df.set(o,e),fa(e,[o])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(o,e,a){var c=o.type||"unknown-event";o.currentTarget=a,Ub(c,e,void 0,o),o.currentTarget=null}function se(o,e){e=(e&4)!==0;for(var a=0;a<o.length;a++){var c=o[a],j=c.event;c=c.listeners;e:{var h=void 0;if(e)for(var et=c.length-1;0<=et;et--){var ot=c[et],st=ot.instance,lt=ot.currentTarget;if(ot=ot.listener,st!==h&&j.isPropagationStopped())break e;nf(j,ot,lt),h=st}else for(et=0;et<c.length;et++){if(ot=c[et],st=ot.instance,lt=ot.currentTarget,ot=ot.listener,st!==h&&j.isPropagationStopped())break e;nf(j,ot,lt),h=st}}}if(Qb)throw o=Rb,Qb=!1,Rb=null,o}function D(o,e){var a=e[of];a===void 0&&(a=e[of]=new Set);var c=o+"__bubble";a.has(c)||(pf(e,o,2,!1),a.add(c))}function qf(o,e,a){var c=0;e&&(c|=4),pf(a,o,c,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(o){if(!o[rf]){o[rf]=!0,da.forEach(function(a){a!=="selectionchange"&&(mf.has(a)||qf(a,!1,o),qf(a,!0,o))});var e=o.nodeType===9?o:o.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(o,e,a,c){switch(jd(e)){case 1:var j=ed;break;case 4:j=gd;break;default:j=fd}a=j.bind(null,e,a,o),j=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(j=!0),c?j!==void 0?o.addEventListener(e,a,{capture:!0,passive:j}):o.addEventListener(e,a,!0):j!==void 0?o.addEventListener(e,a,{passive:j}):o.addEventListener(e,a,!1)}function hd(o,e,a,c,j){var h=c;if(!(e&1)&&!(e&2)&&c!==null)e:for(;;){if(c===null)return;var et=c.tag;if(et===3||et===4){var ot=c.stateNode.containerInfo;if(ot===j||ot.nodeType===8&&ot.parentNode===j)break;if(et===4)for(et=c.return;et!==null;){var st=et.tag;if((st===3||st===4)&&(st=et.stateNode.containerInfo,st===j||st.nodeType===8&&st.parentNode===j))return;et=et.return}for(;ot!==null;){if(et=Wc(ot),et===null)return;if(st=et.tag,st===5||st===6){c=h=et;continue e}ot=ot.parentNode}}c=c.return}Jb(function(){var lt=h,nt=xb(a),gt=[];e:{var dt=df.get(o);if(dt!==void 0){var mt=td,vt=o;switch(o){case"keypress":if(od(a)===0)break e;case"keydown":case"keyup":mt=Rd;break;case"focusin":vt="focus",mt=Fd;break;case"focusout":vt="blur",mt=Fd;break;case"beforeblur":case"afterblur":mt=Fd;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=Vd;break;case $e:case af:case bf:mt=Hd;break;case cf:mt=Xd;break;case"scroll":mt=vd;break;case"wheel":mt=Zd;break;case"copy":case"cut":case"paste":mt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Td}var tt=(e&4)!==0,bt=!tt&&o==="scroll",ht=tt?dt!==null?dt+"Capture":null:dt;tt=[];for(var St=lt,At;St!==null;){At=St;var Tt=At.stateNode;if(At.tag===5&&Tt!==null&&(At=Tt,ht!==null&&(Tt=Kb(St,ht),Tt!=null&&tt.push(tf(St,Tt,At)))),bt)break;St=St.return}0<tt.length&&(dt=new mt(dt,vt,null,a,nt),gt.push({event:dt,listeners:tt}))}}if(!(e&7)){e:{if(dt=o==="mouseover"||o==="pointerover",mt=o==="mouseout"||o==="pointerout",dt&&a!==wb&&(vt=a.relatedTarget||a.fromElement)&&(Wc(vt)||vt[uf]))break e;if((mt||dt)&&(dt=nt.window===nt?nt:(dt=nt.ownerDocument)?dt.defaultView||dt.parentWindow:window,mt?(vt=a.relatedTarget||a.toElement,mt=lt,vt=vt?Wc(vt):null,vt!==null&&(bt=Vb(vt),vt!==bt||vt.tag!==5&&vt.tag!==6)&&(vt=null)):(mt=null,vt=lt),mt!==vt)){if(tt=Bd,Tt="onMouseLeave",ht="onMouseEnter",St="mouse",(o==="pointerout"||o==="pointerover")&&(tt=Td,Tt="onPointerLeave",ht="onPointerEnter",St="pointer"),bt=mt==null?dt:ue(mt),At=vt==null?dt:ue(vt),dt=new tt(Tt,St+"leave",mt,a,nt),dt.target=bt,dt.relatedTarget=At,Tt=null,Wc(nt)===lt&&(tt=new tt(ht,St+"enter",vt,a,nt),tt.target=At,tt.relatedTarget=bt,Tt=tt),bt=Tt,mt&&vt)t:{for(tt=mt,ht=vt,St=0,At=tt;At;At=vf(At))St++;for(At=0,Tt=ht;Tt;Tt=vf(Tt))At++;for(;0<St-At;)tt=vf(tt),St--;for(;0<At-St;)ht=vf(ht),At--;for(;St--;){if(tt===ht||ht!==null&&tt===ht.alternate)break t;tt=vf(tt),ht=vf(ht)}tt=null}else tt=null;mt!==null&&wf(gt,dt,mt,tt,!1),vt!==null&&bt!==null&&wf(gt,bt,vt,tt,!0)}}e:{if(dt=lt?ue(lt):window,mt=dt.nodeName&&dt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&dt.type==="file")var ft=ve;else if(me(dt))if(we)ft=Fe;else{ft=De;var _t=Ce}else(mt=dt.nodeName)&&mt.toLowerCase()==="input"&&(dt.type==="checkbox"||dt.type==="radio")&&(ft=Ee);if(ft&&(ft=ft(o,lt))){ne(gt,ft,a,nt);break e}_t&&_t(o,dt,lt),o==="focusout"&&(_t=dt._wrapperState)&&_t.controlled&&dt.type==="number"&&cb(dt,"number",dt.value)}switch(_t=lt?ue(lt):window,o){case"focusin":(me(_t)||_t.contentEditable==="true")&&(Qe=_t,Re=lt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(gt,a,nt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(gt,a,nt)}var Rt;if(ae)e:{switch(o){case"compositionstart":var Mt="onCompositionStart";break e;case"compositionend":Mt="onCompositionEnd";break e;case"compositionupdate":Mt="onCompositionUpdate";break e}Mt=void 0}else ie?ge(o,a)&&(Mt="onCompositionEnd"):o==="keydown"&&a.keyCode===229&&(Mt="onCompositionStart");Mt&&(de&&a.locale!=="ko"&&(ie||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&ie&&(Rt=nd()):(kd=nt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),_t=oe(lt,Mt),0<_t.length&&(Mt=new Ld(Mt,o,null,a,nt),gt.push({event:Mt,listeners:_t}),Rt?Mt.data=Rt:(Rt=he(a),Rt!==null&&(Mt.data=Rt)))),(Rt=ce?je(o,a):ke(o,a))&&(lt=oe(lt,"onBeforeInput"),0<lt.length&&(nt=new Ld("onBeforeInput","beforeinput",null,a,nt),gt.push({event:nt,listeners:lt}),nt.data=Rt))}se(gt,e)})}function tf(o,e,a){return{instance:o,listener:e,currentTarget:a}}function oe(o,e){for(var a=e+"Capture",c=[];o!==null;){var j=o,h=j.stateNode;j.tag===5&&h!==null&&(j=h,h=Kb(o,a),h!=null&&c.unshift(tf(o,h,j)),h=Kb(o,e),h!=null&&c.push(tf(o,h,j))),o=o.return}return c}function vf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wf(o,e,a,c,j){for(var h=e._reactName,et=[];a!==null&&a!==c;){var ot=a,st=ot.alternate,lt=ot.stateNode;if(st!==null&&st===c)break;ot.tag===5&&lt!==null&&(ot=lt,j?(st=Kb(a,h),st!=null&&et.unshift(tf(a,st,ot))):j||(st=Kb(a,h),st!=null&&et.push(tf(a,st,ot)))),a=a.return}et.length!==0&&o.push({event:e,listeners:et})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(o){return(typeof o=="string"?o:""+o).replace(xf,`
`).replace(yf,"")}function Af(o,e,a){if(e=zf(e),zf(o)!==e&&a)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(o,e){return o==="textarea"||o==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(o){return Hf.resolve(null).then(o).catch(If)}:Ff;function If(o){setTimeout(function(){throw o})}function Kf(o,e){var a=e,c=0;do{var j=a.nextSibling;if(o.removeChild(a),j&&j.nodeType===8)if(a=j.data,a==="/$"){if(c===0){o.removeChild(j),bd(e);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=j}while(a);bd(e)}function Lf(o){for(;o!=null;o=o.nextSibling){var e=o.nodeType;if(e===1||e===3)break;if(e===8){if(e=o.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return o}function Mf(o){o=o.previousSibling;for(var e=0;o;){if(o.nodeType===8){var a=o.data;if(a==="$"||a==="$!"||a==="$?"){if(e===0)return o;e--}else a==="/$"&&e++}o=o.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(o){var e=o[Of];if(e)return e;for(var a=o.parentNode;a;){if(e=a[uf]||a[Of]){if(a=e.alternate,e.child!==null||a!==null&&a.child!==null)for(o=Mf(o);o!==null;){if(a=o[Of])return a;o=Mf(o)}return e}o=a,a=o.parentNode}return null}function Cb(o){return o=o[Of]||o[uf],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p(33))}function Db(o){return o[Pf]||null}var Sf=[],Tf=-1;function Uf(o){return{current:o}}function E(o){0>Tf||(o.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(o,e){Tf++,Sf[Tf]=o.current,o.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(o,e){var a=o.type.contextTypes;if(!a)return Vf;var c=o.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===e)return c.__reactInternalMemoizedMaskedChildContext;var j={},h;for(h in a)j[h]=e[h];return c&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=e,o.__reactInternalMemoizedMaskedChildContext=j),j}function Zf(o){return o=o.childContextTypes,o!=null}function $f(){E(Wf),E(H)}function ag(o,e,a){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,a)}function bg(o,e,a){var c=o.stateNode;if(e=e.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var j in c)if(!(j in e))throw Error(p(108,Ra(o)||"Unknown",j));return A({},a,c)}function cg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,o),G(Wf,Wf.current),!0}function dg(o,e,a){var c=o.stateNode;if(!c)throw Error(p(169));a?(o=bg(o,e,Xf),c.__reactInternalMemoizedMergedChildContext=o,E(Wf),E(H),G(H,o)):E(Wf),G(Wf,a)}var eg=null,fg=!1,gg=!1;function hg(o){eg===null?eg=[o]:eg.push(o)}function ig(o){fg=!0,hg(o)}function jg(){if(!gg&&eg!==null){gg=!0;var o=0,e=C;try{var a=eg;for(C=1;o<a.length;o++){var c=a[o];do c=c(!0);while(c!==null)}eg=null,fg=!1}catch(j){throw eg!==null&&(eg=eg.slice(o+1)),ac(fc,jg),j}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(o,e){kg[lg++]=ng,kg[lg++]=mg,mg=o,ng=e}function ug(o,e,a){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=o;var c=rg;o=sg;var j=32-oc(c)-1;c&=~(1<<j),a+=1;var h=32-oc(e)+j;if(30<h){var et=j-j%5;h=(c&(1<<et)-1).toString(32),c>>=et,j-=et,rg=1<<32-oc(e)+j|a<<j|c,sg=h+o}else rg=1<<h|a<<j|c,sg=o}function vg(o){o.return!==null&&(tg(o,1),ug(o,1,0))}function wg(o){for(;o===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;o===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(o,e){var a=Bg(5,null,null,0);a.elementType="DELETED",a.stateNode=e,a.return=o,e=o.deletions,e===null?(o.deletions=[a],o.flags|=16):e.push(a)}function Cg(o,e){switch(o.tag){case 5:var a=o.type;return e=e.nodeType!==1||a.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(o.stateNode=e,xg=o,yg=Lf(e.firstChild),!0):!1;case 6:return e=o.pendingProps===""||e.nodeType!==3?null:e,e!==null?(o.stateNode=e,xg=o,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(a=qg!==null?{id:rg,overflow:sg}:null,o.memoizedState={dehydrated:e,treeContext:a,retryLane:1073741824},a=Bg(18,null,null,0),a.stateNode=e,a.return=o,o.child=a,xg=o,yg=null,!0):!1;default:return!1}}function Dg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Eg(o){if(I){var e=yg;if(e){var a=e;if(!Cg(o,e)){if(Dg(o))throw Error(p(418));e=Lf(a.nextSibling);var c=xg;e&&Cg(o,e)?Ag(c,a):(o.flags=o.flags&-4097|2,I=!1,xg=o)}}else{if(Dg(o))throw Error(p(418));o.flags=o.flags&-4097|2,I=!1,xg=o}}}function Fg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xg=o}function Gg(o){if(o!==xg)return!1;if(!I)return Fg(o),I=!0,!1;var e;if((e=o.tag!==3)&&!(e=o.tag!==5)&&(e=o.type,e=e!=="head"&&e!=="body"&&!Ef(o.type,o.memoizedProps)),e&&(e=yg)){if(Dg(o))throw Hg(),Error(p(418));for(;e;)Ag(o,e),e=Lf(e.nextSibling)}if(Fg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p(317));e:{for(o=o.nextSibling,e=0;o;){if(o.nodeType===8){var a=o.data;if(a==="/$"){if(e===0){yg=Lf(o.nextSibling);break e}e--}else a!=="$"&&a!=="$!"&&a!=="$?"||e++}o=o.nextSibling}yg=null}}else yg=xg?Lf(o.stateNode.nextSibling):null;return!0}function Hg(){for(var o=yg;o;)o=Lf(o.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(o){zg===null?zg=[o]:zg.push(o)}var Kg=ua.ReactCurrentBatchConfig;function Lg(o,e,a){if(o=a.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(p(309));var c=a.stateNode}if(!c)throw Error(p(147,o));var j=c,h=""+o;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===h?e.ref:(e=function(et){var ot=j.refs;et===null?delete ot[h]:ot[h]=et},e._stringRef=h,e)}if(typeof o!="string")throw Error(p(284));if(!a._owner)throw Error(p(290,o))}return o}function Mg(o,e){throw o=Object.prototype.toString.call(e),Error(p(31,o==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":o))}function Ng(o){var e=o._init;return e(o._payload)}function Og(o){function e(ht,St){if(o){var At=ht.deletions;At===null?(ht.deletions=[St],ht.flags|=16):At.push(St)}}function a(ht,St){if(!o)return null;for(;St!==null;)e(ht,St),St=St.sibling;return null}function c(ht,St){for(ht=new Map;St!==null;)St.key!==null?ht.set(St.key,St):ht.set(St.index,St),St=St.sibling;return ht}function j(ht,St){return ht=Pg(ht,St),ht.index=0,ht.sibling=null,ht}function h(ht,St,At){return ht.index=At,o?(At=ht.alternate,At!==null?(At=At.index,At<St?(ht.flags|=2,St):At):(ht.flags|=2,St)):(ht.flags|=1048576,St)}function et(ht){return o&&ht.alternate===null&&(ht.flags|=2),ht}function ot(ht,St,At,Tt){return St===null||St.tag!==6?(St=Qg(At,ht.mode,Tt),St.return=ht,St):(St=j(St,At),St.return=ht,St)}function st(ht,St,At,Tt){var ft=At.type;return ft===ya?nt(ht,St,At.props.children,Tt,At.key):St!==null&&(St.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===Ha&&Ng(ft)===St.type)?(Tt=j(St,At.props),Tt.ref=Lg(ht,St,At),Tt.return=ht,Tt):(Tt=Rg(At.type,At.key,At.props,null,ht.mode,Tt),Tt.ref=Lg(ht,St,At),Tt.return=ht,Tt)}function lt(ht,St,At,Tt){return St===null||St.tag!==4||St.stateNode.containerInfo!==At.containerInfo||St.stateNode.implementation!==At.implementation?(St=Sg(At,ht.mode,Tt),St.return=ht,St):(St=j(St,At.children||[]),St.return=ht,St)}function nt(ht,St,At,Tt,ft){return St===null||St.tag!==7?(St=Tg(At,ht.mode,Tt,ft),St.return=ht,St):(St=j(St,At),St.return=ht,St)}function gt(ht,St,At){if(typeof St=="string"&&St!==""||typeof St=="number")return St=Qg(""+St,ht.mode,At),St.return=ht,St;if(typeof St=="object"&&St!==null){switch(St.$$typeof){case va:return At=Rg(St.type,St.key,St.props,null,ht.mode,At),At.ref=Lg(ht,null,St),At.return=ht,At;case wa:return St=Sg(St,ht.mode,At),St.return=ht,St;case Ha:var Tt=St._init;return gt(ht,Tt(St._payload),At)}if(eb(St)||Ka(St))return St=Tg(St,ht.mode,At,null),St.return=ht,St;Mg(ht,St)}return null}function dt(ht,St,At,Tt){var ft=St!==null?St.key:null;if(typeof At=="string"&&At!==""||typeof At=="number")return ft!==null?null:ot(ht,St,""+At,Tt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case va:return At.key===ft?st(ht,St,At,Tt):null;case wa:return At.key===ft?lt(ht,St,At,Tt):null;case Ha:return ft=At._init,dt(ht,St,ft(At._payload),Tt)}if(eb(At)||Ka(At))return ft!==null?null:nt(ht,St,At,Tt,null);Mg(ht,At)}return null}function mt(ht,St,At,Tt,ft){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return ht=ht.get(At)||null,ot(St,ht,""+Tt,ft);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va:return ht=ht.get(Tt.key===null?At:Tt.key)||null,st(St,ht,Tt,ft);case wa:return ht=ht.get(Tt.key===null?At:Tt.key)||null,lt(St,ht,Tt,ft);case Ha:var _t=Tt._init;return mt(ht,St,At,_t(Tt._payload),ft)}if(eb(Tt)||Ka(Tt))return ht=ht.get(At)||null,nt(St,ht,Tt,ft,null);Mg(St,Tt)}return null}function vt(ht,St,At,Tt){for(var ft=null,_t=null,Rt=St,Mt=St=0,Et=null;Rt!==null&&Mt<At.length;Mt++){Rt.index>Mt?(Et=Rt,Rt=null):Et=Rt.sibling;var kt=dt(ht,Rt,At[Mt],Tt);if(kt===null){Rt===null&&(Rt=Et);break}o&&Rt&&kt.alternate===null&&e(ht,Rt),St=h(kt,St,Mt),_t===null?ft=kt:_t.sibling=kt,_t=kt,Rt=Et}if(Mt===At.length)return a(ht,Rt),I&&tg(ht,Mt),ft;if(Rt===null){for(;Mt<At.length;Mt++)Rt=gt(ht,At[Mt],Tt),Rt!==null&&(St=h(Rt,St,Mt),_t===null?ft=Rt:_t.sibling=Rt,_t=Rt);return I&&tg(ht,Mt),ft}for(Rt=c(ht,Rt);Mt<At.length;Mt++)Et=mt(Rt,ht,Mt,At[Mt],Tt),Et!==null&&(o&&Et.alternate!==null&&Rt.delete(Et.key===null?Mt:Et.key),St=h(Et,St,Mt),_t===null?ft=Et:_t.sibling=Et,_t=Et);return o&&Rt.forEach(function(at){return e(ht,at)}),I&&tg(ht,Mt),ft}function tt(ht,St,At,Tt){var ft=Ka(At);if(typeof ft!="function")throw Error(p(150));if(At=ft.call(At),At==null)throw Error(p(151));for(var _t=ft=null,Rt=St,Mt=St=0,Et=null,kt=At.next();Rt!==null&&!kt.done;Mt++,kt=At.next()){Rt.index>Mt?(Et=Rt,Rt=null):Et=Rt.sibling;var at=dt(ht,Rt,kt.value,Tt);if(at===null){Rt===null&&(Rt=Et);break}o&&Rt&&at.alternate===null&&e(ht,Rt),St=h(at,St,Mt),_t===null?ft=at:_t.sibling=at,_t=at,Rt=Et}if(kt.done)return a(ht,Rt),I&&tg(ht,Mt),ft;if(Rt===null){for(;!kt.done;Mt++,kt=At.next())kt=gt(ht,kt.value,Tt),kt!==null&&(St=h(kt,St,Mt),_t===null?ft=kt:_t.sibling=kt,_t=kt);return I&&tg(ht,Mt),ft}for(Rt=c(ht,Rt);!kt.done;Mt++,kt=At.next())kt=mt(Rt,ht,Mt,kt.value,Tt),kt!==null&&(o&&kt.alternate!==null&&Rt.delete(kt.key===null?Mt:kt.key),St=h(kt,St,Mt),_t===null?ft=kt:_t.sibling=kt,_t=kt);return o&&Rt.forEach(function(s){return e(ht,s)}),I&&tg(ht,Mt),ft}function bt(ht,St,At,Tt){if(typeof At=="object"&&At!==null&&At.type===ya&&At.key===null&&(At=At.props.children),typeof At=="object"&&At!==null){switch(At.$$typeof){case va:e:{for(var ft=At.key,_t=St;_t!==null;){if(_t.key===ft){if(ft=At.type,ft===ya){if(_t.tag===7){a(ht,_t.sibling),St=j(_t,At.props.children),St.return=ht,ht=St;break e}}else if(_t.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===Ha&&Ng(ft)===_t.type){a(ht,_t.sibling),St=j(_t,At.props),St.ref=Lg(ht,_t,At),St.return=ht,ht=St;break e}a(ht,_t);break}else e(ht,_t);_t=_t.sibling}At.type===ya?(St=Tg(At.props.children,ht.mode,Tt,At.key),St.return=ht,ht=St):(Tt=Rg(At.type,At.key,At.props,null,ht.mode,Tt),Tt.ref=Lg(ht,St,At),Tt.return=ht,ht=Tt)}return et(ht);case wa:e:{for(_t=At.key;St!==null;){if(St.key===_t)if(St.tag===4&&St.stateNode.containerInfo===At.containerInfo&&St.stateNode.implementation===At.implementation){a(ht,St.sibling),St=j(St,At.children||[]),St.return=ht,ht=St;break e}else{a(ht,St);break}else e(ht,St);St=St.sibling}St=Sg(At,ht.mode,Tt),St.return=ht,ht=St}return et(ht);case Ha:return _t=At._init,bt(ht,St,_t(At._payload),Tt)}if(eb(At))return vt(ht,St,At,Tt);if(Ka(At))return tt(ht,St,At,Tt);Mg(ht,At)}return typeof At=="string"&&At!==""||typeof At=="number"?(At=""+At,St!==null&&St.tag===6?(a(ht,St.sibling),St=j(St,At),St.return=ht,ht=St):(a(ht,St),St=Qg(At,ht.mode,Tt),St.return=ht,ht=St),et(ht)):a(ht,St)}return bt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(o){var e=Wg.current;E(Wg),o._currentValue=e}function bh(o,e,a){for(;o!==null;){var c=o.alternate;if((o.childLanes&e)!==e?(o.childLanes|=e,c!==null&&(c.childLanes|=e)):c!==null&&(c.childLanes&e)!==e&&(c.childLanes|=e),o===a)break;o=o.return}}function ch(o,e){Xg=o,Zg=Yg=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&e&&(dh$1=!0),o.firstContext=null)}function eh(o){var e=o._currentValue;if(Zg!==o)if(o={context:o,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=o,Xg.dependencies={lanes:0,firstContext:o}}else Yg=Yg.next=o;return e}var fh=null;function gh(o){fh===null?fh=[o]:fh.push(o)}function hh(o,e,a,c){var j=e.interleaved;return j===null?(a.next=a,gh(e)):(a.next=j.next,j.next=a),e.interleaved=a,ih(o,c)}function ih(o,e){o.lanes|=e;var a=o.alternate;for(a!==null&&(a.lanes|=e),a=o,o=o.return;o!==null;)o.childLanes|=e,a=o.alternate,a!==null&&(a.childLanes|=e),a=o,o=o.return;return a.tag===3?a.stateNode:null}var jh=!1;function kh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(o,e){o=o.updateQueue,e.updateQueue===o&&(e.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function mh(o,e){return{eventTime:o,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(o,e,a){var c=o.updateQueue;if(c===null)return null;if(c=c.shared,K&2){var j=c.pending;return j===null?e.next=e:(e.next=j.next,j.next=e),c.pending=e,ih(o,a)}return j=c.interleaved,j===null?(e.next=e,gh(c)):(e.next=j.next,j.next=e),c.interleaved=e,ih(o,a)}function oh(o,e,a){if(e=e.updateQueue,e!==null&&(e=e.shared,(a&4194240)!==0)){var c=e.lanes;c&=o.pendingLanes,a|=c,e.lanes=a,Cc(o,a)}}function ph(o,e){var a=o.updateQueue,c=o.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var j=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var et={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};h===null?j=h=et:h=h.next=et,a=a.next}while(a!==null);h===null?j=h=e:h=h.next=e}else j=h=e;a={baseState:c.baseState,firstBaseUpdate:j,lastBaseUpdate:h,shared:c.shared,effects:c.effects},o.updateQueue=a;return}o=a.lastBaseUpdate,o===null?a.firstBaseUpdate=e:o.next=e,a.lastBaseUpdate=e}function qh(o,e,a,c){var j=o.updateQueue;jh=!1;var h=j.firstBaseUpdate,et=j.lastBaseUpdate,ot=j.shared.pending;if(ot!==null){j.shared.pending=null;var st=ot,lt=st.next;st.next=null,et===null?h=lt:et.next=lt,et=st;var nt=o.alternate;nt!==null&&(nt=nt.updateQueue,ot=nt.lastBaseUpdate,ot!==et&&(ot===null?nt.firstBaseUpdate=lt:ot.next=lt,nt.lastBaseUpdate=st))}if(h!==null){var gt=j.baseState;et=0,nt=lt=st=null,ot=h;do{var dt=ot.lane,mt=ot.eventTime;if((c&dt)===dt){nt!==null&&(nt=nt.next={eventTime:mt,lane:0,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null});e:{var vt=o,tt=ot;switch(dt=e,mt=a,tt.tag){case 1:if(vt=tt.payload,typeof vt=="function"){gt=vt.call(mt,gt,dt);break e}gt=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=tt.payload,dt=typeof vt=="function"?vt.call(mt,gt,dt):vt,dt==null)break e;gt=A({},gt,dt);break e;case 2:jh=!0}}ot.callback!==null&&ot.lane!==0&&(o.flags|=64,dt=j.effects,dt===null?j.effects=[ot]:dt.push(ot))}else mt={eventTime:mt,lane:dt,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},nt===null?(lt=nt=mt,st=gt):nt=nt.next=mt,et|=dt;if(ot=ot.next,ot===null){if(ot=j.shared.pending,ot===null)break;dt=ot,ot=dt.next,dt.next=null,j.lastBaseUpdate=dt,j.shared.pending=null}}while(!0);if(nt===null&&(st=gt),j.baseState=st,j.firstBaseUpdate=lt,j.lastBaseUpdate=nt,e=j.shared.interleaved,e!==null){j=e;do et|=j.lane,j=j.next;while(j!==e)}else h===null&&(j.shared.lanes=0);rh|=et,o.lanes=et,o.memoizedState=gt}}function sh(o,e,a){if(o=e.effects,e.effects=null,o!==null)for(e=0;e<o.length;e++){var c=o[e],j=c.callback;if(j!==null){if(c.callback=null,c=a,typeof j!="function")throw Error(p(191,j));j.call(c)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(o){if(o===th)throw Error(p(174));return o}function yh(o,e){switch(G(wh,e),G(vh,o),G(uh,th),o=e.nodeType,o){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:o=o===8?e.parentNode:e,e=o.namespaceURI||null,o=o.tagName,e=lb(e,o)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(o){xh(wh.current);var e=xh(uh.current),a=lb(e,o.type);e!==a&&(G(vh,o),G(uh,a))}function Bh(o){vh.current===o&&(E(uh),E(vh))}var L=Uf(0);function Ch(o){for(var e=o;e!==null;){if(e.tag===13){var a=e.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var o=0;o<Dh.length;o++)Dh[o]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(o,e){if(e===null)return!1;for(var a=0;a<e.length&&a<o.length;a++)if(!He(o[a],e[a]))return!1;return!0}function Nh(o,e,a,c,j,h){if(Hh=h,M=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=o===null||o.memoizedState===null?Oh:Ph,o=a(c,j),Jh){h=0;do{if(Jh=!1,Kh=0,25<=h)throw Error(p(301));h+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,o=a(c,j)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,e)throw Error(p(300));return o}function Sh(){var o=Kh!==0;return Kh=0,o}function Th(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=o:O=O.next=o,O}function Uh(){if(N===null){var o=M.alternate;o=o!==null?o.memoizedState:null}else o=N.next;var e=O===null?M.memoizedState:O.next;if(e!==null)O=e,N=o;else{if(o===null)throw Error(p(310));N=o,o={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=o:O=O.next=o}return O}function Vh(o,e){return typeof e=="function"?e(o):e}function Wh(o){var e=Uh(),a=e.queue;if(a===null)throw Error(p(311));a.lastRenderedReducer=o;var c=N,j=c.baseQueue,h=a.pending;if(h!==null){if(j!==null){var et=j.next;j.next=h.next,h.next=et}c.baseQueue=j=h,a.pending=null}if(j!==null){h=j.next,c=c.baseState;var ot=et=null,st=null,lt=h;do{var nt=lt.lane;if((Hh&nt)===nt)st!==null&&(st=st.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),c=lt.hasEagerState?lt.eagerState:o(c,lt.action);else{var gt={lane:nt,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};st===null?(ot=st=gt,et=c):st=st.next=gt,M.lanes|=nt,rh|=nt}lt=lt.next}while(lt!==null&&lt!==h);st===null?et=c:st.next=ot,He(c,e.memoizedState)||(dh$1=!0),e.memoizedState=c,e.baseState=et,e.baseQueue=st,a.lastRenderedState=c}if(o=a.interleaved,o!==null){j=o;do h=j.lane,M.lanes|=h,rh|=h,j=j.next;while(j!==o)}else j===null&&(a.lanes=0);return[e.memoizedState,a.dispatch]}function Xh(o){var e=Uh(),a=e.queue;if(a===null)throw Error(p(311));a.lastRenderedReducer=o;var c=a.dispatch,j=a.pending,h=e.memoizedState;if(j!==null){a.pending=null;var et=j=j.next;do h=o(h,et.action),et=et.next;while(et!==j);He(h,e.memoizedState)||(dh$1=!0),e.memoizedState=h,e.baseQueue===null&&(e.baseState=h),a.lastRenderedState=h}return[h,c]}function Yh(){}function Zh(o,e){var a=M,c=Uh(),j=e(),h=!He(c.memoizedState,j);if(h&&(c.memoizedState=j,dh$1=!0),c=c.queue,$h(ai.bind(null,a,c,o),[o]),c.getSnapshot!==e||h||O!==null&&O.memoizedState.tag&1){if(a.flags|=2048,bi(9,ci.bind(null,a,c,j,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(a,e,j)}return j}function di(o,e,a){o.flags|=16384,o={getSnapshot:e,value:a},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.stores=[o]):(a=e.stores,a===null?e.stores=[o]:a.push(o))}function ci(o,e,a,c){e.value=a,e.getSnapshot=c,ei(e)&&fi(o)}function ai(o,e,a){return a(function(){ei(e)&&fi(o)})}function ei(o){var e=o.getSnapshot;o=o.value;try{var a=e();return!He(o,a)}catch{return!0}}function fi(o){var e=ih(o,1);e!==null&&gi(e,o,1,-1)}function hi(o){var e=Th();return typeof o=="function"&&(o=o()),e.memoizedState=e.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:o},e.queue=o,o=o.dispatch=ii.bind(null,M,o),[e.memoizedState,o]}function bi(o,e,a,c){return o={tag:o,create:e,destroy:a,deps:c,next:null},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.lastEffect=o.next=o):(a=e.lastEffect,a===null?e.lastEffect=o.next=o:(c=a.next,a.next=o,o.next=c,e.lastEffect=o)),o}function ji(){return Uh().memoizedState}function ki(o,e,a,c){var j=Th();M.flags|=o,j.memoizedState=bi(1|e,a,void 0,c===void 0?null:c)}function li(o,e,a,c){var j=Uh();c=c===void 0?null:c;var h=void 0;if(N!==null){var et=N.memoizedState;if(h=et.destroy,c!==null&&Mh(c,et.deps)){j.memoizedState=bi(e,a,h,c);return}}M.flags|=o,j.memoizedState=bi(1|e,a,h,c)}function mi(o,e){return ki(8390656,8,o,e)}function $h(o,e){return li(2048,8,o,e)}function ni(o,e){return li(4,2,o,e)}function oi(o,e){return li(4,4,o,e)}function pi(o,e){if(typeof e=="function")return o=o(),e(o),function(){e(null)};if(e!=null)return o=o(),e.current=o,function(){e.current=null}}function qi(o,e,a){return a=a!=null?a.concat([o]):null,li(4,4,pi.bind(null,e,o),a)}function ri(){}function si(o,e){var a=Uh();e=e===void 0?null:e;var c=a.memoizedState;return c!==null&&e!==null&&Mh(e,c[1])?c[0]:(a.memoizedState=[o,e],o)}function ti(o,e){var a=Uh();e=e===void 0?null:e;var c=a.memoizedState;return c!==null&&e!==null&&Mh(e,c[1])?c[0]:(o=o(),a.memoizedState=[o,e],o)}function ui(o,e,a){return Hh&21?(He(a,e)||(a=yc(),M.lanes|=a,rh|=a,o.baseState=!0),e):(o.baseState&&(o.baseState=!1,dh$1=!0),o.memoizedState=a)}function vi(o,e){var a=C;C=a!==0&&4>a?a:4,o(!0);var c=Gh.transition;Gh.transition={};try{o(!1),e()}finally{C=a,Gh.transition=c}}function wi(){return Uh().memoizedState}function xi(o,e,a){var c=yi(o);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},zi(o))Ai(e,a);else if(a=hh(o,e,a,c),a!==null){var j=R$1();gi(a,o,c,j),Bi(a,e,c)}}function ii(o,e,a){var c=yi(o),j={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(zi(o))Ai(e,j);else{var h=o.alternate;if(o.lanes===0&&(h===null||h.lanes===0)&&(h=e.lastRenderedReducer,h!==null))try{var et=e.lastRenderedState,ot=h(et,a);if(j.hasEagerState=!0,j.eagerState=ot,He(ot,et)){var st=e.interleaved;st===null?(j.next=j,gh(e)):(j.next=st.next,st.next=j),e.interleaved=j;return}}catch{}finally{}a=hh(o,e,j,c),a!==null&&(j=R$1(),gi(a,o,c,j),Bi(a,e,c))}}function zi(o){var e=o.alternate;return o===M||e!==null&&e===M}function Ai(o,e){Jh=Ih=!0;var a=o.pending;a===null?e.next=e:(e.next=a.next,a.next=e),o.pending=e}function Bi(o,e,a){if(a&4194240){var c=e.lanes;c&=o.pendingLanes,a|=c,e.lanes=a,Cc(o,a)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(o,e){return Th().memoizedState=[o,e===void 0?null:e],o},useContext:eh,useEffect:mi,useImperativeHandle:function(o,e,a){return a=a!=null?a.concat([o]):null,ki(4194308,4,pi.bind(null,e,o),a)},useLayoutEffect:function(o,e){return ki(4194308,4,o,e)},useInsertionEffect:function(o,e){return ki(4,2,o,e)},useMemo:function(o,e){var a=Th();return e=e===void 0?null:e,o=o(),a.memoizedState=[o,e],o},useReducer:function(o,e,a){var c=Th();return e=a!==void 0?a(e):e,c.memoizedState=c.baseState=e,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:e},c.queue=o,o=o.dispatch=xi.bind(null,M,o),[c.memoizedState,o]},useRef:function(o){var e=Th();return o={current:o},e.memoizedState=o},useState:hi,useDebugValue:ri,useDeferredValue:function(o){return Th().memoizedState=o},useTransition:function(){var o=hi(!1),e=o[0];return o=vi.bind(null,o[1]),Th().memoizedState=o,[e,o]},useMutableSource:function(){},useSyncExternalStore:function(o,e,a){var c=M,j=Th();if(I){if(a===void 0)throw Error(p(407));a=a()}else{if(a=e(),Q===null)throw Error(p(349));Hh&30||di(c,e,a)}j.memoizedState=a;var h={value:a,getSnapshot:e};return j.queue=h,mi(ai.bind(null,c,h,o),[o]),c.flags|=2048,bi(9,ci.bind(null,c,h,a,e),void 0,null),a},useId:function(){var o=Th(),e=Q.identifierPrefix;if(I){var a=sg,c=rg;a=(c&~(1<<32-oc(c)-1)).toString(32)+a,e=":"+e+"R"+a,a=Kh++,0<a&&(e+="H"+a.toString(32)),e+=":"}else a=Lh++,e=":"+e+"r"+a.toString(32)+":";return o.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var e=Uh();return ui(e,N.memoizedState,o)},useTransition:function(){var o=Wh(Vh)[0],e=Uh().memoizedState;return[o,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var e=Uh();return N===null?e.memoizedState=o:ui(e,N.memoizedState,o)},useTransition:function(){var o=Xh(Vh)[0],e=Uh().memoizedState;return[o,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(o,e){if(o&&o.defaultProps){e=A({},e),o=o.defaultProps;for(var a in o)e[a]===void 0&&(e[a]=o[a]);return e}return e}function Di(o,e,a,c){e=o.memoizedState,a=a(c,e),a=a==null?e:A({},e,a),o.memoizedState=a,o.lanes===0&&(o.updateQueue.baseState=a)}var Ei={isMounted:function(o){return(o=o._reactInternals)?Vb(o)===o:!1},enqueueSetState:function(o,e,a){o=o._reactInternals;var c=R$1(),j=yi(o),h=mh(c,j);h.payload=e,a!=null&&(h.callback=a),e=nh(o,h,j),e!==null&&(gi(e,o,j,c),oh(e,o,j))},enqueueReplaceState:function(o,e,a){o=o._reactInternals;var c=R$1(),j=yi(o),h=mh(c,j);h.tag=1,h.payload=e,a!=null&&(h.callback=a),e=nh(o,h,j),e!==null&&(gi(e,o,j,c),oh(e,o,j))},enqueueForceUpdate:function(o,e){o=o._reactInternals;var a=R$1(),c=yi(o),j=mh(a,c);j.tag=2,e!=null&&(j.callback=e),e=nh(o,j,c),e!==null&&(gi(e,o,c,a),oh(e,o,c))}};function Fi(o,e,a,c,j,h,et){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(c,h,et):e.prototype&&e.prototype.isPureReactComponent?!Ie(a,c)||!Ie(j,h):!0}function Gi(o,e,a){var c=!1,j=Vf,h=e.contextType;return typeof h=="object"&&h!==null?h=eh(h):(j=Zf(e)?Xf:H.current,c=e.contextTypes,h=(c=c!=null)?Yf(o,j):Vf),e=new e(a,h),o.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,o.stateNode=e,e._reactInternals=o,c&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=j,o.__reactInternalMemoizedMaskedChildContext=h),e}function Hi(o,e,a,c){o=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(a,c),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(a,c),e.state!==o&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(o,e,a,c){var j=o.stateNode;j.props=a,j.state=o.memoizedState,j.refs={},kh(o);var h=e.contextType;typeof h=="object"&&h!==null?j.context=eh(h):(h=Zf(e)?Xf:H.current,j.context=Yf(o,h)),j.state=o.memoizedState,h=e.getDerivedStateFromProps,typeof h=="function"&&(Di(o,e,h,a),j.state=o.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(e=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),e!==j.state&&Ei.enqueueReplaceState(j,j.state,null),qh(o,a,j,c),j.state=o.memoizedState),typeof j.componentDidMount=="function"&&(o.flags|=4194308)}function Ji(o,e){try{var a="",c=e;do a+=Pa(c),c=c.return;while(c);var j=a}catch(h){j=`
Error generating stack: `+h.message+`
`+h.stack}return{value:o,source:e,stack:j,digest:null}}function Ki(o,e,a){return{value:o,source:null,stack:a??null,digest:e??null}}function Li(o,e){try{console.error(e.value)}catch(a){setTimeout(function(){throw a})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(o,e,a){a=mh(-1,a),a.tag=3,a.payload={element:null};var c=e.value;return a.callback=function(){Oi||(Oi=!0,Pi=c),Li(o,e)},a}function Qi(o,e,a){a=mh(-1,a),a.tag=3;var c=o.type.getDerivedStateFromError;if(typeof c=="function"){var j=e.value;a.payload=function(){return c(j)},a.callback=function(){Li(o,e)}}var h=o.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(a.callback=function(){Li(o,e),typeof c!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var et=e.stack;this.componentDidCatch(e.value,{componentStack:et!==null?et:""})}),a}function Si(o,e,a){var c=o.pingCache;if(c===null){c=o.pingCache=new Mi;var j=new Set;c.set(e,j)}else j=c.get(e),j===void 0&&(j=new Set,c.set(e,j));j.has(a)||(j.add(a),o=Ti.bind(null,o,e,a),e.then(o,o))}function Ui(o){do{var e;if((e=o.tag===13)&&(e=o.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return o;o=o.return}while(o!==null);return null}function Vi(o,e,a,c,j){return o.mode&1?(o.flags|=65536,o.lanes=j,o):(o===e?o.flags|=65536:(o.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(e=mh(-1,1),e.tag=2,nh(a,e,1))),a.lanes|=1),o)}var Wi=ua.ReactCurrentOwner,dh$1=!1;function Xi(o,e,a,c){e.child=o===null?Vg(e,null,a,c):Ug(e,o.child,a,c)}function Yi(o,e,a,c,j){a=a.render;var h=e.ref;return ch(e,j),c=Nh(o,e,a,c,h,j),a=Sh(),o!==null&&!dh$1?(e.updateQueue=o.updateQueue,e.flags&=-2053,o.lanes&=~j,Zi(o,e,j)):(I&&a&&vg(e),e.flags|=1,Xi(o,e,c,j),e.child)}function $i(o,e,a,c,j){if(o===null){var h=a.type;return typeof h=="function"&&!aj(h)&&h.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(e.tag=15,e.type=h,bj(o,e,h,c,j)):(o=Rg(a.type,null,c,e,e.mode,j),o.ref=e.ref,o.return=e,e.child=o)}if(h=o.child,!(o.lanes&j)){var et=h.memoizedProps;if(a=a.compare,a=a!==null?a:Ie,a(et,c)&&o.ref===e.ref)return Zi(o,e,j)}return e.flags|=1,o=Pg(h,c),o.ref=e.ref,o.return=e,e.child=o}function bj(o,e,a,c,j){if(o!==null){var h=o.memoizedProps;if(Ie(h,c)&&o.ref===e.ref)if(dh$1=!1,e.pendingProps=c=h,(o.lanes&j)!==0)o.flags&131072&&(dh$1=!0);else return e.lanes=o.lanes,Zi(o,e,j)}return cj(o,e,a,c,j)}function dj(o,e,a){var c=e.pendingProps,j=c.children,h=o!==null?o.memoizedState:null;if(c.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=a;else{if(!(a&1073741824))return o=h!==null?h.baseLanes|a:a,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:o,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=o,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=h!==null?h.baseLanes:a,G(ej,fj),fj|=c}else h!==null?(c=h.baseLanes|a,e.memoizedState=null):c=a,G(ej,fj),fj|=c;return Xi(o,e,j,a),e.child}function gj(o,e){var a=e.ref;(o===null&&a!==null||o!==null&&o.ref!==a)&&(e.flags|=512,e.flags|=2097152)}function cj(o,e,a,c,j){var h=Zf(a)?Xf:H.current;return h=Yf(e,h),ch(e,j),a=Nh(o,e,a,c,h,j),c=Sh(),o!==null&&!dh$1?(e.updateQueue=o.updateQueue,e.flags&=-2053,o.lanes&=~j,Zi(o,e,j)):(I&&c&&vg(e),e.flags|=1,Xi(o,e,a,j),e.child)}function hj(o,e,a,c,j){if(Zf(a)){var h=!0;cg(e)}else h=!1;if(ch(e,j),e.stateNode===null)ij(o,e),Gi(e,a,c),Ii(e,a,c,j),c=!0;else if(o===null){var et=e.stateNode,ot=e.memoizedProps;et.props=ot;var st=et.context,lt=a.contextType;typeof lt=="object"&&lt!==null?lt=eh(lt):(lt=Zf(a)?Xf:H.current,lt=Yf(e,lt));var nt=a.getDerivedStateFromProps,gt=typeof nt=="function"||typeof et.getSnapshotBeforeUpdate=="function";gt||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(ot!==c||st!==lt)&&Hi(e,et,c,lt),jh=!1;var dt=e.memoizedState;et.state=dt,qh(e,c,et,j),st=e.memoizedState,ot!==c||dt!==st||Wf.current||jh?(typeof nt=="function"&&(Di(e,a,nt,c),st=e.memoizedState),(ot=jh||Fi(e,a,ot,c,dt,st,lt))?(gt||typeof et.UNSAFE_componentWillMount!="function"&&typeof et.componentWillMount!="function"||(typeof et.componentWillMount=="function"&&et.componentWillMount(),typeof et.UNSAFE_componentWillMount=="function"&&et.UNSAFE_componentWillMount()),typeof et.componentDidMount=="function"&&(e.flags|=4194308)):(typeof et.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=c,e.memoizedState=st),et.props=c,et.state=st,et.context=lt,c=ot):(typeof et.componentDidMount=="function"&&(e.flags|=4194308),c=!1)}else{et=e.stateNode,lh(o,e),ot=e.memoizedProps,lt=e.type===e.elementType?ot:Ci(e.type,ot),et.props=lt,gt=e.pendingProps,dt=et.context,st=a.contextType,typeof st=="object"&&st!==null?st=eh(st):(st=Zf(a)?Xf:H.current,st=Yf(e,st));var mt=a.getDerivedStateFromProps;(nt=typeof mt=="function"||typeof et.getSnapshotBeforeUpdate=="function")||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(ot!==gt||dt!==st)&&Hi(e,et,c,st),jh=!1,dt=e.memoizedState,et.state=dt,qh(e,c,et,j);var vt=e.memoizedState;ot!==gt||dt!==vt||Wf.current||jh?(typeof mt=="function"&&(Di(e,a,mt,c),vt=e.memoizedState),(lt=jh||Fi(e,a,lt,c,dt,vt,st)||!1)?(nt||typeof et.UNSAFE_componentWillUpdate!="function"&&typeof et.componentWillUpdate!="function"||(typeof et.componentWillUpdate=="function"&&et.componentWillUpdate(c,vt,st),typeof et.UNSAFE_componentWillUpdate=="function"&&et.UNSAFE_componentWillUpdate(c,vt,st)),typeof et.componentDidUpdate=="function"&&(e.flags|=4),typeof et.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof et.componentDidUpdate!="function"||ot===o.memoizedProps&&dt===o.memoizedState||(e.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||ot===o.memoizedProps&&dt===o.memoizedState||(e.flags|=1024),e.memoizedProps=c,e.memoizedState=vt),et.props=c,et.state=vt,et.context=st,c=lt):(typeof et.componentDidUpdate!="function"||ot===o.memoizedProps&&dt===o.memoizedState||(e.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||ot===o.memoizedProps&&dt===o.memoizedState||(e.flags|=1024),c=!1)}return jj(o,e,a,c,h,j)}function jj(o,e,a,c,j,h){gj(o,e);var et=(e.flags&128)!==0;if(!c&&!et)return j&&dg(e,a,!1),Zi(o,e,h);c=e.stateNode,Wi.current=e;var ot=et&&typeof a.getDerivedStateFromError!="function"?null:c.render();return e.flags|=1,o!==null&&et?(e.child=Ug(e,o.child,null,h),e.child=Ug(e,null,ot,h)):Xi(o,e,ot,h),e.memoizedState=c.state,j&&dg(e,a,!0),e.child}function kj(o){var e=o.stateNode;e.pendingContext?ag(o,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(o,e.context,!1),yh(o,e.containerInfo)}function lj(o,e,a,c,j){return Ig(),Jg(j),e.flags|=256,Xi(o,e,a,c),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(o){return{baseLanes:o,cachePool:null,transitions:null}}function oj(o,e,a){var c=e.pendingProps,j=L.current,h=!1,et=(e.flags&128)!==0,ot;if((ot=et)||(ot=o!==null&&o.memoizedState===null?!1:(j&2)!==0),ot?(h=!0,e.flags&=-129):(o===null||o.memoizedState!==null)&&(j|=1),G(L,j&1),o===null)return Eg(e),o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(e.mode&1?o.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(et=c.children,o=c.fallback,h?(c=e.mode,h=e.child,et={mode:"hidden",children:et},!(c&1)&&h!==null?(h.childLanes=0,h.pendingProps=et):h=pj(et,c,0,null),o=Tg(o,c,a,null),h.return=e,o.return=e,h.sibling=o,e.child=h,e.child.memoizedState=nj(a),e.memoizedState=mj,o):qj(e,et));if(j=o.memoizedState,j!==null&&(ot=j.dehydrated,ot!==null))return rj(o,e,et,c,ot,j,a);if(h){h=c.fallback,et=e.mode,j=o.child,ot=j.sibling;var st={mode:"hidden",children:c.children};return!(et&1)&&e.child!==j?(c=e.child,c.childLanes=0,c.pendingProps=st,e.deletions=null):(c=Pg(j,st),c.subtreeFlags=j.subtreeFlags&14680064),ot!==null?h=Pg(ot,h):(h=Tg(h,et,a,null),h.flags|=2),h.return=e,c.return=e,c.sibling=h,e.child=c,c=h,h=e.child,et=o.child.memoizedState,et=et===null?nj(a):{baseLanes:et.baseLanes|a,cachePool:null,transitions:et.transitions},h.memoizedState=et,h.childLanes=o.childLanes&~a,e.memoizedState=mj,c}return h=o.child,o=h.sibling,c=Pg(h,{mode:"visible",children:c.children}),!(e.mode&1)&&(c.lanes=a),c.return=e,c.sibling=null,o!==null&&(a=e.deletions,a===null?(e.deletions=[o],e.flags|=16):a.push(o)),e.child=c,e.memoizedState=null,c}function qj(o,e){return e=pj({mode:"visible",children:e},o.mode,0,null),e.return=o,o.child=e}function sj(o,e,a,c){return c!==null&&Jg(c),Ug(e,o.child,null,a),o=qj(e,e.pendingProps.children),o.flags|=2,e.memoizedState=null,o}function rj(o,e,a,c,j,h,et){if(a)return e.flags&256?(e.flags&=-257,c=Ki(Error(p(422))),sj(o,e,et,c)):e.memoizedState!==null?(e.child=o.child,e.flags|=128,null):(h=c.fallback,j=e.mode,c=pj({mode:"visible",children:c.children},j,0,null),h=Tg(h,j,et,null),h.flags|=2,c.return=e,h.return=e,c.sibling=h,e.child=c,e.mode&1&&Ug(e,o.child,null,et),e.child.memoizedState=nj(et),e.memoizedState=mj,h);if(!(e.mode&1))return sj(o,e,et,null);if(j.data==="$!"){if(c=j.nextSibling&&j.nextSibling.dataset,c)var ot=c.dgst;return c=ot,h=Error(p(419)),c=Ki(h,c,void 0),sj(o,e,et,c)}if(ot=(et&o.childLanes)!==0,dh$1||ot){if(c=Q,c!==null){switch(et&-et){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=j&(c.suspendedLanes|et)?0:j,j!==0&&j!==h.retryLane&&(h.retryLane=j,ih(o,j),gi(c,o,j,-1))}return tj(),c=Ki(Error(p(421))),sj(o,e,et,c)}return j.data==="$?"?(e.flags|=128,e.child=o.child,e=uj.bind(null,o),j._reactRetry=e,null):(o=h.treeContext,yg=Lf(j.nextSibling),xg=e,I=!0,zg=null,o!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=o.id,sg=o.overflow,qg=e),e=qj(e,c.children),e.flags|=4096,e)}function vj(o,e,a){o.lanes|=e;var c=o.alternate;c!==null&&(c.lanes|=e),bh(o.return,e,a)}function wj(o,e,a,c,j){var h=o.memoizedState;h===null?o.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:j}:(h.isBackwards=e,h.rendering=null,h.renderingStartTime=0,h.last=c,h.tail=a,h.tailMode=j)}function xj(o,e,a){var c=e.pendingProps,j=c.revealOrder,h=c.tail;if(Xi(o,e,c.children,a),c=L.current,c&2)c=c&1|2,e.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=e.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vj(o,a,e);else if(o.tag===19)vj(o,a,e);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}c&=1}if(G(L,c),!(e.mode&1))e.memoizedState=null;else switch(j){case"forwards":for(a=e.child,j=null;a!==null;)o=a.alternate,o!==null&&Ch(o)===null&&(j=a),a=a.sibling;a=j,a===null?(j=e.child,e.child=null):(j=a.sibling,a.sibling=null),wj(e,!1,j,a,h);break;case"backwards":for(a=null,j=e.child,e.child=null;j!==null;){if(o=j.alternate,o!==null&&Ch(o)===null){e.child=j;break}o=j.sibling,j.sibling=a,a=j,j=o}wj(e,!0,a,null,h);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(o,e){!(e.mode&1)&&o!==null&&(o.alternate=null,e.alternate=null,e.flags|=2)}function Zi(o,e,a){if(o!==null&&(e.dependencies=o.dependencies),rh|=e.lanes,!(a&e.childLanes))return null;if(o!==null&&e.child!==o.child)throw Error(p(153));if(e.child!==null){for(o=e.child,a=Pg(o,o.pendingProps),e.child=a,a.return=e;o.sibling!==null;)o=o.sibling,a=a.sibling=Pg(o,o.pendingProps),a.return=e;a.sibling=null}return e.child}function yj(o,e,a){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var c=e.type._context,j=e.memoizedProps.value;G(Wg,c._currentValue),c._currentValue=j;break;case 13:if(c=e.memoizedState,c!==null)return c.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):a&e.child.childLanes?oj(o,e,a):(G(L,L.current&1),o=Zi(o,e,a),o!==null?o.sibling:null);G(L,L.current&1);break;case 19:if(c=(a&e.childLanes)!==0,o.flags&128){if(c)return xj(o,e,a);e.flags|=128}if(j=e.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),G(L,L.current),c)break;return null;case 22:case 23:return e.lanes=0,dj(o,e,a)}return Zi(o,e,a)}var zj,Aj,Bj,Cj;zj=function(o,e){for(var a=e.child;a!==null;){if(a.tag===5||a.tag===6)o.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Aj=function(){};Bj=function(o,e,a,c){var j=o.memoizedProps;if(j!==c){o=e.stateNode,xh(uh.current);var h=null;switch(a){case"input":j=Ya(o,j),c=Ya(o,c),h=[];break;case"select":j=A({},j,{value:void 0}),c=A({},c,{value:void 0}),h=[];break;case"textarea":j=gb(o,j),c=gb(o,c),h=[];break;default:typeof j.onClick!="function"&&typeof c.onClick=="function"&&(o.onclick=Bf)}ub(a,c);var et;a=null;for(lt in j)if(!c.hasOwnProperty(lt)&&j.hasOwnProperty(lt)&&j[lt]!=null)if(lt==="style"){var ot=j[lt];for(et in ot)ot.hasOwnProperty(et)&&(a||(a={}),a[et]="")}else lt!=="dangerouslySetInnerHTML"&&lt!=="children"&&lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&lt!=="autoFocus"&&(ea.hasOwnProperty(lt)?h||(h=[]):(h=h||[]).push(lt,null));for(lt in c){var st=c[lt];if(ot=j!=null?j[lt]:void 0,c.hasOwnProperty(lt)&&st!==ot&&(st!=null||ot!=null))if(lt==="style")if(ot){for(et in ot)!ot.hasOwnProperty(et)||st&&st.hasOwnProperty(et)||(a||(a={}),a[et]="");for(et in st)st.hasOwnProperty(et)&&ot[et]!==st[et]&&(a||(a={}),a[et]=st[et])}else a||(h||(h=[]),h.push(lt,a)),a=st;else lt==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,ot=ot?ot.__html:void 0,st!=null&&ot!==st&&(h=h||[]).push(lt,st)):lt==="children"?typeof st!="string"&&typeof st!="number"||(h=h||[]).push(lt,""+st):lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(lt)?(st!=null&&lt==="onScroll"&&D("scroll",o),h||ot===st||(h=[])):(h=h||[]).push(lt,st))}a&&(h=h||[]).push("style",a);var lt=h;(e.updateQueue=lt)&&(e.flags|=4)}};Cj=function(o,e,a,c){a!==c&&(e.flags|=4)};function Dj(o,e){if(!I)switch(o.tailMode){case"hidden":e=o.tail;for(var a=null;e!==null;)e.alternate!==null&&(a=e),e=e.sibling;a===null?o.tail=null:a.sibling=null;break;case"collapsed":a=o.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?e||o.tail===null?o.tail=null:o.tail.sibling=null:c.sibling=null}}function S(o){var e=o.alternate!==null&&o.alternate.child===o.child,a=0,c=0;if(e)for(var j=o.child;j!==null;)a|=j.lanes|j.childLanes,c|=j.subtreeFlags&14680064,c|=j.flags&14680064,j.return=o,j=j.sibling;else for(j=o.child;j!==null;)a|=j.lanes|j.childLanes,c|=j.subtreeFlags,c|=j.flags,j.return=o,j=j.sibling;return o.subtreeFlags|=c,o.childLanes=a,e}function Ej(o,e,a){var c=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return c=e.stateNode,zh(),E(Wf),E(H),Eh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(Gg(e)?e.flags|=4:o===null||o.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(o,e),S(e),null;case 5:Bh(e);var j=xh(wh.current);if(a=e.type,o!==null&&e.stateNode!=null)Bj(o,e,a,c,j),o.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!c){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(o=xh(uh.current),Gg(e)){c=e.stateNode,a=e.type;var h=e.memoizedProps;switch(c[Of]=e,c[Pf]=h,o=(e.mode&1)!==0,a){case"dialog":D("cancel",c),D("close",c);break;case"iframe":case"object":case"embed":D("load",c);break;case"video":case"audio":for(j=0;j<lf.length;j++)D(lf[j],c);break;case"source":D("error",c);break;case"img":case"image":case"link":D("error",c),D("load",c);break;case"details":D("toggle",c);break;case"input":Za(c,h),D("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!h.multiple},D("invalid",c);break;case"textarea":hb(c,h),D("invalid",c)}ub(a,h),j=null;for(var et in h)if(h.hasOwnProperty(et)){var ot=h[et];et==="children"?typeof ot=="string"?c.textContent!==ot&&(h.suppressHydrationWarning!==!0&&Af(c.textContent,ot,o),j=["children",ot]):typeof ot=="number"&&c.textContent!==""+ot&&(h.suppressHydrationWarning!==!0&&Af(c.textContent,ot,o),j=["children",""+ot]):ea.hasOwnProperty(et)&&ot!=null&&et==="onScroll"&&D("scroll",c)}switch(a){case"input":Va(c),db(c,h,!0);break;case"textarea":Va(c),jb(c);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(c.onclick=Bf)}c=j,e.updateQueue=c,c!==null&&(e.flags|=4)}else{et=j.nodeType===9?j:j.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kb(a)),o==="http://www.w3.org/1999/xhtml"?a==="script"?(o=et.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof c.is=="string"?o=et.createElement(a,{is:c.is}):(o=et.createElement(a),a==="select"&&(et=o,c.multiple?et.multiple=!0:c.size&&(et.size=c.size))):o=et.createElementNS(o,a),o[Of]=e,o[Pf]=c,zj(o,e,!1,!1),e.stateNode=o;e:{switch(et=vb(a,c),a){case"dialog":D("cancel",o),D("close",o),j=c;break;case"iframe":case"object":case"embed":D("load",o),j=c;break;case"video":case"audio":for(j=0;j<lf.length;j++)D(lf[j],o);j=c;break;case"source":D("error",o),j=c;break;case"img":case"image":case"link":D("error",o),D("load",o),j=c;break;case"details":D("toggle",o),j=c;break;case"input":Za(o,c),j=Ya(o,c),D("invalid",o);break;case"option":j=c;break;case"select":o._wrapperState={wasMultiple:!!c.multiple},j=A({},c,{value:void 0}),D("invalid",o);break;case"textarea":hb(o,c),j=gb(o,c),D("invalid",o);break;default:j=c}ub(a,j),ot=j;for(h in ot)if(ot.hasOwnProperty(h)){var st=ot[h];h==="style"?sb(o,st):h==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,st!=null&&nb(o,st)):h==="children"?typeof st=="string"?(a!=="textarea"||st!=="")&&ob(o,st):typeof st=="number"&&ob(o,""+st):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ea.hasOwnProperty(h)?st!=null&&h==="onScroll"&&D("scroll",o):st!=null&&ta(o,h,st,et))}switch(a){case"input":Va(o),db(o,c,!1);break;case"textarea":Va(o),jb(o);break;case"option":c.value!=null&&o.setAttribute("value",""+Sa(c.value));break;case"select":o.multiple=!!c.multiple,h=c.value,h!=null?fb(o,!!c.multiple,h,!1):c.defaultValue!=null&&fb(o,!!c.multiple,c.defaultValue,!0);break;default:typeof j.onClick=="function"&&(o.onclick=Bf)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(o&&e.stateNode!=null)Cj(o,e,o.memoizedProps,c);else{if(typeof c!="string"&&e.stateNode===null)throw Error(p(166));if(a=xh(wh.current),xh(uh.current),Gg(e)){if(c=e.stateNode,a=e.memoizedProps,c[Of]=e,(h=c.nodeValue!==a)&&(o=xg,o!==null))switch(o.tag){case 3:Af(c.nodeValue,a,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Af(c.nodeValue,a,(o.mode&1)!==0)}h&&(e.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Of]=e,e.stateNode=c}return S(e),null;case 13:if(E(L),c=e.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,h=!1;else if(h=Gg(e),c!==null&&c.dehydrated!==null){if(o===null){if(!h)throw Error(p(318));if(h=e.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(p(317));h[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),h=!1}else zg!==null&&(Fj(zg),zg=null),h=!0;if(!h)return e.flags&65536?e:null}return e.flags&128?(e.lanes=a,e):(c=c!==null,c!==(o!==null&&o.memoizedState!==null)&&c&&(e.child.flags|=8192,e.mode&1&&(o===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(o,e),o===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),h=e.memoizedState,h===null)return S(e),null;if(c=(e.flags&128)!==0,et=h.rendering,et===null)if(c)Dj(h,!1);else{if(T!==0||o!==null&&o.flags&128)for(o=e.child;o!==null;){if(et=Ch(o),et!==null){for(e.flags|=128,Dj(h,!1),c=et.updateQueue,c!==null&&(e.updateQueue=c,e.flags|=4),e.subtreeFlags=0,c=a,a=e.child;a!==null;)h=a,o=c,h.flags&=14680066,et=h.alternate,et===null?(h.childLanes=0,h.lanes=o,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=et.childLanes,h.lanes=et.lanes,h.child=et.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=et.memoizedProps,h.memoizedState=et.memoizedState,h.updateQueue=et.updateQueue,h.type=et.type,o=et.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a=a.sibling;return G(L,L.current&1|2),e.child}o=o.sibling}h.tail!==null&&B()>Gj&&(e.flags|=128,c=!0,Dj(h,!1),e.lanes=4194304)}else{if(!c)if(o=Ch(et),o!==null){if(e.flags|=128,c=!0,a=o.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),Dj(h,!0),h.tail===null&&h.tailMode==="hidden"&&!et.alternate&&!I)return S(e),null}else 2*B()-h.renderingStartTime>Gj&&a!==1073741824&&(e.flags|=128,c=!0,Dj(h,!1),e.lanes=4194304);h.isBackwards?(et.sibling=e.child,e.child=et):(a=h.last,a!==null?a.sibling=et:e.child=et,h.last=et)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=B(),e.sibling=null,a=L.current,G(L,c?a&1|2:a&1),e):(S(e),null);case 22:case 23:return Hj(),c=e.memoizedState!==null,o!==null&&o.memoizedState!==null!==c&&(e.flags|=8192),c&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(o,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),o=e.flags,o&65536?(e.flags=o&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),o=e.flags,o&65536&&!(o&128)?(e.flags=o&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),o=e.memoizedState,o!==null&&o.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return o=e.flags,o&65536?(e.flags=o&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(o,e){var a=o.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){W(o,e,c)}else a.current=null}function Mj(o,e,a){try{a()}catch(c){W(o,e,c)}}var Nj=!1;function Oj(o,e){if(Cf=dd,o=Me(),Ne(o)){if("selectionStart"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{a=(a=o.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var j=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var et=0,ot=-1,st=-1,lt=0,nt=0,gt=o,dt=null;t:for(;;){for(var mt;gt!==a||j!==0&&gt.nodeType!==3||(ot=et+j),gt!==h||c!==0&&gt.nodeType!==3||(st=et+c),gt.nodeType===3&&(et+=gt.nodeValue.length),(mt=gt.firstChild)!==null;)dt=gt,gt=mt;for(;;){if(gt===o)break t;if(dt===a&&++lt===j&&(ot=et),dt===h&&++nt===c&&(st=et),(mt=gt.nextSibling)!==null)break;gt=dt,dt=gt.parentNode}gt=mt}a=ot===-1||st===-1?null:{start:ot,end:st}}else a=null}a=a||{start:0,end:0}}else a=null;for(Df={focusedElem:o,selectionRange:a},dd=!1,V=e;V!==null;)if(e=V,o=e.child,(e.subtreeFlags&1028)!==0&&o!==null)o.return=e,V=o;else for(;V!==null;){e=V;try{var vt=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(vt!==null){var tt=vt.memoizedProps,bt=vt.memoizedState,ht=e.stateNode,St=ht.getSnapshotBeforeUpdate(e.elementType===e.type?tt:Ci(e.type,tt),bt);ht.__reactInternalSnapshotBeforeUpdate=St}break;case 3:var At=e.stateNode.containerInfo;At.nodeType===1?At.textContent="":At.nodeType===9&&At.documentElement&&At.removeChild(At.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(Tt){W(e,e.return,Tt)}if(o=e.sibling,o!==null){o.return=e.return,V=o;break}V=e.return}return vt=Nj,Nj=!1,vt}function Pj(o,e,a){var c=e.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var j=c=c.next;do{if((j.tag&o)===o){var h=j.destroy;j.destroy=void 0,h!==void 0&&Mj(e,a,h)}j=j.next}while(j!==c)}}function Qj(o,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var a=e=e.next;do{if((a.tag&o)===o){var c=a.create;a.destroy=c()}a=a.next}while(a!==e)}}function Rj(o){var e=o.ref;if(e!==null){var a=o.stateNode;switch(o.tag){case 5:o=a;break;default:o=a}typeof e=="function"?e(o):e.current=o}}function Sj(o){var e=o.alternate;e!==null&&(o.alternate=null,Sj(e)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(e=o.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Tj(o){return o.tag===5||o.tag===3||o.tag===4}function Uj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Tj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Vj(o,e,a){var c=o.tag;if(c===5||c===6)o=o.stateNode,e?a.nodeType===8?a.parentNode.insertBefore(o,e):a.insertBefore(o,e):(a.nodeType===8?(e=a.parentNode,e.insertBefore(o,a)):(e=a,e.appendChild(o)),a=a._reactRootContainer,a!=null||e.onclick!==null||(e.onclick=Bf));else if(c!==4&&(o=o.child,o!==null))for(Vj(o,e,a),o=o.sibling;o!==null;)Vj(o,e,a),o=o.sibling}function Wj(o,e,a){var c=o.tag;if(c===5||c===6)o=o.stateNode,e?a.insertBefore(o,e):a.appendChild(o);else if(c!==4&&(o=o.child,o!==null))for(Wj(o,e,a),o=o.sibling;o!==null;)Wj(o,e,a),o=o.sibling}var X=null,Xj=!1;function Yj(o,e,a){for(a=a.child;a!==null;)Zj(o,e,a),a=a.sibling}function Zj(o,e,a){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,a)}catch{}switch(a.tag){case 5:U||Lj(a,e);case 6:var c=X,j=Xj;X=null,Yj(o,e,a),X=c,Xj=j,X!==null&&(Xj?(o=X,a=a.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):X.removeChild(a.stateNode));break;case 18:X!==null&&(Xj?(o=X,a=a.stateNode,o.nodeType===8?Kf(o.parentNode,a):o.nodeType===1&&Kf(o,a),bd(o)):Kf(X,a.stateNode));break;case 4:c=X,j=Xj,X=a.stateNode.containerInfo,Xj=!0,Yj(o,e,a),X=c,Xj=j;break;case 0:case 11:case 14:case 15:if(!U&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){j=c=c.next;do{var h=j,et=h.destroy;h=h.tag,et!==void 0&&(h&2||h&4)&&Mj(a,e,et),j=j.next}while(j!==c)}Yj(o,e,a);break;case 1:if(!U&&(Lj(a,e),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(ot){W(a,e,ot)}Yj(o,e,a);break;case 21:Yj(o,e,a);break;case 22:a.mode&1?(U=(c=U)||a.memoizedState!==null,Yj(o,e,a),U=c):Yj(o,e,a);break;default:Yj(o,e,a)}}function ak(o){var e=o.updateQueue;if(e!==null){o.updateQueue=null;var a=o.stateNode;a===null&&(a=o.stateNode=new Kj),e.forEach(function(c){var j=bk.bind(null,o,c);a.has(c)||(a.add(c),c.then(j,j))})}}function ck(o,e){var a=e.deletions;if(a!==null)for(var c=0;c<a.length;c++){var j=a[c];try{var h=o,et=e,ot=et;e:for(;ot!==null;){switch(ot.tag){case 5:X=ot.stateNode,Xj=!1;break e;case 3:X=ot.stateNode.containerInfo,Xj=!0;break e;case 4:X=ot.stateNode.containerInfo,Xj=!0;break e}ot=ot.return}if(X===null)throw Error(p(160));Zj(h,et,j),X=null,Xj=!1;var st=j.alternate;st!==null&&(st.return=null),j.return=null}catch(lt){W(j,e,lt)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,o),e=e.sibling}function dk(o,e){var a=o.alternate,c=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ck(e,o),ek(o),c&4){try{Pj(3,o,o.return),Qj(3,o)}catch(tt){W(o,o.return,tt)}try{Pj(5,o,o.return)}catch(tt){W(o,o.return,tt)}}break;case 1:ck(e,o),ek(o),c&512&&a!==null&&Lj(a,a.return);break;case 5:if(ck(e,o),ek(o),c&512&&a!==null&&Lj(a,a.return),o.flags&32){var j=o.stateNode;try{ob(j,"")}catch(tt){W(o,o.return,tt)}}if(c&4&&(j=o.stateNode,j!=null)){var h=o.memoizedProps,et=a!==null?a.memoizedProps:h,ot=o.type,st=o.updateQueue;if(o.updateQueue=null,st!==null)try{ot==="input"&&h.type==="radio"&&h.name!=null&&ab(j,h),vb(ot,et);var lt=vb(ot,h);for(et=0;et<st.length;et+=2){var nt=st[et],gt=st[et+1];nt==="style"?sb(j,gt):nt==="dangerouslySetInnerHTML"?nb(j,gt):nt==="children"?ob(j,gt):ta(j,nt,gt,lt)}switch(ot){case"input":bb(j,h);break;case"textarea":ib(j,h);break;case"select":var dt=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!h.multiple;var mt=h.value;mt!=null?fb(j,!!h.multiple,mt,!1):dt!==!!h.multiple&&(h.defaultValue!=null?fb(j,!!h.multiple,h.defaultValue,!0):fb(j,!!h.multiple,h.multiple?[]:"",!1))}j[Pf]=h}catch(tt){W(o,o.return,tt)}}break;case 6:if(ck(e,o),ek(o),c&4){if(o.stateNode===null)throw Error(p(162));j=o.stateNode,h=o.memoizedProps;try{j.nodeValue=h}catch(tt){W(o,o.return,tt)}}break;case 3:if(ck(e,o),ek(o),c&4&&a!==null&&a.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(tt){W(o,o.return,tt)}break;case 4:ck(e,o),ek(o);break;case 13:ck(e,o),ek(o),j=o.child,j.flags&8192&&(h=j.memoizedState!==null,j.stateNode.isHidden=h,!h||j.alternate!==null&&j.alternate.memoizedState!==null||(fk=B())),c&4&&ak(o);break;case 22:if(nt=a!==null&&a.memoizedState!==null,o.mode&1?(U=(lt=U)||nt,ck(e,o),U=lt):ck(e,o),ek(o),c&8192){if(lt=o.memoizedState!==null,(o.stateNode.isHidden=lt)&&!nt&&o.mode&1)for(V=o,nt=o.child;nt!==null;){for(gt=V=nt;V!==null;){switch(dt=V,mt=dt.child,dt.tag){case 0:case 11:case 14:case 15:Pj(4,dt,dt.return);break;case 1:Lj(dt,dt.return);var vt=dt.stateNode;if(typeof vt.componentWillUnmount=="function"){c=dt,a=dt.return;try{e=c,vt.props=e.memoizedProps,vt.state=e.memoizedState,vt.componentWillUnmount()}catch(tt){W(c,a,tt)}}break;case 5:Lj(dt,dt.return);break;case 22:if(dt.memoizedState!==null){gk(gt);continue}}mt!==null?(mt.return=dt,V=mt):gk(gt)}nt=nt.sibling}e:for(nt=null,gt=o;;){if(gt.tag===5){if(nt===null){nt=gt;try{j=gt.stateNode,lt?(h=j.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(ot=gt.stateNode,st=gt.memoizedProps.style,et=st!=null&&st.hasOwnProperty("display")?st.display:null,ot.style.display=rb("display",et))}catch(tt){W(o,o.return,tt)}}}else if(gt.tag===6){if(nt===null)try{gt.stateNode.nodeValue=lt?"":gt.memoizedProps}catch(tt){W(o,o.return,tt)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===o)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===o)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===o)break e;nt===gt&&(nt=null),gt=gt.return}nt===gt&&(nt=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:ck(e,o),ek(o),c&4&&ak(o);break;case 21:break;default:ck(e,o),ek(o)}}function ek(o){var e=o.flags;if(e&2){try{e:{for(var a=o.return;a!==null;){if(Tj(a)){var c=a;break e}a=a.return}throw Error(p(160))}switch(c.tag){case 5:var j=c.stateNode;c.flags&32&&(ob(j,""),c.flags&=-33);var h=Uj(o);Wj(o,h,j);break;case 3:case 4:var et=c.stateNode.containerInfo,ot=Uj(o);Vj(o,ot,et);break;default:throw Error(p(161))}}catch(st){W(o,o.return,st)}o.flags&=-3}e&4096&&(o.flags&=-4097)}function hk(o,e,a){V=o,ik(o)}function ik(o,e,a){for(var c=(o.mode&1)!==0;V!==null;){var j=V,h=j.child;if(j.tag===22&&c){var et=j.memoizedState!==null||Jj;if(!et){var ot=j.alternate,st=ot!==null&&ot.memoizedState!==null||U;ot=Jj;var lt=U;if(Jj=et,(U=st)&&!lt)for(V=j;V!==null;)et=V,st=et.child,et.tag===22&&et.memoizedState!==null?jk(j):st!==null?(st.return=et,V=st):jk(j);for(;h!==null;)V=h,ik(h),h=h.sibling;V=j,Jj=ot,U=lt}kk(o)}else j.subtreeFlags&8772&&h!==null?(h.return=j,V=h):kk(o)}}function kk(o){for(;V!==null;){var e=V;if(e.flags&8772){var a=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var c=e.stateNode;if(e.flags&4&&!U)if(a===null)c.componentDidMount();else{var j=e.elementType===e.type?a.memoizedProps:Ci(e.type,a.memoizedProps);c.componentDidUpdate(j,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var h=e.updateQueue;h!==null&&sh(e,h,c);break;case 3:var et=e.updateQueue;if(et!==null){if(a=null,e.child!==null)switch(e.child.tag){case 5:a=e.child.stateNode;break;case 1:a=e.child.stateNode}sh(e,et,a)}break;case 5:var ot=e.stateNode;if(a===null&&e.flags&4){a=ot;var st=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":st.autoFocus&&a.focus();break;case"img":st.src&&(a.src=st.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var lt=e.alternate;if(lt!==null){var nt=lt.memoizedState;if(nt!==null){var gt=nt.dehydrated;gt!==null&&bd(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch(dt){W(e,e.return,dt)}}if(e===o){V=null;break}if(a=e.sibling,a!==null){a.return=e.return,V=a;break}V=e.return}}function gk(o){for(;V!==null;){var e=V;if(e===o){V=null;break}var a=e.sibling;if(a!==null){a.return=e.return,V=a;break}V=e.return}}function jk(o){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var a=e.return;try{Qj(4,e)}catch(st){W(e,a,st)}break;case 1:var c=e.stateNode;if(typeof c.componentDidMount=="function"){var j=e.return;try{c.componentDidMount()}catch(st){W(e,j,st)}}var h=e.return;try{Rj(e)}catch(st){W(e,h,st)}break;case 5:var et=e.return;try{Rj(e)}catch(st){W(e,et,st)}}}catch(st){W(e,e.return,st)}if(e===o){V=null;break}var ot=e.sibling;if(ot!==null){ot.return=e.return,V=ot;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(o){return o.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(o=C,o!==0||(o=window.event,o=o===void 0?16:jd(o.type)),o):1}function gi(o,e,a,c){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(o,a,c),(!(K&2)||o!==Q)&&(o===Q&&(!(K&2)&&(qk|=a),T===4&&Ck(o,Z)),Dk(o,c),a===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(o,e){var a=o.callbackNode;wc(o,e);var c=uc(o,o===Q?Z:0);if(c===0)a!==null&&bc(a),o.callbackNode=null,o.callbackPriority=0;else if(e=c&-c,o.callbackPriority!==e){if(a!=null&&bc(a),e===1)o.tag===0?ig(Ek.bind(null,o)):hg(Ek.bind(null,o)),Jf(function(){!(K&6)&&jg()}),a=null;else{switch(Dc(c)){case 1:a=fc;break;case 4:a=gc;break;case 16:a=hc;break;case 536870912:a=jc;break;default:a=hc}a=Fk(a,Gk.bind(null,o))}o.callbackPriority=e,o.callbackNode=a}}function Gk(o,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var a=o.callbackNode;if(Hk()&&o.callbackNode!==a)return null;var c=uc(o,o===Q?Z:0);if(c===0)return null;if(c&30||c&o.expiredLanes||e)e=Ik(o,c);else{e=c;var j=K;K|=2;var h=Jk();(Q!==o||Z!==e)&&(uk=null,Gj=B()+500,Kk(o,e));do try{Lk();break}catch(ot){Mk(o,ot)}while(!0);$g(),mk.current=h,K=j,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(j=xc(o),j!==0&&(c=j,e=Nk(o,j))),e===1)throw a=pk,Kk(o,0),Ck(o,c),Dk(o,B()),a;if(e===6)Ck(o,c);else{if(j=o.current.alternate,!(c&30)&&!Ok(j)&&(e=Ik(o,c),e===2&&(h=xc(o),h!==0&&(c=h,e=Nk(o,h))),e===1))throw a=pk,Kk(o,0),Ck(o,c),Dk(o,B()),a;switch(o.finishedWork=j,o.finishedLanes=c,e){case 0:case 1:throw Error(p(345));case 2:Pk(o,tk,uk);break;case 3:if(Ck(o,c),(c&130023424)===c&&(e=fk+500-B(),10<e)){if(uc(o,0)!==0)break;if(j=o.suspendedLanes,(j&c)!==c){R$1(),o.pingedLanes|=o.suspendedLanes&j;break}o.timeoutHandle=Ff(Pk.bind(null,o,tk,uk),e);break}Pk(o,tk,uk);break;case 4:if(Ck(o,c),(c&4194240)===c)break;for(e=o.eventTimes,j=-1;0<c;){var et=31-oc(c);h=1<<et,et=e[et],et>j&&(j=et),c&=~h}if(c=j,c=B()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*lk(c/1960))-c,10<c){o.timeoutHandle=Ff(Pk.bind(null,o,tk,uk),c);break}Pk(o,tk,uk);break;case 5:Pk(o,tk,uk);break;default:throw Error(p(329))}}}return Dk(o,B()),o.callbackNode===a?Gk.bind(null,o):null}function Nk(o,e){var a=sk;return o.current.memoizedState.isDehydrated&&(Kk(o,e).flags|=256),o=Ik(o,e),o!==2&&(e=tk,tk=a,e!==null&&Fj(e)),o}function Fj(o){tk===null?tk=o:tk.push.apply(tk,o)}function Ok(o){for(var e=o;;){if(e.flags&16384){var a=e.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var j=a[c],h=j.getSnapshot;j=j.value;try{if(!He(h(),j))return!1}catch{return!1}}}if(a=e.child,e.subtreeFlags&16384&&a!==null)a.return=e,e=a;else{if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(o,e){for(e&=~rk,e&=~qk,o.suspendedLanes|=e,o.pingedLanes&=~e,o=o.expirationTimes;0<e;){var a=31-oc(e),c=1<<a;o[a]=-1,e&=~c}}function Ek(o){if(K&6)throw Error(p(327));Hk();var e=uc(o,0);if(!(e&1))return Dk(o,B()),null;var a=Ik(o,e);if(o.tag!==0&&a===2){var c=xc(o);c!==0&&(e=c,a=Nk(o,c))}if(a===1)throw a=pk,Kk(o,0),Ck(o,e),Dk(o,B()),a;if(a===6)throw Error(p(345));return o.finishedWork=o.current.alternate,o.finishedLanes=e,Pk(o,tk,uk),Dk(o,B()),null}function Qk(o,e){var a=K;K|=1;try{return o(e)}finally{K=a,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(o){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var a=ok.transition,c=C;try{if(ok.transition=null,C=1,o)return o()}finally{C=c,ok.transition=a,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(o,e){o.finishedWork=null,o.finishedLanes=0;var a=o.timeoutHandle;if(a!==-1&&(o.timeoutHandle=-1,Gf(a)),Y!==null)for(a=Y.return;a!==null;){var c=a;switch(wg(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(c);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(c.type._context);break;case 22:case 23:Hj()}a=a.return}if(Q=o,Y=o=Pg(o.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(a=fh[e],c=a.interleaved,c!==null){a.interleaved=null;var j=c.next,h=a.pending;if(h!==null){var et=h.next;h.next=j,c.next=et}a.pending=c}fh=null}return o}function Mk(o,e){do{var a=Y;try{if($g(),Fh.current=Rh,Ih){for(var c=M.memoizedState;c!==null;){var j=c.queue;j!==null&&(j.pending=null),c=c.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,a===null||a.return===null){T=1,pk=e,Y=null;break}e:{var h=o,et=a.return,ot=a,st=e;if(e=Z,ot.flags|=32768,st!==null&&typeof st=="object"&&typeof st.then=="function"){var lt=st,nt=ot,gt=nt.tag;if(!(nt.mode&1)&&(gt===0||gt===11||gt===15)){var dt=nt.alternate;dt?(nt.updateQueue=dt.updateQueue,nt.memoizedState=dt.memoizedState,nt.lanes=dt.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var mt=Ui(et);if(mt!==null){mt.flags&=-257,Vi(mt,et,ot,h,e),mt.mode&1&&Si(h,lt,e),e=mt,st=lt;var vt=e.updateQueue;if(vt===null){var tt=new Set;tt.add(st),e.updateQueue=tt}else vt.add(st);break e}else{if(!(e&1)){Si(h,lt,e),tj();break e}st=Error(p(426))}}else if(I&&ot.mode&1){var bt=Ui(et);if(bt!==null){!(bt.flags&65536)&&(bt.flags|=256),Vi(bt,et,ot,h,e),Jg(Ji(st,ot));break e}}h=st=Ji(st,ot),T!==4&&(T=2),sk===null?sk=[h]:sk.push(h),h=et;do{switch(h.tag){case 3:h.flags|=65536,e&=-e,h.lanes|=e;var ht=Ni(h,st,e);ph(h,ht);break e;case 1:ot=st;var St=h.type,At=h.stateNode;if(!(h.flags&128)&&(typeof St.getDerivedStateFromError=="function"||At!==null&&typeof At.componentDidCatch=="function"&&(Ri===null||!Ri.has(At)))){h.flags|=65536,e&=-e,h.lanes|=e;var Tt=Qi(h,ot,e);ph(h,Tt);break e}}h=h.return}while(h!==null)}Sk(a)}catch(ft){e=ft,Y===a&&a!==null&&(Y=a=a.return);continue}break}while(!0)}function Jk(){var o=mk.current;return mk.current=Rh,o===null?Rh:o}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(o,e){var a=K;K|=2;var c=Jk();(Q!==o||Z!==e)&&(uk=null,Kk(o,e));do try{Tk();break}catch(j){Mk(o,j)}while(!0);if($g(),K=a,mk.current=c,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(o){var e=Vk(o.alternate,o,fj);o.memoizedProps=o.pendingProps,e===null?Sk(o):Y=e,nk.current=null}function Sk(o){var e=o;do{var a=e.alternate;if(o=e.return,e.flags&32768){if(a=Ij(a,e),a!==null){a.flags&=32767,Y=a;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{T=6,Y=null;return}}else if(a=Ej(a,e,fj),a!==null){Y=a;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=o}while(e!==null);T===0&&(T=5)}function Pk(o,e,a){var c=C,j=ok.transition;try{ok.transition=null,C=1,Wk(o,e,a,c)}finally{ok.transition=j,C=c}return null}function Wk(o,e,a,c){do Hk();while(wk!==null);if(K&6)throw Error(p(327));a=o.finishedWork;var j=o.finishedLanes;if(a===null)return null;if(o.finishedWork=null,o.finishedLanes=0,a===o.current)throw Error(p(177));o.callbackNode=null,o.callbackPriority=0;var h=a.lanes|a.childLanes;if(Bc(o,h),o===Q&&(Y=Q=null,Z=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),h=(a.flags&15990)!==0,a.subtreeFlags&15990||h){h=ok.transition,ok.transition=null;var et=C;C=1;var ot=K;K|=4,nk.current=null,Oj(o,a),dk(a,o),Oe(Df),dd=!!Cf,Df=Cf=null,o.current=a,hk(a),dc(),K=ot,C=et,ok.transition=h}else o.current=a;if(vk&&(vk=!1,wk=o,xk=j),h=o.pendingLanes,h===0&&(Ri=null),mc(a.stateNode),Dk(o,B()),e!==null)for(c=o.onRecoverableError,a=0;a<e.length;a++)j=e[a],c(j.value,{componentStack:j.stack,digest:j.digest});if(Oi)throw Oi=!1,o=Pi,Pi=null,o;return xk&1&&o.tag!==0&&Hk(),h=o.pendingLanes,h&1?o===zk?yk++:(yk=0,zk=o):yk=0,jg(),null}function Hk(){if(wk!==null){var o=Dc(xk),e=ok.transition,a=C;try{if(ok.transition=null,C=16>o?16:o,wk===null)var c=!1;else{if(o=wk,wk=null,xk=0,K&6)throw Error(p(331));var j=K;for(K|=4,V=o.current;V!==null;){var h=V,et=h.child;if(V.flags&16){var ot=h.deletions;if(ot!==null){for(var st=0;st<ot.length;st++){var lt=ot[st];for(V=lt;V!==null;){var nt=V;switch(nt.tag){case 0:case 11:case 15:Pj(8,nt,h)}var gt=nt.child;if(gt!==null)gt.return=nt,V=gt;else for(;V!==null;){nt=V;var dt=nt.sibling,mt=nt.return;if(Sj(nt),nt===lt){V=null;break}if(dt!==null){dt.return=mt,V=dt;break}V=mt}}}var vt=h.alternate;if(vt!==null){var tt=vt.child;if(tt!==null){vt.child=null;do{var bt=tt.sibling;tt.sibling=null,tt=bt}while(tt!==null)}}V=h}}if(h.subtreeFlags&2064&&et!==null)et.return=h,V=et;else e:for(;V!==null;){if(h=V,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Pj(9,h,h.return)}var ht=h.sibling;if(ht!==null){ht.return=h.return,V=ht;break e}V=h.return}}var St=o.current;for(V=St;V!==null;){et=V;var At=et.child;if(et.subtreeFlags&2064&&At!==null)At.return=et,V=At;else e:for(et=St;V!==null;){if(ot=V,ot.flags&2048)try{switch(ot.tag){case 0:case 11:case 15:Qj(9,ot)}}catch(ft){W(ot,ot.return,ft)}if(ot===et){V=null;break e}var Tt=ot.sibling;if(Tt!==null){Tt.return=ot.return,V=Tt;break e}V=ot.return}}if(K=j,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,o)}catch{}c=!0}return c}finally{C=a,ok.transition=e}}return!1}function Xk(o,e,a){e=Ji(a,e),e=Ni(o,e,1),o=nh(o,e,1),e=R$1(),o!==null&&(Ac(o,1,e),Dk(o,e))}function W(o,e,a){if(o.tag===3)Xk(o,o,a);else for(;e!==null;){if(e.tag===3){Xk(e,o,a);break}else if(e.tag===1){var c=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ri===null||!Ri.has(c))){o=Ji(a,o),o=Qi(e,o,1),e=nh(e,o,1),o=R$1(),e!==null&&(Ac(e,1,o),Dk(e,o));break}}e=e.return}}function Ti(o,e,a){var c=o.pingCache;c!==null&&c.delete(e),e=R$1(),o.pingedLanes|=o.suspendedLanes&a,Q===o&&(Z&a)===a&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(o,0):rk|=a),Dk(o,e)}function Yk(o,e){e===0&&(o.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var a=R$1();o=ih(o,e),o!==null&&(Ac(o,e,a),Dk(o,a))}function uj(o){var e=o.memoizedState,a=0;e!==null&&(a=e.retryLane),Yk(o,a)}function bk(o,e){var a=0;switch(o.tag){case 13:var c=o.stateNode,j=o.memoizedState;j!==null&&(a=j.retryLane);break;case 19:c=o.stateNode;break;default:throw Error(p(314))}c!==null&&c.delete(e),Yk(o,a)}var Vk;Vk=function(o,e,a){if(o!==null)if(o.memoizedProps!==e.pendingProps||Wf.current)dh$1=!0;else{if(!(o.lanes&a)&&!(e.flags&128))return dh$1=!1,yj(o,e,a);dh$1=!!(o.flags&131072)}else dh$1=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var c=e.type;ij(o,e),o=e.pendingProps;var j=Yf(e,H.current);ch(e,a),j=Nh(null,e,c,o,j,a);var h=Sh();return e.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(c)?(h=!0,cg(e)):h=!1,e.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,kh(e),j.updater=Ei,e.stateNode=j,j._reactInternals=e,Ii(e,c,o,a),e=jj(null,e,c,!0,h,a)):(e.tag=0,I&&h&&vg(e),Xi(null,e,j,a),e=e.child),e;case 16:c=e.elementType;e:{switch(ij(o,e),o=e.pendingProps,j=c._init,c=j(c._payload),e.type=c,j=e.tag=Zk(c),o=Ci(c,o),j){case 0:e=cj(null,e,c,o,a);break e;case 1:e=hj(null,e,c,o,a);break e;case 11:e=Yi(null,e,c,o,a);break e;case 14:e=$i(null,e,c,Ci(c.type,o),a);break e}throw Error(p(306,c,""))}return e;case 0:return c=e.type,j=e.pendingProps,j=e.elementType===c?j:Ci(c,j),cj(o,e,c,j,a);case 1:return c=e.type,j=e.pendingProps,j=e.elementType===c?j:Ci(c,j),hj(o,e,c,j,a);case 3:e:{if(kj(e),o===null)throw Error(p(387));c=e.pendingProps,h=e.memoizedState,j=h.element,lh(o,e),qh(e,c,null,a);var et=e.memoizedState;if(c=et.element,h.isDehydrated)if(h={element:c,isDehydrated:!1,cache:et.cache,pendingSuspenseBoundaries:et.pendingSuspenseBoundaries,transitions:et.transitions},e.updateQueue.baseState=h,e.memoizedState=h,e.flags&256){j=Ji(Error(p(423)),e),e=lj(o,e,c,a,j);break e}else if(c!==j){j=Ji(Error(p(424)),e),e=lj(o,e,c,a,j);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,a=Vg(e,null,c,a),e.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ig(),c===j){e=Zi(o,e,a);break e}Xi(o,e,c,a)}e=e.child}return e;case 5:return Ah(e),o===null&&Eg(e),c=e.type,j=e.pendingProps,h=o!==null?o.memoizedProps:null,et=j.children,Ef(c,j)?et=null:h!==null&&Ef(c,h)&&(e.flags|=32),gj(o,e),Xi(o,e,et,a),e.child;case 6:return o===null&&Eg(e),null;case 13:return oj(o,e,a);case 4:return yh(e,e.stateNode.containerInfo),c=e.pendingProps,o===null?e.child=Ug(e,null,c,a):Xi(o,e,c,a),e.child;case 11:return c=e.type,j=e.pendingProps,j=e.elementType===c?j:Ci(c,j),Yi(o,e,c,j,a);case 7:return Xi(o,e,e.pendingProps,a),e.child;case 8:return Xi(o,e,e.pendingProps.children,a),e.child;case 12:return Xi(o,e,e.pendingProps.children,a),e.child;case 10:e:{if(c=e.type._context,j=e.pendingProps,h=e.memoizedProps,et=j.value,G(Wg,c._currentValue),c._currentValue=et,h!==null)if(He(h.value,et)){if(h.children===j.children&&!Wf.current){e=Zi(o,e,a);break e}}else for(h=e.child,h!==null&&(h.return=e);h!==null;){var ot=h.dependencies;if(ot!==null){et=h.child;for(var st=ot.firstContext;st!==null;){if(st.context===c){if(h.tag===1){st=mh(-1,a&-a),st.tag=2;var lt=h.updateQueue;if(lt!==null){lt=lt.shared;var nt=lt.pending;nt===null?st.next=st:(st.next=nt.next,nt.next=st),lt.pending=st}}h.lanes|=a,st=h.alternate,st!==null&&(st.lanes|=a),bh(h.return,a,e),ot.lanes|=a;break}st=st.next}}else if(h.tag===10)et=h.type===e.type?null:h.child;else if(h.tag===18){if(et=h.return,et===null)throw Error(p(341));et.lanes|=a,ot=et.alternate,ot!==null&&(ot.lanes|=a),bh(et,a,e),et=h.sibling}else et=h.child;if(et!==null)et.return=h;else for(et=h;et!==null;){if(et===e){et=null;break}if(h=et.sibling,h!==null){h.return=et.return,et=h;break}et=et.return}h=et}Xi(o,e,j.children,a),e=e.child}return e;case 9:return j=e.type,c=e.pendingProps.children,ch(e,a),j=eh(j),c=c(j),e.flags|=1,Xi(o,e,c,a),e.child;case 14:return c=e.type,j=Ci(c,e.pendingProps),j=Ci(c.type,j),$i(o,e,c,j,a);case 15:return bj(o,e,e.type,e.pendingProps,a);case 17:return c=e.type,j=e.pendingProps,j=e.elementType===c?j:Ci(c,j),ij(o,e),e.tag=1,Zf(c)?(o=!0,cg(e)):o=!1,ch(e,a),Gi(e,c,j),Ii(e,c,j,a),jj(null,e,c,!0,o,a);case 19:return xj(o,e,a);case 22:return dj(o,e,a)}throw Error(p(156,e.tag))};function Fk(o,e){return ac(o,e)}function $k(o,e,a,c){this.tag=o,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(o,e,a,c){return new $k(o,e,a,c)}function aj(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Zk(o){if(typeof o=="function")return aj(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Da)return 11;if(o===Ga)return 14}return 2}function Pg(o,e){var a=o.alternate;return a===null?(a=Bg(o.tag,e,o.key,o.mode),a.elementType=o.elementType,a.type=o.type,a.stateNode=o.stateNode,a.alternate=o,o.alternate=a):(a.pendingProps=e,a.type=o.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=o.flags&14680064,a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},a.sibling=o.sibling,a.index=o.index,a.ref=o.ref,a}function Rg(o,e,a,c,j,h){var et=2;if(c=o,typeof o=="function")aj(o)&&(et=1);else if(typeof o=="string")et=5;else e:switch(o){case ya:return Tg(a.children,j,h,e);case za:et=8,j|=8;break;case Aa:return o=Bg(12,a,e,j|2),o.elementType=Aa,o.lanes=h,o;case Ea:return o=Bg(13,a,e,j),o.elementType=Ea,o.lanes=h,o;case Fa:return o=Bg(19,a,e,j),o.elementType=Fa,o.lanes=h,o;case Ia:return pj(a,j,h,e);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ba:et=10;break e;case Ca:et=9;break e;case Da:et=11;break e;case Ga:et=14;break e;case Ha:et=16,c=null;break e}throw Error(p(130,o==null?o:typeof o,""))}return e=Bg(et,a,e,j),e.elementType=o,e.type=c,e.lanes=h,e}function Tg(o,e,a,c){return o=Bg(7,o,c,e),o.lanes=a,o}function pj(o,e,a,c){return o=Bg(22,o,c,e),o.elementType=Ia,o.lanes=a,o.stateNode={isHidden:!1},o}function Qg(o,e,a){return o=Bg(6,o,null,e),o.lanes=a,o}function Sg(o,e,a){return e=Bg(4,o.children!==null?o.children:[],o.key,e),e.lanes=a,e.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},e}function al(o,e,a,c,j){this.tag=e,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=c,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function bl(o,e,a,c,j,h,et,ot,st){return o=new al(o,e,a,ot,st),e===1?(e=1,h===!0&&(e|=8)):e=0,h=Bg(3,null,null,e),o.current=h,h.stateNode=o,h.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(h),o}function cl(o,e,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:c==null?null:""+c,children:o,containerInfo:e,implementation:a}}function dl(o){if(!o)return Vf;o=o._reactInternals;e:{if(Vb(o)!==o||o.tag!==1)throw Error(p(170));var e=o;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(o.tag===1){var a=o.type;if(Zf(a))return bg(o,a,e)}return e}function el(o,e,a,c,j,h,et,ot,st){return o=bl(a,c,!0,o,j,h,et,ot,st),o.context=dl(null),a=o.current,c=R$1(),j=yi(a),h=mh(c,j),h.callback=e??null,nh(a,h,j),o.current.lanes=j,Ac(o,j,c),Dk(o,c),o}function fl(o,e,a,c){var j=e.current,h=R$1(),et=yi(j);return a=dl(a),e.context===null?e.context=a:e.pendingContext=a,e=mh(h,et),e.payload={element:o},c=c===void 0?null:c,c!==null&&(e.callback=c),o=nh(j,e,et),o!==null&&(gi(o,j,et,h),oh(o,j,et)),et}function gl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function hl(o,e){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var a=o.retryLane;o.retryLane=a!==0&&a<e?a:e}}function il(o,e){hl(o,e),(o=o.alternate)&&hl(o,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(o){console.error(o)};function ll(o){this._internalRoot=o}ml.prototype.render=ll.prototype.render=function(o){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(o,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var e=o.containerInfo;Rk(function(){fl(null,o,null,null)}),e[uf]=null}};function ml(o){this._internalRoot=o}ml.prototype.unstable_scheduleHydration=function(o){if(o){var e=Hc();o={blockedOn:null,target:o,priority:e};for(var a=0;a<Qc.length&&e!==0&&e<Qc[a].priority;a++);Qc.splice(a,0,o),a===0&&Vc(o)}};function nl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function ol(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(o,e,a,c,j){if(j){if(typeof c=="function"){var h=c;c=function(){var lt=gl(et);h.call(lt)}}var et=el(e,c,o,0,null,!1,!1,"",pl);return o._reactRootContainer=et,o[uf]=et.current,sf(o.nodeType===8?o.parentNode:o),Rk(),et}for(;j=o.lastChild;)o.removeChild(j);if(typeof c=="function"){var ot=c;c=function(){var lt=gl(st);ot.call(lt)}}var st=bl(o,0,!1,null,null,!1,!1,"",pl);return o._reactRootContainer=st,o[uf]=st.current,sf(o.nodeType===8?o.parentNode:o),Rk(function(){fl(e,st,a,c)}),st}function rl(o,e,a,c,j){var h=a._reactRootContainer;if(h){var et=h;if(typeof j=="function"){var ot=j;j=function(){var st=gl(et);ot.call(st)}}fl(e,et,o,j)}else et=ql(a,e,o,j,c);return gl(et)}Ec=function(o){switch(o.tag){case 3:var e=o.stateNode;if(e.current.memoizedState.isDehydrated){var a=tc(e.pendingLanes);a!==0&&(Cc(e,a|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var c=ih(o,1);if(c!==null){var j=R$1();gi(c,o,1,j)}}),il(o,1)}};Fc=function(o){if(o.tag===13){var e=ih(o,134217728);if(e!==null){var a=R$1();gi(e,o,134217728,a)}il(o,134217728)}};Gc=function(o){if(o.tag===13){var e=yi(o),a=ih(o,e);if(a!==null){var c=R$1();gi(a,o,e,c)}il(o,e)}};Hc=function(){return C};Ic=function(o,e){var a=C;try{return C=o,e()}finally{C=a}};yb=function(o,e,a){switch(e){case"input":if(bb(o,a),e=a.name,a.type==="radio"&&e!=null){for(a=o;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<a.length;e++){var c=a[e];if(c!==o&&c.form===o.form){var j=Db(c);if(!j)throw Error(p(90));Wa(c),bb(c,j)}}}break;case"textarea":ib(o,a);break;case"select":e=a.value,e!=null&&fb(o,!!a.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb(o),o===null?null:o.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(o,e){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(o,e,null,a)};reactDom_production_min.createRoot=function(o,e){if(!nl(o))throw Error(p(299));var a=!1,c="",j=kl;return e!=null&&(e.unstable_strictMode===!0&&(a=!0),e.identifierPrefix!==void 0&&(c=e.identifierPrefix),e.onRecoverableError!==void 0&&(j=e.onRecoverableError)),e=bl(o,1,!1,null,null,a,!1,c,j),o[uf]=e.current,sf(o.nodeType===8?o.parentNode:o),new ll(e)};reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var e=o._reactInternals;if(e===void 0)throw typeof o.render=="function"?Error(p(188)):(o=Object.keys(o).join(","),Error(p(268,o)));return o=Zb(e),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o){return Rk(o)};reactDom_production_min.hydrate=function(o,e,a){if(!ol(e))throw Error(p(200));return rl(null,o,e,!0,a)};reactDom_production_min.hydrateRoot=function(o,e,a){if(!nl(o))throw Error(p(405));var c=a!=null&&a.hydratedSources||null,j=!1,h="",et=kl;if(a!=null&&(a.unstable_strictMode===!0&&(j=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onRecoverableError!==void 0&&(et=a.onRecoverableError)),e=el(e,null,o,1,a??null,j,!1,h,et),o[uf]=e.current,sf(o),c)for(o=0;o<c.length;o++)a=c[o],j=a._getVersion,j=j(a._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[a,j]:e.mutableSourceEagerHydrationData.push(a,j);return new ml(e)};reactDom_production_min.render=function(o,e,a){if(!ol(e))throw Error(p(200));return rl(null,o,e,!1,a)};reactDom_production_min.unmountComponentAtNode=function(o){if(!ol(o))throw Error(p(40));return o._reactRootContainer?(Rk(function(){rl(null,null,o,!1,function(){o._reactRootContainer=null,o[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,e,a,c){if(!ol(a))throw Error(p(200));if(o==null||o._reactInternals===void 0)throw Error(p(38));return rl(o,e,a,!1,c)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(o){console.error(o)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs$1(reactDomExports);var m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/*! @azure/msal-common v14.16.0 2024-11-05 */const Constants$1={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},HttpStatus={CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},OIDC_DEFAULT_SCOPES=[Constants$1.OPENID_SCOPE,Constants$1.PROFILE_SCOPE,Constants$1.OFFLINE_ACCESS_SCOPE],OIDC_SCOPES=[...OIDC_DEFAULT_SCOPES,Constants$1.EMAIL_SCOPE],HeaderNames={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},PersistentCacheKeys={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},AADAuthorityConstants={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},ClaimsRequestKeys={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},PromptValue={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},CodeChallengeMethodValues={PLAIN:"plain",S256:"S256"},ServerResponseType={QUERY:"query",FRAGMENT:"fragment"},ResponseMode={...ServerResponseType},GrantType={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},CacheAccountType={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},Separators={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},CredentialType={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},APP_METADATA="appmetadata",CLIENT_INFO="client_info",THE_FAMILY_ID="1",AUTHORITY_METADATA_CONSTANTS={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},AuthorityMetadataSource={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},SERVER_TELEM_CONSTANTS={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},AuthenticationScheme={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},ThrottlingConstants={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Errors={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},PasswordGrantConstants={username:"username",password:"password"},ResponseCodes={httpSuccess:200,httpBadRequest:400},RegionDiscoverySources={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},RegionDiscoveryOutcomes={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},CacheOutcome={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},JsonWebTokenTypes={Pop:"pop"},DEFAULT_TOKEN_RENEWAL_OFFSET_SEC=300;/*! @azure/msal-common v14.16.0 2024-11-05 */const unexpectedError="unexpected_error",postRequestFailed$1="post_request_failed";/*! @azure/msal-common v14.16.0 2024-11-05 */const AuthErrorMessages={[unexpectedError]:"Unexpected error in authentication.",[postRequestFailed$1]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class AuthError extends Error{constructor(e,a,c){const j=a?`${e}: ${a}`:e;super(j),Object.setPrototypeOf(this,AuthError.prototype),this.errorCode=e||Constants$1.EMPTY_STRING,this.errorMessage=a||Constants$1.EMPTY_STRING,this.subError=c||Constants$1.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function createAuthError(o,e){return new AuthError(o,e?`${AuthErrorMessages[o]} ${e}`:AuthErrorMessages[o])}/*! @azure/msal-common v14.16.0 2024-11-05 */const clientInfoDecodingError="client_info_decoding_error",clientInfoEmptyError="client_info_empty_error",tokenParsingError="token_parsing_error",nullOrEmptyToken="null_or_empty_token",endpointResolutionError="endpoints_resolution_error",networkError="network_error",openIdConfigError="openid_config_error",hashNotDeserialized="hash_not_deserialized",invalidState="invalid_state",stateMismatch="state_mismatch",stateNotFound="state_not_found",nonceMismatch="nonce_mismatch",authTimeNotFound="auth_time_not_found",maxAgeTranspired="max_age_transpired",multipleMatchingTokens="multiple_matching_tokens",multipleMatchingAccounts="multiple_matching_accounts",multipleMatchingAppMetadata="multiple_matching_appMetadata",requestCannotBeMade="request_cannot_be_made",cannotRemoveEmptyScope="cannot_remove_empty_scope",cannotAppendScopeSet="cannot_append_scopeset",emptyInputScopeSet="empty_input_scopeset",deviceCodePollingCancelled="device_code_polling_cancelled",deviceCodeExpired="device_code_expired",deviceCodeUnknownError="device_code_unknown_error",noAccountInSilentRequest="no_account_in_silent_request",invalidCacheRecord="invalid_cache_record",invalidCacheEnvironment="invalid_cache_environment",noAccountFound="no_account_found",noCryptoObject="no_crypto_object",unexpectedCredentialType="unexpected_credential_type",invalidAssertion="invalid_assertion",invalidClientCredential="invalid_client_credential",tokenRefreshRequired="token_refresh_required",userTimeoutReached="user_timeout_reached",tokenClaimsCnfRequiredForSignedJwt="token_claims_cnf_required_for_signedjwt",authorizationCodeMissingFromServerResponse="authorization_code_missing_from_server_response",bindingKeyNotRemoved="binding_key_not_removed",endSessionEndpointNotSupported="end_session_endpoint_not_supported",keyIdMissing="key_id_missing",noNetworkConnectivity$1="no_network_connectivity",userCanceled="user_canceled",missingTenantIdError="missing_tenant_id_error",methodNotImplemented="method_not_implemented",nestedAppAuthBridgeDisabled="nested_app_auth_bridge_disabled";/*! @azure/msal-common v14.16.0 2024-11-05 */const ClientAuthErrorMessages={[clientInfoDecodingError]:"The client info could not be parsed/decoded correctly",[clientInfoEmptyError]:"The client info was empty",[tokenParsingError]:"Token cannot be parsed",[nullOrEmptyToken]:"The token is null or empty",[endpointResolutionError]:"Endpoints cannot be resolved",[networkError]:"Network request failed",[openIdConfigError]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[hashNotDeserialized]:"The hash parameters could not be deserialized",[invalidState]:"State was not the expected format",[stateMismatch]:"State mismatch error",[stateNotFound]:"State not found",[nonceMismatch]:"Nonce mismatch error",[authTimeNotFound]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[maxAgeTranspired]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[multipleMatchingTokens]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[multipleMatchingAccounts]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[multipleMatchingAppMetadata]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[requestCannotBeMade]:"Token request cannot be made without authorization code or refresh token.",[cannotRemoveEmptyScope]:"Cannot remove null or empty scope from ScopeSet",[cannotAppendScopeSet]:"Cannot append ScopeSet",[emptyInputScopeSet]:"Empty input ScopeSet cannot be processed",[deviceCodePollingCancelled]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[deviceCodeExpired]:"Device code is expired.",[deviceCodeUnknownError]:"Device code stopped polling for unknown reasons.",[noAccountInSilentRequest]:"Please pass an account object, silent flow is not supported without account information",[invalidCacheRecord]:"Cache record object was null or undefined.",[invalidCacheEnvironment]:"Invalid environment when attempting to create cache entry",[noAccountFound]:"No account found in cache for given key.",[noCryptoObject]:"No crypto object detected.",[unexpectedCredentialType]:"Unexpected credential type.",[invalidAssertion]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[invalidClientCredential]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[tokenRefreshRequired]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[userTimeoutReached]:"User defined timeout for device code polling reached",[tokenClaimsCnfRequiredForSignedJwt]:"Cannot generate a POP jwt if the token_claims are not populated",[authorizationCodeMissingFromServerResponse]:"Server response does not contain an authorization code to proceed",[bindingKeyNotRemoved]:"Could not remove the credential's binding key from storage.",[endSessionEndpointNotSupported]:"The provided authority does not support logout",[keyIdMissing]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[noNetworkConnectivity$1]:"No network connectivity. Check your internet connection.",[userCanceled]:"User cancelled the flow.",[missingTenantIdError]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[methodNotImplemented]:"This method has not been implemented",[nestedAppAuthBridgeDisabled]:"The nested app auth bridge is disabled"};class ClientAuthError extends AuthError{constructor(e,a){super(e,a?`${ClientAuthErrorMessages[e]}: ${a}`:ClientAuthErrorMessages[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ClientAuthError.prototype)}}function createClientAuthError(o,e){return new ClientAuthError(o,e)}/*! @azure/msal-common v14.16.0 2024-11-05 */const DEFAULT_CRYPTO_IMPLEMENTATION={createNewGuid:()=>{throw createClientAuthError(methodNotImplemented)},base64Decode:()=>{throw createClientAuthError(methodNotImplemented)},base64Encode:()=>{throw createClientAuthError(methodNotImplemented)},base64UrlEncode:()=>{throw createClientAuthError(methodNotImplemented)},encodeKid:()=>{throw createClientAuthError(methodNotImplemented)},async getPublicKeyThumbprint(){throw createClientAuthError(methodNotImplemented)},async removeTokenBindingKey(){throw createClientAuthError(methodNotImplemented)},async clearKeystore(){throw createClientAuthError(methodNotImplemented)},async signJwt(){throw createClientAuthError(methodNotImplemented)},async hashString(){throw createClientAuthError(methodNotImplemented)}};/*! @azure/msal-common v14.16.0 2024-11-05 */var LogLevel;(function(o){o[o.Error=0]="Error",o[o.Warning=1]="Warning",o[o.Info=2]="Info",o[o.Verbose=3]="Verbose",o[o.Trace=4]="Trace"})(LogLevel||(LogLevel={}));class Logger{constructor(e,a,c){this.level=LogLevel.Info;const j=()=>{},h=e||Logger.createDefaultLoggerOptions();this.localCallback=h.loggerCallback||j,this.piiLoggingEnabled=h.piiLoggingEnabled||!1,this.level=typeof h.logLevel=="number"?h.logLevel:LogLevel.Info,this.correlationId=h.correlationId||Constants$1.EMPTY_STRING,this.packageName=a||Constants$1.EMPTY_STRING,this.packageVersion=c||Constants$1.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:LogLevel.Info}}clone(e,a,c){return new Logger({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:c||this.correlationId},e,a)}logMessage(e,a){if(a.logLevel>this.level||!this.piiLoggingEnabled&&a.containsPii)return;const h=`${`[${new Date().toUTCString()}] : [${a.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${LogLevel[a.logLevel]} - ${e}`;this.executeCallback(a.logLevel,h,a.containsPii||!1)}executeCallback(e,a,c){this.localCallback&&this.localCallback(e,a,c)}error(e,a){this.logMessage(e,{logLevel:LogLevel.Error,containsPii:!1,correlationId:a||Constants$1.EMPTY_STRING})}errorPii(e,a){this.logMessage(e,{logLevel:LogLevel.Error,containsPii:!0,correlationId:a||Constants$1.EMPTY_STRING})}warning(e,a){this.logMessage(e,{logLevel:LogLevel.Warning,containsPii:!1,correlationId:a||Constants$1.EMPTY_STRING})}warningPii(e,a){this.logMessage(e,{logLevel:LogLevel.Warning,containsPii:!0,correlationId:a||Constants$1.EMPTY_STRING})}info(e,a){this.logMessage(e,{logLevel:LogLevel.Info,containsPii:!1,correlationId:a||Constants$1.EMPTY_STRING})}infoPii(e,a){this.logMessage(e,{logLevel:LogLevel.Info,containsPii:!0,correlationId:a||Constants$1.EMPTY_STRING})}verbose(e,a){this.logMessage(e,{logLevel:LogLevel.Verbose,containsPii:!1,correlationId:a||Constants$1.EMPTY_STRING})}verbosePii(e,a){this.logMessage(e,{logLevel:LogLevel.Verbose,containsPii:!0,correlationId:a||Constants$1.EMPTY_STRING})}trace(e,a){this.logMessage(e,{logLevel:LogLevel.Trace,containsPii:!1,correlationId:a||Constants$1.EMPTY_STRING})}tracePii(e,a){this.logMessage(e,{logLevel:LogLevel.Trace,containsPii:!0,correlationId:a||Constants$1.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.16.0 2024-11-05 */const name$2="@azure/msal-common",version$3="14.16.0";/*! @azure/msal-common v14.16.0 2024-11-05 */const AzureCloudInstance={None:"none"};/*! @azure/msal-common v14.16.0 2024-11-05 */function extractTokenClaims(o,e){const a=getJWSPayload(o);try{const c=e(a);return JSON.parse(c)}catch{throw createClientAuthError(tokenParsingError)}}function getJWSPayload(o){if(!o)throw createClientAuthError(nullOrEmptyToken);const a=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(o);if(!a||a.length<4)throw createClientAuthError(tokenParsingError);return a[2]}function checkMaxAge(o,e){if(e===0||Date.now()-3e5>o+e)throw createClientAuthError(maxAgeTranspired)}/*! @azure/msal-common v14.16.0 2024-11-05 */function nowSeconds(){return Math.round(new Date().getTime()/1e3)}function isTokenExpired(o,e){const a=Number(o)||0;return nowSeconds()+e>a}function wasClockTurnedBack(o){return Number(o)>nowSeconds()}/*! @azure/msal-common v14.16.0 2024-11-05 */function generateCredentialKey(o){return[generateAccountId(o),generateCredentialId(o),generateTarget(o),generateClaimsHash(o),generateScheme(o)].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function createIdTokenEntity(o,e,a,c,j){return{credentialType:CredentialType.ID_TOKEN,homeAccountId:o,environment:e,clientId:c,secret:a,realm:j}}function createAccessTokenEntity(o,e,a,c,j,h,et,ot,st,lt,nt,gt,dt,mt,vt){var bt,ht;const tt={homeAccountId:o,credentialType:CredentialType.ACCESS_TOKEN,secret:a,cachedAt:nowSeconds().toString(),expiresOn:et.toString(),extendedExpiresOn:ot.toString(),environment:e,clientId:c,realm:j,target:h,tokenType:nt||AuthenticationScheme.BEARER};if(gt&&(tt.userAssertionHash=gt),lt&&(tt.refreshOn=lt.toString()),mt&&(tt.requestedClaims=mt,tt.requestedClaimsHash=vt),((bt=tt.tokenType)==null?void 0:bt.toLowerCase())!==AuthenticationScheme.BEARER.toLowerCase())switch(tt.credentialType=CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME,tt.tokenType){case AuthenticationScheme.POP:const St=extractTokenClaims(a,st);if(!((ht=St==null?void 0:St.cnf)!=null&&ht.kid))throw createClientAuthError(tokenClaimsCnfRequiredForSignedJwt);tt.keyId=St.cnf.kid;break;case AuthenticationScheme.SSH:tt.keyId=dt}return tt}function createRefreshTokenEntity(o,e,a,c,j,h,et){const ot={credentialType:CredentialType.REFRESH_TOKEN,homeAccountId:o,environment:e,clientId:c,secret:a};return h&&(ot.userAssertionHash=h),j&&(ot.familyId=j),et&&(ot.expiresOn=et.toString()),ot}function isCredentialEntity(o){return o.hasOwnProperty("homeAccountId")&&o.hasOwnProperty("environment")&&o.hasOwnProperty("credentialType")&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("secret")}function isAccessTokenEntity(o){return o?isCredentialEntity(o)&&o.hasOwnProperty("realm")&&o.hasOwnProperty("target")&&(o.credentialType===CredentialType.ACCESS_TOKEN||o.credentialType===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function isIdTokenEntity(o){return o?isCredentialEntity(o)&&o.hasOwnProperty("realm")&&o.credentialType===CredentialType.ID_TOKEN:!1}function isRefreshTokenEntity(o){return o?isCredentialEntity(o)&&o.credentialType===CredentialType.REFRESH_TOKEN:!1}function generateAccountId(o){return[o.homeAccountId,o.environment].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function generateCredentialId(o){const e=o.credentialType===CredentialType.REFRESH_TOKEN&&o.familyId||o.clientId;return[o.credentialType,e,o.realm||""].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function generateTarget(o){return(o.target||"").toLowerCase()}function generateClaimsHash(o){return(o.requestedClaimsHash||"").toLowerCase()}function generateScheme(o){return o.tokenType&&o.tokenType.toLowerCase()!==AuthenticationScheme.BEARER.toLowerCase()?o.tokenType.toLowerCase():""}function isServerTelemetryEntity(o,e){const a=o.indexOf(SERVER_TELEM_CONSTANTS.CACHE_KEY)===0;let c=!0;return e&&(c=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),a&&c}function isThrottlingEntity(o,e){let a=!1;o&&(a=o.indexOf(ThrottlingConstants.THROTTLING_PREFIX)===0);let c=!0;return e&&(c=e.hasOwnProperty("throttleTime")),a&&c}function generateAppMetadataKey({environment:o,clientId:e}){return[APP_METADATA,o,e].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function isAppMetadataEntity(o,e){return e?o.indexOf(APP_METADATA)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function isAuthorityMetadataEntity(o,e){return e?o.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function generateAuthorityMetadataExpiresAt(){return nowSeconds()+AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS}function updateAuthorityEndpointMetadata(o,e,a){o.authorization_endpoint=e.authorization_endpoint,o.token_endpoint=e.token_endpoint,o.end_session_endpoint=e.end_session_endpoint,o.issuer=e.issuer,o.endpointsFromNetwork=a,o.jwks_uri=e.jwks_uri}function updateCloudDiscoveryMetadata(o,e,a){o.aliases=e.aliases,o.preferred_cache=e.preferred_cache,o.preferred_network=e.preferred_network,o.aliasesFromNetwork=a}function isAuthorityMetadataExpired(o){return o.expiresAt<=nowSeconds()}/*! @azure/msal-common v14.16.0 2024-11-05 */const redirectUriEmpty="redirect_uri_empty",claimsRequestParsingError="claims_request_parsing_error",authorityUriInsecure="authority_uri_insecure",urlParseError="url_parse_error",urlEmptyError="empty_url_error",emptyInputScopesError="empty_input_scopes_error",invalidPromptValue="invalid_prompt_value",invalidClaims="invalid_claims",tokenRequestEmpty="token_request_empty",logoutRequestEmpty="logout_request_empty",invalidCodeChallengeMethod="invalid_code_challenge_method",pkceParamsMissing="pkce_params_missing",invalidCloudDiscoveryMetadata="invalid_cloud_discovery_metadata",invalidAuthorityMetadata="invalid_authority_metadata",untrustedAuthority="untrusted_authority",missingSshJwk="missing_ssh_jwk",missingSshKid="missing_ssh_kid",missingNonceAuthenticationHeader="missing_nonce_authentication_header",invalidAuthenticationHeader="invalid_authentication_header",cannotSetOIDCOptions="cannot_set_OIDCOptions",cannotAllowNativeBroker="cannot_allow_native_broker",authorityMismatch="authority_mismatch";/*! @azure/msal-common v14.16.0 2024-11-05 */const ClientConfigurationErrorMessages={[redirectUriEmpty]:"A redirect URI is required for all calls, and none has been set.",[claimsRequestParsingError]:"Could not parse the given claims request object.",[authorityUriInsecure]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[urlParseError]:"URL could not be parsed into appropriate segments.",[urlEmptyError]:"URL was empty or null.",[emptyInputScopesError]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[invalidPromptValue]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[invalidClaims]:"Given claims parameter must be a stringified JSON object.",[tokenRequestEmpty]:"Token request was empty and not found in cache.",[logoutRequestEmpty]:"The logout request was null or undefined.",[invalidCodeChallengeMethod]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[pkceParamsMissing]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[invalidCloudDiscoveryMetadata]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[invalidAuthorityMetadata]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[untrustedAuthority]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[missingSshJwk]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[missingSshKid]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[missingNonceAuthenticationHeader]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[invalidAuthenticationHeader]:"Invalid authentication header provided",[cannotSetOIDCOptions]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[cannotAllowNativeBroker]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[authorityMismatch]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class ClientConfigurationError extends AuthError{constructor(e){super(e,ClientConfigurationErrorMessages[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ClientConfigurationError.prototype)}}function createClientConfigurationError(o){return new ClientConfigurationError(o)}/*! @azure/msal-common v14.16.0 2024-11-05 */class StringUtils{static isEmptyObj(e){if(e)try{const a=JSON.parse(e);return Object.keys(a).length===0}catch{}return!0}static startsWith(e,a){return e.indexOf(a)===0}static endsWith(e,a){return e.length>=a.length&&e.lastIndexOf(a)===e.length-a.length}static queryStringToObject(e){const a={},c=e.split("&"),j=h=>decodeURIComponent(h.replace(/\+/g," "));return c.forEach(h=>{if(h.trim()){const[et,ot]=h.split(/=(.+)/g,2);et&&ot&&(a[j(et)]=j(ot))}}),a}static trimArrayEntries(e){return e.map(a=>a.trim())}static removeEmptyStringsFromArray(e){return e.filter(a=>!!a)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,a){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(a)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class ScopeSet{constructor(e){const a=e?StringUtils.trimArrayEntries([...e]):[],c=a?StringUtils.removeEmptyStringsFromArray(a):[];this.validateInputScopes(c),this.scopes=new Set,c.forEach(j=>this.scopes.add(j))}static fromString(e){const c=(e||Constants$1.EMPTY_STRING).split(" ");return new ScopeSet(c)}static createSearchScopes(e){const a=new ScopeSet(e);return a.containsOnlyOIDCScopes()?a.removeScope(Constants$1.OFFLINE_ACCESS_SCOPE):a.removeOIDCScopes(),a}validateInputScopes(e){if(!e||e.length<1)throw createClientConfigurationError(emptyInputScopesError)}containsScope(e){const a=this.printScopesLowerCase().split(" "),c=new ScopeSet(a);return e?c.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let e=0;return OIDC_SCOPES.forEach(a=>{this.containsScope(a)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(a=>this.appendScope(a))}catch{throw createClientAuthError(cannotAppendScopeSet)}}removeScope(e){if(!e)throw createClientAuthError(cannotRemoveEmptyScope);this.scopes.delete(e.trim())}removeOIDCScopes(){OIDC_SCOPES.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw createClientAuthError(emptyInputScopeSet);const a=new Set;return e.scopes.forEach(c=>a.add(c.toLowerCase())),this.scopes.forEach(c=>a.add(c.toLowerCase())),a}intersectingScopeSets(e){if(!e)throw createClientAuthError(emptyInputScopeSet);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const a=this.unionScopeSets(e),c=e.getScopeCount(),j=this.getScopeCount();return a.size<j+c}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(a=>e.push(a)),e}printScopes(){return this.scopes?this.asArray().join(" "):Constants$1.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.16.0 2024-11-05 */function buildClientInfo(o,e){if(!o)throw createClientAuthError(clientInfoEmptyError);try{const a=e(o);return JSON.parse(a)}catch{throw createClientAuthError(clientInfoDecodingError)}}function buildClientInfoFromHomeAccountId(o){if(!o)throw createClientAuthError(clientInfoDecodingError);const e=o.split(Separators.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Constants$1.EMPTY_STRING:e[1]}}/*! @azure/msal-common v14.16.0 2024-11-05 */function tenantIdMatchesHomeTenant(o,e){return!!o&&!!e&&o===e.split(".")[1]}function buildTenantProfile(o,e,a,c){if(c){const{oid:j,sub:h,tid:et,name:ot,tfp:st,acr:lt}=c,nt=et||st||lt||"";return{tenantId:nt,localAccountId:j||h||"",name:ot,isHomeTenant:tenantIdMatchesHomeTenant(nt,o)}}else return{tenantId:a,localAccountId:e,isHomeTenant:tenantIdMatchesHomeTenant(a,o)}}function updateAccountTenantProfileData(o,e,a,c){let j=o;if(e){const{isHomeTenant:h,...et}=e;j={...o,...et}}if(a){const{isHomeTenant:h,...et}=buildTenantProfile(o.homeAccountId,o.localAccountId,o.tenantId,a);return j={...j,...et,idTokenClaims:a,idToken:c},j}return j}/*! @azure/msal-common v14.16.0 2024-11-05 */const AuthorityType={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.16.0 2024-11-05 */function getTenantIdFromIdTokenClaims(o){return o&&(o.tid||o.tfp||o.acr)||null}/*! @azure/msal-common v14.16.0 2024-11-05 */const ProtocolMode={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.16.0 2024-11-05 */class AccountEntity{generateAccountId(){return[this.homeAccountId,this.environment].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return AccountEntity.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const a=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",a||e.tenantId||""].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,a,c){var lt,nt,gt,dt,mt,vt;const j=new AccountEntity;a.authorityType===AuthorityType.Adfs?j.authorityType=CacheAccountType.ADFS_ACCOUNT_TYPE:a.protocolMode===ProtocolMode.AAD?j.authorityType=CacheAccountType.MSSTS_ACCOUNT_TYPE:j.authorityType=CacheAccountType.GENERIC_ACCOUNT_TYPE;let h;e.clientInfo&&c&&(h=buildClientInfo(e.clientInfo,c)),j.clientInfo=e.clientInfo,j.homeAccountId=e.homeAccountId,j.nativeAccountId=e.nativeAccountId;const et=e.environment||a&&a.getPreferredCache();if(!et)throw createClientAuthError(invalidCacheEnvironment);j.environment=et,j.realm=(h==null?void 0:h.utid)||getTenantIdFromIdTokenClaims(e.idTokenClaims)||"",j.localAccountId=(h==null?void 0:h.uid)||((lt=e.idTokenClaims)==null?void 0:lt.oid)||((nt=e.idTokenClaims)==null?void 0:nt.sub)||"";const ot=((gt=e.idTokenClaims)==null?void 0:gt.preferred_username)||((dt=e.idTokenClaims)==null?void 0:dt.upn),st=(mt=e.idTokenClaims)!=null&&mt.emails?e.idTokenClaims.emails[0]:null;if(j.username=ot||st||"",j.name=((vt=e.idTokenClaims)==null?void 0:vt.name)||"",j.cloudGraphHostName=e.cloudGraphHostName,j.msGraphHost=e.msGraphHost,e.tenantProfiles)j.tenantProfiles=e.tenantProfiles;else{const tt=buildTenantProfile(e.homeAccountId,j.localAccountId,j.realm,e.idTokenClaims);j.tenantProfiles=[tt]}return j}static createFromAccountInfo(e,a,c){var h;const j=new AccountEntity;return j.authorityType=e.authorityType||CacheAccountType.GENERIC_ACCOUNT_TYPE,j.homeAccountId=e.homeAccountId,j.localAccountId=e.localAccountId,j.nativeAccountId=e.nativeAccountId,j.realm=e.tenantId,j.environment=e.environment,j.username=e.username,j.name=e.name,j.cloudGraphHostName=a,j.msGraphHost=c,j.tenantProfiles=Array.from(((h=e.tenantProfiles)==null?void 0:h.values())||[]),j}static generateHomeAccountId(e,a,c,j,h){if(!(a===AuthorityType.Adfs||a===AuthorityType.Dsts)){if(e)try{const et=buildClientInfo(e,j.base64Decode);if(et.uid&&et.utid)return`${et.uid}.${et.utid}`}catch{}c.warning("No client info in response")}return(h==null?void 0:h.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,a,c){if(!e||!a)return!1;let j=!0;if(c){const h=e.idTokenClaims||{},et=a.idTokenClaims||{};j=h.iat===et.iat&&h.nonce===et.nonce}return e.homeAccountId===a.homeAccountId&&e.localAccountId===a.localAccountId&&e.username===a.username&&e.tenantId===a.tenantId&&e.environment===a.environment&&e.nativeAccountId===a.nativeAccountId&&j}}/*! @azure/msal-common v14.16.0 2024-11-05 */function stripLeadingHashOrQuery(o){return o.startsWith("#/")?o.substring(2):o.startsWith("#")||o.startsWith("?")?o.substring(1):o}function getDeserializedResponse(o){if(!o||o.indexOf("=")<0)return null;try{const e=stripLeadingHashOrQuery(o),a=Object.fromEntries(new URLSearchParams(e));if(a.code||a.error||a.error_description||a.state)return a}catch{throw createClientAuthError(hashNotDeserialized)}return null}/*! @azure/msal-common v14.16.0 2024-11-05 */class UrlString{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw createClientConfigurationError(urlEmptyError);e.includes("#")||(this._urlString=UrlString.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let a=e.toLowerCase();return StringUtils.endsWith(a,"?")?a=a.slice(0,-1):StringUtils.endsWith(a,"?/")&&(a=a.slice(0,-2)),StringUtils.endsWith(a,"/")||(a+="/"),a}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw createClientConfigurationError(urlParseError)}if(!e.HostNameAndPort||!e.PathSegments)throw createClientConfigurationError(urlParseError);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw createClientConfigurationError(authorityUriInsecure)}static appendQueryString(e,a){return a?e.indexOf("?")<0?`${e}?${a}`:`${e}&${a}`:e}static removeHashFromUrl(e){return UrlString.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const a=this.getUrlComponents(),c=a.PathSegments;return e&&c.length!==0&&(c[0]===AADAuthorityConstants.COMMON||c[0]===AADAuthorityConstants.ORGANIZATIONS)&&(c[0]=e),UrlString.constructAuthorityUriFromObject(a)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=this.urlString.match(e);if(!a)throw createClientConfigurationError(urlParseError);const c={Protocol:a[1],HostNameAndPort:a[4],AbsolutePath:a[5],QueryString:a[7]};let j=c.AbsolutePath.split("/");return j=j.filter(h=>h&&h.length>0),c.PathSegments=j,c.QueryString&&c.QueryString.endsWith("/")&&(c.QueryString=c.QueryString.substring(0,c.QueryString.length-1)),c}static getDomainFromUrl(e){const a=RegExp("^([^:/?#]+://)?([^/?#]*)"),c=e.match(a);if(!c)throw createClientConfigurationError(urlParseError);return c[2]}static getAbsoluteUrl(e,a){if(e[0]===Constants$1.FORWARD_SLASH){const j=new UrlString(a).getUrlComponents();return j.Protocol+"//"+j.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new UrlString(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!getDeserializedResponse(e)}}/*! @azure/msal-common v14.16.0 2024-11-05 */const rawMetdataJSON={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},EndpointMetadata=rawMetdataJSON.endpointMetadata,InstanceDiscoveryMetadata=rawMetdataJSON.instanceDiscoveryMetadata,InstanceDiscoveryMetadataAliases=new Set;InstanceDiscoveryMetadata.metadata.forEach(o=>{o.aliases.forEach(e=>{InstanceDiscoveryMetadataAliases.add(e)})});function getAliasesFromStaticSources(o,e){var j;let a;const c=o.canonicalAuthority;if(c){const h=new UrlString(c).getUrlComponents().HostNameAndPort;a=getAliasesFromMetadata(h,(j=o.cloudDiscoveryMetadata)==null?void 0:j.metadata,AuthorityMetadataSource.CONFIG,e)||getAliasesFromMetadata(h,InstanceDiscoveryMetadata.metadata,AuthorityMetadataSource.HARDCODED_VALUES,e)||o.knownAuthorities}return a||[]}function getAliasesFromMetadata(o,e,a,c){if(c==null||c.trace(`getAliasesFromMetadata called with source: ${a}`),o&&e){const j=getCloudDiscoveryMetadataFromNetworkResponse(e,o);if(j)return c==null||c.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${a}, returning aliases`),j.aliases;c==null||c.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${a}`)}return null}function getCloudDiscoveryMetadataFromHardcodedValues(o){return getCloudDiscoveryMetadataFromNetworkResponse(InstanceDiscoveryMetadata.metadata,o)}function getCloudDiscoveryMetadataFromNetworkResponse(o,e){for(let a=0;a<o.length;a++){const c=o[a];if(c.aliases.includes(e))return c}return null}/*! @azure/msal-common v14.16.0 2024-11-05 */const cacheQuotaExceededErrorCode="cache_quota_exceeded",cacheUnknownErrorCode="cache_error_unknown";/*! @azure/msal-common v14.16.0 2024-11-05 */const CacheErrorMessages={[cacheQuotaExceededErrorCode]:"Exceeded cache storage capacity.",[cacheUnknownErrorCode]:"Unexpected error occurred when using cache storage."};class CacheError extends Error{constructor(e,a){const c=a||(CacheErrorMessages[e]?CacheErrorMessages[e]:CacheErrorMessages[cacheUnknownErrorCode]);super(`${e}: ${c}`),Object.setPrototypeOf(this,CacheError.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=c}}/*! @azure/msal-common v14.16.0 2024-11-05 */class CacheManager{constructor(e,a,c,j){this.clientId=e,this.cryptoImpl=a,this.commonLogger=c.clone(name$2,version$3),this.staticAuthorityOptions=j}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const a=this.getAllAccounts(e);return a.length>1?a.sort(j=>j.idTokenClaims?-1:1)[0]:a.length===1?a[0]:null}getBaseAccountInfo(e){const a=this.getAccountsFilteredBy(e);return a.length>0?a[0].getAccountInfo():null}buildTenantProfiles(e,a){return e.flatMap(c=>this.getTenantProfilesFromAccountEntity(c,a==null?void 0:a.tenantId,a))}getTenantedAccountInfoByFilter(e,a,c,j){let h=null,et;if(j&&!this.tenantProfileMatchesFilter(c,j))return null;const ot=this.getIdToken(e,a,c.tenantId);return ot&&(et=extractTokenClaims(ot.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(et,j))?null:(h=updateAccountTenantProfileData(e,c,et,ot==null?void 0:ot.secret),h)}getTenantProfilesFromAccountEntity(e,a,c){const j=e.getAccountInfo();let h=j.tenantProfiles||new Map;const et=this.getTokenKeys();if(a){const st=h.get(a);if(st)h=new Map([[a,st]]);else return[]}const ot=[];return h.forEach(st=>{const lt=this.getTenantedAccountInfoByFilter(j,et,st,c);lt&&ot.push(lt)}),ot}tenantProfileMatchesFilter(e,a){return!(a.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,a.localAccountId)||a.name&&e.name!==a.name||a.isHomeTenant!==void 0&&e.isHomeTenant!==a.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,a){return!(a&&(a.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,a.localAccountId)||a.loginHint&&!this.matchLoginHintFromTokenClaims(e,a.loginHint)||a.username&&!this.matchUsername(e.preferred_username,a.username)||a.name&&!this.matchName(e,a.name)||a.sid&&!this.matchSid(e,a.sid)))}async saveCacheRecord(e,a,c){var j,h,et,ot;if(!e)throw createClientAuthError(invalidCacheRecord);try{e.account&&this.setAccount(e.account),e.idToken&&(a==null?void 0:a.idToken)!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&(a==null?void 0:a.accessToken)!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&(a==null?void 0:a.refreshToken)!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(st){throw(j=this.commonLogger)==null||j.error("CacheManager.saveCacheRecord: failed"),st instanceof Error?((h=this.commonLogger)==null||h.errorPii(`CacheManager.saveCacheRecord: ${st.message}`,c),st.name==="QuotaExceededError"||st.name==="NS_ERROR_DOM_QUOTA_REACHED"||st.message.includes("exceeded the quota")?((et=this.commonLogger)==null||et.error("CacheManager.saveCacheRecord: exceeded storage quota",c),new CacheError(cacheQuotaExceededErrorCode)):new CacheError(st.name,st.message)):((ot=this.commonLogger)==null||ot.errorPii(`CacheManager.saveCacheRecord: ${st}`,c),new CacheError(cacheUnknownErrorCode))}}async saveAccessToken(e){const a={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},c=this.getTokenKeys(),j=ScopeSet.fromString(e.target),h=[];c.accessToken.forEach(et=>{if(!this.accessTokenKeyMatchesFilter(et,a,!1))return;const ot=this.getAccessTokenCredential(et);ot&&this.credentialMatchesFilter(ot,a)&&ScopeSet.fromString(ot.target).intersectingScopeSets(j)&&h.push(this.removeAccessToken(et))}),await Promise.all(h),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const a=this.getAccountKeys(),c=[];return a.forEach(j=>{var st;if(!this.isAccountKey(j,e.homeAccountId))return;const h=this.getAccount(j,this.commonLogger);if(!h||e.homeAccountId&&!this.matchHomeAccountId(h,e.homeAccountId)||e.username&&!this.matchUsername(h.username,e.username)||e.environment&&!this.matchEnvironment(h,e.environment)||e.realm&&!this.matchRealm(h,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(h,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(h,e.authorityType))return;const et={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},ot=(st=h.tenantProfiles)==null?void 0:st.filter(lt=>this.tenantProfileMatchesFilter(lt,et));ot&&ot.length===0||c.push(h)}),c}isAccountKey(e,a,c){return!(e.split(Separators.CACHE_KEY_SEPARATOR).length<3||a&&!e.toLowerCase().includes(a.toLowerCase())||c&&!e.toLowerCase().includes(c.toLowerCase()))}isCredentialKey(e){if(e.split(Separators.CACHE_KEY_SEPARATOR).length<6)return!1;const a=e.toLowerCase();if(a.indexOf(CredentialType.ID_TOKEN.toLowerCase())===-1&&a.indexOf(CredentialType.ACCESS_TOKEN.toLowerCase())===-1&&a.indexOf(CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&a.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(a.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase())>-1){const c=`${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${this.clientId}${Separators.CACHE_KEY_SEPARATOR}`,j=`${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${THE_FAMILY_ID}${Separators.CACHE_KEY_SEPARATOR}`;if(a.indexOf(c.toLowerCase())===-1&&a.indexOf(j.toLowerCase())===-1)return!1}else if(a.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,a){return!(a.clientId&&!this.matchClientId(e,a.clientId)||a.userAssertionHash&&!this.matchUserAssertionHash(e,a.userAssertionHash)||typeof a.homeAccountId=="string"&&!this.matchHomeAccountId(e,a.homeAccountId)||a.environment&&!this.matchEnvironment(e,a.environment)||a.realm&&!this.matchRealm(e,a.realm)||a.credentialType&&!this.matchCredentialType(e,a.credentialType)||a.familyId&&!this.matchFamilyId(e,a.familyId)||a.target&&!this.matchTarget(e,a.target)||(a.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==a.requestedClaimsHash||e.credentialType===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(a.tokenType&&!this.matchTokenType(e,a.tokenType)||a.tokenType===AuthenticationScheme.SSH&&a.keyId&&!this.matchKeyId(e,a.keyId)))}getAppMetadataFilteredBy(e){const a=this.getKeys(),c={};return a.forEach(j=>{if(!this.isAppMetadata(j))return;const h=this.getAppMetadata(j);h&&(e.environment&&!this.matchEnvironment(h,e.environment)||e.clientId&&!this.matchClientId(h,e.clientId)||(c[j]=h))}),c}getAuthorityMetadataByAlias(e){const a=this.getAuthorityMetadataKeys();let c=null;return a.forEach(j=>{if(!this.isAuthorityMetadata(j)||j.indexOf(this.clientId)===-1)return;const h=this.getAuthorityMetadata(j);h&&h.aliases.indexOf(e)!==-1&&(c=h)}),c}async removeAllAccounts(){const e=this.getAccountKeys(),a=[];e.forEach(c=>{a.push(this.removeAccount(c))}),await Promise.all(a)}async removeAccount(e){const a=this.getAccount(e,this.commonLogger);a&&(await this.removeAccountContext(a),this.removeItem(e))}async removeAccountContext(e){const a=this.getTokenKeys(),c=e.generateAccountId(),j=[];a.idToken.forEach(h=>{h.indexOf(c)===0&&this.removeIdToken(h)}),a.accessToken.forEach(h=>{h.indexOf(c)===0&&j.push(this.removeAccessToken(h))}),a.refreshToken.forEach(h=>{h.indexOf(c)===0&&this.removeRefreshToken(h)}),await Promise.all(j)}updateOutdatedCachedAccount(e,a,c){var j;if(a&&a.isSingleTenant()){(j=this.commonLogger)==null||j.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const h=this.getAccountKeys().filter(nt=>nt.startsWith(a.homeAccountId)),et=[];h.forEach(nt=>{const gt=this.getCachedAccountEntity(nt);gt&&et.push(gt)});const ot=et.find(nt=>tenantIdMatchesHomeTenant(nt.realm,nt.homeAccountId))||et[0];ot.tenantProfiles=et.map(nt=>({tenantId:nt.realm,localAccountId:nt.localAccountId,name:nt.name,isHomeTenant:tenantIdMatchesHomeTenant(nt.realm,nt.homeAccountId)}));const st=CacheManager.toObject(new AccountEntity,{...ot}),lt=st.generateAccountKey();return h.forEach(nt=>{nt!==lt&&this.removeOutdatedAccount(e)}),this.setAccount(st),c==null||c.verbose("Updated an outdated account entity in the cache"),st}return a}async removeAccessToken(e){const a=this.getAccessTokenCredential(e);if(a){if(a.credentialType.toLowerCase()===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&a.tokenType===AuthenticationScheme.POP){const j=a.keyId;if(j)try{await this.cryptoImpl.removeTokenBindingKey(j)}catch{throw createClientAuthError(bindingKeyNotRemoved)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(a=>{this.isAppMetadata(a)&&this.removeItem(a)}),!0}readAccountFromCache(e){const a=AccountEntity.generateAccountCacheKey(e);return this.getAccount(a,this.commonLogger)}getIdToken(e,a,c,j,h){this.commonLogger.trace("CacheManager - getIdToken called");const et={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:CredentialType.ID_TOKEN,clientId:this.clientId,realm:c},ot=this.getIdTokensByFilter(et,a),st=ot.size;if(st<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(st>1){let lt=ot;if(!c){const nt=new Map;ot.forEach((dt,mt)=>{dt.realm===e.tenantId&&nt.set(mt,dt)});const gt=nt.size;if(gt<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),ot.values().next().value;if(gt===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),nt.values().next().value;lt=nt}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),lt.forEach((nt,gt)=>{this.removeIdToken(gt)}),j&&h&&j.addFields({multiMatchedID:ot.size},h),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),ot.values().next().value}getIdTokensByFilter(e,a){const c=a&&a.idToken||this.getTokenKeys().idToken,j=new Map;return c.forEach(h=>{if(!this.idTokenKeyMatchesFilter(h,{clientId:this.clientId,...e}))return;const et=this.getIdTokenCredential(h);et&&this.credentialMatchesFilter(et,e)&&j.set(h,et)}),j}idTokenKeyMatchesFilter(e,a){const c=e.toLowerCase();return!(a.clientId&&c.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&c.indexOf(a.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,a,c,j,h,et){this.commonLogger.trace("CacheManager - getAccessToken called");const ot=ScopeSet.createSearchScopes(a.scopes),st=a.authenticationScheme||AuthenticationScheme.BEARER,lt=st.toLowerCase()!==AuthenticationScheme.BEARER.toLowerCase()?CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:CredentialType.ACCESS_TOKEN,nt={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:lt,clientId:this.clientId,realm:j||e.tenantId,target:ot,tokenType:st,keyId:a.sshKid,requestedClaimsHash:a.requestedClaimsHash},gt=c&&c.accessToken||this.getTokenKeys().accessToken,dt=[];gt.forEach(vt=>{if(this.accessTokenKeyMatchesFilter(vt,nt,!0)){const tt=this.getAccessTokenCredential(vt);tt&&this.credentialMatchesFilter(tt,nt)&&dt.push(tt)}});const mt=dt.length;return mt<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):mt>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),dt.forEach(vt=>{this.removeAccessToken(generateCredentialKey(vt))}),h&&et&&h.addFields({multiMatchedAT:dt.length},et),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),dt[0])}accessTokenKeyMatchesFilter(e,a,c){const j=e.toLowerCase();if(a.clientId&&j.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&j.indexOf(a.homeAccountId.toLowerCase())===-1||a.realm&&j.indexOf(a.realm.toLowerCase())===-1||a.requestedClaimsHash&&j.indexOf(a.requestedClaimsHash.toLowerCase())===-1)return!1;if(a.target){const h=a.target.asArray();for(let et=0;et<h.length;et++){if(c&&!j.includes(h[et].toLowerCase()))return!1;if(!c&&j.includes(h[et].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const a=this.getTokenKeys(),c=[];return a.accessToken.forEach(j=>{if(!this.accessTokenKeyMatchesFilter(j,e,!0))return;const h=this.getAccessTokenCredential(j);h&&this.credentialMatchesFilter(h,e)&&c.push(h)}),c}getRefreshToken(e,a,c,j,h){this.commonLogger.trace("CacheManager - getRefreshToken called");const et=a?THE_FAMILY_ID:void 0,ot={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:CredentialType.REFRESH_TOKEN,clientId:this.clientId,familyId:et},st=c&&c.refreshToken||this.getTokenKeys().refreshToken,lt=[];st.forEach(gt=>{if(this.refreshTokenKeyMatchesFilter(gt,ot)){const dt=this.getRefreshTokenCredential(gt);dt&&this.credentialMatchesFilter(dt,ot)&&lt.push(dt)}});const nt=lt.length;return nt<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(nt>1&&j&&h&&j.addFields({multiMatchedRT:nt},h),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),lt[0])}refreshTokenKeyMatchesFilter(e,a){const c=e.toLowerCase();return!(a.familyId&&c.indexOf(a.familyId.toLowerCase())===-1||!a.familyId&&a.clientId&&c.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&c.indexOf(a.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const a={environment:e,clientId:this.clientId},c=this.getAppMetadataFilteredBy(a),j=Object.keys(c).map(et=>c[et]),h=j.length;if(h<1)return null;if(h>1)throw createClientAuthError(multipleMatchingAppMetadata);return j[0]}isAppMetadataFOCI(e){const a=this.readAppMetadataFromCache(e);return!!(a&&a.familyId===THE_FAMILY_ID)}matchHomeAccountId(e,a){return typeof e.homeAccountId=="string"&&a===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,a){const c=e.oid||e.sub;return a===c}matchLocalAccountIdFromTenantProfile(e,a){return e.localAccountId===a}matchName(e,a){var c;return a.toLowerCase()===((c=e.name)==null?void 0:c.toLowerCase())}matchUsername(e,a){return!!(e&&typeof e=="string"&&(a==null?void 0:a.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,a){return!!(e.userAssertionHash&&a===e.userAssertionHash)}matchEnvironment(e,a){if(this.staticAuthorityOptions){const j=getAliasesFromStaticSources(this.staticAuthorityOptions,this.commonLogger);if(j.includes(a)&&j.includes(e.environment))return!0}const c=this.getAuthorityMetadataByAlias(a);return!!(c&&c.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,a){return e.credentialType&&a.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,a){return!!(e.clientId&&a===e.clientId)}matchFamilyId(e,a){return!!(e.familyId&&a===e.familyId)}matchRealm(e,a){var c;return((c=e.realm)==null?void 0:c.toLowerCase())===a.toLowerCase()}matchNativeAccountId(e,a){return!!(e.nativeAccountId&&a===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,a){return e.login_hint===a||e.preferred_username===a||e.upn===a}matchSid(e,a){return e.sid===a}matchAuthorityType(e,a){return!!(e.authorityType&&a.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,a){return e.credentialType!==CredentialType.ACCESS_TOKEN&&e.credentialType!==CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:ScopeSet.fromString(e.target).containsScopeSet(a)}matchTokenType(e,a){return!!(e.tokenType&&e.tokenType===a)}matchKeyId(e,a){return!!(e.keyId&&e.keyId===a)}isAppMetadata(e){return e.indexOf(APP_METADATA)!==-1}isAuthorityMetadata(e){return e.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${AUTHORITY_METADATA_CONSTANTS.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,a){for(const c in a)e[c]=a[c];return e}}class DefaultStorageClass extends CacheManager{setAccount(){throw createClientAuthError(methodNotImplemented)}getAccount(){throw createClientAuthError(methodNotImplemented)}getCachedAccountEntity(){throw createClientAuthError(methodNotImplemented)}setIdTokenCredential(){throw createClientAuthError(methodNotImplemented)}getIdTokenCredential(){throw createClientAuthError(methodNotImplemented)}setAccessTokenCredential(){throw createClientAuthError(methodNotImplemented)}getAccessTokenCredential(){throw createClientAuthError(methodNotImplemented)}setRefreshTokenCredential(){throw createClientAuthError(methodNotImplemented)}getRefreshTokenCredential(){throw createClientAuthError(methodNotImplemented)}setAppMetadata(){throw createClientAuthError(methodNotImplemented)}getAppMetadata(){throw createClientAuthError(methodNotImplemented)}setServerTelemetry(){throw createClientAuthError(methodNotImplemented)}getServerTelemetry(){throw createClientAuthError(methodNotImplemented)}setAuthorityMetadata(){throw createClientAuthError(methodNotImplemented)}getAuthorityMetadata(){throw createClientAuthError(methodNotImplemented)}getAuthorityMetadataKeys(){throw createClientAuthError(methodNotImplemented)}setThrottlingCache(){throw createClientAuthError(methodNotImplemented)}getThrottlingCache(){throw createClientAuthError(methodNotImplemented)}removeItem(){throw createClientAuthError(methodNotImplemented)}getKeys(){throw createClientAuthError(methodNotImplemented)}getAccountKeys(){throw createClientAuthError(methodNotImplemented)}getTokenKeys(){throw createClientAuthError(methodNotImplemented)}updateCredentialCacheKey(){throw createClientAuthError(methodNotImplemented)}removeOutdatedAccount(){throw createClientAuthError(methodNotImplemented)}}/*! @azure/msal-common v14.16.0 2024-11-05 */const DEFAULT_SYSTEM_OPTIONS={tokenRenewalOffsetSeconds:DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,preventCorsPreflight:!1},DEFAULT_LOGGER_IMPLEMENTATION={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:LogLevel.Info,correlationId:Constants$1.EMPTY_STRING},DEFAULT_CACHE_OPTIONS={claimsBasedCachingEnabled:!1},DEFAULT_NETWORK_IMPLEMENTATION={async sendGetRequestAsync(){throw createClientAuthError(methodNotImplemented)},async sendPostRequestAsync(){throw createClientAuthError(methodNotImplemented)}},DEFAULT_LIBRARY_INFO={sku:Constants$1.SKU,version:version$3,cpu:Constants$1.EMPTY_STRING,os:Constants$1.EMPTY_STRING},DEFAULT_CLIENT_CREDENTIALS={clientSecret:Constants$1.EMPTY_STRING,clientAssertion:void 0},DEFAULT_AZURE_CLOUD_OPTIONS={azureCloudInstance:AzureCloudInstance.None,tenant:`${Constants$1.DEFAULT_COMMON_TENANT}`},DEFAULT_TELEMETRY_OPTIONS={application:{appName:"",appVersion:""}};function buildClientConfiguration({authOptions:o,systemOptions:e,loggerOptions:a,cacheOptions:c,storageInterface:j,networkInterface:h,cryptoInterface:et,clientCredentials:ot,libraryInfo:st,telemetry:lt,serverTelemetryManager:nt,persistencePlugin:gt,serializableCache:dt}){const mt={...DEFAULT_LOGGER_IMPLEMENTATION,...a};return{authOptions:buildAuthOptions(o),systemOptions:{...DEFAULT_SYSTEM_OPTIONS,...e},loggerOptions:mt,cacheOptions:{...DEFAULT_CACHE_OPTIONS,...c},storageInterface:j||new DefaultStorageClass(o.clientId,DEFAULT_CRYPTO_IMPLEMENTATION,new Logger(mt)),networkInterface:h||DEFAULT_NETWORK_IMPLEMENTATION,cryptoInterface:et||DEFAULT_CRYPTO_IMPLEMENTATION,clientCredentials:ot||DEFAULT_CLIENT_CREDENTIALS,libraryInfo:{...DEFAULT_LIBRARY_INFO,...st},telemetry:{...DEFAULT_TELEMETRY_OPTIONS,...lt},serverTelemetryManager:nt||null,persistencePlugin:gt||null,serializableCache:dt||null}}function buildAuthOptions(o){return{clientCapabilities:[],azureCloudOptions:DEFAULT_AZURE_CLOUD_OPTIONS,skipAuthorityMetadataCache:!1,instanceAware:!1,...o}}function isOidcProtocolMode(o){return o.authOptions.authority.options.protocolMode===ProtocolMode.OIDC}/*! @azure/msal-common v14.16.0 2024-11-05 */const CcsCredentialType={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.16.0 2024-11-05 */const CLIENT_ID="client_id",REDIRECT_URI="redirect_uri",RESPONSE_TYPE="response_type",RESPONSE_MODE="response_mode",GRANT_TYPE="grant_type",CLAIMS="claims",SCOPE="scope",REFRESH_TOKEN="refresh_token",STATE="state",NONCE="nonce",PROMPT="prompt",CODE="code",CODE_CHALLENGE="code_challenge",CODE_CHALLENGE_METHOD="code_challenge_method",CODE_VERIFIER="code_verifier",CLIENT_REQUEST_ID="client-request-id",X_CLIENT_SKU="x-client-SKU",X_CLIENT_VER="x-client-VER",X_CLIENT_OS="x-client-OS",X_CLIENT_CPU="x-client-CPU",X_CLIENT_CURR_TELEM="x-client-current-telemetry",X_CLIENT_LAST_TELEM="x-client-last-telemetry",X_MS_LIB_CAPABILITY="x-ms-lib-capability",X_APP_NAME="x-app-name",X_APP_VER="x-app-ver",POST_LOGOUT_URI="post_logout_redirect_uri",ID_TOKEN_HINT="id_token_hint",DEVICE_CODE="device_code",CLIENT_SECRET="client_secret",CLIENT_ASSERTION="client_assertion",CLIENT_ASSERTION_TYPE="client_assertion_type",TOKEN_TYPE="token_type",REQ_CNF="req_cnf",OBO_ASSERTION="assertion",REQUESTED_TOKEN_USE="requested_token_use",RETURN_SPA_CODE="return_spa_code",NATIVE_BROKER="nativebroker",LOGOUT_HINT="logout_hint",SID="sid",LOGIN_HINT="login_hint",DOMAIN_HINT="domain_hint",X_CLIENT_EXTRA_SKU="x-client-xtra-sku",BROKER_CLIENT_ID="brk_client_id",BROKER_REDIRECT_URI="brk_redirect_uri";/*! @azure/msal-common v14.16.0 2024-11-05 */class RequestValidator{static validateRedirectUri(e){if(!e)throw createClientConfigurationError(redirectUriEmpty)}static validatePrompt(e){const a=[];for(const c in PromptValue)a.push(PromptValue[c]);if(a.indexOf(e)<0)throw createClientConfigurationError(invalidPromptValue)}static validateClaims(e){try{JSON.parse(e)}catch{throw createClientConfigurationError(invalidClaims)}}static validateCodeChallengeParams(e,a){if(!e||!a)throw createClientConfigurationError(pkceParamsMissing);this.validateCodeChallengeMethod(a)}static validateCodeChallengeMethod(e){if([CodeChallengeMethodValues.PLAIN,CodeChallengeMethodValues.S256].indexOf(e)<0)throw createClientConfigurationError(invalidCodeChallengeMethod)}}/*! @azure/msal-common v14.16.0 2024-11-05 */function instrumentBrokerParams(o,e,a){if(!e)return;const c=o.get(CLIENT_ID);c&&o.has(BROKER_CLIENT_ID)&&(a==null||a.addFields({embeddedClientId:c,embeddedRedirectUri:o.get(REDIRECT_URI)},e))}class RequestParameterBuilder{constructor(e,a){this.parameters=new Map,this.performanceClient=a,this.correlationId=e}addResponseTypeCode(){this.parameters.set(RESPONSE_TYPE,encodeURIComponent(Constants$1.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(RESPONSE_TYPE,encodeURIComponent(`${Constants$1.TOKEN_RESPONSE_TYPE} ${Constants$1.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(RESPONSE_MODE,encodeURIComponent(e||ResponseMode.QUERY))}addNativeBroker(){this.parameters.set(NATIVE_BROKER,encodeURIComponent("1"))}addScopes(e,a=!0,c=OIDC_DEFAULT_SCOPES){a&&!c.includes("openid")&&!e.includes("openid")&&c.push("openid");const j=a?[...e||[],...c]:e||[],h=new ScopeSet(j);this.parameters.set(SCOPE,encodeURIComponent(h.printScopes()))}addClientId(e){this.parameters.set(CLIENT_ID,encodeURIComponent(e))}addRedirectUri(e){RequestValidator.validateRedirectUri(e),this.parameters.set(REDIRECT_URI,encodeURIComponent(e))}addPostLogoutRedirectUri(e){RequestValidator.validateRedirectUri(e),this.parameters.set(POST_LOGOUT_URI,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(ID_TOKEN_HINT,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(DOMAIN_HINT,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(LOGIN_HINT,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(HeaderNames.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(HeaderNames.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(SID,encodeURIComponent(e))}addClaims(e,a){const c=this.addClientCapabilitiesToClaims(e,a);RequestValidator.validateClaims(c),this.parameters.set(CLAIMS,encodeURIComponent(c))}addCorrelationId(e){this.parameters.set(CLIENT_REQUEST_ID,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(X_CLIENT_SKU,e.sku),this.parameters.set(X_CLIENT_VER,e.version),e.os&&this.parameters.set(X_CLIENT_OS,e.os),e.cpu&&this.parameters.set(X_CLIENT_CPU,e.cpu)}addApplicationTelemetry(e){e!=null&&e.appName&&this.parameters.set(X_APP_NAME,e.appName),e!=null&&e.appVersion&&this.parameters.set(X_APP_VER,e.appVersion)}addPrompt(e){RequestValidator.validatePrompt(e),this.parameters.set(`${PROMPT}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(STATE,encodeURIComponent(e))}addNonce(e){this.parameters.set(NONCE,encodeURIComponent(e))}addCodeChallengeParams(e,a){if(RequestValidator.validateCodeChallengeParams(e,a),e&&a)this.parameters.set(CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(CODE_CHALLENGE_METHOD,encodeURIComponent(a));else throw createClientConfigurationError(pkceParamsMissing)}addAuthorizationCode(e){this.parameters.set(CODE,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(DEVICE_CODE,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(REFRESH_TOKEN,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(CODE_VERIFIER,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(CLIENT_SECRET,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(CLIENT_ASSERTION,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(CLIENT_ASSERTION_TYPE,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(OBO_ASSERTION,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(REQUESTED_TOKEN_USE,encodeURIComponent(e))}addGrantType(e){this.parameters.set(GRANT_TYPE,encodeURIComponent(e))}addClientInfo(){this.parameters.set(CLIENT_INFO,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([a,c])=>{!this.parameters.has(a)&&c&&this.parameters.set(a,c)})}addClientCapabilitiesToClaims(e,a){let c;if(!e)c={};else try{c=JSON.parse(e)}catch{throw createClientConfigurationError(invalidClaims)}return a&&a.length>0&&(c.hasOwnProperty(ClaimsRequestKeys.ACCESS_TOKEN)||(c[ClaimsRequestKeys.ACCESS_TOKEN]={}),c[ClaimsRequestKeys.ACCESS_TOKEN][ClaimsRequestKeys.XMS_CC]={values:a}),JSON.stringify(c)}addUsername(e){this.parameters.set(PasswordGrantConstants.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(PasswordGrantConstants.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(TOKEN_TYPE,AuthenticationScheme.POP),this.parameters.set(REQ_CNF,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(TOKEN_TYPE,AuthenticationScheme.SSH),this.parameters.set(REQ_CNF,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(X_CLIENT_CURR_TELEM,e.generateCurrentRequestHeaderValue()),this.parameters.set(X_CLIENT_LAST_TELEM,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(X_MS_LIB_CAPABILITY,ThrottlingConstants.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(LOGOUT_HINT,encodeURIComponent(e))}addBrokerParameters(e){const a={};a[BROKER_CLIENT_ID]=e.brokerClientId,a[BROKER_REDIRECT_URI]=e.brokerRedirectUri,this.addExtraQueryParameters(a)}createQueryString(){const e=new Array;return this.parameters.forEach((a,c)=>{e.push(`${c}=${a}`)}),instrumentBrokerParams(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}/*! @azure/msal-common v14.16.0 2024-11-05 */function isOpenIdConfigResponse(o){return o.hasOwnProperty("authorization_endpoint")&&o.hasOwnProperty("token_endpoint")&&o.hasOwnProperty("issuer")&&o.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.16.0 2024-11-05 */function isCloudInstanceDiscoveryResponse(o){return o.hasOwnProperty("tenant_discovery_endpoint")&&o.hasOwnProperty("metadata")}/*! @azure/msal-common v14.16.0 2024-11-05 */function isCloudInstanceDiscoveryErrorResponse(o){return o.hasOwnProperty("error")&&o.hasOwnProperty("error_description")}/*! @azure/msal-common v14.16.0 2024-11-05 */const PerformanceEvents={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},PerformanceEventStatus={InProgress:1};/*! @azure/msal-common v14.16.0 2024-11-05 */const invoke=(o,e,a,c,j)=>(...h)=>{a.trace(`Executing function ${e}`);const et=c==null?void 0:c.startMeasurement(e,j);if(j){const ot=e+"CallCount";c==null||c.incrementFields({[ot]:1},j)}try{const ot=o(...h);return et==null||et.end({success:!0}),a.trace(`Returning result from ${e}`),ot}catch(ot){a.trace(`Error occurred in ${e}`);try{a.trace(JSON.stringify(ot))}catch{a.trace("Unable to print error message.")}throw et==null||et.end({success:!1},ot),ot}},invokeAsync=(o,e,a,c,j)=>(...h)=>{a.trace(`Executing function ${e}`);const et=c==null?void 0:c.startMeasurement(e,j);if(j){const ot=e+"CallCount";c==null||c.incrementFields({[ot]:1},j)}return c==null||c.setPreQueueTime(e,j),o(...h).then(ot=>(a.trace(`Returning result from ${e}`),et==null||et.end({success:!0}),ot)).catch(ot=>{a.trace(`Error occurred in ${e}`);try{a.trace(JSON.stringify(ot))}catch{a.trace("Unable to print error message.")}throw et==null||et.end({success:!1},ot),ot})};/*! @azure/msal-common v14.16.0 2024-11-05 */class RegionDiscovery{constructor(e,a,c,j){this.networkInterface=e,this.logger=a,this.performanceClient=c,this.correlationId=j}async detectRegion(e,a){var j;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.RegionDiscoveryDetectRegion,this.correlationId);let c=e;if(c)a.region_source=RegionDiscoverySources.ENVIRONMENT_VARIABLE;else{const h=RegionDiscovery.IMDS_OPTIONS;try{const et=await invokeAsync(this.getRegionFromIMDS.bind(this),PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Constants$1.IMDS_VERSION,h);if(et.status===ResponseCodes.httpSuccess&&(c=et.body,a.region_source=RegionDiscoverySources.IMDS),et.status===ResponseCodes.httpBadRequest){const ot=await invokeAsync(this.getCurrentVersion.bind(this),PerformanceEvents.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(h);if(!ot)return a.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION,null;const st=await invokeAsync(this.getRegionFromIMDS.bind(this),PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(ot,h);st.status===ResponseCodes.httpSuccess&&(c=st.body,a.region_source=RegionDiscoverySources.IMDS)}}catch{return a.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION,null}}return c||(a.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION),c||null}async getRegionFromIMDS(e,a){var c;return(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Constants$1.IMDS_ENDPOINT}?api-version=${e}&format=text`,a,Constants$1.IMDS_TIMEOUT)}async getCurrentVersion(e){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const c=await this.networkInterface.sendGetRequestAsync(`${Constants$1.IMDS_ENDPOINT}?format=json`,e);return c.status===ResponseCodes.httpBadRequest&&c.body&&c.body["newest-versions"]&&c.body["newest-versions"].length>0?c.body["newest-versions"][0]:null}catch{return null}}}RegionDiscovery.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.16.0 2024-11-05 */class Authority{constructor(e,a,c,j,h,et,ot,st){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=a,this.cacheManager=c,this.authorityOptions=j,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=h,this.performanceClient=ot,this.correlationId=et,this.managedIdentity=st||!1,this.regionDiscovery=new RegionDiscovery(a,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Constants$1.CIAM_AUTH_URL))return AuthorityType.Ciam;const a=e.PathSegments;if(a.length)switch(a[0].toLowerCase()){case Constants$1.ADFS:return AuthorityType.Adfs;case Constants$1.DSTS:return AuthorityType.Dsts}return AuthorityType.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new UrlString(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw createClientAuthError(endpointResolutionError)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw createClientAuthError(endpointResolutionError)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw createClientAuthError(endpointResolutionError)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw createClientAuthError(endSessionEndpointNotSupported);return this.replacePath(this.metadata.end_session_endpoint)}else throw createClientAuthError(endpointResolutionError)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw createClientAuthError(endpointResolutionError)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw createClientAuthError(endpointResolutionError)}canReplaceTenant(e){return e.PathSegments.length===1&&!Authority.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===AuthorityType.Default&&this.protocolMode===ProtocolMode.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let a=e;const j=new UrlString(this.metadata.canonical_authority).getUrlComponents(),h=j.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((ot,st)=>{let lt=h[st];if(st===0&&this.canReplaceTenant(j)){const nt=new UrlString(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];lt!==nt&&(this.logger.verbose(`Replacing tenant domain name ${lt} with id ${nt}`),lt=nt)}ot!==lt&&(a=a.replace(`/${lt}/`,`/${ot}/`))}),this.replaceTenant(a)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===AuthorityType.Adfs||this.protocolMode!==ProtocolMode.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var j,h;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),a=await invokeAsync(this.updateCloudDiscoveryMetadata.bind(this),PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const c=await invokeAsync(this.updateEndpointMetadata.bind(this),PerformanceEvents.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,a,{source:c}),(h=this.performanceClient)==null||h.addFields({cloudDiscoverySource:a,authorityEndpointSource:c},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:generateAuthorityMetadataExpiresAt(),jwks_uri:""}),e}updateCachedMetadata(e,a,c){a!==AuthorityMetadataSource.CACHE&&(c==null?void 0:c.source)!==AuthorityMetadataSource.CACHE&&(e.expiresAt=generateAuthorityMetadataExpiresAt(),e.canonical_authority=this.canonicalAuthority);const j=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(j,e),this.metadata=e}async updateEndpointMetadata(e){var j,h,et;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.AuthorityUpdateEndpointMetadata,this.correlationId);const a=this.updateEndpointMetadataFromLocalSources(e);if(a){if(a.source===AuthorityMetadataSource.HARDCODED_VALUES&&(h=this.authorityOptions.azureRegionConfiguration)!=null&&h.azureRegion&&a.metadata){const ot=await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this),PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(a.metadata);updateAuthorityEndpointMetadata(e,ot,!1),e.canonical_authority=this.canonicalAuthority}return a.source}let c=await invokeAsync(this.getEndpointMetadataFromNetwork.bind(this),PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(c)return(et=this.authorityOptions.azureRegionConfiguration)!=null&&et.azureRegion&&(c=await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this),PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(c)),updateAuthorityEndpointMetadata(e,c,!0),AuthorityMetadataSource.NETWORK;throw createClientAuthError(openIdConfigError,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const a=this.getEndpointMetadataFromConfig();if(a)return this.logger.verbose("Found endpoint metadata in authority configuration"),updateAuthorityEndpointMetadata(e,a,!1),{source:AuthorityMetadataSource.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const j=this.getEndpointMetadataFromHardcodedValues();if(j)return updateAuthorityEndpointMetadata(e,j,!1),{source:AuthorityMetadataSource.HARDCODED_VALUES,metadata:j};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const c=isAuthorityMetadataExpired(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!c?(this.logger.verbose("Found endpoint metadata in the cache."),{source:AuthorityMetadataSource.CACHE}):(c&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new UrlString(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw createClientConfigurationError(invalidAuthorityMetadata)}return null}async getEndpointMetadataFromNetwork(){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${a}`);try{const j=await this.networkInterface.sendGetRequestAsync(a,e);return isOpenIdConfigResponse(j.body)?j.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(j){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${j}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in EndpointMetadata?EndpointMetadata[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var c,j,h;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const a=(j=this.authorityOptions.azureRegionConfiguration)==null?void 0:j.azureRegion;if(a){if(a!==Constants$1.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=a,Authority.replaceWithRegionalInformation(e,a);const et=await invokeAsync(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),PerformanceEvents.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((h=this.authorityOptions.azureRegionConfiguration)==null?void 0:h.environmentRegion,this.regionDiscoveryMetadata);if(et)return this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=et,Authority.replaceWithRegionalInformation(e,et);this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var j;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const a=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(a)return a;const c=await invokeAsync(this.getCloudDiscoveryMetadataFromNetwork.bind(this),PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(c)return updateCloudDiscoveryMetadata(e,c,!0),AuthorityMetadataSource.NETWORK;throw createClientConfigurationError(untrustedAuthority)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Constants$1.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Constants$1.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Constants$1.NOT_APPLICABLE}`);const a=this.getCloudDiscoveryMetadataFromConfig();if(a)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),updateCloudDiscoveryMetadata(e,a,!1),AuthorityMetadataSource.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const j=getCloudDiscoveryMetadataFromHardcodedValues(this.hostnameAndPort);if(j)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),updateCloudDiscoveryMetadata(e,j,!1),AuthorityMetadataSource.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const c=isAuthorityMetadataExpired(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!c?(this.logger.verbose("Found cloud discovery metadata in the cache."),AuthorityMetadataSource.CACHE):(c&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===AuthorityType.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),a=getCloudDiscoveryMetadataFromNetworkResponse(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),a)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),a;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),createClientConfigurationError(invalidCloudDiscoveryMetadata)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var j;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Constants$1.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,a={};let c=null;try{const h=await this.networkInterface.sendGetRequestAsync(e,a);let et,ot;if(isCloudInstanceDiscoveryResponse(h.body))et=h.body,ot=et.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${et.tenant_discovery_endpoint}`);else if(isCloudInstanceDiscoveryErrorResponse(h.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${h.status}`),et=h.body,et.error===Constants$1.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${et.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${et.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),ot=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),c=getCloudDiscoveryMetadataFromNetworkResponse(ot,this.hostnameAndPort)}catch(h){if(h instanceof AuthError)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${h.errorCode}
Error Description: ${h.errorMessage}`);else{const et=h;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${et.name}
Error Description: ${et.message}`)}return null}return c||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),c=Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),c}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&UrlString.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,a){let c;if(a&&a.azureCloudInstance!==AzureCloudInstance.None){const j=a.tenant?a.tenant:Constants$1.DEFAULT_COMMON_TENANT;c=`${a.azureCloudInstance}/${j}/`}return c||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Constants$1.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw createClientAuthError(endpointResolutionError)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return InstanceDiscoveryMetadataAliases.has(e)}static isPublicCloudAuthority(e){return Constants$1.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,a,c){const j=new UrlString(e);j.validateAsUri();const h=j.getUrlComponents();let et=`${a}.${h.HostNameAndPort}`;this.isPublicCloudAuthority(h.HostNameAndPort)&&(et=`${a}.${Constants$1.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const ot=UrlString.constructAuthorityUriFromObject({...j.getUrlComponents(),HostNameAndPort:et}).urlString;return c?`${ot}?${c}`:ot}static replaceWithRegionalInformation(e,a){const c={...e};return c.authorization_endpoint=Authority.buildRegionalAuthorityString(c.authorization_endpoint,a),c.token_endpoint=Authority.buildRegionalAuthorityString(c.token_endpoint,a),c.end_session_endpoint&&(c.end_session_endpoint=Authority.buildRegionalAuthorityString(c.end_session_endpoint,a)),c}static transformCIAMAuthority(e){let a=e;const j=new UrlString(e).getUrlComponents();if(j.PathSegments.length===0&&j.HostNameAndPort.endsWith(Constants$1.CIAM_AUTH_URL)){const h=j.HostNameAndPort.split(".")[0];a=`${a}${h}${Constants$1.AAD_TENANT_DOMAIN_SUFFIX}`}return a}}Authority.reservedTenantDomains=new Set(["{tenant}","{tenantid}",AADAuthorityConstants.COMMON,AADAuthorityConstants.CONSUMERS,AADAuthorityConstants.ORGANIZATIONS]);function getTenantFromAuthorityString(o){var j;const c=(j=new UrlString(o).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:j.toLowerCase();switch(c){case AADAuthorityConstants.COMMON:case AADAuthorityConstants.ORGANIZATIONS:case AADAuthorityConstants.CONSUMERS:return;default:return c}}function formatAuthorityUri(o){return o.endsWith(Constants$1.FORWARD_SLASH)?o:`${o}${Constants$1.FORWARD_SLASH}`}function buildStaticAuthorityOptions(o){const e=o.cloudDiscoveryMetadata;let a;if(e)try{a=JSON.parse(e)}catch{throw createClientConfigurationError(invalidCloudDiscoveryMetadata)}return{canonicalAuthority:o.authority?formatAuthorityUri(o.authority):void 0,knownAuthorities:o.knownAuthorities,cloudDiscoveryMetadata:a}}/*! @azure/msal-common v14.16.0 2024-11-05 */async function createDiscoveredInstance(o,e,a,c,j,h,et){et==null||et.addQueueMeasurement(PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,h);const ot=Authority.transformCIAMAuthority(formatAuthorityUri(o)),st=new Authority(ot,e,a,c,j,h,et);try{return await invokeAsync(st.resolveEndpointsAsync.bind(st),PerformanceEvents.AuthorityResolveEndpointsAsync,j,et,h)(),st}catch{throw createClientAuthError(endpointResolutionError)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class ServerError extends AuthError{constructor(e,a,c,j,h){super(e,a,c),this.name="ServerError",this.errorNo=j,this.status=h,Object.setPrototypeOf(this,ServerError.prototype)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class ThrottlingUtils{static generateThrottlingStorageKey(e){return`${ThrottlingConstants.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,a){var h;const c=ThrottlingUtils.generateThrottlingStorageKey(a),j=e.getThrottlingCache(c);if(j){if(j.throttleTime<Date.now()){e.removeItem(c);return}throw new ServerError(((h=j.errorCodes)==null?void 0:h.join(" "))||Constants$1.EMPTY_STRING,j.errorMessage,j.subError)}}static postProcess(e,a,c){if(ThrottlingUtils.checkResponseStatus(c)||ThrottlingUtils.checkResponseForRetryAfter(c)){const j={throttleTime:ThrottlingUtils.calculateThrottleTime(parseInt(c.headers[HeaderNames.RETRY_AFTER])),error:c.body.error,errorCodes:c.body.error_codes,errorMessage:c.body.error_description,subError:c.body.suberror};e.setThrottlingCache(ThrottlingUtils.generateThrottlingStorageKey(a),j)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(HeaderNames.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const a=e<=0?0:e,c=Date.now()/1e3;return Math.floor(Math.min(c+(a||ThrottlingConstants.DEFAULT_THROTTLE_TIME_SECONDS),c+ThrottlingConstants.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,a,c,j){const h={clientId:a,authority:c.authority,scopes:c.scopes,homeAccountIdentifier:j,claims:c.claims,authenticationScheme:c.authenticationScheme,resourceRequestMethod:c.resourceRequestMethod,resourceRequestUri:c.resourceRequestUri,shrClaims:c.shrClaims,sshKid:c.sshKid},et=this.generateThrottlingStorageKey(h);e.removeItem(et)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class NetworkError extends AuthError{constructor(e,a,c){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,NetworkError.prototype),this.name="NetworkError",this.error=e,this.httpStatus=a,this.responseHeaders=c}}function createNetworkError(o,e,a){return new NetworkError(o,e,a)}/*! @azure/msal-common v14.16.0 2024-11-05 */class BaseClient{constructor(e,a){this.config=buildClientConfiguration(e),this.logger=new Logger(this.config.loggerOptions,name$2,version$3),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}createTokenRequestHeaders(e){const a={};if(a[HeaderNames.CONTENT_TYPE]=Constants$1.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const c=buildClientInfoFromHomeAccountId(e.credential);a[HeaderNames.CCS_HEADER]=`Oid:${c.uid}@${c.utid}`}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case CcsCredentialType.UPN:a[HeaderNames.CCS_HEADER]=`UPN: ${e.credential}`;break}return a}async executePostToTokenEndpoint(e,a,c,j,h,et){var st;et&&((st=this.performanceClient)==null||st.addQueueMeasurement(et,h));const ot=await this.sendPostRequest(j,e,{body:a,headers:c},h);return this.config.serverTelemetryManager&&ot.status<500&&ot.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),ot}async sendPostRequest(e,a,c,j){var et,ot,st;ThrottlingUtils.preProcess(this.cacheManager,e);let h;try{h=await invokeAsync(this.networkClient.sendPostRequestAsync.bind(this.networkClient),PerformanceEvents.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,j)(a,c);const lt=h.headers||{};(ot=this.performanceClient)==null||ot.addFields({refreshTokenSize:((et=h.body.refresh_token)==null?void 0:et.length)||0,httpVerToken:lt[HeaderNames.X_MS_HTTP_VERSION]||"",requestId:lt[HeaderNames.X_MS_REQUEST_ID]||""},j)}catch(lt){if(lt instanceof NetworkError){const nt=lt.responseHeaders;throw nt&&((st=this.performanceClient)==null||st.addFields({httpVerToken:nt[HeaderNames.X_MS_HTTP_VERSION]||"",requestId:nt[HeaderNames.X_MS_REQUEST_ID]||"",contentTypeHeader:nt[HeaderNames.CONTENT_TYPE]||void 0,contentLengthHeader:nt[HeaderNames.CONTENT_LENGTH]||void 0,httpStatus:lt.httpStatus},j)),lt.error}throw lt instanceof AuthError?lt:createClientAuthError(networkError)}return ThrottlingUtils.postProcess(this.cacheManager,e,h),h}async updateAuthority(e,a){var h;(h=this.performanceClient)==null||h.addQueueMeasurement(PerformanceEvents.UpdateTokenEndpointAuthority,a);const c=`https://${e}/${this.authority.tenant}/`,j=await createDiscoveredInstance(c,this.networkClient,this.cacheManager,this.authority.options,this.logger,a,this.performanceClient);this.authority=j}createTokenQueryParameters(e){const a=new RequestParameterBuilder(e.correlationId,this.performanceClient);return e.embeddedClientId&&a.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&a.addExtraQueryParameters(e.tokenQueryParameters),a.addCorrelationId(e.correlationId),a.createQueryString()}}/*! @azure/msal-common v14.16.0 2024-11-05 */const noTokensFound="no_tokens_found",nativeAccountUnavailable="native_account_unavailable",refreshTokenExpired="refresh_token_expired",interactionRequired="interaction_required",consentRequired="consent_required",loginRequired="login_required",badToken="bad_token";/*! @azure/msal-common v14.16.0 2024-11-05 */const InteractionRequiredServerErrorMessage=[interactionRequired,consentRequired,loginRequired,badToken],InteractionRequiredAuthSubErrorMessage=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],InteractionRequiredAuthErrorMessages={[noTokensFound]:"No refresh token found in the cache. Please sign-in.",[nativeAccountUnavailable]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[refreshTokenExpired]:"Refresh token has expired.",[badToken]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class InteractionRequiredAuthError extends AuthError{constructor(e,a,c,j,h,et,ot,st){super(e,a,c),Object.setPrototypeOf(this,InteractionRequiredAuthError.prototype),this.timestamp=j||Constants$1.EMPTY_STRING,this.traceId=h||Constants$1.EMPTY_STRING,this.correlationId=et||Constants$1.EMPTY_STRING,this.claims=ot||Constants$1.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=st}}function isInteractionRequiredError(o,e,a){const c=!!o&&InteractionRequiredServerErrorMessage.indexOf(o)>-1,j=!!a&&InteractionRequiredAuthSubErrorMessage.indexOf(a)>-1,h=!!e&&InteractionRequiredServerErrorMessage.some(et=>e.indexOf(et)>-1);return c||h||j}function createInteractionRequiredAuthError(o){return new InteractionRequiredAuthError(o,InteractionRequiredAuthErrorMessages[o])}/*! @azure/msal-common v14.16.0 2024-11-05 */class ProtocolUtils{static setRequestState(e,a,c){const j=ProtocolUtils.generateLibraryState(e,c);return a?`${j}${Constants$1.RESOURCE_DELIM}${a}`:j}static generateLibraryState(e,a){if(!e)throw createClientAuthError(noCryptoObject);const c={id:e.createNewGuid()};a&&(c.meta=a);const j=JSON.stringify(c);return e.base64Encode(j)}static parseRequestState(e,a){if(!e)throw createClientAuthError(noCryptoObject);if(!a)throw createClientAuthError(invalidState);try{const c=a.split(Constants$1.RESOURCE_DELIM),j=c[0],h=c.length>1?c.slice(1).join(Constants$1.RESOURCE_DELIM):Constants$1.EMPTY_STRING,et=e.base64Decode(j),ot=JSON.parse(et);return{userRequestState:h||Constants$1.EMPTY_STRING,libraryState:ot}}catch{throw createClientAuthError(invalidState)}}}/*! @azure/msal-common v14.16.0 2024-11-05 */const KeyLocation={SW:"sw"};class PopTokenGenerator{constructor(e,a){this.cryptoUtils=e,this.performanceClient=a}async generateCnf(e,a){var h;(h=this.performanceClient)==null||h.addQueueMeasurement(PerformanceEvents.PopTokenGenerateCnf,e.correlationId);const c=await invokeAsync(this.generateKid.bind(this),PerformanceEvents.PopTokenGenerateCnf,a,this.performanceClient,e.correlationId)(e),j=this.cryptoUtils.base64UrlEncode(JSON.stringify(c));return{kid:c.kid,reqCnfString:j}}async generateKid(e){var c;return(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:KeyLocation.SW}}async signPopToken(e,a,c){return this.signPayload(e,a,c)}async signPayload(e,a,c,j){const{resourceRequestMethod:h,resourceRequestUri:et,shrClaims:ot,shrNonce:st,shrOptions:lt}=c,nt=et?new UrlString(et):void 0,gt=nt==null?void 0:nt.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:nowSeconds(),m:h==null?void 0:h.toUpperCase(),u:gt==null?void 0:gt.HostNameAndPort,nonce:st||this.cryptoUtils.createNewGuid(),p:gt==null?void 0:gt.AbsolutePath,q:gt!=null&&gt.QueryString?[[],gt.QueryString]:void 0,client_claims:ot||void 0,...j},a,lt,c.correlationId)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class TokenCacheContext{constructor(e,a){this.cache=e,this.hasChanged=a}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.16.0 2024-11-05 */function parseServerErrorNo(o){var c,j;const e="code=",a=(c=o.error_uri)==null?void 0:c.lastIndexOf(e);return a&&a>=0?(j=o.error_uri)==null?void 0:j.substring(a+e.length):void 0}class ResponseHandler{constructor(e,a,c,j,h,et,ot){this.clientId=e,this.cacheStorage=a,this.cryptoObj=c,this.logger=j,this.serializableCache=h,this.persistencePlugin=et,this.performanceClient=ot}validateServerAuthorizationCodeResponse(e,a){if(!e.state||!a)throw e.state?createClientAuthError(stateNotFound,"Cached State"):createClientAuthError(stateNotFound,"Server State");let c,j;try{c=decodeURIComponent(e.state)}catch{throw createClientAuthError(invalidState,e.state)}try{j=decodeURIComponent(a)}catch{throw createClientAuthError(invalidState,e.state)}if(c!==j)throw createClientAuthError(stateMismatch);if(e.error||e.error_description||e.suberror){const h=parseServerErrorNo(e);throw isInteractionRequiredError(e.error,e.error_description,e.suberror)?new InteractionRequiredAuthError(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",h):new ServerError(e.error||"",e.error_description,e.suberror,h)}}validateTokenResponse(e,a){var c;if(e.error||e.error_description||e.suberror){const j=`Error(s): ${e.error_codes||Constants$1.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Constants$1.NOT_AVAILABLE} - Description: ${e.error_description||Constants$1.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Constants$1.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Constants$1.NOT_AVAILABLE}`,h=(c=e.error_codes)!=null&&c.length?e.error_codes[0]:void 0,et=new ServerError(e.error,j,e.suberror,h,e.status);if(a&&e.status&&e.status>=HttpStatus.SERVER_ERROR_RANGE_START&&e.status<=HttpStatus.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${et}`);return}else if(a&&e.status&&e.status>=HttpStatus.CLIENT_ERROR_RANGE_START&&e.status<=HttpStatus.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${et}`);return}throw isInteractionRequiredError(e.error,e.error_description,e.suberror)?new InteractionRequiredAuthError(e.error,e.error_description,e.suberror,e.timestamp||Constants$1.EMPTY_STRING,e.trace_id||Constants$1.EMPTY_STRING,e.correlation_id||Constants$1.EMPTY_STRING,e.claims||Constants$1.EMPTY_STRING,h):et}}async handleServerTokenResponse(e,a,c,j,h,et,ot,st,lt){var vt;(vt=this.performanceClient)==null||vt.addQueueMeasurement(PerformanceEvents.HandleServerTokenResponse,e.correlation_id);let nt;if(e.id_token){if(nt=extractTokenClaims(e.id_token||Constants$1.EMPTY_STRING,this.cryptoObj.base64Decode),h&&h.nonce&&nt.nonce!==h.nonce)throw createClientAuthError(nonceMismatch);if(j.maxAge||j.maxAge===0){const tt=nt.auth_time;if(!tt)throw createClientAuthError(authTimeNotFound);checkMaxAge(tt,j.maxAge)}}this.homeAccountIdentifier=AccountEntity.generateHomeAccountId(e.client_info||Constants$1.EMPTY_STRING,a.authorityType,this.logger,this.cryptoObj,nt);let gt;h&&h.state&&(gt=ProtocolUtils.parseRequestState(this.cryptoObj,h.state)),e.key_id=e.key_id||j.sshKid||void 0;const dt=this.generateCacheRecord(e,a,c,j,nt,et,h);let mt;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),mt=new TokenCacheContext(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(mt)),ot&&!st&&dt.account){const tt=dt.account.generateAccountKey();if(!this.cacheStorage.getAccount(tt,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await ResponseHandler.generateAuthenticationResult(this.cryptoObj,a,dt,!1,j,nt,gt,void 0,lt)}await this.cacheStorage.saveCacheRecord(dt,j.storeInCache,j.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&mt&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(mt))}return ResponseHandler.generateAuthenticationResult(this.cryptoObj,a,dt,!1,j,nt,gt,e,lt)}generateCacheRecord(e,a,c,j,h,et,ot){const st=a.getPreferredCache();if(!st)throw createClientAuthError(invalidCacheEnvironment);const lt=getTenantIdFromIdTokenClaims(h);let nt,gt;e.id_token&&h&&(nt=createIdTokenEntity(this.homeAccountIdentifier,st,e.id_token,this.clientId,lt||""),gt=buildAccountToCache(this.cacheStorage,a,this.homeAccountIdentifier,this.cryptoObj.base64Decode,h,e.client_info,st,lt,ot,void 0,this.logger));let dt=null;if(e.access_token){const tt=e.scope?ScopeSet.fromString(e.scope):new ScopeSet(j.scopes||[]),bt=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,ht=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,St=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,At=c+bt,Tt=At+ht,ft=St&&St>0?c+St:void 0;dt=createAccessTokenEntity(this.homeAccountIdentifier,st,e.access_token,this.clientId,lt||a.tenant||"",tt.printScopes(),At,Tt,this.cryptoObj.base64Decode,ft,e.token_type,et,e.key_id,j.claims,j.requestedClaimsHash)}let mt=null;if(e.refresh_token){let tt;if(e.refresh_token_expires_in){const bt=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;tt=c+bt}mt=createRefreshTokenEntity(this.homeAccountIdentifier,st,e.refresh_token,this.clientId,e.foci,et,tt)}let vt=null;return e.foci&&(vt={clientId:this.clientId,environment:st,familyId:e.foci}),{account:gt,idToken:nt,accessToken:dt,refreshToken:mt,appMetadata:vt}}static async generateAuthenticationResult(e,a,c,j,h,et,ot,st,lt){var At,Tt,ft,_t,Rt;let nt=Constants$1.EMPTY_STRING,gt=[],dt=null,mt,vt,tt=Constants$1.EMPTY_STRING;if(c.accessToken){if(c.accessToken.tokenType===AuthenticationScheme.POP&&!h.popKid){const Mt=new PopTokenGenerator(e),{secret:Et,keyId:kt}=c.accessToken;if(!kt)throw createClientAuthError(keyIdMissing);nt=await Mt.signPopToken(Et,kt,h)}else nt=c.accessToken.secret;gt=ScopeSet.fromString(c.accessToken.target).asArray(),dt=new Date(Number(c.accessToken.expiresOn)*1e3),mt=new Date(Number(c.accessToken.extendedExpiresOn)*1e3),c.accessToken.refreshOn&&(vt=new Date(Number(c.accessToken.refreshOn)*1e3))}c.appMetadata&&(tt=c.appMetadata.familyId===THE_FAMILY_ID?THE_FAMILY_ID:"");const bt=(et==null?void 0:et.oid)||(et==null?void 0:et.sub)||"",ht=(et==null?void 0:et.tid)||"";st!=null&&st.spa_accountid&&c.account&&(c.account.nativeAccountId=st==null?void 0:st.spa_accountid);const St=c.account?updateAccountTenantProfileData(c.account.getAccountInfo(),void 0,et,(At=c.idToken)==null?void 0:At.secret):null;return{authority:a.canonicalAuthority,uniqueId:bt,tenantId:ht,scopes:gt,account:St,idToken:((Tt=c==null?void 0:c.idToken)==null?void 0:Tt.secret)||"",idTokenClaims:et||{},accessToken:nt,fromCache:j,expiresOn:dt,extExpiresOn:mt,refreshOn:vt,correlationId:h.correlationId,requestId:lt||Constants$1.EMPTY_STRING,familyId:tt,tokenType:((ft=c.accessToken)==null?void 0:ft.tokenType)||Constants$1.EMPTY_STRING,state:ot?ot.userRequestState:Constants$1.EMPTY_STRING,cloudGraphHostName:((_t=c.account)==null?void 0:_t.cloudGraphHostName)||Constants$1.EMPTY_STRING,msGraphHost:((Rt=c.account)==null?void 0:Rt.msGraphHost)||Constants$1.EMPTY_STRING,code:st==null?void 0:st.spa_code,fromNativeBroker:!1}}}function buildAccountToCache(o,e,a,c,j,h,et,ot,st,lt,nt){nt==null||nt.verbose("setCachedAccount called");const dt=o.getAccountKeys().find(ht=>ht.startsWith(a));let mt=null;dt&&(mt=o.getAccount(dt,nt));const vt=mt||AccountEntity.createAccount({homeAccountId:a,idTokenClaims:j,clientInfo:h,environment:et,cloudGraphHostName:st==null?void 0:st.cloud_graph_host_name,msGraphHost:st==null?void 0:st.msgraph_host,nativeAccountId:lt},e,c),tt=vt.tenantProfiles||[],bt=ot||vt.realm;if(bt&&!tt.find(ht=>ht.tenantId===bt)){const ht=buildTenantProfile(a,vt.localAccountId,bt,j);tt.push(ht)}return vt.tenantProfiles=tt,vt}/*! @azure/msal-common v14.16.0 2024-11-05 */async function getClientAssertion(o,e,a){return typeof o=="string"?o:o({clientId:e,tokenEndpoint:a})}/*! @azure/msal-common v14.16.0 2024-11-05 */class AuthorizationCodeClient extends BaseClient{constructor(e,a){var c;super(e,a),this.includeRedirectUri=!0,this.oidcDefaultScopes=(c=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:c.defaultScopes}async getAuthCodeUrl(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.GetAuthCodeUrl,e.correlationId);const a=await invokeAsync(this.createAuthCodeUrlQueryString.bind(this),PerformanceEvents.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return UrlString.appendQueryString(this.authority.authorizationEndpoint,a)}async acquireToken(e,a){var ot,st;if((ot=this.performanceClient)==null||ot.addQueueMeasurement(PerformanceEvents.AuthClientAcquireToken,e.correlationId),!e.code)throw createClientAuthError(requestCannotBeMade);const c=nowSeconds(),j=await invokeAsync(this.executeTokenRequest.bind(this),PerformanceEvents.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),h=(st=j.headers)==null?void 0:st[HeaderNames.X_MS_REQUEST_ID],et=new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return et.validateTokenResponse(j.body),invokeAsync(et.handleServerTokenResponse.bind(et),PerformanceEvents.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(j.body,this.authority,c,e,a,void 0,void 0,void 0,h)}handleFragmentResponse(e,a){if(new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,a),!e.code)throw createClientAuthError(authorizationCodeMissingFromServerResponse);return e}getLogoutUri(e){if(!e)throw createClientConfigurationError(logoutRequestEmpty);const a=this.createLogoutUrlQueryString(e);return UrlString.appendQueryString(this.authority.endSessionEndpoint,a)}async executeTokenRequest(e,a){var lt,nt;(lt=this.performanceClient)==null||lt.addQueueMeasurement(PerformanceEvents.AuthClientExecuteTokenRequest,a.correlationId);const c=this.createTokenQueryParameters(a),j=UrlString.appendQueryString(e.tokenEndpoint,c),h=await invokeAsync(this.createTokenRequestBody.bind(this),PerformanceEvents.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,a.correlationId)(a);let et;if(a.clientInfo)try{const gt=buildClientInfo(a.clientInfo,this.cryptoUtils.base64Decode);et={credential:`${gt.uid}${Separators.CLIENT_INFO_SEPARATOR}${gt.utid}`,type:CcsCredentialType.HOME_ACCOUNT_ID}}catch(gt){this.logger.verbose("Could not parse client info for CCS Header: "+gt)}const ot=this.createTokenRequestHeaders(et||a.ccsCredential),st={clientId:((nt=a.tokenBodyParameters)==null?void 0:nt.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:a.scopes,claims:a.claims,authenticationScheme:a.authenticationScheme,resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,sshKid:a.sshKid};return invokeAsync(this.executePostToTokenEndpoint.bind(this),PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,a.correlationId)(j,h,ot,st,a.correlationId,PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var j,h;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.AuthClientCreateTokenRequestBody,e.correlationId);const a=new RequestParameterBuilder(e.correlationId,this.performanceClient);if(a.addClientId(e.embeddedClientId||((h=e.tokenBodyParameters)==null?void 0:h[CLIENT_ID])||this.config.authOptions.clientId),this.includeRedirectUri?a.addRedirectUri(e.redirectUri):RequestValidator.validateRedirectUri(e.redirectUri),a.addScopes(e.scopes,!0,this.oidcDefaultScopes),a.addAuthorizationCode(e.code),a.addLibraryInfo(this.config.libraryInfo),a.addApplicationTelemetry(this.config.telemetry.application),a.addThrottling(),this.serverTelemetryManager&&!isOidcProtocolMode(this.config)&&a.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&a.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&a.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const et=this.config.clientCredentials.clientAssertion;a.addClientAssertion(await getClientAssertion(et.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),a.addClientAssertionType(et.assertionType)}if(a.addGrantType(GrantType.AUTHORIZATION_CODE_GRANT),a.addClientInfo(),e.authenticationScheme===AuthenticationScheme.POP){const et=new PopTokenGenerator(this.cryptoUtils,this.performanceClient);let ot;e.popKid?ot=this.cryptoUtils.encodeKid(e.popKid):ot=(await invokeAsync(et.generateCnf.bind(et),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,a.addPopToken(ot)}else if(e.authenticationScheme===AuthenticationScheme.SSH)if(e.sshJwk)a.addSshJwk(e.sshJwk);else throw createClientConfigurationError(missingSshJwk);(!StringUtils.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&a.addClaims(e.claims,this.config.authOptions.clientCapabilities);let c;if(e.clientInfo)try{const et=buildClientInfo(e.clientInfo,this.cryptoUtils.base64Decode);c={credential:`${et.uid}${Separators.CLIENT_INFO_SEPARATOR}${et.utid}`,type:CcsCredentialType.HOME_ACCOUNT_ID}}catch(et){this.logger.verbose("Could not parse client info for CCS Header: "+et)}else c=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&c)switch(c.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const et=buildClientInfoFromHomeAccountId(c.credential);a.addCcsOid(et)}catch(et){this.logger.verbose("Could not parse home account ID for CCS Header: "+et)}break;case CcsCredentialType.UPN:a.addCcsUpn(c.credential);break}return e.embeddedClientId&&a.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&a.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[RETURN_SPA_CODE])&&a.addExtraQueryParameters({[RETURN_SPA_CODE]:"1"}),a.createQueryString()}async createAuthCodeUrlQueryString(e){var h,et;const a=e.correlationId||this.config.cryptoInterface.createNewGuid();(h=this.performanceClient)==null||h.addQueueMeasurement(PerformanceEvents.AuthClientCreateQueryString,a);const c=new RequestParameterBuilder(a,this.performanceClient);c.addClientId(e.embeddedClientId||((et=e.extraQueryParameters)==null?void 0:et[CLIENT_ID])||this.config.authOptions.clientId);const j=[...e.scopes||[],...e.extraScopesToConsent||[]];if(c.addScopes(j,!0,this.oidcDefaultScopes),c.addRedirectUri(e.redirectUri),c.addCorrelationId(a),c.addResponseMode(e.responseMode),c.addResponseTypeCode(),c.addLibraryInfo(this.config.libraryInfo),isOidcProtocolMode(this.config)||c.addApplicationTelemetry(this.config.telemetry.application),c.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&c.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&c.addPrompt(e.prompt),e.domainHint&&c.addDomainHint(e.domainHint),e.prompt!==PromptValue.SELECT_ACCOUNT)if(e.sid&&e.prompt===PromptValue.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),c.addSid(e.sid);else if(e.account){const ot=this.extractAccountSid(e.account);let st=this.extractLoginHint(e.account);if(st&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),st=null),st){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),c.addLoginHint(st);try{const lt=buildClientInfoFromHomeAccountId(e.account.homeAccountId);c.addCcsOid(lt)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(ot&&e.prompt===PromptValue.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),c.addSid(ot);try{const lt=buildClientInfoFromHomeAccountId(e.account.homeAccountId);c.addCcsOid(lt)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),c.addLoginHint(e.loginHint),c.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),c.addLoginHint(e.account.username);try{const lt=buildClientInfoFromHomeAccountId(e.account.homeAccountId);c.addCcsOid(lt)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),c.addLoginHint(e.loginHint),c.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&c.addNonce(e.nonce),e.state&&c.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&c.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&c.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,c),e.nativeBroker&&(c.addNativeBroker(),e.authenticationScheme===AuthenticationScheme.POP)){const ot=new PopTokenGenerator(this.cryptoUtils);let st;e.popKid?st=this.cryptoUtils.encodeKid(e.popKid):st=(await invokeAsync(ot.generateCnf.bind(ot),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,c.addPopToken(st)}return c.createQueryString()}createLogoutUrlQueryString(e){const a=new RequestParameterBuilder(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&a.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&a.addCorrelationId(e.correlationId),e.idTokenHint&&a.addIdTokenHint(e.idTokenHint),e.state&&a.addState(e.state),e.logoutHint&&a.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,a),a.createQueryString()}addExtraQueryParams(e,a){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&a.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){var a;return((a=e.idTokenClaims)==null?void 0:a.sid)||null}extractLoginHint(e){var a;return((a=e.idTokenClaims)==null?void 0:a.login_hint)||null}}/*! @azure/msal-common v14.16.0 2024-11-05 */const DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS=300;class RefreshTokenClient extends BaseClient{constructor(e,a){super(e,a)}async acquireToken(e){var et,ot;(et=this.performanceClient)==null||et.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireToken,e.correlationId);const a=nowSeconds(),c=await invokeAsync(this.executeTokenRequest.bind(this),PerformanceEvents.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),j=(ot=c.headers)==null?void 0:ot[HeaderNames.X_MS_REQUEST_ID],h=new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return h.validateTokenResponse(c.body),invokeAsync(h.handleServerTokenResponse.bind(h),PerformanceEvents.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(c.body,this.authority,a,e,void 0,void 0,!0,e.forceCache,j)}async acquireTokenByRefreshToken(e){var c;if(!e)throw createClientConfigurationError(tokenRequestEmpty);if((c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw createClientAuthError(noAccountInSilentRequest);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(j){const h=j instanceof InteractionRequiredAuthError&&j.errorCode===noTokensFound,et=j instanceof ServerError&&j.errorCode===Errors.INVALID_GRANT_ERROR&&j.subError===Errors.CLIENT_MISMATCH_ERROR;if(h||et)return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw j}return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,a){var h;(h=this.performanceClient)==null||h.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const c=invoke(this.cacheManager.getRefreshToken.bind(this.cacheManager),PerformanceEvents.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,a,void 0,this.performanceClient,e.correlationId);if(!c)throw createInteractionRequiredAuthError(noTokensFound);if(c.expiresOn&&isTokenExpired(c.expiresOn,e.refreshTokenExpirationOffsetSeconds||DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS))throw createInteractionRequiredAuthError(refreshTokenExpired);const j={...e,refreshToken:c.secret,authenticationScheme:e.authenticationScheme||AuthenticationScheme.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID}};try{return await invokeAsync(this.acquireToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(j)}catch(et){if(et instanceof InteractionRequiredAuthError&&et.subError===badToken){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const ot=generateCredentialKey(c);this.cacheManager.removeRefreshToken(ot)}throw et}}async executeTokenRequest(e,a){var st,lt;(st=this.performanceClient)==null||st.addQueueMeasurement(PerformanceEvents.RefreshTokenClientExecuteTokenRequest,e.correlationId);const c=this.createTokenQueryParameters(e),j=UrlString.appendQueryString(a.tokenEndpoint,c),h=await invokeAsync(this.createTokenRequestBody.bind(this),PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),et=this.createTokenRequestHeaders(e.ccsCredential),ot={clientId:((lt=e.tokenBodyParameters)==null?void 0:lt.clientId)||this.config.authOptions.clientId,authority:a.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return invokeAsync(this.executePostToTokenEndpoint.bind(this),PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(j,h,et,ot,e.correlationId,PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var j,h,et;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const a=e.correlationId,c=new RequestParameterBuilder(a,this.performanceClient);if(c.addClientId(e.embeddedClientId||((h=e.tokenBodyParameters)==null?void 0:h[CLIENT_ID])||this.config.authOptions.clientId),e.redirectUri&&c.addRedirectUri(e.redirectUri),c.addScopes(e.scopes,!0,(et=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:et.defaultScopes),c.addGrantType(GrantType.REFRESH_TOKEN_GRANT),c.addClientInfo(),c.addLibraryInfo(this.config.libraryInfo),c.addApplicationTelemetry(this.config.telemetry.application),c.addThrottling(),this.serverTelemetryManager&&!isOidcProtocolMode(this.config)&&c.addServerTelemetry(this.serverTelemetryManager),c.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&c.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const ot=this.config.clientCredentials.clientAssertion;c.addClientAssertion(await getClientAssertion(ot.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),c.addClientAssertionType(ot.assertionType)}if(e.authenticationScheme===AuthenticationScheme.POP){const ot=new PopTokenGenerator(this.cryptoUtils,this.performanceClient);let st;e.popKid?st=this.cryptoUtils.encodeKid(e.popKid):st=(await invokeAsync(ot.generateCnf.bind(ot),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,c.addPopToken(st)}else if(e.authenticationScheme===AuthenticationScheme.SSH)if(e.sshJwk)c.addSshJwk(e.sshJwk);else throw createClientConfigurationError(missingSshJwk);if((!StringUtils.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&c.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const ot=buildClientInfoFromHomeAccountId(e.ccsCredential.credential);c.addCcsOid(ot)}catch(ot){this.logger.verbose("Could not parse home account ID for CCS Header: "+ot)}break;case CcsCredentialType.UPN:c.addCcsUpn(e.ccsCredential.credential);break}return e.embeddedClientId&&c.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&c.addExtraQueryParameters(e.tokenBodyParameters),c.createQueryString()}}/*! @azure/msal-common v14.16.0 2024-11-05 */class SilentFlowClient extends BaseClient{constructor(e,a){super(e,a)}async acquireToken(e){var a;try{const[c,j]=await this.acquireCachedToken({...e,scopes:(a=e.scopes)!=null&&a.length?e.scopes:[...OIDC_DEFAULT_SCOPES]});return j===CacheOutcome.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new RefreshTokenClient(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),c}catch(c){if(c instanceof ClientAuthError&&c.errorCode===tokenRefreshRequired)return new RefreshTokenClient(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw c}}async acquireCachedToken(e){var st;(st=this.performanceClient)==null||st.addQueueMeasurement(PerformanceEvents.SilentFlowClientAcquireCachedToken,e.correlationId);let a=CacheOutcome.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!StringUtils.isEmptyObj(e.claims))throw this.setCacheOutcome(CacheOutcome.FORCE_REFRESH_OR_CLAIMS,e.correlationId),createClientAuthError(tokenRefreshRequired);if(!e.account)throw createClientAuthError(noAccountInSilentRequest);const c=e.account.tenantId||getTenantFromAuthorityString(e.authority),j=this.cacheManager.getTokenKeys(),h=this.cacheManager.getAccessToken(e.account,e,j,c,this.performanceClient,e.correlationId);if(h){if(wasClockTurnedBack(h.cachedAt)||isTokenExpired(h.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),createClientAuthError(tokenRefreshRequired);h.refreshOn&&isTokenExpired(h.refreshOn,0)&&(a=CacheOutcome.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(CacheOutcome.NO_CACHED_ACCESS_TOKEN,e.correlationId),createClientAuthError(tokenRefreshRequired);const et=e.authority||this.authority.getPreferredCache(),ot={account:this.cacheManager.readAccountFromCache(e.account),accessToken:h,idToken:this.cacheManager.getIdToken(e.account,j,c,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(et)};return this.setCacheOutcome(a,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await invokeAsync(this.generateResultFromCacheRecord.bind(this),PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(ot,e),a]}setCacheOutcome(e,a){var c,j;(c=this.serverTelemetryManager)==null||c.setCacheOutcome(e),(j=this.performanceClient)==null||j.addFields({cacheOutcome:e},a),e!==CacheOutcome.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,a){var j;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,a.correlationId);let c;if(e.idToken&&(c=extractTokenClaims(e.idToken.secret,this.config.cryptoInterface.base64Decode)),a.maxAge||a.maxAge===0){const h=c==null?void 0:c.auth_time;if(!h)throw createClientAuthError(authTimeNotFound);checkMaxAge(h,a.maxAge)}return ResponseHandler.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,a,c)}}/*! @azure/msal-common v14.16.0 2024-11-05 */const StubbedNetworkModule={sendGetRequestAsync:()=>Promise.reject(createClientAuthError(methodNotImplemented)),sendPostRequestAsync:()=>Promise.reject(createClientAuthError(methodNotImplemented))};/*! @azure/msal-common v14.16.0 2024-11-05 */const skuGroupSeparator=",",skuValueSeparator="|";function makeExtraSkuString(o){const{skus:e,libraryName:a,libraryVersion:c,extensionName:j,extensionVersion:h}=o,et=new Map([[0,[a,c]],[2,[j,h]]]);let ot=[];if(e!=null&&e.length){if(ot=e.split(skuGroupSeparator),ot.length<4)return e}else ot=Array.from({length:4},()=>skuValueSeparator);return et.forEach((st,lt)=>{var nt,gt;st.length===2&&((nt=st[0])!=null&&nt.length)&&((gt=st[1])!=null&&gt.length)&&setSku({skuArr:ot,index:lt,skuName:st[0],skuVersion:st[1]})}),ot.join(skuGroupSeparator)}function setSku(o){const{skuArr:e,index:a,skuName:c,skuVersion:j}=o;a>=e.length||(e[a]=[c,j].join(skuValueSeparator))}class ServerTelemetryManager{constructor(e,a){this.cacheOutcome=CacheOutcome.NOT_APPLICABLE,this.cacheManager=a,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Constants$1.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Constants$1.EMPTY_STRING,this.telemetryCacheKey=SERVER_TELEM_CONSTANTS.CACHE_KEY+Separators.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR}${this.cacheOutcome}`,a=[this.wrapperSKU,this.wrapperVer],c=this.getNativeBrokerErrorCode();c!=null&&c.length&&a.push(`broker_error=${c}`);const j=a.join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),h=this.getRegionDiscoveryFields(),et=[e,h].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);return[SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,et,j].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),a=ServerTelemetryManager.maxErrorsToSend(e),c=e.failedRequests.slice(0,2*a).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),j=e.errors.slice(0,a).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),h=e.errors.length,et=a<h?SERVER_TELEM_CONSTANTS.OVERFLOW_TRUE:SERVER_TELEM_CONSTANTS.OVERFLOW_FALSE,ot=[h,et].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);return[SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,e.cacheHits,c,j,ot].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const a=this.getLastRequests();a.errors.length>=SERVER_TELEM_CONSTANTS.MAX_CACHED_ERRORS&&(a.failedRequests.shift(),a.failedRequests.shift(),a.errors.shift()),a.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof AuthError?e.subError?a.errors.push(e.subError):e.errorCode?a.errors.push(e.errorCode):a.errors.push(e.toString()):a.errors.push(e.toString()):a.errors.push(SERVER_TELEM_CONSTANTS.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),a=ServerTelemetryManager.maxErrorsToSend(e),c=e.errors.length;if(a===c)this.cacheManager.removeItem(this.telemetryCacheKey);else{const j={failedRequests:e.failedRequests.slice(a*2),errors:e.errors.slice(a),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,j)}}static maxErrorsToSend(e){let a,c=0,j=0;const h=e.errors.length;for(a=0;a<h;a++){const et=e.failedRequests[2*a]||Constants$1.EMPTY_STRING,ot=e.failedRequests[2*a+1]||Constants$1.EMPTY_STRING,st=e.errors[a]||Constants$1.EMPTY_STRING;if(j+=et.toString().length+ot.toString().length+st.length+3,j<SERVER_TELEM_CONSTANTS.MAX_LAST_HEADER_BYTES)c+=1;else break}return c}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Constants$1.EMPTY_STRING),e.push(this.regionSource||Constants$1.EMPTY_STRING),e.push(this.regionOutcome||Constants$1.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const a=this.getLastRequests();a.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return makeExtraSkuString(e)}}/*! @azure/msal-common v14.16.0 2024-11-05 */const missingKidError="missing_kid_error",missingAlgError="missing_alg_error";/*! @azure/msal-common v14.16.0 2024-11-05 */const JoseHeaderErrorMessages={[missingKidError]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[missingAlgError]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class JoseHeaderError extends AuthError{constructor(e,a){super(e,a),this.name="JoseHeaderError",Object.setPrototypeOf(this,JoseHeaderError.prototype)}}function createJoseHeaderError(o){return new JoseHeaderError(o,JoseHeaderErrorMessages[o])}/*! @azure/msal-common v14.16.0 2024-11-05 */class JoseHeader{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw createJoseHeaderError(missingKidError);if(!e.alg)throw createJoseHeaderError(missingAlgError);const a=new JoseHeader({typ:e.typ||JsonWebTokenTypes.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(a)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class StubPerformanceMeasurement{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class StubPerformanceClient{generateId(){return"callback-id"}startMeasurement(e,a){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:PerformanceEventStatus.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:a||""},measurement:new StubPerformanceMeasurement}}startPerformanceMeasurement(){return new StubPerformanceMeasurement}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const pkceNotCreated="pkce_not_created",cryptoNonExistent="crypto_nonexistent",emptyNavigateUri="empty_navigate_uri",hashEmptyError="hash_empty_error",noStateInHash="no_state_in_hash",hashDoesNotContainKnownProperties="hash_does_not_contain_known_properties",unableToParseState="unable_to_parse_state",stateInteractionTypeMismatch="state_interaction_type_mismatch",interactionInProgress="interaction_in_progress",popupWindowError="popup_window_error",emptyWindowError="empty_window_error",userCancelled="user_cancelled",monitorPopupTimeout="monitor_popup_timeout",monitorWindowTimeout="monitor_window_timeout",redirectInIframe="redirect_in_iframe",blockIframeReload="block_iframe_reload",blockNestedPopups="block_nested_popups",iframeClosedPrematurely="iframe_closed_prematurely",silentLogoutUnsupported="silent_logout_unsupported",noAccountError="no_account_error",silentPromptValueError="silent_prompt_value_error",noTokenRequestCacheError="no_token_request_cache_error",unableToParseTokenRequestCacheError="unable_to_parse_token_request_cache_error",noCachedAuthorityError="no_cached_authority_error",authRequestNotSetError="auth_request_not_set_error",invalidCacheType="invalid_cache_type",nonBrowserEnvironment="non_browser_environment",databaseNotOpen="database_not_open",noNetworkConnectivity="no_network_connectivity",postRequestFailed="post_request_failed",getRequestFailed="get_request_failed",failedToParseResponse="failed_to_parse_response",unableToLoadToken="unable_to_load_token",cryptoKeyNotFound="crypto_key_not_found",authCodeRequired="auth_code_required",authCodeOrNativeAccountIdRequired="auth_code_or_nativeAccountId_required",spaCodeAndNativeAccountIdPresent="spa_code_and_nativeAccountId_present",databaseUnavailable="database_unavailable",unableToAcquireTokenFromNativePlatform="unable_to_acquire_token_from_native_platform",nativeHandshakeTimeout="native_handshake_timeout",nativeExtensionNotInstalled="native_extension_not_installed",nativeConnectionNotEstablished="native_connection_not_established",uninitializedPublicClientApplication="uninitialized_public_client_application",nativePromptNotSupported="native_prompt_not_supported",invalidBase64String="invalid_base64_string",invalidPopTokenRequest="invalid_pop_token_request",failedToBuildHeaders="failed_to_build_headers",failedToParseHeaders="failed_to_parse_headers";/*! @azure/msal-browser v3.28.1 2025-01-14 */const ErrorLink="For more visit: aka.ms/msaljs/browser-errors",BrowserAuthErrorMessages={[pkceNotCreated]:"The PKCE code challenge and verifier could not be generated.",[cryptoNonExistent]:"The crypto object or function is not available.",[emptyNavigateUri]:"Navigation URI is empty. Please check stack trace for more info.",[hashEmptyError]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ErrorLink}`,[noStateInHash]:"Hash does not contain state. Please verify that the request originated from msal.",[hashDoesNotContainKnownProperties]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ErrorLink}`,[unableToParseState]:"Unable to parse state. Please verify that the request originated from msal.",[stateInteractionTypeMismatch]:"Hash contains state but the interaction type does not match the caller.",[interactionInProgress]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ErrorLink}`,[popupWindowError]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[emptyWindowError]:"window.open returned null or undefined window object.",[userCancelled]:"User cancelled the flow.",[monitorPopupTimeout]:`Token acquisition in popup failed due to timeout.  ${ErrorLink}`,[monitorWindowTimeout]:`Token acquisition in iframe failed due to timeout.  ${ErrorLink}`,[redirectInIframe]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[blockIframeReload]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ErrorLink}`,[blockNestedPopups]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[iframeClosedPrematurely]:"The iframe being monitored was closed prematurely.",[silentLogoutUnsupported]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[noAccountError]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[silentPromptValueError]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[noTokenRequestCacheError]:"No token request found in cache.",[unableToParseTokenRequestCacheError]:"The cached token request could not be parsed.",[noCachedAuthorityError]:"No cached authority found.",[authRequestNotSetError]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[invalidCacheType]:"Invalid cache type",[nonBrowserEnvironment]:"Login and token requests are not supported in non-browser environments.",[databaseNotOpen]:"Database is not open!",[noNetworkConnectivity]:"No network connectivity. Check your internet connection.",[postRequestFailed]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[getRequestFailed]:"Network request failed. Please check the network trace to determine root cause.",[failedToParseResponse]:"Failed to parse network response. Check network trace.",[unableToLoadToken]:"Error loading token to cache.",[cryptoKeyNotFound]:"Cryptographic Key or Keypair not found in browser storage.",[authCodeRequired]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[authCodeOrNativeAccountIdRequired]:"An authorization code or nativeAccountId must be provided to this flow.",[spaCodeAndNativeAccountIdPresent]:"Request cannot contain both spa code and native account id.",[databaseUnavailable]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[unableToAcquireTokenFromNativePlatform]:`Unable to acquire token from native platform.  ${ErrorLink}`,[nativeHandshakeTimeout]:"Timed out while attempting to establish connection to browser extension",[nativeExtensionNotInstalled]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[nativeConnectionNotEstablished]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ErrorLink}`,[uninitializedPublicClientApplication]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ErrorLink}`,[nativePromptNotSupported]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[invalidBase64String]:"Invalid base64 encoded string.",[invalidPopTokenRequest]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[failedToBuildHeaders]:"Failed to build request headers object.",[failedToParseHeaders]:"Failed to parse response headers"};class BrowserAuthError extends AuthError{constructor(e,a){super(e,BrowserAuthErrorMessages[e],a),Object.setPrototypeOf(this,BrowserAuthError.prototype),this.name="BrowserAuthError"}}function createBrowserAuthError(o,e){return new BrowserAuthError(o,e)}/*! @azure/msal-browser v3.28.1 2025-01-14 */const BrowserConstants={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},NativeConstants={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},NativeExtensionMethod={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},BrowserCacheLocation={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},HTTP_REQUEST_TYPE={GET:"GET",POST:"POST"},TemporaryCacheKeys={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},StaticCacheKeys={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},InMemoryCacheKeys={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ApiId={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var InteractionType;(function(o){o.Redirect="redirect",o.Popup="popup",o.Silent="silent",o.None="none"})(InteractionType||(InteractionType={}));const InteractionStatus={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},DEFAULT_REQUEST={scopes:OIDC_DEFAULT_SCOPES},KEY_FORMAT_JWK="jwk",WrapperSKU={React:"@azure/msal-react"},DB_NAME="msal.db",DB_VERSION=1,DB_TABLE_NAME=`${DB_NAME}.keys`,CacheLookupPolicy={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},iFrameRenewalPolicies=[CacheLookupPolicy.Default,CacheLookupPolicy.Skip,CacheLookupPolicy.RefreshTokenAndNetwork],LOG_LEVEL_CACHE_KEY="msal.browser.log.level",LOG_PII_CACHE_KEY="msal.browser.log.pii";/*! @azure/msal-browser v3.28.1 2025-01-14 */function urlEncode(o){return encodeURIComponent(base64Encode(o).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function urlEncodeArr(o){return base64EncArr(o).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function base64Encode(o){return base64EncArr(new TextEncoder().encode(o))}function base64EncArr(o){const e=Array.from(o,a=>String.fromCodePoint(a)).join("");return btoa(e)}/*! @azure/msal-browser v3.28.1 2025-01-14 */const PKCS1_V15_KEYGEN_ALG="RSASSA-PKCS1-v1_5",S256_HASH_ALG="SHA-256",MODULUS_LENGTH=2048,PUBLIC_EXPONENT=new Uint8Array([1,0,1]),UUID_CHARS="0123456789abcdef",UINT32_ARR=new Uint32Array(1),SUBTLE_SUBERROR="crypto_subtle_undefined",keygenAlgorithmOptions={name:PKCS1_V15_KEYGEN_ALG,hash:S256_HASH_ALG,modulusLength:MODULUS_LENGTH,publicExponent:PUBLIC_EXPONENT};function validateCryptoAvailable(o){if(!window)throw createBrowserAuthError(nonBrowserEnvironment);if(!window.crypto)throw createBrowserAuthError(cryptoNonExistent);if(!o&&!window.crypto.subtle)throw createBrowserAuthError(cryptoNonExistent,SUBTLE_SUBERROR)}async function sha256Digest(o,e,a){e==null||e.addQueueMeasurement(PerformanceEvents.Sha256Digest,a);const j=new TextEncoder().encode(o);return window.crypto.subtle.digest(S256_HASH_ALG,j)}function getRandomValues(o){return window.crypto.getRandomValues(o)}function getRandomUint32(){return window.crypto.getRandomValues(UINT32_ARR),UINT32_ARR[0]}function createNewGuid(){const o=Date.now(),e=getRandomUint32()*1024+(getRandomUint32()&1023),a=new Uint8Array(16),c=Math.trunc(e/2**30),j=e&2**30-1,h=getRandomUint32();a[0]=o/2**40,a[1]=o/2**32,a[2]=o/2**24,a[3]=o/2**16,a[4]=o/2**8,a[5]=o,a[6]=112|c>>>8,a[7]=c,a[8]=128|j>>>24,a[9]=j>>>16,a[10]=j>>>8,a[11]=j,a[12]=h>>>24,a[13]=h>>>16,a[14]=h>>>8,a[15]=h;let et="";for(let ot=0;ot<a.length;ot++)et+=UUID_CHARS.charAt(a[ot]>>>4),et+=UUID_CHARS.charAt(a[ot]&15),(ot===3||ot===5||ot===7||ot===9)&&(et+="-");return et}async function generateKeyPair(o,e){return window.crypto.subtle.generateKey(keygenAlgorithmOptions,o,e)}async function exportJwk(o){return window.crypto.subtle.exportKey(KEY_FORMAT_JWK,o)}async function importJwk(o,e,a){return window.crypto.subtle.importKey(KEY_FORMAT_JWK,o,keygenAlgorithmOptions,e,a)}async function sign$3(o,e){return window.crypto.subtle.sign(keygenAlgorithmOptions,o,e)}async function hashString(o){const e=await sha256Digest(o),a=new Uint8Array(e);return urlEncodeArr(a)}/*! @azure/msal-browser v3.28.1 2025-01-14 */const storageNotSupported="storage_not_supported",stubbedPublicClientApplicationCalled="stubbed_public_client_application_called",inMemRedirectUnavailable="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.28.1 2025-01-14 */const BrowserConfigurationAuthErrorMessages={[storageNotSupported]:"Given storage configuration option was not supported.",[stubbedPublicClientApplicationCalled]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[inMemRedirectUnavailable]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};BrowserConfigurationAuthErrorMessages[storageNotSupported],BrowserConfigurationAuthErrorMessages[stubbedPublicClientApplicationCalled],BrowserConfigurationAuthErrorMessages[inMemRedirectUnavailable];class BrowserConfigurationAuthError extends AuthError{constructor(e,a){super(e,a),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,BrowserConfigurationAuthError.prototype)}}function createBrowserConfigurationAuthError(o){return new BrowserConfigurationAuthError(o,BrowserConfigurationAuthErrorMessages[o])}/*! @azure/msal-browser v3.28.1 2025-01-14 */function clearHash(o){o.location.hash="",typeof o.history.replaceState=="function"&&o.history.replaceState(null,"",`${o.location.origin}${o.location.pathname}${o.location.search}`)}function replaceHash(o){const e=o.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function isInIframe(){return window.parent!==window}function isInPopup(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${BrowserConstants.POPUP_NAME_PREFIX}.`)===0}function getCurrentUri(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function getHomepage(){const e=new UrlString(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function blockReloadInHiddenIframes(){if(UrlString.hashContainsKnownProperties(window.location.hash)&&isInIframe())throw createBrowserAuthError(blockIframeReload)}function blockRedirectInIframe(o){if(isInIframe()&&!o)throw createBrowserAuthError(redirectInIframe)}function blockAcquireTokenInPopups(){if(isInPopup())throw createBrowserAuthError(blockNestedPopups)}function blockNonBrowserEnvironment(){if(typeof window>"u")throw createBrowserAuthError(nonBrowserEnvironment)}function blockAPICallsBeforeInitialize(o){if(!o)throw createBrowserAuthError(uninitializedPublicClientApplication)}function preflightCheck$1(o){blockNonBrowserEnvironment(),blockReloadInHiddenIframes(),blockAcquireTokenInPopups(),blockAPICallsBeforeInitialize(o)}function redirectPreflightCheck(o,e){if(preflightCheck$1(o),blockRedirectInIframe(e.system.allowRedirectInIframe),e.cache.cacheLocation===BrowserCacheLocation.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw createBrowserConfigurationAuthError(inMemRedirectUnavailable)}function preconnect(o){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(o).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function createGuid(){return createNewGuid()}/*! @azure/msal-browser v3.28.1 2025-01-14 */class NavigationClient{navigateInternal(e,a){return NavigationClient.defaultNavigateWindow(e,a)}navigateExternal(e,a){return NavigationClient.defaultNavigateWindow(e,a)}static defaultNavigateWindow(e,a){return a.noHistory?window.location.replace(e):window.location.assign(e),new Promise(c=>{setTimeout(()=>{c(!0)},a.timeout)})}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class FetchClient{async sendGetRequestAsync(e,a){let c,j={},h=0;const et=getFetchHeaders(a);try{c=await fetch(e,{method:HTTP_REQUEST_TYPE.GET,headers:et})}catch{throw createBrowserAuthError(window.navigator.onLine?getRequestFailed:noNetworkConnectivity)}j=getHeaderDict(c.headers);try{return h=c.status,{headers:j,body:await c.json(),status:h}}catch{throw createNetworkError(createBrowserAuthError(failedToParseResponse),h,j)}}async sendPostRequestAsync(e,a){const c=a&&a.body||"",j=getFetchHeaders(a);let h,et=0,ot={};try{h=await fetch(e,{method:HTTP_REQUEST_TYPE.POST,headers:j,body:c})}catch{throw createBrowserAuthError(window.navigator.onLine?postRequestFailed:noNetworkConnectivity)}ot=getHeaderDict(h.headers);try{return et=h.status,{headers:ot,body:await h.json(),status:et}}catch{throw createNetworkError(createBrowserAuthError(failedToParseResponse),et,ot)}}}function getFetchHeaders(o){try{const e=new Headers;if(!(o&&o.headers))return e;const a=o.headers;return Object.entries(a).forEach(([c,j])=>{e.append(c,j)}),e}catch{throw createBrowserAuthError(failedToBuildHeaders)}}function getHeaderDict(o){try{const e={};return o.forEach((a,c)=>{e[c]=a}),e}catch{throw createBrowserAuthError(failedToParseHeaders)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const DEFAULT_POPUP_TIMEOUT_MS=6e4,DEFAULT_IFRAME_TIMEOUT_MS=1e4,DEFAULT_REDIRECT_TIMEOUT_MS=3e4,DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS=2e3;function buildConfiguration({auth:o,cache:e,system:a,telemetry:c},j){const h={clientId:Constants$1.EMPTY_STRING,authority:`${Constants$1.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Constants$1.EMPTY_STRING,authorityMetadata:Constants$1.EMPTY_STRING,redirectUri:typeof window<"u"?getCurrentUri():"",postLogoutRedirectUri:Constants$1.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ProtocolMode.AAD,OIDCOptions:{serverResponseType:ServerResponseType.FRAGMENT,defaultScopes:[Constants$1.OPENID_SCOPE,Constants$1.PROFILE_SCOPE,Constants$1.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:AzureCloudInstance.None,tenant:Constants$1.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},et={cacheLocation:BrowserCacheLocation.SessionStorage,temporaryCacheLocation:BrowserCacheLocation.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===BrowserCacheLocation.LocalStorage),claimsBasedCachingEnabled:!1},ot={loggerCallback:()=>{},logLevel:LogLevel.Info,piiLoggingEnabled:!1},lt={...{...DEFAULT_SYSTEM_OPTIONS,loggerOptions:ot,networkClient:j?new FetchClient:StubbedNetworkModule,navigationClient:new NavigationClient,loadFrameTimeout:0,windowHashTimeout:(a==null?void 0:a.loadFrameTimeout)||DEFAULT_POPUP_TIMEOUT_MS,iframeHashTimeout:(a==null?void 0:a.loadFrameTimeout)||DEFAULT_IFRAME_TIMEOUT_MS,navigateFrameWait:0,redirectNavigationTimeout:DEFAULT_REDIRECT_TIMEOUT_MS,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(a==null?void 0:a.nativeBrokerHandshakeTimeout)||DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS,pollIntervalMilliseconds:BrowserConstants.DEFAULT_POLL_INTERVAL_MS},...a,loggerOptions:(a==null?void 0:a.loggerOptions)||ot},nt={application:{appName:Constants$1.EMPTY_STRING,appVersion:Constants$1.EMPTY_STRING},client:new StubPerformanceClient};if((o==null?void 0:o.protocolMode)!==ProtocolMode.OIDC&&(o!=null&&o.OIDCOptions)&&new Logger(lt.loggerOptions).warning(JSON.stringify(createClientConfigurationError(cannotSetOIDCOptions))),o!=null&&o.protocolMode&&o.protocolMode!==ProtocolMode.AAD&&(lt!=null&&lt.allowNativeBroker))throw createClientConfigurationError(cannotAllowNativeBroker);return{auth:{...h,...o,OIDCOptions:{...h.OIDCOptions,...o==null?void 0:o.OIDCOptions}},cache:{...et,...e},system:lt,telemetry:{...nt,...c}}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const name$1="@azure/msal-browser",version$2="3.28.1";/*! @azure/msal-browser v3.28.1 2025-01-14 */class BaseOperatingContext{static loggerCallback(e,a){switch(e){case LogLevel.Error:console.error(a);return;case LogLevel.Info:console.info(a);return;case LogLevel.Verbose:console.debug(a);return;case LogLevel.Warning:console.warn(a);return;default:console.log(a);return}}constructor(e){var st;this.browserEnvironment=typeof window<"u",this.config=buildConfiguration(e,this.browserEnvironment);let a;try{a=window[BrowserCacheLocation.SessionStorage]}catch{}const c=a==null?void 0:a.getItem(LOG_LEVEL_CACHE_KEY),j=(st=a==null?void 0:a.getItem(LOG_PII_CACHE_KEY))==null?void 0:st.toLowerCase(),h=j==="true"?!0:j==="false"?!1:void 0,et={...this.config.system.loggerOptions},ot=c&&Object.keys(LogLevel).includes(c)?LogLevel[c]:void 0;ot&&(et.loggerCallback=BaseOperatingContext.loggerCallback,et.logLevel=ot),h!==void 0&&(et.piiLoggingEnabled=h),this.logger=new Logger(et,name$1,version$2),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class StandardOperatingContext extends BaseOperatingContext{getModuleName(){return StandardOperatingContext.MODULE_NAME}getId(){return StandardOperatingContext.ID}async initialize(){return this.available=typeof window<"u",this.available}}StandardOperatingContext.MODULE_NAME="";StandardOperatingContext.ID="StandardOperatingContext";/*! @azure/msal-browser v3.28.1 2025-01-14 */function base64Decode(o){return new TextDecoder().decode(base64DecToArr(o))}function base64DecToArr(o){let e=o.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw createBrowserAuthError(invalidBase64String)}const a=atob(e);return Uint8Array.from(a,c=>c.codePointAt(0)||0)}/*! @azure/msal-browser v3.28.1 2025-01-14 */class DatabaseStorage{constructor(){this.dbName=DB_NAME,this.version=DB_VERSION,this.tableName=DB_TABLE_NAME,this.dbOpen=!1}async open(){return new Promise((e,a)=>{const c=window.indexedDB.open(this.dbName,this.version);c.addEventListener("upgradeneeded",j=>{j.target.result.createObjectStore(this.tableName)}),c.addEventListener("success",j=>{const h=j;this.db=h.target.result,this.dbOpen=!0,e()}),c.addEventListener("error",()=>a(createBrowserAuthError(databaseUnavailable)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((a,c)=>{if(!this.db)return c(createBrowserAuthError(databaseNotOpen));const et=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);et.addEventListener("success",ot=>{const st=ot;this.closeConnection(),a(st.target.result)}),et.addEventListener("error",ot=>{this.closeConnection(),c(ot)})})}async setItem(e,a){return await this.validateDbIsOpen(),new Promise((c,j)=>{if(!this.db)return j(createBrowserAuthError(databaseNotOpen));const ot=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(a,e);ot.addEventListener("success",()=>{this.closeConnection(),c()}),ot.addEventListener("error",st=>{this.closeConnection(),j(st)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((a,c)=>{if(!this.db)return c(createBrowserAuthError(databaseNotOpen));const et=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);et.addEventListener("success",()=>{this.closeConnection(),a()}),et.addEventListener("error",ot=>{this.closeConnection(),c(ot)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,a)=>{if(!this.db)return a(createBrowserAuthError(databaseNotOpen));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();h.addEventListener("success",et=>{const ot=et;this.closeConnection(),e(ot.target.result)}),h.addEventListener("error",et=>{this.closeConnection(),a(et)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((a,c)=>{if(!this.db)return c(createBrowserAuthError(databaseNotOpen));const et=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);et.addEventListener("success",ot=>{const st=ot;this.closeConnection(),a(st.target.result===1)}),et.addEventListener("error",ot=>{this.closeConnection(),c(ot)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,a)=>{const c=window.indexedDB.deleteDatabase(DB_NAME),j=setTimeout(()=>a(!1),200);c.addEventListener("success",()=>(clearTimeout(j),e(!0))),c.addEventListener("blocked",()=>(clearTimeout(j),e(!0))),c.addEventListener("error",()=>(clearTimeout(j),a(!1)))})}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class MemoryStorage{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,a){this.cache.set(e,a)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((a,c)=>{e.push(c)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class AsyncMemoryStorage{constructor(e){this.inMemoryCache=new MemoryStorage,this.indexedDBCache=new DatabaseStorage,this.logger=e}handleDatabaseAccessError(e){if(e instanceof BrowserAuthError&&e.errorCode===databaseUnavailable)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const a=this.inMemoryCache.getItem(e);if(!a)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(c){this.handleDatabaseAccessError(c)}return a}async setItem(e,a){this.inMemoryCache.setItem(e,a);try{await this.indexedDBCache.setItem(e,a)}catch(c){this.handleDatabaseAccessError(c)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(a){this.handleDatabaseAccessError(a)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(a){this.handleDatabaseAccessError(a)}return e}async containsKey(e){const a=this.inMemoryCache.containsKey(e);if(!a)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(c){this.handleDatabaseAccessError(c)}return a}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class CryptoOps{constructor(e,a,c){this.logger=e,validateCryptoAvailable(c??!1),this.cache=new AsyncMemoryStorage(this.logger),this.performanceClient=a}createNewGuid(){return createNewGuid()}base64Encode(e){return base64Encode(e)}base64Decode(e){return base64Decode(e)}base64UrlEncode(e){return urlEncode(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var nt;const a=(nt=this.performanceClient)==null?void 0:nt.startMeasurement(PerformanceEvents.CryptoOptsGetPublicKeyThumbprint,e.correlationId),c=await generateKeyPair(CryptoOps.EXTRACTABLE,CryptoOps.POP_KEY_USAGES),j=await exportJwk(c.publicKey),h={e:j.e,kty:j.kty,n:j.n},et=getSortedObjectString(h),ot=await this.hashString(et),st=await exportJwk(c.privateKey),lt=await importJwk(st,!1,["sign"]);return await this.cache.setItem(ot,{privateKey:lt,publicKey:c.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),a&&a.end({success:!0}),ot}async removeTokenBindingKey(e){return await this.cache.removeItem(e),!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,a,c,j){var At;const h=(At=this.performanceClient)==null?void 0:At.startMeasurement(PerformanceEvents.CryptoOptsSignJwt,j),et=await this.cache.getItem(a);if(!et)throw createBrowserAuthError(cryptoKeyNotFound);const ot=await exportJwk(et.publicKey),st=getSortedObjectString(ot),lt=urlEncode(JSON.stringify({kid:a})),nt=JoseHeader.getShrHeaderString({...c==null?void 0:c.header,alg:ot.alg,kid:lt}),gt=urlEncode(nt);e.cnf={jwk:JSON.parse(st)};const dt=urlEncode(JSON.stringify(e)),mt=`${gt}.${dt}`,tt=new TextEncoder().encode(mt),bt=await sign$3(et.privateKey,tt),ht=urlEncodeArr(new Uint8Array(bt)),St=`${mt}.${ht}`;return h&&h.end({success:!0}),St}async hashString(e){return hashString(e)}}CryptoOps.POP_KEY_USAGES=["sign","verify"];CryptoOps.EXTRACTABLE=!0;function getSortedObjectString(o){return JSON.stringify(o,Object.keys(o).sort())}/*! @azure/msal-browser v3.28.1 2025-01-14 */class LocalStorage{constructor(){if(!window.localStorage)throw createBrowserConfigurationAuthError(storageNotSupported)}getItem(e){return window.localStorage.getItem(e)}setItem(e,a){window.localStorage.setItem(e,a)}removeItem(e){window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class SessionStorage{constructor(){if(!window.sessionStorage)throw createBrowserConfigurationAuthError(storageNotSupported)}getItem(e){return window.sessionStorage.getItem(e)}setItem(e,a){window.sessionStorage.setItem(e,a)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */function extractBrowserRequestState(o,e){if(!e)return null;try{return ProtocolUtils.parseRequestState(o,e).libraryState.meta}catch{throw createClientAuthError(invalidState)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const COOKIE_LIFE_MULTIPLIER=24*60*60*1e3;class CookieStorage{getItem(e){const a=`${encodeURIComponent(e)}`,c=document.cookie.split(";");for(let j=0;j<c.length;j++){const h=c[j],[et,...ot]=decodeURIComponent(h).trim().split("="),st=ot.join("=");if(et===a)return st}return""}setItem(e,a,c,j=!0){let h=`${encodeURIComponent(e)}=${encodeURIComponent(a)};path=/;SameSite=Lax;`;if(c){const et=getCookieExpirationTime(c);h+=`expires=${et};`}j&&(h+="Secure;"),document.cookie=h}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),a=[];return e.forEach(c=>{const j=decodeURIComponent(c).trim().split("=");a.push(j[0])}),a}containsKey(e){return this.getKeys().includes(e)}}function getCookieExpirationTime(o){const e=new Date;return new Date(e.getTime()+o*COOKIE_LIFE_MULTIPLIER).toUTCString()}/*! @azure/msal-browser v3.28.1 2025-01-14 */class BrowserCacheManager extends CacheManager{constructor(e,a,c,j,h,et){super(e,c,j,h),this.cacheConfig=a,this.logger=j,this.internalStorage=new MemoryStorage,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new CookieStorage,a.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=et}setupBrowserStorage(e){try{switch(e){case BrowserCacheLocation.LocalStorage:return new LocalStorage;case BrowserCacheLocation.SessionStorage:return new SessionStorage;case BrowserCacheLocation.MemoryStorage:default:break}}catch(a){this.logger.error(a)}return this.cacheConfig.cacheLocation=BrowserCacheLocation.MemoryStorage,new MemoryStorage}migrateCacheEntries(){const e=`${Constants$1.CACHE_PREFIX}.${PersistentCacheKeys.ID_TOKEN}`,a=`${Constants$1.CACHE_PREFIX}.${PersistentCacheKeys.CLIENT_INFO}`,c=`${Constants$1.CACHE_PREFIX}.${PersistentCacheKeys.ERROR}`,j=`${Constants$1.CACHE_PREFIX}.${PersistentCacheKeys.ERROR_DESC}`,h=this.browserStorage.getItem(e),et=this.browserStorage.getItem(a),ot=this.browserStorage.getItem(c),st=this.browserStorage.getItem(j),lt=[h,et,ot,st];[PersistentCacheKeys.ID_TOKEN,PersistentCacheKeys.CLIENT_INFO,PersistentCacheKeys.ERROR,PersistentCacheKeys.ERROR_DESC].forEach((gt,dt)=>{const mt=lt[dt];mt&&this.setTemporaryCache(gt,mt,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(StaticCacheKeys.ACCOUNT_KEYS),a=this.getItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`);if(e&&a){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(j=>{if(this.isCredentialKey(j)){const h=this.getItem(j);if(h){const et=this.validateAndParseJson(h);if(et&&et.hasOwnProperty("credentialType"))switch(et.credentialType){case CredentialType.ID_TOKEN:if(isIdTokenEntity(et)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${j} found, saving key to token key map`);const ot=et,st=this.updateCredentialCacheKey(j,ot);this.addTokenKey(st,CredentialType.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${j}`);break;case CredentialType.ACCESS_TOKEN:case CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(isAccessTokenEntity(et)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${j} found, saving key to token key map`);const ot=et,st=this.updateCredentialCacheKey(j,ot);this.addTokenKey(st,CredentialType.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${j}`);break;case CredentialType.REFRESH_TOKEN:if(isRefreshTokenEntity(et)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${j} found, saving key to token key map`);const ot=et,st=this.updateCredentialCacheKey(j,ot);this.addTokenKey(st,CredentialType.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${j}`);break}}}if(this.isAccountKey(j)){const h=this.getItem(j);if(h){const et=this.validateAndParseJson(h);et&&AccountEntity.isAccountEntity(et)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${j} found, saving key to account key map`),this.addAccountKeyToMap(j))}}})}validateAndParseJson(e){try{const a=JSON.parse(e);return a&&typeof a=="object"?a:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,a){this.browserStorage.setItem(e,a)}getAccount(e,a){this.logger.trace("BrowserCacheManager.getAccount called");const c=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,c,a)}getCachedAccountEntity(e){const a=this.getItem(e);if(!a)return this.removeAccountKeyFromMap(e),null;const c=this.validateAndParseJson(a);return!c||!AccountEntity.isAccountEntity(c)?(this.removeAccountKeyFromMap(e),null):CacheManager.toObject(new AccountEntity,c)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const a=e.generateAccountKey();this.setItem(a,JSON.stringify(e)),this.addAccountKeyToMap(a)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(StaticCacheKeys.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const a=this.getAccountKeys();a.indexOf(e)===-1?(a.push(e),this.setItem(StaticCacheKeys.ACCOUNT_KEYS,JSON.stringify(a)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const a=this.getAccountKeys(),c=a.indexOf(e);c>-1?(a.splice(c,1),this.setItem(StaticCacheKeys.ACCOUNT_KEYS,JSON.stringify(a)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,CredentialType.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`);if(e){const a=this.validateAndParseJson(e);if(a&&a.hasOwnProperty("idToken")&&a.hasOwnProperty("accessToken")&&a.hasOwnProperty("refreshToken"))return a;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,a){this.logger.trace("BrowserCacheManager addTokenKey called");const c=this.getTokenKeys();switch(a){case CredentialType.ID_TOKEN:c.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),c.idToken.push(e));break;case CredentialType.ACCESS_TOKEN:c.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),c.accessToken.push(e));break;case CredentialType.REFRESH_TOKEN:c.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),c.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${a}`),createClientAuthError(unexpectedCredentialType)}this.setItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(c))}removeTokenKey(e,a){this.logger.trace("BrowserCacheManager removeTokenKey called");const c=this.getTokenKeys();switch(a){case CredentialType.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const j=c.idToken.indexOf(e);j>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),c.idToken.splice(j,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case CredentialType.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const h=c.accessToken.indexOf(e);h>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),c.accessToken.splice(h,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case CredentialType.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const et=c.refreshToken.indexOf(e);et>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),c.refreshToken.splice(et,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${a}`),createClientAuthError(unexpectedCredentialType)}this.setItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(c))}getIdTokenCredential(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ID_TOKEN),null;const c=this.validateAndParseJson(a);return!c||!isIdTokenEntity(c)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),c)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const a=generateCredentialKey(e);this.setItem(a,JSON.stringify(e)),this.addTokenKey(a,CredentialType.ID_TOKEN)}getAccessTokenCredential(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN),null;const c=this.validateAndParseJson(a);return!c||!isAccessTokenEntity(c)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),c)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const a=generateCredentialKey(e);this.setItem(a,JSON.stringify(e)),this.addTokenKey(a,CredentialType.ACCESS_TOKEN)}getRefreshTokenCredential(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN),null;const c=this.validateAndParseJson(a);return!c||!isRefreshTokenEntity(c)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),c)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const a=generateCredentialKey(e);this.setItem(a,JSON.stringify(e)),this.addTokenKey(a,CredentialType.REFRESH_TOKEN)}getAppMetadata(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const c=this.validateAndParseJson(a);return!c||!isAppMetadataEntity(e,c)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),c)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const a=generateAppMetadataKey(e);this.setItem(a,JSON.stringify(e))}getServerTelemetry(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const c=this.validateAndParseJson(a);return!c||!isServerTelemetryEntity(e,c)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),c)}setServerTelemetry(e,a){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(a))}getAuthorityMetadata(e){const a=this.internalStorage.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const c=this.validateAndParseJson(a);return c&&isAuthorityMetadataEntity(e,c)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),c):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(a=>this.isAuthorityMetadata(a))}setWrapperMetadata(e,a){this.internalStorage.setItem(InMemoryCacheKeys.WRAPPER_SKU,e),this.internalStorage.setItem(InMemoryCacheKeys.WRAPPER_VER,a)}getWrapperMetadata(){const e=this.internalStorage.getItem(InMemoryCacheKeys.WRAPPER_SKU)||Constants$1.EMPTY_STRING,a=this.internalStorage.getItem(InMemoryCacheKeys.WRAPPER_VER)||Constants$1.EMPTY_STRING;return[e,a]}setAuthorityMetadata(e,a){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(a))}getActiveAccount(){const e=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS),a=this.getItem(e);if(!a){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const j=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT),h=this.getItem(j);if(!h)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const et=this.getAccountInfoFilteredBy({localAccountId:h});return et?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(et),et):null}const c=this.validateAndParseJson(a);return c?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:c.homeAccountId,localAccountId:c.localAccountId,tenantId:c.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const a=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS),c=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const j={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(a,JSON.stringify(j)),this.browserStorage.setItem(c,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(a),this.browserStorage.removeItem(c)}getThrottlingCache(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const c=this.validateAndParseJson(a);return!c||!isThrottlingEntity(e,c)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),c)}setThrottlingCache(e,a){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(a))}getTemporaryCache(e,a){const c=a?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const h=this.cookieStorage.getItem(c);if(h)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),h}const j=this.temporaryCacheStorage.getItem(c);if(!j){if(this.cacheConfig.cacheLocation===BrowserCacheLocation.LocalStorage){const h=this.browserStorage.getItem(c);if(h)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),h}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),j}setTemporaryCache(e,a,c){const j=c?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(j,a),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(j,a,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(Constants$1.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(Constants$1.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,a){e.addQueueMeasurement(PerformanceEvents.ClearTokensAndKeysWithClaims,a);const c=this.getTokenKeys(),j=[];c.accessToken.forEach(h=>{const et=this.getAccessTokenCredential(h);et!=null&&et.requestedClaimsHash&&h.includes(et.requestedClaimsHash.toLowerCase())&&j.push(this.removeAccessToken(h))}),await Promise.all(j),j.length>0&&this.logger.warning(`${j.length} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):StringUtils.startsWith(e,Constants$1.CACHE_PREFIX)||StringUtils.startsWith(e,PersistentCacheKeys.ADAL_ID_TOKEN)?e:`${Constants$1.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:a}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.AUTHORITY}.${a}`)}generateNonceKey(e){const{libraryState:{id:a}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.NONCE_IDTOKEN}.${a}`)}generateStateKey(e){const{libraryState:{id:a}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.REQUEST_STATE}.${a}`)}getCachedAuthority(e){const a=this.generateStateKey(e),c=this.getTemporaryCache(a);if(!c)return null;const j=this.generateAuthorityKey(c);return this.getTemporaryCache(j)}updateCacheEntries(e,a,c,j,h){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const et=this.generateStateKey(e);this.setTemporaryCache(et,e,!1);const ot=this.generateNonceKey(e);this.setTemporaryCache(ot,a,!1);const st=this.generateAuthorityKey(e);if(this.setTemporaryCache(st,c,!1),h){const lt={credential:h.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID};this.setTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,JSON.stringify(lt),!0)}else if(j){const lt={credential:j,type:CcsCredentialType.UPN};this.setTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,JSON.stringify(lt),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(a=>{a.indexOf(e)!==-1&&this.removeTemporaryItem(a)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const a=this.generateStateKey(e),c=this.temporaryCacheStorage.getItem(a);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${c}`),this.resetRequestCache(c||Constants$1.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(a=>{if(a.indexOf(TemporaryCacheKeys.REQUEST_STATE)===-1)return;const c=this.temporaryCacheStorage.getItem(a);if(!c)return;const j=extractBrowserRequestState(this.cryptoImpl,c);j&&j.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${c}`),this.resetRequestCache(c))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const a=base64Encode(JSON.stringify(e));this.setTemporaryCache(TemporaryCacheKeys.REQUEST_PARAMS,a,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const a=this.getTemporaryCache(TemporaryCacheKeys.REQUEST_PARAMS,!0);if(!a)throw createBrowserAuthError(noTokenRequestCacheError);let c;try{c=JSON.parse(base64Decode(a))}catch(j){throw this.logger.errorPii(`Attempted to parse: ${a}`),this.logger.error(`Parsing cached token request threw with error: ${j}`),createBrowserAuthError(unableToParseTokenRequestCacheError)}if(this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.REQUEST_PARAMS)),!c.authority){const j=this.generateAuthorityKey(e),h=this.getTemporaryCache(j);if(!h)throw createBrowserAuthError(noCachedAuthorityError);c.authority=h}return c}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(TemporaryCacheKeys.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const a=this.validateAndParseJson(e);return a||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const a=this.getInteractionInProgress();return e?a===this.clientId:!!a}getInteractionInProgress(){const e=`${Constants$1.CACHE_PREFIX}.${TemporaryCacheKeys.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const a=`${Constants$1.CACHE_PREFIX}.${TemporaryCacheKeys.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw createBrowserAuthError(interactionInProgress);this.setTemporaryCache(a,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(a)}getLegacyLoginHint(){const e=this.getTemporaryCache(PersistentCacheKeys.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(PersistentCacheKeys.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const a=this.getTemporaryCache(PersistentCacheKeys.ID_TOKEN,!0);a&&(this.browserStorage.removeItem(this.generateCacheKey(PersistentCacheKeys.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const c=a||e;if(c){const j=extractTokenClaims(c,base64Decode);if(j.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),j.preferred_username;if(j.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),j.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,a){const c=generateCredentialKey(a);if(e!==c){const j=this.getItem(e);if(j)return this.browserStorage.removeItem(e),this.setItem(c,j),this.logger.verbose(`Updated an outdated ${a.credentialType} cache key`),c;this.logger.error(`Attempted to update an outdated ${a.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}async hydrateCache(e,a){var ot,st,lt;const c=createIdTokenEntity((ot=e.account)==null?void 0:ot.homeAccountId,(st=e.account)==null?void 0:st.environment,e.idToken,this.clientId,e.tenantId);let j;a.claims&&(j=await this.cryptoImpl.hashString(a.claims));const h=createAccessTokenEntity((lt=e.account)==null?void 0:lt.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,base64Decode,void 0,e.tokenType,void 0,a.sshKid,a.claims,j),et={idToken:c,accessToken:h};return this.saveCacheRecord(et)}async saveCacheRecord(e,a,c){try{await super.saveCacheRecord(e,a,c)}catch(j){if(j instanceof CacheError&&this.performanceClient&&c)try{const h=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:h.refreshToken.length,cacheIdCount:h.idToken.length,cacheAtCount:h.accessToken.length},c)}catch{}throw j}}}const DEFAULT_BROWSER_CACHE_MANAGER=(o,e)=>{const a={cacheLocation:BrowserCacheLocation.MemoryStorage,temporaryCacheLocation:BrowserCacheLocation.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new BrowserCacheManager(o,a,DEFAULT_CRYPTO_IMPLEMENTATION,e)};/*! @azure/msal-browser v3.28.1 2025-01-14 */function getAllAccounts(o,e,a,c){return o.verbose("getAllAccounts called"),a?e.getAllAccounts(c):[]}function getAccount(o,e,a){if(e.trace("getAccount called"),Object.keys(o).length===0)return e.warning("getAccount: No accountFilter provided"),null;const c=a.getAccountInfoFilteredBy(o);return c?(e.verbose("getAccount: Account matching provided filter found, returning"),c):(e.verbose("getAccount: No matching account found, returning null"),null)}function getAccountByUsername(o,e,a){if(e.trace("getAccountByUsername called"),!o)return e.warning("getAccountByUsername: No username provided"),null;const c=a.getAccountInfoFilteredBy({username:o});return c?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${o}`),c):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function getAccountByHomeId(o,e,a){if(e.trace("getAccountByHomeId called"),!o)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const c=a.getAccountInfoFilteredBy({homeAccountId:o});return c?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${o}`),c):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function getAccountByLocalId(o,e,a){if(e.trace("getAccountByLocalId called"),!o)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const c=a.getAccountInfoFilteredBy({localAccountId:o});return c?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${o}`),c):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function setActiveAccount(o,e){e.setActiveAccount(o)}function getActiveAccount(o){return o.getActiveAccount()}/*! @azure/msal-browser v3.28.1 2025-01-14 */const EventType={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.28.1 2025-01-14 */class EventHandler{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Logger({})}addEventCallback(e,a,c){if(typeof window<"u"){const j=c||createGuid();return this.eventCallbacks.has(j)?(this.logger.error(`Event callback with id: ${j} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(j,[e,a||[]]),this.logger.verbose(`Event callback registered with id: ${j}`),j)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,a,c,j){if(typeof window<"u"){const h={eventType:e,interactionType:a||null,payload:c||null,error:j||null,timestamp:Date.now()};this.eventCallbacks.forEach(([et,ot],st)=>{(ot.length===0||ot.includes(e))&&(this.logger.verbose(`Emitting event to callback ${st}: ${e}`),et.apply(null,[h]))})}}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class BaseInteractionClient{constructor(e,a,c,j,h,et,ot,st,lt){this.config=e,this.browserStorage=a,this.browserCrypto=c,this.networkClient=this.config.system.networkClient,this.eventHandler=h,this.navigationClient=et,this.nativeMessageHandler=st,this.correlationId=lt||createNewGuid(),this.logger=j.clone(BrowserConstants.MSAL_SKU,version$2,this.correlationId),this.performanceClient=ot}async clearCacheOnLogout(e){if(e){AccountEntity.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(AccountEntity.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const a=e||this.config.auth.redirectUri;return UrlString.getAbsoluteUrl(a,getCurrentUri())}initializeServerTelemetryManager(e,a){this.logger.verbose("initializeServerTelemetryManager called");const c={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:a||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new ServerTelemetryManager(c,this.browserStorage)}async getDiscoveredAuthority(e){const{account:a}=e,c=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const j={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},h=e.requestAuthority||this.config.auth.authority,et=c!=null&&c.length?c==="true":this.config.auth.instanceAware,ot=a&&et?this.config.auth.authority.replace(UrlString.getDomainFromUrl(h),a.environment):h,st=Authority.generateAuthority(ot,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),lt=await invokeAsync(createDiscoveredInstance,PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(st,this.config.system.networkClient,this.browserStorage,j,this.logger,this.correlationId,this.performanceClient);if(a&&!lt.isAlias(a.environment))throw createClientConfigurationError(authorityMismatch);return lt}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const RANDOM_BYTE_ARR_LENGTH=32;async function generatePkceCodes(o,e,a){o.addQueueMeasurement(PerformanceEvents.GeneratePkceCodes,a);const c=invoke(generateCodeVerifier,PerformanceEvents.GenerateCodeVerifier,e,o,a)(o,e,a),j=await invokeAsync(generateCodeChallengeFromVerifier,PerformanceEvents.GenerateCodeChallengeFromVerifier,e,o,a)(c,o,e,a);return{verifier:c,challenge:j}}function generateCodeVerifier(o,e,a){try{const c=new Uint8Array(RANDOM_BYTE_ARR_LENGTH);return invoke(getRandomValues,PerformanceEvents.GetRandomValues,e,o,a)(c),urlEncodeArr(c)}catch{throw createBrowserAuthError(pkceNotCreated)}}async function generateCodeChallengeFromVerifier(o,e,a,c){e.addQueueMeasurement(PerformanceEvents.GenerateCodeChallengeFromVerifier,c);try{const j=await invokeAsync(sha256Digest,PerformanceEvents.Sha256Digest,a,e,c)(o,e,c);return urlEncodeArr(new Uint8Array(j))}catch{throw createBrowserAuthError(pkceNotCreated)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */async function initializeBaseRequest(o,e,a,c){a.addQueueMeasurement(PerformanceEvents.InitializeBaseRequest,o.correlationId);const j=o.authority||e.auth.authority,h=[...o&&o.scopes||[]],et={...o,correlationId:o.correlationId,authority:j,scopes:h};if(!et.authenticationScheme)et.authenticationScheme=AuthenticationScheme.BEARER,c.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(et.authenticationScheme===AuthenticationScheme.SSH){if(!o.sshJwk)throw createClientConfigurationError(missingSshJwk);if(!o.sshKid)throw createClientConfigurationError(missingSshKid)}c.verbose(`Authentication Scheme set to "${et.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&o.claims&&!StringUtils.isEmptyObj(o.claims)&&(et.requestedClaimsHash=await hashString(o.claims)),et}async function initializeSilentRequest(o,e,a,c,j){c.addQueueMeasurement(PerformanceEvents.InitializeSilentRequest,o.correlationId);const h=await invokeAsync(initializeBaseRequest,PerformanceEvents.InitializeBaseRequest,j,c,o.correlationId)(o,a,c,j);return{...o,...h,account:e,forceRefresh:o.forceRefresh||!1}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class StandardInteractionClient extends BaseInteractionClient{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const a=await invokeAsync(generatePkceCodes,PerformanceEvents.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),c={...e,redirectUri:e.redirectUri,code:Constants$1.EMPTY_STRING,codeVerifier:a.verifier};return e.codeChallenge=a.challenge,e.codeChallengeMethod=Constants$1.S256_CODE_CHALLENGE_METHOD,c}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const a={correlationId:this.correlationId||createNewGuid(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const c=this.getLogoutHintFromIdTokenClaims(e.account);c&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),a.logoutHint=c)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",a.correlationId),a.postLogoutRedirectUri=UrlString.getAbsoluteUrl(e.postLogoutRedirectUri,getCurrentUri())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",a.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",a.correlationId),a.postLogoutRedirectUri=UrlString.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,getCurrentUri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",a.correlationId),a.postLogoutRedirectUri=UrlString.getAbsoluteUrl(getCurrentUri(),getCurrentUri())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",a.correlationId),a}getLogoutHintFromIdTokenClaims(e){const a=e.idTokenClaims;if(a){if(a.login_hint)return a.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const a=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new AuthorizationCodeClient(a,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:a,requestAuthority:c,requestAzureCloudOptions:j,requestExtraQueryParameters:h,account:et}=e;this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.correlationId);const ot=await invokeAsync(this.getDiscoveredAuthority.bind(this),PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:c,requestAzureCloudOptions:j,requestExtraQueryParameters:h,account:et}),st=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:ot,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:st.loggerCallback,piiLoggingEnabled:st.piiLoggingEnabled,logLevel:st.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:BrowserConstants.MSAL_SKU,version:version$2,cpu:Constants$1.EMPTY_STRING,os:Constants$1.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,a){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const c=this.getRedirectUri(e.redirectUri),j={interactionType:a},h=ProtocolUtils.setRequestState(this.browserCrypto,e&&e.state||Constants$1.EMPTY_STRING,j),ot={...await invokeAsync(initializeBaseRequest,PerformanceEvents.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:c,state:h,nonce:e.nonce||createNewGuid(),responseMode:this.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return ot;const st=e.account||this.browserStorage.getActiveAccount();if(st&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${st.homeAccountId}`,this.correlationId),ot.account=st),!ot.loginHint&&!st){const lt=this.browserStorage.getLegacyLoginHint();lt&&(ot.loginHint=lt)}return ot}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const contentError="ContentError",userSwitch="user_switch";/*! @azure/msal-browser v3.28.1 2025-01-14 */const USER_INTERACTION_REQUIRED="USER_INTERACTION_REQUIRED",USER_CANCEL="USER_CANCEL",NO_NETWORK="NO_NETWORK",PERSISTENT_ERROR="PERSISTENT_ERROR",DISABLED="DISABLED",ACCOUNT_UNAVAILABLE="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.28.1 2025-01-14 */const INVALID_METHOD_ERROR=-2147186943,NativeAuthErrorMessages={[userSwitch]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class NativeAuthError extends AuthError{constructor(e,a,c){super(e,a),Object.setPrototypeOf(this,NativeAuthError.prototype),this.name="NativeAuthError",this.ext=c}}function isFatalNativeAuthError(o){if(o.ext&&o.ext.status&&(o.ext.status===PERSISTENT_ERROR||o.ext.status===DISABLED)||o.ext&&o.ext.error&&o.ext.error===INVALID_METHOD_ERROR)return!0;switch(o.errorCode){case contentError:return!0;default:return!1}}function createNativeAuthError(o,e,a){if(a&&a.status)switch(a.status){case ACCOUNT_UNAVAILABLE:return createInteractionRequiredAuthError(nativeAccountUnavailable);case USER_INTERACTION_REQUIRED:return new InteractionRequiredAuthError(o,e);case USER_CANCEL:return createBrowserAuthError(userCancelled);case NO_NETWORK:return createBrowserAuthError(noNetworkConnectivity)}return new NativeAuthError(o,NativeAuthErrorMessages[o]||e,a)}/*! @azure/msal-browser v3.28.1 2025-01-14 */class SilentCacheClient extends StandardInteractionClient{async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentCacheClientAcquireToken,e.correlationId);const a=this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow),c=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),j=new SilentFlowClient(c,this.performanceClient);this.logger.verbose("Silent auth client created");try{const et=(await invokeAsync(j.acquireCachedToken.bind(j),PerformanceEvents.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),et}catch(h){throw h instanceof BrowserAuthError&&h.errorCode===cryptoKeyNotFound&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),h}}logout(e){this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(a==null?void 0:a.account)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class NativeInteractionClient extends BaseInteractionClient{constructor(e,a,c,j,h,et,ot,st,lt,nt,gt,dt){var vt;super(e,a,c,j,h,et,st,lt,dt),this.apiId=ot,this.accountId=nt,this.nativeMessageHandler=lt,this.nativeStorageManager=gt,this.silentCacheClient=new SilentCacheClient(e,this.nativeStorageManager,c,j,h,et,st,lt,dt),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const mt=this.nativeMessageHandler.getExtensionId()===NativeConstants.PREFERRED_EXTENSION_ID?"chrome":(vt=this.nativeMessageHandler.getExtensionId())!=null&&vt.length?"unknown":void 0;this.skus=ServerTelemetryManager.makeExtraSkuString({libraryName:BrowserConstants.MSAL_SKU,libraryVersion:version$2,extensionName:mt,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[X_CLIENT_EXTRA_SKU]:this.skus}}async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const a=this.performanceClient.startMeasurement(PerformanceEvents.NativeInteractionClientAcquireToken,e.correlationId),c=nowSeconds();try{const j=await this.initializeNativeRequest(e);try{const lt=await this.acquireTokensFromCache(this.accountId,j);return a.end({success:!0,isNativeBroker:!1,fromCache:!0}),lt}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...h}=j,et={method:NativeExtensionMethod.GetToken,request:h},ot=await this.nativeMessageHandler.sendMessage(et),st=this.validateNativeResponse(ot);return await this.handleNativeResponse(st,j,c).then(lt=>(a.end({success:!0,isNativeBroker:!0,requestId:lt.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),lt)).catch(lt=>{throw a.end({success:!1,errorCode:lt.errorCode,subErrorCode:lt.subError,isNativeBroker:!0}),lt})}catch(j){throw j instanceof NativeAuthError&&this.serverTelemetryManager.setNativeBrokerErrorCode(j.errorCode),j}}createSilentCacheRequest(e,a){return{authority:e.authority,correlationId:this.correlationId,scopes:ScopeSet.fromString(e.scope).asArray(),account:a,forceRefresh:!1}}async acquireTokensFromCache(e,a){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),createClientAuthError(noAccountFound);const c=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!c)throw createClientAuthError(noAccountFound);try{const j=this.createSilentCacheRequest(a,c),h=await this.silentCacheClient.acquireToken(j),et={...c,idTokenClaims:h==null?void 0:h.idTokenClaims,idToken:h==null?void 0:h.idToken};return{...h,account:et}}catch(j){throw j}}async acquireTokenRedirect(e,a){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...c}=e;delete c.onRedirectNavigate;const j=await this.initializeNativeRequest(c),h={method:NativeExtensionMethod.GetToken,request:j};try{const st=await this.nativeMessageHandler.sendMessage(h);this.validateNativeResponse(st)}catch(st){if(st instanceof NativeAuthError&&(this.serverTelemetryManager.setNativeBrokerErrorCode(st.errorCode),isFatalNativeAuthError(st)))throw st}this.browserStorage.setTemporaryCache(TemporaryCacheKeys.NATIVE_REQUEST,JSON.stringify(j),!0);const et={apiId:ApiId.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},ot=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);a.end({success:!0}),await this.navigationClient.navigateExternal(ot,et)}async handleRedirectPromise(e,a){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const c=this.browserStorage.getCachedNativeRequest();if(!c)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&a&&(e==null||e.addFields({errorCode:"no_cached_request"},a)),null;const{prompt:j,...h}=c;j&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(TemporaryCacheKeys.NATIVE_REQUEST));const et={method:NativeExtensionMethod.GetToken,request:h},ot=nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const st=await this.nativeMessageHandler.sendMessage(et);this.validateNativeResponse(st);const lt=this.handleNativeResponse(st,h,ot);this.browserStorage.setInteractionInProgress(!1);const nt=await lt;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),nt}catch(st){throw this.browserStorage.setInteractionInProgress(!1),st}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,a,c){var nt;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const j=extractTokenClaims(e.id_token,base64Decode),h=this.createHomeAccountIdentifier(e,j),et=(nt=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:a.accountId}))==null?void 0:nt.homeAccountId;if(h!==et&&e.account.id!==a.accountId)throw createNativeAuthError(userSwitch);const ot=await this.getDiscoveredAuthority({requestAuthority:a.authority}),st=buildAccountToCache(this.browserStorage,ot,h,base64Decode,j,e.client_info,void 0,j.tid,void 0,e.account.id,this.logger),lt=await this.generateAuthenticationResult(e,a,j,st,ot.canonicalAuthority,c);return this.cacheAccount(st),this.cacheNativeTokens(e,a,h,j,e.access_token,lt.tenantId,c),lt}createHomeAccountIdentifier(e,a){return AccountEntity.generateHomeAccountId(e.client_info||Constants$1.EMPTY_STRING,AuthorityType.Default,this.logger,this.browserCrypto,a)}generateScopes(e,a){return e.scope?ScopeSet.fromString(e.scope):ScopeSet.fromString(a.scope)}async generatePopAccessToken(e,a){if(a.tokenType===AuthenticationScheme.POP&&a.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const c=new PopTokenGenerator(this.browserCrypto),j={resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,shrNonce:a.shrNonce};if(!a.keyId)throw createClientAuthError(keyIdMissing);return c.signPopToken(e.access_token,a.keyId,j)}else return e.access_token}async generateAuthenticationResult(e,a,c,j,h,et){const ot=this.addTelemetryFromNativeResponse(e),st=e.scope?ScopeSet.fromString(e.scope):ScopeSet.fromString(a.scope),lt=e.account.properties||{},nt=lt.UID||c.oid||c.sub||Constants$1.EMPTY_STRING,gt=lt.TenantId||c.tid||Constants$1.EMPTY_STRING,dt=updateAccountTenantProfileData(j.getAccountInfo(),void 0,c,e.id_token);dt.nativeAccountId!==e.account.id&&(dt.nativeAccountId=e.account.id);const mt=await this.generatePopAccessToken(e,a),vt=a.tokenType===AuthenticationScheme.POP?AuthenticationScheme.POP:AuthenticationScheme.BEARER;return{authority:h,uniqueId:nt,tenantId:gt,scopes:st.asArray(),account:dt,idToken:e.id_token,idTokenClaims:c,accessToken:mt,fromCache:ot?this.isResponseFromCache(ot):!1,expiresOn:new Date(Number(et+e.expires_in)*1e3),tokenType:vt,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(a=>{this.logger.error(`Error occurred while removing account context from browser storage. ${a}`)})}cacheNativeTokens(e,a,c,j,h,et,ot){const st=createIdTokenEntity(c,a.authority,e.id_token||"",a.clientId,j.tid||""),lt=a.tokenType===AuthenticationScheme.POP?Constants$1.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,nt=ot+lt,gt=this.generateScopes(e,a),dt=createAccessTokenEntity(c,a.authority,h,a.clientId,j.tid||et,gt.printScopes(),nt,0,base64Decode,void 0,a.tokenType,void 0,a.keyId),mt={idToken:st,accessToken:dt};this.nativeStorageManager.saveCacheRecord(mt,a.storeInCache)}addTelemetryFromNativeResponse(e){const a=this.getMATSFromResponse(e);return a?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:a.broker_version,matsAccountJoinOnStart:a.account_join_on_start,matsAccountJoinOnEnd:a.account_join_on_end,matsDeviceJoin:a.device_join,matsPromptBehavior:a.prompt_behavior,matsApiErrorCode:a.api_error_code,matsUiVisible:a.ui_visible,matsSilentCode:a.silent_code,matsSilentBiSubCode:a.silent_bi_sub_code,matsSilentMessage:a.silent_message,matsSilentStatus:a.silent_status,matsHttpStatus:a.http_status,matsHttpEventCount:a.http_event_count},this.correlationId),a):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw createAuthError(unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const a=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:a,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const c=new UrlString(a);c.validateAsUri();const{scopes:j,...h}=e,et=new ScopeSet(j||[]);et.appendScopes(OIDC_DEFAULT_SCOPES);const ot=()=>{switch(this.apiId){case ApiId.ssoSilent:case ApiId.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),PromptValue.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case PromptValue.NONE:case PromptValue.CONSENT:case PromptValue.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),createBrowserAuthError(nativePromptNotSupported)}},st={...h,accountId:this.accountId,clientId:this.config.auth.clientId,authority:c.urlString,scope:et.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:ot(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(st.signPopToken&&e.popKid)throw createBrowserAuthError(invalidPopTokenRequest);if(this.handleExtraBrokerParams(st),st.extraParameters=st.extraParameters||{},st.extraParameters.telemetry=NativeConstants.MATS_TELEMETRY,e.authenticationScheme===AuthenticationScheme.POP){const lt={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},nt=new PopTokenGenerator(this.browserCrypto);let gt;if(st.keyId)gt=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:st.keyId})),st.signPopToken=!1;else{const dt=await invokeAsync(nt.generateCnf.bind(nt),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(lt,this.logger);gt=dt.reqCnfString,st.keyId=dt.kid,st.signPopToken=!0}st.reqCnf=gt}return this.addRequestSKUs(st),st}handleExtraBrokerParams(e){var h;const a=e.extraParameters&&e.extraParameters.hasOwnProperty(BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(CLIENT_ID);if(!e.embeddedClientId&&!a)return;let c="";const j=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,c=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[BROKER_REDIRECT_URI],c=e.extraParameters[CLIENT_ID]),e.extraParameters={child_client_id:c,child_redirect_uri:j},(h=this.performanceClient)==null||h.addFields({embeddedClientId:c,embeddedRedirectUri:j},e.correlationId)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class NativeMessageHandler{constructor(e,a,c,j){this.logger=e,this.handshakeTimeoutMs=a,this.extensionId=j,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=c,this.handshakeEvent=c.startMeasurement(PerformanceEvents.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const a={channel:NativeConstants.CHANNEL_ID,extensionId:this.extensionId,responseId:createNewGuid(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(a)}`),this.messageChannel.port1.postMessage(a),new Promise((c,j)=>{this.resolvers.set(a.responseId,{resolve:c,reject:j})})}static async createProvider(e,a,c){e.trace("NativeMessageHandler - createProvider called.");try{const j=new NativeMessageHandler(e,a,c,NativeConstants.PREFERRED_EXTENSION_ID);return await j.sendHandshakeRequest(),j}catch{const h=new NativeMessageHandler(e,a,c);return await h.sendHandshakeRequest(),h}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:NativeConstants.CHANNEL_ID,extensionId:this.extensionId,responseId:createNewGuid(),body:{method:NativeExtensionMethod.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=a=>{this.onChannelMessage(a)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((a,c)=>{this.handshakeResolvers.set(e.responseId,{resolve:a,reject:c}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),c(createBrowserAuthError(nativeHandshakeTimeout)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const a=e.data;if(!(!a.channel||a.channel!==NativeConstants.CHANNEL_ID)&&!(a.extensionId&&a.extensionId!==this.extensionId)&&a.body.method===NativeExtensionMethod.HandshakeRequest){const c=this.handshakeResolvers.get(a.responseId);if(!c){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${a.responseId}`);return}this.logger.verbose(a.extensionId?`Extension with id: ${a.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),c.reject(createBrowserAuthError(nativeExtensionNotInstalled))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const a=e.data,c=this.resolvers.get(a.responseId),j=this.handshakeResolvers.get(a.responseId);try{const h=a.body.method;if(h===NativeExtensionMethod.Response){if(!c)return;const et=a.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(et)}`),et.status!=="Success")c.reject(createNativeAuthError(et.code,et.description,et.ext));else if(et.result)et.result.code&&et.result.description?c.reject(createNativeAuthError(et.result.code,et.result.description,et.result.ext)):c.resolve(et.result);else throw createAuthError(unexpectedError,"Event does not contain result.");this.resolvers.delete(a.responseId)}else if(h===NativeExtensionMethod.HandshakeResponse){if(!j){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${a.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=a.extensionId,this.extensionVersion=a.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),j.resolve(),this.handshakeResolvers.delete(a.responseId)}}catch(h){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${h}`),this.logger.errorPii(`Unable to parse ${e}`),c?c.reject(h):j&&j.reject(h)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,a,c,j){if(a.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return a.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!c)return a.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(j)switch(j){case AuthenticationScheme.BEARER:case AuthenticationScheme.POP:return a.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return a.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class InteractionHandler{constructor(e,a,c,j,h){this.authModule=e,this.browserStorage=a,this.authCodeRequest=c,this.logger=j,this.performanceClient=h}async handleCodeResponse(e,a){this.performanceClient.addQueueMeasurement(PerformanceEvents.HandleCodeResponse,a.correlationId);let c;try{c=this.authModule.handleFragmentResponse(e,a.state)}catch(j){throw j instanceof ServerError&&j.subError===userCancelled?createBrowserAuthError(userCancelled):j}return invokeAsync(this.handleCodeResponseFromServer.bind(this),PerformanceEvents.HandleCodeResponseFromServer,this.logger,this.performanceClient,a.correlationId)(c,a)}async handleCodeResponseFromServer(e,a,c=!0){if(this.performanceClient.addQueueMeasurement(PerformanceEvents.HandleCodeResponseFromServer,a.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await invokeAsync(this.authModule.updateAuthority.bind(this.authModule),PerformanceEvents.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,a.correlationId)(e.cloud_instance_host_name,a.correlationId),c&&(e.nonce=a.nonce||void 0),e.state=a.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const h=this.createCcsCredentials(a);h&&(this.authCodeRequest.ccsCredential=h)}return await invokeAsync(this.authModule.acquireToken.bind(this.authModule),PerformanceEvents.AuthClientAcquireToken,this.logger,this.performanceClient,a.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:CcsCredentialType.UPN}:null}}/*! @azure/msal-browser v3.28.1 2025-01-14 */function deserializeResponse(o,e,a){const c=getDeserializedResponse(o);if(!c)throw stripLeadingHashOrQuery(o)?(a.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),a.errorPii(`The ${e} detected is: ${o}`),createBrowserAuthError(hashDoesNotContainKnownProperties)):(a.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),createBrowserAuthError(hashEmptyError));return c}function validateInteractionType(o,e,a){if(!o.state)throw createBrowserAuthError(noStateInHash);const c=extractBrowserRequestState(e,o.state);if(!c)throw createBrowserAuthError(unableToParseState);if(c.interactionType!==a)throw createBrowserAuthError(stateInteractionTypeMismatch)}/*! @azure/msal-browser v3.28.1 2025-01-14 */class PopupClient extends StandardInteractionClient{constructor(e,a,c,j,h,et,ot,st,lt,nt){super(e,a,c,j,h,et,ot,lt,nt),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=st}acquireToken(e){try{const c={popupName:this.generatePopupName(e.scopes||OIDC_DEFAULT_SCOPES,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,c)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),c.popup=this.openSizedPopup("about:blank",c),this.acquireTokenPopupAsync(e,c))}catch(a){return Promise.reject(a)}}logout(e){try{this.logger.verbose("logoutPopup called");const a=this.initializeLogoutRequest(e),c={popupName:this.generateLogoutPopupName(a),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},j=e&&e.authority,h=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(a,c,j,h)):(this.logger.verbose("asyncPopup set to false, opening popup"),c.popup=this.openSizedPopup("about:blank",c),this.logoutPopupAsync(a,c,j,h))}catch(a){return Promise.reject(a)}}async acquireTokenPopupAsync(e,a){var h;this.logger.verbose("acquireTokenPopupAsync called");const c=this.initializeServerTelemetryManager(ApiId.acquireTokenPopup),j=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,InteractionType.Popup);preconnect(j.authority);try{const et=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(j),ot=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:j.authority,requestAzureCloudOptions:j.azureCloudOptions,requestExtraQueryParameters:j.extraQueryParameters,account:j.account}),st=NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let lt;st&&(lt=this.performanceClient.startMeasurement(PerformanceEvents.FetchAccountIdWithNativeBroker,e.correlationId));const nt=await ot.getAuthCodeUrl({...j,nativeBroker:st}),gt=new InteractionHandler(ot,this.browserStorage,et,this.logger,this.performanceClient),dt=this.initiateAuthRequest(nt,a);this.eventHandler.emitEvent(EventType.POPUP_OPENED,InteractionType.Popup,{popupWindow:dt},null);const mt=await this.monitorPopupForHash(dt,a.popupWindowParent),vt=invoke(deserializeResponse,PerformanceEvents.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(mt,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(ThrottlingUtils.removeThrottle(this.browserStorage,this.config.auth.clientId,et),vt.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),lt&&lt.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const bt=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,vt.accountId,this.nativeStorage,j.correlationId),{userRequestState:ht}=ProtocolUtils.parseRequestState(this.browserCrypto,j.state);return await bt.acquireToken({...j,state:ht,prompt:void 0})}return await gt.handleCodeResponse(vt,j)}catch(et){throw(h=a.popup)==null||h.close(),et instanceof AuthError&&(et.setCorrelationId(this.correlationId),c.cacheFailedRequest(et)),et}}async logoutPopupAsync(e,a,c,j){var et,ot,st,lt;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(EventType.LOGOUT_START,InteractionType.Popup,e);const h=this.initializeServerTelemetryManager(ApiId.logoutPopup);try{await this.clearCacheOnLogout(e.account);const nt=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:h,requestAuthority:c,account:e.account||void 0});try{nt.authority.endSessionEndpoint}catch{if((et=e.account)!=null&&et.homeAccountId&&e.postLogoutRedirectUri&&nt.authority.protocolMode===ProtocolMode.OIDC){if(this.browserStorage.removeAccount((ot=e.account)==null?void 0:ot.homeAccountId),this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Popup,e),j){const mt={apiId:ApiId.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},vt=UrlString.getAbsoluteUrl(j,getCurrentUri());await this.navigationClient.navigateInternal(vt,mt)}(st=a.popup)==null||st.close();return}}const gt=nt.getLogoutUri(e);this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Popup,e);const dt=this.openPopup(gt,a);if(this.eventHandler.emitEvent(EventType.POPUP_OPENED,InteractionType.Popup,{popupWindow:dt},null),await this.monitorPopupForHash(dt,a.popupWindowParent).catch(()=>{}),j){const mt={apiId:ApiId.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},vt=UrlString.getAbsoluteUrl(j,getCurrentUri());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${vt}`),await this.navigationClient.navigateInternal(vt,mt)}else this.logger.verbose("No main window navigation requested")}catch(nt){throw(lt=a.popup)==null||lt.close(),nt instanceof AuthError&&(nt.setCorrelationId(this.correlationId),h.cacheFailedRequest(nt)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(EventType.LOGOUT_FAILURE,InteractionType.Popup,null,nt),this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Popup),nt}this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Popup)}initiateAuthRequest(e,a){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,a);throw this.logger.error("Navigate url is empty"),createBrowserAuthError(emptyNavigateUri)}monitorPopupForHash(e,a){return new Promise((c,j)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const h=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(h),j(createBrowserAuthError(userCancelled));return}let et="";try{et=e.location.href}catch{}if(!et||et==="about:blank")return;clearInterval(h);let ot="";const st=this.config.auth.OIDCOptions.serverResponseType;e&&(st===ServerResponseType.QUERY?ot=e.location.search:ot=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),c(ot)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,a)})}openPopup(e,a){try{let c;if(a.popup?(c=a.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),c.location.assign(e)):typeof a.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),c=this.openSizedPopup(e,a)),!c)throw createBrowserAuthError(emptyWindowError);return c.focus&&c.focus(),this.currentWindow=c,a.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),c}catch(c){throw this.logger.error("error opening popup "+c.message),this.browserStorage.setInteractionInProgress(!1),createBrowserAuthError(popupWindowError)}}openSizedPopup(e,{popupName:a,popupWindowAttributes:c,popupWindowParent:j}){var mt,vt,tt,bt;const h=j.screenLeft?j.screenLeft:j.screenX,et=j.screenTop?j.screenTop:j.screenY,ot=j.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,st=j.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let lt=(mt=c.popupSize)==null?void 0:mt.width,nt=(vt=c.popupSize)==null?void 0:vt.height,gt=(tt=c.popupPosition)==null?void 0:tt.top,dt=(bt=c.popupPosition)==null?void 0:bt.left;return(!lt||lt<0||lt>ot)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),lt=BrowserConstants.POPUP_WIDTH),(!nt||nt<0||nt>st)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),nt=BrowserConstants.POPUP_HEIGHT),(!gt||gt<0||gt>st)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),gt=Math.max(0,st/2-BrowserConstants.POPUP_HEIGHT/2+et)),(!dt||dt<0||dt>ot)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),dt=Math.max(0,ot/2-BrowserConstants.POPUP_WIDTH/2+h)),j.open(e,a,`width=${lt}, height=${nt}, top=${gt}, left=${dt}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(InteractionType.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,a){e.close(),a.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,a){return`${BrowserConstants.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${a}.${this.correlationId}`}generateLogoutPopupName(e){const a=e.account&&e.account.homeAccountId;return`${BrowserConstants.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a}.${this.correlationId}`}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class RedirectHandler{constructor(e,a,c,j,h){this.authModule=e,this.browserStorage=a,this.authCodeRequest=c,this.logger=j,this.performanceClient=h}async initiateAuthRequest(e,a){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){a.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,a.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(TemporaryCacheKeys.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const c={apiId:ApiId.acquireTokenRedirect,timeout:a.redirectTimeout,noHistory:!1};if(typeof a.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),a.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await a.navigationClient.navigateExternal(e,c);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await a.navigationClient.navigateExternal(e,c);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),createBrowserAuthError(emptyNavigateUri)}async handleCodeResponse(e,a){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const c=this.browserStorage.generateStateKey(a),j=this.browserStorage.getTemporaryCache(c);if(!j)throw createClientAuthError(stateNotFound,"Cached State");let h;try{h=this.authModule.handleFragmentResponse(e,j)}catch(lt){throw lt instanceof ServerError&&lt.subError===userCancelled?createBrowserAuthError(userCancelled):lt}const et=this.browserStorage.generateNonceKey(j),ot=this.browserStorage.getTemporaryCache(et);if(this.authCodeRequest.code=h.code,h.cloud_instance_host_name&&await invokeAsync(this.authModule.updateAuthority.bind(this.authModule),PerformanceEvents.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(h.cloud_instance_host_name,this.authCodeRequest.correlationId),h.nonce=ot||void 0,h.state=j,h.client_info)this.authCodeRequest.clientInfo=h.client_info;else{const lt=this.checkCcsCredentials();lt&&(this.authCodeRequest.ccsCredential=lt)}const st=await this.authModule.acquireToken(this.authCodeRequest,h);return this.browserStorage.cleanRequestByState(a),st}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}/*! @azure/msal-browser v3.28.1 2025-01-14 */function getNavigationType(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const o=window.performance.getEntriesByType("navigation"),e=o.length?o[0]:void 0;return e==null?void 0:e.type}class RedirectClient extends StandardInteractionClient{constructor(e,a,c,j,h,et,ot,st,lt,nt){super(e,a,c,j,h,et,ot,lt,nt),this.nativeStorage=st}async acquireToken(e){const a=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,InteractionType.Redirect);this.browserStorage.updateCacheEntries(a.state,a.nonce,a.authority,a.loginHint||"",a.account||null);const c=this.initializeServerTelemetryManager(ApiId.acquireTokenRedirect),j=h=>{h.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(a.state),this.eventHandler.emitEvent(EventType.RESTORE_FROM_BFCACHE,InteractionType.Redirect))};try{const h=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(a),et=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),ot=new RedirectHandler(et,this.browserStorage,h,this.logger,this.performanceClient),st=await et.getAuthCodeUrl({...a,nativeBroker:NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),lt=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${lt}`),window.addEventListener("pageshow",j),await ot.initiateAuthRequest(st,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:lt,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(h){throw h instanceof AuthError&&(h.setCorrelationId(this.correlationId),c.cacheFailedRequest(h)),window.removeEventListener("pageshow",j),this.browserStorage.cleanRequestByState(a.state),h}}async handleRedirectPromise(e="",a){const c=this.initializeServerTelemetryManager(ApiId.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[j,h]=this.getRedirectResponse(e||"");if(!j)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(InteractionType.Redirect),getNavigationType()!=="back_forward"?a.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const et=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,!0)||Constants$1.EMPTY_STRING,ot=UrlString.removeHashFromUrl(et),st=UrlString.removeHashFromUrl(window.location.href);if(ot===st&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),et.indexOf("#")>-1&&replaceHash(et),await this.handleResponse(j,c);if(this.config.auth.navigateToLoginRequestUrl){if(!isInIframe()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(TemporaryCacheKeys.URL_HASH,h,!0);const lt={apiId:ApiId.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let nt=!0;if(!et||et==="null"){const gt=getHomepage();this.browserStorage.setTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,gt,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),nt=await this.navigationClient.navigateInternal(gt,lt)}else this.logger.verbose(`Navigating to loginRequestUrl: ${et}`),nt=await this.navigationClient.navigateInternal(et,lt);if(!nt)return await this.handleResponse(j,c)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(j,c);return null}catch(j){throw j instanceof AuthError&&(j.setCorrelationId(this.correlationId),c.cacheFailedRequest(j)),this.browserStorage.cleanRequestByInteractionType(InteractionType.Redirect),j}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let a=e;a||(this.config.auth.OIDCOptions.serverResponseType===ServerResponseType.QUERY?a=window.location.search:a=window.location.hash);let c=getDeserializedResponse(a);if(c){try{validateInteractionType(c,this.browserCrypto,InteractionType.Redirect)}catch(h){return h instanceof AuthError&&this.logger.error(`Interaction type validation failed due to ${h.errorCode}: ${h.errorMessage}`),[null,""]}return clearHash(window),this.logger.verbose("Hash contains known properties, returning response hash"),[c,a]}const j=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(TemporaryCacheKeys.URL_HASH)),j&&(c=getDeserializedResponse(j),c)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[c,j]):[null,""]}async handleResponse(e,a){const c=e.state;if(!c)throw createBrowserAuthError(noStateInHash);const j=this.browserStorage.getCachedRequest(c);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const st=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,j.correlationId),{userRequestState:lt}=ProtocolUtils.parseRequestState(this.browserCrypto,c);return st.acquireToken({...j,state:lt,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(c)})}const h=this.browserStorage.getCachedAuthority(c);if(!h)throw createBrowserAuthError(noCachedAuthorityError);const et=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:h});return ThrottlingUtils.removeThrottle(this.browserStorage,this.config.auth.clientId,j),new RedirectHandler(et,this.browserStorage,j,this.logger,this.performanceClient).handleCodeResponse(e,c)}async logout(e){var j,h;this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(e),c=this.initializeServerTelemetryManager(ApiId.logout);try{this.eventHandler.emitEvent(EventType.LOGOUT_START,InteractionType.Redirect,e),await this.clearCacheOnLogout(a.account);const et={apiId:ApiId.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},ot=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(ot.authority.protocolMode===ProtocolMode.OIDC)try{ot.authority.endSessionEndpoint}catch{if((j=a.account)!=null&&j.homeAccountId){this.browserStorage.removeAccount((h=a.account)==null?void 0:h.homeAccountId),this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Redirect,a);return}}const st=ot.getLogoutUri(a);if(this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Redirect,a),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(st)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(st,et);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(st,et);return}}catch(et){throw et instanceof AuthError&&(et.setCorrelationId(this.correlationId),c.cacheFailedRequest(et)),this.eventHandler.emitEvent(EventType.LOGOUT_FAILURE,InteractionType.Redirect,null,et),this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Redirect),et}this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Redirect)}getRedirectStartPage(e){const a=e||window.location.href;return UrlString.getAbsoluteUrl(a,getCurrentUri())}}/*! @azure/msal-browser v3.28.1 2025-01-14 */async function initiateAuthRequest(o,e,a,c,j){if(e.addQueueMeasurement(PerformanceEvents.SilentHandlerInitiateAuthRequest,c),!o)throw a.info("Navigate url is empty"),createBrowserAuthError(emptyNavigateUri);return j?invokeAsync(loadFrame,PerformanceEvents.SilentHandlerLoadFrame,a,e,c)(o,j,e,c):invoke(loadFrameSync,PerformanceEvents.SilentHandlerLoadFrameSync,a,e,c)(o)}async function monitorIframeForHash(o,e,a,c,j,h,et){return c.addQueueMeasurement(PerformanceEvents.SilentHandlerMonitorIframeForHash,h),new Promise((ot,st)=>{e<DEFAULT_IFRAME_TIMEOUT_MS&&j.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${DEFAULT_IFRAME_TIMEOUT_MS}ms). This may result in timeouts.`);const lt=window.setTimeout(()=>{window.clearInterval(nt),st(createBrowserAuthError(monitorWindowTimeout))},e),nt=window.setInterval(()=>{let gt="";const dt=o.contentWindow;try{gt=dt?dt.location.href:""}catch{}if(!gt||gt==="about:blank")return;let mt="";dt&&(et===ServerResponseType.QUERY?mt=dt.location.search:mt=dt.location.hash),window.clearTimeout(lt),window.clearInterval(nt),ot(mt)},a)}).finally(()=>{invoke(removeHiddenIframe,PerformanceEvents.RemoveHiddenIframe,j,c,h)(o)})}function loadFrame(o,e,a,c){return a.addQueueMeasurement(PerformanceEvents.SilentHandlerLoadFrame,c),new Promise((j,h)=>{const et=createHiddenIframe();window.setTimeout(()=>{if(!et){h("Unable to load iframe");return}et.src=o,j(et)},e)})}function loadFrameSync(o){const e=createHiddenIframe();return e.src=o,e}function createHiddenIframe(){const o=document.createElement("iframe");return o.className="msalSilentIframe",o.style.visibility="hidden",o.style.position="absolute",o.style.width=o.style.height="0",o.style.border="0",o.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(o),o}function removeHiddenIframe(o){document.body===o.parentNode&&document.body.removeChild(o)}/*! @azure/msal-browser v3.28.1 2025-01-14 */class SilentIframeClient extends StandardInteractionClient{constructor(e,a,c,j,h,et,ot,st,lt,nt,gt){super(e,a,c,j,h,et,st,nt,gt),this.apiId=ot,this.nativeStorage=lt}async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const a={...e};a.prompt?a.prompt!==PromptValue.NONE&&a.prompt!==PromptValue.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${a.prompt} with ${PromptValue.NONE}`),a.prompt=PromptValue.NONE):a.prompt=PromptValue.NONE;const c=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(a,InteractionType.Silent);preconnect(c.authority);const j=this.initializeServerTelemetryManager(this.apiId);let h;try{return h=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:j,requestAuthority:c.authority,requestAzureCloudOptions:c.azureCloudOptions,requestExtraQueryParameters:c.extraQueryParameters,account:c.account}),await invokeAsync(this.silentTokenHelper.bind(this),PerformanceEvents.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(h,c)}catch(et){if(et instanceof AuthError&&(et.setCorrelationId(this.correlationId),j.cacheFailedRequest(et)),!h||!(et instanceof AuthError)||et.errorCode!==BrowserConstants.INVALID_GRANT_ERROR)throw et;this.performanceClient.addFields({retryError:et.errorCode},this.correlationId);const ot=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(a,InteractionType.Silent);return await invokeAsync(this.silentTokenHelper.bind(this),PerformanceEvents.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(h,ot)}}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}async silentTokenHelper(e,a){const c=a.correlationId;this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentIframeClientTokenHelper,c);const j=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,c)(a),h=await invokeAsync(e.getAuthCodeUrl.bind(e),PerformanceEvents.GetAuthCodeUrl,this.logger,this.performanceClient,c)({...a,nativeBroker:NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,a.authenticationScheme)}),et=new InteractionHandler(e,this.browserStorage,j,this.logger,this.performanceClient),ot=await invokeAsync(initiateAuthRequest,PerformanceEvents.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,c)(h,this.performanceClient,this.logger,c,this.config.system.navigateFrameWait),st=this.config.auth.OIDCOptions.serverResponseType,lt=await invokeAsync(monitorIframeForHash,PerformanceEvents.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,c)(ot,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,c,st),nt=invoke(deserializeResponse,PerformanceEvents.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(lt,st,this.logger);if(nt.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const gt=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,nt.accountId,this.browserStorage,c),{userRequestState:dt}=ProtocolUtils.parseRequestState(this.browserCrypto,a.state);return invokeAsync(gt.acquireToken.bind(gt),PerformanceEvents.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,c)({...a,state:dt,prompt:a.prompt||PromptValue.NONE})}return invokeAsync(et.handleCodeResponse.bind(et),PerformanceEvents.HandleCodeResponse,this.logger,this.performanceClient,c)(nt,a)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class SilentRefreshClient extends StandardInteractionClient{async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken,e.correlationId);const a=await invokeAsync(initializeBaseRequest,PerformanceEvents.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),c={...e,...a};e.redirectUri&&(c.redirectUri=this.getRedirectUri(e.redirectUri));const j=this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow),h=await this.createRefreshTokenClient({serverTelemetryManager:j,authorityUrl:c.authority,azureCloudOptions:c.azureCloudOptions,account:c.account});return invokeAsync(h.acquireTokenByRefreshToken.bind(h),PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(c).catch(et=>{throw et.setCorrelationId(this.correlationId),j.cacheFailedRequest(et),et})}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}async createRefreshTokenClient(e){const a=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new RefreshTokenClient(a,this.performanceClient)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class TokenCache{constructor(e,a,c,j){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=a,this.logger=c,this.cryptoObj=j}loadExternalTokens(e,a,c){if(!this.isBrowserEnvironment)throw createBrowserAuthError(nonBrowserEnvironment);const j=a.id_token?extractTokenClaims(a.id_token,base64Decode):void 0,h={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},et=e.authority?new Authority(Authority.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,h,this.logger,e.correlationId||createNewGuid()):void 0,ot=this.loadAccount(e,c.clientInfo||a.client_info||"",j,et),st=this.loadIdToken(a,ot.homeAccountId,ot.environment,ot.realm),lt=this.loadAccessToken(e,a,ot.homeAccountId,ot.environment,ot.realm,c),nt=this.loadRefreshToken(a,ot.homeAccountId,ot.environment);return this.generateAuthenticationResult(e,{account:ot,idToken:st,accessToken:lt,refreshToken:nt},j,et)}loadAccount(e,a,c,j){if(this.logger.verbose("TokenCache - loading account"),e.account){const st=AccountEntity.createFromAccountInfo(e.account);return this.storage.setAccount(st),st}else if(!j||!a&&!c)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),createBrowserAuthError(unableToLoadToken);const h=AccountEntity.generateHomeAccountId(a,j.authorityType,this.logger,this.cryptoObj,c),et=c==null?void 0:c.tid,ot=buildAccountToCache(this.storage,j,h,base64Decode,c,a,j.hostnameAndPort,et,void 0,void 0,this.logger);return this.storage.setAccount(ot),ot}loadIdToken(e,a,c,j){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const h=createIdTokenEntity(a,c,e.id_token,this.config.auth.clientId,j);return this.storage.setIdTokenCredential(h),h}loadAccessToken(e,a,c,j,h,et){if(a.access_token)if(a.expires_in){if(!a.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const ot=a.scope?ScopeSet.fromString(a.scope):new ScopeSet(e.scopes),st=et.expiresOn||a.expires_in+new Date().getTime()/1e3,lt=et.extendedExpiresOn||(a.ext_expires_in||a.expires_in)+new Date().getTime()/1e3,nt=createAccessTokenEntity(c,j,a.access_token,this.config.auth.clientId,h,ot.printScopes(),st,lt,base64Decode);return this.storage.setAccessTokenCredential(nt),nt}loadRefreshToken(e,a,c){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const j=createRefreshTokenEntity(a,c,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(j),j}generateAuthenticationResult(e,a,c,j){var nt,gt,dt;let h="",et=[],ot=null,st;a!=null&&a.accessToken&&(h=a.accessToken.secret,et=ScopeSet.fromString(a.accessToken.target).asArray(),ot=new Date(Number(a.accessToken.expiresOn)*1e3),st=new Date(Number(a.accessToken.extendedExpiresOn)*1e3));const lt=a.account;return{authority:j?j.canonicalAuthority:"",uniqueId:a.account.localAccountId,tenantId:a.account.realm,scopes:et,account:lt.getAccountInfo(),idToken:((nt=a.idToken)==null?void 0:nt.secret)||"",idTokenClaims:c||{},accessToken:h,fromCache:!0,expiresOn:ot,correlationId:e.correlationId||"",requestId:"",extExpiresOn:st,familyId:((gt=a.refreshToken)==null?void 0:gt.familyId)||"",tokenType:((dt=a==null?void 0:a.accessToken)==null?void 0:dt.tokenType)||"",state:e.state||"",cloudGraphHostName:lt.cloudGraphHostName||"",msGraphHost:lt.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class HybridSpaAuthorizationCodeClient extends AuthorizationCodeClient{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class SilentAuthCodeClient extends StandardInteractionClient{constructor(e,a,c,j,h,et,ot,st,lt,nt){super(e,a,c,j,h,et,st,lt,nt),this.apiId=ot}async acquireToken(e){if(!e.code)throw createBrowserAuthError(authCodeRequired);const a=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,InteractionType.Silent),c=this.initializeServerTelemetryManager(this.apiId);try{const j={...a,code:e.code},h=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:c,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),et=new HybridSpaAuthorizationCodeClient(h);this.logger.verbose("Auth code client created");const ot=new InteractionHandler(et,this.browserStorage,j,this.logger,this.performanceClient);return await invokeAsync(ot.handleCodeResponseFromServer.bind(ot),PerformanceEvents.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},a,!1)}catch(j){throw j instanceof AuthError&&(j.setCorrelationId(this.correlationId),c.cacheFailedRequest(j)),j}}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}}/*! @azure/msal-browser v3.28.1 2025-01-14 */function getAccountType(o){const e=o==null?void 0:o.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function preflightCheck(o,e){try{preflightCheck$1(o)}catch(a){throw e.end({success:!1},a),a}}class StandardController{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new CryptoOps(this.logger,this.performanceClient):DEFAULT_CRYPTO_IMPLEMENTATION,this.eventHandler=new EventHandler(this.logger),this.browserStorage=this.isBrowserEnvironment?new BrowserCacheManager(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,buildStaticAuthorityOptions(this.config.auth),this.performanceClient):DEFAULT_BROWSER_CACHE_MANAGER(this.config.auth.clientId,this.logger);const a={cacheLocation:BrowserCacheLocation.MemoryStorage,temporaryCacheLocation:BrowserCacheLocation.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new BrowserCacheManager(this.config.auth.clientId,a,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new TokenCache(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static async createController(e,a){const c=new StandardController(e);return await c.initialize(a),c}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(EventType.INITIALIZE_END);return}const a=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),c=this.config.system.allowNativeBroker,j=this.performanceClient.startMeasurement(PerformanceEvents.InitializeClientApplication,a);if(this.eventHandler.emitEvent(EventType.INITIALIZE_START),c)try{this.nativeExtensionProvider=await NativeMessageHandler.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(h){this.logger.verbose(h)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await invokeAsync(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),PerformanceEvents.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,a)(this.performanceClient,a)),this.initialized=!0,this.eventHandler.emitEvent(EventType.INITIALIZE_END),j.end({allowNativeBroker:c,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),blockAPICallsBeforeInitialize(this.initialized),this.isBrowserEnvironment){const a=e||"";let c=this.redirectResponse.get(a);return typeof c>"u"?(c=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(a,c),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),c}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const a=this.getAllAccounts(),c=this.browserStorage.getCachedNativeRequest(),j=c&&NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,h=j?c==null?void 0:c.correlationId:this.browserStorage.getTemporaryCache(TemporaryCacheKeys.CORRELATION_ID,!0)||"",et=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenRedirect,h);this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_START,InteractionType.Redirect);let ot;if(j&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const st=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,c.accountId,this.nativeInternalStorage,c.correlationId);ot=invokeAsync(st.handleRedirectPromise.bind(st),PerformanceEvents.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,et.event.correlationId)(this.performanceClient,et.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const st=this.createRedirectClient(h);ot=invokeAsync(st.handleRedirectPromise.bind(st),PerformanceEvents.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,et.event.correlationId)(e,et)}return ot.then(st=>(st?(a.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(EventType.LOGIN_SUCCESS,InteractionType.Redirect,st),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Redirect,st),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),et.end({success:!0,accountType:getAccountType(st.account)})):et.event.errorCode?et.end({success:!1}):et.discard(),this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_END,InteractionType.Redirect),st)).catch(st=>{const lt=st;throw a.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Redirect,null,lt):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Redirect,null,lt),this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_END,InteractionType.Redirect),et.end({success:!1},lt),st})}async acquireTokenRedirect(e){const a=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",a);const c=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenPreRedirect,a);c.add({accountType:getAccountType(e.account),scenarioId:e.scenarioId});const j=e.onRedirectNavigate;if(j)e.onRedirectNavigate=et=>{const ot=typeof j=="function"?j(et):void 0;return ot!==!1?c.end({success:!0}):c.discard(),ot};else{const et=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=ot=>{const st=typeof et=="function"?et(ot):void 0;return st!==!1?c.end({success:!0}):c.discard(),st}}const h=this.getAllAccounts().length>0;try{redirectPreflightCheck(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),h?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Redirect,e):this.eventHandler.emitEvent(EventType.LOGIN_START,InteractionType.Redirect,e);let et;return this.nativeExtensionProvider&&this.canUseNative(e)?et=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,a).acquireTokenRedirect(e,c).catch(st=>{if(st instanceof NativeAuthError&&isFatalNativeAuthError(st))return this.nativeExtensionProvider=void 0,this.createRedirectClient(a).acquireToken(e);if(st instanceof InteractionRequiredAuthError)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(a).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),st}):et=this.createRedirectClient(a).acquireToken(e),await et}catch(et){throw c.end({success:!1},et),h?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Redirect,null,et):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Redirect,null,et),et}}acquireTokenPopup(e){const a=this.getRequestCorrelationId(e),c=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenPopup,a);c.add({scenarioId:e.scenarioId,accountType:getAccountType(e.account)});try{this.logger.verbose("acquireTokenPopup called",a),preflightCheck(this.initialized,c),this.browserStorage.setInteractionInProgress(!0)}catch(et){return Promise.reject(et)}const j=this.getAllAccounts();j.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Popup,e):this.eventHandler.emitEvent(EventType.LOGIN_START,InteractionType.Popup,e);let h;return this.canUseNative(e)?h=this.acquireTokenNative({...e,correlationId:a},ApiId.acquireTokenPopup).then(et=>(this.browserStorage.setInteractionInProgress(!1),c.end({success:!0,isNativeBroker:!0,accountType:getAccountType(et.account)}),et)).catch(et=>{if(et instanceof NativeAuthError&&isFatalNativeAuthError(et))return this.nativeExtensionProvider=void 0,this.createPopupClient(a).acquireToken(e);if(et instanceof InteractionRequiredAuthError)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(a).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),et}):h=this.createPopupClient(a).acquireToken(e),h.then(et=>(j.length<this.getAllAccounts().length?this.eventHandler.emitEvent(EventType.LOGIN_SUCCESS,InteractionType.Popup,et):this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Popup,et),c.end({success:!0,accessTokenSize:et.accessToken.length,idTokenSize:et.idToken.length,accountType:getAccountType(et.account)}),et)).catch(et=>(j.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Popup,null,et):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Popup,null,et),c.end({success:!1},et),Promise.reject(et)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var h,et;const a=this.getRequestCorrelationId(e),c={...e,prompt:e.prompt,correlationId:a};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(PerformanceEvents.SsoSilent,a),(h=this.ssoSilentMeasurement)==null||h.add({scenarioId:e.scenarioId,accountType:getAccountType(e.account)}),preflightCheck(this.initialized,this.ssoSilentMeasurement),(et=this.ssoSilentMeasurement)==null||et.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",a),this.eventHandler.emitEvent(EventType.SSO_SILENT_START,InteractionType.Silent,c);let j;return this.canUseNative(c)?j=this.acquireTokenNative(c,ApiId.ssoSilent).catch(ot=>{if(ot instanceof NativeAuthError&&isFatalNativeAuthError(ot))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(c.correlationId).acquireToken(c);throw ot}):j=this.createSilentIframeClient(c.correlationId).acquireToken(c),j.then(ot=>{var st;return this.eventHandler.emitEvent(EventType.SSO_SILENT_SUCCESS,InteractionType.Silent,ot),(st=this.ssoSilentMeasurement)==null||st.end({success:!0,isNativeBroker:ot.fromNativeBroker,accessTokenSize:ot.accessToken.length,idTokenSize:ot.idToken.length,accountType:getAccountType(ot.account)}),ot}).catch(ot=>{var st;throw this.eventHandler.emitEvent(EventType.SSO_SILENT_FAILURE,InteractionType.Silent,null,ot),(st=this.ssoSilentMeasurement)==null||st.end({success:!1},ot),ot}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const a=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",a);const c=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenByCode,a);preflightCheck(this.initialized,c),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_START,InteractionType.Silent,e),c.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw createBrowserAuthError(spaCodeAndNativeAccountIdPresent);if(e.code){const j=e.code;let h=this.hybridAuthCodeResponses.get(j);return h?(this.logger.verbose("Existing acquireTokenByCode request found",a),c.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",a),h=this.acquireTokenByCodeAsync({...e,correlationId:a}).then(et=>(this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_SUCCESS,InteractionType.Silent,et),this.hybridAuthCodeResponses.delete(j),c.end({success:!0,isNativeBroker:et.fromNativeBroker,accessTokenSize:et.accessToken.length,idTokenSize:et.idToken.length,accountType:getAccountType(et.account)}),et)).catch(et=>{throw this.hybridAuthCodeResponses.delete(j),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE,InteractionType.Silent,null,et),c.end({success:!1},et),et}),this.hybridAuthCodeResponses.set(j,h)),await h}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){const j=await this.acquireTokenNative({...e,correlationId:a},ApiId.acquireTokenByCode,e.nativeAccountId).catch(h=>{throw h instanceof NativeAuthError&&isFatalNativeAuthError(h)&&(this.nativeExtensionProvider=void 0),h});return c.end({accountType:getAccountType(j.account),success:!0}),j}else throw createBrowserAuthError(unableToAcquireTokenFromNativePlatform);else throw createBrowserAuthError(authCodeOrNativeAccountIdRequired)}catch(j){throw this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE,InteractionType.Silent,null,j),c.end({success:!1},j),j}}async acquireTokenByCodeAsync(e){var j;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenByCodeAsync,e.correlationId),(j=this.acquireTokenByCodeAsyncMeasurement)==null||j.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(h=>{var et;return(et=this.acquireTokenByCodeAsyncMeasurement)==null||et.end({success:!0,fromCache:h.fromCache,isNativeBroker:h.fromNativeBroker}),h}).catch(h=>{var et;throw(et=this.acquireTokenByCodeAsyncMeasurement)==null||et.end({success:!1},h),h}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,a){switch(this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenFromCache,e.correlationId),a){case CacheLookupPolicy.Default:case CacheLookupPolicy.AccessToken:case CacheLookupPolicy.AccessTokenAndRefreshToken:const c=this.createSilentCacheClient(e.correlationId);return invokeAsync(c.acquireToken.bind(c),PerformanceEvents.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw createClientAuthError(tokenRefreshRequired)}}async acquireTokenByRefreshToken(e,a){switch(this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenByRefreshToken,e.correlationId),a){case CacheLookupPolicy.Default:case CacheLookupPolicy.AccessTokenAndRefreshToken:case CacheLookupPolicy.RefreshToken:case CacheLookupPolicy.RefreshTokenAndNetwork:const c=this.createSilentRefreshClient(e.correlationId);return invokeAsync(c.acquireToken.bind(c),PerformanceEvents.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw createClientAuthError(tokenRefreshRequired)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenBySilentIframe,e.correlationId);const a=this.createSilentIframeClient(e.correlationId);return invokeAsync(a.acquireToken.bind(a),PerformanceEvents.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const a=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",a),this.logoutRedirect({correlationId:a,...e})}async logoutRedirect(e){const a=this.getRequestCorrelationId(e);return redirectPreflightCheck(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(a).logout(e)}logoutPopup(e){try{const a=this.getRequestCorrelationId(e);return preflightCheck$1(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(a).logout(e)}catch(a){return Promise.reject(a)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const a=this.getRequestCorrelationId(e);return this.createSilentCacheClient(a).logout(e)}getAllAccounts(e){return getAllAccounts(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return getAccount(e,this.logger,this.browserStorage)}getAccountByUsername(e){return getAccountByUsername(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return getAccountByHomeId(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return getAccountByLocalId(e,this.logger,this.browserStorage)}setActiveAccount(e){setActiveAccount(e,this.browserStorage)}getActiveAccount(){return getActiveAccount(this.browserStorage)}async hydrateCache(e,a){this.logger.verbose("hydrateCache called");const c=AccountEntity.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(c),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,a)):this.browserStorage.hydrateCache(e,a)}async acquireTokenNative(e,a,c){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw createBrowserAuthError(nativeConnectionNotEstablished);return new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,a,this.performanceClient,this.nativeExtensionProvider,c||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,a){if(this.logger.trace("canUseNative called"),!NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case PromptValue.NONE:case PromptValue.CONSENT:case PromptValue.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!a&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const a=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return a&&a.nativeAccountId||""}createPopupClient(e){return new PopupClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new RedirectClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new SilentIframeClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new SilentCacheClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new SilentRefreshClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new SilentAuthCodeClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,a){return this.eventHandler.addEventCallback(e,a)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return blockNonBrowserEnvironment(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){var a;try{(a=e.key)!=null&&a.includes(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(EventType.ACTIVE_ACCOUNT_CHANGED);const c=e.newValue||e.oldValue;if(!c)return;const j=JSON.parse(c);if(typeof j!="object"||!AccountEntity.isAccountEntity(j))return;const et=CacheManager.toObject(new AccountEntity,j).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(EventType.ACCOUNT_ADDED,void 0,et)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(EventType.ACCOUNT_REMOVED,void 0,et))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,a){this.browserStorage.setWrapperMetadata(e,a)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?createNewGuid():Constants$1.EMPTY_STRING}async loginRedirect(e){const a=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",a),this.acquireTokenRedirect({correlationId:a,...e||DEFAULT_REQUEST})}loginPopup(e){const a=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",a),this.acquireTokenPopup({correlationId:a,...e||DEFAULT_REQUEST})}async acquireTokenSilent(e){const a=this.getRequestCorrelationId(e),c=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenSilent,a);c.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),preflightCheck(this.initialized,c),this.logger.verbose("acquireTokenSilent called",a);const j=e.account||this.getActiveAccount();if(!j)throw createBrowserAuthError(noAccountError);c.add({accountType:getAccountType(j)});const h={clientId:this.config.auth.clientId,authority:e.authority||Constants$1.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:j.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},et=JSON.stringify(h),ot=this.activeSilentTokenRequests.get(et);if(typeof ot>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",a);const st=invokeAsync(this.acquireTokenSilentAsync.bind(this),PerformanceEvents.AcquireTokenSilentAsync,this.logger,this.performanceClient,a)({...e,correlationId:a},j).then(lt=>(this.activeSilentTokenRequests.delete(et),c.end({success:!0,fromCache:lt.fromCache,isNativeBroker:lt.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:lt.accessToken.length,idTokenSize:lt.idToken.length}),lt)).catch(lt=>{throw this.activeSilentTokenRequests.delete(et),c.end({success:!1},lt),lt});return this.activeSilentTokenRequests.set(et,st),{...await st,state:e.state}}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",a),c.discard(),{...await ot,state:e.state}}async acquireTokenSilentAsync(e,a){const c=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",c);const j=await invokeAsync(initializeSilentRequest,PerformanceEvents.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,a,this.config,this.performanceClient,this.logger),h=e.cacheLookupPolicy||CacheLookupPolicy.Default;return this.acquireTokenSilentNoIframe(j,h).catch(async ot=>{if(checkIfRefreshTokenErrorCanBeResolvedSilently(ot,h))if(this.activeIframeRequest)if(h!==CacheLookupPolicy.Skip){const[lt,nt]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${nt}`,j.correlationId);const gt=this.performanceClient.startMeasurement(PerformanceEvents.AwaitConcurrentIframe,j.correlationId);gt.add({awaitIframeCorrelationId:nt});const dt=await lt;if(gt.end({success:dt}),dt)return this.logger.verbose(`Parallel iframe request with correlationId: ${nt} succeeded. Retrying cache and/or RT redemption`,j.correlationId),this.acquireTokenSilentNoIframe(j,h);throw this.logger.info(`Iframe request with correlationId: ${nt} failed. Interaction is required.`),ot}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",j.correlationId),invokeAsync(this.acquireTokenBySilentIframe.bind(this),PerformanceEvents.AcquireTokenBySilentIframe,this.logger,this.performanceClient,j.correlationId)(j);else{let lt;return this.activeIframeRequest=[new Promise(nt=>{lt=nt}),j.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",j.correlationId),invokeAsync(this.acquireTokenBySilentIframe.bind(this),PerformanceEvents.AcquireTokenBySilentIframe,this.logger,this.performanceClient,j.correlationId)(j).then(nt=>(lt(!0),nt)).catch(nt=>{throw lt(!1),nt}).finally(()=>{this.activeIframeRequest=void 0})}else throw ot}).then(ot=>(this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Silent,ot),e.correlationId&&this.performanceClient.addFields({fromCache:ot.fromCache,isNativeBroker:ot.fromNativeBroker},e.correlationId),ot)).catch(ot=>{throw this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Silent,null,ot),ot}).finally(()=>{document.removeEventListener("visibilitychange",c)})}async acquireTokenSilentNoIframe(e,a){return NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,ApiId.acquireTokenSilent_silentFlow).catch(async c=>{throw c instanceof NativeAuthError&&isFatalNativeAuthError(c)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,createClientAuthError(tokenRefreshRequired)):c})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),invokeAsync(this.acquireTokenFromCache.bind(this),PerformanceEvents.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,a).catch(c=>{if(a===CacheLookupPolicy.AccessToken)throw c;return this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_NETWORK_START,InteractionType.Silent,e),invokeAsync(this.acquireTokenByRefreshToken.bind(this),PerformanceEvents.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,a)}))}}function checkIfRefreshTokenErrorCanBeResolvedSilently(o,e){const a=!(o instanceof InteractionRequiredAuthError&&o.subError!==badToken),c=o.errorCode===BrowserConstants.INVALID_GRANT_ERROR||o.errorCode===tokenRefreshRequired,j=a&&c||o.errorCode===noTokensFound||o.errorCode===refreshTokenExpired,h=iFrameRenewalPolicies.includes(e);return j&&h}/*! @azure/msal-browser v3.28.1 2025-01-14 */async function createV3Controller(o,e){const a=new StandardOperatingContext(o);return await a.initialize(),StandardController.createController(a,e)}/*! @azure/msal-browser v3.28.1 2025-01-14 */class PublicClientApplication{static async createPublicClientApplication(e){const a=await createV3Controller(e);return new PublicClientApplication(e,a)}constructor(e,a){this.controller=a||new StandardController(new StandardOperatingContext(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,a){return this.controller.addEventCallback(e,a)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,a){return this.controller.initializeWrapperLibrary(e,a)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,a){return this.controller.hydrateCache(e,a)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const stubbedPublicClientApplication={initialize:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenSilent:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenByCode:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),loginPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),loginRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logout:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logoutRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logoutPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),ssoSilent:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},getLogger:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},hydrateCache:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),clearCache:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled))};/*! @azure/msal-browser v3.28.1 2025-01-14 */class EventMessageUtils{static getInteractionStatusFromEvent(e,a){switch(e.eventType){case EventType.LOGIN_START:return InteractionStatus.Login;case EventType.SSO_SILENT_START:return InteractionStatus.SsoSilent;case EventType.ACQUIRE_TOKEN_START:if(e.interactionType===InteractionType.Redirect||e.interactionType===InteractionType.Popup)return InteractionStatus.AcquireToken;break;case EventType.HANDLE_REDIRECT_START:return InteractionStatus.HandleRedirect;case EventType.LOGOUT_START:return InteractionStatus.Logout;case EventType.SSO_SILENT_SUCCESS:case EventType.SSO_SILENT_FAILURE:if(a&&a!==InteractionStatus.SsoSilent)break;return InteractionStatus.None;case EventType.LOGOUT_END:if(a&&a!==InteractionStatus.Logout)break;return InteractionStatus.None;case EventType.HANDLE_REDIRECT_END:if(a&&a!==InteractionStatus.HandleRedirect)break;return InteractionStatus.None;case EventType.LOGIN_SUCCESS:case EventType.LOGIN_FAILURE:case EventType.ACQUIRE_TOKEN_SUCCESS:case EventType.ACQUIRE_TOKEN_FAILURE:case EventType.RESTORE_FROM_BFCACHE:if(e.interactionType===InteractionType.Redirect||e.interactionType===InteractionType.Popup){if(a&&a!==InteractionStatus.Login&&a!==InteractionStatus.AcquireToken)break;return InteractionStatus.None}break}return null}}/*! @azure/msal-react v2.2.0 2024-11-05 */const defaultMsalContext={instance:stubbedPublicClientApplication,inProgress:InteractionStatus.None,accounts:[],logger:new Logger({})},MsalContext=reactExports.createContext(defaultMsalContext);MsalContext.Consumer;/*! @azure/msal-react v2.2.0 2024-11-05 */function getChildrenOrFunction(o,e){return typeof o=="function"?o(e):o}function accountArraysAreEqual(o,e){if(o.length!==e.length)return!1;const a=[...e];return o.every(c=>{const j=a.shift();return!c||!j?!1:c.homeAccountId===j.homeAccountId&&c.localAccountId===j.localAccountId&&c.username===j.username})}function getAccountByIdentifiers(o,e){return o.length>0&&(e.homeAccountId||e.localAccountId||e.username)&&o.filter(c=>!(e.username&&e.username.toLowerCase()!==c.username.toLowerCase()||e.homeAccountId&&e.homeAccountId.toLowerCase()!==c.homeAccountId.toLowerCase()||e.localAccountId&&e.localAccountId.toLowerCase()!==c.localAccountId.toLowerCase()))[0]||null}/*! @azure/msal-react v2.2.0 2024-11-05 */const name="@azure/msal-react",version$1="2.2.0";/*! @azure/msal-react v2.2.0 2024-11-05 */const MsalProviderActionType={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},reducer=(o,e)=>{const{type:a,payload:c}=e;let j=o.inProgress;switch(a){case MsalProviderActionType.UNBLOCK_INPROGRESS:o.inProgress===InteractionStatus.Startup&&(j=InteractionStatus.None,c.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case MsalProviderActionType.EVENT:const et=c.message,ot=EventMessageUtils.getInteractionStatusFromEvent(et,o.inProgress);ot&&(c.logger.info(`MsalProvider - ${et.eventType} results in setting inProgress from ${o.inProgress} to ${ot}`),j=ot);break;default:throw new Error(`Unknown action type: ${a}`)}const h=c.instance.getAllAccounts();return j!==o.inProgress&&!accountArraysAreEqual(h,o.accounts)?{...o,inProgress:j,accounts:h}:j!==o.inProgress?{...o,inProgress:j}:accountArraysAreEqual(h,o.accounts)?o:{...o,accounts:h}};function MsalProvider({instance:o,children:e}){reactExports.useEffect(()=>{o.initializeWrapperLibrary(WrapperSKU.React,version$1)},[o]);const a=reactExports.useMemo(()=>o.getLogger().clone(name,version$1),[o]),[c,j]=reactExports.useReducer(reducer,void 0,()=>({inProgress:InteractionStatus.Startup,accounts:o.getAllAccounts()}));reactExports.useEffect(()=>{const et=o.addEventCallback(ot=>{j({payload:{instance:o,logger:a,message:ot},type:MsalProviderActionType.EVENT})});return a.verbose(`MsalProvider - Registered event callback with id: ${et}`),o.initialize().then(()=>{o.handleRedirectPromise().catch(()=>{}).finally(()=>{j({payload:{instance:o,logger:a},type:MsalProviderActionType.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{et&&(a.verbose(`MsalProvider - Removing event callback ${et}`),o.removeEventCallback(et))}},[o,a]);const h={instance:o,inProgress:c.inProgress,accounts:c.accounts,logger:a};return React$1.createElement(MsalContext.Provider,{value:h},e)}/*! @azure/msal-react v2.2.0 2024-11-05 */const useMsal=()=>reactExports.useContext(MsalContext);/*! @azure/msal-react v2.2.0 2024-11-05 */function isAuthenticated(o,e){return e&&(e.username||e.homeAccountId||e.localAccountId)?!!getAccountByIdentifiers(o,e):o.length>0}function useIsAuthenticated(o){const{accounts:e,inProgress:a}=useMsal();return reactExports.useMemo(()=>a===InteractionStatus.Startup?!1:isAuthenticated(e,o),[e,a,o])}/*! @azure/msal-react v2.2.0 2024-11-05 */function AuthenticatedTemplate({username:o,homeAccountId:e,localAccountId:a,children:c}){const j=useMsal(),h=reactExports.useMemo(()=>({username:o,homeAccountId:e,localAccountId:a}),[o,e,a]);return useIsAuthenticated(h)&&j.inProgress!==InteractionStatus.Startup?React$1.createElement(React$1.Fragment,null,getChildrenOrFunction(c,j)):null}/*! @azure/msal-react v2.2.0 2024-11-05 */function UnauthenticatedTemplate({username:o,homeAccountId:e,localAccountId:a,children:c}){const j=useMsal(),h=reactExports.useMemo(()=>({username:o,homeAccountId:e,localAccountId:a}),[o,e,a]);return!useIsAuthenticated(h)&&j.inProgress!==InteractionStatus.Startup&&j.inProgress!==InteractionStatus.HandleRedirect?React$1.createElement(React$1.Fragment,null,getChildrenOrFunction(c,j)):null}var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(o){(function(){var e={}.hasOwnProperty;function a(){for(var h="",et=0;et<arguments.length;et++){var ot=arguments[et];ot&&(h=j(h,c(ot)))}return h}function c(h){if(typeof h=="string"||typeof h=="number")return h;if(typeof h!="object")return"";if(Array.isArray(h))return a.apply(null,h);if(h.toString!==Object.prototype.toString&&!h.toString.toString().includes("[native code]"))return h.toString();var et="";for(var ot in h)e.call(h,ot)&&h[ot]&&(et=j(et,ot));return et}function j(h,et){return et?h?h+" "+et:h+et:h}o.exports?(a.default=a,o.exports=a):window.classNames=a})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs$1(classnamesExports);function _extends(){return _extends=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var c in a)({}).hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose$4(o,e){if(o==null)return{};var a={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(e.indexOf(c)!==-1)continue;a[c]=o[c]}return a}function defaultKey(o){return"default"+o.charAt(0).toUpperCase()+o.substr(1)}function _toPropertyKey(o){var e=_toPrimitive(o,"string");return typeof e=="symbol"?e:String(e)}function _toPrimitive(o,e){if(typeof o!="object"||o===null)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var c=a.call(o,e);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}function useUncontrolledProp(o,e,a){var c=reactExports.useRef(o!==void 0),j=reactExports.useState(e),h=j[0],et=j[1],ot=o!==void 0,st=c.current;return c.current=ot,!ot&&st&&h!==e&&et(e),[ot?o:h,reactExports.useCallback(function(lt){for(var nt=arguments.length,gt=new Array(nt>1?nt-1:0),dt=1;dt<nt;dt++)gt[dt-1]=arguments[dt];a&&a.apply(void 0,[lt].concat(gt)),et(lt)},[a])]}function useUncontrolled(o,e){return Object.keys(e).reduce(function(a,c){var j,h=a,et=h[defaultKey(c)],ot=h[c],st=_objectWithoutPropertiesLoose$4(h,[defaultKey(c),c].map(_toPropertyKey)),lt=e[c],nt=useUncontrolledProp(ot,et,o[lt]),gt=nt[0],dt=nt[1];return _extends({},st,(j={},j[c]=gt,j[lt]=dt,j))},o)}function _setPrototypeOf(o,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},_setPrototypeOf(o,e)}function _inheritsLoose(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,_setPrototypeOf(o,e)}const DEFAULT_BREAKPOINTS=["xxl","xl","lg","md","sm","xs"],DEFAULT_MIN_BREAKPOINT="xs",ThemeContext=reactExports.createContext({prefixes:{},breakpoints:DEFAULT_BREAKPOINTS,minBreakpoint:DEFAULT_MIN_BREAKPOINT}),{Consumer,Provider:Provider$1}=ThemeContext;function useBootstrapPrefix(o,e){const{prefixes:a}=reactExports.useContext(ThemeContext);return o||a[e]||e}function ownerDocument(o){return o&&o.ownerDocument||document}function ownerWindow(o){var e=ownerDocument(o);return e&&e.defaultView||window}function getComputedStyle$1(o,e){return ownerWindow(o).getComputedStyle(o,e)}var rUpper=/([A-Z])/g;function hyphenate(o){return o.replace(rUpper,"-$1").toLowerCase()}var msPattern=/^ms-/;function hyphenateStyleName(o){return hyphenate(o).replace(msPattern,"-ms-")}var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function isTransform(o){return!!(o&&supportedTransforms.test(o))}function style(o,e){var a="",c="";if(typeof e=="string")return o.style.getPropertyValue(hyphenateStyleName(e))||getComputedStyle$1(o).getPropertyValue(hyphenateStyleName(e));Object.keys(e).forEach(function(j){var h=e[j];!h&&h!==0?o.style.removeProperty(hyphenateStyleName(j)):isTransform(j)?c+=j+"("+h+") ":a+=hyphenateStyleName(j)+": "+h+";"}),c&&(a+="transform: "+c+";"),o.style.cssText+=";"+a}var propTypes$1={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function o(c,j,h,et,ot,st){if(st!==ReactPropTypesSecret){var lt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw lt.name="Invariant Violation",lt}}o.isRequired=o;function e(){return o}var a={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:e,element:o,elementType:o,instanceOf:e,node:o,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return a.PropTypes=a,a};propTypes$1.exports=factoryWithThrowingShims();var propTypesExports=propTypes$1.exports;const PropTypes=getDefaultExportFromCjs$1(propTypesExports),config={disabled:!1},TransitionGroupContext=React$1.createContext(null);var forceReflow=function(e){return e.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(o){_inheritsLoose(e,o);function e(c,j){var h;h=o.call(this,c,j)||this;var et=j,ot=et&&!et.isMounting?c.enter:c.appear,st;return h.appearStatus=null,c.in?ot?(st=EXITED,h.appearStatus=ENTERING):st=ENTERED:c.unmountOnExit||c.mountOnEnter?st=UNMOUNTED:st=EXITED,h.state={status:st},h.nextCallback=null,h}e.getDerivedStateFromProps=function(j,h){var et=j.in;return et&&h.status===UNMOUNTED?{status:EXITED}:null};var a=e.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(j){var h=null;if(j!==this.props){var et=this.state.status;this.props.in?et!==ENTERING&&et!==ENTERED&&(h=ENTERING):(et===ENTERING||et===ENTERED)&&(h=EXITING)}this.updateStatus(!1,h)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var j=this.props.timeout,h,et,ot;return h=et=ot=j,j!=null&&typeof j!="number"&&(h=j.exit,et=j.enter,ot=j.appear!==void 0?j.appear:et),{exit:h,enter:et,appear:ot}},a.updateStatus=function(j,h){if(j===void 0&&(j=!1),h!==null)if(this.cancelNextCallback(),h===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var et=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);et&&forceReflow(et)}this.performEnter(j)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},a.performEnter=function(j){var h=this,et=this.props.enter,ot=this.context?this.context.isMounting:j,st=this.props.nodeRef?[ot]:[ReactDOM.findDOMNode(this),ot],lt=st[0],nt=st[1],gt=this.getTimeouts(),dt=ot?gt.appear:gt.enter;if(!j&&!et||config.disabled){this.safeSetState({status:ENTERED},function(){h.props.onEntered(lt)});return}this.props.onEnter(lt,nt),this.safeSetState({status:ENTERING},function(){h.props.onEntering(lt,nt),h.onTransitionEnd(dt,function(){h.safeSetState({status:ENTERED},function(){h.props.onEntered(lt,nt)})})})},a.performExit=function(){var j=this,h=this.props.exit,et=this.getTimeouts(),ot=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!h||config.disabled){this.safeSetState({status:EXITED},function(){j.props.onExited(ot)});return}this.props.onExit(ot),this.safeSetState({status:EXITING},function(){j.props.onExiting(ot),j.onTransitionEnd(et.exit,function(){j.safeSetState({status:EXITED},function(){j.props.onExited(ot)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(j,h){h=this.setNextCallback(h),this.setState(j,h)},a.setNextCallback=function(j){var h=this,et=!0;return this.nextCallback=function(ot){et&&(et=!1,h.nextCallback=null,j(ot))},this.nextCallback.cancel=function(){et=!1},this.nextCallback},a.onTransitionEnd=function(j,h){this.setNextCallback(h);var et=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),ot=j==null&&!this.props.addEndListener;if(!et||ot){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var st=this.props.nodeRef?[this.nextCallback]:[et,this.nextCallback],lt=st[0],nt=st[1];this.props.addEndListener(lt,nt)}j!=null&&setTimeout(this.nextCallback,j)},a.render=function(){var j=this.state.status;if(j===UNMOUNTED)return null;var h=this.props,et=h.children;h.in,h.mountOnEnter,h.unmountOnExit,h.appear,h.enter,h.exit,h.timeout,h.addEndListener,h.onEnter,h.onEntering,h.onEntered,h.onExit,h.onExiting,h.onExited,h.nodeRef;var ot=_objectWithoutPropertiesLoose$4(h,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$1.createElement(TransitionGroupContext.Provider,{value:null},typeof et=="function"?et(j,ot):React$1.cloneElement(React$1.Children.only(et),ot))},e}(React$1.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$2(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$2,onEntering:noop$2,onEntered:noop$2,onExit:noop$2,onExiting:noop$2,onExited:noop$2};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;function isEscKey(o){return o.code==="Escape"||o.keyCode===27}function getReactVersion(){const o=reactExports.version.split(".");return{major:+o[0],minor:+o[1],patch:+o[2]}}function getChildRef(o){if(!o||typeof o=="function")return null;const{major:e}=getReactVersion();return e>=19?o.props.ref:o.ref}const canUseDOM$1=!!(typeof window<"u"&&window.document&&window.document.createElement);var optionsSupported=!1,onceSupported=!1;try{var options={get passive(){return optionsSupported=!0},get once(){return onceSupported=optionsSupported=!0}};canUseDOM$1&&(window.addEventListener("test",options,options),window.removeEventListener("test",options,!0))}catch{}function addEventListener(o,e,a,c){if(c&&typeof c!="boolean"&&!onceSupported){var j=c.once,h=c.capture,et=a;!onceSupported&&j&&(et=a.__once||function ot(st){this.removeEventListener(e,ot,h),a.call(this,st)},a.__once=et),o.addEventListener(e,et,optionsSupported?c:h)}o.addEventListener(e,a,c)}function removeEventListener(o,e,a,c){var j=c&&typeof c!="boolean"?c.capture:c;o.removeEventListener(e,a,j),a.__once&&o.removeEventListener(e,a.__once,j)}function listen(o,e,a,c){return addEventListener(o,e,a,c),function(){removeEventListener(o,e,a,c)}}function triggerEvent(o,e,a,c){if(c===void 0&&(c=!0),o){var j=document.createEvent("HTMLEvents");j.initEvent(e,a,c),o.dispatchEvent(j)}}function parseDuration$1(o){var e=style(o,"transitionDuration")||"",a=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*a}function emulateTransitionEnd(o,e,a){a===void 0&&(a=5);var c=!1,j=setTimeout(function(){c||triggerEvent(o,"transitionend",!0)},e+a),h=listen(o,"transitionend",function(){c=!0},{once:!0});return function(){clearTimeout(j),h()}}function transitionEnd(o,e,a,c){a==null&&(a=parseDuration$1(o)||0);var j=emulateTransitionEnd(o,a,c),h=listen(o,"transitionend",e);return function(){j(),h()}}function parseDuration(o,e){const a=style(o,e)||"",c=a.indexOf("ms")===-1?1e3:1;return parseFloat(a)*c}function transitionEndListener(o,e){const a=parseDuration(o,"transitionDuration"),c=parseDuration(o,"transitionDelay"),j=transitionEnd(o,h=>{h.target===o&&(j(),e(h))},a+c)}function createChainedFunction(...o){return o.filter(e=>e!=null).reduce((e,a)=>{if(typeof a!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?a:function(...j){e.apply(this,j),a.apply(this,j)}},null)}function triggerBrowserReflow(o){o.offsetHeight}const toFnRef$1=o=>!o||typeof o=="function"?o:e=>{o.current=e};function mergeRefs$1(o,e){const a=toFnRef$1(o),c=toFnRef$1(e);return j=>{a&&a(j),c&&c(j)}}function useMergedRefs$1(o,e){return reactExports.useMemo(()=>mergeRefs$1(o,e),[o,e])}function safeFindDOMNode(o){return o&&"setState"in o?ReactDOM.findDOMNode(o):o??null}const TransitionWrapper=React$1.forwardRef(({onEnter:o,onEntering:e,onEntered:a,onExit:c,onExiting:j,onExited:h,addEndListener:et,children:ot,childRef:st,...lt},nt)=>{const gt=reactExports.useRef(null),dt=useMergedRefs$1(gt,st),mt=_t=>{dt(safeFindDOMNode(_t))},vt=_t=>Rt=>{_t&&gt.current&&_t(gt.current,Rt)},tt=reactExports.useCallback(vt(o),[o]),bt=reactExports.useCallback(vt(e),[e]),ht=reactExports.useCallback(vt(a),[a]),St=reactExports.useCallback(vt(c),[c]),At=reactExports.useCallback(vt(j),[j]),Tt=reactExports.useCallback(vt(h),[h]),ft=reactExports.useCallback(vt(et),[et]);return jsxRuntimeExports.jsx(Transition,{ref:nt,...lt,onEnter:tt,onEntered:ht,onEntering:bt,onExit:St,onExited:Tt,onExiting:At,addEndListener:ft,nodeRef:gt,children:typeof ot=="function"?(_t,Rt)=>ot(_t,{...Rt,ref:mt}):React$1.cloneElement(ot,{ref:mt})})}),MARGINS={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function getDefaultDimensionValue(o,e){const a=`offset${o[0].toUpperCase()}${o.slice(1)}`,c=e[a],j=MARGINS[o];return c+parseInt(style(e,j[0]),10)+parseInt(style(e,j[1]),10)}const collapseStyles={[EXITED]:"collapse",[EXITING]:"collapsing",[ENTERING]:"collapsing",[ENTERED]:"collapse show"},Collapse=React$1.forwardRef(({onEnter:o,onEntering:e,onEntered:a,onExit:c,onExiting:j,className:h,children:et,dimension:ot="height",in:st=!1,timeout:lt=300,mountOnEnter:nt=!1,unmountOnExit:gt=!1,appear:dt=!1,getDimensionValue:mt=getDefaultDimensionValue,...vt},tt)=>{const bt=typeof ot=="function"?ot():ot,ht=reactExports.useMemo(()=>createChainedFunction(_t=>{_t.style[bt]="0"},o),[bt,o]),St=reactExports.useMemo(()=>createChainedFunction(_t=>{const Rt=`scroll${bt[0].toUpperCase()}${bt.slice(1)}`;_t.style[bt]=`${_t[Rt]}px`},e),[bt,e]),At=reactExports.useMemo(()=>createChainedFunction(_t=>{_t.style[bt]=null},a),[bt,a]),Tt=reactExports.useMemo(()=>createChainedFunction(_t=>{_t.style[bt]=`${mt(bt,_t)}px`,triggerBrowserReflow(_t)},c),[c,mt,bt]),ft=reactExports.useMemo(()=>createChainedFunction(_t=>{_t.style[bt]=null},j),[bt,j]);return jsxRuntimeExports.jsx(TransitionWrapper,{ref:tt,addEndListener:transitionEndListener,...vt,"aria-expanded":vt.role?st:null,onEnter:ht,onEntering:St,onEntered:At,onExit:Tt,onExiting:ft,childRef:getChildRef(et),in:st,timeout:lt,mountOnEnter:nt,unmountOnExit:gt,appear:dt,children:(_t,Rt)=>React$1.cloneElement(et,{...Rt,className:classNames(h,et.props.className,collapseStyles[_t],bt==="width"&&"collapse-horizontal")})})});function useCommittedRef$1(o){const e=reactExports.useRef(o);return reactExports.useEffect(()=>{e.current=o},[o]),e}function useEventCallback$1(o){const e=useCommittedRef$1(o);return reactExports.useCallback(function(...a){return e.current&&e.current(...a)},[e])}const divWithClassName=o=>reactExports.forwardRef((e,a)=>jsxRuntimeExports.jsx("div",{...e,ref:a,className:classNames(e.className,o)}));function useCommittedRef(o){const e=reactExports.useRef(o);return reactExports.useEffect(()=>{e.current=o},[o]),e}function useEventCallback(o){const e=useCommittedRef(o);return reactExports.useCallback(function(...a){return e.current&&e.current(...a)},[e])}function useMounted(){const o=reactExports.useRef(!0),e=reactExports.useRef(()=>o.current);return reactExports.useEffect(()=>(o.current=!0,()=>{o.current=!1}),[]),e.current}function usePrevious(o){const e=reactExports.useRef(null);return reactExports.useEffect(()=>{e.current=o}),e.current}const global$1=globalThis||void 0||self,isReactNative$2=typeof global$1<"u"&&global$1.navigator&&global$1.navigator.product==="ReactNative",isDOM$2=typeof document<"u",useIsomorphicEffect$1=isDOM$2||isReactNative$2?reactExports.useLayoutEffect:reactExports.useEffect,_excluded$3=["as","disabled"];function _objectWithoutPropertiesLoose$3(o,e){if(o==null)return{};var a={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(e.indexOf(c)>=0)continue;a[c]=o[c]}return a}function isTrivialHref(o){return!o||o.trim()==="#"}function useButtonProps({tagName:o,disabled:e,href:a,target:c,rel:j,role:h,onClick:et,tabIndex:ot=0,type:st}){o||(a!=null||c!=null||j!=null?o="a":o="button");const lt={tagName:o};if(o==="button")return[{type:st||"button",disabled:e},lt];const nt=dt=>{if((e||o==="a"&&isTrivialHref(a))&&dt.preventDefault(),e){dt.stopPropagation();return}et==null||et(dt)},gt=dt=>{dt.key===" "&&(dt.preventDefault(),nt(dt))};return o==="a"&&(a||(a="#"),e&&(a=void 0)),[{role:h??"button",disabled:void 0,tabIndex:e?void 0:ot,href:a,target:o==="a"?c:void 0,"aria-disabled":e||void 0,rel:o==="a"?j:void 0,onClick:nt,onKeyDown:gt},lt]}const Button$1=reactExports.forwardRef((o,e)=>{let{as:a,disabled:c}=o,j=_objectWithoutPropertiesLoose$3(o,_excluded$3);const[h,{tagName:et}]=useButtonProps(Object.assign({tagName:a,disabled:c},j));return jsxRuntimeExports.jsx(et,Object.assign({},j,h,{ref:e}))});Button$1.displayName="Button";const fadeStyles={[ENTERING]:"show",[ENTERED]:"show"},Fade=reactExports.forwardRef(({className:o,children:e,transitionClasses:a={},onEnter:c,...j},h)=>{const et={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...j},ot=reactExports.useCallback((st,lt)=>{triggerBrowserReflow(st),c==null||c(st,lt)},[c]);return jsxRuntimeExports.jsx(TransitionWrapper,{ref:h,addEndListener:transitionEndListener,...et,onEnter:ot,childRef:getChildRef(e),children:(st,lt)=>reactExports.cloneElement(e,{...lt,className:classNames("fade",o,e.props.className,fadeStyles[st],a[st])})})});Fade.displayName="Fade";const propTypes={"aria-label":PropTypes.string,onClick:PropTypes.func,variant:PropTypes.oneOf(["white"])},CloseButton=reactExports.forwardRef(({className:o,variant:e,"aria-label":a="Close",...c},j)=>jsxRuntimeExports.jsx("button",{ref:j,type:"button",className:classNames("btn-close",e&&`btn-close-${e}`,o),"aria-label":a,...c}));CloseButton.displayName="CloseButton";CloseButton.propTypes=propTypes;const Button=reactExports.forwardRef(({as:o,bsPrefix:e,variant:a="primary",size:c,active:j=!1,disabled:h=!1,className:et,...ot},st)=>{const lt=useBootstrapPrefix(e,"btn"),[nt,{tagName:gt}]=useButtonProps({tagName:o,disabled:h,...ot}),dt=gt;return jsxRuntimeExports.jsx(dt,{...nt,...ot,ref:st,disabled:h,className:classNames(et,lt,j&&"active",a&&`${lt}-${a}`,c&&`${lt}-${c}`,ot.href&&h&&"disabled")})});Button.displayName="Button";var toArray=Function.prototype.bind.call(Function.prototype.call,[].slice);function qsa(o,e){return toArray(o.querySelectorAll(e))}function contains(o,e){if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return o===e||!!(o.compareDocumentPosition(e)&16)}const SelectableContext=reactExports.createContext(null),ATTRIBUTE_PREFIX="data-rr-ui-";function dataAttr(o){return`${ATTRIBUTE_PREFIX}${o}`}const Context=reactExports.createContext(canUseDOM$1?window:void 0);Context.Provider;function useWindow(){return reactExports.useContext(Context)}const isReactNative$1=typeof global$1<"u"&&global$1.navigator&&global$1.navigator.product==="ReactNative",isDOM$1=typeof document<"u",useIsomorphicEffect=isDOM$1||isReactNative$1?reactExports.useLayoutEffect:reactExports.useEffect,context=reactExports.createContext(null);context.displayName="NavbarContext";const toFnRef=o=>!o||typeof o=="function"?o:e=>{o.current=e};function mergeRefs(o,e){const a=toFnRef(o),c=toFnRef(e);return j=>{a&&a(j),c&&c(j)}}function useMergedRefs(o,e){return reactExports.useMemo(()=>mergeRefs(o,e),[o,e])}function activeElement(o){o===void 0&&(o=ownerDocument());try{var e=o.activeElement;return!e||!e.nodeName?null:e}catch{return o.body}}function useUpdatedRef(o){const e=reactExports.useRef(o);return e.current=o,e}function useWillUnmount(o){const e=useUpdatedRef(o);reactExports.useEffect(()=>()=>e.current(),[])}function getBodyScrollbarWidth(o=document){const e=o.defaultView;return Math.abs(e.innerWidth-o.documentElement.clientWidth)}const OPEN_DATA_ATTRIBUTE=dataAttr("modal-open");class ModalManager{constructor({ownerDocument:e,handleContainerOverflow:a=!0,isRTL:c=!1}={}){this.handleContainerOverflow=a,this.isRTL=c,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return getBodyScrollbarWidth(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const a={overflow:"hidden"},c=this.isRTL?"paddingLeft":"paddingRight",j=this.getElement();e.style={overflow:j.style.overflow,[c]:j.style[c]},e.scrollBarWidth&&(a[c]=`${parseInt(style(j,c)||"0",10)+e.scrollBarWidth}px`),j.setAttribute(OPEN_DATA_ATTRIBUTE,""),style(j,a)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const a=this.getElement();a.removeAttribute(OPEN_DATA_ATTRIBUTE),Object.assign(a.style,e.style)}add(e){let a=this.modals.indexOf(e);return a!==-1||(a=this.modals.length,this.modals.push(e),this.setModalAttributes(e),a!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),a}remove(e){const a=this.modals.indexOf(e);a!==-1&&(this.modals.splice(a,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const resolveContainerRef=(o,e)=>canUseDOM$1?o==null?(e||ownerDocument()).body:(typeof o=="function"&&(o=o()),o&&"current"in o&&(o=o.current),o&&("nodeType"in o||o.getBoundingClientRect)?o:null):null;function useWaitForDOMRef(o,e){const a=useWindow(),[c,j]=reactExports.useState(()=>resolveContainerRef(o,a==null?void 0:a.document));if(!c){const h=resolveContainerRef(o);h&&j(h)}return reactExports.useEffect(()=>{},[e,c]),reactExports.useEffect(()=>{const h=resolveContainerRef(o);h!==c&&j(h)},[o,c]),c}function NoopTransition({children:o,in:e,onExited:a,mountOnEnter:c,unmountOnExit:j}){const h=reactExports.useRef(null),et=reactExports.useRef(e),ot=useEventCallback(a);reactExports.useEffect(()=>{e?et.current=!0:ot(h.current)},[e,ot]);const st=useMergedRefs(h,getChildRef(o)),lt=reactExports.cloneElement(o,{ref:st});return e?lt:j||!et.current&&c?null:lt}const _excluded$2=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function _objectWithoutPropertiesLoose$2(o,e){if(o==null)return{};var a={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(e.indexOf(c)>=0)continue;a[c]=o[c]}return a}function useRTGTransitionProps(o){let{onEnter:e,onEntering:a,onEntered:c,onExit:j,onExiting:h,onExited:et,addEndListener:ot,children:st}=o,lt=_objectWithoutPropertiesLoose$2(o,_excluded$2);const nt=reactExports.useRef(null),gt=useMergedRefs(nt,getChildRef(st)),dt=Tt=>ft=>{Tt&&nt.current&&Tt(nt.current,ft)},mt=reactExports.useCallback(dt(e),[e]),vt=reactExports.useCallback(dt(a),[a]),tt=reactExports.useCallback(dt(c),[c]),bt=reactExports.useCallback(dt(j),[j]),ht=reactExports.useCallback(dt(h),[h]),St=reactExports.useCallback(dt(et),[et]),At=reactExports.useCallback(dt(ot),[ot]);return Object.assign({},lt,{nodeRef:nt},e&&{onEnter:mt},a&&{onEntering:vt},c&&{onEntered:tt},j&&{onExit:bt},h&&{onExiting:ht},et&&{onExited:St},ot&&{addEndListener:At},{children:typeof st=="function"?(Tt,ft)=>st(Tt,Object.assign({},ft,{ref:gt})):reactExports.cloneElement(st,{ref:gt})})}const _excluded$1=["component"];function _objectWithoutPropertiesLoose$1(o,e){if(o==null)return{};var a={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(e.indexOf(c)>=0)continue;a[c]=o[c]}return a}const RTGTransition=reactExports.forwardRef((o,e)=>{let{component:a}=o,c=_objectWithoutPropertiesLoose$1(o,_excluded$1);const j=useRTGTransitionProps(c);return jsxRuntimeExports.jsx(a,Object.assign({ref:e},j))});function useTransition({in:o,onTransition:e}){const a=reactExports.useRef(null),c=reactExports.useRef(!0),j=useEventCallback(e);return useIsomorphicEffect$1(()=>{if(!a.current)return;let h=!1;return j({in:o,element:a.current,initial:c.current,isStale:()=>h}),()=>{h=!0}},[o,j]),useIsomorphicEffect$1(()=>(c.current=!1,()=>{c.current=!0}),[]),a}function ImperativeTransition({children:o,in:e,onExited:a,onEntered:c,transition:j}){const[h,et]=reactExports.useState(!e);e&&h&&et(!1);const ot=useTransition({in:!!e,onTransition:lt=>{const nt=()=>{lt.isStale()||(lt.in?c==null||c(lt.element,lt.initial):(et(!0),a==null||a(lt.element)))};Promise.resolve(j(lt)).then(nt,gt=>{throw lt.in||et(!0),gt})}}),st=useMergedRefs(ot,getChildRef(o));return h&&!e?null:reactExports.cloneElement(o,{ref:st})}function renderTransition(o,e,a){return o?jsxRuntimeExports.jsx(RTGTransition,Object.assign({},a,{component:o})):e?jsxRuntimeExports.jsx(ImperativeTransition,Object.assign({},a,{transition:e})):jsxRuntimeExports.jsx(NoopTransition,Object.assign({},a))}const _excluded=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function _objectWithoutPropertiesLoose(o,e){if(o==null)return{};var a={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(e.indexOf(c)>=0)continue;a[c]=o[c]}return a}let manager;function getManager(o){return manager||(manager=new ModalManager({ownerDocument:o==null?void 0:o.document})),manager}function useModalManager(o){const e=useWindow(),a=o||getManager(e),c=reactExports.useRef({dialog:null,backdrop:null});return Object.assign(c.current,{add:()=>a.add(c.current),remove:()=>a.remove(c.current),isTopModal:()=>a.isTopModal(c.current),setDialogRef:reactExports.useCallback(j=>{c.current.dialog=j},[]),setBackdropRef:reactExports.useCallback(j=>{c.current.backdrop=j},[])})}const Modal=reactExports.forwardRef((o,e)=>{let{show:a=!1,role:c="dialog",className:j,style:h,children:et,backdrop:ot=!0,keyboard:st=!0,onBackdropClick:lt,onEscapeKeyDown:nt,transition:gt,runTransition:dt,backdropTransition:mt,runBackdropTransition:vt,autoFocus:tt=!0,enforceFocus:bt=!0,restoreFocus:ht=!0,restoreFocusOptions:St,renderDialog:At,renderBackdrop:Tt=hr=>jsxRuntimeExports.jsx("div",Object.assign({},hr)),manager:ft,container:_t,onShow:Rt,onHide:Mt=()=>{},onExit:Et,onExited:kt,onExiting:at,onEnter:s,onEntering:b,onEntered:$}=o,_e=_objectWithoutPropertiesLoose(o,_excluded);const it=useWindow(),pt=useWaitForDOMRef(_t),yt=useModalManager(ft),ct=useMounted(),_=usePrevious(a),[rt,Ct]=reactExports.useState(!a),It=reactExports.useRef(null);reactExports.useImperativeHandle(e,()=>yt,[yt]),canUseDOM$1&&!_&&a&&(It.current=activeElement(it==null?void 0:it.document)),a&&rt&&Ct(!1);const Nt=useEventCallback(()=>{if(yt.add(),jt.current=listen(document,"keydown",qt),Kt.current=listen(document,"focus",()=>setTimeout(Gt),!0),Rt&&Rt(),tt){var hr,Ar;const yn=activeElement((hr=(Ar=yt.dialog)==null?void 0:Ar.ownerDocument)!=null?hr:it==null?void 0:it.document);yt.dialog&&yn&&!contains(yt.dialog,yn)&&(It.current=yn,yt.dialog.focus())}}),Ut=useEventCallback(()=>{if(yt.remove(),jt.current==null||jt.current(),Kt.current==null||Kt.current(),ht){var hr;(hr=It.current)==null||hr.focus==null||hr.focus(St),It.current=null}});reactExports.useEffect(()=>{!a||!pt||Nt()},[a,pt,Nt]),reactExports.useEffect(()=>{rt&&Ut()},[rt,Ut]),useWillUnmount(()=>{Ut()});const Gt=useEventCallback(()=>{if(!bt||!ct()||!yt.isTopModal())return;const hr=activeElement(it==null?void 0:it.document);yt.dialog&&hr&&!contains(yt.dialog,hr)&&yt.dialog.focus()}),Pt=useEventCallback(hr=>{hr.target===hr.currentTarget&&(lt==null||lt(hr),ot===!0&&Mt())}),qt=useEventCallback(hr=>{st&&isEscKey(hr)&&yt.isTopModal()&&(nt==null||nt(hr),hr.defaultPrevented||Mt())}),Kt=reactExports.useRef(),jt=reactExports.useRef(),Ht=(...hr)=>{Ct(!0),kt==null||kt(...hr)};if(!pt)return null;const Bt=Object.assign({role:c,ref:yt.setDialogRef,"aria-modal":c==="dialog"?!0:void 0},_e,{style:h,className:j,tabIndex:-1});let Jt=At?At(Bt):jsxRuntimeExports.jsx("div",Object.assign({},Bt,{children:reactExports.cloneElement(et,{role:"document"})}));Jt=renderTransition(gt,dt,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!a,onExit:Et,onExiting:at,onExited:Ht,onEnter:s,onEntering:b,onEntered:$,children:Jt});let sr=null;return ot&&(sr=Tt({ref:yt.setBackdropRef,onClick:Pt}),sr=renderTransition(mt,vt,{in:!!a,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:sr})),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ReactDOM.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[sr,Jt]}),pt)})});Modal.displayName="Modal";const BaseModal=Object.assign(Modal,{Manager:ModalManager});function hasClass(o,e){return o.classList?o.classList.contains(e):(" "+(o.className.baseVal||o.className)+" ").indexOf(" "+e+" ")!==-1}function addClass(o,e){o.classList?o.classList.add(e):hasClass(o,e)||(typeof o.className=="string"?o.className=o.className+" "+e:o.setAttribute("class",(o.className&&o.className.baseVal||"")+" "+e))}function replaceClassName(o,e){return o.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass(o,e){o.classList?o.classList.remove(e):typeof o.className=="string"?o.className=replaceClassName(o.className,e):o.setAttribute("class",replaceClassName(o.className&&o.className.baseVal||"",e))}const Selector={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class BootstrapModalManager extends ModalManager{adjustAndStore(e,a,c){const j=a.style[e];a.dataset[e]=j,style(a,{[e]:`${parseFloat(style(a,e))+c}px`})}restore(e,a){const c=a.dataset[e];c!==void 0&&(delete a.dataset[e],style(a,{[e]:c}))}setContainerStyle(e){super.setContainerStyle(e);const a=this.getElement();if(addClass(a,"modal-open"),!e.scrollBarWidth)return;const c=this.isRTL?"paddingLeft":"paddingRight",j=this.isRTL?"marginLeft":"marginRight";qsa(a,Selector.FIXED_CONTENT).forEach(h=>this.adjustAndStore(c,h,e.scrollBarWidth)),qsa(a,Selector.STICKY_CONTENT).forEach(h=>this.adjustAndStore(j,h,-e.scrollBarWidth)),qsa(a,Selector.NAVBAR_TOGGLER).forEach(h=>this.adjustAndStore(j,h,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const a=this.getElement();removeClass(a,"modal-open");const c=this.isRTL?"paddingLeft":"paddingRight",j=this.isRTL?"marginLeft":"marginRight";qsa(a,Selector.FIXED_CONTENT).forEach(h=>this.restore(c,h)),qsa(a,Selector.STICKY_CONTENT).forEach(h=>this.restore(j,h)),qsa(a,Selector.NAVBAR_TOGGLER).forEach(h=>this.restore(j,h))}}let sharedManager;function getSharedManager(o){return sharedManager||(sharedManager=new BootstrapModalManager(o)),sharedManager}const ModalContext=reactExports.createContext({onHide(){}}),AbstractModalHeader=reactExports.forwardRef(({closeLabel:o="Close",closeVariant:e,closeButton:a=!1,onHide:c,children:j,...h},et)=>{const ot=reactExports.useContext(ModalContext),st=useEventCallback$1(()=>{ot==null||ot.onHide(),c==null||c()});return jsxRuntimeExports.jsxs("div",{ref:et,...h,children:[j,a&&jsxRuntimeExports.jsx(CloseButton,{"aria-label":o,variant:e,onClick:st})]})}),NavbarBrand=reactExports.forwardRef(({bsPrefix:o,className:e,as:a,...c},j)=>{o=useBootstrapPrefix(o,"navbar-brand");const h=a||(c.href?"a":"span");return jsxRuntimeExports.jsx(h,{...c,ref:j,className:classNames(e,o)})});NavbarBrand.displayName="NavbarBrand";const NavbarCollapse=reactExports.forwardRef(({children:o,bsPrefix:e,...a},c)=>{e=useBootstrapPrefix(e,"navbar-collapse");const j=reactExports.useContext(context);return jsxRuntimeExports.jsx(Collapse,{in:!!(j&&j.expanded),...a,children:jsxRuntimeExports.jsx("div",{ref:c,className:e,children:o})})});NavbarCollapse.displayName="NavbarCollapse";const NavbarToggle=reactExports.forwardRef(({bsPrefix:o,className:e,children:a,label:c="Toggle navigation",as:j="button",onClick:h,...et},ot)=>{o=useBootstrapPrefix(o,"navbar-toggler");const{onToggle:st,expanded:lt}=reactExports.useContext(context)||{},nt=useEventCallback$1(gt=>{h&&h(gt),st&&st()});return j==="button"&&(et.type="button"),jsxRuntimeExports.jsx(j,{...et,ref:ot,onClick:nt,"aria-label":c,className:classNames(e,o,!lt&&"collapsed"),children:a||jsxRuntimeExports.jsx("span",{className:`${o}-icon`})})});NavbarToggle.displayName="NavbarToggle";const matchersByWindow=new WeakMap,getMatcher=(o,e)=>{if(!o||!e)return;const a=matchersByWindow.get(e)||new Map;matchersByWindow.set(e,a);let c=a.get(o);return c||(c=e.matchMedia(o),c.refCount=0,a.set(c.media,c)),c};function useMediaQuery(o,e=typeof window>"u"?void 0:window){const a=getMatcher(o,e),[c,j]=reactExports.useState(()=>a?a.matches:!1);return useIsomorphicEffect(()=>{let h=getMatcher(o,e);if(!h)return j(!1);let et=matchersByWindow.get(e);const ot=()=>{j(h.matches)};return h.refCount++,h.addListener(ot),ot(),()=>{h.removeListener(ot),h.refCount--,h.refCount<=0&&(et==null||et.delete(h.media)),h=void 0}},[o]),c}function createBreakpointHook(o){const e=Object.keys(o);function a(ot,st){return ot===st?st:ot?`${ot} and ${st}`:st}function c(ot){return e[Math.min(e.indexOf(ot)+1,e.length-1)]}function j(ot){const st=c(ot);let lt=o[st];return typeof lt=="number"?lt=`${lt-.2}px`:lt=`calc(${lt} - 0.2px)`,`(max-width: ${lt})`}function h(ot){let st=o[ot];return typeof st=="number"&&(st=`${st}px`),`(min-width: ${st})`}function et(ot,st,lt){let nt;typeof ot=="object"?(nt=ot,lt=st,st=!0):(st=st||!0,nt={[ot]:st});let gt=reactExports.useMemo(()=>Object.entries(nt).reduce((dt,[mt,vt])=>((vt==="up"||vt===!0)&&(dt=a(dt,h(mt))),(vt==="down"||vt===!0)&&(dt=a(dt,j(mt))),dt),""),[JSON.stringify(nt)]);return useMediaQuery(gt,lt)}return et}const useBreakpoint=createBreakpointHook({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),OffcanvasBody=reactExports.forwardRef(({className:o,bsPrefix:e,as:a="div",...c},j)=>(e=useBootstrapPrefix(e,"offcanvas-body"),jsxRuntimeExports.jsx(a,{ref:j,className:classNames(o,e),...c})));OffcanvasBody.displayName="OffcanvasBody";const transitionStyles={[ENTERING]:"show",[ENTERED]:"show"},OffcanvasToggling=reactExports.forwardRef(({bsPrefix:o,className:e,children:a,in:c=!1,mountOnEnter:j=!1,unmountOnExit:h=!1,appear:et=!1,...ot},st)=>(o=useBootstrapPrefix(o,"offcanvas"),jsxRuntimeExports.jsx(TransitionWrapper,{ref:st,addEndListener:transitionEndListener,in:c,mountOnEnter:j,unmountOnExit:h,appear:et,...ot,childRef:getChildRef(a),children:(lt,nt)=>reactExports.cloneElement(a,{...nt,className:classNames(e,a.props.className,(lt===ENTERING||lt===EXITING)&&`${o}-toggling`,transitionStyles[lt])})})));OffcanvasToggling.displayName="OffcanvasToggling";const OffcanvasHeader=reactExports.forwardRef(({bsPrefix:o,className:e,closeLabel:a="Close",closeButton:c=!1,...j},h)=>(o=useBootstrapPrefix(o,"offcanvas-header"),jsxRuntimeExports.jsx(AbstractModalHeader,{ref:h,...j,className:classNames(e,o),closeLabel:a,closeButton:c})));OffcanvasHeader.displayName="OffcanvasHeader";const DivStyledAsH5=divWithClassName("h5"),OffcanvasTitle=reactExports.forwardRef(({className:o,bsPrefix:e,as:a=DivStyledAsH5,...c},j)=>(e=useBootstrapPrefix(e,"offcanvas-title"),jsxRuntimeExports.jsx(a,{ref:j,className:classNames(o,e),...c})));OffcanvasTitle.displayName="OffcanvasTitle";function DialogTransition(o){return jsxRuntimeExports.jsx(OffcanvasToggling,{...o})}function BackdropTransition(o){return jsxRuntimeExports.jsx(Fade,{...o})}const Offcanvas=reactExports.forwardRef(({bsPrefix:o,className:e,children:a,"aria-labelledby":c,placement:j="start",responsive:h,show:et=!1,backdrop:ot=!0,keyboard:st=!0,scroll:lt=!1,onEscapeKeyDown:nt,onShow:gt,onHide:dt,container:mt,autoFocus:vt=!0,enforceFocus:tt=!0,restoreFocus:bt=!0,restoreFocusOptions:ht,onEntered:St,onExit:At,onExiting:Tt,onEnter:ft,onEntering:_t,onExited:Rt,backdropClassName:Mt,manager:Et,renderStaticNode:kt=!1,...at},s)=>{const b=reactExports.useRef();o=useBootstrapPrefix(o,"offcanvas");const[$,_e]=reactExports.useState(!1),it=useEventCallback$1(dt),pt=useBreakpoint(h||"xs","up");reactExports.useEffect(()=>{_e(h?et&&!pt:et)},[et,h,pt]);const yt=reactExports.useMemo(()=>({onHide:it}),[it]);function ct(){return Et||(lt?(b.current||(b.current=new BootstrapModalManager({handleContainerOverflow:!1})),b.current):getSharedManager())}const _=(Nt,...Ut)=>{Nt&&(Nt.style.visibility="visible"),ft==null||ft(Nt,...Ut)},rt=(Nt,...Ut)=>{Nt&&(Nt.style.visibility=""),Rt==null||Rt(...Ut)},Ct=reactExports.useCallback(Nt=>jsxRuntimeExports.jsx("div",{...Nt,className:classNames(`${o}-backdrop`,Mt)}),[Mt,o]),It=Nt=>jsxRuntimeExports.jsx("div",{...Nt,...at,className:classNames(e,h?`${o}-${h}`:o,`${o}-${j}`),"aria-labelledby":c,children:a});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!$&&(h||kt)&&It({}),jsxRuntimeExports.jsx(ModalContext.Provider,{value:yt,children:jsxRuntimeExports.jsx(BaseModal,{show:$,ref:s,backdrop:ot,container:mt,keyboard:st,autoFocus:vt,enforceFocus:tt&&!lt,restoreFocus:bt,restoreFocusOptions:ht,onEscapeKeyDown:nt,onShow:gt,onHide:it,onEnter:_,onEntering:_t,onEntered:St,onExit:At,onExiting:Tt,onExited:rt,manager:ct(),transition:DialogTransition,backdropTransition:BackdropTransition,renderBackdrop:Ct,renderDialog:It})})]})});Offcanvas.displayName="Offcanvas";const Offcanvas$1=Object.assign(Offcanvas,{Body:OffcanvasBody,Header:OffcanvasHeader,Title:OffcanvasTitle}),NavbarOffcanvas=reactExports.forwardRef(({onHide:o,...e},a)=>{const c=reactExports.useContext(context),j=useEventCallback$1(()=>{c==null||c.onToggle==null||c.onToggle(),o==null||o()});return jsxRuntimeExports.jsx(Offcanvas$1,{ref:a,show:!!(c!=null&&c.expanded),...e,renderStaticNode:!0,onHide:j})});NavbarOffcanvas.displayName="NavbarOffcanvas";const NavbarText=reactExports.forwardRef(({className:o,bsPrefix:e,as:a="span",...c},j)=>(e=useBootstrapPrefix(e,"navbar-text"),jsxRuntimeExports.jsx(a,{ref:j,className:classNames(o,e),...c})));NavbarText.displayName="NavbarText";const Navbar=reactExports.forwardRef((o,e)=>{const{bsPrefix:a,expand:c=!0,variant:j="light",bg:h,fixed:et,sticky:ot,className:st,as:lt="nav",expanded:nt,onToggle:gt,onSelect:dt,collapseOnSelect:mt=!1,...vt}=useUncontrolled(o,{expanded:"onToggle"}),tt=useBootstrapPrefix(a,"navbar"),bt=reactExports.useCallback((...At)=>{dt==null||dt(...At),mt&&nt&&(gt==null||gt(!1))},[dt,mt,nt,gt]);vt.role===void 0&&lt!=="nav"&&(vt.role="navigation");let ht=`${tt}-expand`;typeof c=="string"&&(ht=`${ht}-${c}`);const St=reactExports.useMemo(()=>({onToggle:()=>gt==null?void 0:gt(!nt),bsPrefix:tt,expanded:!!nt,expand:c}),[tt,nt,c,gt]);return jsxRuntimeExports.jsx(context.Provider,{value:St,children:jsxRuntimeExports.jsx(SelectableContext.Provider,{value:bt,children:jsxRuntimeExports.jsx(lt,{ref:e,...vt,className:classNames(st,tt,c&&ht,j&&`${tt}-${j}`,h&&`bg-${h}`,ot&&`sticky-${ot}`,et&&`fixed-${et}`)})})})});Navbar.displayName="Navbar";const Navbar$1=Object.assign(Navbar,{Brand:NavbarBrand,Collapse:NavbarCollapse,Offcanvas:NavbarOffcanvas,Text:NavbarText,Toggle:NavbarToggle}),msalConfig={auth:{clientId:"4ab2d60c-d013-450d-85fa-0a140bee3ead",authority:"https://login.microsoftonline.com/4ab2d60c-d013-450d-85fa-0a140bee3ead",redirectUri:"https://black-pebble-06e013710.6.azurestaticapps.net",postLogoutRedirectUri:"/",navigateToLoginRequestUrl:!1},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(o,e,a)=>{if(!a)switch(o){case LogLevel.Error:console.error(e);return;case LogLevel.Info:console.info(e);return;case LogLevel.Verbose:console.debug(e);return;case LogLevel.Warning:console.warn(e);return;default:return}}}}},loginRequest={scopes:[]},logo="/assets/contoso_logo-CsyjEv3q.png",jumpstart_logo="/assets/jumpstart_logo-Br3NNX8K.png",NavigationBar=()=>{const{instance:o}=useMsal(),e=()=>{o.loginRedirect(loginRequest).catch(c=>console.log(c))},a=()=>{o.logoutRedirect().catch(c=>console.log(c))};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Navbar$1,{className:"navbarStyle",children:[jsxRuntimeExports.jsx("a",{className:"navbar-brand",href:"/",children:jsxRuntimeExports.jsx("img",{src:logo})}),jsxRuntimeExports.jsx(AuthenticatedTemplate,{children:jsxRuntimeExports.jsxs("div",{className:"collapse navbar-collapse justify-content-end",children:[jsxRuntimeExports.jsx("a",{className:"navbar-jumpstart",href:"/",children:jsxRuntimeExports.jsx("img",{src:jumpstart_logo})}),jsxRuntimeExports.jsx(Button,{variant:"warning",onClick:a,children:"Sign out"})]})}),jsxRuntimeExports.jsx(UnauthenticatedTemplate,{children:jsxRuntimeExports.jsxs("div",{className:"collapse navbar-collapse justify-content-end",children:[jsxRuntimeExports.jsx("a",{className:"navbar-jumpstart",target:"_blank",href:"https://github.com/microsoft/NVIDIA-Omniverse-Azure-Operations-Twin",children:jsxRuntimeExports.jsx("img",{src:jumpstart_logo})}),jsxRuntimeExports.jsx(Button,{onClick:e,children:"Sign in"})]})})]})})};var withSelector={exports:{}},useSyncExternalStoreWithSelector_production={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports;function is$1(o,e){return o===e&&(o!==0||1/o===1/e)||o!==o&&e!==e}var objectIs=typeof Object.is=="function"?Object.is:is$1,useSyncExternalStore=React.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(o,e,a,c,j){var h=useRef(null);if(h.current===null){var et={hasValue:!1,value:null};h.current=et}else et=h.current;h=useMemo(function(){function st(mt){if(!lt){if(lt=!0,nt=mt,mt=c(mt),j!==void 0&&et.hasValue){var vt=et.value;if(j(vt,mt))return gt=vt}return gt=mt}if(vt=gt,objectIs(nt,mt))return vt;var tt=c(mt);return j!==void 0&&j(vt,tt)?(nt=mt,vt):(nt=mt,gt=tt)}var lt=!1,nt,gt,dt=a===void 0?null:a;return[function(){return st(e())},dt===null?void 0:function(){return st(dt())}]},[e,a,c,j]);var ot=useSyncExternalStore(o,h[0],h[1]);return useEffect(function(){et.hasValue=!0,et.value=ot},[ot]),useDebugValue(ot),ot};withSelector.exports=useSyncExternalStoreWithSelector_production;var withSelectorExports=withSelector.exports;function defaultNoopBatch(o){o()}function createListenerCollection(){let o=null,e=null;return{clear(){o=null,e=null},notify(){defaultNoopBatch(()=>{let a=o;for(;a;)a.callback(),a=a.next})},get(){const a=[];let c=o;for(;c;)a.push(c),c=c.next;return a},subscribe(a){let c=!0;const j=e={callback:a,next:null,prev:e};return j.prev?j.prev.next=j:o=j,function(){!c||o===null||(c=!1,j.next?j.next.prev=j.prev:e=j.prev,j.prev?j.prev.next=j.next:o=j.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(o,e){let a,c=nullListeners,j=0,h=!1;function et(tt){nt();const bt=c.subscribe(tt);let ht=!1;return()=>{ht||(ht=!0,bt(),gt())}}function ot(){c.notify()}function st(){vt.onStateChange&&vt.onStateChange()}function lt(){return h}function nt(){j++,a||(a=o.subscribe(st),c=createListenerCollection())}function gt(){j--,a&&j===0&&(a(),a=void 0,c.clear(),c=nullListeners)}function dt(){h||(h=!0,nt())}function mt(){h&&(h=!1,gt())}const vt={addNestedSub:et,notifyNestedSubs:ot,handleChangeWrapper:st,isSubscribed:lt,trySubscribe:dt,tryUnsubscribe:mt,getListeners:()=>c};return vt}var canUseDOM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isDOM=canUseDOM(),isRunningInReactNative=()=>typeof navigator<"u"&&navigator.product==="ReactNative",isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect=getUseIsomorphicLayoutEffect(),ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){if(!reactExports.createContext)return{};const o=gT[ContextKey]??(gT[ContextKey]=new Map);let e=o.get(reactExports.createContext);return e||(e=reactExports.createContext(null),o.set(reactExports.createContext,e)),e}var ReactReduxContext=getContext();function Provider(o){const{children:e,context:a,serverState:c,store:j}=o,h=reactExports.useMemo(()=>{const st=createSubscription(j);return{store:j,subscription:st,getServerState:c?()=>c:void 0}},[j,c]),et=reactExports.useMemo(()=>j.getState(),[j]);useIsomorphicLayoutEffect(()=>{const{subscription:st}=h;return st.onStateChange=st.notifyNestedSubs,st.trySubscribe(),et!==j.getState()&&st.notifyNestedSubs(),()=>{st.tryUnsubscribe(),st.onStateChange=void 0}},[h,et]);const ot=a||ReactReduxContext;return reactExports.createElement(ot.Provider,{value:h},e)}var Provider_default=Provider;function createReduxContextHook(o=ReactReduxContext){return function(){return reactExports.useContext(o)}}var useReduxContext=createReduxContextHook();function createStoreHook(o=ReactReduxContext){const e=o===ReactReduxContext?useReduxContext:createReduxContextHook(o),a=()=>{const{store:c}=e();return c};return Object.assign(a,{withTypes:()=>a}),a}var useStore=createStoreHook();function createDispatchHook(o=ReactReduxContext){const e=o===ReactReduxContext?useStore:createStoreHook(o),a=()=>e().dispatch;return Object.assign(a,{withTypes:()=>a}),a}var useDispatch=createDispatchHook(),refEquality=(o,e)=>o===e;function createSelectorHook(o=ReactReduxContext){const e=o===ReactReduxContext?useReduxContext:createReduxContextHook(o),a=(c,j={})=>{const{equalityFn:h=refEquality}=typeof j=="function"?{equalityFn:j}:j,et=e(),{store:ot,subscription:st,getServerState:lt}=et;reactExports.useRef(!0);const nt=reactExports.useCallback({[c.name](dt){return c(dt)}}[c.name],[c]),gt=withSelectorExports.useSyncExternalStoreWithSelector(st.addNestedSub,ot.getState,lt||ot.getState,nt,h);return reactExports.useDebugValue(gt),gt};return Object.assign(a,{withTypes:()=>a}),a}var useSelector=createSelectorHook();function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var browser$e={exports:{}},process=browser$e.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(o){if(cachedSetTimeout===setTimeout)return setTimeout(o,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(o,0);try{return cachedSetTimeout(o,0)}catch{try{return cachedSetTimeout.call(null,o,0)}catch{return cachedSetTimeout.call(this,o,0)}}}function runClearTimeout(o){if(cachedClearTimeout===clearTimeout)return clearTimeout(o);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(o);try{return cachedClearTimeout(o)}catch{try{return cachedClearTimeout.call(null,o)}catch{return cachedClearTimeout.call(this,o)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var o=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(o)}}process.nextTick=function(o){var e=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)e[a-1]=arguments[a];queue.push(new Item(o,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(o,e){this.fun=o,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$1(){}process.on=noop$1;process.addListener=noop$1;process.once=noop$1;process.off=noop$1;process.removeListener=noop$1;process.removeAllListeners=noop$1;process.emit=noop$1;process.prependListener=noop$1;process.prependOnceListener=noop$1;process.listeners=function(o){return[]};process.binding=function(o){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(o){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports$1=browser$e.exports;const process$1=getDefaultExportFromCjs(browserExports$1);function formatProdErrorMessage$1(o){return`Minified Redux error #${o}; visit https://redux.js.org/Errors?code=${o} for the full message or use the non-minified dev environment for full errors. `}var $$observable=typeof Symbol=="function"&&Symbol.observable||"@@observable",symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$1(o){if(typeof o!="object"||o===null)return!1;let e=o;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(o)===e||Object.getPrototypeOf(o)===null}function createStore(o,e,a){if(typeof o!="function")throw new Error(formatProdErrorMessage$1(2));if(typeof e=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage$1(0));if(typeof e=="function"&&typeof a>"u"&&(a=e,e=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(formatProdErrorMessage$1(1));return a(createStore)(o,e)}let c=o,j=e,h=new Map,et=h,ot=0,st=!1;function lt(){et===h&&(et=new Map,h.forEach((bt,ht)=>{et.set(ht,bt)}))}function nt(){if(st)throw new Error(formatProdErrorMessage$1(3));return j}function gt(bt){if(typeof bt!="function")throw new Error(formatProdErrorMessage$1(4));if(st)throw new Error(formatProdErrorMessage$1(5));let ht=!0;lt();const St=ot++;return et.set(St,bt),function(){if(ht){if(st)throw new Error(formatProdErrorMessage$1(6));ht=!1,lt(),et.delete(St),h=null}}}function dt(bt){if(!isPlainObject$1(bt))throw new Error(formatProdErrorMessage$1(7));if(typeof bt.type>"u")throw new Error(formatProdErrorMessage$1(8));if(typeof bt.type!="string")throw new Error(formatProdErrorMessage$1(17));if(st)throw new Error(formatProdErrorMessage$1(9));try{st=!0,j=c(j,bt)}finally{st=!1}return(h=et).forEach(St=>{St()}),bt}function mt(bt){if(typeof bt!="function")throw new Error(formatProdErrorMessage$1(10));c=bt,dt({type:actionTypes_default.REPLACE})}function vt(){const bt=gt;return{subscribe(ht){if(typeof ht!="object"||ht===null)throw new Error(formatProdErrorMessage$1(11));function St(){const Tt=ht;Tt.next&&Tt.next(nt())}return St(),{unsubscribe:bt(St)}},[symbol_observable_default](){return this}}}return dt({type:actionTypes_default.INIT}),{dispatch:dt,subscribe:gt,getState:nt,replaceReducer:mt,[symbol_observable_default]:vt}}function assertReducerShape(o){Object.keys(o).forEach(e=>{const a=o[e];if(typeof a(void 0,{type:actionTypes_default.INIT})>"u")throw new Error(formatProdErrorMessage$1(12));if(typeof a(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(o){const e=Object.keys(o),a={};for(let h=0;h<e.length;h++){const et=e[h];typeof o[et]=="function"&&(a[et]=o[et])}const c=Object.keys(a);let j;try{assertReducerShape(a)}catch(h){j=h}return function(et={},ot){if(j)throw j;let st=!1;const lt={};for(let nt=0;nt<c.length;nt++){const gt=c[nt],dt=a[gt],mt=et[gt],vt=dt(mt,ot);if(typeof vt>"u")throw ot&&ot.type,new Error(formatProdErrorMessage$1(14));lt[gt]=vt,st=st||vt!==mt}return st=st||c.length!==Object.keys(et).length,st?lt:et}}function compose(...o){return o.length===0?e=>e:o.length===1?o[0]:o.reduce((e,a)=>(...c)=>e(a(...c)))}function applyMiddleware(...o){return e=>(a,c)=>{const j=e(a,c);let h=()=>{throw new Error(formatProdErrorMessage$1(15))};const et={getState:j.getState,dispatch:(st,...lt)=>h(st,...lt)},ot=o.map(st=>st(et));return h=compose(...ot)(j.dispatch),{...j,dispatch:h}}}function isAction(o){return isPlainObject$1(o)&&"type"in o&&typeof o.type=="string"}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(o,...e){throw new Error(`[Immer] minified error nr: ${o}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf$1=Object.getPrototypeOf;function isDraft(o){return!!o&&!!o[DRAFT_STATE]}function isDraftable(o){var e;return o?isPlainObject(o)||Array.isArray(o)||!!o[DRAFTABLE]||!!((e=o.constructor)!=null&&e[DRAFTABLE])||isMap(o)||isSet(o):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject(o){if(!o||typeof o!="object")return!1;const e=getPrototypeOf$1(o);if(e===null)return!0;const a=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return a===Object?!0:typeof a=="function"&&Function.toString.call(a)===objectCtorString}function each(o,e){getArchtype(o)===0?Reflect.ownKeys(o).forEach(a=>{e(a,o[a],o)}):o.forEach((a,c)=>e(c,a,o))}function getArchtype(o){const e=o[DRAFT_STATE];return e?e.type_:Array.isArray(o)?1:isMap(o)?2:isSet(o)?3:0}function has(o,e){return getArchtype(o)===2?o.has(e):Object.prototype.hasOwnProperty.call(o,e)}function set(o,e,a){const c=getArchtype(o);c===2?o.set(e,a):c===3?o.add(a):o[e]=a}function is(o,e){return o===e?o!==0||1/o===1/e:o!==o&&e!==e}function isMap(o){return o instanceof Map}function isSet(o){return o instanceof Set}function latest(o){return o.copy_||o.base_}function shallowCopy(o,e){if(isMap(o))return new Map(o);if(isSet(o))return new Set(o);if(Array.isArray(o))return Array.prototype.slice.call(o);const a=isPlainObject(o);if(e===!0||e==="class_only"&&!a){const c=Object.getOwnPropertyDescriptors(o);delete c[DRAFT_STATE];let j=Reflect.ownKeys(c);for(let h=0;h<j.length;h++){const et=j[h],ot=c[et];ot.writable===!1&&(ot.writable=!0,ot.configurable=!0),(ot.get||ot.set)&&(c[et]={configurable:!0,writable:!0,enumerable:ot.enumerable,value:o[et]})}return Object.create(getPrototypeOf$1(o),c)}else{const c=getPrototypeOf$1(o);if(c!==null&&a)return{...o};const j=Object.create(c);return Object.assign(j,o)}}function freeze(o,e=!1){return isFrozen(o)||isDraft(o)||!isDraftable(o)||(getArchtype(o)>1&&(o.set=o.add=o.clear=o.delete=dontMutateFrozenCollections),Object.freeze(o),e&&Object.entries(o).forEach(([a,c])=>freeze(c,!0))),o}function dontMutateFrozenCollections(){die(2)}function isFrozen(o){return Object.isFrozen(o)}var plugins={};function getPlugin(o){const e=plugins[o];return e||die(0,o),e}var currentScope;function getCurrentScope(){return currentScope}function createScope(o,e){return{drafts_:[],parent_:o,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(o,e){e&&(getPlugin("Patches"),o.patches_=[],o.inversePatches_=[],o.patchListener_=e)}function revokeScope(o){leaveScope(o),o.drafts_.forEach(revokeDraft),o.drafts_=null}function leaveScope(o){o===currentScope&&(currentScope=o.parent_)}function enterScope(o){return currentScope=createScope(currentScope,o)}function revokeDraft(o){const e=o[DRAFT_STATE];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function processResult(o,e){e.unfinalizedDrafts_=e.drafts_.length;const a=e.drafts_[0];return o!==void 0&&o!==a?(a[DRAFT_STATE].modified_&&(revokeScope(e),die(4)),isDraftable(o)&&(o=finalize(e,o),e.parent_||maybeFreeze(e,o)),e.patches_&&getPlugin("Patches").generateReplacementPatches_(a[DRAFT_STATE].base_,o,e.patches_,e.inversePatches_)):o=finalize(e,a,[]),revokeScope(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),o!==NOTHING?o:void 0}function finalize(o,e,a){if(isFrozen(e))return e;const c=e[DRAFT_STATE];if(!c)return each(e,(j,h)=>finalizeProperty(o,c,e,j,h,a)),e;if(c.scope_!==o)return e;if(!c.modified_)return maybeFreeze(o,c.base_,!0),c.base_;if(!c.finalized_){c.finalized_=!0,c.scope_.unfinalizedDrafts_--;const j=c.copy_;let h=j,et=!1;c.type_===3&&(h=new Set(j),j.clear(),et=!0),each(h,(ot,st)=>finalizeProperty(o,c,j,ot,st,a,et)),maybeFreeze(o,j,!1),a&&o.patches_&&getPlugin("Patches").generatePatches_(c,a,o.patches_,o.inversePatches_)}return c.copy_}function finalizeProperty(o,e,a,c,j,h,et){if(isDraft(j)){const ot=h&&e&&e.type_!==3&&!has(e.assigned_,c)?h.concat(c):void 0,st=finalize(o,j,ot);if(set(a,c,st),isDraft(st))o.canAutoFreeze_=!1;else return}else et&&a.add(j);if(isDraftable(j)&&!isFrozen(j)){if(!o.immer_.autoFreeze_&&o.unfinalizedDrafts_<1)return;finalize(o,j),(!e||!e.scope_.parent_)&&typeof c!="symbol"&&Object.prototype.propertyIsEnumerable.call(a,c)&&maybeFreeze(o,j)}}function maybeFreeze(o,e,a=!1){!o.parent_&&o.immer_.autoFreeze_&&o.canAutoFreeze_&&freeze(e,a)}function createProxyProxy(o,e){const a=Array.isArray(o),c={type_:a?1:0,scope_:e?e.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:o,draft_:null,copy_:null,revoke_:null,isManual_:!1};let j=c,h=objectTraps;a&&(j=[c],h=arrayTraps);const{revoke:et,proxy:ot}=Proxy.revocable(j,h);return c.draft_=ot,c.revoke_=et,ot}var objectTraps={get(o,e){if(e===DRAFT_STATE)return o;const a=latest(o);if(!has(a,e))return readPropFromProto(o,a,e);const c=a[e];return o.finalized_||!isDraftable(c)?c:c===peek(o.base_,e)?(prepareCopy(o),o.copy_[e]=createProxy(c,o)):c},has(o,e){return e in latest(o)},ownKeys(o){return Reflect.ownKeys(latest(o))},set(o,e,a){const c=getDescriptorFromProto(latest(o),e);if(c!=null&&c.set)return c.set.call(o.draft_,a),!0;if(!o.modified_){const j=peek(latest(o),e),h=j==null?void 0:j[DRAFT_STATE];if(h&&h.base_===a)return o.copy_[e]=a,o.assigned_[e]=!1,!0;if(is(a,j)&&(a!==void 0||has(o.base_,e)))return!0;prepareCopy(o),markChanged(o)}return o.copy_[e]===a&&(a!==void 0||e in o.copy_)||Number.isNaN(a)&&Number.isNaN(o.copy_[e])||(o.copy_[e]=a,o.assigned_[e]=!0),!0},deleteProperty(o,e){return peek(o.base_,e)!==void 0||e in o.base_?(o.assigned_[e]=!1,prepareCopy(o),markChanged(o)):delete o.assigned_[e],o.copy_&&delete o.copy_[e],!0},getOwnPropertyDescriptor(o,e){const a=latest(o),c=Reflect.getOwnPropertyDescriptor(a,e);return c&&{writable:!0,configurable:o.type_!==1||e!=="length",enumerable:c.enumerable,value:a[e]}},defineProperty(){die(11)},getPrototypeOf(o){return getPrototypeOf$1(o.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(o,e)=>{arrayTraps[o]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});arrayTraps.deleteProperty=function(o,e){return arrayTraps.set.call(this,o,e,void 0)};arrayTraps.set=function(o,e,a){return objectTraps.set.call(this,o[0],e,a,o[0])};function peek(o,e){const a=o[DRAFT_STATE];return(a?latest(a):o)[e]}function readPropFromProto(o,e,a){var j;const c=getDescriptorFromProto(e,a);return c?"value"in c?c.value:(j=c.get)==null?void 0:j.call(o.draft_):void 0}function getDescriptorFromProto(o,e){if(!(e in o))return;let a=getPrototypeOf$1(o);for(;a;){const c=Object.getOwnPropertyDescriptor(a,e);if(c)return c;a=getPrototypeOf$1(a)}}function markChanged(o){o.modified_||(o.modified_=!0,o.parent_&&markChanged(o.parent_))}function prepareCopy(o){o.copy_||(o.copy_=shallowCopy(o.base_,o.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(o){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,a,c)=>{if(typeof e=="function"&&typeof a!="function"){const h=a;a=e;const et=this;return function(st=h,...lt){return et.produce(st,nt=>a.call(this,nt,...lt))}}typeof a!="function"&&die(6),c!==void 0&&typeof c!="function"&&die(7);let j;if(isDraftable(e)){const h=enterScope(this),et=createProxy(e,void 0);let ot=!0;try{j=a(et),ot=!1}finally{ot?revokeScope(h):leaveScope(h)}return usePatchesInScope(h,c),processResult(j,h)}else if(!e||typeof e!="object"){if(j=a(e),j===void 0&&(j=e),j===NOTHING&&(j=void 0),this.autoFreeze_&&freeze(j,!0),c){const h=[],et=[];getPlugin("Patches").generateReplacementPatches_(e,j,h,et),c(h,et)}return j}else die(1,e)},this.produceWithPatches=(e,a)=>{if(typeof e=="function")return(et,...ot)=>this.produceWithPatches(et,st=>e(st,...ot));let c,j;return[this.produce(e,a,(et,ot)=>{c=et,j=ot}),c,j]},typeof(o==null?void 0:o.autoFreeze)=="boolean"&&this.setAutoFreeze(o.autoFreeze),typeof(o==null?void 0:o.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(o.useStrictShallowCopy)}createDraft(o){isDraftable(o)||die(8),isDraft(o)&&(o=current(o));const e=enterScope(this),a=createProxy(o,void 0);return a[DRAFT_STATE].isManual_=!0,leaveScope(e),a}finishDraft(o,e){const a=o&&o[DRAFT_STATE];(!a||!a.isManual_)&&die(9);const{scope_:c}=a;return usePatchesInScope(c,e),processResult(void 0,c)}setAutoFreeze(o){this.autoFreeze_=o}setUseStrictShallowCopy(o){this.useStrictShallowCopy_=o}applyPatches(o,e){let a;for(a=e.length-1;a>=0;a--){const j=e[a];if(j.path.length===0&&j.op==="replace"){o=j.value;break}}a>-1&&(e=e.slice(a+1));const c=getPlugin("Patches").applyPatches_;return isDraft(o)?c(o,e):this.produce(o,j=>c(j,e))}};function createProxy(o,e){const a=isMap(o)?getPlugin("MapSet").proxyMap_(o,e):isSet(o)?getPlugin("MapSet").proxySet_(o,e):createProxyProxy(o,e);return(e?e.scope_:getCurrentScope()).drafts_.push(a),a}function current(o){return isDraft(o)||die(10,o),currentImpl(o)}function currentImpl(o){if(!isDraftable(o)||isFrozen(o))return o;const e=o[DRAFT_STATE];let a;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,a=shallowCopy(o,e.scope_.immer_.useStrictShallowCopy_)}else a=shallowCopy(o,!0);return each(a,(c,j)=>{set(a,c,currentImpl(j))}),e&&(e.finalized_=!1),a}var immer=new Immer2,produce=immer.produce;immer.produceWithPatches.bind(immer);immer.setAutoFreeze.bind(immer);immer.setUseStrictShallowCopy.bind(immer);immer.applyPatches.bind(immer);immer.createDraft.bind(immer);immer.finishDraft.bind(immer);function createThunkMiddleware(o){return({dispatch:a,getState:c})=>j=>h=>typeof h=="function"?h(a,c,o):j(h)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose:compose.apply(null,arguments)};function createAction(o,e){function a(...c){if(e){let j=e(...c);if(!j)throw new Error(formatProdErrorMessage(0));return{type:o,payload:j.payload,..."meta"in j&&{meta:j.meta},..."error"in j&&{error:j.error}}}return{type:o,payload:c[0]}}return a.toString=()=>`${o}`,a.type=o,a.match=c=>isAction(c)&&c.type===o,a}var Tuple=class du extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,du.prototype)}static get[Symbol.species](){return du}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new du(...e[0].concat(this)):new du(...e.concat(this))}};function freezeDraftable(o){return isDraftable(o)?produce(o,()=>{}):o}function getOrInsertComputed(o,e,a){return o.has(e)?o.get(e):o.set(e,a(e)).get(e)}function isBoolean(o){return typeof o=="boolean"}var buildGetDefaultMiddleware=()=>function(e){const{thunk:a=!0,immutableCheck:c=!0,serializableCheck:j=!0,actionCreatorCheck:h=!0}=e??{};let et=new Tuple;return a&&(isBoolean(a)?et.push(thunk):et.push(withExtraArgument(a.extraArgument))),et},SHOULD_AUTOBATCH="RTK_autoBatch",createQueueWithTimer=o=>e=>{setTimeout(e,o)},autoBatchEnhancer=(o={type:"raf"})=>e=>(...a)=>{const c=e(...a);let j=!0,h=!1,et=!1;const ot=new Set,st=o.type==="tick"?queueMicrotask:o.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):o.type==="callback"?o.queueNotification:createQueueWithTimer(o.timeout),lt=()=>{et=!1,h&&(h=!1,ot.forEach(nt=>nt()))};return Object.assign({},c,{subscribe(nt){const gt=()=>j&&nt(),dt=c.subscribe(gt);return ot.add(nt),()=>{dt(),ot.delete(nt)}},dispatch(nt){var gt;try{return j=!((gt=nt==null?void 0:nt.meta)!=null&&gt[SHOULD_AUTOBATCH]),h=!j,h&&(et||(et=!0,st(lt))),c.dispatch(nt)}finally{j=!0}}})},buildGetDefaultEnhancers=o=>function(a){const{autoBatch:c=!0}=a??{};let j=new Tuple(o);return c&&j.push(autoBatchEnhancer(typeof c=="object"?c:void 0)),j};function configureStore(o){const e=buildGetDefaultMiddleware(),{reducer:a=void 0,middleware:c,devTools:j=!0,preloadedState:h=void 0,enhancers:et=void 0}=o||{};let ot;if(typeof a=="function")ot=a;else if(isPlainObject$1(a))ot=combineReducers(a);else throw new Error(formatProdErrorMessage(1));let st;typeof c=="function"?st=c(e):st=e();let lt=compose;j&&(lt=composeWithDevTools({trace:!1,...typeof j=="object"&&j}));const nt=applyMiddleware(...st),gt=buildGetDefaultEnhancers(nt);let dt=typeof et=="function"?et(gt):gt();const mt=lt(...dt);return createStore(ot,h,mt)}function executeReducerBuilderCallback(o){const e={},a=[];let c;const j={addCase(h,et){const ot=typeof h=="string"?h:h.type;if(!ot)throw new Error(formatProdErrorMessage(28));if(ot in e)throw new Error(formatProdErrorMessage(29));return e[ot]=et,j},addMatcher(h,et){return a.push({matcher:h,reducer:et}),j},addDefaultCase(h){return c=h,j}};return o(j),[e,a,c]}function isStateFunction(o){return typeof o=="function"}function createReducer(o,e){let[a,c,j]=executeReducerBuilderCallback(e),h;if(isStateFunction(o))h=()=>freezeDraftable(o());else{const ot=freezeDraftable(o);h=()=>ot}function et(ot=h(),st){let lt=[a[st.type],...c.filter(({matcher:nt})=>nt(st)).map(({reducer:nt})=>nt)];return lt.filter(nt=>!!nt).length===0&&(lt=[j]),lt.reduce((nt,gt)=>{if(gt)if(isDraft(nt)){const mt=gt(nt,st);return mt===void 0?nt:mt}else{if(isDraftable(nt))return produce(nt,dt=>gt(dt,st));{const dt=gt(nt,st);if(dt===void 0){if(nt===null)return nt;throw Error("A case reducer on a non-draftable value must not return undefined")}return dt}}return nt},ot)}return et.getInitialState=h,et}var asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(o,e){return`${o}/${e}`}function buildCreateSlice({creators:o}={}){var a;const e=(a=o==null?void 0:o.asyncThunk)==null?void 0:a[asyncThunkSymbol];return function(j){const{name:h,reducerPath:et=h}=j;if(!h)throw new Error(formatProdErrorMessage(11));const ot=(typeof j.reducers=="function"?j.reducers(buildReducerCreators()):j.reducers)||{},st=Object.keys(ot),lt={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},nt={addCase(At,Tt){const ft=typeof At=="string"?At:At.type;if(!ft)throw new Error(formatProdErrorMessage(12));if(ft in lt.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return lt.sliceCaseReducersByType[ft]=Tt,nt},addMatcher(At,Tt){return lt.sliceMatchers.push({matcher:At,reducer:Tt}),nt},exposeAction(At,Tt){return lt.actionCreators[At]=Tt,nt},exposeCaseReducer(At,Tt){return lt.sliceCaseReducersByName[At]=Tt,nt}};st.forEach(At=>{const Tt=ot[At],ft={reducerName:At,type:getType(h,At),createNotation:typeof j.reducers=="function"};isAsyncThunkSliceReducerDefinition(Tt)?handleThunkCaseReducerDefinition(ft,Tt,nt,e):handleNormalReducerDefinition(ft,Tt,nt)});function gt(){const[At={},Tt=[],ft=void 0]=typeof j.extraReducers=="function"?executeReducerBuilderCallback(j.extraReducers):[j.extraReducers],_t={...At,...lt.sliceCaseReducersByType};return createReducer(j.initialState,Rt=>{for(let Mt in _t)Rt.addCase(Mt,_t[Mt]);for(let Mt of lt.sliceMatchers)Rt.addMatcher(Mt.matcher,Mt.reducer);for(let Mt of Tt)Rt.addMatcher(Mt.matcher,Mt.reducer);ft&&Rt.addDefaultCase(ft)})}const dt=At=>At,mt=new Map;let vt;function tt(At,Tt){return vt||(vt=gt()),vt(At,Tt)}function bt(){return vt||(vt=gt()),vt.getInitialState()}function ht(At,Tt=!1){function ft(Rt){let Mt=Rt[At];return typeof Mt>"u"&&Tt&&(Mt=bt()),Mt}function _t(Rt=dt){const Mt=getOrInsertComputed(mt,Tt,()=>new WeakMap);return getOrInsertComputed(Mt,Rt,()=>{const Et={};for(const[kt,at]of Object.entries(j.selectors??{}))Et[kt]=wrapSelector(at,Rt,bt,Tt);return Et})}return{reducerPath:At,getSelectors:_t,get selectors(){return _t(ft)},selectSlice:ft}}const St={name:h,reducer:tt,actions:lt.actionCreators,caseReducers:lt.sliceCaseReducersByName,getInitialState:bt,...ht(et),injectInto(At,{reducerPath:Tt,...ft}={}){const _t=Tt??et;return At.inject({reducerPath:_t,reducer:tt},ft),{...St,...ht(_t,!0)}}};return St}}function wrapSelector(o,e,a,c){function j(h,...et){let ot=e(h);return typeof ot>"u"&&c&&(ot=a()),o(ot,...et)}return j.unwrapped=o,j}var createSlice=buildCreateSlice();function buildReducerCreators(){function o(e,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...a}}return o.withTypes=()=>o,{reducer(e){return Object.assign({[e.name](...a){return e(...a)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:a}},asyncThunk:o}}function handleNormalReducerDefinition({type:o,reducerName:e,createNotation:a},c,j){let h,et;if("reducer"in c){if(a&&!isCaseReducerWithPrepareDefinition(c))throw new Error(formatProdErrorMessage(17));h=c.reducer,et=c.prepare}else h=c;j.addCase(o,h).exposeCaseReducer(e,h).exposeAction(e,et?createAction(o,et):createAction(o))}function isAsyncThunkSliceReducerDefinition(o){return o._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(o){return o._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:o,reducerName:e},a,c,j){if(!j)throw new Error(formatProdErrorMessage(18));const{payloadCreator:h,fulfilled:et,pending:ot,rejected:st,settled:lt,options:nt}=a,gt=j(o,h,nt);c.exposeAction(e,gt),et&&c.addCase(gt.fulfilled,et),ot&&c.addCase(gt.pending,ot),st&&c.addCase(gt.rejected,st),lt&&c.addMatcher(gt.settled,lt),c.exposeCaseReducer(e,{fulfilled:et||noop,pending:ot||noop,rejected:st||noop,settled:lt||noop})}function noop(){}function formatProdErrorMessage(o){return`Minified Redux Toolkit error #${o}; visit https://redux-toolkit.js.org/Errors?code=${o} for the full message or use the non-minified dev environment for full errors. `}const initialState$4={sessionService:{address:"",desiredState:"connected"},appId:"usd-viewer-msft",version:"106.1.0",profile:"azurelb-wss",sessionId:"",status:0},serviceSlice=createSlice({name:"service",initialState:initialState$4,reducers:{setService:(o,e)=>{o.sessionService={address:e.payload.address,desiredState:e.payload.desiredState}},setSessionId:(o,e)=>{o.sessionId=e.payload},setStatus:(o,e)=>{o.status=e.payload}}}),{setService}=serviceSlice.actions,{setSessionId}=serviceSlice.actions,{setStatus:setStatus$1}=serviceSlice.actions,serviceReducer=serviceSlice.reducer,initialState$3={server:"",remoteStream:{signalingserver:"",signalingport:0,mediaserver:"",mediaport:0,accessToken:"",sessionid:""},kitState:"unknown"},appStreamSlice=createSlice({name:"appstream",initialState:initialState$3,reducers:{setServer:(o,e)=>{o.server=e.payload},setRemoteStream:(o,e)=>{o.remoteStream={signalingserver:e.payload.signalingserver,signalingport:e.payload.signalingport,mediaserver:e.payload.mediaserver,mediaport:e.payload.mediaport,accessToken:e.payload.accessToken,sessionid:e.payload.sessionid}},setKitState:(o,e)=>{o.kitState=e.payload}}}),{setServer}=appStreamSlice.actions,{setRemoteStream}=appStreamSlice.actions,{setKitState}=appStreamSlice.actions,appStreamReducer=appStreamSlice.reducer,initialState$2={url:"",loadingState:"idle",loadedUrl:""},usdStorageSlice=createSlice({name:"usdStorage",initialState:initialState$2,reducers:{setURL:(o,e)=>{o.url=e.payload},setLoadingState:(o,e)=>{o.loadingState=e.payload},setLoadedURL:(o,e)=>{o.loadedUrl=e.payload}}}),{setURL}=usdStorageSlice.actions,{setLoadingState}=usdStorageSlice.actions,{setLoadedURL}=usdStorageSlice.actions,usdStorageReducer=usdStorageSlice.reducer;var sha256$2={exports:{}},cryptoBrowserify={},browser$d={exports:{}},safeBuffer$1={exports:{}};const require$$1$2=getAugmentedNamespace(dist$1);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,function(o,e){var a=require$$1$2,c=a.Buffer;function j(et,ot){for(var st in et)ot[st]=et[st]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?o.exports=a:(j(a,e),e.Buffer=h);function h(et,ot,st){return c(et,ot,st)}h.prototype=Object.create(c.prototype),j(c,h),h.from=function(et,ot,st){if(typeof et=="number")throw new TypeError("Argument must not be a number");return c(et,ot,st)},h.alloc=function(et,ot,st){if(typeof et!="number")throw new TypeError("Argument must be a number");var lt=c(et);return ot!==void 0?typeof st=="string"?lt.fill(ot,st):lt.fill(ot):lt.fill(0),lt},h.allocUnsafe=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return c(et)},h.allocUnsafeSlow=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(et)}}(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$d.exports;hasRequiredBrowser$b=1;var o=65536,e=4294967295;function a(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var c=requireSafeBuffer$1().Buffer,j=commonjsGlobal.crypto||commonjsGlobal.msCrypto;j&&j.getRandomValues?browser$d.exports=h:browser$d.exports=a;function h(et,ot){if(et>e)throw new RangeError("requested too many random bytes");var st=c.allocUnsafe(et);if(et>0)if(et>o)for(var lt=0;lt<et;lt+=o)j.getRandomValues(st.slice(lt,lt+o));else j.getRandomValues(st);return typeof ot=="function"?process$1.nextTick(function(){ot(null,st)}):st}return browser$d.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,a){a&&(e.super_=a,e.prototype=Object.create(a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,a){if(a){e.super_=a;var c=function(){};c.prototype=a.prototype,e.prototype=new c,e.prototype.constructor=e}}),inherits_browser.exports}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(e,a,c){return Function.prototype.apply.call(e,a,c)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(o){console&&console.warn&&console.warn(o)}var NumberIsNaN=Number.isNaN||function(e){return e!==e};function EventEmitter$4(){EventEmitter$4.init.call(this)}events.exports=EventEmitter$4;events.exports.once=once;EventEmitter$4.EventEmitter=EventEmitter$4;EventEmitter$4.prototype._events=void 0;EventEmitter$4.prototype._eventsCount=0;EventEmitter$4.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(o){if(typeof o!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}Object.defineProperty(EventEmitter$4,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(o){if(typeof o!="number"||o<0||NumberIsNaN(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");defaultMaxListeners=o}});EventEmitter$4.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$4.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(o){return o._maxListeners===void 0?EventEmitter$4.defaultMaxListeners:o._maxListeners}EventEmitter$4.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$4.prototype.emit=function(e){for(var a=[],c=1;c<arguments.length;c++)a.push(arguments[c]);var j=e==="error",h=this._events;if(h!==void 0)j=j&&h.error===void 0;else if(!j)return!1;if(j){var et;if(a.length>0&&(et=a[0]),et instanceof Error)throw et;var ot=new Error("Unhandled error."+(et?" ("+et.message+")":""));throw ot.context=et,ot}var st=h[e];if(st===void 0)return!1;if(typeof st=="function")ReflectApply(st,this,a);else for(var lt=st.length,nt=arrayClone(st,lt),c=0;c<lt;++c)ReflectApply(nt[c],this,a);return!0};function _addListener(o,e,a,c){var j,h,et;if(checkListener(a),h=o._events,h===void 0?(h=o._events=Object.create(null),o._eventsCount=0):(h.newListener!==void 0&&(o.emit("newListener",e,a.listener?a.listener:a),h=o._events),et=h[e]),et===void 0)et=h[e]=a,++o._eventsCount;else if(typeof et=="function"?et=h[e]=c?[a,et]:[et,a]:c?et.unshift(a):et.push(a),j=_getMaxListeners(o),j>0&&et.length>j&&!et.warned){et.warned=!0;var ot=new Error("Possible EventEmitter memory leak detected. "+et.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");ot.name="MaxListenersExceededWarning",ot.emitter=o,ot.type=e,ot.count=et.length,ProcessEmitWarning(ot)}return o}EventEmitter$4.prototype.addListener=function(e,a){return _addListener(this,e,a,!1)};EventEmitter$4.prototype.on=EventEmitter$4.prototype.addListener;EventEmitter$4.prototype.prependListener=function(e,a){return _addListener(this,e,a,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(o,e,a){var c={fired:!1,wrapFn:void 0,target:o,type:e,listener:a},j=onceWrapper.bind(c);return j.listener=a,c.wrapFn=j,j}EventEmitter$4.prototype.once=function(e,a){return checkListener(a),this.on(e,_onceWrap(this,e,a)),this};EventEmitter$4.prototype.prependOnceListener=function(e,a){return checkListener(a),this.prependListener(e,_onceWrap(this,e,a)),this};EventEmitter$4.prototype.removeListener=function(e,a){var c,j,h,et,ot;if(checkListener(a),j=this._events,j===void 0)return this;if(c=j[e],c===void 0)return this;if(c===a||c.listener===a)--this._eventsCount===0?this._events=Object.create(null):(delete j[e],j.removeListener&&this.emit("removeListener",e,c.listener||a));else if(typeof c!="function"){for(h=-1,et=c.length-1;et>=0;et--)if(c[et]===a||c[et].listener===a){ot=c[et].listener,h=et;break}if(h<0)return this;h===0?c.shift():spliceOne(c,h),c.length===1&&(j[e]=c[0]),j.removeListener!==void 0&&this.emit("removeListener",e,ot||a)}return this};EventEmitter$4.prototype.off=EventEmitter$4.prototype.removeListener;EventEmitter$4.prototype.removeAllListeners=function(e){var a,c,j;if(c=this._events,c===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete c[e]),this;if(arguments.length===0){var h=Object.keys(c),et;for(j=0;j<h.length;++j)et=h[j],et!=="removeListener"&&this.removeAllListeners(et);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(a=c[e],typeof a=="function")this.removeListener(e,a);else if(a!==void 0)for(j=a.length-1;j>=0;j--)this.removeListener(e,a[j]);return this};function _listeners(o,e,a){var c=o._events;if(c===void 0)return[];var j=c[e];return j===void 0?[]:typeof j=="function"?a?[j.listener||j]:[j]:a?unwrapListeners(j):arrayClone(j,j.length)}EventEmitter$4.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$4.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$4.listenerCount=function(o,e){return typeof o.listenerCount=="function"?o.listenerCount(e):listenerCount.call(o,e)};EventEmitter$4.prototype.listenerCount=listenerCount;function listenerCount(o){var e=this._events;if(e!==void 0){var a=e[o];if(typeof a=="function")return 1;if(a!==void 0)return a.length}return 0}EventEmitter$4.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(o,e){for(var a=new Array(e),c=0;c<e;++c)a[c]=o[c];return a}function spliceOne(o,e){for(;e+1<o.length;e++)o[e]=o[e+1];o.pop()}function unwrapListeners(o){for(var e=new Array(o.length),a=0;a<e.length;++a)e[a]=o[a].listener||o[a];return e}function once(o,e){return new Promise(function(a,c){function j(et){o.removeListener(e,h),c(et)}function h(){typeof o.removeListener=="function"&&o.removeListener("error",j),a([].slice.call(arguments))}eventTargetAgnosticAddListener(o,e,h,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(o,j,{once:!0})})}function addErrorHandlerIfEventEmitter(o,e,a){typeof o.on=="function"&&eventTargetAgnosticAddListener(o,"error",e,a)}function eventTargetAgnosticAddListener(o,e,a,c){if(typeof o.on=="function")c.once?o.once(e,a):o.on(e,a);else if(typeof o.addEventListener=="function")o.addEventListener(e,function j(h){c.once&&o.removeEventListener(e,j),a(h)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o)}var eventsExports=events.exports,streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=eventsExports.EventEmitter),streamBrowser$1}var util$8={},types$3={},shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},a=Symbol("test"),c=Object(a);if(typeof a=="string"||Object.prototype.toString.call(a)!=="[object Symbol]"||Object.prototype.toString.call(c)!=="[object Symbol]")return!1;var j=42;e[a]=j;for(var h in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var et=Object.getOwnPropertySymbols(e);if(et.length!==1||et[0]!==a||!Object.prototype.propertyIsEnumerable.call(e,a))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var ot=Object.getOwnPropertyDescriptor(e,a);if(ot.value!==j||ot.enumerable!==!0)return!1}return!0},hasSymbols$2=shams$1,shams=function(){return hasSymbols$2()&&!!Symbol.toStringTag},esObjectAtoms=Object,esErrors=Error,_eval=EvalError,range=RangeError,ref=ReferenceError,syntax=SyntaxError,type=TypeError,uri=URIError,abs$1=Math.abs,floor$1=Math.floor,max$2=Math.max,min$1=Math.min,pow$1=Math.pow,round$1=Math.round,_isNaN=Number.isNaN||function(e){return e!==e},$isNaN=_isNaN,sign$2=function(e){return $isNaN(e)||e===0?e:e<0?-1:1},gOPD$3=Object.getOwnPropertyDescriptor,$gOPD$1=gOPD$3;if($gOPD$1)try{$gOPD$1([],"length")}catch{$gOPD$1=null}var gopd$1=$gOPD$1,$defineProperty$3=Object.defineProperty||!1;if($defineProperty$3)try{$defineProperty$3({},"a",{value:1})}catch{$defineProperty$3=!1}var esDefineProperty=$defineProperty$3,hasSymbols$1,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols$1;hasRequiredHasSymbols=1;var o=typeof Symbol<"u"&&Symbol,e=shams$1;return hasSymbols$1=function(){return typeof o!="function"||typeof Symbol!="function"||typeof o("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols$1}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var o=esObjectAtoms;return Object_getPrototypeOf=o.getPrototypeOf||null,Object_getPrototypeOf}var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$3=Object.prototype.toString,max$1=Math.max,funcType="[object Function]",concatty=function(e,a){for(var c=[],j=0;j<e.length;j+=1)c[j]=e[j];for(var h=0;h<a.length;h+=1)c[h+e.length]=a[h];return c},slicy=function(e,a){for(var c=[],j=a,h=0;j<e.length;j+=1,h+=1)c[h]=e[j];return c},joiny=function(o,e){for(var a="",c=0;c<o.length;c+=1)a+=o[c],c+1<o.length&&(a+=e);return a},implementation$1=function(e){var a=this;if(typeof a!="function"||toStr$3.apply(a)!==funcType)throw new TypeError(ERROR_MESSAGE+a);for(var c=slicy(arguments,1),j,h=function(){if(this instanceof j){var nt=a.apply(this,concatty(c,arguments));return Object(nt)===nt?nt:this}return a.apply(e,concatty(c,arguments))},et=max$1(0,a.length-c.length),ot=[],st=0;st<et;st++)ot[st]="$"+st;if(j=Function("binder","return function ("+joiny(ot,",")+"){ return binder.apply(this,arguments); }")(h),a.prototype){var lt=function(){};lt.prototype=a.prototype,j.prototype=new lt,lt.prototype=null}return j},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,functionCall=Function.prototype.call,functionApply=Function.prototype.apply,reflectApply$1=typeof Reflect<"u"&&Reflect&&Reflect.apply,bind$4=functionBind,$apply$2=functionApply,$call$2=functionCall,$reflectApply=reflectApply$1,actualApply$1=$reflectApply||bind$4.call($call$2,$apply$2),bind$3=functionBind,$TypeError$4=type,$call$1=functionCall,$actualApply=actualApply$1,callBindApplyHelpers=function(e){if(e.length<1||typeof e[0]!="function")throw new $TypeError$4("a function is required");return $actualApply(bind$3,$call$1,e)},get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var o=callBindApplyHelpers,e=gopd$1,a;try{a=[].__proto__===Array.prototype}catch(et){if(!et||typeof et!="object"||!("code"in et)||et.code!=="ERR_PROTO_ACCESS")throw et}var c=!!a&&e&&e(Object.prototype,"__proto__"),j=Object,h=j.getPrototypeOf;return get=c&&typeof c.get=="function"?o([c.get]):typeof h=="function"?function(ot){return h(ot==null?ot:j(ot))}:!1,get}var getProto$2,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto$2;hasRequiredGetProto=1;var o=requireReflect_getPrototypeOf(),e=requireObject_getPrototypeOf(),a=requireGet();return getProto$2=o?function(j){return o(j)}:e?function(j){if(!j||typeof j!="object"&&typeof j!="function")throw new TypeError("getProto: not an object");return e(j)}:a?function(j){return a(j)}:null,getProto$2}var call=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$2=functionBind,hasown=bind$2.call(call,$hasOwn),undefined$1,$Object=esObjectAtoms,$Error=esErrors,$EvalError=_eval,$RangeError=range,$ReferenceError=ref,$SyntaxError$1=syntax,$TypeError$3=type,$URIError=uri,abs=abs$1,floor=floor$1,max=max$2,min=min$1,pow=pow$1,round=round$1,sign$1=sign$2,$Function=Function,getEvalledConstructor=function(o){try{return $Function('"use strict"; return ('+o+").constructor;")()}catch{}},$gOPD=gopd$1,$defineProperty$2=esDefineProperty,throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=requireHasSymbols()(),getProto$1=requireGetProto(),$ObjectGPO=requireObject_getPrototypeOf(),$ReflectGPO=requireReflect_getPrototypeOf(),$apply$1=functionApply,$call=functionCall,needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$1?undefined$1:getProto$1(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto$1?getProto$1([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float16Array%":typeof Float16Array>"u"?undefined$1:Float16Array,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto$1?getProto$1(getProto$1([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":$Object,"%Object.getOwnPropertyDescriptor%":$gOPD,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto$1?getProto$1(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet,"%Function.prototype.call%":$call,"%Function.prototype.apply%":$apply$1,"%Object.defineProperty%":$defineProperty$2,"%Object.getPrototypeOf%":$ObjectGPO,"%Math.abs%":abs,"%Math.floor%":floor,"%Math.max%":max,"%Math.min%":min,"%Math.pow%":pow,"%Math.round%":round,"%Math.sign%":sign$1,"%Reflect.getPrototypeOf%":$ReflectGPO};if(getProto$1)try{null.error}catch(o){var errorProto=getProto$1(getProto$1(o));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function o(e){var a;if(e==="%AsyncFunction%")a=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")a=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")a=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var c=o("%AsyncGeneratorFunction%");c&&(a=c.prototype)}else if(e==="%AsyncIteratorPrototype%"){var j=o("%AsyncGenerator%");j&&getProto$1&&(a=getProto$1(j.prototype))}return INTRINSICS[e]=a,a},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$1=functionBind,hasOwn$1=hasown,$concat=bind$1.call($call,Array.prototype.concat),$spliceApply=bind$1.call($apply$1,Array.prototype.splice),$replace=bind$1.call($call,String.prototype.replace),$strSlice=bind$1.call($call,String.prototype.slice),$exec$2=bind$1.call($call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var a=$strSlice(e,0,1),c=$strSlice(e,-1);if(a==="%"&&c!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(c==="%"&&a!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var j=[];return $replace(e,rePropName,function(h,et,ot,st){j[j.length]=ot?$replace(st,reEscapeChar,"$1"):et||h}),j},getBaseIntrinsic=function(e,a){var c=e,j;if(hasOwn$1(LEGACY_ALIASES,c)&&(j=LEGACY_ALIASES[c],c="%"+j[0]+"%"),hasOwn$1(INTRINSICS,c)){var h=INTRINSICS[c];if(h===needsEval&&(h=doEval(c)),typeof h>"u"&&!a)throw new $TypeError$3("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:j,name:c,value:h}}throw new $SyntaxError$1("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,a){if(typeof e!="string"||e.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof a!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec$2(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var c=stringToPath(e),j=c.length>0?c[0]:"",h=getBaseIntrinsic("%"+j+"%",a),et=h.name,ot=h.value,st=!1,lt=h.alias;lt&&(j=lt[0],$spliceApply(c,$concat([0,1],lt)));for(var nt=1,gt=!0;nt<c.length;nt+=1){var dt=c[nt],mt=$strSlice(dt,0,1),vt=$strSlice(dt,-1);if((mt==='"'||mt==="'"||mt==="`"||vt==='"'||vt==="'"||vt==="`")&&mt!==vt)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((dt==="constructor"||!gt)&&(st=!0),j+="."+dt,et="%"+j+"%",hasOwn$1(INTRINSICS,et))ot=INTRINSICS[et];else if(ot!=null){if(!(dt in ot)){if(!a)throw new $TypeError$3("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD&&nt+1>=c.length){var tt=$gOPD(ot,dt);gt=!!tt,gt&&"get"in tt&&!("originalValue"in tt.get)?ot=tt.get:ot=ot[dt]}else gt=hasOwn$1(ot,dt),ot=ot[dt];gt&&!st&&(INTRINSICS[et]=ot)}}return ot},GetIntrinsic$1=getIntrinsic,callBindBasic=callBindApplyHelpers,$indexOf$1=callBindBasic([GetIntrinsic$1("%String.prototype.indexOf%")]),callBound$5=function(e,a){var c=GetIntrinsic$1(e,!!a);return typeof c=="function"&&$indexOf$1(e,".prototype.")>-1?callBindBasic([c]):c},hasToStringTag$4=shams(),callBound$4=callBound$5,$toString$2=callBound$4("Object.prototype.toString"),isStandardArguments=function(e){return hasToStringTag$4&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:$toString$2(e)==="[object Arguments]"},isLegacyArguments=function(e){return isStandardArguments(e)?!0:e!==null&&typeof e=="object"&&"length"in e&&typeof e.length=="number"&&e.length>=0&&$toString$2(e)!=="[object Array]"&&"callee"in e&&$toString$2(e.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments=supportsStandardArguments?isStandardArguments:isLegacyArguments,callBound$3=callBound$5,hasToStringTag$3=shams(),hasOwn=hasown,gOPD$2=gopd$1,fn;if(hasToStringTag$3){var $exec$1=callBound$3("RegExp.prototype.exec"),isRegexMarker={},throwRegexMarker=function(){throw isRegexMarker},badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker};typeof Symbol.toPrimitive=="symbol"&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker),fn=function(e){if(!e||typeof e!="object")return!1;var a=gOPD$2(e,"lastIndex"),c=a&&hasOwn(a,"value");if(!c)return!1;try{$exec$1(e,badStringifier)}catch(j){return j===isRegexMarker}}}else{var $toString$1=callBound$3("Object.prototype.toString"),regexClass="[object RegExp]";fn=function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:$toString$1(e)===regexClass}}var isRegex$1=fn,callBound$2=callBound$5,isRegex=isRegex$1,$exec=callBound$2("RegExp.prototype.exec"),$TypeError$2=type,safeRegexTest$1=function(e){if(!isRegex(e))throw new $TypeError$2("`regex` must be a RegExp");return function(c){return $exec(e,c)!==null}},callBound$1=callBound$5,safeRegexTest=safeRegexTest$1,isFnRegex=safeRegexTest(/^\s*(?:function)?\*/),hasToStringTag$2=shams(),getProto=requireGetProto(),toStr$2=callBound$1("Object.prototype.toString"),fnToStr$1=callBound$1("Function.prototype.toString"),getGeneratorFunc=function(){if(!hasToStringTag$2)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function(e){if(typeof e!="function")return!1;if(isFnRegex(fnToStr$1(e)))return!0;if(!hasToStringTag$2){var a=toStr$2(e);return a==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var c=getGeneratorFunc();GeneratorFunction=c?getProto(c):!1}return getProto(e)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(o){o!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(e){try{var a=fnToStr.call(e);return constructorRegex.test(a)}catch{return!1}},tryFunctionObject=function(e){try{return isES6ClassFn(e)?!1:(fnToStr.call(e),!0)}catch{return!1}},toStr$1=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$1=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all=document.all;toStr$1.call(all)===toStr$1.call(document.all)&&(isDDA=function(e){if((isIE68||!e)&&(typeof e>"u"||typeof e=="object"))try{var a=toStr$1.call(e);return(a===ddaClass||a===ddaClass2||a===ddaClass3||a===objectClass)&&e("")==null}catch{}return!1})}var isCallable$1=reflectApply?function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{reflectApply(e,null,badArrayLike)}catch(a){if(a!==isCallableMarker)return!1}return!isES6ClassFn(e)&&tryFunctionObject(e)}:function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(hasToStringTag$1)return tryFunctionObject(e);if(isES6ClassFn(e))return!1;var a=toStr$1.call(e);return a!==fnClass&&a!==genClass&&!/^\[object HTML/.test(a)?!1:tryFunctionObject(e)},isCallable=isCallable$1,toStr=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty,forEachArray=function(e,a,c){for(var j=0,h=e.length;j<h;j++)hasOwnProperty.call(e,j)&&(c==null?a(e[j],j,e):a.call(c,e[j],j,e))},forEachString=function(e,a,c){for(var j=0,h=e.length;j<h;j++)c==null?a(e.charAt(j),j,e):a.call(c,e.charAt(j),j,e)},forEachObject=function(e,a,c){for(var j in e)hasOwnProperty.call(e,j)&&(c==null?a(e[j],j,e):a.call(c,e[j],j,e))};function isArray(o){return toStr.call(o)==="[object Array]"}var forEach$1=function(e,a,c){if(!isCallable(a))throw new TypeError("iterator must be a function");var j;arguments.length>=3&&(j=c),isArray(e)?forEachArray(e,a,j):typeof e=="string"?forEachString(e,a,j):forEachObject(e,a,j)},possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],possibleNames=possibleTypedArrayNames,g$1=typeof globalThis>"u"?commonjsGlobal:globalThis,availableTypedArrays$1=function(){for(var e=[],a=0;a<possibleNames.length;a++)typeof g$1[possibleNames[a]]=="function"&&(e[e.length]=possibleNames[a]);return e},callBind$1={exports:{}},$defineProperty$1=esDefineProperty,$SyntaxError=syntax,$TypeError$1=type,gopd=gopd$1,defineDataProperty=function(e,a,c){if(!e||typeof e!="object"&&typeof e!="function")throw new $TypeError$1("`obj` must be an object or a function`");if(typeof a!="string"&&typeof a!="symbol")throw new $TypeError$1("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$1("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$1("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$1("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$1("`loose`, if provided, must be a boolean");var j=arguments.length>3?arguments[3]:null,h=arguments.length>4?arguments[4]:null,et=arguments.length>5?arguments[5]:null,ot=arguments.length>6?arguments[6]:!1,st=!!gopd&&gopd(e,a);if($defineProperty$1)$defineProperty$1(e,a,{configurable:et===null&&st?st.configurable:!et,enumerable:j===null&&st?st.enumerable:!j,value:c,writable:h===null&&st?st.writable:!h});else if(ot||!j&&!h&&!et)e[a]=c;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},$defineProperty=esDefineProperty,hasPropertyDescriptors=function(){return!!$defineProperty};hasPropertyDescriptors.hasArrayLengthDefineBug=function(){if(!$defineProperty)return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors,GetIntrinsic=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD$1=gopd$1,$TypeError=type,$floor=GetIntrinsic("%Math.floor%"),setFunctionLength=function(e,a){if(typeof e!="function")throw new $TypeError("`fn` is not a function");if(typeof a!="number"||a<0||a>4294967295||$floor(a)!==a)throw new $TypeError("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],j=!0,h=!0;if("length"in e&&gOPD$1){var et=gOPD$1(e,"length");et&&!et.configurable&&(j=!1),et&&!et.writable&&(h=!1)}return(j||h||!c)&&(hasDescriptors?define(e,"length",a,!0,!0):define(e,"length",a)),e},bind=functionBind,$apply=functionApply,actualApply=actualApply$1,applyBind=function(){return actualApply(bind,$apply,arguments)};(function(o){var e=setFunctionLength,a=esDefineProperty,c=callBindApplyHelpers,j=applyBind;o.exports=function(et){var ot=c(arguments),st=et.length-(arguments.length-1);return e(ot,1+(st>0?st:0),!0)},a?a(o.exports,"apply",{value:j}):o.exports.apply=j})(callBind$1);var callBindExports=callBind$1.exports,forEach=forEach$1,availableTypedArrays=availableTypedArrays$1,callBind=callBindExports,callBound=callBound$5,gOPD=gopd$1,$toString=callBound("Object.prototype.toString"),hasToStringTag=shams(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),getPrototypeOf=Object.getPrototypeOf,$indexOf=callBound("Array.prototype.indexOf",!0)||function(e,a){for(var c=0;c<e.length;c+=1)if(e[c]===a)return c;return-1},cache={__proto__:null};hasToStringTag&&gOPD&&getPrototypeOf?forEach(typedArrays,function(o){var e=new g[o];if(Symbol.toStringTag in e){var a=getPrototypeOf(e),c=gOPD(a,Symbol.toStringTag);if(!c){var j=getPrototypeOf(a);c=gOPD(j,Symbol.toStringTag)}cache["$"+o]=callBind(c.get)}}):forEach(typedArrays,function(o){var e=new g[o],a=e.slice||e.set;a&&(cache["$"+o]=callBind(a))});var tryTypedArrays=function(e){var a=!1;return forEach(cache,function(c,j){if(!a)try{"$"+c(e)===j&&(a=$slice(j,1))}catch{}}),a},trySlices=function(e){var a=!1;return forEach(cache,function(c,j){if(!a)try{c(e),a=$slice(j,1)}catch{}}),a},whichTypedArray$1=function(e){if(!e||typeof e!="object")return!1;if(!hasToStringTag){var a=$slice($toString(e),8,-1);return $indexOf(typedArrays,a)>-1?a:a!=="Object"?!1:trySlices(e)}return gOPD?tryTypedArrays(e):null},whichTypedArray=whichTypedArray$1,isTypedArray=function(e){return!!whichTypedArray(e)};(function(o){var e=isArguments,a=isGeneratorFunction,c=whichTypedArray$1,j=isTypedArray;function h(wr){return wr.call.bind(wr)}var et=typeof BigInt<"u",ot=typeof Symbol<"u",st=h(Object.prototype.toString),lt=h(Number.prototype.valueOf),nt=h(String.prototype.valueOf),gt=h(Boolean.prototype.valueOf);if(et)var dt=h(BigInt.prototype.valueOf);if(ot)var mt=h(Symbol.prototype.valueOf);function vt(wr,En){if(typeof wr!="object")return!1;try{return En(wr),!0}catch{return!1}}o.isArgumentsObject=e,o.isGeneratorFunction=a,o.isTypedArray=j;function tt(wr){return typeof Promise<"u"&&wr instanceof Promise||wr!==null&&typeof wr=="object"&&typeof wr.then=="function"&&typeof wr.catch=="function"}o.isPromise=tt;function bt(wr){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(wr):j(wr)||It(wr)}o.isArrayBufferView=bt;function ht(wr){return c(wr)==="Uint8Array"}o.isUint8Array=ht;function St(wr){return c(wr)==="Uint8ClampedArray"}o.isUint8ClampedArray=St;function At(wr){return c(wr)==="Uint16Array"}o.isUint16Array=At;function Tt(wr){return c(wr)==="Uint32Array"}o.isUint32Array=Tt;function ft(wr){return c(wr)==="Int8Array"}o.isInt8Array=ft;function _t(wr){return c(wr)==="Int16Array"}o.isInt16Array=_t;function Rt(wr){return c(wr)==="Int32Array"}o.isInt32Array=Rt;function Mt(wr){return c(wr)==="Float32Array"}o.isFloat32Array=Mt;function Et(wr){return c(wr)==="Float64Array"}o.isFloat64Array=Et;function kt(wr){return c(wr)==="BigInt64Array"}o.isBigInt64Array=kt;function at(wr){return c(wr)==="BigUint64Array"}o.isBigUint64Array=at;function s(wr){return st(wr)==="[object Map]"}s.working=typeof Map<"u"&&s(new Map);function b(wr){return typeof Map>"u"?!1:s.working?s(wr):wr instanceof Map}o.isMap=b;function $(wr){return st(wr)==="[object Set]"}$.working=typeof Set<"u"&&$(new Set);function _e(wr){return typeof Set>"u"?!1:$.working?$(wr):wr instanceof Set}o.isSet=_e;function it(wr){return st(wr)==="[object WeakMap]"}it.working=typeof WeakMap<"u"&&it(new WeakMap);function pt(wr){return typeof WeakMap>"u"?!1:it.working?it(wr):wr instanceof WeakMap}o.isWeakMap=pt;function yt(wr){return st(wr)==="[object WeakSet]"}yt.working=typeof WeakSet<"u"&&yt(new WeakSet);function ct(wr){return yt(wr)}o.isWeakSet=ct;function _(wr){return st(wr)==="[object ArrayBuffer]"}_.working=typeof ArrayBuffer<"u"&&_(new ArrayBuffer);function rt(wr){return typeof ArrayBuffer>"u"?!1:_.working?_(wr):wr instanceof ArrayBuffer}o.isArrayBuffer=rt;function Ct(wr){return st(wr)==="[object DataView]"}Ct.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Ct(new DataView(new ArrayBuffer(1),0,1));function It(wr){return typeof DataView>"u"?!1:Ct.working?Ct(wr):wr instanceof DataView}o.isDataView=It;var Nt=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Ut(wr){return st(wr)==="[object SharedArrayBuffer]"}function Gt(wr){return typeof Nt>"u"?!1:(typeof Ut.working>"u"&&(Ut.working=Ut(new Nt)),Ut.working?Ut(wr):wr instanceof Nt)}o.isSharedArrayBuffer=Gt;function Pt(wr){return st(wr)==="[object AsyncFunction]"}o.isAsyncFunction=Pt;function qt(wr){return st(wr)==="[object Map Iterator]"}o.isMapIterator=qt;function Kt(wr){return st(wr)==="[object Set Iterator]"}o.isSetIterator=Kt;function jt(wr){return st(wr)==="[object Generator]"}o.isGeneratorObject=jt;function Ht(wr){return st(wr)==="[object WebAssembly.Module]"}o.isWebAssemblyCompiledModule=Ht;function Bt(wr){return vt(wr,lt)}o.isNumberObject=Bt;function Jt(wr){return vt(wr,nt)}o.isStringObject=Jt;function sr(wr){return vt(wr,gt)}o.isBooleanObject=sr;function hr(wr){return et&&vt(wr,dt)}o.isBigIntObject=hr;function Ar(wr){return ot&&vt(wr,mt)}o.isSymbolObject=Ar;function yn(wr){return Bt(wr)||Jt(wr)||sr(wr)||hr(wr)||Ar(wr)}o.isBoxedPrimitive=yn;function Lr(wr){return typeof Uint8Array<"u"&&(rt(wr)||Gt(wr))}o.isAnyArrayBuffer=Lr,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(wr){Object.defineProperty(o,wr,{enumerable:!1,value:function(){throw new Error(wr+" is not supported in userland")}})})})(types$3);var isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"};(function(o){var e={},a=Object.getOwnPropertyDescriptors||function(Nt){for(var Ut=Object.keys(Nt),Gt={},Pt=0;Pt<Ut.length;Pt++)Gt[Ut[Pt]]=Object.getOwnPropertyDescriptor(Nt,Ut[Pt]);return Gt},c=/%[sdj%]/g;o.format=function(It){if(!_t(It)){for(var Nt=[],Ut=0;Ut<arguments.length;Ut++)Nt.push(ot(arguments[Ut]));return Nt.join(" ")}for(var Ut=1,Gt=arguments,Pt=Gt.length,qt=String(It).replace(c,function(jt){if(jt==="%%")return"%";if(Ut>=Pt)return jt;switch(jt){case"%s":return String(Gt[Ut++]);case"%d":return Number(Gt[Ut++]);case"%j":try{return JSON.stringify(Gt[Ut++])}catch{return"[Circular]"}default:return jt}}),Kt=Gt[Ut];Ut<Pt;Kt=Gt[++Ut])At(Kt)||!kt(Kt)?qt+=" "+Kt:qt+=" "+ot(Kt);return qt},o.deprecate=function(It,Nt){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return It;if(typeof process$1>"u")return function(){return o.deprecate(It,Nt).apply(this,arguments)};var Ut=!1;function Gt(){if(!Ut){if(process$1.throwDeprecation)throw new Error(Nt);process$1.traceDeprecation?console.trace(Nt):console.error(Nt),Ut=!0}return It.apply(this,arguments)}return Gt};var j={},h=/^$/;if(e.NODE_DEBUG){var et=e.NODE_DEBUG;et=et.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),h=new RegExp("^"+et+"$","i")}o.debuglog=function(It){if(It=It.toUpperCase(),!j[It])if(h.test(It)){var Nt=process$1.pid;j[It]=function(){var Ut=o.format.apply(o,arguments);console.error("%s %d: %s",It,Nt,Ut)}}else j[It]=function(){};return j[It]};function ot(It,Nt){var Ut={seen:[],stylize:lt};return arguments.length>=3&&(Ut.depth=arguments[2]),arguments.length>=4&&(Ut.colors=arguments[3]),St(Nt)?Ut.showHidden=Nt:Nt&&o._extend(Ut,Nt),Mt(Ut.showHidden)&&(Ut.showHidden=!1),Mt(Ut.depth)&&(Ut.depth=2),Mt(Ut.colors)&&(Ut.colors=!1),Mt(Ut.customInspect)&&(Ut.customInspect=!0),Ut.colors&&(Ut.stylize=st),gt(Ut,It,Ut.depth)}o.inspect=ot,ot.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ot.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function st(It,Nt){var Ut=ot.styles[Nt];return Ut?"\x1B["+ot.colors[Ut][0]+"m"+It+"\x1B["+ot.colors[Ut][1]+"m":It}function lt(It,Nt){return It}function nt(It){var Nt={};return It.forEach(function(Ut,Gt){Nt[Ut]=!0}),Nt}function gt(It,Nt,Ut){if(It.customInspect&&Nt&&b(Nt.inspect)&&Nt.inspect!==o.inspect&&!(Nt.constructor&&Nt.constructor.prototype===Nt)){var Gt=Nt.inspect(Ut,It);return _t(Gt)||(Gt=gt(It,Gt,Ut)),Gt}var Pt=dt(It,Nt);if(Pt)return Pt;var qt=Object.keys(Nt),Kt=nt(qt);if(It.showHidden&&(qt=Object.getOwnPropertyNames(Nt)),s(Nt)&&(qt.indexOf("message")>=0||qt.indexOf("description")>=0))return mt(Nt);if(qt.length===0){if(b(Nt)){var jt=Nt.name?": "+Nt.name:"";return It.stylize("[Function"+jt+"]","special")}if(Et(Nt))return It.stylize(RegExp.prototype.toString.call(Nt),"regexp");if(at(Nt))return It.stylize(Date.prototype.toString.call(Nt),"date");if(s(Nt))return mt(Nt)}var Ht="",Bt=!1,Jt=["{","}"];if(ht(Nt)&&(Bt=!0,Jt=["[","]"]),b(Nt)){var sr=Nt.name?": "+Nt.name:"";Ht=" [Function"+sr+"]"}if(Et(Nt)&&(Ht=" "+RegExp.prototype.toString.call(Nt)),at(Nt)&&(Ht=" "+Date.prototype.toUTCString.call(Nt)),s(Nt)&&(Ht=" "+mt(Nt)),qt.length===0&&(!Bt||Nt.length==0))return Jt[0]+Ht+Jt[1];if(Ut<0)return Et(Nt)?It.stylize(RegExp.prototype.toString.call(Nt),"regexp"):It.stylize("[Object]","special");It.seen.push(Nt);var hr;return Bt?hr=vt(It,Nt,Ut,Kt,qt):hr=qt.map(function(Ar){return tt(It,Nt,Ut,Kt,Ar,Bt)}),It.seen.pop(),bt(hr,Ht,Jt)}function dt(It,Nt){if(Mt(Nt))return It.stylize("undefined","undefined");if(_t(Nt)){var Ut="'"+JSON.stringify(Nt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return It.stylize(Ut,"string")}if(ft(Nt))return It.stylize(""+Nt,"number");if(St(Nt))return It.stylize(""+Nt,"boolean");if(At(Nt))return It.stylize("null","null")}function mt(It){return"["+Error.prototype.toString.call(It)+"]"}function vt(It,Nt,Ut,Gt,Pt){for(var qt=[],Kt=0,jt=Nt.length;Kt<jt;++Kt)ct(Nt,String(Kt))?qt.push(tt(It,Nt,Ut,Gt,String(Kt),!0)):qt.push("");return Pt.forEach(function(Ht){Ht.match(/^\d+$/)||qt.push(tt(It,Nt,Ut,Gt,Ht,!0))}),qt}function tt(It,Nt,Ut,Gt,Pt,qt){var Kt,jt,Ht;if(Ht=Object.getOwnPropertyDescriptor(Nt,Pt)||{value:Nt[Pt]},Ht.get?Ht.set?jt=It.stylize("[Getter/Setter]","special"):jt=It.stylize("[Getter]","special"):Ht.set&&(jt=It.stylize("[Setter]","special")),ct(Gt,Pt)||(Kt="["+Pt+"]"),jt||(It.seen.indexOf(Ht.value)<0?(At(Ut)?jt=gt(It,Ht.value,null):jt=gt(It,Ht.value,Ut-1),jt.indexOf(`
`)>-1&&(qt?jt=jt.split(`
`).map(function(Bt){return"  "+Bt}).join(`
`).slice(2):jt=`
`+jt.split(`
`).map(function(Bt){return"   "+Bt}).join(`
`))):jt=It.stylize("[Circular]","special")),Mt(Kt)){if(qt&&Pt.match(/^\d+$/))return jt;Kt=JSON.stringify(""+Pt),Kt.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Kt=Kt.slice(1,-1),Kt=It.stylize(Kt,"name")):(Kt=Kt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Kt=It.stylize(Kt,"string"))}return Kt+": "+jt}function bt(It,Nt,Ut){var Gt=It.reduce(function(Pt,qt){return qt.indexOf(`
`)>=0,Pt+qt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Gt>60?Ut[0]+(Nt===""?"":Nt+`
 `)+" "+It.join(`,
  `)+" "+Ut[1]:Ut[0]+Nt+" "+It.join(", ")+" "+Ut[1]}o.types=types$3;function ht(It){return Array.isArray(It)}o.isArray=ht;function St(It){return typeof It=="boolean"}o.isBoolean=St;function At(It){return It===null}o.isNull=At;function Tt(It){return It==null}o.isNullOrUndefined=Tt;function ft(It){return typeof It=="number"}o.isNumber=ft;function _t(It){return typeof It=="string"}o.isString=_t;function Rt(It){return typeof It=="symbol"}o.isSymbol=Rt;function Mt(It){return It===void 0}o.isUndefined=Mt;function Et(It){return kt(It)&&_e(It)==="[object RegExp]"}o.isRegExp=Et,o.types.isRegExp=Et;function kt(It){return typeof It=="object"&&It!==null}o.isObject=kt;function at(It){return kt(It)&&_e(It)==="[object Date]"}o.isDate=at,o.types.isDate=at;function s(It){return kt(It)&&(_e(It)==="[object Error]"||It instanceof Error)}o.isError=s,o.types.isNativeError=s;function b(It){return typeof It=="function"}o.isFunction=b;function $(It){return It===null||typeof It=="boolean"||typeof It=="number"||typeof It=="string"||typeof It=="symbol"||typeof It>"u"}o.isPrimitive=$,o.isBuffer=isBufferBrowser;function _e(It){return Object.prototype.toString.call(It)}function it(It){return It<10?"0"+It.toString(10):It.toString(10)}var pt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function yt(){var It=new Date,Nt=[it(It.getHours()),it(It.getMinutes()),it(It.getSeconds())].join(":");return[It.getDate(),pt[It.getMonth()],Nt].join(" ")}o.log=function(){console.log("%s - %s",yt(),o.format.apply(o,arguments))},o.inherits=requireInherits_browser(),o._extend=function(It,Nt){if(!Nt||!kt(Nt))return It;for(var Ut=Object.keys(Nt),Gt=Ut.length;Gt--;)It[Ut[Gt]]=Nt[Ut[Gt]];return It};function ct(It,Nt){return Object.prototype.hasOwnProperty.call(It,Nt)}var _=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;o.promisify=function(Nt){if(typeof Nt!="function")throw new TypeError('The "original" argument must be of type Function');if(_&&Nt[_]){var Ut=Nt[_];if(typeof Ut!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Ut,_,{value:Ut,enumerable:!1,writable:!1,configurable:!0}),Ut}function Ut(){for(var Gt,Pt,qt=new Promise(function(Ht,Bt){Gt=Ht,Pt=Bt}),Kt=[],jt=0;jt<arguments.length;jt++)Kt.push(arguments[jt]);Kt.push(function(Ht,Bt){Ht?Pt(Ht):Gt(Bt)});try{Nt.apply(this,Kt)}catch(Ht){Pt(Ht)}return qt}return Object.setPrototypeOf(Ut,Object.getPrototypeOf(Nt)),_&&Object.defineProperty(Ut,_,{value:Ut,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Ut,a(Nt))},o.promisify.custom=_;function rt(It,Nt){if(!It){var Ut=new Error("Promise was rejected with a falsy value");Ut.reason=It,It=Ut}return Nt(It)}function Ct(It){if(typeof It!="function")throw new TypeError('The "original" argument must be of type Function');function Nt(){for(var Ut=[],Gt=0;Gt<arguments.length;Gt++)Ut.push(arguments[Gt]);var Pt=Ut.pop();if(typeof Pt!="function")throw new TypeError("The last argument must be of type Function");var qt=this,Kt=function(){return Pt.apply(qt,arguments)};It.apply(this,Ut).then(function(jt){process$1.nextTick(Kt.bind(null,null,jt))},function(jt){process$1.nextTick(rt.bind(null,jt,Kt))})}return Object.setPrototypeOf(Nt,Object.getPrototypeOf(It)),Object.defineProperties(Nt,a(It)),Nt}o.callbackify=Ct})(util$8);var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function o(vt,tt){var bt=Object.keys(vt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(vt);tt&&(ht=ht.filter(function(St){return Object.getOwnPropertyDescriptor(vt,St).enumerable})),bt.push.apply(bt,ht)}return bt}function e(vt){for(var tt=1;tt<arguments.length;tt++){var bt=arguments[tt]!=null?arguments[tt]:{};tt%2?o(Object(bt),!0).forEach(function(ht){a(vt,ht,bt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(vt,Object.getOwnPropertyDescriptors(bt)):o(Object(bt)).forEach(function(ht){Object.defineProperty(vt,ht,Object.getOwnPropertyDescriptor(bt,ht))})}return vt}function a(vt,tt,bt){return tt=et(tt),tt in vt?Object.defineProperty(vt,tt,{value:bt,enumerable:!0,configurable:!0,writable:!0}):vt[tt]=bt,vt}function c(vt,tt){if(!(vt instanceof tt))throw new TypeError("Cannot call a class as a function")}function j(vt,tt){for(var bt=0;bt<tt.length;bt++){var ht=tt[bt];ht.enumerable=ht.enumerable||!1,ht.configurable=!0,"value"in ht&&(ht.writable=!0),Object.defineProperty(vt,et(ht.key),ht)}}function h(vt,tt,bt){return tt&&j(vt.prototype,tt),Object.defineProperty(vt,"prototype",{writable:!1}),vt}function et(vt){var tt=ot(vt,"string");return typeof tt=="symbol"?tt:String(tt)}function ot(vt,tt){if(typeof vt!="object"||vt===null)return vt;var bt=vt[Symbol.toPrimitive];if(bt!==void 0){var ht=bt.call(vt,tt);if(typeof ht!="object")return ht;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(vt)}var st=require$$1$2,lt=st.Buffer,nt=util$8,gt=nt.inspect,dt=gt&&gt.custom||"inspect";function mt(vt,tt,bt){lt.prototype.copy.call(vt,tt,bt)}return buffer_list=function(){function vt(){c(this,vt),this.head=null,this.tail=null,this.length=0}return h(vt,[{key:"push",value:function(bt){var ht={data:bt,next:null};this.length>0?this.tail.next=ht:this.head=ht,this.tail=ht,++this.length}},{key:"unshift",value:function(bt){var ht={data:bt,next:this.head};this.length===0&&(this.tail=ht),this.head=ht,++this.length}},{key:"shift",value:function(){if(this.length!==0){var bt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,bt}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(bt){if(this.length===0)return"";for(var ht=this.head,St=""+ht.data;ht=ht.next;)St+=bt+ht.data;return St}},{key:"concat",value:function(bt){if(this.length===0)return lt.alloc(0);for(var ht=lt.allocUnsafe(bt>>>0),St=this.head,At=0;St;)mt(St.data,ht,At),At+=St.data.length,St=St.next;return ht}},{key:"consume",value:function(bt,ht){var St;return bt<this.head.data.length?(St=this.head.data.slice(0,bt),this.head.data=this.head.data.slice(bt)):bt===this.head.data.length?St=this.shift():St=ht?this._getString(bt):this._getBuffer(bt),St}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(bt){var ht=this.head,St=1,At=ht.data;for(bt-=At.length;ht=ht.next;){var Tt=ht.data,ft=bt>Tt.length?Tt.length:bt;if(ft===Tt.length?At+=Tt:At+=Tt.slice(0,bt),bt-=ft,bt===0){ft===Tt.length?(++St,ht.next?this.head=ht.next:this.head=this.tail=null):(this.head=ht,ht.data=Tt.slice(ft));break}++St}return this.length-=St,At}},{key:"_getBuffer",value:function(bt){var ht=lt.allocUnsafe(bt),St=this.head,At=1;for(St.data.copy(ht),bt-=St.data.length;St=St.next;){var Tt=St.data,ft=bt>Tt.length?Tt.length:bt;if(Tt.copy(ht,ht.length-bt,0,ft),bt-=ft,bt===0){ft===Tt.length?(++At,St.next?this.head=St.next:this.head=this.tail=null):(this.head=St,St.data=Tt.slice(ft));break}++At}return this.length-=At,ht}},{key:dt,value:function(bt,ht){return gt(this,e(e({},ht),{},{depth:0,customInspect:!1}))}}]),vt}(),buffer_list}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;function o(et,ot){var st=this,lt=this._readableState&&this._readableState.destroyed,nt=this._writableState&&this._writableState.destroyed;return lt||nt?(ot?ot(et):et&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(j,this,et)):process$1.nextTick(j,this,et)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(gt){!ot&&gt?st._writableState?st._writableState.errorEmitted?process$1.nextTick(a,st):(st._writableState.errorEmitted=!0,process$1.nextTick(e,st,gt)):process$1.nextTick(e,st,gt):ot?(process$1.nextTick(a,st),ot(gt)):process$1.nextTick(a,st)}),this)}function e(et,ot){j(et,ot),a(et)}function a(et){et._writableState&&!et._writableState.emitClose||et._readableState&&!et._readableState.emitClose||et.emit("close")}function c(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function j(et,ot){et.emit("error",ot)}function h(et,ot){var st=et._readableState,lt=et._writableState;st&&st.autoDestroy||lt&&lt.autoDestroy?et.destroy(ot):et.emit("error",ot)}return destroy_1$1={destroy:o,undestroy:c,errorOrDestroy:h},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function o(ot,st){ot.prototype=Object.create(st.prototype),ot.prototype.constructor=ot,ot.__proto__=st}var e={};function a(ot,st,lt){lt||(lt=Error);function nt(dt,mt,vt){return typeof st=="string"?st:st(dt,mt,vt)}var gt=function(dt){o(mt,dt);function mt(vt,tt,bt){return dt.call(this,nt(vt,tt,bt))||this}return mt}(lt);gt.prototype.name=lt.name,gt.prototype.code=ot,e[ot]=gt}function c(ot,st){if(Array.isArray(ot)){var lt=ot.length;return ot=ot.map(function(nt){return String(nt)}),lt>2?"one of ".concat(st," ").concat(ot.slice(0,lt-1).join(", "),", or ")+ot[lt-1]:lt===2?"one of ".concat(st," ").concat(ot[0]," or ").concat(ot[1]):"of ".concat(st," ").concat(ot[0])}else return"of ".concat(st," ").concat(String(ot))}function j(ot,st,lt){return ot.substr(0,st.length)===st}function h(ot,st,lt){return(lt===void 0||lt>ot.length)&&(lt=ot.length),ot.substring(lt-st.length,lt)===st}function et(ot,st,lt){return typeof lt!="number"&&(lt=0),lt+st.length>ot.length?!1:ot.indexOf(st,lt)!==-1}return a("ERR_INVALID_OPT_VALUE",function(ot,st){return'The value "'+st+'" is invalid for option "'+ot+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(ot,st,lt){var nt;typeof st=="string"&&j(st,"not ")?(nt="must not be",st=st.replace(/^not /,"")):nt="must be";var gt;if(h(ot," argument"))gt="The ".concat(ot," ").concat(nt," ").concat(c(st,"type"));else{var dt=et(ot,".")?"property":"argument";gt='The "'.concat(ot,'" ').concat(dt," ").concat(nt," ").concat(c(st,"type"))}return gt+=". Received type ".concat(typeof lt),gt},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(ot){return"The "+ot+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(ot){return"Cannot call "+ot+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(ot){return"Unknown encoding: "+ot},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state$1,hasRequiredState;function requireState(){if(hasRequiredState)return state$1;hasRequiredState=1;var o=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(c,j,h){return c.highWaterMark!=null?c.highWaterMark:j?c[h]:null}function a(c,j,h,et){var ot=e(j,et,h);if(ot!=null){if(!(isFinite(ot)&&Math.floor(ot)===ot)||ot<0){var st=et?h:"highWaterMark";throw new o(st,ot)}return Math.floor(ot)}return c.objectMode?16:16*1024}return state$1={getHighWaterMark:a},state$1}var browser$c,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$c;hasRequiredBrowser$a=1,browser$c=o;function o(a,c){if(e("noDeprecation"))return a;var j=!1;function h(){if(!j){if(e("throwDeprecation"))throw new Error(c);e("traceDeprecation")?console.trace(c):console.warn(c),j=!0}return a.apply(this,arguments)}return h}function e(a){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var c=commonjsGlobal.localStorage[a];return c==null?!1:String(c).toLowerCase()==="true"}return browser$c}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=Mt;function o(Gt){var Pt=this;this.next=null,this.entry=null,this.finish=function(){Ut(Pt,Gt)}}var e;Mt.WritableState=_t;var a={deprecate:requireBrowser$a()},c=requireStreamBrowser$1(),j=require$$1$2.Buffer,h=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function et(Gt){return j.from(Gt)}function ot(Gt){return j.isBuffer(Gt)||Gt instanceof h}var st=requireDestroy$1(),lt=requireState(),nt=lt.getHighWaterMark,gt=requireErrorsBrowser().codes,dt=gt.ERR_INVALID_ARG_TYPE,mt=gt.ERR_METHOD_NOT_IMPLEMENTED,vt=gt.ERR_MULTIPLE_CALLBACK,tt=gt.ERR_STREAM_CANNOT_PIPE,bt=gt.ERR_STREAM_DESTROYED,ht=gt.ERR_STREAM_NULL_VALUES,St=gt.ERR_STREAM_WRITE_AFTER_END,At=gt.ERR_UNKNOWN_ENCODING,Tt=st.errorOrDestroy;requireInherits_browser()(Mt,c);function ft(){}function _t(Gt,Pt,qt){e=e||require_stream_duplex$1(),Gt=Gt||{},typeof qt!="boolean"&&(qt=Pt instanceof e),this.objectMode=!!Gt.objectMode,qt&&(this.objectMode=this.objectMode||!!Gt.writableObjectMode),this.highWaterMark=nt(this,Gt,"writableHighWaterMark",qt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Kt=Gt.decodeStrings===!1;this.decodeStrings=!Kt,this.defaultEncoding=Gt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(jt){it(Pt,jt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Gt.emitClose!==!1,this.autoDestroy=!!Gt.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}_t.prototype.getBuffer=function(){for(var Pt=this.bufferedRequest,qt=[];Pt;)qt.push(Pt),Pt=Pt.next;return qt},function(){try{Object.defineProperty(_t.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Rt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Rt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Mt,Symbol.hasInstance,{value:function(Pt){return Rt.call(this,Pt)?!0:this!==Mt?!1:Pt&&Pt._writableState instanceof _t}})):Rt=function(Pt){return Pt instanceof this};function Mt(Gt){e=e||require_stream_duplex$1();var Pt=this instanceof e;if(!Pt&&!Rt.call(Mt,this))return new Mt(Gt);this._writableState=new _t(Gt,this,Pt),this.writable=!0,Gt&&(typeof Gt.write=="function"&&(this._write=Gt.write),typeof Gt.writev=="function"&&(this._writev=Gt.writev),typeof Gt.destroy=="function"&&(this._destroy=Gt.destroy),typeof Gt.final=="function"&&(this._final=Gt.final)),c.call(this)}Mt.prototype.pipe=function(){Tt(this,new tt)};function Et(Gt,Pt){var qt=new St;Tt(Gt,qt),process$1.nextTick(Pt,qt)}function kt(Gt,Pt,qt,Kt){var jt;return qt===null?jt=new ht:typeof qt!="string"&&!Pt.objectMode&&(jt=new dt("chunk",["string","Buffer"],qt)),jt?(Tt(Gt,jt),process$1.nextTick(Kt,jt),!1):!0}Mt.prototype.write=function(Gt,Pt,qt){var Kt=this._writableState,jt=!1,Ht=!Kt.objectMode&&ot(Gt);return Ht&&!j.isBuffer(Gt)&&(Gt=et(Gt)),typeof Pt=="function"&&(qt=Pt,Pt=null),Ht?Pt="buffer":Pt||(Pt=Kt.defaultEncoding),typeof qt!="function"&&(qt=ft),Kt.ending?Et(this,qt):(Ht||kt(this,Kt,Gt,qt))&&(Kt.pendingcb++,jt=s(this,Kt,Ht,Gt,Pt,qt)),jt},Mt.prototype.cork=function(){this._writableState.corked++},Mt.prototype.uncork=function(){var Gt=this._writableState;Gt.corked&&(Gt.corked--,!Gt.writing&&!Gt.corked&&!Gt.bufferProcessing&&Gt.bufferedRequest&&ct(this,Gt))},Mt.prototype.setDefaultEncoding=function(Pt){if(typeof Pt=="string"&&(Pt=Pt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Pt+"").toLowerCase())>-1))throw new At(Pt);return this._writableState.defaultEncoding=Pt,this},Object.defineProperty(Mt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function at(Gt,Pt,qt){return!Gt.objectMode&&Gt.decodeStrings!==!1&&typeof Pt=="string"&&(Pt=j.from(Pt,qt)),Pt}Object.defineProperty(Mt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function s(Gt,Pt,qt,Kt,jt,Ht){if(!qt){var Bt=at(Pt,Kt,jt);Kt!==Bt&&(qt=!0,jt="buffer",Kt=Bt)}var Jt=Pt.objectMode?1:Kt.length;Pt.length+=Jt;var sr=Pt.length<Pt.highWaterMark;if(sr||(Pt.needDrain=!0),Pt.writing||Pt.corked){var hr=Pt.lastBufferedRequest;Pt.lastBufferedRequest={chunk:Kt,encoding:jt,isBuf:qt,callback:Ht,next:null},hr?hr.next=Pt.lastBufferedRequest:Pt.bufferedRequest=Pt.lastBufferedRequest,Pt.bufferedRequestCount+=1}else b(Gt,Pt,!1,Jt,Kt,jt,Ht);return sr}function b(Gt,Pt,qt,Kt,jt,Ht,Bt){Pt.writelen=Kt,Pt.writecb=Bt,Pt.writing=!0,Pt.sync=!0,Pt.destroyed?Pt.onwrite(new bt("write")):qt?Gt._writev(jt,Pt.onwrite):Gt._write(jt,Ht,Pt.onwrite),Pt.sync=!1}function $(Gt,Pt,qt,Kt,jt){--Pt.pendingcb,qt?(process$1.nextTick(jt,Kt),process$1.nextTick(It,Gt,Pt),Gt._writableState.errorEmitted=!0,Tt(Gt,Kt)):(jt(Kt),Gt._writableState.errorEmitted=!0,Tt(Gt,Kt),It(Gt,Pt))}function _e(Gt){Gt.writing=!1,Gt.writecb=null,Gt.length-=Gt.writelen,Gt.writelen=0}function it(Gt,Pt){var qt=Gt._writableState,Kt=qt.sync,jt=qt.writecb;if(typeof jt!="function")throw new vt;if(_e(qt),Pt)$(Gt,qt,Kt,Pt,jt);else{var Ht=_(qt)||Gt.destroyed;!Ht&&!qt.corked&&!qt.bufferProcessing&&qt.bufferedRequest&&ct(Gt,qt),Kt?process$1.nextTick(pt,Gt,qt,Ht,jt):pt(Gt,qt,Ht,jt)}}function pt(Gt,Pt,qt,Kt){qt||yt(Gt,Pt),Pt.pendingcb--,Kt(),It(Gt,Pt)}function yt(Gt,Pt){Pt.length===0&&Pt.needDrain&&(Pt.needDrain=!1,Gt.emit("drain"))}function ct(Gt,Pt){Pt.bufferProcessing=!0;var qt=Pt.bufferedRequest;if(Gt._writev&&qt&&qt.next){var Kt=Pt.bufferedRequestCount,jt=new Array(Kt),Ht=Pt.corkedRequestsFree;Ht.entry=qt;for(var Bt=0,Jt=!0;qt;)jt[Bt]=qt,qt.isBuf||(Jt=!1),qt=qt.next,Bt+=1;jt.allBuffers=Jt,b(Gt,Pt,!0,Pt.length,jt,"",Ht.finish),Pt.pendingcb++,Pt.lastBufferedRequest=null,Ht.next?(Pt.corkedRequestsFree=Ht.next,Ht.next=null):Pt.corkedRequestsFree=new o(Pt),Pt.bufferedRequestCount=0}else{for(;qt;){var sr=qt.chunk,hr=qt.encoding,Ar=qt.callback,yn=Pt.objectMode?1:sr.length;if(b(Gt,Pt,!1,yn,sr,hr,Ar),qt=qt.next,Pt.bufferedRequestCount--,Pt.writing)break}qt===null&&(Pt.lastBufferedRequest=null)}Pt.bufferedRequest=qt,Pt.bufferProcessing=!1}Mt.prototype._write=function(Gt,Pt,qt){qt(new mt("_write()"))},Mt.prototype._writev=null,Mt.prototype.end=function(Gt,Pt,qt){var Kt=this._writableState;return typeof Gt=="function"?(qt=Gt,Gt=null,Pt=null):typeof Pt=="function"&&(qt=Pt,Pt=null),Gt!=null&&this.write(Gt,Pt),Kt.corked&&(Kt.corked=1,this.uncork()),Kt.ending||Nt(this,Kt,qt),this},Object.defineProperty(Mt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function _(Gt){return Gt.ending&&Gt.length===0&&Gt.bufferedRequest===null&&!Gt.finished&&!Gt.writing}function rt(Gt,Pt){Gt._final(function(qt){Pt.pendingcb--,qt&&Tt(Gt,qt),Pt.prefinished=!0,Gt.emit("prefinish"),It(Gt,Pt)})}function Ct(Gt,Pt){!Pt.prefinished&&!Pt.finalCalled&&(typeof Gt._final=="function"&&!Pt.destroyed?(Pt.pendingcb++,Pt.finalCalled=!0,process$1.nextTick(rt,Gt,Pt)):(Pt.prefinished=!0,Gt.emit("prefinish")))}function It(Gt,Pt){var qt=_(Pt);if(qt&&(Ct(Gt,Pt),Pt.pendingcb===0&&(Pt.finished=!0,Gt.emit("finish"),Pt.autoDestroy))){var Kt=Gt._readableState;(!Kt||Kt.autoDestroy&&Kt.endEmitted)&&Gt.destroy()}return qt}function Nt(Gt,Pt,qt){Pt.ending=!0,It(Gt,Pt),qt&&(Pt.finished?process$1.nextTick(qt):Gt.once("finish",qt)),Pt.ended=!0,Gt.writable=!1}function Ut(Gt,Pt,qt){var Kt=Gt.entry;for(Gt.entry=null;Kt;){var jt=Kt.callback;Pt.pendingcb--,jt(qt),Kt=Kt.next}Pt.corkedRequestsFree.next=Gt}return Object.defineProperty(Mt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Pt){this._writableState&&(this._writableState.destroyed=Pt)}}),Mt.prototype.destroy=st.destroy,Mt.prototype._undestroy=st.undestroy,Mt.prototype._destroy=function(Gt,Pt){Pt(Gt)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var o=Object.keys||function(lt){var nt=[];for(var gt in lt)nt.push(gt);return nt};_stream_duplex$1=et;var e=require_stream_readable$1(),a=require_stream_writable$1();requireInherits_browser()(et,e);for(var c=o(a.prototype),j=0;j<c.length;j++){var h=c[j];et.prototype[h]||(et.prototype[h]=a.prototype[h])}function et(lt){if(!(this instanceof et))return new et(lt);e.call(this,lt),a.call(this,lt),this.allowHalfOpen=!0,lt&&(lt.readable===!1&&(this.readable=!1),lt.writable===!1&&(this.writable=!1),lt.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",ot)))}Object.defineProperty(et.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(et.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(et.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ot(){this._writableState.ended||process$1.nextTick(st,this)}function st(lt){lt.end()}return Object.defineProperty(et.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(nt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=nt,this._writableState.destroyed=nt)}}),_stream_duplex$1}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var o=requireSafeBuffer$1().Buffer,e=o.isEncoding||function(ht){switch(ht=""+ht,ht&&ht.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(ht){if(!ht)return"utf8";for(var St;;)switch(ht){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ht;default:if(St)return;ht=(""+ht).toLowerCase(),St=!0}}function c(ht){var St=a(ht);if(typeof St!="string"&&(o.isEncoding===e||!e(ht)))throw new Error("Unknown encoding: "+ht);return St||ht}string_decoder.StringDecoder=j;function j(ht){this.encoding=c(ht);var St;switch(this.encoding){case"utf16le":this.text=gt,this.end=dt,St=4;break;case"utf8":this.fillLast=st,St=4;break;case"base64":this.text=mt,this.end=vt,St=3;break;default:this.write=tt,this.end=bt;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(St)}j.prototype.write=function(ht){if(ht.length===0)return"";var St,At;if(this.lastNeed){if(St=this.fillLast(ht),St===void 0)return"";At=this.lastNeed,this.lastNeed=0}else At=0;return At<ht.length?St?St+this.text(ht,At):this.text(ht,At):St||""},j.prototype.end=nt,j.prototype.text=lt,j.prototype.fillLast=function(ht){if(this.lastNeed<=ht.length)return ht.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ht.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ht.length),this.lastNeed-=ht.length};function h(ht){return ht<=127?0:ht>>5===6?2:ht>>4===14?3:ht>>3===30?4:ht>>6===2?-1:-2}function et(ht,St,At){var Tt=St.length-1;if(Tt<At)return 0;var ft=h(St[Tt]);return ft>=0?(ft>0&&(ht.lastNeed=ft-1),ft):--Tt<At||ft===-2?0:(ft=h(St[Tt]),ft>=0?(ft>0&&(ht.lastNeed=ft-2),ft):--Tt<At||ft===-2?0:(ft=h(St[Tt]),ft>=0?(ft>0&&(ft===2?ft=0:ht.lastNeed=ft-3),ft):0))}function ot(ht,St,At){if((St[0]&192)!==128)return ht.lastNeed=0,"�";if(ht.lastNeed>1&&St.length>1){if((St[1]&192)!==128)return ht.lastNeed=1,"�";if(ht.lastNeed>2&&St.length>2&&(St[2]&192)!==128)return ht.lastNeed=2,"�"}}function st(ht){var St=this.lastTotal-this.lastNeed,At=ot(this,ht);if(At!==void 0)return At;if(this.lastNeed<=ht.length)return ht.copy(this.lastChar,St,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ht.copy(this.lastChar,St,0,ht.length),this.lastNeed-=ht.length}function lt(ht,St){var At=et(this,ht,St);if(!this.lastNeed)return ht.toString("utf8",St);this.lastTotal=At;var Tt=ht.length-(At-this.lastNeed);return ht.copy(this.lastChar,0,Tt),ht.toString("utf8",St,Tt)}function nt(ht){var St=ht&&ht.length?this.write(ht):"";return this.lastNeed?St+"�":St}function gt(ht,St){if((ht.length-St)%2===0){var At=ht.toString("utf16le",St);if(At){var Tt=At.charCodeAt(At.length-1);if(Tt>=55296&&Tt<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ht[ht.length-2],this.lastChar[1]=ht[ht.length-1],At.slice(0,-1)}return At}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ht[ht.length-1],ht.toString("utf16le",St,ht.length-1)}function dt(ht){var St=ht&&ht.length?this.write(ht):"";if(this.lastNeed){var At=this.lastTotal-this.lastNeed;return St+this.lastChar.toString("utf16le",0,At)}return St}function mt(ht,St){var At=(ht.length-St)%3;return At===0?ht.toString("base64",St):(this.lastNeed=3-At,this.lastTotal=3,At===1?this.lastChar[0]=ht[ht.length-1]:(this.lastChar[0]=ht[ht.length-2],this.lastChar[1]=ht[ht.length-1]),ht.toString("base64",St,ht.length-At))}function vt(ht){var St=ht&&ht.length?this.write(ht):"";return this.lastNeed?St+this.lastChar.toString("base64",0,3-this.lastNeed):St}function tt(ht){return ht.toString(this.encoding)}function bt(ht){return ht&&ht.length?this.write(ht):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var o=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(h){var et=!1;return function(){if(!et){et=!0;for(var ot=arguments.length,st=new Array(ot),lt=0;lt<ot;lt++)st[lt]=arguments[lt];h.apply(this,st)}}}function a(){}function c(h){return h.setHeader&&typeof h.abort=="function"}function j(h,et,ot){if(typeof et=="function")return j(h,null,et);et||(et={}),ot=e(ot||a);var st=et.readable||et.readable!==!1&&h.readable,lt=et.writable||et.writable!==!1&&h.writable,nt=function(){h.writable||dt()},gt=h._writableState&&h._writableState.finished,dt=function(){lt=!1,gt=!0,st||ot.call(h)},mt=h._readableState&&h._readableState.endEmitted,vt=function(){st=!1,mt=!0,lt||ot.call(h)},tt=function(At){ot.call(h,At)},bt=function(){var At;if(st&&!mt)return(!h._readableState||!h._readableState.ended)&&(At=new o),ot.call(h,At);if(lt&&!gt)return(!h._writableState||!h._writableState.ended)&&(At=new o),ot.call(h,At)},ht=function(){h.req.on("finish",dt)};return c(h)?(h.on("complete",dt),h.on("abort",bt),h.req?ht():h.on("request",ht)):lt&&!h._writableState&&(h.on("end",nt),h.on("close",nt)),h.on("end",vt),h.on("finish",dt),et.error!==!1&&h.on("error",tt),h.on("close",bt),function(){h.removeListener("complete",dt),h.removeListener("abort",bt),h.removeListener("request",ht),h.req&&h.req.removeListener("finish",dt),h.removeListener("end",nt),h.removeListener("close",nt),h.removeListener("finish",dt),h.removeListener("end",vt),h.removeListener("error",tt),h.removeListener("close",bt)}}return endOfStream=j,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var o;function e(At,Tt,ft){return Tt=a(Tt),Tt in At?Object.defineProperty(At,Tt,{value:ft,enumerable:!0,configurable:!0,writable:!0}):At[Tt]=ft,At}function a(At){var Tt=c(At,"string");return typeof Tt=="symbol"?Tt:String(Tt)}function c(At,Tt){if(typeof At!="object"||At===null)return At;var ft=At[Symbol.toPrimitive];if(ft!==void 0){var _t=ft.call(At,Tt);if(typeof _t!="object")return _t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Tt==="string"?String:Number)(At)}var j=requireEndOfStream(),h=Symbol("lastResolve"),et=Symbol("lastReject"),ot=Symbol("error"),st=Symbol("ended"),lt=Symbol("lastPromise"),nt=Symbol("handlePromise"),gt=Symbol("stream");function dt(At,Tt){return{value:At,done:Tt}}function mt(At){var Tt=At[h];if(Tt!==null){var ft=At[gt].read();ft!==null&&(At[lt]=null,At[h]=null,At[et]=null,Tt(dt(ft,!1)))}}function vt(At){process$1.nextTick(mt,At)}function tt(At,Tt){return function(ft,_t){At.then(function(){if(Tt[st]){ft(dt(void 0,!0));return}Tt[nt](ft,_t)},_t)}}var bt=Object.getPrototypeOf(function(){}),ht=Object.setPrototypeOf((o={get stream(){return this[gt]},next:function(){var Tt=this,ft=this[ot];if(ft!==null)return Promise.reject(ft);if(this[st])return Promise.resolve(dt(void 0,!0));if(this[gt].destroyed)return new Promise(function(Et,kt){process$1.nextTick(function(){Tt[ot]?kt(Tt[ot]):Et(dt(void 0,!0))})});var _t=this[lt],Rt;if(_t)Rt=new Promise(tt(_t,this));else{var Mt=this[gt].read();if(Mt!==null)return Promise.resolve(dt(Mt,!1));Rt=new Promise(this[nt])}return this[lt]=Rt,Rt}},e(o,Symbol.asyncIterator,function(){return this}),e(o,"return",function(){var Tt=this;return new Promise(function(ft,_t){Tt[gt].destroy(null,function(Rt){if(Rt){_t(Rt);return}ft(dt(void 0,!0))})})}),o),bt),St=function(Tt){var ft,_t=Object.create(ht,(ft={},e(ft,gt,{value:Tt,writable:!0}),e(ft,h,{value:null,writable:!0}),e(ft,et,{value:null,writable:!0}),e(ft,ot,{value:null,writable:!0}),e(ft,st,{value:Tt._readableState.endEmitted,writable:!0}),e(ft,nt,{value:function(Mt,Et){var kt=_t[gt].read();kt?(_t[lt]=null,_t[h]=null,_t[et]=null,Mt(dt(kt,!1))):(_t[h]=Mt,_t[et]=Et)},writable:!0}),ft));return _t[lt]=null,j(Tt,function(Rt){if(Rt&&Rt.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Mt=_t[et];Mt!==null&&(_t[lt]=null,_t[h]=null,_t[et]=null,Mt(Rt)),_t[ot]=Rt;return}var Et=_t[h];Et!==null&&(_t[lt]=null,_t[h]=null,_t[et]=null,Et(dt(void 0,!0))),_t[st]=!0}),Tt.on("readable",vt.bind(null,_t)),_t};return async_iterator=St,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=Et;var o;Et.ReadableState=Mt,eventsExports.EventEmitter;var e=function(Bt,Jt){return Bt.listeners(Jt).length},a=requireStreamBrowser$1(),c=require$$1$2.Buffer,j=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function h(Ht){return c.from(Ht)}function et(Ht){return c.isBuffer(Ht)||Ht instanceof j}var ot=util$8,st;ot&&ot.debuglog?st=ot.debuglog("stream"):st=function(){};var lt=requireBuffer_list(),nt=requireDestroy$1(),gt=requireState(),dt=gt.getHighWaterMark,mt=requireErrorsBrowser().codes,vt=mt.ERR_INVALID_ARG_TYPE,tt=mt.ERR_STREAM_PUSH_AFTER_EOF,bt=mt.ERR_METHOD_NOT_IMPLEMENTED,ht=mt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,St,At,Tt;requireInherits_browser()(Et,a);var ft=nt.errorOrDestroy,_t=["error","close","destroy","pause","resume"];function Rt(Ht,Bt,Jt){if(typeof Ht.prependListener=="function")return Ht.prependListener(Bt,Jt);!Ht._events||!Ht._events[Bt]?Ht.on(Bt,Jt):Array.isArray(Ht._events[Bt])?Ht._events[Bt].unshift(Jt):Ht._events[Bt]=[Jt,Ht._events[Bt]]}function Mt(Ht,Bt,Jt){o=o||require_stream_duplex$1(),Ht=Ht||{},typeof Jt!="boolean"&&(Jt=Bt instanceof o),this.objectMode=!!Ht.objectMode,Jt&&(this.objectMode=this.objectMode||!!Ht.readableObjectMode),this.highWaterMark=dt(this,Ht,"readableHighWaterMark",Jt),this.buffer=new lt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ht.emitClose!==!1,this.autoDestroy=!!Ht.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ht.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ht.encoding&&(St||(St=requireString_decoder().StringDecoder),this.decoder=new St(Ht.encoding),this.encoding=Ht.encoding)}function Et(Ht){if(o=o||require_stream_duplex$1(),!(this instanceof Et))return new Et(Ht);var Bt=this instanceof o;this._readableState=new Mt(Ht,this,Bt),this.readable=!0,Ht&&(typeof Ht.read=="function"&&(this._read=Ht.read),typeof Ht.destroy=="function"&&(this._destroy=Ht.destroy)),a.call(this)}Object.defineProperty(Et.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Bt){this._readableState&&(this._readableState.destroyed=Bt)}}),Et.prototype.destroy=nt.destroy,Et.prototype._undestroy=nt.undestroy,Et.prototype._destroy=function(Ht,Bt){Bt(Ht)},Et.prototype.push=function(Ht,Bt){var Jt=this._readableState,sr;return Jt.objectMode?sr=!0:typeof Ht=="string"&&(Bt=Bt||Jt.defaultEncoding,Bt!==Jt.encoding&&(Ht=c.from(Ht,Bt),Bt=""),sr=!0),kt(this,Ht,Bt,!1,sr)},Et.prototype.unshift=function(Ht){return kt(this,Ht,null,!0,!1)};function kt(Ht,Bt,Jt,sr,hr){st("readableAddChunk",Bt);var Ar=Ht._readableState;if(Bt===null)Ar.reading=!1,it(Ht,Ar);else{var yn;if(hr||(yn=s(Ar,Bt)),yn)ft(Ht,yn);else if(Ar.objectMode||Bt&&Bt.length>0)if(typeof Bt!="string"&&!Ar.objectMode&&Object.getPrototypeOf(Bt)!==c.prototype&&(Bt=h(Bt)),sr)Ar.endEmitted?ft(Ht,new ht):at(Ht,Ar,Bt,!0);else if(Ar.ended)ft(Ht,new tt);else{if(Ar.destroyed)return!1;Ar.reading=!1,Ar.decoder&&!Jt?(Bt=Ar.decoder.write(Bt),Ar.objectMode||Bt.length!==0?at(Ht,Ar,Bt,!1):ct(Ht,Ar)):at(Ht,Ar,Bt,!1)}else sr||(Ar.reading=!1,ct(Ht,Ar))}return!Ar.ended&&(Ar.length<Ar.highWaterMark||Ar.length===0)}function at(Ht,Bt,Jt,sr){Bt.flowing&&Bt.length===0&&!Bt.sync?(Bt.awaitDrain=0,Ht.emit("data",Jt)):(Bt.length+=Bt.objectMode?1:Jt.length,sr?Bt.buffer.unshift(Jt):Bt.buffer.push(Jt),Bt.needReadable&&pt(Ht)),ct(Ht,Bt)}function s(Ht,Bt){var Jt;return!et(Bt)&&typeof Bt!="string"&&Bt!==void 0&&!Ht.objectMode&&(Jt=new vt("chunk",["string","Buffer","Uint8Array"],Bt)),Jt}Et.prototype.isPaused=function(){return this._readableState.flowing===!1},Et.prototype.setEncoding=function(Ht){St||(St=requireString_decoder().StringDecoder);var Bt=new St(Ht);this._readableState.decoder=Bt,this._readableState.encoding=this._readableState.decoder.encoding;for(var Jt=this._readableState.buffer.head,sr="";Jt!==null;)sr+=Bt.write(Jt.data),Jt=Jt.next;return this._readableState.buffer.clear(),sr!==""&&this._readableState.buffer.push(sr),this._readableState.length=sr.length,this};var b=1073741824;function $(Ht){return Ht>=b?Ht=b:(Ht--,Ht|=Ht>>>1,Ht|=Ht>>>2,Ht|=Ht>>>4,Ht|=Ht>>>8,Ht|=Ht>>>16,Ht++),Ht}function _e(Ht,Bt){return Ht<=0||Bt.length===0&&Bt.ended?0:Bt.objectMode?1:Ht!==Ht?Bt.flowing&&Bt.length?Bt.buffer.head.data.length:Bt.length:(Ht>Bt.highWaterMark&&(Bt.highWaterMark=$(Ht)),Ht<=Bt.length?Ht:Bt.ended?Bt.length:(Bt.needReadable=!0,0))}Et.prototype.read=function(Ht){st("read",Ht),Ht=parseInt(Ht,10);var Bt=this._readableState,Jt=Ht;if(Ht!==0&&(Bt.emittedReadable=!1),Ht===0&&Bt.needReadable&&((Bt.highWaterMark!==0?Bt.length>=Bt.highWaterMark:Bt.length>0)||Bt.ended))return st("read: emitReadable",Bt.length,Bt.ended),Bt.length===0&&Bt.ended?qt(this):pt(this),null;if(Ht=_e(Ht,Bt),Ht===0&&Bt.ended)return Bt.length===0&&qt(this),null;var sr=Bt.needReadable;st("need readable",sr),(Bt.length===0||Bt.length-Ht<Bt.highWaterMark)&&(sr=!0,st("length less than watermark",sr)),Bt.ended||Bt.reading?(sr=!1,st("reading or ended",sr)):sr&&(st("do read"),Bt.reading=!0,Bt.sync=!0,Bt.length===0&&(Bt.needReadable=!0),this._read(Bt.highWaterMark),Bt.sync=!1,Bt.reading||(Ht=_e(Jt,Bt)));var hr;return Ht>0?hr=Pt(Ht,Bt):hr=null,hr===null?(Bt.needReadable=Bt.length<=Bt.highWaterMark,Ht=0):(Bt.length-=Ht,Bt.awaitDrain=0),Bt.length===0&&(Bt.ended||(Bt.needReadable=!0),Jt!==Ht&&Bt.ended&&qt(this)),hr!==null&&this.emit("data",hr),hr};function it(Ht,Bt){if(st("onEofChunk"),!Bt.ended){if(Bt.decoder){var Jt=Bt.decoder.end();Jt&&Jt.length&&(Bt.buffer.push(Jt),Bt.length+=Bt.objectMode?1:Jt.length)}Bt.ended=!0,Bt.sync?pt(Ht):(Bt.needReadable=!1,Bt.emittedReadable||(Bt.emittedReadable=!0,yt(Ht)))}}function pt(Ht){var Bt=Ht._readableState;st("emitReadable",Bt.needReadable,Bt.emittedReadable),Bt.needReadable=!1,Bt.emittedReadable||(st("emitReadable",Bt.flowing),Bt.emittedReadable=!0,process$1.nextTick(yt,Ht))}function yt(Ht){var Bt=Ht._readableState;st("emitReadable_",Bt.destroyed,Bt.length,Bt.ended),!Bt.destroyed&&(Bt.length||Bt.ended)&&(Ht.emit("readable"),Bt.emittedReadable=!1),Bt.needReadable=!Bt.flowing&&!Bt.ended&&Bt.length<=Bt.highWaterMark,Gt(Ht)}function ct(Ht,Bt){Bt.readingMore||(Bt.readingMore=!0,process$1.nextTick(_,Ht,Bt))}function _(Ht,Bt){for(;!Bt.reading&&!Bt.ended&&(Bt.length<Bt.highWaterMark||Bt.flowing&&Bt.length===0);){var Jt=Bt.length;if(st("maybeReadMore read 0"),Ht.read(0),Jt===Bt.length)break}Bt.readingMore=!1}Et.prototype._read=function(Ht){ft(this,new bt("_read()"))},Et.prototype.pipe=function(Ht,Bt){var Jt=this,sr=this._readableState;switch(sr.pipesCount){case 0:sr.pipes=Ht;break;case 1:sr.pipes=[sr.pipes,Ht];break;default:sr.pipes.push(Ht);break}sr.pipesCount+=1,st("pipe count=%d opts=%j",sr.pipesCount,Bt);var hr=(!Bt||Bt.end!==!1)&&Ht!==process$1.stdout&&Ht!==process$1.stderr,Ar=hr?Lr:Dn;sr.endEmitted?process$1.nextTick(Ar):Jt.once("end",Ar),Ht.on("unpipe",yn);function yn(Fr,_i){st("onunpipe"),Fr===Jt&&_i&&_i.hasUnpiped===!1&&(_i.hasUnpiped=!0,Dr())}function Lr(){st("onend"),Ht.end()}var wr=rt(Jt);Ht.on("drain",wr);var En=!1;function Dr(){st("cleanup"),Ht.removeListener("close",Br),Ht.removeListener("finish",Gr),Ht.removeListener("drain",wr),Ht.removeListener("error",Bn),Ht.removeListener("unpipe",yn),Jt.removeListener("end",Lr),Jt.removeListener("end",Dn),Jt.removeListener("data",Qr),En=!0,sr.awaitDrain&&(!Ht._writableState||Ht._writableState.needDrain)&&wr()}Jt.on("data",Qr);function Qr(Fr){st("ondata");var _i=Ht.write(Fr);st("dest.write",_i),_i===!1&&((sr.pipesCount===1&&sr.pipes===Ht||sr.pipesCount>1&&jt(sr.pipes,Ht)!==-1)&&!En&&(st("false write response, pause",sr.awaitDrain),sr.awaitDrain++),Jt.pause())}function Bn(Fr){st("onerror",Fr),Dn(),Ht.removeListener("error",Bn),e(Ht,"error")===0&&ft(Ht,Fr)}Rt(Ht,"error",Bn);function Br(){Ht.removeListener("finish",Gr),Dn()}Ht.once("close",Br);function Gr(){st("onfinish"),Ht.removeListener("close",Br),Dn()}Ht.once("finish",Gr);function Dn(){st("unpipe"),Jt.unpipe(Ht)}return Ht.emit("pipe",Jt),sr.flowing||(st("pipe resume"),Jt.resume()),Ht};function rt(Ht){return function(){var Jt=Ht._readableState;st("pipeOnDrain",Jt.awaitDrain),Jt.awaitDrain&&Jt.awaitDrain--,Jt.awaitDrain===0&&e(Ht,"data")&&(Jt.flowing=!0,Gt(Ht))}}Et.prototype.unpipe=function(Ht){var Bt=this._readableState,Jt={hasUnpiped:!1};if(Bt.pipesCount===0)return this;if(Bt.pipesCount===1)return Ht&&Ht!==Bt.pipes?this:(Ht||(Ht=Bt.pipes),Bt.pipes=null,Bt.pipesCount=0,Bt.flowing=!1,Ht&&Ht.emit("unpipe",this,Jt),this);if(!Ht){var sr=Bt.pipes,hr=Bt.pipesCount;Bt.pipes=null,Bt.pipesCount=0,Bt.flowing=!1;for(var Ar=0;Ar<hr;Ar++)sr[Ar].emit("unpipe",this,{hasUnpiped:!1});return this}var yn=jt(Bt.pipes,Ht);return yn===-1?this:(Bt.pipes.splice(yn,1),Bt.pipesCount-=1,Bt.pipesCount===1&&(Bt.pipes=Bt.pipes[0]),Ht.emit("unpipe",this,Jt),this)},Et.prototype.on=function(Ht,Bt){var Jt=a.prototype.on.call(this,Ht,Bt),sr=this._readableState;return Ht==="data"?(sr.readableListening=this.listenerCount("readable")>0,sr.flowing!==!1&&this.resume()):Ht==="readable"&&!sr.endEmitted&&!sr.readableListening&&(sr.readableListening=sr.needReadable=!0,sr.flowing=!1,sr.emittedReadable=!1,st("on readable",sr.length,sr.reading),sr.length?pt(this):sr.reading||process$1.nextTick(It,this)),Jt},Et.prototype.addListener=Et.prototype.on,Et.prototype.removeListener=function(Ht,Bt){var Jt=a.prototype.removeListener.call(this,Ht,Bt);return Ht==="readable"&&process$1.nextTick(Ct,this),Jt},Et.prototype.removeAllListeners=function(Ht){var Bt=a.prototype.removeAllListeners.apply(this,arguments);return(Ht==="readable"||Ht===void 0)&&process$1.nextTick(Ct,this),Bt};function Ct(Ht){var Bt=Ht._readableState;Bt.readableListening=Ht.listenerCount("readable")>0,Bt.resumeScheduled&&!Bt.paused?Bt.flowing=!0:Ht.listenerCount("data")>0&&Ht.resume()}function It(Ht){st("readable nexttick read 0"),Ht.read(0)}Et.prototype.resume=function(){var Ht=this._readableState;return Ht.flowing||(st("resume"),Ht.flowing=!Ht.readableListening,Nt(this,Ht)),Ht.paused=!1,this};function Nt(Ht,Bt){Bt.resumeScheduled||(Bt.resumeScheduled=!0,process$1.nextTick(Ut,Ht,Bt))}function Ut(Ht,Bt){st("resume",Bt.reading),Bt.reading||Ht.read(0),Bt.resumeScheduled=!1,Ht.emit("resume"),Gt(Ht),Bt.flowing&&!Bt.reading&&Ht.read(0)}Et.prototype.pause=function(){return st("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(st("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Gt(Ht){var Bt=Ht._readableState;for(st("flow",Bt.flowing);Bt.flowing&&Ht.read()!==null;);}Et.prototype.wrap=function(Ht){var Bt=this,Jt=this._readableState,sr=!1;Ht.on("end",function(){if(st("wrapped end"),Jt.decoder&&!Jt.ended){var yn=Jt.decoder.end();yn&&yn.length&&Bt.push(yn)}Bt.push(null)}),Ht.on("data",function(yn){if(st("wrapped data"),Jt.decoder&&(yn=Jt.decoder.write(yn)),!(Jt.objectMode&&yn==null)&&!(!Jt.objectMode&&(!yn||!yn.length))){var Lr=Bt.push(yn);Lr||(sr=!0,Ht.pause())}});for(var hr in Ht)this[hr]===void 0&&typeof Ht[hr]=="function"&&(this[hr]=function(Lr){return function(){return Ht[Lr].apply(Ht,arguments)}}(hr));for(var Ar=0;Ar<_t.length;Ar++)Ht.on(_t[Ar],this.emit.bind(this,_t[Ar]));return this._read=function(yn){st("wrapped _read",yn),sr&&(sr=!1,Ht.resume())},this},typeof Symbol=="function"&&(Et.prototype[Symbol.asyncIterator]=function(){return At===void 0&&(At=requireAsync_iterator()),At(this)}),Object.defineProperty(Et.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Et.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Et.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Bt){this._readableState&&(this._readableState.flowing=Bt)}}),Et._fromList=Pt,Object.defineProperty(Et.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Pt(Ht,Bt){if(Bt.length===0)return null;var Jt;return Bt.objectMode?Jt=Bt.buffer.shift():!Ht||Ht>=Bt.length?(Bt.decoder?Jt=Bt.buffer.join(""):Bt.buffer.length===1?Jt=Bt.buffer.first():Jt=Bt.buffer.concat(Bt.length),Bt.buffer.clear()):Jt=Bt.buffer.consume(Ht,Bt.decoder),Jt}function qt(Ht){var Bt=Ht._readableState;st("endReadable",Bt.endEmitted),Bt.endEmitted||(Bt.ended=!0,process$1.nextTick(Kt,Bt,Ht))}function Kt(Ht,Bt){if(st("endReadableNT",Ht.endEmitted,Ht.length),!Ht.endEmitted&&Ht.length===0&&(Ht.endEmitted=!0,Bt.readable=!1,Bt.emit("end"),Ht.autoDestroy)){var Jt=Bt._writableState;(!Jt||Jt.autoDestroy&&Jt.finished)&&Bt.destroy()}}typeof Symbol=="function"&&(Et.from=function(Ht,Bt){return Tt===void 0&&(Tt=requireFromBrowser()),Tt(Et,Ht,Bt)});function jt(Ht,Bt){for(var Jt=0,sr=Ht.length;Jt<sr;Jt++)if(Ht[Jt]===Bt)return Jt;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=ot;var o=requireErrorsBrowser().codes,e=o.ERR_METHOD_NOT_IMPLEMENTED,a=o.ERR_MULTIPLE_CALLBACK,c=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=o.ERR_TRANSFORM_WITH_LENGTH_0,h=require_stream_duplex$1();requireInherits_browser()(ot,h);function et(nt,gt){var dt=this._transformState;dt.transforming=!1;var mt=dt.writecb;if(mt===null)return this.emit("error",new a);dt.writechunk=null,dt.writecb=null,gt!=null&&this.push(gt),mt(nt);var vt=this._readableState;vt.reading=!1,(vt.needReadable||vt.length<vt.highWaterMark)&&this._read(vt.highWaterMark)}function ot(nt){if(!(this instanceof ot))return new ot(nt);h.call(this,nt),this._transformState={afterTransform:et.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,nt&&(typeof nt.transform=="function"&&(this._transform=nt.transform),typeof nt.flush=="function"&&(this._flush=nt.flush)),this.on("prefinish",st)}function st(){var nt=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(gt,dt){lt(nt,gt,dt)}):lt(this,null,null)}ot.prototype.push=function(nt,gt){return this._transformState.needTransform=!1,h.prototype.push.call(this,nt,gt)},ot.prototype._transform=function(nt,gt,dt){dt(new e("_transform()"))},ot.prototype._write=function(nt,gt,dt){var mt=this._transformState;if(mt.writecb=dt,mt.writechunk=nt,mt.writeencoding=gt,!mt.transforming){var vt=this._readableState;(mt.needTransform||vt.needReadable||vt.length<vt.highWaterMark)&&this._read(vt.highWaterMark)}},ot.prototype._read=function(nt){var gt=this._transformState;gt.writechunk!==null&&!gt.transforming?(gt.transforming=!0,this._transform(gt.writechunk,gt.writeencoding,gt.afterTransform)):gt.needTransform=!0},ot.prototype._destroy=function(nt,gt){h.prototype._destroy.call(this,nt,function(dt){gt(dt)})};function lt(nt,gt,dt){if(gt)return nt.emit("error",gt);if(dt!=null&&nt.push(dt),nt._writableState.length)throw new j;if(nt._transformState.transforming)throw new c;return nt.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=e;var o=require_stream_transform$1();requireInherits_browser()(e,o);function e(a){if(!(this instanceof e))return new e(a);o.call(this,a)}return e.prototype._transform=function(a,c,j){j(null,a)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var o;function e(dt){var mt=!1;return function(){mt||(mt=!0,dt.apply(void 0,arguments))}}var a=requireErrorsBrowser().codes,c=a.ERR_MISSING_ARGS,j=a.ERR_STREAM_DESTROYED;function h(dt){if(dt)throw dt}function et(dt){return dt.setHeader&&typeof dt.abort=="function"}function ot(dt,mt,vt,tt){tt=e(tt);var bt=!1;dt.on("close",function(){bt=!0}),o===void 0&&(o=requireEndOfStream()),o(dt,{readable:mt,writable:vt},function(St){if(St)return tt(St);bt=!0,tt()});var ht=!1;return function(St){if(!bt&&!ht){if(ht=!0,et(dt))return dt.abort();if(typeof dt.destroy=="function")return dt.destroy();tt(St||new j("pipe"))}}}function st(dt){dt()}function lt(dt,mt){return dt.pipe(mt)}function nt(dt){return!dt.length||typeof dt[dt.length-1]!="function"?h:dt.pop()}function gt(){for(var dt=arguments.length,mt=new Array(dt),vt=0;vt<dt;vt++)mt[vt]=arguments[vt];var tt=nt(mt);if(Array.isArray(mt[0])&&(mt=mt[0]),mt.length<2)throw new c("streams");var bt,ht=mt.map(function(St,At){var Tt=At<mt.length-1,ft=At>0;return ot(St,Tt,ft,function(_t){bt||(bt=_t),_t&&ht.forEach(st),!Tt&&(ht.forEach(st),tt(bt))})});return mt.reduce(lt)}return pipeline_1=gt,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=a;var o=eventsExports.EventEmitter,e=requireInherits_browser();e(a,o),a.Readable=require_stream_readable$1(),a.Writable=require_stream_writable$1(),a.Duplex=require_stream_duplex$1(),a.Transform=require_stream_transform$1(),a.PassThrough=require_stream_passthrough$1(),a.finished=requireEndOfStream(),a.pipeline=requirePipeline(),a.Stream=a;function a(){o.call(this)}return a.prototype.pipe=function(c,j){var h=this;function et(mt){c.writable&&c.write(mt)===!1&&h.pause&&h.pause()}h.on("data",et);function ot(){h.readable&&h.resume&&h.resume()}c.on("drain",ot),!c._isStdio&&(!j||j.end!==!1)&&(h.on("end",lt),h.on("close",nt));var st=!1;function lt(){st||(st=!0,c.end())}function nt(){st||(st=!0,typeof c.destroy=="function"&&c.destroy())}function gt(mt){if(dt(),o.listenerCount(this,"error")===0)throw mt}h.on("error",gt),c.on("error",gt);function dt(){h.removeListener("data",et),c.removeListener("drain",ot),h.removeListener("end",lt),h.removeListener("close",nt),h.removeListener("error",gt),c.removeListener("error",gt),h.removeListener("end",dt),h.removeListener("close",dt),c.removeListener("close",dt)}return h.on("end",dt),h.on("close",dt),c.on("close",dt),c.emit("pipe",h),c},streamBrowserify}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var o=requireSafeBuffer$1().Buffer,e=requireStreamBrowserify().Transform,a=requireInherits_browser();function c(ot){e.call(this),this._block=o.allocUnsafe(ot),this._blockSize=ot,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}a(c,e),c.prototype._transform=function(ot,st,lt){var nt=null;try{this.update(ot,st)}catch(gt){nt=gt}lt(nt)},c.prototype._flush=function(ot){var st=null;try{this.push(this.digest())}catch(lt){st=lt}ot(st)};var j=typeof Uint8Array<"u",h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(o.prototype instanceof Uint8Array||o.TYPED_ARRAY_SUPPORT);function et(ot,st){if(ot instanceof o)return ot;if(typeof ot=="string")return o.from(ot,st);if(h&&ArrayBuffer.isView(ot)){if(ot.byteLength===0)return o.alloc(0);var lt=o.from(ot.buffer,ot.byteOffset,ot.byteLength);if(lt.byteLength===ot.byteLength)return lt}if(j&&ot instanceof Uint8Array||o.isBuffer(ot)&&ot.constructor&&typeof ot.constructor.isBuffer=="function"&&ot.constructor.isBuffer(ot))return o.from(ot);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return c.prototype.update=function(ot,st){if(this._finalized)throw new Error("Digest already called");ot=et(ot,st);for(var lt=this._block,nt=0;this._blockOffset+ot.length-nt>=this._blockSize;){for(var gt=this._blockOffset;gt<this._blockSize;)lt[gt++]=ot[nt++];this._update(),this._blockOffset=0}for(;nt<ot.length;)lt[this._blockOffset++]=ot[nt++];for(var dt=0,mt=ot.length*8;mt>0;++dt)this._length[dt]+=mt,mt=this._length[dt]/4294967296|0,mt>0&&(this._length[dt]-=4294967296*mt);return this},c.prototype._update=function(){throw new Error("_update is not implemented")},c.prototype.digest=function(ot){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var st=this._digest();ot!==void 0&&(st=st.toString(ot)),this._block.fill(0),this._blockOffset=0;for(var lt=0;lt<4;++lt)this._length[lt]=0;return st},c.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=c,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var o=requireInherits_browser(),e=requireHashBase(),a=requireSafeBuffer$1().Buffer,c=new Array(16);function j(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}o(j,e),j.prototype._update=function(){for(var nt=c,gt=0;gt<16;++gt)nt[gt]=this._block.readInt32LE(gt*4);var dt=this._a,mt=this._b,vt=this._c,tt=this._d;dt=et(dt,mt,vt,tt,nt[0],3614090360,7),tt=et(tt,dt,mt,vt,nt[1],3905402710,12),vt=et(vt,tt,dt,mt,nt[2],606105819,17),mt=et(mt,vt,tt,dt,nt[3],3250441966,22),dt=et(dt,mt,vt,tt,nt[4],4118548399,7),tt=et(tt,dt,mt,vt,nt[5],1200080426,12),vt=et(vt,tt,dt,mt,nt[6],2821735955,17),mt=et(mt,vt,tt,dt,nt[7],4249261313,22),dt=et(dt,mt,vt,tt,nt[8],1770035416,7),tt=et(tt,dt,mt,vt,nt[9],2336552879,12),vt=et(vt,tt,dt,mt,nt[10],4294925233,17),mt=et(mt,vt,tt,dt,nt[11],2304563134,22),dt=et(dt,mt,vt,tt,nt[12],1804603682,7),tt=et(tt,dt,mt,vt,nt[13],4254626195,12),vt=et(vt,tt,dt,mt,nt[14],2792965006,17),mt=et(mt,vt,tt,dt,nt[15],1236535329,22),dt=ot(dt,mt,vt,tt,nt[1],4129170786,5),tt=ot(tt,dt,mt,vt,nt[6],3225465664,9),vt=ot(vt,tt,dt,mt,nt[11],643717713,14),mt=ot(mt,vt,tt,dt,nt[0],3921069994,20),dt=ot(dt,mt,vt,tt,nt[5],3593408605,5),tt=ot(tt,dt,mt,vt,nt[10],38016083,9),vt=ot(vt,tt,dt,mt,nt[15],3634488961,14),mt=ot(mt,vt,tt,dt,nt[4],3889429448,20),dt=ot(dt,mt,vt,tt,nt[9],568446438,5),tt=ot(tt,dt,mt,vt,nt[14],3275163606,9),vt=ot(vt,tt,dt,mt,nt[3],4107603335,14),mt=ot(mt,vt,tt,dt,nt[8],1163531501,20),dt=ot(dt,mt,vt,tt,nt[13],2850285829,5),tt=ot(tt,dt,mt,vt,nt[2],4243563512,9),vt=ot(vt,tt,dt,mt,nt[7],1735328473,14),mt=ot(mt,vt,tt,dt,nt[12],2368359562,20),dt=st(dt,mt,vt,tt,nt[5],4294588738,4),tt=st(tt,dt,mt,vt,nt[8],2272392833,11),vt=st(vt,tt,dt,mt,nt[11],1839030562,16),mt=st(mt,vt,tt,dt,nt[14],4259657740,23),dt=st(dt,mt,vt,tt,nt[1],2763975236,4),tt=st(tt,dt,mt,vt,nt[4],1272893353,11),vt=st(vt,tt,dt,mt,nt[7],4139469664,16),mt=st(mt,vt,tt,dt,nt[10],3200236656,23),dt=st(dt,mt,vt,tt,nt[13],681279174,4),tt=st(tt,dt,mt,vt,nt[0],3936430074,11),vt=st(vt,tt,dt,mt,nt[3],3572445317,16),mt=st(mt,vt,tt,dt,nt[6],76029189,23),dt=st(dt,mt,vt,tt,nt[9],3654602809,4),tt=st(tt,dt,mt,vt,nt[12],3873151461,11),vt=st(vt,tt,dt,mt,nt[15],530742520,16),mt=st(mt,vt,tt,dt,nt[2],3299628645,23),dt=lt(dt,mt,vt,tt,nt[0],4096336452,6),tt=lt(tt,dt,mt,vt,nt[7],1126891415,10),vt=lt(vt,tt,dt,mt,nt[14],2878612391,15),mt=lt(mt,vt,tt,dt,nt[5],4237533241,21),dt=lt(dt,mt,vt,tt,nt[12],1700485571,6),tt=lt(tt,dt,mt,vt,nt[3],2399980690,10),vt=lt(vt,tt,dt,mt,nt[10],4293915773,15),mt=lt(mt,vt,tt,dt,nt[1],2240044497,21),dt=lt(dt,mt,vt,tt,nt[8],1873313359,6),tt=lt(tt,dt,mt,vt,nt[15],4264355552,10),vt=lt(vt,tt,dt,mt,nt[6],2734768916,15),mt=lt(mt,vt,tt,dt,nt[13],1309151649,21),dt=lt(dt,mt,vt,tt,nt[4],4149444226,6),tt=lt(tt,dt,mt,vt,nt[11],3174756917,10),vt=lt(vt,tt,dt,mt,nt[2],718787259,15),mt=lt(mt,vt,tt,dt,nt[9],3951481745,21),this._a=this._a+dt|0,this._b=this._b+mt|0,this._c=this._c+vt|0,this._d=this._d+tt|0},j.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var nt=a.allocUnsafe(16);return nt.writeInt32LE(this._a,0),nt.writeInt32LE(this._b,4),nt.writeInt32LE(this._c,8),nt.writeInt32LE(this._d,12),nt};function h(nt,gt){return nt<<gt|nt>>>32-gt}function et(nt,gt,dt,mt,vt,tt,bt){return h(nt+(gt&dt|~gt&mt)+vt+tt|0,bt)+gt|0}function ot(nt,gt,dt,mt,vt,tt,bt){return h(nt+(gt&mt|dt&~mt)+vt+tt|0,bt)+gt|0}function st(nt,gt,dt,mt,vt,tt,bt){return h(nt+(gt^dt^mt)+vt+tt|0,bt)+gt|0}function lt(nt,gt,dt,mt,vt,tt,bt){return h(nt+(dt^(gt|~mt))+vt+tt|0,bt)+gt|0}return md5_js=j,md5_js}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var o=require$$1$2.Buffer,e=requireInherits_browser(),a=requireHashBase(),c=new Array(16),j=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],et=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ot=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],st=[0,1518500249,1859775393,2400959708,2840853838],lt=[1352829926,1548603684,1836072691,2053994217,0];function nt(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(nt,a),nt.prototype._update=function(){for(var ht=c,St=0;St<16;++St)ht[St]=this._block.readInt32LE(St*4);for(var At=this._a|0,Tt=this._b|0,ft=this._c|0,_t=this._d|0,Rt=this._e|0,Mt=this._a|0,Et=this._b|0,kt=this._c|0,at=this._d|0,s=this._e|0,b=0;b<80;b+=1){var $,_e;b<16?($=dt(At,Tt,ft,_t,Rt,ht[j[b]],st[0],et[b]),_e=bt(Mt,Et,kt,at,s,ht[h[b]],lt[0],ot[b])):b<32?($=mt(At,Tt,ft,_t,Rt,ht[j[b]],st[1],et[b]),_e=tt(Mt,Et,kt,at,s,ht[h[b]],lt[1],ot[b])):b<48?($=vt(At,Tt,ft,_t,Rt,ht[j[b]],st[2],et[b]),_e=vt(Mt,Et,kt,at,s,ht[h[b]],lt[2],ot[b])):b<64?($=tt(At,Tt,ft,_t,Rt,ht[j[b]],st[3],et[b]),_e=mt(Mt,Et,kt,at,s,ht[h[b]],lt[3],ot[b])):($=bt(At,Tt,ft,_t,Rt,ht[j[b]],st[4],et[b]),_e=dt(Mt,Et,kt,at,s,ht[h[b]],lt[4],ot[b])),At=Rt,Rt=_t,_t=gt(ft,10),ft=Tt,Tt=$,Mt=s,s=at,at=gt(kt,10),kt=Et,Et=_e}var it=this._b+ft+at|0;this._b=this._c+_t+s|0,this._c=this._d+Rt+Mt|0,this._d=this._e+At+Et|0,this._e=this._a+Tt+kt|0,this._a=it},nt.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var ht=o.alloc?o.alloc(20):new o(20);return ht.writeInt32LE(this._a,0),ht.writeInt32LE(this._b,4),ht.writeInt32LE(this._c,8),ht.writeInt32LE(this._d,12),ht.writeInt32LE(this._e,16),ht};function gt(ht,St){return ht<<St|ht>>>32-St}function dt(ht,St,At,Tt,ft,_t,Rt,Mt){return gt(ht+(St^At^Tt)+_t+Rt|0,Mt)+ft|0}function mt(ht,St,At,Tt,ft,_t,Rt,Mt){return gt(ht+(St&At|~St&Tt)+_t+Rt|0,Mt)+ft|0}function vt(ht,St,At,Tt,ft,_t,Rt,Mt){return gt(ht+((St|~At)^Tt)+_t+Rt|0,Mt)+ft|0}function tt(ht,St,At,Tt,ft,_t,Rt,Mt){return gt(ht+(St&Tt|At&~Tt)+_t+Rt|0,Mt)+ft|0}function bt(ht,St,At,Tt,ft,_t,Rt,Mt){return gt(ht+(St^(At|~Tt))+_t+Rt|0,Mt)+ft|0}return ripemd160=nt,ripemd160}var sha_js={exports:{}},hash$1,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$1;hasRequiredHash$1=1;var o=requireSafeBuffer$1().Buffer;function e(a,c){this._block=o.alloc(a),this._finalSize=c,this._blockSize=a,this._len=0}return e.prototype.update=function(a,c){typeof a=="string"&&(c=c||"utf8",a=o.from(a,c));for(var j=this._block,h=this._blockSize,et=a.length,ot=this._len,st=0;st<et;){for(var lt=ot%h,nt=Math.min(et-st,h-lt),gt=0;gt<nt;gt++)j[lt+gt]=a[st+gt];ot+=nt,st+=nt,ot%h===0&&this._update(j)}return this._len+=et,this},e.prototype.digest=function(a){var c=this._len%this._blockSize;this._block[c]=128,this._block.fill(0,c+1),c>=this._finalSize&&(this._update(this._block),this._block.fill(0));var j=this._len*8;if(j<=4294967295)this._block.writeUInt32BE(j,this._blockSize-4);else{var h=(j&4294967295)>>>0,et=(j-h)/4294967296;this._block.writeUInt32BE(et,this._blockSize-8),this._block.writeUInt32BE(h,this._blockSize-4)}this._update(this._block);var ot=this._hash();return a?ot.toString(a):ot},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=e,hash$1}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var o=requireInherits_browser(),e=requireHash$1(),a=requireSafeBuffer$1().Buffer,c=[1518500249,1859775393,-1894007588,-899497514],j=new Array(80);function h(){this.init(),this._w=j,e.call(this,64,56)}o(h,e),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function et(lt){return lt<<5|lt>>>27}function ot(lt){return lt<<30|lt>>>2}function st(lt,nt,gt,dt){return lt===0?nt&gt|~nt&dt:lt===2?nt&gt|nt&dt|gt&dt:nt^gt^dt}return h.prototype._update=function(lt){for(var nt=this._w,gt=this._a|0,dt=this._b|0,mt=this._c|0,vt=this._d|0,tt=this._e|0,bt=0;bt<16;++bt)nt[bt]=lt.readInt32BE(bt*4);for(;bt<80;++bt)nt[bt]=nt[bt-3]^nt[bt-8]^nt[bt-14]^nt[bt-16];for(var ht=0;ht<80;++ht){var St=~~(ht/20),At=et(gt)+st(St,dt,mt,vt)+tt+nt[ht]+c[St]|0;tt=vt,vt=mt,mt=ot(dt),dt=gt,gt=At}this._a=gt+this._a|0,this._b=dt+this._b|0,this._c=mt+this._c|0,this._d=vt+this._d|0,this._e=tt+this._e|0},h.prototype._hash=function(){var lt=a.allocUnsafe(20);return lt.writeInt32BE(this._a|0,0),lt.writeInt32BE(this._b|0,4),lt.writeInt32BE(this._c|0,8),lt.writeInt32BE(this._d|0,12),lt.writeInt32BE(this._e|0,16),lt},sha$1=h,sha$1}var sha1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1;hasRequiredSha1=1;var o=requireInherits_browser(),e=requireHash$1(),a=requireSafeBuffer$1().Buffer,c=[1518500249,1859775393,-1894007588,-899497514],j=new Array(80);function h(){this.init(),this._w=j,e.call(this,64,56)}o(h,e),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function et(nt){return nt<<1|nt>>>31}function ot(nt){return nt<<5|nt>>>27}function st(nt){return nt<<30|nt>>>2}function lt(nt,gt,dt,mt){return nt===0?gt&dt|~gt&mt:nt===2?gt&dt|gt&mt|dt&mt:gt^dt^mt}return h.prototype._update=function(nt){for(var gt=this._w,dt=this._a|0,mt=this._b|0,vt=this._c|0,tt=this._d|0,bt=this._e|0,ht=0;ht<16;++ht)gt[ht]=nt.readInt32BE(ht*4);for(;ht<80;++ht)gt[ht]=et(gt[ht-3]^gt[ht-8]^gt[ht-14]^gt[ht-16]);for(var St=0;St<80;++St){var At=~~(St/20),Tt=ot(dt)+lt(At,mt,vt,tt)+bt+gt[St]+c[At]|0;bt=tt,tt=vt,vt=st(mt),mt=dt,dt=Tt}this._a=dt+this._a|0,this._b=mt+this._b|0,this._c=vt+this._c|0,this._d=tt+this._d|0,this._e=bt+this._e|0},h.prototype._hash=function(){var nt=a.allocUnsafe(20);return nt.writeInt32BE(this._a|0,0),nt.writeInt32BE(this._b|0,4),nt.writeInt32BE(this._c|0,8),nt.writeInt32BE(this._d|0,12),nt.writeInt32BE(this._e|0,16),nt},sha1=h,sha1}var sha256$1,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$1;hasRequiredSha256=1;var o=requireInherits_browser(),e=requireHash$1(),a=requireSafeBuffer$1().Buffer,c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],j=new Array(64);function h(){this.init(),this._w=j,e.call(this,64,56)}o(h,e),h.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function et(dt,mt,vt){return vt^dt&(mt^vt)}function ot(dt,mt,vt){return dt&mt|vt&(dt|mt)}function st(dt){return(dt>>>2|dt<<30)^(dt>>>13|dt<<19)^(dt>>>22|dt<<10)}function lt(dt){return(dt>>>6|dt<<26)^(dt>>>11|dt<<21)^(dt>>>25|dt<<7)}function nt(dt){return(dt>>>7|dt<<25)^(dt>>>18|dt<<14)^dt>>>3}function gt(dt){return(dt>>>17|dt<<15)^(dt>>>19|dt<<13)^dt>>>10}return h.prototype._update=function(dt){for(var mt=this._w,vt=this._a|0,tt=this._b|0,bt=this._c|0,ht=this._d|0,St=this._e|0,At=this._f|0,Tt=this._g|0,ft=this._h|0,_t=0;_t<16;++_t)mt[_t]=dt.readInt32BE(_t*4);for(;_t<64;++_t)mt[_t]=gt(mt[_t-2])+mt[_t-7]+nt(mt[_t-15])+mt[_t-16]|0;for(var Rt=0;Rt<64;++Rt){var Mt=ft+lt(St)+et(St,At,Tt)+c[Rt]+mt[Rt]|0,Et=st(vt)+ot(vt,tt,bt)|0;ft=Tt,Tt=At,At=St,St=ht+Mt|0,ht=bt,bt=tt,tt=vt,vt=Mt+Et|0}this._a=vt+this._a|0,this._b=tt+this._b|0,this._c=bt+this._c|0,this._d=ht+this._d|0,this._e=St+this._e|0,this._f=At+this._f|0,this._g=Tt+this._g|0,this._h=ft+this._h|0},h.prototype._hash=function(){var dt=a.allocUnsafe(32);return dt.writeInt32BE(this._a,0),dt.writeInt32BE(this._b,4),dt.writeInt32BE(this._c,8),dt.writeInt32BE(this._d,12),dt.writeInt32BE(this._e,16),dt.writeInt32BE(this._f,20),dt.writeInt32BE(this._g,24),dt.writeInt32BE(this._h,28),dt},sha256$1=h,sha256$1}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var o=requireInherits_browser(),e=requireSha256(),a=requireHash$1(),c=requireSafeBuffer$1().Buffer,j=new Array(64);function h(){this.init(),this._w=j,a.call(this,64,56)}return o(h,e),h.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},h.prototype._hash=function(){var et=c.allocUnsafe(28);return et.writeInt32BE(this._a,0),et.writeInt32BE(this._b,4),et.writeInt32BE(this._c,8),et.writeInt32BE(this._d,12),et.writeInt32BE(this._e,16),et.writeInt32BE(this._f,20),et.writeInt32BE(this._g,24),et},sha224$1=h,sha224$1}var sha512$1,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$1;hasRequiredSha512=1;var o=requireInherits_browser(),e=requireHash$1(),a=requireSafeBuffer$1().Buffer,c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],j=new Array(160);function h(){this.init(),this._w=j,e.call(this,128,112)}o(h,e),h.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function et(tt,bt,ht){return ht^tt&(bt^ht)}function ot(tt,bt,ht){return tt&bt|ht&(tt|bt)}function st(tt,bt){return(tt>>>28|bt<<4)^(bt>>>2|tt<<30)^(bt>>>7|tt<<25)}function lt(tt,bt){return(tt>>>14|bt<<18)^(tt>>>18|bt<<14)^(bt>>>9|tt<<23)}function nt(tt,bt){return(tt>>>1|bt<<31)^(tt>>>8|bt<<24)^tt>>>7}function gt(tt,bt){return(tt>>>1|bt<<31)^(tt>>>8|bt<<24)^(tt>>>7|bt<<25)}function dt(tt,bt){return(tt>>>19|bt<<13)^(bt>>>29|tt<<3)^tt>>>6}function mt(tt,bt){return(tt>>>19|bt<<13)^(bt>>>29|tt<<3)^(tt>>>6|bt<<26)}function vt(tt,bt){return tt>>>0<bt>>>0?1:0}return h.prototype._update=function(tt){for(var bt=this._w,ht=this._ah|0,St=this._bh|0,At=this._ch|0,Tt=this._dh|0,ft=this._eh|0,_t=this._fh|0,Rt=this._gh|0,Mt=this._hh|0,Et=this._al|0,kt=this._bl|0,at=this._cl|0,s=this._dl|0,b=this._el|0,$=this._fl|0,_e=this._gl|0,it=this._hl|0,pt=0;pt<32;pt+=2)bt[pt]=tt.readInt32BE(pt*4),bt[pt+1]=tt.readInt32BE(pt*4+4);for(;pt<160;pt+=2){var yt=bt[pt-30],ct=bt[pt-15*2+1],_=nt(yt,ct),rt=gt(ct,yt);yt=bt[pt-2*2],ct=bt[pt-2*2+1];var Ct=dt(yt,ct),It=mt(ct,yt),Nt=bt[pt-7*2],Ut=bt[pt-7*2+1],Gt=bt[pt-16*2],Pt=bt[pt-16*2+1],qt=rt+Ut|0,Kt=_+Nt+vt(qt,rt)|0;qt=qt+It|0,Kt=Kt+Ct+vt(qt,It)|0,qt=qt+Pt|0,Kt=Kt+Gt+vt(qt,Pt)|0,bt[pt]=Kt,bt[pt+1]=qt}for(var jt=0;jt<160;jt+=2){Kt=bt[jt],qt=bt[jt+1];var Ht=ot(ht,St,At),Bt=ot(Et,kt,at),Jt=st(ht,Et),sr=st(Et,ht),hr=lt(ft,b),Ar=lt(b,ft),yn=c[jt],Lr=c[jt+1],wr=et(ft,_t,Rt),En=et(b,$,_e),Dr=it+Ar|0,Qr=Mt+hr+vt(Dr,it)|0;Dr=Dr+En|0,Qr=Qr+wr+vt(Dr,En)|0,Dr=Dr+Lr|0,Qr=Qr+yn+vt(Dr,Lr)|0,Dr=Dr+qt|0,Qr=Qr+Kt+vt(Dr,qt)|0;var Bn=sr+Bt|0,Br=Jt+Ht+vt(Bn,sr)|0;Mt=Rt,it=_e,Rt=_t,_e=$,_t=ft,$=b,b=s+Dr|0,ft=Tt+Qr+vt(b,s)|0,Tt=At,s=at,At=St,at=kt,St=ht,kt=Et,Et=Dr+Bn|0,ht=Qr+Br+vt(Et,Dr)|0}this._al=this._al+Et|0,this._bl=this._bl+kt|0,this._cl=this._cl+at|0,this._dl=this._dl+s|0,this._el=this._el+b|0,this._fl=this._fl+$|0,this._gl=this._gl+_e|0,this._hl=this._hl+it|0,this._ah=this._ah+ht+vt(this._al,Et)|0,this._bh=this._bh+St+vt(this._bl,kt)|0,this._ch=this._ch+At+vt(this._cl,at)|0,this._dh=this._dh+Tt+vt(this._dl,s)|0,this._eh=this._eh+ft+vt(this._el,b)|0,this._fh=this._fh+_t+vt(this._fl,$)|0,this._gh=this._gh+Rt+vt(this._gl,_e)|0,this._hh=this._hh+Mt+vt(this._hl,it)|0},h.prototype._hash=function(){var tt=a.allocUnsafe(64);function bt(ht,St,At){tt.writeInt32BE(ht,At),tt.writeInt32BE(St,At+4)}return bt(this._ah,this._al,0),bt(this._bh,this._bl,8),bt(this._ch,this._cl,16),bt(this._dh,this._dl,24),bt(this._eh,this._el,32),bt(this._fh,this._fl,40),bt(this._gh,this._gl,48),bt(this._hh,this._hl,56),tt},sha512$1=h,sha512$1}var sha384$1,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$1;hasRequiredSha384=1;var o=requireInherits_browser(),e=requireSha512(),a=requireHash$1(),c=requireSafeBuffer$1().Buffer,j=new Array(160);function h(){this.init(),this._w=j,a.call(this,128,112)}return o(h,e),h.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},h.prototype._hash=function(){var et=c.allocUnsafe(48);function ot(st,lt,nt){et.writeInt32BE(st,nt),et.writeInt32BE(lt,nt+4)}return ot(this._ah,this._al,0),ot(this._bh,this._bl,8),ot(this._ch,this._cl,16),ot(this._dh,this._dl,24),ot(this._eh,this._el,32),ot(this._fh,this._fl,40),et},sha384$1=h,sha384$1}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var o=sha_js.exports=function(a){a=a.toLowerCase();var c=o[a];if(!c)throw new Error(a+" is not supported (we accept pull requests)");return new c};return o.sha=requireSha$1(),o.sha1=requireSha1(),o.sha224=requireSha224(),o.sha256=requireSha256(),o.sha384=requireSha384(),o.sha512=requireSha512(),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var o=requireSafeBuffer$1().Buffer,e=requireStreamBrowserify().Transform,a=requireString_decoder().StringDecoder,c=requireInherits_browser();function j(st){e.call(this),this.hashMode=typeof st=="string",this.hashMode?this[st]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}c(j,e);var h=typeof Uint8Array<"u",et=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(o.prototype instanceof Uint8Array||o.TYPED_ARRAY_SUPPORT);function ot(st,lt){if(st instanceof o)return st;if(typeof st=="string")return o.from(st,lt);if(et&&ArrayBuffer.isView(st)){if(st.byteLength===0)return o.alloc(0);var nt=o.from(st.buffer,st.byteOffset,st.byteLength);if(nt.byteLength===st.byteLength)return nt}if(h&&st instanceof Uint8Array||o.isBuffer(st)&&st.constructor&&typeof st.constructor.isBuffer=="function"&&st.constructor.isBuffer(st))return o.from(st);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return j.prototype.update=function(st,lt,nt){var gt=ot(st,lt),dt=this._update(gt);return this.hashMode?this:(nt&&(dt=this._toString(dt,nt)),dt)},j.prototype.setAutoPadding=function(){},j.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},j.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},j.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},j.prototype._transform=function(st,lt,nt){var gt;try{this.hashMode?this._update(st):this.push(this._update(st))}catch(dt){gt=dt}finally{nt(gt)}},j.prototype._flush=function(st){var lt;try{this.push(this.__final())}catch(nt){lt=nt}st(lt)},j.prototype._finalOrDigest=function(st){var lt=this.__final()||o.alloc(0);return st&&(lt=this._toString(lt,st,!0)),lt},j.prototype._toString=function(st,lt,nt){if(this._decoder||(this._decoder=new a(lt),this._encoding=lt),this._encoding!==lt)throw new Error("can’t switch encodings");var gt=this._decoder.write(st);return nt&&(gt+=this._decoder.end()),gt},cipherBase=j,cipherBase}var browser$b,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$b;hasRequiredBrowser$9=1;var o=requireInherits_browser(),e=requireMd5_js(),a=requireRipemd160(),c=requireSha_js(),j=requireCipherBase();function h(et){j.call(this,"digest"),this._hash=et}return o(h,j),h.prototype._update=function(et){this._hash.update(et)},h.prototype._final=function(){return this._hash.digest()},browser$b=function(ot){return ot=ot.toLowerCase(),ot==="md5"?new e:ot==="rmd160"||ot==="ripemd160"?new a:new h(c(ot))},browser$b}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var o=requireInherits_browser(),e=requireSafeBuffer$1().Buffer,a=requireCipherBase(),c=e.alloc(128),j=64;function h(et,ot){a.call(this,"digest"),typeof ot=="string"&&(ot=e.from(ot)),this._alg=et,this._key=ot,ot.length>j?ot=et(ot):ot.length<j&&(ot=e.concat([ot,c],j));for(var st=this._ipad=e.allocUnsafe(j),lt=this._opad=e.allocUnsafe(j),nt=0;nt<j;nt++)st[nt]=ot[nt]^54,lt[nt]=ot[nt]^92;this._hash=[st]}return o(h,a),h.prototype._update=function(et){this._hash.push(et)},h.prototype._final=function(){var et=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,et]))},legacy=h,legacy}var md5,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1;var o=requireMd5_js();return md5=function(e){return new o().update(e).digest()},md5}var browser$a,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$a;hasRequiredBrowser$8=1;var o=requireInherits_browser(),e=requireLegacy(),a=requireCipherBase(),c=requireSafeBuffer$1().Buffer,j=requireMd5(),h=requireRipemd160(),et=requireSha_js(),ot=c.alloc(128);function st(lt,nt){a.call(this,"digest"),typeof nt=="string"&&(nt=c.from(nt));var gt=lt==="sha512"||lt==="sha384"?128:64;if(this._alg=lt,this._key=nt,nt.length>gt){var dt=lt==="rmd160"?new h:et(lt);nt=dt.update(nt).digest()}else nt.length<gt&&(nt=c.concat([nt,ot],gt));for(var mt=this._ipad=c.allocUnsafe(gt),vt=this._opad=c.allocUnsafe(gt),tt=0;tt<gt;tt++)mt[tt]=nt[tt]^54,vt[tt]=nt[tt]^92;this._hash=lt==="rmd160"?new h:et(lt),this._hash.update(mt)}return o(st,a),st.prototype._update=function(lt){this._hash.update(lt)},st.prototype._final=function(){var lt=this._hash.digest(),nt=this._alg==="rmd160"?new h:et(this._alg);return nt.update(this._opad).update(lt).digest()},browser$a=function(nt,gt){return nt=nt.toLowerCase(),nt==="rmd160"||nt==="ripemd160"?new st("rmd160",gt):nt==="md5"?new e(j,gt):new st(nt,gt)},browser$a}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6$1={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256,sha224,sha384,sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6$1),algos}var browser$9={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var o=Math.pow(2,30)-1;return precondition=function(e,a){if(typeof e!="number")throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if(typeof a!="number")throw new TypeError("Key length not a number");if(a<0||a>o||a!==a)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var o;if(commonjsGlobal.process&&commonjsGlobal.process.browser)o="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var e=parseInt(process$1.version.split(".")[0].slice(1),10);o=e>=6?"utf-8":"binary"}else o="utf-8";return defaultEncoding_1=o,defaultEncoding_1}var toBuffer,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer;hasRequiredToBuffer=1;var o=requireSafeBuffer$1().Buffer;return toBuffer=function(e,a,c){if(o.isBuffer(e))return e;if(typeof e=="string")return o.from(e,a);if(ArrayBuffer.isView(e))return o.from(e.buffer);throw new TypeError(c+" must be a string, a Buffer, a typed array or a DataView")},toBuffer}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var o=requireMd5(),e=requireRipemd160(),a=requireSha_js(),c=requireSafeBuffer$1().Buffer,j=requirePrecondition(),h=requireDefaultEncoding(),et=requireToBuffer(),ot=c.alloc(128),st={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function lt(dt,mt,vt){var tt=nt(dt),bt=dt==="sha512"||dt==="sha384"?128:64;mt.length>bt?mt=tt(mt):mt.length<bt&&(mt=c.concat([mt,ot],bt));for(var ht=c.allocUnsafe(bt+st[dt]),St=c.allocUnsafe(bt+st[dt]),At=0;At<bt;At++)ht[At]=mt[At]^54,St[At]=mt[At]^92;var Tt=c.allocUnsafe(bt+vt+4);ht.copy(Tt,0,0,bt),this.ipad1=Tt,this.ipad2=ht,this.opad=St,this.alg=dt,this.blocksize=bt,this.hash=tt,this.size=st[dt]}lt.prototype.run=function(dt,mt){dt.copy(mt,this.blocksize);var vt=this.hash(mt);return vt.copy(this.opad,this.blocksize),this.hash(this.opad)};function nt(dt){function mt(tt){return a(dt).update(tt).digest()}function vt(tt){return new e().update(tt).digest()}return dt==="rmd160"||dt==="ripemd160"?vt:dt==="md5"?o:mt}function gt(dt,mt,vt,tt,bt){j(vt,tt),dt=et(dt,h,"Password"),mt=et(mt,h,"Salt"),bt=bt||"sha1";var ht=new lt(bt,dt,mt.length),St=c.allocUnsafe(tt),At=c.allocUnsafe(mt.length+4);mt.copy(At,0,0,mt.length);for(var Tt=0,ft=st[bt],_t=Math.ceil(tt/ft),Rt=1;Rt<=_t;Rt++){At.writeUInt32BE(Rt,mt.length);for(var Mt=ht.run(At,ht.ipad1),Et=Mt,kt=1;kt<vt;kt++){Et=ht.run(Et,ht.ipad2);for(var at=0;at<ft;at++)Mt[at]^=Et[at]}Mt.copy(St,Tt),Tt+=ft}return St}return syncBrowser=gt,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var o=requireSafeBuffer$1().Buffer,e=requirePrecondition(),a=requireDefaultEncoding(),c=requireSyncBrowser(),j=requireToBuffer(),h,et=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,ot={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},st=[];function lt(vt){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!et||!et.importKey||!et.deriveBits)return Promise.resolve(!1);if(st[vt]!==void 0)return st[vt];h=h||o.alloc(8);var tt=dt(h,h,10,128,vt).then(function(){return!0}).catch(function(){return!1});return st[vt]=tt,tt}var nt;function gt(){return nt||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?nt=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?nt=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?nt=commonjsGlobal.setImmediate:nt=commonjsGlobal.setTimeout,nt)}function dt(vt,tt,bt,ht,St){return et.importKey("raw",vt,{name:"PBKDF2"},!1,["deriveBits"]).then(function(At){return et.deriveBits({name:"PBKDF2",salt:tt,iterations:bt,hash:{name:St}},At,ht<<3)}).then(function(At){return o.from(At)})}function mt(vt,tt){vt.then(function(bt){gt()(function(){tt(null,bt)})},function(bt){gt()(function(){tt(bt)})})}return async=function(vt,tt,bt,ht,St,At){typeof St=="function"&&(At=St,St=void 0),St=St||"sha1";var Tt=ot[St.toLowerCase()];if(!Tt||typeof commonjsGlobal.Promise!="function"){gt()(function(){var ft;try{ft=c(vt,tt,bt,ht,St)}catch(_t){return At(_t)}At(null,ft)});return}if(e(bt,ht),vt=j(vt,a,"Password"),tt=j(tt,a,"Salt"),typeof At!="function")throw new Error("No callback provided to pbkdf2");mt(lt(Tt).then(function(ft){return ft?dt(vt,tt,bt,ht,Tt):c(vt,tt,bt,ht,St)}),At)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$9.pbkdf2=requireAsync(),browser$9.pbkdf2Sync=requireSyncBrowser()),browser$9}var browser$8={},des$1={},utils$4={},hasRequiredUtils$4;function requireUtils$4(){if(hasRequiredUtils$4)return utils$4;hasRequiredUtils$4=1,utils$4.readUInt32BE=function(j,h){var et=j[0+h]<<24|j[1+h]<<16|j[2+h]<<8|j[3+h];return et>>>0},utils$4.writeUInt32BE=function(j,h,et){j[0+et]=h>>>24,j[1+et]=h>>>16&255,j[2+et]=h>>>8&255,j[3+et]=h&255},utils$4.ip=function(j,h,et,ot){for(var st=0,lt=0,nt=6;nt>=0;nt-=2){for(var gt=0;gt<=24;gt+=8)st<<=1,st|=h>>>gt+nt&1;for(var gt=0;gt<=24;gt+=8)st<<=1,st|=j>>>gt+nt&1}for(var nt=6;nt>=0;nt-=2){for(var gt=1;gt<=25;gt+=8)lt<<=1,lt|=h>>>gt+nt&1;for(var gt=1;gt<=25;gt+=8)lt<<=1,lt|=j>>>gt+nt&1}et[ot+0]=st>>>0,et[ot+1]=lt>>>0},utils$4.rip=function(j,h,et,ot){for(var st=0,lt=0,nt=0;nt<4;nt++)for(var gt=24;gt>=0;gt-=8)st<<=1,st|=h>>>gt+nt&1,st<<=1,st|=j>>>gt+nt&1;for(var nt=4;nt<8;nt++)for(var gt=24;gt>=0;gt-=8)lt<<=1,lt|=h>>>gt+nt&1,lt<<=1,lt|=j>>>gt+nt&1;et[ot+0]=st>>>0,et[ot+1]=lt>>>0},utils$4.pc1=function(j,h,et,ot){for(var st=0,lt=0,nt=7;nt>=5;nt--){for(var gt=0;gt<=24;gt+=8)st<<=1,st|=h>>gt+nt&1;for(var gt=0;gt<=24;gt+=8)st<<=1,st|=j>>gt+nt&1}for(var gt=0;gt<=24;gt+=8)st<<=1,st|=h>>gt+nt&1;for(var nt=1;nt<=3;nt++){for(var gt=0;gt<=24;gt+=8)lt<<=1,lt|=h>>gt+nt&1;for(var gt=0;gt<=24;gt+=8)lt<<=1,lt|=j>>gt+nt&1}for(var gt=0;gt<=24;gt+=8)lt<<=1,lt|=j>>gt+nt&1;et[ot+0]=st>>>0,et[ot+1]=lt>>>0},utils$4.r28shl=function(j,h){return j<<h&268435455|j>>>28-h};var o=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$4.pc2=function(j,h,et,ot){for(var st=0,lt=0,nt=o.length>>>1,gt=0;gt<nt;gt++)st<<=1,st|=j>>>o[gt]&1;for(var gt=nt;gt<o.length;gt++)lt<<=1,lt|=h>>>o[gt]&1;et[ot+0]=st>>>0,et[ot+1]=lt>>>0},utils$4.expand=function(j,h,et){var ot=0,st=0;ot=(j&1)<<5|j>>>27;for(var lt=23;lt>=15;lt-=4)ot<<=6,ot|=j>>>lt&63;for(var lt=11;lt>=3;lt-=4)st|=j>>>lt&63,st<<=6;st|=(j&31)<<1|j>>>31,h[et+0]=ot>>>0,h[et+1]=st>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$4.substitute=function(j,h){for(var et=0,ot=0;ot<4;ot++){var st=j>>>18-ot*6&63,lt=e[ot*64+st];et<<=4,et|=lt}for(var ot=0;ot<4;ot++){var st=h>>>18-ot*6&63,lt=e[4*64+ot*64+st];et<<=4,et|=lt}return et>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$4.permute=function(j){for(var h=0,et=0;et<a.length;et++)h<<=1,h|=j>>>a[et]&1;return h>>>0},utils$4.padSplit=function(j,h,et){for(var ot=j.toString(2);ot.length<h;)ot="0"+ot;for(var st=[],lt=0;lt<h;lt+=et)st.push(ot.slice(lt,lt+et));return st.join(" ")},utils$4}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=o;function o(e,a){if(!e)throw new Error(a||"Assertion failed")}return o.equal=function(a,c,j){if(a!=c)throw new Error(j||"Assertion failed: "+a+" != "+c)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var o=requireMinimalisticAssert();function e(a){this.options=a,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=a.padding!==!1}return cipher=e,e.prototype._init=function(){},e.prototype.update=function(c){return c.length===0?[]:this.type==="decrypt"?this._updateDecrypt(c):this._updateEncrypt(c)},e.prototype._buffer=function(c,j){for(var h=Math.min(this.buffer.length-this.bufferOff,c.length-j),et=0;et<h;et++)this.buffer[this.bufferOff+et]=c[j+et];return this.bufferOff+=h,h},e.prototype._flushBuffer=function(c,j){return this._update(this.buffer,0,c,j),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(c){var j=0,h=0,et=(this.bufferOff+c.length)/this.blockSize|0,ot=new Array(et*this.blockSize);this.bufferOff!==0&&(j+=this._buffer(c,j),this.bufferOff===this.buffer.length&&(h+=this._flushBuffer(ot,h)));for(var st=c.length-(c.length-j)%this.blockSize;j<st;j+=this.blockSize)this._update(c,j,ot,h),h+=this.blockSize;for(;j<c.length;j++,this.bufferOff++)this.buffer[this.bufferOff]=c[j];return ot},e.prototype._updateDecrypt=function(c){for(var j=0,h=0,et=Math.ceil((this.bufferOff+c.length)/this.blockSize)-1,ot=new Array(et*this.blockSize);et>0;et--)j+=this._buffer(c,j),h+=this._flushBuffer(ot,h);return j+=this._buffer(c,j),ot},e.prototype.final=function(c){var j;c&&(j=this.update(c));var h;return this.type==="encrypt"?h=this._finalEncrypt():h=this._finalDecrypt(),j?j.concat(h):h},e.prototype._pad=function(c,j){if(j===0)return!1;for(;j<c.length;)c[j++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var c=new Array(this.blockSize);return this._update(this.buffer,0,c,0),c},e.prototype._unpad=function(c){return c},e.prototype._finalDecrypt=function(){o.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var c=new Array(this.blockSize);return this._flushBuffer(c,0),this._unpad(c)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var o=requireMinimalisticAssert(),e=requireInherits_browser(),a=requireUtils$4(),c=requireCipher();function j(){this.tmp=new Array(2),this.keys=null}function h(ot){c.call(this,ot);var st=new j;this._desState=st,this.deriveKeys(st,ot.key)}e(h,c),des=h,h.create=function(st){return new h(st)};var et=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return h.prototype.deriveKeys=function(st,lt){st.keys=new Array(16*2),o.equal(lt.length,this.blockSize,"Invalid key length");var nt=a.readUInt32BE(lt,0),gt=a.readUInt32BE(lt,4);a.pc1(nt,gt,st.tmp,0),nt=st.tmp[0],gt=st.tmp[1];for(var dt=0;dt<st.keys.length;dt+=2){var mt=et[dt>>>1];nt=a.r28shl(nt,mt),gt=a.r28shl(gt,mt),a.pc2(nt,gt,st.keys,dt)}},h.prototype._update=function(st,lt,nt,gt){var dt=this._desState,mt=a.readUInt32BE(st,lt),vt=a.readUInt32BE(st,lt+4);a.ip(mt,vt,dt.tmp,0),mt=dt.tmp[0],vt=dt.tmp[1],this.type==="encrypt"?this._encrypt(dt,mt,vt,dt.tmp,0):this._decrypt(dt,mt,vt,dt.tmp,0),mt=dt.tmp[0],vt=dt.tmp[1],a.writeUInt32BE(nt,mt,gt),a.writeUInt32BE(nt,vt,gt+4)},h.prototype._pad=function(st,lt){if(this.padding===!1)return!1;for(var nt=st.length-lt,gt=lt;gt<st.length;gt++)st[gt]=nt;return!0},h.prototype._unpad=function(st){if(this.padding===!1)return st;for(var lt=st[st.length-1],nt=st.length-lt;nt<st.length;nt++)o.equal(st[nt],lt);return st.slice(0,st.length-lt)},h.prototype._encrypt=function(st,lt,nt,gt,dt){for(var mt=lt,vt=nt,tt=0;tt<st.keys.length;tt+=2){var bt=st.keys[tt],ht=st.keys[tt+1];a.expand(vt,st.tmp,0),bt^=st.tmp[0],ht^=st.tmp[1];var St=a.substitute(bt,ht),At=a.permute(St),Tt=vt;vt=(mt^At)>>>0,mt=Tt}a.rip(vt,mt,gt,dt)},h.prototype._decrypt=function(st,lt,nt,gt,dt){for(var mt=nt,vt=lt,tt=st.keys.length-2;tt>=0;tt-=2){var bt=st.keys[tt],ht=st.keys[tt+1];a.expand(mt,st.tmp,0),bt^=st.tmp[0],ht^=st.tmp[1];var St=a.substitute(bt,ht),At=a.permute(St),Tt=mt;mt=(vt^At)>>>0,vt=Tt}a.rip(mt,vt,gt,dt)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var o=requireMinimalisticAssert(),e=requireInherits_browser(),a={};function c(h){o.equal(h.length,8,"Invalid IV length"),this.iv=new Array(8);for(var et=0;et<this.iv.length;et++)this.iv[et]=h[et]}function j(h){function et(nt){h.call(this,nt),this._cbcInit()}e(et,h);for(var ot=Object.keys(a),st=0;st<ot.length;st++){var lt=ot[st];et.prototype[lt]=a[lt]}return et.create=function(gt){return new et(gt)},et}return cbc$1.instantiate=j,a._cbcInit=function(){var et=new c(this.options.iv);this._cbcState=et},a._update=function(et,ot,st,lt){var nt=this._cbcState,gt=this.constructor.super_.prototype,dt=nt.iv;if(this.type==="encrypt"){for(var mt=0;mt<this.blockSize;mt++)dt[mt]^=et[ot+mt];gt._update.call(this,dt,0,st,lt);for(var mt=0;mt<this.blockSize;mt++)dt[mt]=st[lt+mt]}else{gt._update.call(this,et,ot,st,lt);for(var mt=0;mt<this.blockSize;mt++)st[lt+mt]^=dt[mt];for(var mt=0;mt<this.blockSize;mt++)dt[mt]=et[ot+mt]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var o=requireMinimalisticAssert(),e=requireInherits_browser(),a=requireCipher(),c=requireDes$1();function j(et,ot){o.equal(ot.length,24,"Invalid key length");var st=ot.slice(0,8),lt=ot.slice(8,16),nt=ot.slice(16,24);et==="encrypt"?this.ciphers=[c.create({type:"encrypt",key:st}),c.create({type:"decrypt",key:lt}),c.create({type:"encrypt",key:nt})]:this.ciphers=[c.create({type:"decrypt",key:nt}),c.create({type:"encrypt",key:lt}),c.create({type:"decrypt",key:st})]}function h(et){a.call(this,et);var ot=new j(this.type,this.options.key);this._edeState=ot}return e(h,a),ede=h,h.create=function(ot){return new h(ot)},h.prototype._update=function(ot,st,lt,nt){var gt=this._edeState;gt.ciphers[0]._update(ot,st,lt,nt),gt.ciphers[1]._update(lt,nt,lt,nt),gt.ciphers[2]._update(lt,nt,lt,nt)},h.prototype._pad=c.prototype._pad,h.prototype._unpad=c.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$4(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var o=requireCipherBase(),e=requireDes(),a=requireInherits_browser(),c=requireSafeBuffer$1().Buffer,j={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};j.des=j["des-cbc"],j.des3=j["des-ede3-cbc"],browserifyDes=h,a(h,o);function h(et){o.call(this);var ot=et.mode.toLowerCase(),st=j[ot],lt;et.decrypt?lt="decrypt":lt="encrypt";var nt=et.key;c.isBuffer(nt)||(nt=c.from(nt)),(ot==="des-ede"||ot==="des-ede-cbc")&&(nt=c.concat([nt,nt.slice(0,8)]));var gt=et.iv;c.isBuffer(gt)||(gt=c.from(gt)),this._des=st.create({key:nt,iv:gt,type:lt})}return h.prototype._update=function(et){return c.from(this._des.update(et))},h.prototype._final=function(){return c.from(this._des.final())},browserifyDes}var browser$7={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(o,e){return o._cipher.encryptBlock(e)},ecb.decrypt=function(o,e){return o._cipher.decryptBlock(e)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(e,a){for(var c=Math.min(e.length,a.length),j=new Buffer(c),h=0;h<c;++h)j[h]=e[h]^a[h];return j}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var o=requireBufferXor();return cbc.encrypt=function(e,a){var c=o(a,e._prev);return e._prev=e._cipher.encryptBlock(c),e._prev},cbc.decrypt=function(e,a){var c=e._prev;e._prev=a;var j=e._cipher.decryptBlock(a);return o(j,c)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var o=requireSafeBuffer$1().Buffer,e=requireBufferXor();function a(c,j,h){var et=j.length,ot=e(j,c._cache);return c._cache=c._cache.slice(et),c._prev=o.concat([c._prev,h?j:ot]),ot}return cfb.encrypt=function(c,j,h){for(var et=o.allocUnsafe(0),ot;j.length;)if(c._cache.length===0&&(c._cache=c._cipher.encryptBlock(c._prev),c._prev=o.allocUnsafe(0)),c._cache.length<=j.length)ot=c._cache.length,et=o.concat([et,a(c,j.slice(0,ot),h)]),j=j.slice(ot);else{et=o.concat([et,a(c,j,h)]);break}return et},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var o=requireSafeBuffer$1().Buffer;function e(a,c,j){var h=a._cipher.encryptBlock(a._prev),et=h[0]^c;return a._prev=o.concat([a._prev.slice(1),o.from([j?c:et])]),et}return cfb8.encrypt=function(a,c,j){for(var h=c.length,et=o.allocUnsafe(h),ot=-1;++ot<h;)et[ot]=e(a,c[ot],j);return et},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var o=requireSafeBuffer$1().Buffer;function e(c,j,h){for(var et,ot=-1,st=8,lt=0,nt,gt;++ot<st;)et=c._cipher.encryptBlock(c._prev),nt=j&1<<7-ot?128:0,gt=et[0]^nt,lt+=(gt&128)>>ot%8,c._prev=a(c._prev,h?nt:gt);return lt}function a(c,j){var h=c.length,et=-1,ot=o.allocUnsafe(c.length);for(c=o.concat([c,o.from([j])]);++et<h;)ot[et]=c[et]<<1|c[et+1]>>7;return ot}return cfb1.encrypt=function(c,j,h){for(var et=j.length,ot=o.allocUnsafe(et),st=-1;++st<et;)ot[st]=e(c,j[st],h);return ot},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var o=requireBufferXor();function e(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}return ofb.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=Buffer.concat([a._cache,e(a)]);var j=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),o(c,j)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function o(e){for(var a=e.length,c;a--;)if(c=e.readUInt8(a),c===255)e.writeUInt8(0,a);else{c++,e.writeUInt8(c,a);break}}return incr32_1=o,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var o=requireBufferXor(),e=requireSafeBuffer$1().Buffer,a=requireIncr32();function c(h){var et=h._cipher.encryptBlockRaw(h._prev);return a(h._prev),et}var j=16;return ctr.encrypt=function(h,et){var ot=Math.ceil(et.length/j),st=h._cache.length;h._cache=e.concat([h._cache,e.allocUnsafe(ot*j)]);for(var lt=0;lt<ot;lt++){var nt=c(h),gt=st+lt*j;h._cache.writeUInt32BE(nt[0],gt+0),h._cache.writeUInt32BE(nt[1],gt+4),h._cache.writeUInt32BE(nt[2],gt+8),h._cache.writeUInt32BE(nt[3],gt+12)}var dt=h._cache.slice(0,et.length);return h._cache=h._cache.slice(et.length),o(et,dt)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var o={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},e=require$$2;for(var a in e)e[a].module=o[e[a].mode];return modes_1=e,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var o=requireSafeBuffer$1().Buffer;function e(ot){o.isBuffer(ot)||(ot=o.from(ot));for(var st=ot.length/4|0,lt=new Array(st),nt=0;nt<st;nt++)lt[nt]=ot.readUInt32BE(nt*4);return lt}function a(ot){for(var st=0;st<ot.length;ot++)ot[st]=0}function c(ot,st,lt,nt,gt){for(var dt=lt[0],mt=lt[1],vt=lt[2],tt=lt[3],bt=ot[0]^st[0],ht=ot[1]^st[1],St=ot[2]^st[2],At=ot[3]^st[3],Tt,ft,_t,Rt,Mt=4,Et=1;Et<gt;Et++)Tt=dt[bt>>>24]^mt[ht>>>16&255]^vt[St>>>8&255]^tt[At&255]^st[Mt++],ft=dt[ht>>>24]^mt[St>>>16&255]^vt[At>>>8&255]^tt[bt&255]^st[Mt++],_t=dt[St>>>24]^mt[At>>>16&255]^vt[bt>>>8&255]^tt[ht&255]^st[Mt++],Rt=dt[At>>>24]^mt[bt>>>16&255]^vt[ht>>>8&255]^tt[St&255]^st[Mt++],bt=Tt,ht=ft,St=_t,At=Rt;return Tt=(nt[bt>>>24]<<24|nt[ht>>>16&255]<<16|nt[St>>>8&255]<<8|nt[At&255])^st[Mt++],ft=(nt[ht>>>24]<<24|nt[St>>>16&255]<<16|nt[At>>>8&255]<<8|nt[bt&255])^st[Mt++],_t=(nt[St>>>24]<<24|nt[At>>>16&255]<<16|nt[bt>>>8&255]<<8|nt[ht&255])^st[Mt++],Rt=(nt[At>>>24]<<24|nt[bt>>>16&255]<<16|nt[ht>>>8&255]<<8|nt[St&255])^st[Mt++],Tt=Tt>>>0,ft=ft>>>0,_t=_t>>>0,Rt=Rt>>>0,[Tt,ft,_t,Rt]}var j=[0,1,2,4,8,16,32,64,128,27,54],h=function(){for(var ot=new Array(256),st=0;st<256;st++)st<128?ot[st]=st<<1:ot[st]=st<<1^283;for(var lt=[],nt=[],gt=[[],[],[],[]],dt=[[],[],[],[]],mt=0,vt=0,tt=0;tt<256;++tt){var bt=vt^vt<<1^vt<<2^vt<<3^vt<<4;bt=bt>>>8^bt&255^99,lt[mt]=bt,nt[bt]=mt;var ht=ot[mt],St=ot[ht],At=ot[St],Tt=ot[bt]*257^bt*16843008;gt[0][mt]=Tt<<24|Tt>>>8,gt[1][mt]=Tt<<16|Tt>>>16,gt[2][mt]=Tt<<8|Tt>>>24,gt[3][mt]=Tt,Tt=At*16843009^St*65537^ht*257^mt*16843008,dt[0][bt]=Tt<<24|Tt>>>8,dt[1][bt]=Tt<<16|Tt>>>16,dt[2][bt]=Tt<<8|Tt>>>24,dt[3][bt]=Tt,mt===0?mt=vt=1:(mt=ht^ot[ot[ot[At^ht]]],vt^=ot[ot[vt]])}return{SBOX:lt,INV_SBOX:nt,SUB_MIX:gt,INV_SUB_MIX:dt}}();function et(ot){this._key=e(ot),this._reset()}return et.blockSize=4*4,et.keySize=256/8,et.prototype.blockSize=et.blockSize,et.prototype.keySize=et.keySize,et.prototype._reset=function(){for(var ot=this._key,st=ot.length,lt=st+6,nt=(lt+1)*4,gt=[],dt=0;dt<st;dt++)gt[dt]=ot[dt];for(dt=st;dt<nt;dt++){var mt=gt[dt-1];dt%st===0?(mt=mt<<8|mt>>>24,mt=h.SBOX[mt>>>24]<<24|h.SBOX[mt>>>16&255]<<16|h.SBOX[mt>>>8&255]<<8|h.SBOX[mt&255],mt^=j[dt/st|0]<<24):st>6&&dt%st===4&&(mt=h.SBOX[mt>>>24]<<24|h.SBOX[mt>>>16&255]<<16|h.SBOX[mt>>>8&255]<<8|h.SBOX[mt&255]),gt[dt]=gt[dt-st]^mt}for(var vt=[],tt=0;tt<nt;tt++){var bt=nt-tt,ht=gt[bt-(tt%4?0:4)];tt<4||bt<=4?vt[tt]=ht:vt[tt]=h.INV_SUB_MIX[0][h.SBOX[ht>>>24]]^h.INV_SUB_MIX[1][h.SBOX[ht>>>16&255]]^h.INV_SUB_MIX[2][h.SBOX[ht>>>8&255]]^h.INV_SUB_MIX[3][h.SBOX[ht&255]]}this._nRounds=lt,this._keySchedule=gt,this._invKeySchedule=vt},et.prototype.encryptBlockRaw=function(ot){return ot=e(ot),c(ot,this._keySchedule,h.SUB_MIX,h.SBOX,this._nRounds)},et.prototype.encryptBlock=function(ot){var st=this.encryptBlockRaw(ot),lt=o.allocUnsafe(16);return lt.writeUInt32BE(st[0],0),lt.writeUInt32BE(st[1],4),lt.writeUInt32BE(st[2],8),lt.writeUInt32BE(st[3],12),lt},et.prototype.decryptBlock=function(ot){ot=e(ot);var st=ot[1];ot[1]=ot[3],ot[3]=st;var lt=c(ot,this._invKeySchedule,h.INV_SUB_MIX,h.INV_SBOX,this._nRounds),nt=o.allocUnsafe(16);return nt.writeUInt32BE(lt[0],0),nt.writeUInt32BE(lt[3],4),nt.writeUInt32BE(lt[2],8),nt.writeUInt32BE(lt[1],12),nt},et.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},aes.AES=et,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var o=requireSafeBuffer$1().Buffer,e=o.alloc(16,0);function a(h){return[h.readUInt32BE(0),h.readUInt32BE(4),h.readUInt32BE(8),h.readUInt32BE(12)]}function c(h){var et=o.allocUnsafe(16);return et.writeUInt32BE(h[0]>>>0,0),et.writeUInt32BE(h[1]>>>0,4),et.writeUInt32BE(h[2]>>>0,8),et.writeUInt32BE(h[3]>>>0,12),et}function j(h){this.h=h,this.state=o.alloc(16,0),this.cache=o.allocUnsafe(0)}return j.prototype.ghash=function(h){for(var et=-1;++et<h.length;)this.state[et]^=h[et];this._multiply()},j.prototype._multiply=function(){for(var h=a(this.h),et=[0,0,0,0],ot,st,lt,nt=-1;++nt<128;){for(st=(this.state[~~(nt/8)]&1<<7-nt%8)!==0,st&&(et[0]^=h[0],et[1]^=h[1],et[2]^=h[2],et[3]^=h[3]),lt=(h[3]&1)!==0,ot=3;ot>0;ot--)h[ot]=h[ot]>>>1|(h[ot-1]&1)<<31;h[0]=h[0]>>>1,lt&&(h[0]=h[0]^225<<24)}this.state=c(et)},j.prototype.update=function(h){this.cache=o.concat([this.cache,h]);for(var et;this.cache.length>=16;)et=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(et)},j.prototype.final=function(h,et){return this.cache.length&&this.ghash(o.concat([this.cache,e],16)),this.ghash(c([0,h,0,et])),this.state},ghash=j,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var o=requireAes(),e=requireSafeBuffer$1().Buffer,a=requireCipherBase(),c=requireInherits_browser(),j=requireGhash(),h=requireBufferXor(),et=requireIncr32();function ot(nt,gt){var dt=0;nt.length!==gt.length&&dt++;for(var mt=Math.min(nt.length,gt.length),vt=0;vt<mt;++vt)dt+=nt[vt]^gt[vt];return dt}function st(nt,gt,dt){if(gt.length===12)return nt._finID=e.concat([gt,e.from([0,0,0,1])]),e.concat([gt,e.from([0,0,0,2])]);var mt=new j(dt),vt=gt.length,tt=vt%16;mt.update(gt),tt&&(tt=16-tt,mt.update(e.alloc(tt,0))),mt.update(e.alloc(8,0));var bt=vt*8,ht=e.alloc(8);ht.writeUIntBE(bt,0,8),mt.update(ht),nt._finID=mt.state;var St=e.from(nt._finID);return et(St),St}function lt(nt,gt,dt,mt){a.call(this);var vt=e.alloc(4,0);this._cipher=new o.AES(gt);var tt=this._cipher.encryptBlock(vt);this._ghash=new j(tt),dt=st(this,dt,tt),this._prev=e.from(dt),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=mt,this._alen=0,this._len=0,this._mode=nt,this._authTag=null,this._called=!1}return c(lt,a),lt.prototype._update=function(nt){if(!this._called&&this._alen){var gt=16-this._alen%16;gt<16&&(gt=e.alloc(gt,0),this._ghash.update(gt))}this._called=!0;var dt=this._mode.encrypt(this,nt);return this._decrypt?this._ghash.update(nt):this._ghash.update(dt),this._len+=nt.length,dt},lt.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var nt=h(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&ot(nt,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=nt,this._cipher.scrub()},lt.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},lt.prototype.setAuthTag=function(gt){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=gt},lt.prototype.setAAD=function(gt){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(gt),this._alen+=gt.length},authCipher=lt,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var o=requireAes(),e=requireSafeBuffer$1().Buffer,a=requireCipherBase(),c=requireInherits_browser();function j(h,et,ot,st){a.call(this),this._cipher=new o.AES(et),this._prev=e.from(ot),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=st,this._mode=h}return c(j,a),j.prototype._update=function(h){return this._mode.encrypt(this,h,this._decrypt)},j.prototype._final=function(){this._cipher.scrub()},streamCipher=j,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var o=requireSafeBuffer$1().Buffer,e=requireMd5_js();function a(c,j,h,et){if(o.isBuffer(c)||(c=o.from(c,"binary")),j&&(o.isBuffer(j)||(j=o.from(j,"binary")),j.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var ot=h/8,st=o.alloc(ot),lt=o.alloc(et||0),nt=o.alloc(0);ot>0||et>0;){var gt=new e;gt.update(nt),gt.update(c),j&&gt.update(j),nt=gt.digest();var dt=0;if(ot>0){var mt=st.length-ot;dt=Math.min(ot,nt.length),nt.copy(st,mt,0,dt),ot-=dt}if(dt<nt.length&&et>0){var vt=lt.length-et,tt=Math.min(et,nt.length-dt);nt.copy(lt,vt,dt,dt+tt),et-=tt}}return nt.fill(0),{key:st,iv:lt}}return evp_bytestokey=a,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var o=requireModes$1(),e=requireAuthCipher(),a=requireSafeBuffer$1().Buffer,c=requireStreamCipher(),j=requireCipherBase(),h=requireAes(),et=requireEvp_bytestokey(),ot=requireInherits_browser();function st(mt,vt,tt){j.call(this),this._cache=new nt,this._cipher=new h.AES(vt),this._prev=a.from(tt),this._mode=mt,this._autopadding=!0}ot(st,j),st.prototype._update=function(mt){this._cache.add(mt);for(var vt,tt,bt=[];vt=this._cache.get();)tt=this._mode.encrypt(this,vt),bt.push(tt);return a.concat(bt)};var lt=a.alloc(16,16);st.prototype._final=function(){var mt=this._cache.flush();if(this._autopadding)return mt=this._mode.encrypt(this,mt),this._cipher.scrub(),mt;if(!mt.equals(lt))throw this._cipher.scrub(),new Error("data not multiple of block length")},st.prototype.setAutoPadding=function(mt){return this._autopadding=!!mt,this};function nt(){this.cache=a.allocUnsafe(0)}nt.prototype.add=function(mt){this.cache=a.concat([this.cache,mt])},nt.prototype.get=function(){if(this.cache.length>15){var mt=this.cache.slice(0,16);return this.cache=this.cache.slice(16),mt}return null},nt.prototype.flush=function(){for(var mt=16-this.cache.length,vt=a.allocUnsafe(mt),tt=-1;++tt<mt;)vt.writeUInt8(mt,tt);return a.concat([this.cache,vt])};function gt(mt,vt,tt){var bt=o[mt.toLowerCase()];if(!bt)throw new TypeError("invalid suite type");if(typeof vt=="string"&&(vt=a.from(vt)),vt.length!==bt.key/8)throw new TypeError("invalid key length "+vt.length);if(typeof tt=="string"&&(tt=a.from(tt)),bt.mode!=="GCM"&&tt.length!==bt.iv)throw new TypeError("invalid iv length "+tt.length);return bt.type==="stream"?new c(bt.module,vt,tt):bt.type==="auth"?new e(bt.module,vt,tt):new st(bt.module,vt,tt)}function dt(mt,vt){var tt=o[mt.toLowerCase()];if(!tt)throw new TypeError("invalid suite type");var bt=et(vt,!1,tt.key,tt.iv);return gt(mt,bt.key,bt.iv)}return encrypter.createCipheriv=gt,encrypter.createCipher=dt,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var o=requireAuthCipher(),e=requireSafeBuffer$1().Buffer,a=requireModes$1(),c=requireStreamCipher(),j=requireCipherBase(),h=requireAes(),et=requireEvp_bytestokey(),ot=requireInherits_browser();function st(mt,vt,tt){j.call(this),this._cache=new lt,this._last=void 0,this._cipher=new h.AES(vt),this._prev=e.from(tt),this._mode=mt,this._autopadding=!0}ot(st,j),st.prototype._update=function(mt){this._cache.add(mt);for(var vt,tt,bt=[];vt=this._cache.get(this._autopadding);)tt=this._mode.decrypt(this,vt),bt.push(tt);return e.concat(bt)},st.prototype._final=function(){var mt=this._cache.flush();if(this._autopadding)return nt(this._mode.decrypt(this,mt));if(mt)throw new Error("data not multiple of block length")},st.prototype.setAutoPadding=function(mt){return this._autopadding=!!mt,this};function lt(){this.cache=e.allocUnsafe(0)}lt.prototype.add=function(mt){this.cache=e.concat([this.cache,mt])},lt.prototype.get=function(mt){var vt;if(mt){if(this.cache.length>16)return vt=this.cache.slice(0,16),this.cache=this.cache.slice(16),vt}else if(this.cache.length>=16)return vt=this.cache.slice(0,16),this.cache=this.cache.slice(16),vt;return null},lt.prototype.flush=function(){if(this.cache.length)return this.cache};function nt(mt){var vt=mt[15];if(vt<1||vt>16)throw new Error("unable to decrypt data");for(var tt=-1;++tt<vt;)if(mt[tt+(16-vt)]!==vt)throw new Error("unable to decrypt data");if(vt!==16)return mt.slice(0,16-vt)}function gt(mt,vt,tt){var bt=a[mt.toLowerCase()];if(!bt)throw new TypeError("invalid suite type");if(typeof tt=="string"&&(tt=e.from(tt)),bt.mode!=="GCM"&&tt.length!==bt.iv)throw new TypeError("invalid iv length "+tt.length);if(typeof vt=="string"&&(vt=e.from(vt)),vt.length!==bt.key/8)throw new TypeError("invalid key length "+vt.length);return bt.type==="stream"?new c(bt.module,vt,tt,!0):bt.type==="auth"?new o(bt.module,vt,tt,!0):new st(bt.module,vt,tt)}function dt(mt,vt){var tt=a[mt.toLowerCase()];if(!tt)throw new TypeError("invalid suite type");var bt=et(vt,!1,tt.key,tt.iv);return gt(mt,bt.key,bt.iv)}return decrypter.createDecipher=dt,decrypter.createDecipheriv=gt,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$7;hasRequiredBrowser$6=1;var o=requireEncrypter(),e=requireDecrypter(),a=require$$2;function c(){return Object.keys(a)}return browser$7.createCipher=browser$7.Cipher=o.createCipher,browser$7.createCipheriv=browser$7.Cipheriv=o.createCipheriv,browser$7.createDecipher=browser$7.Decipher=e.createDecipher,browser$7.createDecipheriv=browser$7.Decipheriv=e.createDecipheriv,browser$7.listCiphers=browser$7.getCiphers=c,browser$7}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(o){o["des-ecb"]={key:8,iv:0},o["des-cbc"]=o.des={key:8,iv:8},o["des-ede3-cbc"]=o.des3={key:24,iv:8},o["des-ede3"]={key:24,iv:0},o["des-ede-cbc"]={key:16,iv:8},o["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$8;hasRequiredBrowser$5=1;var o=requireBrowserifyDes(),e=requireBrowser$6(),a=requireModes$1(),c=requireModes(),j=requireEvp_bytestokey();function h(nt,gt){nt=nt.toLowerCase();var dt,mt;if(a[nt])dt=a[nt].key,mt=a[nt].iv;else if(c[nt])dt=c[nt].key*8,mt=c[nt].iv;else throw new TypeError("invalid suite type");var vt=j(gt,!1,dt,mt);return ot(nt,vt.key,vt.iv)}function et(nt,gt){nt=nt.toLowerCase();var dt,mt;if(a[nt])dt=a[nt].key,mt=a[nt].iv;else if(c[nt])dt=c[nt].key*8,mt=c[nt].iv;else throw new TypeError("invalid suite type");var vt=j(gt,!1,dt,mt);return st(nt,vt.key,vt.iv)}function ot(nt,gt,dt){if(nt=nt.toLowerCase(),a[nt])return e.createCipheriv(nt,gt,dt);if(c[nt])return new o({key:gt,iv:dt,mode:nt});throw new TypeError("invalid suite type")}function st(nt,gt,dt){if(nt=nt.toLowerCase(),a[nt])return e.createDecipheriv(nt,gt,dt);if(c[nt])return new o({key:gt,iv:dt,mode:nt,decrypt:!0});throw new TypeError("invalid suite type")}function lt(){return Object.keys(c).concat(e.getCiphers())}return browser$8.createCipher=browser$8.Cipher=h,browser$8.createCipheriv=browser$8.Cipheriv=ot,browser$8.createDecipher=browser$8.Decipher=et,browser$8.createDecipheriv=browser$8.Decipheriv=st,browser$8.listCiphers=browser$8.getCiphers=lt,browser$8}var browser$6={},bn$6={exports:{}};bn$6.exports;var hasRequiredBn$6;function requireBn$6(){return hasRequiredBn$6||(hasRequiredBn$6=1,function(o){(function(e,a){function c(at,s){if(!at)throw new Error(s||"Assertion failed")}function j(at,s){at.super_=s;var b=function(){};b.prototype=s.prototype,at.prototype=new b,at.prototype.constructor=at}function h(at,s,b){if(h.isBN(at))return at;this.negative=0,this.words=null,this.length=0,this.red=null,at!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(at||0,s||10,b||"be"))}typeof e=="object"?e.exports=h:a.BN=h,h.BN=h,h.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}h.isBN=function(s){return s instanceof h?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===h.wordSize&&Array.isArray(s.words)},h.max=function(s,b){return s.cmp(b)>0?s:b},h.min=function(s,b){return s.cmp(b)<0?s:b},h.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},h.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},h.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,yt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);return this.strip()};function ot(at,s){var b=at.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(at,s,b){var $=ot(at,b);return b-1>=s&&($|=ot(at,b-1)<<4),$}h.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,yt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8;else{var ct=s.length-b;for(_e=ct%2===0?b+1:b;_e<s.length;_e+=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8}this.strip()};function lt(at,s,b,$){for(var _e=0,it=Math.min(at.length,b),pt=s;pt<it;pt++){var yt=at.charCodeAt(pt)-48;_e*=$,yt>=49?_e+=yt-49+10:yt>=17?_e+=yt-17+10:_e+=yt}return _e}h.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,yt=pt%_e,ct=Math.min(pt,pt-yt)+$,_=0,rt=$;rt<ct;rt+=_e)_=lt(s,rt,rt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(yt!==0){var Ct=1;for(_=lt(s,rt,s.length,b),rt=0;rt<yt;rt++)Ct*=b;this.imuln(Ct),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},h.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},h.prototype.clone=function(){var s=new h(null);return this.copy(s),s},h.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},h.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var nt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],dt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var yt=this.words[pt],ct=((yt<<_e|it)&16777215).toString(16);it=yt>>>24-_e&16777215,_e+=2,_e>=26&&(_e-=26,pt--),it!==0||pt!==this.length-1?$=nt[6-ct.length]+ct+$:$=ct+$}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],rt=dt[s];$="";var Ct=this.clone();for(Ct.negative=0;!Ct.isZero();){var It=Ct.modn(rt).toString(s);Ct=Ct.idivn(rt),Ct.isZero()?$=It+$:$=nt[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},h.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},h.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",yt=new s(it),ct,_,rt=this.clone();if(pt){for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[_]=ct;for(;_<it;_++)yt[_]=0}else{for(_=0;_<it-_e;_++)yt[_]=0;for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[it-_-1]=ct}return yt},Math.clz32?h.prototype._countBits=function(s){return 32-Math.clz32(s)}:h.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},h.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},h.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function mt(at){for(var s=new Array(at.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(at.words[$]&1<<_e)>>>_e}return s}h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},h.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return this.negative!==0},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},h.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},h.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},h.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},h.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},h.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},h.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},h.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},h.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},h.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},h.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},h.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},h.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},h.prototype.notn=function(s){return this.clone().inotn(s)},h.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},h.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},h.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},h.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,yt=0;yt<it.length;yt++)b=(_e.words[yt]|0)-(it.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;for(;pt!==0&&yt<_e.length;yt++)b=(_e.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;if(pt===0&&yt<_e.length&&_e!==this)for(;yt<_e.length;yt++)this.words[yt]=_e.words[yt];return this.length=Math.max(this.length,yt),_e!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(s){return this.clone().isub(s)};function vt(at,s,b){b.negative=s.negative^at.negative;var $=at.length+s.length|0;b.length=$,$=$-1|0;var _e=at.words[0]|0,it=s.words[0]|0,pt=_e*it,yt=pt&67108863,ct=pt/67108864|0;b.words[0]=yt;for(var _=1;_<$;_++){for(var rt=ct>>>26,Ct=ct&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-at.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=at.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Ct,rt+=pt/67108864|0,Ct=pt&67108863}b.words[_]=Ct|0,ct=rt|0}return ct!==0?b.words[_]=ct|0:b.length--,b.strip()}var tt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,yt=0,ct,_,rt,Ct=_e[0]|0,It=Ct&8191,Nt=Ct>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,yn=_e[5]|0,Lr=yn&8191,wr=yn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Bn=_e[7]|0,Br=Bn&8191,Gr=Bn>>>13,Dn=_e[8]|0,Fr=Dn&8191,_i=Dn>>>13,Gn=_e[9]|0,Wt=Gn&8191,Lt=Gn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,hn=it[3]|0,Nr=hn&8191,zr=hn>>>13,kn=it[4]|0,Kr=kn&8191,nn=kn>>>13,Qn=it[5]|0,Zr=Qn&8191,on=Qn>>>13,Zn=it[6]|0,en=Zn&8191,ln=Zn>>>13,eo=it[7]|0,$t=eo&8191,or=eo>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Rn=it[9]|0,Ur=Rn&8191,tn=Rn>>>13;$.negative=s.negative^b.negative,$.length=19,ct=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,rt=Math.imul(Nt,ar);var Un=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,ct=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,rt=Math.imul(Pt,ar),ct=ct+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,rt=rt+Math.imul(Nt,Rr)|0;var Hn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,ct=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,rt=Math.imul(jt,ar),ct=ct+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,rt=rt+Math.imul(Pt,Rr)|0,ct=ct+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,rt=rt+Math.imul(Nt,yr)|0;var so=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(so>>>26)|0,so&=67108863,ct=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,rt=Math.imul(Jt,ar),ct=ct+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,rt=rt+Math.imul(jt,Rr)|0,ct=ct+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,rt=rt+Math.imul(Pt,yr)|0,ct=ct+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,rt=rt+Math.imul(Nt,zr)|0;var uo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(uo>>>26)|0,uo&=67108863,ct=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,rt=Math.imul(Ar,ar),ct=ct+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,rt=rt+Math.imul(Jt,Rr)|0,ct=ct+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,rt=rt+Math.imul(jt,yr)|0,ct=ct+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,rt=rt+Math.imul(Pt,zr)|0,ct=ct+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,rt=rt+Math.imul(Nt,nn)|0;var io=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(io>>>26)|0,io&=67108863,ct=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,rt=Math.imul(wr,ar),ct=ct+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,rt=rt+Math.imul(Ar,Rr)|0,ct=ct+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,rt=rt+Math.imul(Jt,yr)|0,ct=ct+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,rt=rt+Math.imul(jt,zr)|0,ct=ct+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,rt=rt+Math.imul(Pt,nn)|0,ct=ct+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,rt=rt+Math.imul(Nt,on)|0;var mo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,ct=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,rt=Math.imul(Qr,ar),ct=ct+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,rt=rt+Math.imul(wr,Rr)|0,ct=ct+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,rt=rt+Math.imul(Ar,yr)|0,ct=ct+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,rt=rt+Math.imul(Jt,zr)|0,ct=ct+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,rt=rt+Math.imul(jt,nn)|0,ct=ct+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,rt=rt+Math.imul(Pt,on)|0,ct=ct+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,rt=rt+Math.imul(Nt,ln)|0;var ao=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,ct=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,rt=Math.imul(Gr,ar),ct=ct+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,rt=rt+Math.imul(Qr,Rr)|0,ct=ct+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,rt=rt+Math.imul(wr,yr)|0,ct=ct+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,rt=rt+Math.imul(Ar,zr)|0,ct=ct+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,rt=rt+Math.imul(Jt,nn)|0,ct=ct+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,rt=rt+Math.imul(jt,on)|0,ct=ct+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,rt=rt+Math.imul(Pt,ln)|0,ct=ct+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,rt=rt+Math.imul(Nt,or)|0;var go=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,ct=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,rt=Math.imul(_i,ar),ct=ct+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,rt=rt+Math.imul(Gr,Rr)|0,ct=ct+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,rt=rt+Math.imul(Qr,yr)|0,ct=ct+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,rt=rt+Math.imul(wr,zr)|0,ct=ct+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,rt=rt+Math.imul(Ar,nn)|0,ct=ct+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,rt=rt+Math.imul(Jt,on)|0,ct=ct+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,rt=rt+Math.imul(jt,ln)|0,ct=ct+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,rt=rt+Math.imul(Pt,or)|0,ct=ct+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,rt=rt+Math.imul(Nt,Hr)|0;var po=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(po>>>26)|0,po&=67108863,ct=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,rt=Math.imul(Lt,ar),ct=ct+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,rt=rt+Math.imul(_i,Rr)|0,ct=ct+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,rt=rt+Math.imul(Gr,yr)|0,ct=ct+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,rt=rt+Math.imul(Qr,zr)|0,ct=ct+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,rt=rt+Math.imul(wr,nn)|0,ct=ct+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,rt=rt+Math.imul(Ar,on)|0,ct=ct+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,rt=rt+Math.imul(Jt,ln)|0,ct=ct+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,rt=rt+Math.imul(jt,or)|0,ct=ct+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,rt=rt+Math.imul(Pt,Hr)|0,ct=ct+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,rt=rt+Math.imul(Nt,tn)|0;var yo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(yo>>>26)|0,yo&=67108863,ct=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,rt=Math.imul(Lt,Rr),ct=ct+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,rt=rt+Math.imul(_i,yr)|0,ct=ct+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,rt=rt+Math.imul(Gr,zr)|0,ct=ct+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,rt=rt+Math.imul(Qr,nn)|0,ct=ct+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,rt=rt+Math.imul(wr,on)|0,ct=ct+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,rt=rt+Math.imul(Ar,ln)|0,ct=ct+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,rt=rt+Math.imul(Jt,or)|0,ct=ct+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,rt=rt+Math.imul(jt,Hr)|0,ct=ct+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,rt=rt+Math.imul(Pt,tn)|0;var wo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(wo>>>26)|0,wo&=67108863,ct=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,rt=Math.imul(Lt,yr),ct=ct+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,rt=rt+Math.imul(_i,zr)|0,ct=ct+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,rt=rt+Math.imul(Gr,nn)|0,ct=ct+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,rt=rt+Math.imul(Qr,on)|0,ct=ct+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,rt=rt+Math.imul(wr,ln)|0,ct=ct+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,rt=rt+Math.imul(Ar,or)|0,ct=ct+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,rt=rt+Math.imul(Jt,Hr)|0,ct=ct+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,rt=rt+Math.imul(jt,tn)|0;var ur=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,ct=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,rt=Math.imul(Lt,zr),ct=ct+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,rt=rt+Math.imul(_i,nn)|0,ct=ct+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,rt=rt+Math.imul(Gr,on)|0,ct=ct+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,rt=rt+Math.imul(Qr,ln)|0,ct=ct+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,rt=rt+Math.imul(wr,or)|0,ct=ct+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,rt=rt+Math.imul(Ar,Hr)|0,ct=ct+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,rt=rt+Math.imul(Jt,tn)|0;var Cr=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ct=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,rt=Math.imul(Lt,nn),ct=ct+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,rt=rt+Math.imul(_i,on)|0,ct=ct+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,rt=rt+Math.imul(Gr,ln)|0,ct=ct+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,rt=rt+Math.imul(Qr,or)|0,ct=ct+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,rt=rt+Math.imul(wr,Hr)|0,ct=ct+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,rt=rt+Math.imul(Ar,tn)|0;var $r=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,ct=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,rt=Math.imul(Lt,on),ct=ct+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,rt=rt+Math.imul(_i,ln)|0,ct=ct+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,rt=rt+Math.imul(Gr,or)|0,ct=ct+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,rt=rt+Math.imul(Qr,Hr)|0,ct=ct+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,rt=rt+Math.imul(wr,tn)|0;var dn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,ct=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,rt=Math.imul(Lt,ln),ct=ct+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,rt=rt+Math.imul(_i,or)|0,ct=ct+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,rt=rt+Math.imul(Gr,Hr)|0,ct=ct+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,rt=rt+Math.imul(Qr,tn)|0;var rn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,ct=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,rt=Math.imul(Lt,or),ct=ct+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,rt=rt+Math.imul(_i,Hr)|0,ct=ct+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,rt=rt+Math.imul(Gr,tn)|0;var An=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(An>>>26)|0,An&=67108863,ct=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,rt=Math.imul(Lt,Hr),ct=ct+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,rt=rt+Math.imul(_i,tn)|0;var Pn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,ct=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,rt=Math.imul(Lt,tn);var Tn=(yt+ct|0)+((_&8191)<<13)|0;return yt=(rt+(_>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,pt[0]=Un,pt[1]=Hn,pt[2]=so,pt[3]=uo,pt[4]=io,pt[5]=mo,pt[6]=ao,pt[7]=go,pt[8]=po,pt[9]=yo,pt[10]=wo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=An,pt[17]=Pn,pt[18]=Tn,yt!==0&&(pt[19]=yt,$.length++),$};Math.imul||(tt=vt);function bt(at,s,b){b.negative=s.negative^at.negative,b.length=at.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var yt=$&67108863,ct=Math.min(it,s.length-1),_=Math.max(0,it-at.length+1);_<=ct;_++){var rt=it-_,Ct=at.words[rt]|0,It=s.words[_]|0,Nt=Ct*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+yt|0,yt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=yt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(at,s,b){var $=new St;return $.mulp(at,s,b)}h.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=tt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function St(at,s){this.x=at,this.y=s}St.prototype.makeRBT=function(s){for(var b=new Array(s),$=h.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},St.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},St.prototype.permute=function(s,b,$,_e,it,pt){for(var yt=0;yt<pt;yt++)_e[yt]=b[s[yt]],it[yt]=$[s[yt]]},St.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var yt=1;yt<it;yt<<=1)for(var ct=yt<<1,_=Math.cos(2*Math.PI/ct),rt=Math.sin(2*Math.PI/ct),Ct=0;Ct<it;Ct+=ct)for(var It=_,Nt=rt,Ut=0;Ut<yt;Ut++){var Gt=$[Ct+Ut],Pt=_e[Ct+Ut],qt=$[Ct+Ut+yt],Kt=_e[Ct+Ut+yt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Ct+Ut]=Gt+qt,_e[Ct+Ut]=Pt+Kt,$[Ct+Ut+yt]=Gt-qt,_e[Ct+Ut+yt]=Pt-Kt,Ut!==ct&&(jt=_*It-rt*Nt,Nt=_*Nt+rt*It,It=jt)}},St.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},St.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},St.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},St.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},St.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},St.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),yt=new Array(_e),ct=new Array(_e),_=new Array(_e),rt=new Array(_e),Ct=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,yt,_e),this.convert13b(b.words,b.length,rt,_e),this.transform(yt,pt,ct,_,_e,it),this.transform(rt,pt,Ct,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=ct[Ut]*Ct[Ut]-_[Ut]*It[Ut];_[Ut]=ct[Ut]*It[Ut]+_[Ut]*Ct[Ut],ct[Ut]=Gt}return this.conjugate(ct,_,_e),this.transform(ct,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},h.prototype.mul=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},h.prototype.mulf=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},h.prototype.imul=function(s){return this.clone().mulTo(s,this)},h.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},h.prototype.muln=function(s){return this.clone().imuln(s)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(s){var b=mt(s);if(b.length===0)return new h(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},h.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var yt=this.words[it]&_e,ct=(this.words[it]|0)-yt<<b;this.words[it]=ct|pt,pt=yt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},h.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},h.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),yt=67108863^67108863>>>it<<it,ct=$;if(_e-=pt,_e=Math.max(0,_e),ct){for(var _=0;_<pt;_++)ct.words[_]=this.words[_];ct.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var rt=0;for(_=this.length-1;_>=0&&(rt!==0||_>=_e);_--){var Ct=this.words[_]|0;this.words[_]=rt<<26-it|Ct>>>it,rt=Ct&yt}return ct&&rt!==0&&(ct.words[ct.length++]=rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},h.prototype.shln=function(s){return this.clone().ishln(s)},h.prototype.ushln=function(s){return this.clone().iushln(s)},h.prototype.shrn=function(s){return this.clone().ishrn(s)},h.prototype.ushrn=function(s){return this.clone().iushrn(s)},h.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},h.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},h.prototype.maskn=function(s){return this.clone().imaskn(s)},h.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},h.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},h.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},h.prototype.addn=function(s){return this.clone().iaddn(s)},h.prototype.subn=function(s){return this.clone().isubn(s)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,yt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+yt;var ct=(s.words[it]|0)*b;pt-=ct&67108863,yt=(pt>>26)-(ct/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+yt,yt=pt>>26,this.words[it+$]=pt&67108863;if(yt===0)return this.strip();for(c(yt===-1),yt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+yt,yt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},h.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,yt=this._countBits(pt);$=26-yt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var ct=_e.length-it.length,_;if(b!=="mod"){_=new h(null),_.length=ct+1,_.words=new Array(_.length);for(var rt=0;rt<_.length;rt++)_.words[rt]=0}var Ct=_e.clone()._ishlnsubmul(it,1,ct);Ct.negative===0&&(_e=Ct,_&&(_.words[ct]=1));for(var It=ct-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},h.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new h(0),mod:new h(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new h(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new h(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new h(this.modn(s.words[0]))}:this._wordDiv(s,b)},h.prototype.div=function(s){return this.divmod(s,"div",!1).div},h.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},h.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},h.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},h.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},h.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},h.prototype.divn=function(s){return this.clone().idivn(s)},h.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=new h(0),yt=new h(1),ct=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++ct;for(var _=$.clone(),rt=b.clone();!b.isZero();){for(var Ct=0,It=1;!(b.words[0]&It)&&Ct<26;++Ct,It<<=1);if(Ct>0)for(b.iushrn(Ct);Ct-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(rt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||yt.isOdd())&&(pt.iadd(_),yt.isub(rt)),pt.iushrn(1),yt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(yt)):($.isub(b),pt.isub(_e),yt.isub(it))}return{a:pt,b:yt,gcd:$.iushln(ct)}},h.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var yt=0,ct=1;!(b.words[0]&ct)&&yt<26;++yt,ct<<=1);if(yt>0)for(b.iushrn(yt);yt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,rt=1;!($.words[0]&rt)&&_<26;++_,rt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Ct;return b.cmpn(1)===0?Ct=_e:Ct=it,Ct.cmpn(0)<0&&Ct.iadd(s),Ct},h.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},h.prototype.invm=function(s){return this.egcd(s).a.umod(s)},h.prototype.isEven=function(){return(this.words[0]&1)===0},h.prototype.isOdd=function(){return(this.words[0]&1)===1},h.prototype.andln=function(s){return this.words[0]&s},h.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var yt=this.words[pt]|0;yt+=it,it=yt>>>26,yt&=67108863,this.words[pt]=yt}return it!==0&&(this.words[pt]=it,this.length++),this},h.prototype.isZero=function(){return this.length===1&&this.words[0]===0},h.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},h.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},h.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},h.prototype.gtn=function(s){return this.cmpn(s)===1},h.prototype.gt=function(s){return this.cmp(s)===1},h.prototype.gten=function(s){return this.cmpn(s)>=0},h.prototype.gte=function(s){return this.cmp(s)>=0},h.prototype.ltn=function(s){return this.cmpn(s)===-1},h.prototype.lt=function(s){return this.cmp(s)===-1},h.prototype.lten=function(s){return this.cmpn(s)<=0},h.prototype.lte=function(s){return this.cmp(s)<=0},h.prototype.eqn=function(s){return this.cmpn(s)===0},h.prototype.eq=function(s){return this.cmp(s)===0},h.red=function(s){return new Et(s)},h.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},h.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(s){return this.red=s,this},h.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},h.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},h.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},h.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},h.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},h.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},h.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},h.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},h.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Tt(at,s){this.name=at,this.p=new h(s,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Tt.prototype._tmp=function(){var s=new h(null);return s.words=new Array(Math.ceil(this.n/13)),s},Tt.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Tt.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Tt.prototype.imulK=function(s){return s.imul(this.k)};function ft(){Tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(ft,Tt),ft.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var yt=s.words[it]|0;s.words[it-10]=(yt&$)<<4|pt>>>22,pt=yt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},ft.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function _t(){Tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(_t,Tt);function Rt(){Tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Tt);function Mt(){Tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Tt),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},h._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new ft;else if(s==="p224")b=new _t;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function Et(at){if(typeof at=="string"){var s=h._prime(at);this.m=s.p,this.prime=s}else c(at.gtn(1),"modulus must be greater than 1"),this.m=at,this.prime=null}Et.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},Et.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},Et.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},Et.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},Et.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},Et.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},Et.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},Et.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},Et.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},Et.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},Et.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},Et.prototype.isqr=function(s){return this.imul(s,s.clone())},Et.prototype.sqr=function(s){return this.mul(s,s)},Et.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new h(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new h(1).toRed(this),yt=pt.redNeg(),ct=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new h(2*_*_).toRed(this);this.pow(_,ct).cmp(yt)!==0;)_.redIAdd(yt);for(var rt=this.pow(_,_e),Ct=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(rt,new h(1).iushln(Nt-Gt-1));Ct=Ct.redMul(Pt),rt=Pt.redSqr(),It=It.redMul(rt),Nt=Gt}return Ct},Et.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},Et.prototype.pow=function(s,b){if(b.isZero())return new h(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new h(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],yt=0,ct=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var rt=b.words[it],Ct=_-1;Ct>=0;Ct--){var It=rt>>Ct&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&yt===0){ct=0;continue}yt<<=1,yt|=It,ct++,!(ct!==$&&(it!==0||Ct!==0))&&(pt=this.mul(pt,_e[yt]),ct=0,yt=0)}_=26}return pt},Et.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},Et.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},h.mont=function(s){return new kt(s)};function kt(at){Et.call(this,at),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,Et),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new h(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn$6)),bn$6.exports}var bn$5={exports:{}};bn$5.exports;var hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,function(o){(function(e,a){function c(at,s){if(!at)throw new Error(s||"Assertion failed")}function j(at,s){at.super_=s;var b=function(){};b.prototype=s.prototype,at.prototype=new b,at.prototype.constructor=at}function h(at,s,b){if(h.isBN(at))return at;this.negative=0,this.words=null,this.length=0,this.red=null,at!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(at||0,s||10,b||"be"))}typeof e=="object"?e.exports=h:a.BN=h,h.BN=h,h.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}h.isBN=function(s){return s instanceof h?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===h.wordSize&&Array.isArray(s.words)},h.max=function(s,b){return s.cmp(b)>0?s:b},h.min=function(s,b){return s.cmp(b)<0?s:b},h.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},h.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},h.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,yt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);return this.strip()};function ot(at,s){var b=at.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(at,s,b){var $=ot(at,b);return b-1>=s&&($|=ot(at,b-1)<<4),$}h.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,yt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8;else{var ct=s.length-b;for(_e=ct%2===0?b+1:b;_e<s.length;_e+=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8}this.strip()};function lt(at,s,b,$){for(var _e=0,it=Math.min(at.length,b),pt=s;pt<it;pt++){var yt=at.charCodeAt(pt)-48;_e*=$,yt>=49?_e+=yt-49+10:yt>=17?_e+=yt-17+10:_e+=yt}return _e}h.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,yt=pt%_e,ct=Math.min(pt,pt-yt)+$,_=0,rt=$;rt<ct;rt+=_e)_=lt(s,rt,rt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(yt!==0){var Ct=1;for(_=lt(s,rt,s.length,b),rt=0;rt<yt;rt++)Ct*=b;this.imuln(Ct),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},h.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},h.prototype.clone=function(){var s=new h(null);return this.copy(s),s},h.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},h.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var nt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],dt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var yt=this.words[pt],ct=((yt<<_e|it)&16777215).toString(16);it=yt>>>24-_e&16777215,_e+=2,_e>=26&&(_e-=26,pt--),it!==0||pt!==this.length-1?$=nt[6-ct.length]+ct+$:$=ct+$}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],rt=dt[s];$="";var Ct=this.clone();for(Ct.negative=0;!Ct.isZero();){var It=Ct.modn(rt).toString(s);Ct=Ct.idivn(rt),Ct.isZero()?$=It+$:$=nt[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},h.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},h.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",yt=new s(it),ct,_,rt=this.clone();if(pt){for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[_]=ct;for(;_<it;_++)yt[_]=0}else{for(_=0;_<it-_e;_++)yt[_]=0;for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[it-_-1]=ct}return yt},Math.clz32?h.prototype._countBits=function(s){return 32-Math.clz32(s)}:h.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},h.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},h.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function mt(at){for(var s=new Array(at.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(at.words[$]&1<<_e)>>>_e}return s}h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},h.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return this.negative!==0},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},h.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},h.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},h.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},h.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},h.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},h.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},h.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},h.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},h.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},h.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},h.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},h.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},h.prototype.notn=function(s){return this.clone().inotn(s)},h.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},h.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},h.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},h.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,yt=0;yt<it.length;yt++)b=(_e.words[yt]|0)-(it.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;for(;pt!==0&&yt<_e.length;yt++)b=(_e.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;if(pt===0&&yt<_e.length&&_e!==this)for(;yt<_e.length;yt++)this.words[yt]=_e.words[yt];return this.length=Math.max(this.length,yt),_e!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(s){return this.clone().isub(s)};function vt(at,s,b){b.negative=s.negative^at.negative;var $=at.length+s.length|0;b.length=$,$=$-1|0;var _e=at.words[0]|0,it=s.words[0]|0,pt=_e*it,yt=pt&67108863,ct=pt/67108864|0;b.words[0]=yt;for(var _=1;_<$;_++){for(var rt=ct>>>26,Ct=ct&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-at.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=at.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Ct,rt+=pt/67108864|0,Ct=pt&67108863}b.words[_]=Ct|0,ct=rt|0}return ct!==0?b.words[_]=ct|0:b.length--,b.strip()}var tt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,yt=0,ct,_,rt,Ct=_e[0]|0,It=Ct&8191,Nt=Ct>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,yn=_e[5]|0,Lr=yn&8191,wr=yn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Bn=_e[7]|0,Br=Bn&8191,Gr=Bn>>>13,Dn=_e[8]|0,Fr=Dn&8191,_i=Dn>>>13,Gn=_e[9]|0,Wt=Gn&8191,Lt=Gn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,hn=it[3]|0,Nr=hn&8191,zr=hn>>>13,kn=it[4]|0,Kr=kn&8191,nn=kn>>>13,Qn=it[5]|0,Zr=Qn&8191,on=Qn>>>13,Zn=it[6]|0,en=Zn&8191,ln=Zn>>>13,eo=it[7]|0,$t=eo&8191,or=eo>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Rn=it[9]|0,Ur=Rn&8191,tn=Rn>>>13;$.negative=s.negative^b.negative,$.length=19,ct=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,rt=Math.imul(Nt,ar);var Un=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,ct=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,rt=Math.imul(Pt,ar),ct=ct+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,rt=rt+Math.imul(Nt,Rr)|0;var Hn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,ct=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,rt=Math.imul(jt,ar),ct=ct+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,rt=rt+Math.imul(Pt,Rr)|0,ct=ct+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,rt=rt+Math.imul(Nt,yr)|0;var so=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(so>>>26)|0,so&=67108863,ct=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,rt=Math.imul(Jt,ar),ct=ct+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,rt=rt+Math.imul(jt,Rr)|0,ct=ct+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,rt=rt+Math.imul(Pt,yr)|0,ct=ct+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,rt=rt+Math.imul(Nt,zr)|0;var uo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(uo>>>26)|0,uo&=67108863,ct=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,rt=Math.imul(Ar,ar),ct=ct+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,rt=rt+Math.imul(Jt,Rr)|0,ct=ct+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,rt=rt+Math.imul(jt,yr)|0,ct=ct+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,rt=rt+Math.imul(Pt,zr)|0,ct=ct+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,rt=rt+Math.imul(Nt,nn)|0;var io=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(io>>>26)|0,io&=67108863,ct=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,rt=Math.imul(wr,ar),ct=ct+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,rt=rt+Math.imul(Ar,Rr)|0,ct=ct+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,rt=rt+Math.imul(Jt,yr)|0,ct=ct+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,rt=rt+Math.imul(jt,zr)|0,ct=ct+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,rt=rt+Math.imul(Pt,nn)|0,ct=ct+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,rt=rt+Math.imul(Nt,on)|0;var mo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,ct=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,rt=Math.imul(Qr,ar),ct=ct+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,rt=rt+Math.imul(wr,Rr)|0,ct=ct+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,rt=rt+Math.imul(Ar,yr)|0,ct=ct+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,rt=rt+Math.imul(Jt,zr)|0,ct=ct+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,rt=rt+Math.imul(jt,nn)|0,ct=ct+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,rt=rt+Math.imul(Pt,on)|0,ct=ct+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,rt=rt+Math.imul(Nt,ln)|0;var ao=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,ct=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,rt=Math.imul(Gr,ar),ct=ct+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,rt=rt+Math.imul(Qr,Rr)|0,ct=ct+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,rt=rt+Math.imul(wr,yr)|0,ct=ct+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,rt=rt+Math.imul(Ar,zr)|0,ct=ct+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,rt=rt+Math.imul(Jt,nn)|0,ct=ct+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,rt=rt+Math.imul(jt,on)|0,ct=ct+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,rt=rt+Math.imul(Pt,ln)|0,ct=ct+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,rt=rt+Math.imul(Nt,or)|0;var go=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,ct=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,rt=Math.imul(_i,ar),ct=ct+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,rt=rt+Math.imul(Gr,Rr)|0,ct=ct+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,rt=rt+Math.imul(Qr,yr)|0,ct=ct+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,rt=rt+Math.imul(wr,zr)|0,ct=ct+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,rt=rt+Math.imul(Ar,nn)|0,ct=ct+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,rt=rt+Math.imul(Jt,on)|0,ct=ct+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,rt=rt+Math.imul(jt,ln)|0,ct=ct+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,rt=rt+Math.imul(Pt,or)|0,ct=ct+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,rt=rt+Math.imul(Nt,Hr)|0;var po=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(po>>>26)|0,po&=67108863,ct=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,rt=Math.imul(Lt,ar),ct=ct+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,rt=rt+Math.imul(_i,Rr)|0,ct=ct+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,rt=rt+Math.imul(Gr,yr)|0,ct=ct+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,rt=rt+Math.imul(Qr,zr)|0,ct=ct+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,rt=rt+Math.imul(wr,nn)|0,ct=ct+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,rt=rt+Math.imul(Ar,on)|0,ct=ct+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,rt=rt+Math.imul(Jt,ln)|0,ct=ct+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,rt=rt+Math.imul(jt,or)|0,ct=ct+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,rt=rt+Math.imul(Pt,Hr)|0,ct=ct+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,rt=rt+Math.imul(Nt,tn)|0;var yo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(yo>>>26)|0,yo&=67108863,ct=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,rt=Math.imul(Lt,Rr),ct=ct+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,rt=rt+Math.imul(_i,yr)|0,ct=ct+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,rt=rt+Math.imul(Gr,zr)|0,ct=ct+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,rt=rt+Math.imul(Qr,nn)|0,ct=ct+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,rt=rt+Math.imul(wr,on)|0,ct=ct+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,rt=rt+Math.imul(Ar,ln)|0,ct=ct+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,rt=rt+Math.imul(Jt,or)|0,ct=ct+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,rt=rt+Math.imul(jt,Hr)|0,ct=ct+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,rt=rt+Math.imul(Pt,tn)|0;var wo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(wo>>>26)|0,wo&=67108863,ct=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,rt=Math.imul(Lt,yr),ct=ct+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,rt=rt+Math.imul(_i,zr)|0,ct=ct+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,rt=rt+Math.imul(Gr,nn)|0,ct=ct+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,rt=rt+Math.imul(Qr,on)|0,ct=ct+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,rt=rt+Math.imul(wr,ln)|0,ct=ct+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,rt=rt+Math.imul(Ar,or)|0,ct=ct+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,rt=rt+Math.imul(Jt,Hr)|0,ct=ct+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,rt=rt+Math.imul(jt,tn)|0;var ur=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,ct=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,rt=Math.imul(Lt,zr),ct=ct+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,rt=rt+Math.imul(_i,nn)|0,ct=ct+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,rt=rt+Math.imul(Gr,on)|0,ct=ct+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,rt=rt+Math.imul(Qr,ln)|0,ct=ct+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,rt=rt+Math.imul(wr,or)|0,ct=ct+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,rt=rt+Math.imul(Ar,Hr)|0,ct=ct+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,rt=rt+Math.imul(Jt,tn)|0;var Cr=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ct=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,rt=Math.imul(Lt,nn),ct=ct+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,rt=rt+Math.imul(_i,on)|0,ct=ct+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,rt=rt+Math.imul(Gr,ln)|0,ct=ct+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,rt=rt+Math.imul(Qr,or)|0,ct=ct+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,rt=rt+Math.imul(wr,Hr)|0,ct=ct+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,rt=rt+Math.imul(Ar,tn)|0;var $r=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,ct=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,rt=Math.imul(Lt,on),ct=ct+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,rt=rt+Math.imul(_i,ln)|0,ct=ct+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,rt=rt+Math.imul(Gr,or)|0,ct=ct+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,rt=rt+Math.imul(Qr,Hr)|0,ct=ct+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,rt=rt+Math.imul(wr,tn)|0;var dn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,ct=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,rt=Math.imul(Lt,ln),ct=ct+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,rt=rt+Math.imul(_i,or)|0,ct=ct+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,rt=rt+Math.imul(Gr,Hr)|0,ct=ct+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,rt=rt+Math.imul(Qr,tn)|0;var rn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,ct=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,rt=Math.imul(Lt,or),ct=ct+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,rt=rt+Math.imul(_i,Hr)|0,ct=ct+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,rt=rt+Math.imul(Gr,tn)|0;var An=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(An>>>26)|0,An&=67108863,ct=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,rt=Math.imul(Lt,Hr),ct=ct+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,rt=rt+Math.imul(_i,tn)|0;var Pn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,ct=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,rt=Math.imul(Lt,tn);var Tn=(yt+ct|0)+((_&8191)<<13)|0;return yt=(rt+(_>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,pt[0]=Un,pt[1]=Hn,pt[2]=so,pt[3]=uo,pt[4]=io,pt[5]=mo,pt[6]=ao,pt[7]=go,pt[8]=po,pt[9]=yo,pt[10]=wo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=An,pt[17]=Pn,pt[18]=Tn,yt!==0&&(pt[19]=yt,$.length++),$};Math.imul||(tt=vt);function bt(at,s,b){b.negative=s.negative^at.negative,b.length=at.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var yt=$&67108863,ct=Math.min(it,s.length-1),_=Math.max(0,it-at.length+1);_<=ct;_++){var rt=it-_,Ct=at.words[rt]|0,It=s.words[_]|0,Nt=Ct*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+yt|0,yt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=yt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(at,s,b){var $=new St;return $.mulp(at,s,b)}h.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=tt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function St(at,s){this.x=at,this.y=s}St.prototype.makeRBT=function(s){for(var b=new Array(s),$=h.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},St.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},St.prototype.permute=function(s,b,$,_e,it,pt){for(var yt=0;yt<pt;yt++)_e[yt]=b[s[yt]],it[yt]=$[s[yt]]},St.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var yt=1;yt<it;yt<<=1)for(var ct=yt<<1,_=Math.cos(2*Math.PI/ct),rt=Math.sin(2*Math.PI/ct),Ct=0;Ct<it;Ct+=ct)for(var It=_,Nt=rt,Ut=0;Ut<yt;Ut++){var Gt=$[Ct+Ut],Pt=_e[Ct+Ut],qt=$[Ct+Ut+yt],Kt=_e[Ct+Ut+yt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Ct+Ut]=Gt+qt,_e[Ct+Ut]=Pt+Kt,$[Ct+Ut+yt]=Gt-qt,_e[Ct+Ut+yt]=Pt-Kt,Ut!==ct&&(jt=_*It-rt*Nt,Nt=_*Nt+rt*It,It=jt)}},St.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},St.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},St.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},St.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},St.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},St.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),yt=new Array(_e),ct=new Array(_e),_=new Array(_e),rt=new Array(_e),Ct=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,yt,_e),this.convert13b(b.words,b.length,rt,_e),this.transform(yt,pt,ct,_,_e,it),this.transform(rt,pt,Ct,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=ct[Ut]*Ct[Ut]-_[Ut]*It[Ut];_[Ut]=ct[Ut]*It[Ut]+_[Ut]*Ct[Ut],ct[Ut]=Gt}return this.conjugate(ct,_,_e),this.transform(ct,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},h.prototype.mul=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},h.prototype.mulf=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},h.prototype.imul=function(s){return this.clone().mulTo(s,this)},h.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},h.prototype.muln=function(s){return this.clone().imuln(s)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(s){var b=mt(s);if(b.length===0)return new h(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},h.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var yt=this.words[it]&_e,ct=(this.words[it]|0)-yt<<b;this.words[it]=ct|pt,pt=yt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},h.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},h.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),yt=67108863^67108863>>>it<<it,ct=$;if(_e-=pt,_e=Math.max(0,_e),ct){for(var _=0;_<pt;_++)ct.words[_]=this.words[_];ct.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var rt=0;for(_=this.length-1;_>=0&&(rt!==0||_>=_e);_--){var Ct=this.words[_]|0;this.words[_]=rt<<26-it|Ct>>>it,rt=Ct&yt}return ct&&rt!==0&&(ct.words[ct.length++]=rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},h.prototype.shln=function(s){return this.clone().ishln(s)},h.prototype.ushln=function(s){return this.clone().iushln(s)},h.prototype.shrn=function(s){return this.clone().ishrn(s)},h.prototype.ushrn=function(s){return this.clone().iushrn(s)},h.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},h.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},h.prototype.maskn=function(s){return this.clone().imaskn(s)},h.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},h.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},h.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},h.prototype.addn=function(s){return this.clone().iaddn(s)},h.prototype.subn=function(s){return this.clone().isubn(s)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,yt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+yt;var ct=(s.words[it]|0)*b;pt-=ct&67108863,yt=(pt>>26)-(ct/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+yt,yt=pt>>26,this.words[it+$]=pt&67108863;if(yt===0)return this.strip();for(c(yt===-1),yt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+yt,yt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},h.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,yt=this._countBits(pt);$=26-yt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var ct=_e.length-it.length,_;if(b!=="mod"){_=new h(null),_.length=ct+1,_.words=new Array(_.length);for(var rt=0;rt<_.length;rt++)_.words[rt]=0}var Ct=_e.clone()._ishlnsubmul(it,1,ct);Ct.negative===0&&(_e=Ct,_&&(_.words[ct]=1));for(var It=ct-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},h.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new h(0),mod:new h(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new h(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new h(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new h(this.modn(s.words[0]))}:this._wordDiv(s,b)},h.prototype.div=function(s){return this.divmod(s,"div",!1).div},h.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},h.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},h.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},h.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},h.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},h.prototype.divn=function(s){return this.clone().idivn(s)},h.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=new h(0),yt=new h(1),ct=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++ct;for(var _=$.clone(),rt=b.clone();!b.isZero();){for(var Ct=0,It=1;!(b.words[0]&It)&&Ct<26;++Ct,It<<=1);if(Ct>0)for(b.iushrn(Ct);Ct-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(rt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||yt.isOdd())&&(pt.iadd(_),yt.isub(rt)),pt.iushrn(1),yt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(yt)):($.isub(b),pt.isub(_e),yt.isub(it))}return{a:pt,b:yt,gcd:$.iushln(ct)}},h.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var yt=0,ct=1;!(b.words[0]&ct)&&yt<26;++yt,ct<<=1);if(yt>0)for(b.iushrn(yt);yt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,rt=1;!($.words[0]&rt)&&_<26;++_,rt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Ct;return b.cmpn(1)===0?Ct=_e:Ct=it,Ct.cmpn(0)<0&&Ct.iadd(s),Ct},h.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},h.prototype.invm=function(s){return this.egcd(s).a.umod(s)},h.prototype.isEven=function(){return(this.words[0]&1)===0},h.prototype.isOdd=function(){return(this.words[0]&1)===1},h.prototype.andln=function(s){return this.words[0]&s},h.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var yt=this.words[pt]|0;yt+=it,it=yt>>>26,yt&=67108863,this.words[pt]=yt}return it!==0&&(this.words[pt]=it,this.length++),this},h.prototype.isZero=function(){return this.length===1&&this.words[0]===0},h.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},h.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},h.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},h.prototype.gtn=function(s){return this.cmpn(s)===1},h.prototype.gt=function(s){return this.cmp(s)===1},h.prototype.gten=function(s){return this.cmpn(s)>=0},h.prototype.gte=function(s){return this.cmp(s)>=0},h.prototype.ltn=function(s){return this.cmpn(s)===-1},h.prototype.lt=function(s){return this.cmp(s)===-1},h.prototype.lten=function(s){return this.cmpn(s)<=0},h.prototype.lte=function(s){return this.cmp(s)<=0},h.prototype.eqn=function(s){return this.cmpn(s)===0},h.prototype.eq=function(s){return this.cmp(s)===0},h.red=function(s){return new Et(s)},h.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},h.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(s){return this.red=s,this},h.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},h.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},h.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},h.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},h.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},h.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},h.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},h.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},h.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Tt(at,s){this.name=at,this.p=new h(s,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Tt.prototype._tmp=function(){var s=new h(null);return s.words=new Array(Math.ceil(this.n/13)),s},Tt.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Tt.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Tt.prototype.imulK=function(s){return s.imul(this.k)};function ft(){Tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(ft,Tt),ft.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var yt=s.words[it]|0;s.words[it-10]=(yt&$)<<4|pt>>>22,pt=yt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},ft.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function _t(){Tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(_t,Tt);function Rt(){Tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Tt);function Mt(){Tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Tt),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},h._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new ft;else if(s==="p224")b=new _t;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function Et(at){if(typeof at=="string"){var s=h._prime(at);this.m=s.p,this.prime=s}else c(at.gtn(1),"modulus must be greater than 1"),this.m=at,this.prime=null}Et.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},Et.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},Et.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},Et.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},Et.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},Et.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},Et.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},Et.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},Et.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},Et.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},Et.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},Et.prototype.isqr=function(s){return this.imul(s,s.clone())},Et.prototype.sqr=function(s){return this.mul(s,s)},Et.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new h(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new h(1).toRed(this),yt=pt.redNeg(),ct=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new h(2*_*_).toRed(this);this.pow(_,ct).cmp(yt)!==0;)_.redIAdd(yt);for(var rt=this.pow(_,_e),Ct=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(rt,new h(1).iushln(Nt-Gt-1));Ct=Ct.redMul(Pt),rt=Pt.redSqr(),It=It.redMul(rt),Nt=Gt}return Ct},Et.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},Et.prototype.pow=function(s,b){if(b.isZero())return new h(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new h(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],yt=0,ct=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var rt=b.words[it],Ct=_-1;Ct>=0;Ct--){var It=rt>>Ct&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&yt===0){ct=0;continue}yt<<=1,yt|=It,ct++,!(ct!==$&&(it!==0||Ct!==0))&&(pt=this.mul(pt,_e[yt]),ct=0,yt=0)}_=26}return pt},Et.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},Et.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},h.mont=function(s){return new kt(s)};function kt(at){Et.call(this,at),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,Et),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new h(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn$5)),bn$5.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var o;brorand.exports=function(j){return o||(o=new e(null)),o.generate(j)};function e(c){this.rand=c}if(brorand.exports.Rand=e,e.prototype.generate=function(j){return this._rand(j)},e.prototype._rand=function(j){if(this.rand.getBytes)return this.rand.getBytes(j);for(var h=new Uint8Array(j),et=0;et<h.length;et++)h[et]=this.rand.getByte();return h},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(j){var h=new Uint8Array(j);return self.crypto.getRandomValues(h),h}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(j){var h=new Uint8Array(j);return self.msCrypto.getRandomValues(h),h}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=requireCryptoBrowserify();if(typeof a.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(j){return a.randomBytes(j)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var o=requireBn$5(),e=requireBrorand();function a(c){this.rand=c||new e.Rand}return mr=a,a.create=function(j){return new a(j)},a.prototype._randbelow=function(j){var h=j.bitLength(),et=Math.ceil(h/8);do var ot=new o(this.rand.generate(et));while(ot.cmp(j)>=0);return ot},a.prototype._randrange=function(j,h){var et=h.sub(j);return j.add(this._randbelow(et))},a.prototype.test=function(j,h,et){var ot=j.bitLength(),st=o.mont(j),lt=new o(1).toRed(st);h||(h=Math.max(1,ot/48|0));for(var nt=j.subn(1),gt=0;!nt.testn(gt);gt++);for(var dt=j.shrn(gt),mt=nt.toRed(st),vt=!0;h>0;h--){var tt=this._randrange(new o(2),nt);et&&et(tt);var bt=tt.toRed(st).redPow(dt);if(!(bt.cmp(lt)===0||bt.cmp(mt)===0)){for(var ht=1;ht<gt;ht++){if(bt=bt.redSqr(),bt.cmp(lt)===0)return!1;if(bt.cmp(mt)===0)break}if(ht===gt)return!1}}return vt},a.prototype.getDivisor=function(j,h){var et=j.bitLength(),ot=o.mont(j),st=new o(1).toRed(ot);h||(h=Math.max(1,et/48|0));for(var lt=j.subn(1),nt=0;!lt.testn(nt);nt++);for(var gt=j.shrn(nt),dt=lt.toRed(ot);h>0;h--){var mt=this._randrange(new o(2),lt),vt=j.gcd(mt);if(vt.cmpn(1)!==0)return vt;var tt=mt.toRed(ot).redPow(gt);if(!(tt.cmp(st)===0||tt.cmp(dt)===0)){for(var bt=1;bt<nt;bt++){if(tt=tt.redSqr(),tt.cmp(st)===0)return tt.fromRed().subn(1).gcd(j);if(tt.cmp(dt)===0)break}if(bt===nt)return tt=tt.redSqr(),tt.fromRed().subn(1).gcd(j)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var o=requireBrowser$b();generatePrime=bt,bt.simpleSieve=vt,bt.fermatTest=tt;var e=requireBn$6(),a=new e(24),c=requireMr(),j=new c,h=new e(1),et=new e(2),ot=new e(5);new e(16),new e(8);var st=new e(10),lt=new e(3);new e(7);var nt=new e(11),gt=new e(4);new e(12);var dt=null;function mt(){if(dt!==null)return dt;var ht=1048576,St=[];St[0]=2;for(var At=1,Tt=3;Tt<ht;Tt+=2){for(var ft=Math.ceil(Math.sqrt(Tt)),_t=0;_t<At&&St[_t]<=ft&&Tt%St[_t]!==0;_t++);At!==_t&&St[_t]<=ft||(St[At++]=Tt)}return dt=St,St}function vt(ht){for(var St=mt(),At=0;At<St.length;At++)if(ht.modn(St[At])===0)return ht.cmpn(St[At])===0;return!0}function tt(ht){var St=e.mont(ht);return et.toRed(St).redPow(ht.subn(1)).fromRed().cmpn(1)===0}function bt(ht,St){if(ht<16)return St===2||St===5?new e([140,123]):new e([140,39]);St=new e(St);for(var At,Tt;;){for(At=new e(o(Math.ceil(ht/8)));At.bitLength()>ht;)At.ishrn(1);if(At.isEven()&&At.iadd(h),At.testn(1)||At.iadd(et),St.cmp(et)){if(!St.cmp(ot))for(;At.mod(st).cmp(lt);)At.iadd(gt)}else for(;At.mod(a).cmp(nt);)At.iadd(gt);if(Tt=At.shrn(1),vt(Tt)&&vt(At)&&tt(Tt)&&tt(At)&&j.test(Tt)&&j.test(At))return At}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var o=requireBn$6(),e=requireMr(),a=new e,c=new o(24),j=new o(11),h=new o(10),et=new o(3),ot=new o(7),st=requireGeneratePrime(),lt=requireBrowser$b();dh=vt;function nt(bt,ht){return ht=ht||"utf8",Buffer.isBuffer(bt)||(bt=new Buffer(bt,ht)),this._pub=new o(bt),this}function gt(bt,ht){return ht=ht||"utf8",Buffer.isBuffer(bt)||(bt=new Buffer(bt,ht)),this._priv=new o(bt),this}var dt={};function mt(bt,ht){var St=ht.toString("hex"),At=[St,bt.toString(16)].join("_");if(At in dt)return dt[At];var Tt=0;if(bt.isEven()||!st.simpleSieve||!st.fermatTest(bt)||!a.test(bt))return Tt+=1,St==="02"||St==="05"?Tt+=8:Tt+=4,dt[At]=Tt,Tt;a.test(bt.shrn(1))||(Tt+=2);var ft;switch(St){case"02":bt.mod(c).cmp(j)&&(Tt+=8);break;case"05":ft=bt.mod(h),ft.cmp(et)&&ft.cmp(ot)&&(Tt+=8);break;default:Tt+=4}return dt[At]=Tt,Tt}function vt(bt,ht,St){this.setGenerator(ht),this.__prime=new o(bt),this._prime=o.mont(this.__prime),this._primeLen=bt.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,St?(this.setPublicKey=nt,this.setPrivateKey=gt):this._primeCode=8}Object.defineProperty(vt.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=mt(this.__prime,this.__gen)),this._primeCode}}),vt.prototype.generateKeys=function(){return this._priv||(this._priv=new o(lt(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},vt.prototype.computeSecret=function(bt){bt=new o(bt),bt=bt.toRed(this._prime);var ht=bt.redPow(this._priv).fromRed(),St=new Buffer(ht.toArray()),At=this.getPrime();if(St.length<At.length){var Tt=new Buffer(At.length-St.length);Tt.fill(0),St=Buffer.concat([Tt,St])}return St},vt.prototype.getPublicKey=function(ht){return tt(this._pub,ht)},vt.prototype.getPrivateKey=function(ht){return tt(this._priv,ht)},vt.prototype.getPrime=function(bt){return tt(this.__prime,bt)},vt.prototype.getGenerator=function(bt){return tt(this._gen,bt)},vt.prototype.setGenerator=function(bt,ht){return ht=ht||"utf8",Buffer.isBuffer(bt)||(bt=new Buffer(bt,ht)),this.__gen=bt,this._gen=new o(bt),this};function tt(bt,ht){var St=new Buffer(bt.toArray());return ht?St.toString(ht):St}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$6;hasRequiredBrowser$4=1;var o=requireGeneratePrime(),e=require$$1$1,a=requireDh();function c(et){var ot=new Buffer(e[et].prime,"hex"),st=new Buffer(e[et].gen,"hex");return new a(ot,st)}var j={binary:!0,hex:!0,base64:!0};function h(et,ot,st,lt){return Buffer.isBuffer(ot)||j[ot]===void 0?h(et,"binary",ot,st):(ot=ot||"binary",lt=lt||"binary",st=st||new Buffer([2]),Buffer.isBuffer(st)||(st=new Buffer(st,lt)),typeof et=="number"?new a(o(et,st),st,!0):(Buffer.isBuffer(et)||(et=new Buffer(et,ot)),new a(et,st,!0)))}return browser$6.DiffieHellmanGroup=browser$6.createDiffieHellmanGroup=browser$6.getDiffieHellman=c,browser$6.createDiffieHellman=browser$6.DiffieHellman=h,browser$6}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:o}:processNextickArgs.exports=process$1;function o(e,a,c,j){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var h=arguments.length,et,ot;switch(h){case 0:case 1:return process$1.nextTick(e);case 2:return process$1.nextTick(function(){e.call(null,a)});case 3:return process$1.nextTick(function(){e.call(null,a,c)});case 4:return process$1.nextTick(function(){e.call(null,a,c,j)});default:for(et=new Array(h-1),ot=0;ot<et.length;)et[ot++]=arguments[ot];return process$1.nextTick(function(){e.apply(null,et)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var o={}.toString;return isarray=Array.isArray||function(e){return o.call(e)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=eventsExports.EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(o,e){var a=require$$1$2,c=a.Buffer;function j(et,ot){for(var st in et)ot[st]=et[st]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?o.exports=a:(j(a,e),e.Buffer=h);function h(et,ot,st){return c(et,ot,st)}j(c,h),h.from=function(et,ot,st){if(typeof et=="number")throw new TypeError("Argument must not be a number");return c(et,ot,st)},h.alloc=function(et,ot,st){if(typeof et!="number")throw new TypeError("Argument must be a number");var lt=c(et);return ot!==void 0?typeof st=="string"?lt.fill(ot,st):lt.fill(ot):lt.fill(0),lt},h.allocUnsafe=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return c(et)},h.allocUnsafeSlow=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(et)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util$7={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$7;hasRequiredUtil=1;function o(tt){return Array.isArray?Array.isArray(tt):vt(tt)==="[object Array]"}util$7.isArray=o;function e(tt){return typeof tt=="boolean"}util$7.isBoolean=e;function a(tt){return tt===null}util$7.isNull=a;function c(tt){return tt==null}util$7.isNullOrUndefined=c;function j(tt){return typeof tt=="number"}util$7.isNumber=j;function h(tt){return typeof tt=="string"}util$7.isString=h;function et(tt){return typeof tt=="symbol"}util$7.isSymbol=et;function ot(tt){return tt===void 0}util$7.isUndefined=ot;function st(tt){return vt(tt)==="[object RegExp]"}util$7.isRegExp=st;function lt(tt){return typeof tt=="object"&&tt!==null}util$7.isObject=lt;function nt(tt){return vt(tt)==="[object Date]"}util$7.isDate=nt;function gt(tt){return vt(tt)==="[object Error]"||tt instanceof Error}util$7.isError=gt;function dt(tt){return typeof tt=="function"}util$7.isFunction=dt;function mt(tt){return tt===null||typeof tt=="boolean"||typeof tt=="number"||typeof tt=="string"||typeof tt=="symbol"||typeof tt>"u"}util$7.isPrimitive=mt,util$7.isBuffer=require$$1$2.Buffer.isBuffer;function vt(tt){return Object.prototype.toString.call(tt)}return util$7}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(o){function e(h,et){if(!(h instanceof et))throw new TypeError("Cannot call a class as a function")}var a=requireSafeBuffer().Buffer,c=util$8;function j(h,et,ot){h.copy(et,ot)}o.exports=function(){function h(){e(this,h),this.head=null,this.tail=null,this.length=0}return h.prototype.push=function(ot){var st={data:ot,next:null};this.length>0?this.tail.next=st:this.head=st,this.tail=st,++this.length},h.prototype.unshift=function(ot){var st={data:ot,next:this.head};this.length===0&&(this.tail=st),this.head=st,++this.length},h.prototype.shift=function(){if(this.length!==0){var ot=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,ot}},h.prototype.clear=function(){this.head=this.tail=null,this.length=0},h.prototype.join=function(ot){if(this.length===0)return"";for(var st=this.head,lt=""+st.data;st=st.next;)lt+=ot+st.data;return lt},h.prototype.concat=function(ot){if(this.length===0)return a.alloc(0);for(var st=a.allocUnsafe(ot>>>0),lt=this.head,nt=0;lt;)j(lt.data,st,nt),nt+=lt.data.length,lt=lt.next;return st},h}(),c&&c.inspect&&c.inspect.custom&&(o.exports.prototype[c.inspect.custom]=function(){var h=c.inspect({length:this.length});return this.constructor.name+" "+h})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var o=requireProcessNextickArgs();function e(j,h){var et=this,ot=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return ot||st?(h?h(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(c,this,j)):o.nextTick(c,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(lt){!h&&lt?et._writableState?et._writableState.errorEmitted||(et._writableState.errorEmitted=!0,o.nextTick(c,et,lt)):o.nextTick(c,et,lt):h&&h(lt)}),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function c(j,h){j.emit("error",h)}return destroy_1={destroy:e,undestroy:a},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var o=requireProcessNextickArgs();_stream_writable=tt;function e(pt){var yt=this;this.next=null,this.entry=null,this.finish=function(){it(yt,pt)}}var a=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:o.nextTick,c;tt.WritableState=mt;var j=Object.create(requireUtil());j.inherits=requireInherits_browser();var h={deprecate:requireBrowser$a()},et=requireStreamBrowser(),ot=requireSafeBuffer().Buffer,st=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function lt(pt){return ot.from(pt)}function nt(pt){return ot.isBuffer(pt)||pt instanceof st}var gt=requireDestroy();j.inherits(tt,et);function dt(){}function mt(pt,yt){c=c||require_stream_duplex(),pt=pt||{};var ct=yt instanceof c;this.objectMode=!!pt.objectMode,ct&&(this.objectMode=this.objectMode||!!pt.writableObjectMode);var _=pt.highWaterMark,rt=pt.writableHighWaterMark,Ct=this.objectMode?16:16*1024;_||_===0?this.highWaterMark=_:ct&&(rt||rt===0)?this.highWaterMark=rt:this.highWaterMark=Ct,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var It=pt.decodeStrings===!1;this.decodeStrings=!It,this.defaultEncoding=pt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Nt){Rt(yt,Nt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}mt.prototype.getBuffer=function(){for(var yt=this.bufferedRequest,ct=[];yt;)ct.push(yt),yt=yt.next;return ct},function(){try{Object.defineProperty(mt.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var vt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(vt=Function.prototype[Symbol.hasInstance],Object.defineProperty(tt,Symbol.hasInstance,{value:function(pt){return vt.call(this,pt)?!0:this!==tt?!1:pt&&pt._writableState instanceof mt}})):vt=function(pt){return pt instanceof this};function tt(pt){if(c=c||require_stream_duplex(),!vt.call(tt,this)&&!(this instanceof c))return new tt(pt);this._writableState=new mt(pt,this),this.writable=!0,pt&&(typeof pt.write=="function"&&(this._write=pt.write),typeof pt.writev=="function"&&(this._writev=pt.writev),typeof pt.destroy=="function"&&(this._destroy=pt.destroy),typeof pt.final=="function"&&(this._final=pt.final)),et.call(this)}tt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function bt(pt,yt){var ct=new Error("write after end");pt.emit("error",ct),o.nextTick(yt,ct)}function ht(pt,yt,ct,_){var rt=!0,Ct=!1;return ct===null?Ct=new TypeError("May not write null values to stream"):typeof ct!="string"&&ct!==void 0&&!yt.objectMode&&(Ct=new TypeError("Invalid non-string/buffer chunk")),Ct&&(pt.emit("error",Ct),o.nextTick(_,Ct),rt=!1),rt}tt.prototype.write=function(pt,yt,ct){var _=this._writableState,rt=!1,Ct=!_.objectMode&&nt(pt);return Ct&&!ot.isBuffer(pt)&&(pt=lt(pt)),typeof yt=="function"&&(ct=yt,yt=null),Ct?yt="buffer":yt||(yt=_.defaultEncoding),typeof ct!="function"&&(ct=dt),_.ended?bt(this,ct):(Ct||ht(this,_,pt,ct))&&(_.pendingcb++,rt=At(this,_,Ct,pt,yt,ct)),rt},tt.prototype.cork=function(){var pt=this._writableState;pt.corked++},tt.prototype.uncork=function(){var pt=this._writableState;pt.corked&&(pt.corked--,!pt.writing&&!pt.corked&&!pt.bufferProcessing&&pt.bufferedRequest&&kt(this,pt))},tt.prototype.setDefaultEncoding=function(yt){if(typeof yt=="string"&&(yt=yt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((yt+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+yt);return this._writableState.defaultEncoding=yt,this};function St(pt,yt,ct){return!pt.objectMode&&pt.decodeStrings!==!1&&typeof yt=="string"&&(yt=ot.from(yt,ct)),yt}Object.defineProperty(tt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function At(pt,yt,ct,_,rt,Ct){if(!ct){var It=St(yt,_,rt);_!==It&&(ct=!0,rt="buffer",_=It)}var Nt=yt.objectMode?1:_.length;yt.length+=Nt;var Ut=yt.length<yt.highWaterMark;if(Ut||(yt.needDrain=!0),yt.writing||yt.corked){var Gt=yt.lastBufferedRequest;yt.lastBufferedRequest={chunk:_,encoding:rt,isBuf:ct,callback:Ct,next:null},Gt?Gt.next=yt.lastBufferedRequest:yt.bufferedRequest=yt.lastBufferedRequest,yt.bufferedRequestCount+=1}else Tt(pt,yt,!1,Nt,_,rt,Ct);return Ut}function Tt(pt,yt,ct,_,rt,Ct,It){yt.writelen=_,yt.writecb=It,yt.writing=!0,yt.sync=!0,ct?pt._writev(rt,yt.onwrite):pt._write(rt,Ct,yt.onwrite),yt.sync=!1}function ft(pt,yt,ct,_,rt){--yt.pendingcb,ct?(o.nextTick(rt,_),o.nextTick($,pt,yt),pt._writableState.errorEmitted=!0,pt.emit("error",_)):(rt(_),pt._writableState.errorEmitted=!0,pt.emit("error",_),$(pt,yt))}function _t(pt){pt.writing=!1,pt.writecb=null,pt.length-=pt.writelen,pt.writelen=0}function Rt(pt,yt){var ct=pt._writableState,_=ct.sync,rt=ct.writecb;if(_t(ct),yt)ft(pt,ct,_,yt,rt);else{var Ct=at(ct);!Ct&&!ct.corked&&!ct.bufferProcessing&&ct.bufferedRequest&&kt(pt,ct),_?a(Mt,pt,ct,Ct,rt):Mt(pt,ct,Ct,rt)}}function Mt(pt,yt,ct,_){ct||Et(pt,yt),yt.pendingcb--,_(),$(pt,yt)}function Et(pt,yt){yt.length===0&&yt.needDrain&&(yt.needDrain=!1,pt.emit("drain"))}function kt(pt,yt){yt.bufferProcessing=!0;var ct=yt.bufferedRequest;if(pt._writev&&ct&&ct.next){var _=yt.bufferedRequestCount,rt=new Array(_),Ct=yt.corkedRequestsFree;Ct.entry=ct;for(var It=0,Nt=!0;ct;)rt[It]=ct,ct.isBuf||(Nt=!1),ct=ct.next,It+=1;rt.allBuffers=Nt,Tt(pt,yt,!0,yt.length,rt,"",Ct.finish),yt.pendingcb++,yt.lastBufferedRequest=null,Ct.next?(yt.corkedRequestsFree=Ct.next,Ct.next=null):yt.corkedRequestsFree=new e(yt),yt.bufferedRequestCount=0}else{for(;ct;){var Ut=ct.chunk,Gt=ct.encoding,Pt=ct.callback,qt=yt.objectMode?1:Ut.length;if(Tt(pt,yt,!1,qt,Ut,Gt,Pt),ct=ct.next,yt.bufferedRequestCount--,yt.writing)break}ct===null&&(yt.lastBufferedRequest=null)}yt.bufferedRequest=ct,yt.bufferProcessing=!1}tt.prototype._write=function(pt,yt,ct){ct(new Error("_write() is not implemented"))},tt.prototype._writev=null,tt.prototype.end=function(pt,yt,ct){var _=this._writableState;typeof pt=="function"?(ct=pt,pt=null,yt=null):typeof yt=="function"&&(ct=yt,yt=null),pt!=null&&this.write(pt,yt),_.corked&&(_.corked=1,this.uncork()),_.ending||_e(this,_,ct)};function at(pt){return pt.ending&&pt.length===0&&pt.bufferedRequest===null&&!pt.finished&&!pt.writing}function s(pt,yt){pt._final(function(ct){yt.pendingcb--,ct&&pt.emit("error",ct),yt.prefinished=!0,pt.emit("prefinish"),$(pt,yt)})}function b(pt,yt){!yt.prefinished&&!yt.finalCalled&&(typeof pt._final=="function"?(yt.pendingcb++,yt.finalCalled=!0,o.nextTick(s,pt,yt)):(yt.prefinished=!0,pt.emit("prefinish")))}function $(pt,yt){var ct=at(yt);return ct&&(b(pt,yt),yt.pendingcb===0&&(yt.finished=!0,pt.emit("finish"))),ct}function _e(pt,yt,ct){yt.ending=!0,$(pt,yt),ct&&(yt.finished?o.nextTick(ct):pt.once("finish",ct)),yt.ended=!0,pt.writable=!1}function it(pt,yt,ct){var _=pt.entry;for(pt.entry=null;_;){var rt=_.callback;yt.pendingcb--,rt(ct),_=_.next}yt.corkedRequestsFree.next=pt}return Object.defineProperty(tt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(pt){this._writableState&&(this._writableState.destroyed=pt)}}),tt.prototype.destroy=gt.destroy,tt.prototype._undestroy=gt.undestroy,tt.prototype._destroy=function(pt,yt){this.end(),yt(pt)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var o=requireProcessNextickArgs(),e=Object.keys||function(gt){var dt=[];for(var mt in gt)dt.push(mt);return dt};_stream_duplex=st;var a=Object.create(requireUtil());a.inherits=requireInherits_browser();var c=require_stream_readable(),j=require_stream_writable();a.inherits(st,c);for(var h=e(j.prototype),et=0;et<h.length;et++){var ot=h[et];st.prototype[ot]||(st.prototype[ot]=j.prototype[ot])}function st(gt){if(!(this instanceof st))return new st(gt);c.call(this,gt),j.call(this,gt),gt&&gt.readable===!1&&(this.readable=!1),gt&&gt.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,gt&&gt.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",lt)}Object.defineProperty(st.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function lt(){this.allowHalfOpen||this._writableState.ended||o.nextTick(nt,this)}function nt(gt){gt.end()}return Object.defineProperty(st.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(gt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=gt,this._writableState.destroyed=gt)}}),st.prototype._destroy=function(gt,dt){this.push(null),this.end(),o.nextTick(dt,gt)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var o=requireProcessNextickArgs();_stream_readable=St;var e=requireIsarray(),a;St.ReadableState=ht,eventsExports.EventEmitter;var c=function(Pt,qt){return Pt.listeners(qt).length},j=requireStreamBrowser(),h=requireSafeBuffer().Buffer,et=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function ot(Pt){return h.from(Pt)}function st(Pt){return h.isBuffer(Pt)||Pt instanceof et}var lt=Object.create(requireUtil());lt.inherits=requireInherits_browser();var nt=util$8,gt=void 0;nt&&nt.debuglog?gt=nt.debuglog("stream"):gt=function(){};var dt=requireBufferList(),mt=requireDestroy(),vt;lt.inherits(St,j);var tt=["error","close","destroy","pause","resume"];function bt(Pt,qt,Kt){if(typeof Pt.prependListener=="function")return Pt.prependListener(qt,Kt);!Pt._events||!Pt._events[qt]?Pt.on(qt,Kt):e(Pt._events[qt])?Pt._events[qt].unshift(Kt):Pt._events[qt]=[Kt,Pt._events[qt]]}function ht(Pt,qt){a=a||require_stream_duplex(),Pt=Pt||{};var Kt=qt instanceof a;this.objectMode=!!Pt.objectMode,Kt&&(this.objectMode=this.objectMode||!!Pt.readableObjectMode);var jt=Pt.highWaterMark,Ht=Pt.readableHighWaterMark,Bt=this.objectMode?16:16*1024;jt||jt===0?this.highWaterMark=jt:Kt&&(Ht||Ht===0)?this.highWaterMark=Ht:this.highWaterMark=Bt,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new dt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pt.encoding&&(vt||(vt=requireString_decoder().StringDecoder),this.decoder=new vt(Pt.encoding),this.encoding=Pt.encoding)}function St(Pt){if(a=a||require_stream_duplex(),!(this instanceof St))return new St(Pt);this._readableState=new ht(Pt,this),this.readable=!0,Pt&&(typeof Pt.read=="function"&&(this._read=Pt.read),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy)),j.call(this)}Object.defineProperty(St.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Pt){this._readableState&&(this._readableState.destroyed=Pt)}}),St.prototype.destroy=mt.destroy,St.prototype._undestroy=mt.undestroy,St.prototype._destroy=function(Pt,qt){this.push(null),qt(Pt)},St.prototype.push=function(Pt,qt){var Kt=this._readableState,jt;return Kt.objectMode?jt=!0:typeof Pt=="string"&&(qt=qt||Kt.defaultEncoding,qt!==Kt.encoding&&(Pt=h.from(Pt,qt),qt=""),jt=!0),At(this,Pt,qt,!1,jt)},St.prototype.unshift=function(Pt){return At(this,Pt,null,!0,!1)};function At(Pt,qt,Kt,jt,Ht){var Bt=Pt._readableState;if(qt===null)Bt.reading=!1,kt(Pt,Bt);else{var Jt;Ht||(Jt=ft(Bt,qt)),Jt?Pt.emit("error",Jt):Bt.objectMode||qt&&qt.length>0?(typeof qt!="string"&&!Bt.objectMode&&Object.getPrototypeOf(qt)!==h.prototype&&(qt=ot(qt)),jt?Bt.endEmitted?Pt.emit("error",new Error("stream.unshift() after end event")):Tt(Pt,Bt,qt,!0):Bt.ended?Pt.emit("error",new Error("stream.push() after EOF")):(Bt.reading=!1,Bt.decoder&&!Kt?(qt=Bt.decoder.write(qt),Bt.objectMode||qt.length!==0?Tt(Pt,Bt,qt,!1):b(Pt,Bt)):Tt(Pt,Bt,qt,!1))):jt||(Bt.reading=!1)}return _t(Bt)}function Tt(Pt,qt,Kt,jt){qt.flowing&&qt.length===0&&!qt.sync?(Pt.emit("data",Kt),Pt.read(0)):(qt.length+=qt.objectMode?1:Kt.length,jt?qt.buffer.unshift(Kt):qt.buffer.push(Kt),qt.needReadable&&at(Pt)),b(Pt,qt)}function ft(Pt,qt){var Kt;return!st(qt)&&typeof qt!="string"&&qt!==void 0&&!Pt.objectMode&&(Kt=new TypeError("Invalid non-string/buffer chunk")),Kt}function _t(Pt){return!Pt.ended&&(Pt.needReadable||Pt.length<Pt.highWaterMark||Pt.length===0)}St.prototype.isPaused=function(){return this._readableState.flowing===!1},St.prototype.setEncoding=function(Pt){return vt||(vt=requireString_decoder().StringDecoder),this._readableState.decoder=new vt(Pt),this._readableState.encoding=Pt,this};var Rt=8388608;function Mt(Pt){return Pt>=Rt?Pt=Rt:(Pt--,Pt|=Pt>>>1,Pt|=Pt>>>2,Pt|=Pt>>>4,Pt|=Pt>>>8,Pt|=Pt>>>16,Pt++),Pt}function Et(Pt,qt){return Pt<=0||qt.length===0&&qt.ended?0:qt.objectMode?1:Pt!==Pt?qt.flowing&&qt.length?qt.buffer.head.data.length:qt.length:(Pt>qt.highWaterMark&&(qt.highWaterMark=Mt(Pt)),Pt<=qt.length?Pt:qt.ended?qt.length:(qt.needReadable=!0,0))}St.prototype.read=function(Pt){gt("read",Pt),Pt=parseInt(Pt,10);var qt=this._readableState,Kt=Pt;if(Pt!==0&&(qt.emittedReadable=!1),Pt===0&&qt.needReadable&&(qt.length>=qt.highWaterMark||qt.ended))return gt("read: emitReadable",qt.length,qt.ended),qt.length===0&&qt.ended?Nt(this):at(this),null;if(Pt=Et(Pt,qt),Pt===0&&qt.ended)return qt.length===0&&Nt(this),null;var jt=qt.needReadable;gt("need readable",jt),(qt.length===0||qt.length-Pt<qt.highWaterMark)&&(jt=!0,gt("length less than watermark",jt)),qt.ended||qt.reading?(jt=!1,gt("reading or ended",jt)):jt&&(gt("do read"),qt.reading=!0,qt.sync=!0,qt.length===0&&(qt.needReadable=!0),this._read(qt.highWaterMark),qt.sync=!1,qt.reading||(Pt=Et(Kt,qt)));var Ht;return Pt>0?Ht=_(Pt,qt):Ht=null,Ht===null?(qt.needReadable=!0,Pt=0):qt.length-=Pt,qt.length===0&&(qt.ended||(qt.needReadable=!0),Kt!==Pt&&qt.ended&&Nt(this)),Ht!==null&&this.emit("data",Ht),Ht};function kt(Pt,qt){if(!qt.ended){if(qt.decoder){var Kt=qt.decoder.end();Kt&&Kt.length&&(qt.buffer.push(Kt),qt.length+=qt.objectMode?1:Kt.length)}qt.ended=!0,at(Pt)}}function at(Pt){var qt=Pt._readableState;qt.needReadable=!1,qt.emittedReadable||(gt("emitReadable",qt.flowing),qt.emittedReadable=!0,qt.sync?o.nextTick(s,Pt):s(Pt))}function s(Pt){gt("emit readable"),Pt.emit("readable"),ct(Pt)}function b(Pt,qt){qt.readingMore||(qt.readingMore=!0,o.nextTick($,Pt,qt))}function $(Pt,qt){for(var Kt=qt.length;!qt.reading&&!qt.flowing&&!qt.ended&&qt.length<qt.highWaterMark&&(gt("maybeReadMore read 0"),Pt.read(0),Kt!==qt.length);)Kt=qt.length;qt.readingMore=!1}St.prototype._read=function(Pt){this.emit("error",new Error("_read() is not implemented"))},St.prototype.pipe=function(Pt,qt){var Kt=this,jt=this._readableState;switch(jt.pipesCount){case 0:jt.pipes=Pt;break;case 1:jt.pipes=[jt.pipes,Pt];break;default:jt.pipes.push(Pt);break}jt.pipesCount+=1,gt("pipe count=%d opts=%j",jt.pipesCount,qt);var Ht=(!qt||qt.end!==!1)&&Pt!==process$1.stdout&&Pt!==process$1.stderr,Bt=Ht?sr:Bn;jt.endEmitted?o.nextTick(Bt):Kt.once("end",Bt),Pt.on("unpipe",Jt);function Jt(Br,Gr){gt("onunpipe"),Br===Kt&&Gr&&Gr.hasUnpiped===!1&&(Gr.hasUnpiped=!0,yn())}function sr(){gt("onend"),Pt.end()}var hr=_e(Kt);Pt.on("drain",hr);var Ar=!1;function yn(){gt("cleanup"),Pt.removeListener("close",Dr),Pt.removeListener("finish",Qr),Pt.removeListener("drain",hr),Pt.removeListener("error",En),Pt.removeListener("unpipe",Jt),Kt.removeListener("end",sr),Kt.removeListener("end",Bn),Kt.removeListener("data",wr),Ar=!0,jt.awaitDrain&&(!Pt._writableState||Pt._writableState.needDrain)&&hr()}var Lr=!1;Kt.on("data",wr);function wr(Br){gt("ondata"),Lr=!1;var Gr=Pt.write(Br);Gr===!1&&!Lr&&((jt.pipesCount===1&&jt.pipes===Pt||jt.pipesCount>1&&Gt(jt.pipes,Pt)!==-1)&&!Ar&&(gt("false write response, pause",jt.awaitDrain),jt.awaitDrain++,Lr=!0),Kt.pause())}function En(Br){gt("onerror",Br),Bn(),Pt.removeListener("error",En),c(Pt,"error")===0&&Pt.emit("error",Br)}bt(Pt,"error",En);function Dr(){Pt.removeListener("finish",Qr),Bn()}Pt.once("close",Dr);function Qr(){gt("onfinish"),Pt.removeListener("close",Dr),Bn()}Pt.once("finish",Qr);function Bn(){gt("unpipe"),Kt.unpipe(Pt)}return Pt.emit("pipe",Kt),jt.flowing||(gt("pipe resume"),Kt.resume()),Pt};function _e(Pt){return function(){var qt=Pt._readableState;gt("pipeOnDrain",qt.awaitDrain),qt.awaitDrain&&qt.awaitDrain--,qt.awaitDrain===0&&c(Pt,"data")&&(qt.flowing=!0,ct(Pt))}}St.prototype.unpipe=function(Pt){var qt=this._readableState,Kt={hasUnpiped:!1};if(qt.pipesCount===0)return this;if(qt.pipesCount===1)return Pt&&Pt!==qt.pipes?this:(Pt||(Pt=qt.pipes),qt.pipes=null,qt.pipesCount=0,qt.flowing=!1,Pt&&Pt.emit("unpipe",this,Kt),this);if(!Pt){var jt=qt.pipes,Ht=qt.pipesCount;qt.pipes=null,qt.pipesCount=0,qt.flowing=!1;for(var Bt=0;Bt<Ht;Bt++)jt[Bt].emit("unpipe",this,{hasUnpiped:!1});return this}var Jt=Gt(qt.pipes,Pt);return Jt===-1?this:(qt.pipes.splice(Jt,1),qt.pipesCount-=1,qt.pipesCount===1&&(qt.pipes=qt.pipes[0]),Pt.emit("unpipe",this,Kt),this)},St.prototype.on=function(Pt,qt){var Kt=j.prototype.on.call(this,Pt,qt);if(Pt==="data")this._readableState.flowing!==!1&&this.resume();else if(Pt==="readable"){var jt=this._readableState;!jt.endEmitted&&!jt.readableListening&&(jt.readableListening=jt.needReadable=!0,jt.emittedReadable=!1,jt.reading?jt.length&&at(this):o.nextTick(it,this))}return Kt},St.prototype.addListener=St.prototype.on;function it(Pt){gt("readable nexttick read 0"),Pt.read(0)}St.prototype.resume=function(){var Pt=this._readableState;return Pt.flowing||(gt("resume"),Pt.flowing=!0,pt(this,Pt)),this};function pt(Pt,qt){qt.resumeScheduled||(qt.resumeScheduled=!0,o.nextTick(yt,Pt,qt))}function yt(Pt,qt){qt.reading||(gt("resume read 0"),Pt.read(0)),qt.resumeScheduled=!1,qt.awaitDrain=0,Pt.emit("resume"),ct(Pt),qt.flowing&&!qt.reading&&Pt.read(0)}St.prototype.pause=function(){return gt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(gt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function ct(Pt){var qt=Pt._readableState;for(gt("flow",qt.flowing);qt.flowing&&Pt.read()!==null;);}St.prototype.wrap=function(Pt){var qt=this,Kt=this._readableState,jt=!1;Pt.on("end",function(){if(gt("wrapped end"),Kt.decoder&&!Kt.ended){var Jt=Kt.decoder.end();Jt&&Jt.length&&qt.push(Jt)}qt.push(null)}),Pt.on("data",function(Jt){if(gt("wrapped data"),Kt.decoder&&(Jt=Kt.decoder.write(Jt)),!(Kt.objectMode&&Jt==null)&&!(!Kt.objectMode&&(!Jt||!Jt.length))){var sr=qt.push(Jt);sr||(jt=!0,Pt.pause())}});for(var Ht in Pt)this[Ht]===void 0&&typeof Pt[Ht]=="function"&&(this[Ht]=function(Jt){return function(){return Pt[Jt].apply(Pt,arguments)}}(Ht));for(var Bt=0;Bt<tt.length;Bt++)Pt.on(tt[Bt],this.emit.bind(this,tt[Bt]));return this._read=function(Jt){gt("wrapped _read",Jt),jt&&(jt=!1,Pt.resume())},this},Object.defineProperty(St.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),St._fromList=_;function _(Pt,qt){if(qt.length===0)return null;var Kt;return qt.objectMode?Kt=qt.buffer.shift():!Pt||Pt>=qt.length?(qt.decoder?Kt=qt.buffer.join(""):qt.buffer.length===1?Kt=qt.buffer.head.data:Kt=qt.buffer.concat(qt.length),qt.buffer.clear()):Kt=rt(Pt,qt.buffer,qt.decoder),Kt}function rt(Pt,qt,Kt){var jt;return Pt<qt.head.data.length?(jt=qt.head.data.slice(0,Pt),qt.head.data=qt.head.data.slice(Pt)):Pt===qt.head.data.length?jt=qt.shift():jt=Kt?Ct(Pt,qt):It(Pt,qt),jt}function Ct(Pt,qt){var Kt=qt.head,jt=1,Ht=Kt.data;for(Pt-=Ht.length;Kt=Kt.next;){var Bt=Kt.data,Jt=Pt>Bt.length?Bt.length:Pt;if(Jt===Bt.length?Ht+=Bt:Ht+=Bt.slice(0,Pt),Pt-=Jt,Pt===0){Jt===Bt.length?(++jt,Kt.next?qt.head=Kt.next:qt.head=qt.tail=null):(qt.head=Kt,Kt.data=Bt.slice(Jt));break}++jt}return qt.length-=jt,Ht}function It(Pt,qt){var Kt=h.allocUnsafe(Pt),jt=qt.head,Ht=1;for(jt.data.copy(Kt),Pt-=jt.data.length;jt=jt.next;){var Bt=jt.data,Jt=Pt>Bt.length?Bt.length:Pt;if(Bt.copy(Kt,Kt.length-Pt,0,Jt),Pt-=Jt,Pt===0){Jt===Bt.length?(++Ht,jt.next?qt.head=jt.next:qt.head=qt.tail=null):(qt.head=jt,jt.data=Bt.slice(Jt));break}++Ht}return qt.length-=Ht,Kt}function Nt(Pt){var qt=Pt._readableState;if(qt.length>0)throw new Error('"endReadable()" called on non-empty stream');qt.endEmitted||(qt.ended=!0,o.nextTick(Ut,qt,Pt))}function Ut(Pt,qt){!Pt.endEmitted&&Pt.length===0&&(Pt.endEmitted=!0,qt.readable=!1,qt.emit("end"))}function Gt(Pt,qt){for(var Kt=0,jt=Pt.length;Kt<jt;Kt++)if(Pt[Kt]===qt)return Kt;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=c;var o=require_stream_duplex(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(c,o);function a(et,ot){var st=this._transformState;st.transforming=!1;var lt=st.writecb;if(!lt)return this.emit("error",new Error("write callback called multiple times"));st.writechunk=null,st.writecb=null,ot!=null&&this.push(ot),lt(et);var nt=this._readableState;nt.reading=!1,(nt.needReadable||nt.length<nt.highWaterMark)&&this._read(nt.highWaterMark)}function c(et){if(!(this instanceof c))return new c(et);o.call(this,et),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,et&&(typeof et.transform=="function"&&(this._transform=et.transform),typeof et.flush=="function"&&(this._flush=et.flush)),this.on("prefinish",j)}function j(){var et=this;typeof this._flush=="function"?this._flush(function(ot,st){h(et,ot,st)}):h(this,null,null)}c.prototype.push=function(et,ot){return this._transformState.needTransform=!1,o.prototype.push.call(this,et,ot)},c.prototype._transform=function(et,ot,st){throw new Error("_transform() is not implemented")},c.prototype._write=function(et,ot,st){var lt=this._transformState;if(lt.writecb=st,lt.writechunk=et,lt.writeencoding=ot,!lt.transforming){var nt=this._readableState;(lt.needTransform||nt.needReadable||nt.length<nt.highWaterMark)&&this._read(nt.highWaterMark)}},c.prototype._read=function(et){var ot=this._transformState;ot.writechunk!==null&&ot.writecb&&!ot.transforming?(ot.transforming=!0,this._transform(ot.writechunk,ot.writeencoding,ot.afterTransform)):ot.needTransform=!0},c.prototype._destroy=function(et,ot){var st=this;o.prototype._destroy.call(this,et,function(lt){ot(lt),st.emit("close")})};function h(et,ot,st){if(ot)return et.emit("error",ot);if(st!=null&&et.push(st),et._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(et._transformState.transforming)throw new Error("Calling transform done when still transforming");return et.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=a;var o=require_stream_transform(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(a,o);function a(c){if(!(this instanceof a))return new a(c);o.call(this,c)}return a.prototype._transform=function(c,j,h){h(null,c)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(o,e){e=o.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign={exports:{}},bn$4={exports:{}};bn$4.exports;var hasRequiredBn$4;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,function(o){(function(e,a){function c(b,$){if(!b)throw new Error($||"Assertion failed")}function j(b,$){b.super_=$;var _e=function(){};_e.prototype=$.prototype,b.prototype=new _e,b.prototype.constructor=b}function h(b,$,_e){if(h.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&(($==="le"||$==="be")&&(_e=$,$=10),this._init(b||0,$||10,_e||"be"))}typeof e=="object"?e.exports=h:a.BN=h,h.BN=h,h.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}h.isBN=function($){return $ instanceof h?!0:$!==null&&typeof $=="object"&&$.constructor.wordSize===h.wordSize&&Array.isArray($.words)},h.max=function($,_e){return $.cmp(_e)>0?$:_e},h.min=function($,_e){return $.cmp(_e)<0?$:_e},h.prototype._init=function($,_e,it){if(typeof $=="number")return this._initNumber($,_e,it);if(typeof $=="object")return this._initArray($,_e,it);_e==="hex"&&(_e=16),c(_e===(_e|0)&&_e>=2&&_e<=36),$=$.toString().replace(/\s+/g,"");var pt=0;$[0]==="-"&&(pt++,this.negative=1),pt<$.length&&(_e===16?this._parseHex($,pt,it):(this._parseBase($,_e,pt),it==="le"&&this._initArray(this.toArray(),_e,it)))},h.prototype._initNumber=function($,_e,it){$<0&&(this.negative=1,$=-$),$<67108864?(this.words=[$&67108863],this.length=1):$<4503599627370496?(this.words=[$&67108863,$/67108864&67108863],this.length=2):(c($<9007199254740992),this.words=[$&67108863,$/67108864&67108863,1],this.length=3),it==="le"&&this._initArray(this.toArray(),_e,it)},h.prototype._initArray=function($,_e,it){if(c(typeof $.length=="number"),$.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil($.length/3),this.words=new Array(this.length);for(var pt=0;pt<this.length;pt++)this.words[pt]=0;var yt,ct,_=0;if(it==="be")for(pt=$.length-1,yt=0;pt>=0;pt-=3)ct=$[pt]|$[pt-1]<<8|$[pt-2]<<16,this.words[yt]|=ct<<_&67108863,this.words[yt+1]=ct>>>26-_&67108863,_+=24,_>=26&&(_-=26,yt++);else if(it==="le")for(pt=0,yt=0;pt<$.length;pt+=3)ct=$[pt]|$[pt+1]<<8|$[pt+2]<<16,this.words[yt]|=ct<<_&67108863,this.words[yt+1]=ct>>>26-_&67108863,_+=24,_>=26&&(_-=26,yt++);return this._strip()};function ot(b,$){var _e=b.charCodeAt($);if(_e>=48&&_e<=57)return _e-48;if(_e>=65&&_e<=70)return _e-55;if(_e>=97&&_e<=102)return _e-87;c(!1,"Invalid character in "+b)}function st(b,$,_e){var it=ot(b,_e);return _e-1>=$&&(it|=ot(b,_e-1)<<4),it}h.prototype._parseHex=function($,_e,it){this.length=Math.ceil(($.length-_e)/6),this.words=new Array(this.length);for(var pt=0;pt<this.length;pt++)this.words[pt]=0;var yt=0,ct=0,_;if(it==="be")for(pt=$.length-1;pt>=_e;pt-=2)_=st($,_e,pt)<<yt,this.words[ct]|=_&67108863,yt>=18?(yt-=18,ct+=1,this.words[ct]|=_>>>26):yt+=8;else{var rt=$.length-_e;for(pt=rt%2===0?_e+1:_e;pt<$.length;pt+=2)_=st($,_e,pt)<<yt,this.words[ct]|=_&67108863,yt>=18?(yt-=18,ct+=1,this.words[ct]|=_>>>26):yt+=8}this._strip()};function lt(b,$,_e,it){for(var pt=0,yt=0,ct=Math.min(b.length,_e),_=$;_<ct;_++){var rt=b.charCodeAt(_)-48;pt*=it,rt>=49?yt=rt-49+10:rt>=17?yt=rt-17+10:yt=rt,c(rt>=0&&yt<it,"Invalid character"),pt+=yt}return pt}h.prototype._parseBase=function($,_e,it){this.words=[0],this.length=1;for(var pt=0,yt=1;yt<=67108863;yt*=_e)pt++;pt--,yt=yt/_e|0;for(var ct=$.length-it,_=ct%pt,rt=Math.min(ct,ct-_)+it,Ct=0,It=it;It<rt;It+=pt)Ct=lt($,It,It+pt,_e),this.imuln(yt),this.words[0]+Ct<67108864?this.words[0]+=Ct:this._iaddn(Ct);if(_!==0){var Nt=1;for(Ct=lt($,It,$.length,_e),It=0;It<_;It++)Nt*=_e;this.imuln(Nt),this.words[0]+Ct<67108864?this.words[0]+=Ct:this._iaddn(Ct)}this._strip()},h.prototype.copy=function($){$.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)$.words[_e]=this.words[_e];$.length=this.length,$.negative=this.negative,$.red=this.red};function nt(b,$){b.words=$.words,b.length=$.length,b.negative=$.negative,b.red=$.red}if(h.prototype._move=function($){nt($,this)},h.prototype.clone=function(){var $=new h(null);return this.copy($),$},h.prototype._expand=function($){for(;this.length<$;)this.words[this.length++]=0;return this},h.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},h.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{h.prototype[Symbol.for("nodejs.util.inspect.custom")]=gt}catch{h.prototype.inspect=gt}else h.prototype.inspect=gt;function gt(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var dt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],mt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],vt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function($,_e){$=$||10,_e=_e|0||1;var it;if($===16||$==="hex"){it="";for(var pt=0,yt=0,ct=0;ct<this.length;ct++){var _=this.words[ct],rt=((_<<pt|yt)&16777215).toString(16);yt=_>>>24-pt&16777215,pt+=2,pt>=26&&(pt-=26,ct--),yt!==0||ct!==this.length-1?it=dt[6-rt.length]+rt+it:it=rt+it}for(yt!==0&&(it=yt.toString(16)+it);it.length%_e!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}if($===($|0)&&$>=2&&$<=36){var Ct=mt[$],It=vt[$];it="";var Nt=this.clone();for(Nt.negative=0;!Nt.isZero();){var Ut=Nt.modrn(It).toString($);Nt=Nt.idivn(It),Nt.isZero()?it=Ut+it:it=dt[Ct-Ut.length]+Ut+it}for(this.isZero()&&(it="0"+it);it.length%_e!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}c(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var $=this.words[0];return this.length===2?$+=this.words[1]*67108864:this.length===3&&this.words[2]===1?$+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-$:$},h.prototype.toJSON=function(){return this.toString(16,2)},et&&(h.prototype.toBuffer=function($,_e){return this.toArrayLike(et,$,_e)}),h.prototype.toArray=function($,_e){return this.toArrayLike(Array,$,_e)};var tt=function($,_e){return $.allocUnsafe?$.allocUnsafe(_e):new $(_e)};h.prototype.toArrayLike=function($,_e,it){this._strip();var pt=this.byteLength(),yt=it||Math.max(1,pt);c(pt<=yt,"byte array longer than desired length"),c(yt>0,"Requested array length <= 0");var ct=tt($,yt),_=_e==="le"?"LE":"BE";return this["_toArrayLike"+_](ct,pt),ct},h.prototype._toArrayLikeLE=function($,_e){for(var it=0,pt=0,yt=0,ct=0;yt<this.length;yt++){var _=this.words[yt]<<ct|pt;$[it++]=_&255,it<$.length&&($[it++]=_>>8&255),it<$.length&&($[it++]=_>>16&255),ct===6?(it<$.length&&($[it++]=_>>24&255),pt=0,ct=0):(pt=_>>>24,ct+=2)}if(it<$.length)for($[it++]=pt;it<$.length;)$[it++]=0},h.prototype._toArrayLikeBE=function($,_e){for(var it=$.length-1,pt=0,yt=0,ct=0;yt<this.length;yt++){var _=this.words[yt]<<ct|pt;$[it--]=_&255,it>=0&&($[it--]=_>>8&255),it>=0&&($[it--]=_>>16&255),ct===6?(it>=0&&($[it--]=_>>24&255),pt=0,ct=0):(pt=_>>>24,ct+=2)}if(it>=0)for($[it--]=pt;it>=0;)$[it--]=0},Math.clz32?h.prototype._countBits=function($){return 32-Math.clz32($)}:h.prototype._countBits=function($){var _e=$,it=0;return _e>=4096&&(it+=13,_e>>>=13),_e>=64&&(it+=7,_e>>>=7),_e>=8&&(it+=4,_e>>>=4),_e>=2&&(it+=2,_e>>>=2),it+_e},h.prototype._zeroBits=function($){if($===0)return 26;var _e=$,it=0;return _e&8191||(it+=13,_e>>>=13),_e&127||(it+=7,_e>>>=7),_e&15||(it+=4,_e>>>=4),_e&3||(it+=2,_e>>>=2),_e&1||it++,it},h.prototype.bitLength=function(){var $=this.words[this.length-1],_e=this._countBits($);return(this.length-1)*26+_e};function bt(b){for(var $=new Array(b.bitLength()),_e=0;_e<$.length;_e++){var it=_e/26|0,pt=_e%26;$[_e]=b.words[it]>>>pt&1}return $}h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var $=0,_e=0;_e<this.length;_e++){var it=this._zeroBits(this.words[_e]);if($+=it,it!==26)break}return $},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function($){return this.negative!==0?this.abs().inotn($).iaddn(1):this.clone()},h.prototype.fromTwos=function($){return this.testn($-1)?this.notn($).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return this.negative!==0},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function($){for(;this.length<$.length;)this.words[this.length++]=0;for(var _e=0;_e<$.length;_e++)this.words[_e]=this.words[_e]|$.words[_e];return this._strip()},h.prototype.ior=function($){return c((this.negative|$.negative)===0),this.iuor($)},h.prototype.or=function($){return this.length>$.length?this.clone().ior($):$.clone().ior(this)},h.prototype.uor=function($){return this.length>$.length?this.clone().iuor($):$.clone().iuor(this)},h.prototype.iuand=function($){var _e;this.length>$.length?_e=$:_e=this;for(var it=0;it<_e.length;it++)this.words[it]=this.words[it]&$.words[it];return this.length=_e.length,this._strip()},h.prototype.iand=function($){return c((this.negative|$.negative)===0),this.iuand($)},h.prototype.and=function($){return this.length>$.length?this.clone().iand($):$.clone().iand(this)},h.prototype.uand=function($){return this.length>$.length?this.clone().iuand($):$.clone().iuand(this)},h.prototype.iuxor=function($){var _e,it;this.length>$.length?(_e=this,it=$):(_e=$,it=this);for(var pt=0;pt<it.length;pt++)this.words[pt]=_e.words[pt]^it.words[pt];if(this!==_e)for(;pt<_e.length;pt++)this.words[pt]=_e.words[pt];return this.length=_e.length,this._strip()},h.prototype.ixor=function($){return c((this.negative|$.negative)===0),this.iuxor($)},h.prototype.xor=function($){return this.length>$.length?this.clone().ixor($):$.clone().ixor(this)},h.prototype.uxor=function($){return this.length>$.length?this.clone().iuxor($):$.clone().iuxor(this)},h.prototype.inotn=function($){c(typeof $=="number"&&$>=0);var _e=Math.ceil($/26)|0,it=$%26;this._expand(_e),it>0&&_e--;for(var pt=0;pt<_e;pt++)this.words[pt]=~this.words[pt]&67108863;return it>0&&(this.words[pt]=~this.words[pt]&67108863>>26-it),this._strip()},h.prototype.notn=function($){return this.clone().inotn($)},h.prototype.setn=function($,_e){c(typeof $=="number"&&$>=0);var it=$/26|0,pt=$%26;return this._expand(it+1),_e?this.words[it]=this.words[it]|1<<pt:this.words[it]=this.words[it]&~(1<<pt),this._strip()},h.prototype.iadd=function($){var _e;if(this.negative!==0&&$.negative===0)return this.negative=0,_e=this.isub($),this.negative^=1,this._normSign();if(this.negative===0&&$.negative!==0)return $.negative=0,_e=this.isub($),$.negative=1,_e._normSign();var it,pt;this.length>$.length?(it=this,pt=$):(it=$,pt=this);for(var yt=0,ct=0;ct<pt.length;ct++)_e=(it.words[ct]|0)+(pt.words[ct]|0)+yt,this.words[ct]=_e&67108863,yt=_e>>>26;for(;yt!==0&&ct<it.length;ct++)_e=(it.words[ct]|0)+yt,this.words[ct]=_e&67108863,yt=_e>>>26;if(this.length=it.length,yt!==0)this.words[this.length]=yt,this.length++;else if(it!==this)for(;ct<it.length;ct++)this.words[ct]=it.words[ct];return this},h.prototype.add=function($){var _e;return $.negative!==0&&this.negative===0?($.negative=0,_e=this.sub($),$.negative^=1,_e):$.negative===0&&this.negative!==0?(this.negative=0,_e=$.sub(this),this.negative=1,_e):this.length>$.length?this.clone().iadd($):$.clone().iadd(this)},h.prototype.isub=function($){if($.negative!==0){$.negative=0;var _e=this.iadd($);return $.negative=1,_e._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd($),this.negative=1,this._normSign();var it=this.cmp($);if(it===0)return this.negative=0,this.length=1,this.words[0]=0,this;var pt,yt;it>0?(pt=this,yt=$):(pt=$,yt=this);for(var ct=0,_=0;_<yt.length;_++)_e=(pt.words[_]|0)-(yt.words[_]|0)+ct,ct=_e>>26,this.words[_]=_e&67108863;for(;ct!==0&&_<pt.length;_++)_e=(pt.words[_]|0)+ct,ct=_e>>26,this.words[_]=_e&67108863;if(ct===0&&_<pt.length&&pt!==this)for(;_<pt.length;_++)this.words[_]=pt.words[_];return this.length=Math.max(this.length,_),pt!==this&&(this.negative=1),this._strip()},h.prototype.sub=function($){return this.clone().isub($)};function ht(b,$,_e){_e.negative=$.negative^b.negative;var it=b.length+$.length|0;_e.length=it,it=it-1|0;var pt=b.words[0]|0,yt=$.words[0]|0,ct=pt*yt,_=ct&67108863,rt=ct/67108864|0;_e.words[0]=_;for(var Ct=1;Ct<it;Ct++){for(var It=rt>>>26,Nt=rt&67108863,Ut=Math.min(Ct,$.length-1),Gt=Math.max(0,Ct-b.length+1);Gt<=Ut;Gt++){var Pt=Ct-Gt|0;pt=b.words[Pt]|0,yt=$.words[Gt]|0,ct=pt*yt+Nt,It+=ct/67108864|0,Nt=ct&67108863}_e.words[Ct]=Nt|0,rt=It|0}return rt!==0?_e.words[Ct]=rt|0:_e.length--,_e._strip()}var St=function($,_e,it){var pt=$.words,yt=_e.words,ct=it.words,_=0,rt,Ct,It,Nt=pt[0]|0,Ut=Nt&8191,Gt=Nt>>>13,Pt=pt[1]|0,qt=Pt&8191,Kt=Pt>>>13,jt=pt[2]|0,Ht=jt&8191,Bt=jt>>>13,Jt=pt[3]|0,sr=Jt&8191,hr=Jt>>>13,Ar=pt[4]|0,yn=Ar&8191,Lr=Ar>>>13,wr=pt[5]|0,En=wr&8191,Dr=wr>>>13,Qr=pt[6]|0,Bn=Qr&8191,Br=Qr>>>13,Gr=pt[7]|0,Dn=Gr&8191,Fr=Gr>>>13,_i=pt[8]|0,Gn=_i&8191,Wt=_i>>>13,Lt=pt[9]|0,zt=Lt&8191,Zt=Lt>>>13,ar=yt[0]|0,Or=ar&8191,vr=ar>>>13,Rr=yt[1]|0,fr=Rr&8191,tr=Rr>>>13,yr=yt[2]|0,hn=yr&8191,Nr=yr>>>13,zr=yt[3]|0,kn=zr&8191,Kr=zr>>>13,nn=yt[4]|0,Qn=nn&8191,Zr=nn>>>13,on=yt[5]|0,Zn=on&8191,en=on>>>13,ln=yt[6]|0,eo=ln&8191,$t=ln>>>13,or=yt[7]|0,Yr=or&8191,Vr=or>>>13,Hr=yt[8]|0,Rn=Hr&8191,Ur=Hr>>>13,tn=yt[9]|0,Un=tn&8191,Hn=tn>>>13;it.negative=$.negative^_e.negative,it.length=19,rt=Math.imul(Ut,Or),Ct=Math.imul(Ut,vr),Ct=Ct+Math.imul(Gt,Or)|0,It=Math.imul(Gt,vr);var so=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(so>>>26)|0,so&=67108863,rt=Math.imul(qt,Or),Ct=Math.imul(qt,vr),Ct=Ct+Math.imul(Kt,Or)|0,It=Math.imul(Kt,vr),rt=rt+Math.imul(Ut,fr)|0,Ct=Ct+Math.imul(Ut,tr)|0,Ct=Ct+Math.imul(Gt,fr)|0,It=It+Math.imul(Gt,tr)|0;var uo=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(uo>>>26)|0,uo&=67108863,rt=Math.imul(Ht,Or),Ct=Math.imul(Ht,vr),Ct=Ct+Math.imul(Bt,Or)|0,It=Math.imul(Bt,vr),rt=rt+Math.imul(qt,fr)|0,Ct=Ct+Math.imul(qt,tr)|0,Ct=Ct+Math.imul(Kt,fr)|0,It=It+Math.imul(Kt,tr)|0,rt=rt+Math.imul(Ut,hn)|0,Ct=Ct+Math.imul(Ut,Nr)|0,Ct=Ct+Math.imul(Gt,hn)|0,It=It+Math.imul(Gt,Nr)|0;var io=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(io>>>26)|0,io&=67108863,rt=Math.imul(sr,Or),Ct=Math.imul(sr,vr),Ct=Ct+Math.imul(hr,Or)|0,It=Math.imul(hr,vr),rt=rt+Math.imul(Ht,fr)|0,Ct=Ct+Math.imul(Ht,tr)|0,Ct=Ct+Math.imul(Bt,fr)|0,It=It+Math.imul(Bt,tr)|0,rt=rt+Math.imul(qt,hn)|0,Ct=Ct+Math.imul(qt,Nr)|0,Ct=Ct+Math.imul(Kt,hn)|0,It=It+Math.imul(Kt,Nr)|0,rt=rt+Math.imul(Ut,kn)|0,Ct=Ct+Math.imul(Ut,Kr)|0,Ct=Ct+Math.imul(Gt,kn)|0,It=It+Math.imul(Gt,Kr)|0;var mo=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(mo>>>26)|0,mo&=67108863,rt=Math.imul(yn,Or),Ct=Math.imul(yn,vr),Ct=Ct+Math.imul(Lr,Or)|0,It=Math.imul(Lr,vr),rt=rt+Math.imul(sr,fr)|0,Ct=Ct+Math.imul(sr,tr)|0,Ct=Ct+Math.imul(hr,fr)|0,It=It+Math.imul(hr,tr)|0,rt=rt+Math.imul(Ht,hn)|0,Ct=Ct+Math.imul(Ht,Nr)|0,Ct=Ct+Math.imul(Bt,hn)|0,It=It+Math.imul(Bt,Nr)|0,rt=rt+Math.imul(qt,kn)|0,Ct=Ct+Math.imul(qt,Kr)|0,Ct=Ct+Math.imul(Kt,kn)|0,It=It+Math.imul(Kt,Kr)|0,rt=rt+Math.imul(Ut,Qn)|0,Ct=Ct+Math.imul(Ut,Zr)|0,Ct=Ct+Math.imul(Gt,Qn)|0,It=It+Math.imul(Gt,Zr)|0;var ao=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(ao>>>26)|0,ao&=67108863,rt=Math.imul(En,Or),Ct=Math.imul(En,vr),Ct=Ct+Math.imul(Dr,Or)|0,It=Math.imul(Dr,vr),rt=rt+Math.imul(yn,fr)|0,Ct=Ct+Math.imul(yn,tr)|0,Ct=Ct+Math.imul(Lr,fr)|0,It=It+Math.imul(Lr,tr)|0,rt=rt+Math.imul(sr,hn)|0,Ct=Ct+Math.imul(sr,Nr)|0,Ct=Ct+Math.imul(hr,hn)|0,It=It+Math.imul(hr,Nr)|0,rt=rt+Math.imul(Ht,kn)|0,Ct=Ct+Math.imul(Ht,Kr)|0,Ct=Ct+Math.imul(Bt,kn)|0,It=It+Math.imul(Bt,Kr)|0,rt=rt+Math.imul(qt,Qn)|0,Ct=Ct+Math.imul(qt,Zr)|0,Ct=Ct+Math.imul(Kt,Qn)|0,It=It+Math.imul(Kt,Zr)|0,rt=rt+Math.imul(Ut,Zn)|0,Ct=Ct+Math.imul(Ut,en)|0,Ct=Ct+Math.imul(Gt,Zn)|0,It=It+Math.imul(Gt,en)|0;var go=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(go>>>26)|0,go&=67108863,rt=Math.imul(Bn,Or),Ct=Math.imul(Bn,vr),Ct=Ct+Math.imul(Br,Or)|0,It=Math.imul(Br,vr),rt=rt+Math.imul(En,fr)|0,Ct=Ct+Math.imul(En,tr)|0,Ct=Ct+Math.imul(Dr,fr)|0,It=It+Math.imul(Dr,tr)|0,rt=rt+Math.imul(yn,hn)|0,Ct=Ct+Math.imul(yn,Nr)|0,Ct=Ct+Math.imul(Lr,hn)|0,It=It+Math.imul(Lr,Nr)|0,rt=rt+Math.imul(sr,kn)|0,Ct=Ct+Math.imul(sr,Kr)|0,Ct=Ct+Math.imul(hr,kn)|0,It=It+Math.imul(hr,Kr)|0,rt=rt+Math.imul(Ht,Qn)|0,Ct=Ct+Math.imul(Ht,Zr)|0,Ct=Ct+Math.imul(Bt,Qn)|0,It=It+Math.imul(Bt,Zr)|0,rt=rt+Math.imul(qt,Zn)|0,Ct=Ct+Math.imul(qt,en)|0,Ct=Ct+Math.imul(Kt,Zn)|0,It=It+Math.imul(Kt,en)|0,rt=rt+Math.imul(Ut,eo)|0,Ct=Ct+Math.imul(Ut,$t)|0,Ct=Ct+Math.imul(Gt,eo)|0,It=It+Math.imul(Gt,$t)|0;var po=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(po>>>26)|0,po&=67108863,rt=Math.imul(Dn,Or),Ct=Math.imul(Dn,vr),Ct=Ct+Math.imul(Fr,Or)|0,It=Math.imul(Fr,vr),rt=rt+Math.imul(Bn,fr)|0,Ct=Ct+Math.imul(Bn,tr)|0,Ct=Ct+Math.imul(Br,fr)|0,It=It+Math.imul(Br,tr)|0,rt=rt+Math.imul(En,hn)|0,Ct=Ct+Math.imul(En,Nr)|0,Ct=Ct+Math.imul(Dr,hn)|0,It=It+Math.imul(Dr,Nr)|0,rt=rt+Math.imul(yn,kn)|0,Ct=Ct+Math.imul(yn,Kr)|0,Ct=Ct+Math.imul(Lr,kn)|0,It=It+Math.imul(Lr,Kr)|0,rt=rt+Math.imul(sr,Qn)|0,Ct=Ct+Math.imul(sr,Zr)|0,Ct=Ct+Math.imul(hr,Qn)|0,It=It+Math.imul(hr,Zr)|0,rt=rt+Math.imul(Ht,Zn)|0,Ct=Ct+Math.imul(Ht,en)|0,Ct=Ct+Math.imul(Bt,Zn)|0,It=It+Math.imul(Bt,en)|0,rt=rt+Math.imul(qt,eo)|0,Ct=Ct+Math.imul(qt,$t)|0,Ct=Ct+Math.imul(Kt,eo)|0,It=It+Math.imul(Kt,$t)|0,rt=rt+Math.imul(Ut,Yr)|0,Ct=Ct+Math.imul(Ut,Vr)|0,Ct=Ct+Math.imul(Gt,Yr)|0,It=It+Math.imul(Gt,Vr)|0;var yo=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(yo>>>26)|0,yo&=67108863,rt=Math.imul(Gn,Or),Ct=Math.imul(Gn,vr),Ct=Ct+Math.imul(Wt,Or)|0,It=Math.imul(Wt,vr),rt=rt+Math.imul(Dn,fr)|0,Ct=Ct+Math.imul(Dn,tr)|0,Ct=Ct+Math.imul(Fr,fr)|0,It=It+Math.imul(Fr,tr)|0,rt=rt+Math.imul(Bn,hn)|0,Ct=Ct+Math.imul(Bn,Nr)|0,Ct=Ct+Math.imul(Br,hn)|0,It=It+Math.imul(Br,Nr)|0,rt=rt+Math.imul(En,kn)|0,Ct=Ct+Math.imul(En,Kr)|0,Ct=Ct+Math.imul(Dr,kn)|0,It=It+Math.imul(Dr,Kr)|0,rt=rt+Math.imul(yn,Qn)|0,Ct=Ct+Math.imul(yn,Zr)|0,Ct=Ct+Math.imul(Lr,Qn)|0,It=It+Math.imul(Lr,Zr)|0,rt=rt+Math.imul(sr,Zn)|0,Ct=Ct+Math.imul(sr,en)|0,Ct=Ct+Math.imul(hr,Zn)|0,It=It+Math.imul(hr,en)|0,rt=rt+Math.imul(Ht,eo)|0,Ct=Ct+Math.imul(Ht,$t)|0,Ct=Ct+Math.imul(Bt,eo)|0,It=It+Math.imul(Bt,$t)|0,rt=rt+Math.imul(qt,Yr)|0,Ct=Ct+Math.imul(qt,Vr)|0,Ct=Ct+Math.imul(Kt,Yr)|0,It=It+Math.imul(Kt,Vr)|0,rt=rt+Math.imul(Ut,Rn)|0,Ct=Ct+Math.imul(Ut,Ur)|0,Ct=Ct+Math.imul(Gt,Rn)|0,It=It+Math.imul(Gt,Ur)|0;var wo=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(wo>>>26)|0,wo&=67108863,rt=Math.imul(zt,Or),Ct=Math.imul(zt,vr),Ct=Ct+Math.imul(Zt,Or)|0,It=Math.imul(Zt,vr),rt=rt+Math.imul(Gn,fr)|0,Ct=Ct+Math.imul(Gn,tr)|0,Ct=Ct+Math.imul(Wt,fr)|0,It=It+Math.imul(Wt,tr)|0,rt=rt+Math.imul(Dn,hn)|0,Ct=Ct+Math.imul(Dn,Nr)|0,Ct=Ct+Math.imul(Fr,hn)|0,It=It+Math.imul(Fr,Nr)|0,rt=rt+Math.imul(Bn,kn)|0,Ct=Ct+Math.imul(Bn,Kr)|0,Ct=Ct+Math.imul(Br,kn)|0,It=It+Math.imul(Br,Kr)|0,rt=rt+Math.imul(En,Qn)|0,Ct=Ct+Math.imul(En,Zr)|0,Ct=Ct+Math.imul(Dr,Qn)|0,It=It+Math.imul(Dr,Zr)|0,rt=rt+Math.imul(yn,Zn)|0,Ct=Ct+Math.imul(yn,en)|0,Ct=Ct+Math.imul(Lr,Zn)|0,It=It+Math.imul(Lr,en)|0,rt=rt+Math.imul(sr,eo)|0,Ct=Ct+Math.imul(sr,$t)|0,Ct=Ct+Math.imul(hr,eo)|0,It=It+Math.imul(hr,$t)|0,rt=rt+Math.imul(Ht,Yr)|0,Ct=Ct+Math.imul(Ht,Vr)|0,Ct=Ct+Math.imul(Bt,Yr)|0,It=It+Math.imul(Bt,Vr)|0,rt=rt+Math.imul(qt,Rn)|0,Ct=Ct+Math.imul(qt,Ur)|0,Ct=Ct+Math.imul(Kt,Rn)|0,It=It+Math.imul(Kt,Ur)|0,rt=rt+Math.imul(Ut,Un)|0,Ct=Ct+Math.imul(Ut,Hn)|0,Ct=Ct+Math.imul(Gt,Un)|0,It=It+Math.imul(Gt,Hn)|0;var ur=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(ur>>>26)|0,ur&=67108863,rt=Math.imul(zt,fr),Ct=Math.imul(zt,tr),Ct=Ct+Math.imul(Zt,fr)|0,It=Math.imul(Zt,tr),rt=rt+Math.imul(Gn,hn)|0,Ct=Ct+Math.imul(Gn,Nr)|0,Ct=Ct+Math.imul(Wt,hn)|0,It=It+Math.imul(Wt,Nr)|0,rt=rt+Math.imul(Dn,kn)|0,Ct=Ct+Math.imul(Dn,Kr)|0,Ct=Ct+Math.imul(Fr,kn)|0,It=It+Math.imul(Fr,Kr)|0,rt=rt+Math.imul(Bn,Qn)|0,Ct=Ct+Math.imul(Bn,Zr)|0,Ct=Ct+Math.imul(Br,Qn)|0,It=It+Math.imul(Br,Zr)|0,rt=rt+Math.imul(En,Zn)|0,Ct=Ct+Math.imul(En,en)|0,Ct=Ct+Math.imul(Dr,Zn)|0,It=It+Math.imul(Dr,en)|0,rt=rt+Math.imul(yn,eo)|0,Ct=Ct+Math.imul(yn,$t)|0,Ct=Ct+Math.imul(Lr,eo)|0,It=It+Math.imul(Lr,$t)|0,rt=rt+Math.imul(sr,Yr)|0,Ct=Ct+Math.imul(sr,Vr)|0,Ct=Ct+Math.imul(hr,Yr)|0,It=It+Math.imul(hr,Vr)|0,rt=rt+Math.imul(Ht,Rn)|0,Ct=Ct+Math.imul(Ht,Ur)|0,Ct=Ct+Math.imul(Bt,Rn)|0,It=It+Math.imul(Bt,Ur)|0,rt=rt+Math.imul(qt,Un)|0,Ct=Ct+Math.imul(qt,Hn)|0,Ct=Ct+Math.imul(Kt,Un)|0,It=It+Math.imul(Kt,Hn)|0;var Cr=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,rt=Math.imul(zt,hn),Ct=Math.imul(zt,Nr),Ct=Ct+Math.imul(Zt,hn)|0,It=Math.imul(Zt,Nr),rt=rt+Math.imul(Gn,kn)|0,Ct=Ct+Math.imul(Gn,Kr)|0,Ct=Ct+Math.imul(Wt,kn)|0,It=It+Math.imul(Wt,Kr)|0,rt=rt+Math.imul(Dn,Qn)|0,Ct=Ct+Math.imul(Dn,Zr)|0,Ct=Ct+Math.imul(Fr,Qn)|0,It=It+Math.imul(Fr,Zr)|0,rt=rt+Math.imul(Bn,Zn)|0,Ct=Ct+Math.imul(Bn,en)|0,Ct=Ct+Math.imul(Br,Zn)|0,It=It+Math.imul(Br,en)|0,rt=rt+Math.imul(En,eo)|0,Ct=Ct+Math.imul(En,$t)|0,Ct=Ct+Math.imul(Dr,eo)|0,It=It+Math.imul(Dr,$t)|0,rt=rt+Math.imul(yn,Yr)|0,Ct=Ct+Math.imul(yn,Vr)|0,Ct=Ct+Math.imul(Lr,Yr)|0,It=It+Math.imul(Lr,Vr)|0,rt=rt+Math.imul(sr,Rn)|0,Ct=Ct+Math.imul(sr,Ur)|0,Ct=Ct+Math.imul(hr,Rn)|0,It=It+Math.imul(hr,Ur)|0,rt=rt+Math.imul(Ht,Un)|0,Ct=Ct+Math.imul(Ht,Hn)|0,Ct=Ct+Math.imul(Bt,Un)|0,It=It+Math.imul(Bt,Hn)|0;var $r=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+($r>>>26)|0,$r&=67108863,rt=Math.imul(zt,kn),Ct=Math.imul(zt,Kr),Ct=Ct+Math.imul(Zt,kn)|0,It=Math.imul(Zt,Kr),rt=rt+Math.imul(Gn,Qn)|0,Ct=Ct+Math.imul(Gn,Zr)|0,Ct=Ct+Math.imul(Wt,Qn)|0,It=It+Math.imul(Wt,Zr)|0,rt=rt+Math.imul(Dn,Zn)|0,Ct=Ct+Math.imul(Dn,en)|0,Ct=Ct+Math.imul(Fr,Zn)|0,It=It+Math.imul(Fr,en)|0,rt=rt+Math.imul(Bn,eo)|0,Ct=Ct+Math.imul(Bn,$t)|0,Ct=Ct+Math.imul(Br,eo)|0,It=It+Math.imul(Br,$t)|0,rt=rt+Math.imul(En,Yr)|0,Ct=Ct+Math.imul(En,Vr)|0,Ct=Ct+Math.imul(Dr,Yr)|0,It=It+Math.imul(Dr,Vr)|0,rt=rt+Math.imul(yn,Rn)|0,Ct=Ct+Math.imul(yn,Ur)|0,Ct=Ct+Math.imul(Lr,Rn)|0,It=It+Math.imul(Lr,Ur)|0,rt=rt+Math.imul(sr,Un)|0,Ct=Ct+Math.imul(sr,Hn)|0,Ct=Ct+Math.imul(hr,Un)|0,It=It+Math.imul(hr,Hn)|0;var dn=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(dn>>>26)|0,dn&=67108863,rt=Math.imul(zt,Qn),Ct=Math.imul(zt,Zr),Ct=Ct+Math.imul(Zt,Qn)|0,It=Math.imul(Zt,Zr),rt=rt+Math.imul(Gn,Zn)|0,Ct=Ct+Math.imul(Gn,en)|0,Ct=Ct+Math.imul(Wt,Zn)|0,It=It+Math.imul(Wt,en)|0,rt=rt+Math.imul(Dn,eo)|0,Ct=Ct+Math.imul(Dn,$t)|0,Ct=Ct+Math.imul(Fr,eo)|0,It=It+Math.imul(Fr,$t)|0,rt=rt+Math.imul(Bn,Yr)|0,Ct=Ct+Math.imul(Bn,Vr)|0,Ct=Ct+Math.imul(Br,Yr)|0,It=It+Math.imul(Br,Vr)|0,rt=rt+Math.imul(En,Rn)|0,Ct=Ct+Math.imul(En,Ur)|0,Ct=Ct+Math.imul(Dr,Rn)|0,It=It+Math.imul(Dr,Ur)|0,rt=rt+Math.imul(yn,Un)|0,Ct=Ct+Math.imul(yn,Hn)|0,Ct=Ct+Math.imul(Lr,Un)|0,It=It+Math.imul(Lr,Hn)|0;var rn=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(rn>>>26)|0,rn&=67108863,rt=Math.imul(zt,Zn),Ct=Math.imul(zt,en),Ct=Ct+Math.imul(Zt,Zn)|0,It=Math.imul(Zt,en),rt=rt+Math.imul(Gn,eo)|0,Ct=Ct+Math.imul(Gn,$t)|0,Ct=Ct+Math.imul(Wt,eo)|0,It=It+Math.imul(Wt,$t)|0,rt=rt+Math.imul(Dn,Yr)|0,Ct=Ct+Math.imul(Dn,Vr)|0,Ct=Ct+Math.imul(Fr,Yr)|0,It=It+Math.imul(Fr,Vr)|0,rt=rt+Math.imul(Bn,Rn)|0,Ct=Ct+Math.imul(Bn,Ur)|0,Ct=Ct+Math.imul(Br,Rn)|0,It=It+Math.imul(Br,Ur)|0,rt=rt+Math.imul(En,Un)|0,Ct=Ct+Math.imul(En,Hn)|0,Ct=Ct+Math.imul(Dr,Un)|0,It=It+Math.imul(Dr,Hn)|0;var An=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(An>>>26)|0,An&=67108863,rt=Math.imul(zt,eo),Ct=Math.imul(zt,$t),Ct=Ct+Math.imul(Zt,eo)|0,It=Math.imul(Zt,$t),rt=rt+Math.imul(Gn,Yr)|0,Ct=Ct+Math.imul(Gn,Vr)|0,Ct=Ct+Math.imul(Wt,Yr)|0,It=It+Math.imul(Wt,Vr)|0,rt=rt+Math.imul(Dn,Rn)|0,Ct=Ct+Math.imul(Dn,Ur)|0,Ct=Ct+Math.imul(Fr,Rn)|0,It=It+Math.imul(Fr,Ur)|0,rt=rt+Math.imul(Bn,Un)|0,Ct=Ct+Math.imul(Bn,Hn)|0,Ct=Ct+Math.imul(Br,Un)|0,It=It+Math.imul(Br,Hn)|0;var Pn=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,rt=Math.imul(zt,Yr),Ct=Math.imul(zt,Vr),Ct=Ct+Math.imul(Zt,Yr)|0,It=Math.imul(Zt,Vr),rt=rt+Math.imul(Gn,Rn)|0,Ct=Ct+Math.imul(Gn,Ur)|0,Ct=Ct+Math.imul(Wt,Rn)|0,It=It+Math.imul(Wt,Ur)|0,rt=rt+Math.imul(Dn,Un)|0,Ct=Ct+Math.imul(Dn,Hn)|0,Ct=Ct+Math.imul(Fr,Un)|0,It=It+Math.imul(Fr,Hn)|0;var Tn=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,rt=Math.imul(zt,Rn),Ct=Math.imul(zt,Ur),Ct=Ct+Math.imul(Zt,Rn)|0,It=Math.imul(Zt,Ur),rt=rt+Math.imul(Gn,Un)|0,Ct=Ct+Math.imul(Gn,Hn)|0,Ct=Ct+Math.imul(Wt,Un)|0,It=It+Math.imul(Wt,Hn)|0;var jn=(_+rt|0)+((Ct&8191)<<13)|0;_=(It+(Ct>>>13)|0)+(jn>>>26)|0,jn&=67108863,rt=Math.imul(zt,Un),Ct=Math.imul(zt,Hn),Ct=Ct+Math.imul(Zt,Un)|0,It=Math.imul(Zt,Hn);var Nn=(_+rt|0)+((Ct&8191)<<13)|0;return _=(It+(Ct>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,ct[0]=so,ct[1]=uo,ct[2]=io,ct[3]=mo,ct[4]=ao,ct[5]=go,ct[6]=po,ct[7]=yo,ct[8]=wo,ct[9]=ur,ct[10]=Cr,ct[11]=$r,ct[12]=dn,ct[13]=rn,ct[14]=An,ct[15]=Pn,ct[16]=Tn,ct[17]=jn,ct[18]=Nn,_!==0&&(ct[19]=_,it.length++),it};Math.imul||(St=ht);function At(b,$,_e){_e.negative=$.negative^b.negative,_e.length=b.length+$.length;for(var it=0,pt=0,yt=0;yt<_e.length-1;yt++){var ct=pt;pt=0;for(var _=it&67108863,rt=Math.min(yt,$.length-1),Ct=Math.max(0,yt-b.length+1);Ct<=rt;Ct++){var It=yt-Ct,Nt=b.words[It]|0,Ut=$.words[Ct]|0,Gt=Nt*Ut,Pt=Gt&67108863;ct=ct+(Gt/67108864|0)|0,Pt=Pt+_|0,_=Pt&67108863,ct=ct+(Pt>>>26)|0,pt+=ct>>>26,ct&=67108863}_e.words[yt]=_,it=ct,ct=pt}return it!==0?_e.words[yt]=it:_e.length--,_e._strip()}function Tt(b,$,_e){return At(b,$,_e)}h.prototype.mulTo=function($,_e){var it,pt=this.length+$.length;return this.length===10&&$.length===10?it=St(this,$,_e):pt<63?it=ht(this,$,_e):pt<1024?it=At(this,$,_e):it=Tt(this,$,_e),it},h.prototype.mul=function($){var _e=new h(null);return _e.words=new Array(this.length+$.length),this.mulTo($,_e)},h.prototype.mulf=function($){var _e=new h(null);return _e.words=new Array(this.length+$.length),Tt(this,$,_e)},h.prototype.imul=function($){return this.clone().mulTo($,this)},h.prototype.imuln=function($){var _e=$<0;_e&&($=-$),c(typeof $=="number"),c($<67108864);for(var it=0,pt=0;pt<this.length;pt++){var yt=(this.words[pt]|0)*$,ct=(yt&67108863)+(it&67108863);it>>=26,it+=yt/67108864|0,it+=ct>>>26,this.words[pt]=ct&67108863}return it!==0&&(this.words[pt]=it,this.length++),_e?this.ineg():this},h.prototype.muln=function($){return this.clone().imuln($)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function($){var _e=bt($);if(_e.length===0)return new h(1);for(var it=this,pt=0;pt<_e.length&&_e[pt]===0;pt++,it=it.sqr());if(++pt<_e.length)for(var yt=it.sqr();pt<_e.length;pt++,yt=yt.sqr())_e[pt]!==0&&(it=it.mul(yt));return it},h.prototype.iushln=function($){c(typeof $=="number"&&$>=0);var _e=$%26,it=($-_e)/26,pt=67108863>>>26-_e<<26-_e,yt;if(_e!==0){var ct=0;for(yt=0;yt<this.length;yt++){var _=this.words[yt]&pt,rt=(this.words[yt]|0)-_<<_e;this.words[yt]=rt|ct,ct=_>>>26-_e}ct&&(this.words[yt]=ct,this.length++)}if(it!==0){for(yt=this.length-1;yt>=0;yt--)this.words[yt+it]=this.words[yt];for(yt=0;yt<it;yt++)this.words[yt]=0;this.length+=it}return this._strip()},h.prototype.ishln=function($){return c(this.negative===0),this.iushln($)},h.prototype.iushrn=function($,_e,it){c(typeof $=="number"&&$>=0);var pt;_e?pt=(_e-_e%26)/26:pt=0;var yt=$%26,ct=Math.min(($-yt)/26,this.length),_=67108863^67108863>>>yt<<yt,rt=it;if(pt-=ct,pt=Math.max(0,pt),rt){for(var Ct=0;Ct<ct;Ct++)rt.words[Ct]=this.words[Ct];rt.length=ct}if(ct!==0)if(this.length>ct)for(this.length-=ct,Ct=0;Ct<this.length;Ct++)this.words[Ct]=this.words[Ct+ct];else this.words[0]=0,this.length=1;var It=0;for(Ct=this.length-1;Ct>=0&&(It!==0||Ct>=pt);Ct--){var Nt=this.words[Ct]|0;this.words[Ct]=It<<26-yt|Nt>>>yt,It=Nt&_}return rt&&It!==0&&(rt.words[rt.length++]=It),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},h.prototype.ishrn=function($,_e,it){return c(this.negative===0),this.iushrn($,_e,it)},h.prototype.shln=function($){return this.clone().ishln($)},h.prototype.ushln=function($){return this.clone().iushln($)},h.prototype.shrn=function($){return this.clone().ishrn($)},h.prototype.ushrn=function($){return this.clone().iushrn($)},h.prototype.testn=function($){c(typeof $=="number"&&$>=0);var _e=$%26,it=($-_e)/26,pt=1<<_e;if(this.length<=it)return!1;var yt=this.words[it];return!!(yt&pt)},h.prototype.imaskn=function($){c(typeof $=="number"&&$>=0);var _e=$%26,it=($-_e)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=it)return this;if(_e!==0&&it++,this.length=Math.min(it,this.length),_e!==0){var pt=67108863^67108863>>>_e<<_e;this.words[this.length-1]&=pt}return this._strip()},h.prototype.maskn=function($){return this.clone().imaskn($)},h.prototype.iaddn=function($){return c(typeof $=="number"),c($<67108864),$<0?this.isubn(-$):this.negative!==0?this.length===1&&(this.words[0]|0)<=$?(this.words[0]=$-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn($),this.negative=1,this):this._iaddn($)},h.prototype._iaddn=function($){this.words[0]+=$;for(var _e=0;_e<this.length&&this.words[_e]>=67108864;_e++)this.words[_e]-=67108864,_e===this.length-1?this.words[_e+1]=1:this.words[_e+1]++;return this.length=Math.max(this.length,_e+1),this},h.prototype.isubn=function($){if(c(typeof $=="number"),c($<67108864),$<0)return this.iaddn(-$);if(this.negative!==0)return this.negative=0,this.iaddn($),this.negative=1,this;if(this.words[0]-=$,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _e=0;_e<this.length&&this.words[_e]<0;_e++)this.words[_e]+=67108864,this.words[_e+1]-=1;return this._strip()},h.prototype.addn=function($){return this.clone().iaddn($)},h.prototype.subn=function($){return this.clone().isubn($)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function($,_e,it){var pt=$.length+it,yt;this._expand(pt);var ct,_=0;for(yt=0;yt<$.length;yt++){ct=(this.words[yt+it]|0)+_;var rt=($.words[yt]|0)*_e;ct-=rt&67108863,_=(ct>>26)-(rt/67108864|0),this.words[yt+it]=ct&67108863}for(;yt<this.length-it;yt++)ct=(this.words[yt+it]|0)+_,_=ct>>26,this.words[yt+it]=ct&67108863;if(_===0)return this._strip();for(c(_===-1),_=0,yt=0;yt<this.length;yt++)ct=-(this.words[yt]|0)+_,_=ct>>26,this.words[yt]=ct&67108863;return this.negative=1,this._strip()},h.prototype._wordDiv=function($,_e){var it=this.length-$.length,pt=this.clone(),yt=$,ct=yt.words[yt.length-1]|0,_=this._countBits(ct);it=26-_,it!==0&&(yt=yt.ushln(it),pt.iushln(it),ct=yt.words[yt.length-1]|0);var rt=pt.length-yt.length,Ct;if(_e!=="mod"){Ct=new h(null),Ct.length=rt+1,Ct.words=new Array(Ct.length);for(var It=0;It<Ct.length;It++)Ct.words[It]=0}var Nt=pt.clone()._ishlnsubmul(yt,1,rt);Nt.negative===0&&(pt=Nt,Ct&&(Ct.words[rt]=1));for(var Ut=rt-1;Ut>=0;Ut--){var Gt=(pt.words[yt.length+Ut]|0)*67108864+(pt.words[yt.length+Ut-1]|0);for(Gt=Math.min(Gt/ct|0,67108863),pt._ishlnsubmul(yt,Gt,Ut);pt.negative!==0;)Gt--,pt.negative=0,pt._ishlnsubmul(yt,1,Ut),pt.isZero()||(pt.negative^=1);Ct&&(Ct.words[Ut]=Gt)}return Ct&&Ct._strip(),pt._strip(),_e!=="div"&&it!==0&&pt.iushrn(it),{div:Ct||null,mod:pt}},h.prototype.divmod=function($,_e,it){if(c(!$.isZero()),this.isZero())return{div:new h(0),mod:new h(0)};var pt,yt,ct;return this.negative!==0&&$.negative===0?(ct=this.neg().divmod($,_e),_e!=="mod"&&(pt=ct.div.neg()),_e!=="div"&&(yt=ct.mod.neg(),it&&yt.negative!==0&&yt.iadd($)),{div:pt,mod:yt}):this.negative===0&&$.negative!==0?(ct=this.divmod($.neg(),_e),_e!=="mod"&&(pt=ct.div.neg()),{div:pt,mod:ct.mod}):this.negative&$.negative?(ct=this.neg().divmod($.neg(),_e),_e!=="div"&&(yt=ct.mod.neg(),it&&yt.negative!==0&&yt.isub($)),{div:ct.div,mod:yt}):$.length>this.length||this.cmp($)<0?{div:new h(0),mod:this}:$.length===1?_e==="div"?{div:this.divn($.words[0]),mod:null}:_e==="mod"?{div:null,mod:new h(this.modrn($.words[0]))}:{div:this.divn($.words[0]),mod:new h(this.modrn($.words[0]))}:this._wordDiv($,_e)},h.prototype.div=function($){return this.divmod($,"div",!1).div},h.prototype.mod=function($){return this.divmod($,"mod",!1).mod},h.prototype.umod=function($){return this.divmod($,"mod",!0).mod},h.prototype.divRound=function($){var _e=this.divmod($);if(_e.mod.isZero())return _e.div;var it=_e.div.negative!==0?_e.mod.isub($):_e.mod,pt=$.ushrn(1),yt=$.andln(1),ct=it.cmp(pt);return ct<0||yt===1&&ct===0?_e.div:_e.div.negative!==0?_e.div.isubn(1):_e.div.iaddn(1)},h.prototype.modrn=function($){var _e=$<0;_e&&($=-$),c($<=67108863);for(var it=(1<<26)%$,pt=0,yt=this.length-1;yt>=0;yt--)pt=(it*pt+(this.words[yt]|0))%$;return _e?-pt:pt},h.prototype.modn=function($){return this.modrn($)},h.prototype.idivn=function($){var _e=$<0;_e&&($=-$),c($<=67108863);for(var it=0,pt=this.length-1;pt>=0;pt--){var yt=(this.words[pt]|0)+it*67108864;this.words[pt]=yt/$|0,it=yt%$}return this._strip(),_e?this.ineg():this},h.prototype.divn=function($){return this.clone().idivn($)},h.prototype.egcd=function($){c($.negative===0),c(!$.isZero());var _e=this,it=$.clone();_e.negative!==0?_e=_e.umod($):_e=_e.clone();for(var pt=new h(1),yt=new h(0),ct=new h(0),_=new h(1),rt=0;_e.isEven()&&it.isEven();)_e.iushrn(1),it.iushrn(1),++rt;for(var Ct=it.clone(),It=_e.clone();!_e.isZero();){for(var Nt=0,Ut=1;!(_e.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for(_e.iushrn(Nt);Nt-- >0;)(pt.isOdd()||yt.isOdd())&&(pt.iadd(Ct),yt.isub(It)),pt.iushrn(1),yt.iushrn(1);for(var Gt=0,Pt=1;!(it.words[0]&Pt)&&Gt<26;++Gt,Pt<<=1);if(Gt>0)for(it.iushrn(Gt);Gt-- >0;)(ct.isOdd()||_.isOdd())&&(ct.iadd(Ct),_.isub(It)),ct.iushrn(1),_.iushrn(1);_e.cmp(it)>=0?(_e.isub(it),pt.isub(ct),yt.isub(_)):(it.isub(_e),ct.isub(pt),_.isub(yt))}return{a:ct,b:_,gcd:it.iushln(rt)}},h.prototype._invmp=function($){c($.negative===0),c(!$.isZero());var _e=this,it=$.clone();_e.negative!==0?_e=_e.umod($):_e=_e.clone();for(var pt=new h(1),yt=new h(0),ct=it.clone();_e.cmpn(1)>0&&it.cmpn(1)>0;){for(var _=0,rt=1;!(_e.words[0]&rt)&&_<26;++_,rt<<=1);if(_>0)for(_e.iushrn(_);_-- >0;)pt.isOdd()&&pt.iadd(ct),pt.iushrn(1);for(var Ct=0,It=1;!(it.words[0]&It)&&Ct<26;++Ct,It<<=1);if(Ct>0)for(it.iushrn(Ct);Ct-- >0;)yt.isOdd()&&yt.iadd(ct),yt.iushrn(1);_e.cmp(it)>=0?(_e.isub(it),pt.isub(yt)):(it.isub(_e),yt.isub(pt))}var Nt;return _e.cmpn(1)===0?Nt=pt:Nt=yt,Nt.cmpn(0)<0&&Nt.iadd($),Nt},h.prototype.gcd=function($){if(this.isZero())return $.abs();if($.isZero())return this.abs();var _e=this.clone(),it=$.clone();_e.negative=0,it.negative=0;for(var pt=0;_e.isEven()&&it.isEven();pt++)_e.iushrn(1),it.iushrn(1);do{for(;_e.isEven();)_e.iushrn(1);for(;it.isEven();)it.iushrn(1);var yt=_e.cmp(it);if(yt<0){var ct=_e;_e=it,it=ct}else if(yt===0||it.cmpn(1)===0)break;_e.isub(it)}while(!0);return it.iushln(pt)},h.prototype.invm=function($){return this.egcd($).a.umod($)},h.prototype.isEven=function(){return(this.words[0]&1)===0},h.prototype.isOdd=function(){return(this.words[0]&1)===1},h.prototype.andln=function($){return this.words[0]&$},h.prototype.bincn=function($){c(typeof $=="number");var _e=$%26,it=($-_e)/26,pt=1<<_e;if(this.length<=it)return this._expand(it+1),this.words[it]|=pt,this;for(var yt=pt,ct=it;yt!==0&&ct<this.length;ct++){var _=this.words[ct]|0;_+=yt,yt=_>>>26,_&=67108863,this.words[ct]=_}return yt!==0&&(this.words[ct]=yt,this.length++),this},h.prototype.isZero=function(){return this.length===1&&this.words[0]===0},h.prototype.cmpn=function($){var _e=$<0;if(this.negative!==0&&!_e)return-1;if(this.negative===0&&_e)return 1;this._strip();var it;if(this.length>1)it=1;else{_e&&($=-$),c($<=67108863,"Number is too big");var pt=this.words[0]|0;it=pt===$?0:pt<$?-1:1}return this.negative!==0?-it|0:it},h.prototype.cmp=function($){if(this.negative!==0&&$.negative===0)return-1;if(this.negative===0&&$.negative!==0)return 1;var _e=this.ucmp($);return this.negative!==0?-_e|0:_e},h.prototype.ucmp=function($){if(this.length>$.length)return 1;if(this.length<$.length)return-1;for(var _e=0,it=this.length-1;it>=0;it--){var pt=this.words[it]|0,yt=$.words[it]|0;if(pt!==yt){pt<yt?_e=-1:pt>yt&&(_e=1);break}}return _e},h.prototype.gtn=function($){return this.cmpn($)===1},h.prototype.gt=function($){return this.cmp($)===1},h.prototype.gten=function($){return this.cmpn($)>=0},h.prototype.gte=function($){return this.cmp($)>=0},h.prototype.ltn=function($){return this.cmpn($)===-1},h.prototype.lt=function($){return this.cmp($)===-1},h.prototype.lten=function($){return this.cmpn($)<=0},h.prototype.lte=function($){return this.cmp($)<=0},h.prototype.eqn=function($){return this.cmpn($)===0},h.prototype.eq=function($){return this.cmp($)===0},h.red=function($){return new at($)},h.prototype.toRed=function($){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),$.convertTo(this)._forceRed($)},h.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function($){return this.red=$,this},h.prototype.forceRed=function($){return c(!this.red,"Already a number in reduction context"),this._forceRed($)},h.prototype.redAdd=function($){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,$)},h.prototype.redIAdd=function($){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,$)},h.prototype.redSub=function($){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,$)},h.prototype.redISub=function($){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,$)},h.prototype.redShl=function($){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,$)},h.prototype.redMul=function($){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,$),this.red.mul(this,$)},h.prototype.redIMul=function($){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,$),this.red.imul(this,$)},h.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function($){return c(this.red&&!$.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,$)};var ft={k256:null,p224:null,p192:null,p25519:null};function _t(b,$){this.name=b,this.p=new h($,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_t.prototype._tmp=function(){var $=new h(null);return $.words=new Array(Math.ceil(this.n/13)),$},_t.prototype.ireduce=function($){var _e=$,it;do this.split(_e,this.tmp),_e=this.imulK(_e),_e=_e.iadd(this.tmp),it=_e.bitLength();while(it>this.n);var pt=it<this.n?-1:_e.ucmp(this.p);return pt===0?(_e.words[0]=0,_e.length=1):pt>0?_e.isub(this.p):_e.strip!==void 0?_e.strip():_e._strip(),_e},_t.prototype.split=function($,_e){$.iushrn(this.n,0,_e)},_t.prototype.imulK=function($){return $.imul(this.k)};function Rt(){_t.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(Rt,_t),Rt.prototype.split=function($,_e){for(var it=4194303,pt=Math.min($.length,9),yt=0;yt<pt;yt++)_e.words[yt]=$.words[yt];if(_e.length=pt,$.length<=9){$.words[0]=0,$.length=1;return}var ct=$.words[9];for(_e.words[_e.length++]=ct&it,yt=10;yt<$.length;yt++){var _=$.words[yt]|0;$.words[yt-10]=(_&it)<<4|ct>>>22,ct=_}ct>>>=22,$.words[yt-10]=ct,ct===0&&$.length>10?$.length-=10:$.length-=9},Rt.prototype.imulK=function($){$.words[$.length]=0,$.words[$.length+1]=0,$.length+=2;for(var _e=0,it=0;it<$.length;it++){var pt=$.words[it]|0;_e+=pt*977,$.words[it]=_e&67108863,_e=pt*64+(_e/67108864|0)}return $.words[$.length-1]===0&&($.length--,$.words[$.length-1]===0&&$.length--),$};function Mt(){_t.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(Mt,_t);function Et(){_t.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Et,_t);function kt(){_t.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(kt,_t),kt.prototype.imulK=function($){for(var _e=0,it=0;it<$.length;it++){var pt=($.words[it]|0)*19+_e,yt=pt&67108863;pt>>>=26,$.words[it]=yt,_e=pt}return _e!==0&&($.words[$.length++]=_e),$},h._prime=function($){if(ft[$])return ft[$];var _e;if($==="k256")_e=new Rt;else if($==="p224")_e=new Mt;else if($==="p192")_e=new Et;else if($==="p25519")_e=new kt;else throw new Error("Unknown prime "+$);return ft[$]=_e,_e};function at(b){if(typeof b=="string"){var $=h._prime(b);this.m=$.p,this.prime=$}else c(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}at.prototype._verify1=function($){c($.negative===0,"red works only with positives"),c($.red,"red works only with red numbers")},at.prototype._verify2=function($,_e){c(($.negative|_e.negative)===0,"red works only with positives"),c($.red&&$.red===_e.red,"red works only with red numbers")},at.prototype.imod=function($){return this.prime?this.prime.ireduce($)._forceRed(this):(nt($,$.umod(this.m)._forceRed(this)),$)},at.prototype.neg=function($){return $.isZero()?$.clone():this.m.sub($)._forceRed(this)},at.prototype.add=function($,_e){this._verify2($,_e);var it=$.add(_e);return it.cmp(this.m)>=0&&it.isub(this.m),it._forceRed(this)},at.prototype.iadd=function($,_e){this._verify2($,_e);var it=$.iadd(_e);return it.cmp(this.m)>=0&&it.isub(this.m),it},at.prototype.sub=function($,_e){this._verify2($,_e);var it=$.sub(_e);return it.cmpn(0)<0&&it.iadd(this.m),it._forceRed(this)},at.prototype.isub=function($,_e){this._verify2($,_e);var it=$.isub(_e);return it.cmpn(0)<0&&it.iadd(this.m),it},at.prototype.shl=function($,_e){return this._verify1($),this.imod($.ushln(_e))},at.prototype.imul=function($,_e){return this._verify2($,_e),this.imod($.imul(_e))},at.prototype.mul=function($,_e){return this._verify2($,_e),this.imod($.mul(_e))},at.prototype.isqr=function($){return this.imul($,$.clone())},at.prototype.sqr=function($){return this.mul($,$)},at.prototype.sqrt=function($){if($.isZero())return $.clone();var _e=this.m.andln(3);if(c(_e%2===1),_e===3){var it=this.m.add(new h(1)).iushrn(2);return this.pow($,it)}for(var pt=this.m.subn(1),yt=0;!pt.isZero()&&pt.andln(1)===0;)yt++,pt.iushrn(1);c(!pt.isZero());var ct=new h(1).toRed(this),_=ct.redNeg(),rt=this.m.subn(1).iushrn(1),Ct=this.m.bitLength();for(Ct=new h(2*Ct*Ct).toRed(this);this.pow(Ct,rt).cmp(_)!==0;)Ct.redIAdd(_);for(var It=this.pow(Ct,pt),Nt=this.pow($,pt.addn(1).iushrn(1)),Ut=this.pow($,pt),Gt=yt;Ut.cmp(ct)!==0;){for(var Pt=Ut,qt=0;Pt.cmp(ct)!==0;qt++)Pt=Pt.redSqr();c(qt<Gt);var Kt=this.pow(It,new h(1).iushln(Gt-qt-1));Nt=Nt.redMul(Kt),It=Kt.redSqr(),Ut=Ut.redMul(It),Gt=qt}return Nt},at.prototype.invm=function($){var _e=$._invmp(this.m);return _e.negative!==0?(_e.negative=0,this.imod(_e).redNeg()):this.imod(_e)},at.prototype.pow=function($,_e){if(_e.isZero())return new h(1).toRed(this);if(_e.cmpn(1)===0)return $.clone();var it=4,pt=new Array(1<<it);pt[0]=new h(1).toRed(this),pt[1]=$;for(var yt=2;yt<pt.length;yt++)pt[yt]=this.mul(pt[yt-1],$);var ct=pt[0],_=0,rt=0,Ct=_e.bitLength()%26;for(Ct===0&&(Ct=26),yt=_e.length-1;yt>=0;yt--){for(var It=_e.words[yt],Nt=Ct-1;Nt>=0;Nt--){var Ut=It>>Nt&1;if(ct!==pt[0]&&(ct=this.sqr(ct)),Ut===0&&_===0){rt=0;continue}_<<=1,_|=Ut,rt++,!(rt!==it&&(yt!==0||Nt!==0))&&(ct=this.mul(ct,pt[_]),rt=0,_=0)}Ct=26}return ct},at.prototype.convertTo=function($){var _e=$.umod(this.m);return _e===$?_e.clone():_e},at.prototype.convertFrom=function($){var _e=$.clone();return _e.red=null,_e},h.mont=function($){return new s($)};function s(b){at.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(s,at),s.prototype.convertTo=function($){return this.imod($.ushln(this.shift))},s.prototype.convertFrom=function($){var _e=this.imod($.mul(this.rinv));return _e.red=null,_e},s.prototype.imul=function($,_e){if($.isZero()||_e.isZero())return $.words[0]=0,$.length=1,$;var it=$.imul(_e),pt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),yt=it.isub(pt).iushrn(this.shift),ct=yt;return yt.cmp(this.m)>=0?ct=yt.isub(this.m):yt.cmpn(0)<0&&(ct=yt.iadd(this.m)),ct._forceRed(this)},s.prototype.mul=function($,_e){if($.isZero()||_e.isZero())return new h(0)._forceRed(this);var it=$.mul(_e),pt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),yt=it.isub(pt).iushrn(this.shift),ct=yt;return yt.cmp(this.m)>=0?ct=yt.isub(this.m):yt.cmpn(0)<0&&(ct=yt.iadd(this.m)),ct._forceRed(this)},s.prototype.invm=function($){var _e=this.imod($._invmp(this.m).mul(this.r2));return _e._forceRed(this)}})(o,commonjsGlobal)}(bn$4)),bn$4.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var o=requireBn$4(),e=requireBrowser$b(),a=requireSafeBuffer$1().Buffer;function c(et){var ot=et.modulus.byteLength(),st;do st=new o(e(ot));while(st.cmp(et.modulus)>=0||!st.umod(et.prime1)||!st.umod(et.prime2));return st}function j(et){var ot=c(et),st=ot.toRed(o.mont(et.modulus)).redPow(new o(et.publicExponent)).fromRed();return{blinder:st,unblinder:ot.invm(et.modulus)}}function h(et,ot){var st=j(ot),lt=ot.modulus.byteLength(),nt=new o(et).mul(st.blinder).umod(ot.modulus),gt=nt.toRed(o.mont(ot.prime1)),dt=nt.toRed(o.mont(ot.prime2)),mt=ot.coefficient,vt=ot.prime1,tt=ot.prime2,bt=gt.redPow(ot.exponent1).fromRed(),ht=dt.redPow(ot.exponent2).fromRed(),St=bt.isub(ht).imul(mt).umod(vt).imul(tt);return ht.iadd(St).imul(st.unblinder).umod(ot.modulus).toArrayLike(a,"be",lt)}return h.getr=c,browserifyRsa=h,browserifyRsa}var elliptic={};const version="6.6.1",require$$0$1={version};var utils$3={},bn$3={exports:{}};bn$3.exports;var hasRequiredBn$3;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,function(o){(function(e,a){function c(at,s){if(!at)throw new Error(s||"Assertion failed")}function j(at,s){at.super_=s;var b=function(){};b.prototype=s.prototype,at.prototype=new b,at.prototype.constructor=at}function h(at,s,b){if(h.isBN(at))return at;this.negative=0,this.words=null,this.length=0,this.red=null,at!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(at||0,s||10,b||"be"))}typeof e=="object"?e.exports=h:a.BN=h,h.BN=h,h.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}h.isBN=function(s){return s instanceof h?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===h.wordSize&&Array.isArray(s.words)},h.max=function(s,b){return s.cmp(b)>0?s:b},h.min=function(s,b){return s.cmp(b)<0?s:b},h.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},h.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},h.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,yt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);return this.strip()};function ot(at,s){var b=at.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(at,s,b){var $=ot(at,b);return b-1>=s&&($|=ot(at,b-1)<<4),$}h.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,yt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8;else{var ct=s.length-b;for(_e=ct%2===0?b+1:b;_e<s.length;_e+=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8}this.strip()};function lt(at,s,b,$){for(var _e=0,it=Math.min(at.length,b),pt=s;pt<it;pt++){var yt=at.charCodeAt(pt)-48;_e*=$,yt>=49?_e+=yt-49+10:yt>=17?_e+=yt-17+10:_e+=yt}return _e}h.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,yt=pt%_e,ct=Math.min(pt,pt-yt)+$,_=0,rt=$;rt<ct;rt+=_e)_=lt(s,rt,rt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(yt!==0){var Ct=1;for(_=lt(s,rt,s.length,b),rt=0;rt<yt;rt++)Ct*=b;this.imuln(Ct),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},h.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},h.prototype.clone=function(){var s=new h(null);return this.copy(s),s},h.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},h.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var nt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],dt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var yt=this.words[pt],ct=((yt<<_e|it)&16777215).toString(16);it=yt>>>24-_e&16777215,_e+=2,_e>=26&&(_e-=26,pt--),it!==0||pt!==this.length-1?$=nt[6-ct.length]+ct+$:$=ct+$}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],rt=dt[s];$="";var Ct=this.clone();for(Ct.negative=0;!Ct.isZero();){var It=Ct.modn(rt).toString(s);Ct=Ct.idivn(rt),Ct.isZero()?$=It+$:$=nt[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},h.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},h.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",yt=new s(it),ct,_,rt=this.clone();if(pt){for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[_]=ct;for(;_<it;_++)yt[_]=0}else{for(_=0;_<it-_e;_++)yt[_]=0;for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[it-_-1]=ct}return yt},Math.clz32?h.prototype._countBits=function(s){return 32-Math.clz32(s)}:h.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},h.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},h.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function mt(at){for(var s=new Array(at.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(at.words[$]&1<<_e)>>>_e}return s}h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},h.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return this.negative!==0},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},h.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},h.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},h.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},h.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},h.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},h.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},h.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},h.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},h.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},h.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},h.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},h.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},h.prototype.notn=function(s){return this.clone().inotn(s)},h.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},h.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},h.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},h.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,yt=0;yt<it.length;yt++)b=(_e.words[yt]|0)-(it.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;for(;pt!==0&&yt<_e.length;yt++)b=(_e.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;if(pt===0&&yt<_e.length&&_e!==this)for(;yt<_e.length;yt++)this.words[yt]=_e.words[yt];return this.length=Math.max(this.length,yt),_e!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(s){return this.clone().isub(s)};function vt(at,s,b){b.negative=s.negative^at.negative;var $=at.length+s.length|0;b.length=$,$=$-1|0;var _e=at.words[0]|0,it=s.words[0]|0,pt=_e*it,yt=pt&67108863,ct=pt/67108864|0;b.words[0]=yt;for(var _=1;_<$;_++){for(var rt=ct>>>26,Ct=ct&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-at.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=at.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Ct,rt+=pt/67108864|0,Ct=pt&67108863}b.words[_]=Ct|0,ct=rt|0}return ct!==0?b.words[_]=ct|0:b.length--,b.strip()}var tt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,yt=0,ct,_,rt,Ct=_e[0]|0,It=Ct&8191,Nt=Ct>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,yn=_e[5]|0,Lr=yn&8191,wr=yn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Bn=_e[7]|0,Br=Bn&8191,Gr=Bn>>>13,Dn=_e[8]|0,Fr=Dn&8191,_i=Dn>>>13,Gn=_e[9]|0,Wt=Gn&8191,Lt=Gn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,hn=it[3]|0,Nr=hn&8191,zr=hn>>>13,kn=it[4]|0,Kr=kn&8191,nn=kn>>>13,Qn=it[5]|0,Zr=Qn&8191,on=Qn>>>13,Zn=it[6]|0,en=Zn&8191,ln=Zn>>>13,eo=it[7]|0,$t=eo&8191,or=eo>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Rn=it[9]|0,Ur=Rn&8191,tn=Rn>>>13;$.negative=s.negative^b.negative,$.length=19,ct=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,rt=Math.imul(Nt,ar);var Un=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,ct=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,rt=Math.imul(Pt,ar),ct=ct+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,rt=rt+Math.imul(Nt,Rr)|0;var Hn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,ct=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,rt=Math.imul(jt,ar),ct=ct+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,rt=rt+Math.imul(Pt,Rr)|0,ct=ct+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,rt=rt+Math.imul(Nt,yr)|0;var so=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(so>>>26)|0,so&=67108863,ct=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,rt=Math.imul(Jt,ar),ct=ct+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,rt=rt+Math.imul(jt,Rr)|0,ct=ct+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,rt=rt+Math.imul(Pt,yr)|0,ct=ct+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,rt=rt+Math.imul(Nt,zr)|0;var uo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(uo>>>26)|0,uo&=67108863,ct=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,rt=Math.imul(Ar,ar),ct=ct+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,rt=rt+Math.imul(Jt,Rr)|0,ct=ct+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,rt=rt+Math.imul(jt,yr)|0,ct=ct+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,rt=rt+Math.imul(Pt,zr)|0,ct=ct+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,rt=rt+Math.imul(Nt,nn)|0;var io=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(io>>>26)|0,io&=67108863,ct=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,rt=Math.imul(wr,ar),ct=ct+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,rt=rt+Math.imul(Ar,Rr)|0,ct=ct+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,rt=rt+Math.imul(Jt,yr)|0,ct=ct+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,rt=rt+Math.imul(jt,zr)|0,ct=ct+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,rt=rt+Math.imul(Pt,nn)|0,ct=ct+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,rt=rt+Math.imul(Nt,on)|0;var mo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,ct=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,rt=Math.imul(Qr,ar),ct=ct+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,rt=rt+Math.imul(wr,Rr)|0,ct=ct+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,rt=rt+Math.imul(Ar,yr)|0,ct=ct+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,rt=rt+Math.imul(Jt,zr)|0,ct=ct+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,rt=rt+Math.imul(jt,nn)|0,ct=ct+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,rt=rt+Math.imul(Pt,on)|0,ct=ct+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,rt=rt+Math.imul(Nt,ln)|0;var ao=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,ct=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,rt=Math.imul(Gr,ar),ct=ct+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,rt=rt+Math.imul(Qr,Rr)|0,ct=ct+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,rt=rt+Math.imul(wr,yr)|0,ct=ct+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,rt=rt+Math.imul(Ar,zr)|0,ct=ct+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,rt=rt+Math.imul(Jt,nn)|0,ct=ct+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,rt=rt+Math.imul(jt,on)|0,ct=ct+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,rt=rt+Math.imul(Pt,ln)|0,ct=ct+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,rt=rt+Math.imul(Nt,or)|0;var go=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,ct=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,rt=Math.imul(_i,ar),ct=ct+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,rt=rt+Math.imul(Gr,Rr)|0,ct=ct+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,rt=rt+Math.imul(Qr,yr)|0,ct=ct+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,rt=rt+Math.imul(wr,zr)|0,ct=ct+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,rt=rt+Math.imul(Ar,nn)|0,ct=ct+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,rt=rt+Math.imul(Jt,on)|0,ct=ct+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,rt=rt+Math.imul(jt,ln)|0,ct=ct+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,rt=rt+Math.imul(Pt,or)|0,ct=ct+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,rt=rt+Math.imul(Nt,Hr)|0;var po=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(po>>>26)|0,po&=67108863,ct=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,rt=Math.imul(Lt,ar),ct=ct+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,rt=rt+Math.imul(_i,Rr)|0,ct=ct+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,rt=rt+Math.imul(Gr,yr)|0,ct=ct+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,rt=rt+Math.imul(Qr,zr)|0,ct=ct+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,rt=rt+Math.imul(wr,nn)|0,ct=ct+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,rt=rt+Math.imul(Ar,on)|0,ct=ct+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,rt=rt+Math.imul(Jt,ln)|0,ct=ct+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,rt=rt+Math.imul(jt,or)|0,ct=ct+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,rt=rt+Math.imul(Pt,Hr)|0,ct=ct+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,rt=rt+Math.imul(Nt,tn)|0;var yo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(yo>>>26)|0,yo&=67108863,ct=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,rt=Math.imul(Lt,Rr),ct=ct+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,rt=rt+Math.imul(_i,yr)|0,ct=ct+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,rt=rt+Math.imul(Gr,zr)|0,ct=ct+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,rt=rt+Math.imul(Qr,nn)|0,ct=ct+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,rt=rt+Math.imul(wr,on)|0,ct=ct+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,rt=rt+Math.imul(Ar,ln)|0,ct=ct+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,rt=rt+Math.imul(Jt,or)|0,ct=ct+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,rt=rt+Math.imul(jt,Hr)|0,ct=ct+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,rt=rt+Math.imul(Pt,tn)|0;var wo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(wo>>>26)|0,wo&=67108863,ct=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,rt=Math.imul(Lt,yr),ct=ct+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,rt=rt+Math.imul(_i,zr)|0,ct=ct+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,rt=rt+Math.imul(Gr,nn)|0,ct=ct+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,rt=rt+Math.imul(Qr,on)|0,ct=ct+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,rt=rt+Math.imul(wr,ln)|0,ct=ct+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,rt=rt+Math.imul(Ar,or)|0,ct=ct+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,rt=rt+Math.imul(Jt,Hr)|0,ct=ct+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,rt=rt+Math.imul(jt,tn)|0;var ur=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,ct=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,rt=Math.imul(Lt,zr),ct=ct+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,rt=rt+Math.imul(_i,nn)|0,ct=ct+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,rt=rt+Math.imul(Gr,on)|0,ct=ct+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,rt=rt+Math.imul(Qr,ln)|0,ct=ct+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,rt=rt+Math.imul(wr,or)|0,ct=ct+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,rt=rt+Math.imul(Ar,Hr)|0,ct=ct+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,rt=rt+Math.imul(Jt,tn)|0;var Cr=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ct=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,rt=Math.imul(Lt,nn),ct=ct+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,rt=rt+Math.imul(_i,on)|0,ct=ct+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,rt=rt+Math.imul(Gr,ln)|0,ct=ct+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,rt=rt+Math.imul(Qr,or)|0,ct=ct+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,rt=rt+Math.imul(wr,Hr)|0,ct=ct+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,rt=rt+Math.imul(Ar,tn)|0;var $r=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,ct=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,rt=Math.imul(Lt,on),ct=ct+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,rt=rt+Math.imul(_i,ln)|0,ct=ct+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,rt=rt+Math.imul(Gr,or)|0,ct=ct+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,rt=rt+Math.imul(Qr,Hr)|0,ct=ct+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,rt=rt+Math.imul(wr,tn)|0;var dn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,ct=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,rt=Math.imul(Lt,ln),ct=ct+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,rt=rt+Math.imul(_i,or)|0,ct=ct+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,rt=rt+Math.imul(Gr,Hr)|0,ct=ct+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,rt=rt+Math.imul(Qr,tn)|0;var rn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,ct=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,rt=Math.imul(Lt,or),ct=ct+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,rt=rt+Math.imul(_i,Hr)|0,ct=ct+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,rt=rt+Math.imul(Gr,tn)|0;var An=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(An>>>26)|0,An&=67108863,ct=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,rt=Math.imul(Lt,Hr),ct=ct+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,rt=rt+Math.imul(_i,tn)|0;var Pn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,ct=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,rt=Math.imul(Lt,tn);var Tn=(yt+ct|0)+((_&8191)<<13)|0;return yt=(rt+(_>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,pt[0]=Un,pt[1]=Hn,pt[2]=so,pt[3]=uo,pt[4]=io,pt[5]=mo,pt[6]=ao,pt[7]=go,pt[8]=po,pt[9]=yo,pt[10]=wo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=An,pt[17]=Pn,pt[18]=Tn,yt!==0&&(pt[19]=yt,$.length++),$};Math.imul||(tt=vt);function bt(at,s,b){b.negative=s.negative^at.negative,b.length=at.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var yt=$&67108863,ct=Math.min(it,s.length-1),_=Math.max(0,it-at.length+1);_<=ct;_++){var rt=it-_,Ct=at.words[rt]|0,It=s.words[_]|0,Nt=Ct*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+yt|0,yt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=yt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(at,s,b){var $=new St;return $.mulp(at,s,b)}h.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=tt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function St(at,s){this.x=at,this.y=s}St.prototype.makeRBT=function(s){for(var b=new Array(s),$=h.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},St.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},St.prototype.permute=function(s,b,$,_e,it,pt){for(var yt=0;yt<pt;yt++)_e[yt]=b[s[yt]],it[yt]=$[s[yt]]},St.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var yt=1;yt<it;yt<<=1)for(var ct=yt<<1,_=Math.cos(2*Math.PI/ct),rt=Math.sin(2*Math.PI/ct),Ct=0;Ct<it;Ct+=ct)for(var It=_,Nt=rt,Ut=0;Ut<yt;Ut++){var Gt=$[Ct+Ut],Pt=_e[Ct+Ut],qt=$[Ct+Ut+yt],Kt=_e[Ct+Ut+yt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Ct+Ut]=Gt+qt,_e[Ct+Ut]=Pt+Kt,$[Ct+Ut+yt]=Gt-qt,_e[Ct+Ut+yt]=Pt-Kt,Ut!==ct&&(jt=_*It-rt*Nt,Nt=_*Nt+rt*It,It=jt)}},St.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},St.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},St.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},St.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},St.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},St.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),yt=new Array(_e),ct=new Array(_e),_=new Array(_e),rt=new Array(_e),Ct=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,yt,_e),this.convert13b(b.words,b.length,rt,_e),this.transform(yt,pt,ct,_,_e,it),this.transform(rt,pt,Ct,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=ct[Ut]*Ct[Ut]-_[Ut]*It[Ut];_[Ut]=ct[Ut]*It[Ut]+_[Ut]*Ct[Ut],ct[Ut]=Gt}return this.conjugate(ct,_,_e),this.transform(ct,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},h.prototype.mul=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},h.prototype.mulf=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},h.prototype.imul=function(s){return this.clone().mulTo(s,this)},h.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},h.prototype.muln=function(s){return this.clone().imuln(s)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(s){var b=mt(s);if(b.length===0)return new h(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},h.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var yt=this.words[it]&_e,ct=(this.words[it]|0)-yt<<b;this.words[it]=ct|pt,pt=yt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},h.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},h.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),yt=67108863^67108863>>>it<<it,ct=$;if(_e-=pt,_e=Math.max(0,_e),ct){for(var _=0;_<pt;_++)ct.words[_]=this.words[_];ct.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var rt=0;for(_=this.length-1;_>=0&&(rt!==0||_>=_e);_--){var Ct=this.words[_]|0;this.words[_]=rt<<26-it|Ct>>>it,rt=Ct&yt}return ct&&rt!==0&&(ct.words[ct.length++]=rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},h.prototype.shln=function(s){return this.clone().ishln(s)},h.prototype.ushln=function(s){return this.clone().iushln(s)},h.prototype.shrn=function(s){return this.clone().ishrn(s)},h.prototype.ushrn=function(s){return this.clone().iushrn(s)},h.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},h.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},h.prototype.maskn=function(s){return this.clone().imaskn(s)},h.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},h.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},h.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},h.prototype.addn=function(s){return this.clone().iaddn(s)},h.prototype.subn=function(s){return this.clone().isubn(s)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,yt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+yt;var ct=(s.words[it]|0)*b;pt-=ct&67108863,yt=(pt>>26)-(ct/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+yt,yt=pt>>26,this.words[it+$]=pt&67108863;if(yt===0)return this.strip();for(c(yt===-1),yt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+yt,yt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},h.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,yt=this._countBits(pt);$=26-yt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var ct=_e.length-it.length,_;if(b!=="mod"){_=new h(null),_.length=ct+1,_.words=new Array(_.length);for(var rt=0;rt<_.length;rt++)_.words[rt]=0}var Ct=_e.clone()._ishlnsubmul(it,1,ct);Ct.negative===0&&(_e=Ct,_&&(_.words[ct]=1));for(var It=ct-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},h.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new h(0),mod:new h(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new h(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new h(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new h(this.modn(s.words[0]))}:this._wordDiv(s,b)},h.prototype.div=function(s){return this.divmod(s,"div",!1).div},h.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},h.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},h.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},h.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},h.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},h.prototype.divn=function(s){return this.clone().idivn(s)},h.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=new h(0),yt=new h(1),ct=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++ct;for(var _=$.clone(),rt=b.clone();!b.isZero();){for(var Ct=0,It=1;!(b.words[0]&It)&&Ct<26;++Ct,It<<=1);if(Ct>0)for(b.iushrn(Ct);Ct-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(rt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||yt.isOdd())&&(pt.iadd(_),yt.isub(rt)),pt.iushrn(1),yt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(yt)):($.isub(b),pt.isub(_e),yt.isub(it))}return{a:pt,b:yt,gcd:$.iushln(ct)}},h.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var yt=0,ct=1;!(b.words[0]&ct)&&yt<26;++yt,ct<<=1);if(yt>0)for(b.iushrn(yt);yt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,rt=1;!($.words[0]&rt)&&_<26;++_,rt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Ct;return b.cmpn(1)===0?Ct=_e:Ct=it,Ct.cmpn(0)<0&&Ct.iadd(s),Ct},h.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},h.prototype.invm=function(s){return this.egcd(s).a.umod(s)},h.prototype.isEven=function(){return(this.words[0]&1)===0},h.prototype.isOdd=function(){return(this.words[0]&1)===1},h.prototype.andln=function(s){return this.words[0]&s},h.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var yt=this.words[pt]|0;yt+=it,it=yt>>>26,yt&=67108863,this.words[pt]=yt}return it!==0&&(this.words[pt]=it,this.length++),this},h.prototype.isZero=function(){return this.length===1&&this.words[0]===0},h.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},h.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},h.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},h.prototype.gtn=function(s){return this.cmpn(s)===1},h.prototype.gt=function(s){return this.cmp(s)===1},h.prototype.gten=function(s){return this.cmpn(s)>=0},h.prototype.gte=function(s){return this.cmp(s)>=0},h.prototype.ltn=function(s){return this.cmpn(s)===-1},h.prototype.lt=function(s){return this.cmp(s)===-1},h.prototype.lten=function(s){return this.cmpn(s)<=0},h.prototype.lte=function(s){return this.cmp(s)<=0},h.prototype.eqn=function(s){return this.cmpn(s)===0},h.prototype.eq=function(s){return this.cmp(s)===0},h.red=function(s){return new Et(s)},h.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},h.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(s){return this.red=s,this},h.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},h.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},h.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},h.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},h.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},h.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},h.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},h.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},h.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Tt(at,s){this.name=at,this.p=new h(s,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Tt.prototype._tmp=function(){var s=new h(null);return s.words=new Array(Math.ceil(this.n/13)),s},Tt.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Tt.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Tt.prototype.imulK=function(s){return s.imul(this.k)};function ft(){Tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(ft,Tt),ft.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var yt=s.words[it]|0;s.words[it-10]=(yt&$)<<4|pt>>>22,pt=yt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},ft.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function _t(){Tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(_t,Tt);function Rt(){Tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Tt);function Mt(){Tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Tt),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},h._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new ft;else if(s==="p224")b=new _t;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function Et(at){if(typeof at=="string"){var s=h._prime(at);this.m=s.p,this.prime=s}else c(at.gtn(1),"modulus must be greater than 1"),this.m=at,this.prime=null}Et.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},Et.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},Et.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},Et.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},Et.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},Et.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},Et.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},Et.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},Et.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},Et.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},Et.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},Et.prototype.isqr=function(s){return this.imul(s,s.clone())},Et.prototype.sqr=function(s){return this.mul(s,s)},Et.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new h(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new h(1).toRed(this),yt=pt.redNeg(),ct=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new h(2*_*_).toRed(this);this.pow(_,ct).cmp(yt)!==0;)_.redIAdd(yt);for(var rt=this.pow(_,_e),Ct=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(rt,new h(1).iushln(Nt-Gt-1));Ct=Ct.redMul(Pt),rt=Pt.redSqr(),It=It.redMul(rt),Nt=Gt}return Ct},Et.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},Et.prototype.pow=function(s,b){if(b.isZero())return new h(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new h(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],yt=0,ct=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var rt=b.words[it],Ct=_-1;Ct>=0;Ct--){var It=rt>>Ct&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&yt===0){ct=0;continue}yt<<=1,yt|=It,ct++,!(ct!==$&&(it!==0||Ct!==0))&&(pt=this.mul(pt,_e[yt]),ct=0,yt=0)}_=26}return pt},Et.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},Et.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},h.mont=function(s){return new kt(s)};function kt(at){Et.call(this,at),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,Et),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new h(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn$3)),bn$3.exports}var utils$2={},hasRequiredUtils$3;function requireUtils$3(){return hasRequiredUtils$3||(hasRequiredUtils$3=1,function(o){var e=o;function a(h,et){if(Array.isArray(h))return h.slice();if(!h)return[];var ot=[];if(typeof h!="string"){for(var st=0;st<h.length;st++)ot[st]=h[st]|0;return ot}if(et==="hex"){h=h.replace(/[^a-z0-9]+/ig,""),h.length%2!==0&&(h="0"+h);for(var st=0;st<h.length;st+=2)ot.push(parseInt(h[st]+h[st+1],16))}else for(var st=0;st<h.length;st++){var lt=h.charCodeAt(st),nt=lt>>8,gt=lt&255;nt?ot.push(nt,gt):ot.push(gt)}return ot}e.toArray=a;function c(h){return h.length===1?"0"+h:h}e.zero2=c;function j(h){for(var et="",ot=0;ot<h.length;ot++)et+=c(h[ot].toString(16));return et}e.toHex=j,e.encode=function(et,ot){return ot==="hex"?j(et):et}}(utils$2)),utils$2}var hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(o){var e=o,a=requireBn$3(),c=requireMinimalisticAssert(),j=requireUtils$3();e.assert=c,e.toArray=j.toArray,e.zero2=j.zero2,e.toHex=j.toHex,e.encode=j.encode;function h(nt,gt,dt){var mt=new Array(Math.max(nt.bitLength(),dt)+1),vt;for(vt=0;vt<mt.length;vt+=1)mt[vt]=0;var tt=1<<gt+1,bt=nt.clone();for(vt=0;vt<mt.length;vt++){var ht,St=bt.andln(tt-1);bt.isOdd()?(St>(tt>>1)-1?ht=(tt>>1)-St:ht=St,bt.isubn(ht)):ht=0,mt[vt]=ht,bt.iushrn(1)}return mt}e.getNAF=h;function et(nt,gt){var dt=[[],[]];nt=nt.clone(),gt=gt.clone();for(var mt=0,vt=0,tt;nt.cmpn(-mt)>0||gt.cmpn(-vt)>0;){var bt=nt.andln(3)+mt&3,ht=gt.andln(3)+vt&3;bt===3&&(bt=-1),ht===3&&(ht=-1);var St;bt&1?(tt=nt.andln(7)+mt&7,(tt===3||tt===5)&&ht===2?St=-bt:St=bt):St=0,dt[0].push(St);var At;ht&1?(tt=gt.andln(7)+vt&7,(tt===3||tt===5)&&bt===2?At=-ht:At=ht):At=0,dt[1].push(At),2*mt===St+1&&(mt=1-mt),2*vt===At+1&&(vt=1-vt),nt.iushrn(1),gt.iushrn(1)}return dt}e.getJSF=et;function ot(nt,gt,dt){var mt="_"+gt;nt.prototype[gt]=function(){return this[mt]!==void 0?this[mt]:this[mt]=dt.call(this)}}e.cachedProperty=ot;function st(nt){return typeof nt=="string"?e.toArray(nt,"hex"):nt}e.parseBytes=st;function lt(nt){return new a(nt,"hex","le")}e.intFromLE=lt}(utils$3)),utils$3}var curve={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var o=requireBn$3(),e=requireUtils$2(),a=e.getNAF,c=e.getJSF,j=e.assert;function h(ot,st){this.type=ot,this.p=new o(st.p,16),this.red=st.prime?o.red(st.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=st.n&&new o(st.n,16),this.g=st.g&&this.pointFromJSON(st.g,st.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var lt=this.n&&this.p.div(this.n);!lt||lt.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=h,h.prototype.point=function(){throw new Error("Not implemented")},h.prototype.validate=function(){throw new Error("Not implemented")},h.prototype._fixedNafMul=function(st,lt){j(st.precomputed);var nt=st._getDoubles(),gt=a(lt,1,this._bitLength),dt=(1<<nt.step+1)-(nt.step%2===0?2:1);dt/=3;var mt=[],vt,tt;for(vt=0;vt<gt.length;vt+=nt.step){tt=0;for(var bt=vt+nt.step-1;bt>=vt;bt--)tt=(tt<<1)+gt[bt];mt.push(tt)}for(var ht=this.jpoint(null,null,null),St=this.jpoint(null,null,null),At=dt;At>0;At--){for(vt=0;vt<mt.length;vt++)tt=mt[vt],tt===At?St=St.mixedAdd(nt.points[vt]):tt===-At&&(St=St.mixedAdd(nt.points[vt].neg()));ht=ht.add(St)}return ht.toP()},h.prototype._wnafMul=function(st,lt){var nt=4,gt=st._getNAFPoints(nt);nt=gt.wnd;for(var dt=gt.points,mt=a(lt,nt,this._bitLength),vt=this.jpoint(null,null,null),tt=mt.length-1;tt>=0;tt--){for(var bt=0;tt>=0&&mt[tt]===0;tt--)bt++;if(tt>=0&&bt++,vt=vt.dblp(bt),tt<0)break;var ht=mt[tt];j(ht!==0),st.type==="affine"?ht>0?vt=vt.mixedAdd(dt[ht-1>>1]):vt=vt.mixedAdd(dt[-ht-1>>1].neg()):ht>0?vt=vt.add(dt[ht-1>>1]):vt=vt.add(dt[-ht-1>>1].neg())}return st.type==="affine"?vt.toP():vt},h.prototype._wnafMulAdd=function(st,lt,nt,gt,dt){var mt=this._wnafT1,vt=this._wnafT2,tt=this._wnafT3,bt=0,ht,St,At;for(ht=0;ht<gt;ht++){At=lt[ht];var Tt=At._getNAFPoints(st);mt[ht]=Tt.wnd,vt[ht]=Tt.points}for(ht=gt-1;ht>=1;ht-=2){var ft=ht-1,_t=ht;if(mt[ft]!==1||mt[_t]!==1){tt[ft]=a(nt[ft],mt[ft],this._bitLength),tt[_t]=a(nt[_t],mt[_t],this._bitLength),bt=Math.max(tt[ft].length,bt),bt=Math.max(tt[_t].length,bt);continue}var Rt=[lt[ft],null,null,lt[_t]];lt[ft].y.cmp(lt[_t].y)===0?(Rt[1]=lt[ft].add(lt[_t]),Rt[2]=lt[ft].toJ().mixedAdd(lt[_t].neg())):lt[ft].y.cmp(lt[_t].y.redNeg())===0?(Rt[1]=lt[ft].toJ().mixedAdd(lt[_t]),Rt[2]=lt[ft].add(lt[_t].neg())):(Rt[1]=lt[ft].toJ().mixedAdd(lt[_t]),Rt[2]=lt[ft].toJ().mixedAdd(lt[_t].neg()));var Mt=[-3,-1,-5,-7,0,7,5,1,3],Et=c(nt[ft],nt[_t]);for(bt=Math.max(Et[0].length,bt),tt[ft]=new Array(bt),tt[_t]=new Array(bt),St=0;St<bt;St++){var kt=Et[0][St]|0,at=Et[1][St]|0;tt[ft][St]=Mt[(kt+1)*3+(at+1)],tt[_t][St]=0,vt[ft]=Rt}}var s=this.jpoint(null,null,null),b=this._wnafT4;for(ht=bt;ht>=0;ht--){for(var $=0;ht>=0;){var _e=!0;for(St=0;St<gt;St++)b[St]=tt[St][ht]|0,b[St]!==0&&(_e=!1);if(!_e)break;$++,ht--}if(ht>=0&&$++,s=s.dblp($),ht<0)break;for(St=0;St<gt;St++){var it=b[St];it!==0&&(it>0?At=vt[St][it-1>>1]:it<0&&(At=vt[St][-it-1>>1].neg()),At.type==="affine"?s=s.mixedAdd(At):s=s.add(At))}}for(ht=0;ht<gt;ht++)vt[ht]=null;return dt?s:s.toP()};function et(ot,st){this.curve=ot,this.type=st,this.precomputed=null}return h.BasePoint=et,et.prototype.eq=function(){throw new Error("Not implemented")},et.prototype.validate=function(){return this.curve.validate(this)},h.prototype.decodePoint=function(st,lt){st=e.toArray(st,lt);var nt=this.p.byteLength();if((st[0]===4||st[0]===6||st[0]===7)&&st.length-1===2*nt){st[0]===6?j(st[st.length-1]%2===0):st[0]===7&&j(st[st.length-1]%2===1);var gt=this.point(st.slice(1,1+nt),st.slice(1+nt,1+2*nt));return gt}else if((st[0]===2||st[0]===3)&&st.length-1===nt)return this.pointFromX(st.slice(1,1+nt),st[0]===3);throw new Error("Unknown point format")},et.prototype.encodeCompressed=function(st){return this.encode(st,!0)},et.prototype._encode=function(st){var lt=this.curve.p.byteLength(),nt=this.getX().toArray("be",lt);return st?[this.getY().isEven()?2:3].concat(nt):[4].concat(nt,this.getY().toArray("be",lt))},et.prototype.encode=function(st,lt){return e.encode(this._encode(lt),st)},et.prototype.precompute=function(st){if(this.precomputed)return this;var lt={doubles:null,naf:null,beta:null};return lt.naf=this._getNAFPoints(8),lt.doubles=this._getDoubles(4,st),lt.beta=this._getBeta(),this.precomputed=lt,this},et.prototype._hasDoubles=function(st){if(!this.precomputed)return!1;var lt=this.precomputed.doubles;return lt?lt.points.length>=Math.ceil((st.bitLength()+1)/lt.step):!1},et.prototype._getDoubles=function(st,lt){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var nt=[this],gt=this,dt=0;dt<lt;dt+=st){for(var mt=0;mt<st;mt++)gt=gt.dbl();nt.push(gt)}return{step:st,points:nt}},et.prototype._getNAFPoints=function(st){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var lt=[this],nt=(1<<st)-1,gt=nt===1?null:this.dbl(),dt=1;dt<nt;dt++)lt[dt]=lt[dt-1].add(gt);return{wnd:st,points:lt}},et.prototype._getBeta=function(){return null},et.prototype.dblp=function(st){for(var lt=this,nt=0;nt<st;nt++)lt=lt.dbl();return lt},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var o=requireUtils$2(),e=requireBn$3(),a=requireInherits_browser(),c=requireBase$1(),j=o.assert;function h(st){c.call(this,"short",st),this.a=new e(st.a,16).toRed(this.red),this.b=new e(st.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(st),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}a(h,c),short=h,h.prototype._getEndomorphism=function(lt){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var nt,gt;if(lt.beta)nt=new e(lt.beta,16).toRed(this.red);else{var dt=this._getEndoRoots(this.p);nt=dt[0].cmp(dt[1])<0?dt[0]:dt[1],nt=nt.toRed(this.red)}if(lt.lambda)gt=new e(lt.lambda,16);else{var mt=this._getEndoRoots(this.n);this.g.mul(mt[0]).x.cmp(this.g.x.redMul(nt))===0?gt=mt[0]:(gt=mt[1],j(this.g.mul(gt).x.cmp(this.g.x.redMul(nt))===0))}var vt;return lt.basis?vt=lt.basis.map(function(tt){return{a:new e(tt.a,16),b:new e(tt.b,16)}}):vt=this._getEndoBasis(gt),{beta:nt,lambda:gt,basis:vt}}},h.prototype._getEndoRoots=function(lt){var nt=lt===this.p?this.red:e.mont(lt),gt=new e(2).toRed(nt).redInvm(),dt=gt.redNeg(),mt=new e(3).toRed(nt).redNeg().redSqrt().redMul(gt),vt=dt.redAdd(mt).fromRed(),tt=dt.redSub(mt).fromRed();return[vt,tt]},h.prototype._getEndoBasis=function(lt){for(var nt=this.n.ushrn(Math.floor(this.n.bitLength()/2)),gt=lt,dt=this.n.clone(),mt=new e(1),vt=new e(0),tt=new e(0),bt=new e(1),ht,St,At,Tt,ft,_t,Rt,Mt=0,Et,kt;gt.cmpn(0)!==0;){var at=dt.div(gt);Et=dt.sub(at.mul(gt)),kt=tt.sub(at.mul(mt));var s=bt.sub(at.mul(vt));if(!At&&Et.cmp(nt)<0)ht=Rt.neg(),St=mt,At=Et.neg(),Tt=kt;else if(At&&++Mt===2)break;Rt=Et,dt=gt,gt=Et,tt=mt,mt=kt,bt=vt,vt=s}ft=Et.neg(),_t=kt;var b=At.sqr().add(Tt.sqr()),$=ft.sqr().add(_t.sqr());return $.cmp(b)>=0&&(ft=ht,_t=St),At.negative&&(At=At.neg(),Tt=Tt.neg()),ft.negative&&(ft=ft.neg(),_t=_t.neg()),[{a:At,b:Tt},{a:ft,b:_t}]},h.prototype._endoSplit=function(lt){var nt=this.endo.basis,gt=nt[0],dt=nt[1],mt=dt.b.mul(lt).divRound(this.n),vt=gt.b.neg().mul(lt).divRound(this.n),tt=mt.mul(gt.a),bt=vt.mul(dt.a),ht=mt.mul(gt.b),St=vt.mul(dt.b),At=lt.sub(tt).sub(bt),Tt=ht.add(St).neg();return{k1:At,k2:Tt}},h.prototype.pointFromX=function(lt,nt){lt=new e(lt,16),lt.red||(lt=lt.toRed(this.red));var gt=lt.redSqr().redMul(lt).redIAdd(lt.redMul(this.a)).redIAdd(this.b),dt=gt.redSqrt();if(dt.redSqr().redSub(gt).cmp(this.zero)!==0)throw new Error("invalid point");var mt=dt.fromRed().isOdd();return(nt&&!mt||!nt&&mt)&&(dt=dt.redNeg()),this.point(lt,dt)},h.prototype.validate=function(lt){if(lt.inf)return!0;var nt=lt.x,gt=lt.y,dt=this.a.redMul(nt),mt=nt.redSqr().redMul(nt).redIAdd(dt).redIAdd(this.b);return gt.redSqr().redISub(mt).cmpn(0)===0},h.prototype._endoWnafMulAdd=function(lt,nt,gt){for(var dt=this._endoWnafT1,mt=this._endoWnafT2,vt=0;vt<lt.length;vt++){var tt=this._endoSplit(nt[vt]),bt=lt[vt],ht=bt._getBeta();tt.k1.negative&&(tt.k1.ineg(),bt=bt.neg(!0)),tt.k2.negative&&(tt.k2.ineg(),ht=ht.neg(!0)),dt[vt*2]=bt,dt[vt*2+1]=ht,mt[vt*2]=tt.k1,mt[vt*2+1]=tt.k2}for(var St=this._wnafMulAdd(1,dt,mt,vt*2,gt),At=0;At<vt*2;At++)dt[At]=null,mt[At]=null;return St};function et(st,lt,nt,gt){c.BasePoint.call(this,st,"affine"),lt===null&&nt===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(lt,16),this.y=new e(nt,16),gt&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}a(et,c.BasePoint),h.prototype.point=function(lt,nt,gt){return new et(this,lt,nt,gt)},h.prototype.pointFromJSON=function(lt,nt){return et.fromJSON(this,lt,nt)},et.prototype._getBeta=function(){if(this.curve.endo){var lt=this.precomputed;if(lt&&lt.beta)return lt.beta;var nt=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(lt){var gt=this.curve,dt=function(mt){return gt.point(mt.x.redMul(gt.endo.beta),mt.y)};lt.beta=nt,nt.precomputed={beta:null,naf:lt.naf&&{wnd:lt.naf.wnd,points:lt.naf.points.map(dt)},doubles:lt.doubles&&{step:lt.doubles.step,points:lt.doubles.points.map(dt)}}}return nt}},et.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},et.fromJSON=function(lt,nt,gt){typeof nt=="string"&&(nt=JSON.parse(nt));var dt=lt.point(nt[0],nt[1],gt);if(!nt[2])return dt;function mt(tt){return lt.point(tt[0],tt[1],gt)}var vt=nt[2];return dt.precomputed={beta:null,doubles:vt.doubles&&{step:vt.doubles.step,points:[dt].concat(vt.doubles.points.map(mt))},naf:vt.naf&&{wnd:vt.naf.wnd,points:[dt].concat(vt.naf.points.map(mt))}},dt},et.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},et.prototype.isInfinity=function(){return this.inf},et.prototype.add=function(lt){if(this.inf)return lt;if(lt.inf)return this;if(this.eq(lt))return this.dbl();if(this.neg().eq(lt))return this.curve.point(null,null);if(this.x.cmp(lt.x)===0)return this.curve.point(null,null);var nt=this.y.redSub(lt.y);nt.cmpn(0)!==0&&(nt=nt.redMul(this.x.redSub(lt.x).redInvm()));var gt=nt.redSqr().redISub(this.x).redISub(lt.x),dt=nt.redMul(this.x.redSub(gt)).redISub(this.y);return this.curve.point(gt,dt)},et.prototype.dbl=function(){if(this.inf)return this;var lt=this.y.redAdd(this.y);if(lt.cmpn(0)===0)return this.curve.point(null,null);var nt=this.curve.a,gt=this.x.redSqr(),dt=lt.redInvm(),mt=gt.redAdd(gt).redIAdd(gt).redIAdd(nt).redMul(dt),vt=mt.redSqr().redISub(this.x.redAdd(this.x)),tt=mt.redMul(this.x.redSub(vt)).redISub(this.y);return this.curve.point(vt,tt)},et.prototype.getX=function(){return this.x.fromRed()},et.prototype.getY=function(){return this.y.fromRed()},et.prototype.mul=function(lt){return lt=new e(lt,16),this.isInfinity()?this:this._hasDoubles(lt)?this.curve._fixedNafMul(this,lt):this.curve.endo?this.curve._endoWnafMulAdd([this],[lt]):this.curve._wnafMul(this,lt)},et.prototype.mulAdd=function(lt,nt,gt){var dt=[this,nt],mt=[lt,gt];return this.curve.endo?this.curve._endoWnafMulAdd(dt,mt):this.curve._wnafMulAdd(1,dt,mt,2)},et.prototype.jmulAdd=function(lt,nt,gt){var dt=[this,nt],mt=[lt,gt];return this.curve.endo?this.curve._endoWnafMulAdd(dt,mt,!0):this.curve._wnafMulAdd(1,dt,mt,2,!0)},et.prototype.eq=function(lt){return this===lt||this.inf===lt.inf&&(this.inf||this.x.cmp(lt.x)===0&&this.y.cmp(lt.y)===0)},et.prototype.neg=function(lt){if(this.inf)return this;var nt=this.curve.point(this.x,this.y.redNeg());if(lt&&this.precomputed){var gt=this.precomputed,dt=function(mt){return mt.neg()};nt.precomputed={naf:gt.naf&&{wnd:gt.naf.wnd,points:gt.naf.points.map(dt)},doubles:gt.doubles&&{step:gt.doubles.step,points:gt.doubles.points.map(dt)}}}return nt},et.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var lt=this.curve.jpoint(this.x,this.y,this.curve.one);return lt};function ot(st,lt,nt,gt){c.BasePoint.call(this,st,"jacobian"),lt===null&&nt===null&&gt===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(lt,16),this.y=new e(nt,16),this.z=new e(gt,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return a(ot,c.BasePoint),h.prototype.jpoint=function(lt,nt,gt){return new ot(this,lt,nt,gt)},ot.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var lt=this.z.redInvm(),nt=lt.redSqr(),gt=this.x.redMul(nt),dt=this.y.redMul(nt).redMul(lt);return this.curve.point(gt,dt)},ot.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},ot.prototype.add=function(lt){if(this.isInfinity())return lt;if(lt.isInfinity())return this;var nt=lt.z.redSqr(),gt=this.z.redSqr(),dt=this.x.redMul(nt),mt=lt.x.redMul(gt),vt=this.y.redMul(nt.redMul(lt.z)),tt=lt.y.redMul(gt.redMul(this.z)),bt=dt.redSub(mt),ht=vt.redSub(tt);if(bt.cmpn(0)===0)return ht.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var St=bt.redSqr(),At=St.redMul(bt),Tt=dt.redMul(St),ft=ht.redSqr().redIAdd(At).redISub(Tt).redISub(Tt),_t=ht.redMul(Tt.redISub(ft)).redISub(vt.redMul(At)),Rt=this.z.redMul(lt.z).redMul(bt);return this.curve.jpoint(ft,_t,Rt)},ot.prototype.mixedAdd=function(lt){if(this.isInfinity())return lt.toJ();if(lt.isInfinity())return this;var nt=this.z.redSqr(),gt=this.x,dt=lt.x.redMul(nt),mt=this.y,vt=lt.y.redMul(nt).redMul(this.z),tt=gt.redSub(dt),bt=mt.redSub(vt);if(tt.cmpn(0)===0)return bt.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var ht=tt.redSqr(),St=ht.redMul(tt),At=gt.redMul(ht),Tt=bt.redSqr().redIAdd(St).redISub(At).redISub(At),ft=bt.redMul(At.redISub(Tt)).redISub(mt.redMul(St)),_t=this.z.redMul(tt);return this.curve.jpoint(Tt,ft,_t)},ot.prototype.dblp=function(lt){if(lt===0)return this;if(this.isInfinity())return this;if(!lt)return this.dbl();var nt;if(this.curve.zeroA||this.curve.threeA){var gt=this;for(nt=0;nt<lt;nt++)gt=gt.dbl();return gt}var dt=this.curve.a,mt=this.curve.tinv,vt=this.x,tt=this.y,bt=this.z,ht=bt.redSqr().redSqr(),St=tt.redAdd(tt);for(nt=0;nt<lt;nt++){var At=vt.redSqr(),Tt=St.redSqr(),ft=Tt.redSqr(),_t=At.redAdd(At).redIAdd(At).redIAdd(dt.redMul(ht)),Rt=vt.redMul(Tt),Mt=_t.redSqr().redISub(Rt.redAdd(Rt)),Et=Rt.redISub(Mt),kt=_t.redMul(Et);kt=kt.redIAdd(kt).redISub(ft);var at=St.redMul(bt);nt+1<lt&&(ht=ht.redMul(ft)),vt=Mt,bt=at,St=kt}return this.curve.jpoint(vt,St.redMul(mt),bt)},ot.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},ot.prototype._zeroDbl=function(){var lt,nt,gt;if(this.zOne){var dt=this.x.redSqr(),mt=this.y.redSqr(),vt=mt.redSqr(),tt=this.x.redAdd(mt).redSqr().redISub(dt).redISub(vt);tt=tt.redIAdd(tt);var bt=dt.redAdd(dt).redIAdd(dt),ht=bt.redSqr().redISub(tt).redISub(tt),St=vt.redIAdd(vt);St=St.redIAdd(St),St=St.redIAdd(St),lt=ht,nt=bt.redMul(tt.redISub(ht)).redISub(St),gt=this.y.redAdd(this.y)}else{var At=this.x.redSqr(),Tt=this.y.redSqr(),ft=Tt.redSqr(),_t=this.x.redAdd(Tt).redSqr().redISub(At).redISub(ft);_t=_t.redIAdd(_t);var Rt=At.redAdd(At).redIAdd(At),Mt=Rt.redSqr(),Et=ft.redIAdd(ft);Et=Et.redIAdd(Et),Et=Et.redIAdd(Et),lt=Mt.redISub(_t).redISub(_t),nt=Rt.redMul(_t.redISub(lt)).redISub(Et),gt=this.y.redMul(this.z),gt=gt.redIAdd(gt)}return this.curve.jpoint(lt,nt,gt)},ot.prototype._threeDbl=function(){var lt,nt,gt;if(this.zOne){var dt=this.x.redSqr(),mt=this.y.redSqr(),vt=mt.redSqr(),tt=this.x.redAdd(mt).redSqr().redISub(dt).redISub(vt);tt=tt.redIAdd(tt);var bt=dt.redAdd(dt).redIAdd(dt).redIAdd(this.curve.a),ht=bt.redSqr().redISub(tt).redISub(tt);lt=ht;var St=vt.redIAdd(vt);St=St.redIAdd(St),St=St.redIAdd(St),nt=bt.redMul(tt.redISub(ht)).redISub(St),gt=this.y.redAdd(this.y)}else{var At=this.z.redSqr(),Tt=this.y.redSqr(),ft=this.x.redMul(Tt),_t=this.x.redSub(At).redMul(this.x.redAdd(At));_t=_t.redAdd(_t).redIAdd(_t);var Rt=ft.redIAdd(ft);Rt=Rt.redIAdd(Rt);var Mt=Rt.redAdd(Rt);lt=_t.redSqr().redISub(Mt),gt=this.y.redAdd(this.z).redSqr().redISub(Tt).redISub(At);var Et=Tt.redSqr();Et=Et.redIAdd(Et),Et=Et.redIAdd(Et),Et=Et.redIAdd(Et),nt=_t.redMul(Rt.redISub(lt)).redISub(Et)}return this.curve.jpoint(lt,nt,gt)},ot.prototype._dbl=function(){var lt=this.curve.a,nt=this.x,gt=this.y,dt=this.z,mt=dt.redSqr().redSqr(),vt=nt.redSqr(),tt=gt.redSqr(),bt=vt.redAdd(vt).redIAdd(vt).redIAdd(lt.redMul(mt)),ht=nt.redAdd(nt);ht=ht.redIAdd(ht);var St=ht.redMul(tt),At=bt.redSqr().redISub(St.redAdd(St)),Tt=St.redISub(At),ft=tt.redSqr();ft=ft.redIAdd(ft),ft=ft.redIAdd(ft),ft=ft.redIAdd(ft);var _t=bt.redMul(Tt).redISub(ft),Rt=gt.redAdd(gt).redMul(dt);return this.curve.jpoint(At,_t,Rt)},ot.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var lt=this.x.redSqr(),nt=this.y.redSqr(),gt=this.z.redSqr(),dt=nt.redSqr(),mt=lt.redAdd(lt).redIAdd(lt),vt=mt.redSqr(),tt=this.x.redAdd(nt).redSqr().redISub(lt).redISub(dt);tt=tt.redIAdd(tt),tt=tt.redAdd(tt).redIAdd(tt),tt=tt.redISub(vt);var bt=tt.redSqr(),ht=dt.redIAdd(dt);ht=ht.redIAdd(ht),ht=ht.redIAdd(ht),ht=ht.redIAdd(ht);var St=mt.redIAdd(tt).redSqr().redISub(vt).redISub(bt).redISub(ht),At=nt.redMul(St);At=At.redIAdd(At),At=At.redIAdd(At);var Tt=this.x.redMul(bt).redISub(At);Tt=Tt.redIAdd(Tt),Tt=Tt.redIAdd(Tt);var ft=this.y.redMul(St.redMul(ht.redISub(St)).redISub(tt.redMul(bt)));ft=ft.redIAdd(ft),ft=ft.redIAdd(ft),ft=ft.redIAdd(ft);var _t=this.z.redAdd(tt).redSqr().redISub(gt).redISub(bt);return this.curve.jpoint(Tt,ft,_t)},ot.prototype.mul=function(lt,nt){return lt=new e(lt,nt),this.curve._wnafMul(this,lt)},ot.prototype.eq=function(lt){if(lt.type==="affine")return this.eq(lt.toJ());if(this===lt)return!0;var nt=this.z.redSqr(),gt=lt.z.redSqr();if(this.x.redMul(gt).redISub(lt.x.redMul(nt)).cmpn(0)!==0)return!1;var dt=nt.redMul(this.z),mt=gt.redMul(lt.z);return this.y.redMul(mt).redISub(lt.y.redMul(dt)).cmpn(0)===0},ot.prototype.eqXToP=function(lt){var nt=this.z.redSqr(),gt=lt.toRed(this.curve.red).redMul(nt);if(this.x.cmp(gt)===0)return!0;for(var dt=lt.clone(),mt=this.curve.redN.redMul(nt);;){if(dt.iadd(this.curve.n),dt.cmp(this.curve.p)>=0)return!1;if(gt.redIAdd(mt),this.x.cmp(gt)===0)return!0}},ot.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},ot.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var o=requireBn$3(),e=requireInherits_browser(),a=requireBase$1(),c=requireUtils$2();function j(et){a.call(this,"mont",et),this.a=new o(et.a,16).toRed(this.red),this.b=new o(et.b,16).toRed(this.red),this.i4=new o(4).toRed(this.red).redInvm(),this.two=new o(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(j,a),mont=j,j.prototype.validate=function(ot){var st=ot.normalize().x,lt=st.redSqr(),nt=lt.redMul(st).redAdd(lt.redMul(this.a)).redAdd(st),gt=nt.redSqrt();return gt.redSqr().cmp(nt)===0};function h(et,ot,st){a.BasePoint.call(this,et,"projective"),ot===null&&st===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new o(ot,16),this.z=new o(st,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(h,a.BasePoint),j.prototype.decodePoint=function(ot,st){return this.point(c.toArray(ot,st),1)},j.prototype.point=function(ot,st){return new h(this,ot,st)},j.prototype.pointFromJSON=function(ot){return h.fromJSON(this,ot)},h.prototype.precompute=function(){},h.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},h.fromJSON=function(ot,st){return new h(ot,st[0],st[1]||ot.one)},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.z.cmpn(0)===0},h.prototype.dbl=function(){var ot=this.x.redAdd(this.z),st=ot.redSqr(),lt=this.x.redSub(this.z),nt=lt.redSqr(),gt=st.redSub(nt),dt=st.redMul(nt),mt=gt.redMul(nt.redAdd(this.curve.a24.redMul(gt)));return this.curve.point(dt,mt)},h.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.diffAdd=function(ot,st){var lt=this.x.redAdd(this.z),nt=this.x.redSub(this.z),gt=ot.x.redAdd(ot.z),dt=ot.x.redSub(ot.z),mt=dt.redMul(lt),vt=gt.redMul(nt),tt=st.z.redMul(mt.redAdd(vt).redSqr()),bt=st.x.redMul(mt.redISub(vt).redSqr());return this.curve.point(tt,bt)},h.prototype.mul=function(ot){for(var st=ot.clone(),lt=this,nt=this.curve.point(null,null),gt=this,dt=[];st.cmpn(0)!==0;st.iushrn(1))dt.push(st.andln(1));for(var mt=dt.length-1;mt>=0;mt--)dt[mt]===0?(lt=lt.diffAdd(nt,gt),nt=nt.dbl()):(nt=lt.diffAdd(nt,gt),lt=lt.dbl());return nt},h.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.eq=function(ot){return this.getX().cmp(ot.getX())===0},h.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var o=requireUtils$2(),e=requireBn$3(),a=requireInherits_browser(),c=requireBase$1(),j=o.assert;function h(ot){this.twisted=(ot.a|0)!==1,this.mOneA=this.twisted&&(ot.a|0)===-1,this.extended=this.mOneA,c.call(this,"edwards",ot),this.a=new e(ot.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(ot.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(ot.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),j(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(ot.c|0)===1}a(h,c),edwards=h,h.prototype._mulA=function(st){return this.mOneA?st.redNeg():this.a.redMul(st)},h.prototype._mulC=function(st){return this.oneC?st:this.c.redMul(st)},h.prototype.jpoint=function(st,lt,nt,gt){return this.point(st,lt,nt,gt)},h.prototype.pointFromX=function(st,lt){st=new e(st,16),st.red||(st=st.toRed(this.red));var nt=st.redSqr(),gt=this.c2.redSub(this.a.redMul(nt)),dt=this.one.redSub(this.c2.redMul(this.d).redMul(nt)),mt=gt.redMul(dt.redInvm()),vt=mt.redSqrt();if(vt.redSqr().redSub(mt).cmp(this.zero)!==0)throw new Error("invalid point");var tt=vt.fromRed().isOdd();return(lt&&!tt||!lt&&tt)&&(vt=vt.redNeg()),this.point(st,vt)},h.prototype.pointFromY=function(st,lt){st=new e(st,16),st.red||(st=st.toRed(this.red));var nt=st.redSqr(),gt=nt.redSub(this.c2),dt=nt.redMul(this.d).redMul(this.c2).redSub(this.a),mt=gt.redMul(dt.redInvm());if(mt.cmp(this.zero)===0){if(lt)throw new Error("invalid point");return this.point(this.zero,st)}var vt=mt.redSqrt();if(vt.redSqr().redSub(mt).cmp(this.zero)!==0)throw new Error("invalid point");return vt.fromRed().isOdd()!==lt&&(vt=vt.redNeg()),this.point(vt,st)},h.prototype.validate=function(st){if(st.isInfinity())return!0;st.normalize();var lt=st.x.redSqr(),nt=st.y.redSqr(),gt=lt.redMul(this.a).redAdd(nt),dt=this.c2.redMul(this.one.redAdd(this.d.redMul(lt).redMul(nt)));return gt.cmp(dt)===0};function et(ot,st,lt,nt,gt){c.BasePoint.call(this,ot,"projective"),st===null&&lt===null&&nt===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(st,16),this.y=new e(lt,16),this.z=nt?new e(nt,16):this.curve.one,this.t=gt&&new e(gt,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return a(et,c.BasePoint),h.prototype.pointFromJSON=function(st){return et.fromJSON(this,st)},h.prototype.point=function(st,lt,nt,gt){return new et(this,st,lt,nt,gt)},et.fromJSON=function(st,lt){return new et(st,lt[0],lt[1],lt[2])},et.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},et.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},et.prototype._extDbl=function(){var st=this.x.redSqr(),lt=this.y.redSqr(),nt=this.z.redSqr();nt=nt.redIAdd(nt);var gt=this.curve._mulA(st),dt=this.x.redAdd(this.y).redSqr().redISub(st).redISub(lt),mt=gt.redAdd(lt),vt=mt.redSub(nt),tt=gt.redSub(lt),bt=dt.redMul(vt),ht=mt.redMul(tt),St=dt.redMul(tt),At=vt.redMul(mt);return this.curve.point(bt,ht,At,St)},et.prototype._projDbl=function(){var st=this.x.redAdd(this.y).redSqr(),lt=this.x.redSqr(),nt=this.y.redSqr(),gt,dt,mt,vt,tt,bt;if(this.curve.twisted){vt=this.curve._mulA(lt);var ht=vt.redAdd(nt);this.zOne?(gt=st.redSub(lt).redSub(nt).redMul(ht.redSub(this.curve.two)),dt=ht.redMul(vt.redSub(nt)),mt=ht.redSqr().redSub(ht).redSub(ht)):(tt=this.z.redSqr(),bt=ht.redSub(tt).redISub(tt),gt=st.redSub(lt).redISub(nt).redMul(bt),dt=ht.redMul(vt.redSub(nt)),mt=ht.redMul(bt))}else vt=lt.redAdd(nt),tt=this.curve._mulC(this.z).redSqr(),bt=vt.redSub(tt).redSub(tt),gt=this.curve._mulC(st.redISub(vt)).redMul(bt),dt=this.curve._mulC(vt).redMul(lt.redISub(nt)),mt=vt.redMul(bt);return this.curve.point(gt,dt,mt)},et.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},et.prototype._extAdd=function(st){var lt=this.y.redSub(this.x).redMul(st.y.redSub(st.x)),nt=this.y.redAdd(this.x).redMul(st.y.redAdd(st.x)),gt=this.t.redMul(this.curve.dd).redMul(st.t),dt=this.z.redMul(st.z.redAdd(st.z)),mt=nt.redSub(lt),vt=dt.redSub(gt),tt=dt.redAdd(gt),bt=nt.redAdd(lt),ht=mt.redMul(vt),St=tt.redMul(bt),At=mt.redMul(bt),Tt=vt.redMul(tt);return this.curve.point(ht,St,Tt,At)},et.prototype._projAdd=function(st){var lt=this.z.redMul(st.z),nt=lt.redSqr(),gt=this.x.redMul(st.x),dt=this.y.redMul(st.y),mt=this.curve.d.redMul(gt).redMul(dt),vt=nt.redSub(mt),tt=nt.redAdd(mt),bt=this.x.redAdd(this.y).redMul(st.x.redAdd(st.y)).redISub(gt).redISub(dt),ht=lt.redMul(vt).redMul(bt),St,At;return this.curve.twisted?(St=lt.redMul(tt).redMul(dt.redSub(this.curve._mulA(gt))),At=vt.redMul(tt)):(St=lt.redMul(tt).redMul(dt.redSub(gt)),At=this.curve._mulC(vt).redMul(tt)),this.curve.point(ht,St,At)},et.prototype.add=function(st){return this.isInfinity()?st:st.isInfinity()?this:this.curve.extended?this._extAdd(st):this._projAdd(st)},et.prototype.mul=function(st){return this._hasDoubles(st)?this.curve._fixedNafMul(this,st):this.curve._wnafMul(this,st)},et.prototype.mulAdd=function(st,lt,nt){return this.curve._wnafMulAdd(1,[this,lt],[st,nt],2,!1)},et.prototype.jmulAdd=function(st,lt,nt){return this.curve._wnafMulAdd(1,[this,lt],[st,nt],2,!0)},et.prototype.normalize=function(){if(this.zOne)return this;var st=this.z.redInvm();return this.x=this.x.redMul(st),this.y=this.y.redMul(st),this.t&&(this.t=this.t.redMul(st)),this.z=this.curve.one,this.zOne=!0,this},et.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},et.prototype.getX=function(){return this.normalize(),this.x.fromRed()},et.prototype.getY=function(){return this.normalize(),this.y.fromRed()},et.prototype.eq=function(st){return this===st||this.getX().cmp(st.getX())===0&&this.getY().cmp(st.getY())===0},et.prototype.eqXToP=function(st){var lt=st.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(lt)===0)return!0;for(var nt=st.clone(),gt=this.curve.redN.redMul(this.z);;){if(nt.iadd(this.curve.n),nt.cmp(this.curve.p)>=0)return!1;if(lt.redIAdd(gt),this.x.cmp(lt)===0)return!0}},et.prototype.toP=et.prototype.normalize,et.prototype.mixedAdd=et.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(o){var e=o;e.base=requireBase$1(),e.short=requireShort(),e.mont=requireMont(),e.edwards=requireEdwards()}(curve)),curve}var curves={},hash={},utils$1={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1;var o=requireMinimalisticAssert(),e=requireInherits_browser();utils$1.inherits=e;function a(s,b){return(s.charCodeAt(b)&64512)!==55296||b<0||b+1>=s.length?!1:(s.charCodeAt(b+1)&64512)===56320}function c(s,b){if(Array.isArray(s))return s.slice();if(!s)return[];var $=[];if(typeof s=="string")if(b){if(b==="hex")for(s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s),it=0;it<s.length;it+=2)$.push(parseInt(s[it]+s[it+1],16))}else for(var _e=0,it=0;it<s.length;it++){var pt=s.charCodeAt(it);pt<128?$[_e++]=pt:pt<2048?($[_e++]=pt>>6|192,$[_e++]=pt&63|128):a(s,it)?(pt=65536+((pt&1023)<<10)+(s.charCodeAt(++it)&1023),$[_e++]=pt>>18|240,$[_e++]=pt>>12&63|128,$[_e++]=pt>>6&63|128,$[_e++]=pt&63|128):($[_e++]=pt>>12|224,$[_e++]=pt>>6&63|128,$[_e++]=pt&63|128)}else for(it=0;it<s.length;it++)$[it]=s[it]|0;return $}utils$1.toArray=c;function j(s){for(var b="",$=0;$<s.length;$++)b+=ot(s[$].toString(16));return b}utils$1.toHex=j;function h(s){var b=s>>>24|s>>>8&65280|s<<8&16711680|(s&255)<<24;return b>>>0}utils$1.htonl=h;function et(s,b){for(var $="",_e=0;_e<s.length;_e++){var it=s[_e];b==="little"&&(it=h(it)),$+=st(it.toString(16))}return $}utils$1.toHex32=et;function ot(s){return s.length===1?"0"+s:s}utils$1.zero2=ot;function st(s){return s.length===7?"0"+s:s.length===6?"00"+s:s.length===5?"000"+s:s.length===4?"0000"+s:s.length===3?"00000"+s:s.length===2?"000000"+s:s.length===1?"0000000"+s:s}utils$1.zero8=st;function lt(s,b,$,_e){var it=$-b;o(it%4===0);for(var pt=new Array(it/4),yt=0,ct=b;yt<pt.length;yt++,ct+=4){var _;_e==="big"?_=s[ct]<<24|s[ct+1]<<16|s[ct+2]<<8|s[ct+3]:_=s[ct+3]<<24|s[ct+2]<<16|s[ct+1]<<8|s[ct],pt[yt]=_>>>0}return pt}utils$1.join32=lt;function nt(s,b){for(var $=new Array(s.length*4),_e=0,it=0;_e<s.length;_e++,it+=4){var pt=s[_e];b==="big"?($[it]=pt>>>24,$[it+1]=pt>>>16&255,$[it+2]=pt>>>8&255,$[it+3]=pt&255):($[it+3]=pt>>>24,$[it+2]=pt>>>16&255,$[it+1]=pt>>>8&255,$[it]=pt&255)}return $}utils$1.split32=nt;function gt(s,b){return s>>>b|s<<32-b}utils$1.rotr32=gt;function dt(s,b){return s<<b|s>>>32-b}utils$1.rotl32=dt;function mt(s,b){return s+b>>>0}utils$1.sum32=mt;function vt(s,b,$){return s+b+$>>>0}utils$1.sum32_3=vt;function tt(s,b,$,_e){return s+b+$+_e>>>0}utils$1.sum32_4=tt;function bt(s,b,$,_e,it){return s+b+$+_e+it>>>0}utils$1.sum32_5=bt;function ht(s,b,$,_e){var it=s[b],pt=s[b+1],yt=_e+pt>>>0,ct=(yt<_e?1:0)+$+it;s[b]=ct>>>0,s[b+1]=yt}utils$1.sum64=ht;function St(s,b,$,_e){var it=b+_e>>>0,pt=(it<b?1:0)+s+$;return pt>>>0}utils$1.sum64_hi=St;function At(s,b,$,_e){var it=b+_e;return it>>>0}utils$1.sum64_lo=At;function Tt(s,b,$,_e,it,pt,yt,ct){var _=0,rt=b;rt=rt+_e>>>0,_+=rt<b?1:0,rt=rt+pt>>>0,_+=rt<pt?1:0,rt=rt+ct>>>0,_+=rt<ct?1:0;var Ct=s+$+it+yt+_;return Ct>>>0}utils$1.sum64_4_hi=Tt;function ft(s,b,$,_e,it,pt,yt,ct){var _=b+_e+pt+ct;return _>>>0}utils$1.sum64_4_lo=ft;function _t(s,b,$,_e,it,pt,yt,ct,_,rt){var Ct=0,It=b;It=It+_e>>>0,Ct+=It<b?1:0,It=It+pt>>>0,Ct+=It<pt?1:0,It=It+ct>>>0,Ct+=It<ct?1:0,It=It+rt>>>0,Ct+=It<rt?1:0;var Nt=s+$+it+yt+_+Ct;return Nt>>>0}utils$1.sum64_5_hi=_t;function Rt(s,b,$,_e,it,pt,yt,ct,_,rt){var Ct=b+_e+pt+ct+rt;return Ct>>>0}utils$1.sum64_5_lo=Rt;function Mt(s,b,$){var _e=b<<32-$|s>>>$;return _e>>>0}utils$1.rotr64_hi=Mt;function Et(s,b,$){var _e=s<<32-$|b>>>$;return _e>>>0}utils$1.rotr64_lo=Et;function kt(s,b,$){return s>>>$}utils$1.shr64_hi=kt;function at(s,b,$){var _e=s<<32-$|b>>>$;return _e>>>0}return utils$1.shr64_lo=at,utils$1}var common$2={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$2;hasRequiredCommon$1=1;var o=requireUtils$1(),e=requireMinimalisticAssert();function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$2.BlockHash=a,a.prototype.update=function(j,h){if(j=o.toArray(j,h),this.pending?this.pending=this.pending.concat(j):this.pending=j,this.pendingTotal+=j.length,this.pending.length>=this._delta8){j=this.pending;var et=j.length%this._delta8;this.pending=j.slice(j.length-et,j.length),this.pending.length===0&&(this.pending=null),j=o.join32(j,0,j.length-et,this.endian);for(var ot=0;ot<j.length;ot+=this._delta32)this._update(j,ot,ot+this._delta32)}return this},a.prototype.digest=function(j){return this.update(this._pad()),e(this.pending===null),this._digest(j)},a.prototype._pad=function(){var j=this.pendingTotal,h=this._delta8,et=h-(j+this.padLength)%h,ot=new Array(et+this.padLength);ot[0]=128;for(var st=1;st<et;st++)ot[st]=0;if(j<<=3,this.endian==="big"){for(var lt=8;lt<this.padLength;lt++)ot[st++]=0;ot[st++]=0,ot[st++]=0,ot[st++]=0,ot[st++]=0,ot[st++]=j>>>24&255,ot[st++]=j>>>16&255,ot[st++]=j>>>8&255,ot[st++]=j&255}else for(ot[st++]=j&255,ot[st++]=j>>>8&255,ot[st++]=j>>>16&255,ot[st++]=j>>>24&255,ot[st++]=0,ot[st++]=0,ot[st++]=0,ot[st++]=0,lt=8;lt<this.padLength;lt++)ot[st++]=0;return ot},common$2}var sha={},common$1={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common$1;hasRequiredCommon=1;var o=requireUtils$1(),e=o.rotr32;function a(nt,gt,dt,mt){if(nt===0)return c(gt,dt,mt);if(nt===1||nt===3)return h(gt,dt,mt);if(nt===2)return j(gt,dt,mt)}common$1.ft_1=a;function c(nt,gt,dt){return nt&gt^~nt&dt}common$1.ch32=c;function j(nt,gt,dt){return nt&gt^nt&dt^gt&dt}common$1.maj32=j;function h(nt,gt,dt){return nt^gt^dt}common$1.p32=h;function et(nt){return e(nt,2)^e(nt,13)^e(nt,22)}common$1.s0_256=et;function ot(nt){return e(nt,6)^e(nt,11)^e(nt,25)}common$1.s1_256=ot;function st(nt){return e(nt,7)^e(nt,18)^nt>>>3}common$1.g0_256=st;function lt(nt){return e(nt,17)^e(nt,19)^nt>>>10}return common$1.g1_256=lt,common$1}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var o=requireUtils$1(),e=requireCommon$1(),a=requireCommon(),c=o.rotl32,j=o.sum32,h=o.sum32_5,et=a.ft_1,ot=e.BlockHash,st=[1518500249,1859775393,2400959708,3395469782];function lt(){if(!(this instanceof lt))return new lt;ot.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return o.inherits(lt,ot),_1=lt,lt.blockSize=512,lt.outSize=160,lt.hmacStrength=80,lt.padLength=64,lt.prototype._update=function(gt,dt){for(var mt=this.W,vt=0;vt<16;vt++)mt[vt]=gt[dt+vt];for(;vt<mt.length;vt++)mt[vt]=c(mt[vt-3]^mt[vt-8]^mt[vt-14]^mt[vt-16],1);var tt=this.h[0],bt=this.h[1],ht=this.h[2],St=this.h[3],At=this.h[4];for(vt=0;vt<mt.length;vt++){var Tt=~~(vt/20),ft=h(c(tt,5),et(Tt,bt,ht,St),At,mt[vt],st[Tt]);At=St,St=ht,ht=c(bt,30),bt=tt,tt=ft}this.h[0]=j(this.h[0],tt),this.h[1]=j(this.h[1],bt),this.h[2]=j(this.h[2],ht),this.h[3]=j(this.h[3],St),this.h[4]=j(this.h[4],At)},lt.prototype._digest=function(gt){return gt==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var o=requireUtils$1(),e=requireCommon$1(),a=requireCommon(),c=requireMinimalisticAssert(),j=o.sum32,h=o.sum32_4,et=o.sum32_5,ot=a.ch32,st=a.maj32,lt=a.s0_256,nt=a.s1_256,gt=a.g0_256,dt=a.g1_256,mt=e.BlockHash,vt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function tt(){if(!(this instanceof tt))return new tt;mt.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=vt,this.W=new Array(64)}return o.inherits(tt,mt),_256=tt,tt.blockSize=512,tt.outSize=256,tt.hmacStrength=192,tt.padLength=64,tt.prototype._update=function(ht,St){for(var At=this.W,Tt=0;Tt<16;Tt++)At[Tt]=ht[St+Tt];for(;Tt<At.length;Tt++)At[Tt]=h(dt(At[Tt-2]),At[Tt-7],gt(At[Tt-15]),At[Tt-16]);var ft=this.h[0],_t=this.h[1],Rt=this.h[2],Mt=this.h[3],Et=this.h[4],kt=this.h[5],at=this.h[6],s=this.h[7];for(c(this.k.length===At.length),Tt=0;Tt<At.length;Tt++){var b=et(s,nt(Et),ot(Et,kt,at),this.k[Tt],At[Tt]),$=j(lt(ft),st(ft,_t,Rt));s=at,at=kt,kt=Et,Et=j(Mt,b),Mt=Rt,Rt=_t,_t=ft,ft=j(b,$)}this.h[0]=j(this.h[0],ft),this.h[1]=j(this.h[1],_t),this.h[2]=j(this.h[2],Rt),this.h[3]=j(this.h[3],Mt),this.h[4]=j(this.h[4],Et),this.h[5]=j(this.h[5],kt),this.h[6]=j(this.h[6],at),this.h[7]=j(this.h[7],s)},tt.prototype._digest=function(ht){return ht==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var o=requireUtils$1(),e=require_256();function a(){if(!(this instanceof a))return new a;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return o.inherits(a,e),_224=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(j){return j==="hex"?o.toHex32(this.h.slice(0,7),"big"):o.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var o=requireUtils$1(),e=requireCommon$1(),a=requireMinimalisticAssert(),c=o.rotr64_hi,j=o.rotr64_lo,h=o.shr64_hi,et=o.shr64_lo,ot=o.sum64,st=o.sum64_hi,lt=o.sum64_lo,nt=o.sum64_4_hi,gt=o.sum64_4_lo,dt=o.sum64_5_hi,mt=o.sum64_5_lo,vt=e.BlockHash,tt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function bt(){if(!(this instanceof bt))return new bt;vt.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=tt,this.W=new Array(160)}o.inherits(bt,vt),_512=bt,bt.blockSize=1024,bt.outSize=512,bt.hmacStrength=192,bt.padLength=128,bt.prototype._prepareBlock=function($,_e){for(var it=this.W,pt=0;pt<32;pt++)it[pt]=$[_e+pt];for(;pt<it.length;pt+=2){var yt=at(it[pt-4],it[pt-3]),ct=s(it[pt-4],it[pt-3]),_=it[pt-14],rt=it[pt-13],Ct=Et(it[pt-30],it[pt-29]),It=kt(it[pt-30],it[pt-29]),Nt=it[pt-32],Ut=it[pt-31];it[pt]=nt(yt,ct,_,rt,Ct,It,Nt,Ut),it[pt+1]=gt(yt,ct,_,rt,Ct,It,Nt,Ut)}},bt.prototype._update=function($,_e){this._prepareBlock($,_e);var it=this.W,pt=this.h[0],yt=this.h[1],ct=this.h[2],_=this.h[3],rt=this.h[4],Ct=this.h[5],It=this.h[6],Nt=this.h[7],Ut=this.h[8],Gt=this.h[9],Pt=this.h[10],qt=this.h[11],Kt=this.h[12],jt=this.h[13],Ht=this.h[14],Bt=this.h[15];a(this.k.length===it.length);for(var Jt=0;Jt<it.length;Jt+=2){var sr=Ht,hr=Bt,Ar=Rt(Ut,Gt),yn=Mt(Ut,Gt),Lr=ht(Ut,Gt,Pt,qt,Kt),wr=St(Ut,Gt,Pt,qt,Kt,jt),En=this.k[Jt],Dr=this.k[Jt+1],Qr=it[Jt],Bn=it[Jt+1],Br=dt(sr,hr,Ar,yn,Lr,wr,En,Dr,Qr,Bn),Gr=mt(sr,hr,Ar,yn,Lr,wr,En,Dr,Qr,Bn);sr=ft(pt,yt),hr=_t(pt,yt),Ar=At(pt,yt,ct,_,rt),yn=Tt(pt,yt,ct,_,rt,Ct);var Dn=st(sr,hr,Ar,yn),Fr=lt(sr,hr,Ar,yn);Ht=Kt,Bt=jt,Kt=Pt,jt=qt,Pt=Ut,qt=Gt,Ut=st(It,Nt,Br,Gr),Gt=lt(Nt,Nt,Br,Gr),It=rt,Nt=Ct,rt=ct,Ct=_,ct=pt,_=yt,pt=st(Br,Gr,Dn,Fr),yt=lt(Br,Gr,Dn,Fr)}ot(this.h,0,pt,yt),ot(this.h,2,ct,_),ot(this.h,4,rt,Ct),ot(this.h,6,It,Nt),ot(this.h,8,Ut,Gt),ot(this.h,10,Pt,qt),ot(this.h,12,Kt,jt),ot(this.h,14,Ht,Bt)},bt.prototype._digest=function($){return $==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")};function ht(b,$,_e,it,pt){var yt=b&_e^~b&pt;return yt<0&&(yt+=4294967296),yt}function St(b,$,_e,it,pt,yt){var ct=$&it^~$&yt;return ct<0&&(ct+=4294967296),ct}function At(b,$,_e,it,pt){var yt=b&_e^b&pt^_e&pt;return yt<0&&(yt+=4294967296),yt}function Tt(b,$,_e,it,pt,yt){var ct=$&it^$&yt^it&yt;return ct<0&&(ct+=4294967296),ct}function ft(b,$){var _e=c(b,$,28),it=c($,b,2),pt=c($,b,7),yt=_e^it^pt;return yt<0&&(yt+=4294967296),yt}function _t(b,$){var _e=j(b,$,28),it=j($,b,2),pt=j($,b,7),yt=_e^it^pt;return yt<0&&(yt+=4294967296),yt}function Rt(b,$){var _e=c(b,$,14),it=c(b,$,18),pt=c($,b,9),yt=_e^it^pt;return yt<0&&(yt+=4294967296),yt}function Mt(b,$){var _e=j(b,$,14),it=j(b,$,18),pt=j($,b,9),yt=_e^it^pt;return yt<0&&(yt+=4294967296),yt}function Et(b,$){var _e=c(b,$,1),it=c(b,$,8),pt=h(b,$,7),yt=_e^it^pt;return yt<0&&(yt+=4294967296),yt}function kt(b,$){var _e=j(b,$,1),it=j(b,$,8),pt=et(b,$,7),yt=_e^it^pt;return yt<0&&(yt+=4294967296),yt}function at(b,$){var _e=c(b,$,19),it=c($,b,29),pt=h(b,$,6),yt=_e^it^pt;return yt<0&&(yt+=4294967296),yt}function s(b,$){var _e=j(b,$,19),it=j($,b,29),pt=et(b,$,6),yt=_e^it^pt;return yt<0&&(yt+=4294967296),yt}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var o=requireUtils$1(),e=require_512();function a(){if(!(this instanceof a))return new a;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return o.inherits(a,e),_384=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(j){return j==="hex"?o.toHex32(this.h.slice(0,12),"big"):o.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var o=requireUtils$1(),e=requireCommon$1(),a=o.rotl32,c=o.sum32,j=o.sum32_3,h=o.sum32_4,et=e.BlockHash;function ot(){if(!(this instanceof ot))return new ot;et.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}o.inherits(ot,et),ripemd.ripemd160=ot,ot.blockSize=512,ot.outSize=160,ot.hmacStrength=192,ot.padLength=64,ot.prototype._update=function(bt,ht){for(var St=this.h[0],At=this.h[1],Tt=this.h[2],ft=this.h[3],_t=this.h[4],Rt=St,Mt=At,Et=Tt,kt=ft,at=_t,s=0;s<80;s++){var b=c(a(h(St,st(s,At,Tt,ft),bt[gt[s]+ht],lt(s)),mt[s]),_t);St=_t,_t=ft,ft=a(Tt,10),Tt=At,At=b,b=c(a(h(Rt,st(79-s,Mt,Et,kt),bt[dt[s]+ht],nt(s)),vt[s]),at),Rt=at,at=kt,kt=a(Et,10),Et=Mt,Mt=b}b=j(this.h[1],Tt,kt),this.h[1]=j(this.h[2],ft,at),this.h[2]=j(this.h[3],_t,Rt),this.h[3]=j(this.h[4],St,Mt),this.h[4]=j(this.h[0],At,Et),this.h[0]=b},ot.prototype._digest=function(bt){return bt==="hex"?o.toHex32(this.h,"little"):o.split32(this.h,"little")};function st(tt,bt,ht,St){return tt<=15?bt^ht^St:tt<=31?bt&ht|~bt&St:tt<=47?(bt|~ht)^St:tt<=63?bt&St|ht&~St:bt^(ht|~St)}function lt(tt){return tt<=15?0:tt<=31?1518500249:tt<=47?1859775393:tt<=63?2400959708:2840853838}function nt(tt){return tt<=15?1352829926:tt<=31?1548603684:tt<=47?1836072691:tt<=63?2053994217:0}var gt=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],dt=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],mt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],vt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var o=requireUtils$1(),e=requireMinimalisticAssert();function a(c,j,h){if(!(this instanceof a))return new a(c,j,h);this.Hash=c,this.blockSize=c.blockSize/8,this.outSize=c.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(j,h))}return hmac=a,a.prototype._init=function(j){j.length>this.blockSize&&(j=new this.Hash().update(j).digest()),e(j.length<=this.blockSize);for(var h=j.length;h<this.blockSize;h++)j.push(0);for(h=0;h<j.length;h++)j[h]^=54;for(this.inner=new this.Hash().update(j),h=0;h<j.length;h++)j[h]^=106;this.outer=new this.Hash().update(j)},a.prototype.update=function(j,h){return this.inner.update(j,h),this},a.prototype.digest=function(j){return this.outer.update(this.inner.digest()),this.outer.digest(j)},hmac}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(o){var e=o;e.utils=requireUtils$1(),e.common=requireCommon$1(),e.sha=requireSha(),e.ripemd=requireRipemd(),e.hmac=requireHmac(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(hash)),hash}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(o){var e=o,a=requireHash(),c=requireCurve(),j=requireUtils$2(),h=j.assert;function et(lt){lt.type==="short"?this.curve=new c.short(lt):lt.type==="edwards"?this.curve=new c.edwards(lt):this.curve=new c.mont(lt),this.g=this.curve.g,this.n=this.curve.n,this.hash=lt.hash,h(this.g.validate(),"Invalid curve"),h(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=et;function ot(lt,nt){Object.defineProperty(e,lt,{configurable:!0,enumerable:!0,get:function(){var gt=new et(nt);return Object.defineProperty(e,lt,{configurable:!0,enumerable:!0,value:gt}),gt}})}ot("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),ot("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),ot("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),ot("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),ot("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),ot("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),ot("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var st;try{st=requireSecp256k1()}catch{st=void 0}ot("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",st]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var o=requireHash(),e=requireUtils$3(),a=requireMinimalisticAssert();function c(j){if(!(this instanceof c))return new c(j);this.hash=j.hash,this.predResist=!!j.predResist,this.outLen=this.hash.outSize,this.minEntropy=j.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var h=e.toArray(j.entropy,j.entropyEnc||"hex"),et=e.toArray(j.nonce,j.nonceEnc||"hex"),ot=e.toArray(j.pers,j.persEnc||"hex");a(h.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(h,et,ot)}return hmacDrbg=c,c.prototype._init=function(h,et,ot){var st=h.concat(et).concat(ot);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var lt=0;lt<this.V.length;lt++)this.K[lt]=0,this.V[lt]=1;this._update(st),this._reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new o.hmac(this.hash,this.K)},c.prototype._update=function(h){var et=this._hmac().update(this.V).update([0]);h&&(et=et.update(h)),this.K=et.digest(),this.V=this._hmac().update(this.V).digest(),h&&(this.K=this._hmac().update(this.V).update([1]).update(h).digest(),this.V=this._hmac().update(this.V).digest())},c.prototype.reseed=function(h,et,ot,st){typeof et!="string"&&(st=ot,ot=et,et=null),h=e.toArray(h,et),ot=e.toArray(ot,st),a(h.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(h.concat(ot||[])),this._reseed=1},c.prototype.generate=function(h,et,ot,st){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof et!="string"&&(st=ot,ot=et,et=null),ot&&(ot=e.toArray(ot,st||"hex"),this._update(ot));for(var lt=[];lt.length<h;)this.V=this._hmac().update(this.V).digest(),lt=lt.concat(this.V);var nt=lt.slice(0,h);return this._update(ot),this._reseed++,e.encode(nt,et)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var o=requireBn$3(),e=requireUtils$2(),a=e.assert;function c(j,h){this.ec=j,this.priv=null,this.pub=null,h.priv&&this._importPrivate(h.priv,h.privEnc),h.pub&&this._importPublic(h.pub,h.pubEnc)}return key$1=c,c.fromPublic=function(h,et,ot){return et instanceof c?et:new c(h,{pub:et,pubEnc:ot})},c.fromPrivate=function(h,et,ot){return et instanceof c?et:new c(h,{priv:et,privEnc:ot})},c.prototype.validate=function(){var h=this.getPublic();return h.isInfinity()?{result:!1,reason:"Invalid public key"}:h.validate()?h.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},c.prototype.getPublic=function(h,et){return typeof h=="string"&&(et=h,h=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),et?this.pub.encode(et,h):this.pub},c.prototype.getPrivate=function(h){return h==="hex"?this.priv.toString(16,2):this.priv},c.prototype._importPrivate=function(h,et){this.priv=new o(h,et||16),this.priv=this.priv.umod(this.ec.curve.n)},c.prototype._importPublic=function(h,et){if(h.x||h.y){this.ec.curve.type==="mont"?a(h.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&a(h.x&&h.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(h.x,h.y);return}this.pub=this.ec.curve.decodePoint(h,et)},c.prototype.derive=function(h){return h.validate()||a(h.validate(),"public point not validated"),h.mul(this.priv).getX()},c.prototype.sign=function(h,et,ot){return this.ec.sign(h,this,et,ot)},c.prototype.verify=function(h,et,ot){return this.ec.verify(h,et,this,void 0,ot)},c.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var o=requireBn$3(),e=requireUtils$2(),a=e.assert;function c(st,lt){if(st instanceof c)return st;this._importDER(st,lt)||(a(st.r&&st.s,"Signature without r or s"),this.r=new o(st.r,16),this.s=new o(st.s,16),st.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=st.recoveryParam)}signature$1=c;function j(){this.place=0}function h(st,lt){var nt=st[lt.place++];if(!(nt&128))return nt;var gt=nt&15;if(gt===0||gt>4||st[lt.place]===0)return!1;for(var dt=0,mt=0,vt=lt.place;mt<gt;mt++,vt++)dt<<=8,dt|=st[vt],dt>>>=0;return dt<=127?!1:(lt.place=vt,dt)}function et(st){for(var lt=0,nt=st.length-1;!st[lt]&&!(st[lt+1]&128)&&lt<nt;)lt++;return lt===0?st:st.slice(lt)}c.prototype._importDER=function(lt,nt){lt=e.toArray(lt,nt);var gt=new j;if(lt[gt.place++]!==48)return!1;var dt=h(lt,gt);if(dt===!1||dt+gt.place!==lt.length||lt[gt.place++]!==2)return!1;var mt=h(lt,gt);if(mt===!1||lt[gt.place]&128)return!1;var vt=lt.slice(gt.place,mt+gt.place);if(gt.place+=mt,lt[gt.place++]!==2)return!1;var tt=h(lt,gt);if(tt===!1||lt.length!==tt+gt.place||lt[gt.place]&128)return!1;var bt=lt.slice(gt.place,tt+gt.place);if(vt[0]===0)if(vt[1]&128)vt=vt.slice(1);else return!1;if(bt[0]===0)if(bt[1]&128)bt=bt.slice(1);else return!1;return this.r=new o(vt),this.s=new o(bt),this.recoveryParam=null,!0};function ot(st,lt){if(lt<128){st.push(lt);return}var nt=1+(Math.log(lt)/Math.LN2>>>3);for(st.push(nt|128);--nt;)st.push(lt>>>(nt<<3)&255);st.push(lt)}return c.prototype.toDER=function(lt){var nt=this.r.toArray(),gt=this.s.toArray();for(nt[0]&128&&(nt=[0].concat(nt)),gt[0]&128&&(gt=[0].concat(gt)),nt=et(nt),gt=et(gt);!gt[0]&&!(gt[1]&128);)gt=gt.slice(1);var dt=[2];ot(dt,nt.length),dt=dt.concat(nt),dt.push(2),ot(dt,gt.length);var mt=dt.concat(gt),vt=[48];return ot(vt,mt.length),vt=vt.concat(mt),e.encode(vt,lt)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var o=requireBn$3(),e=requireHmacDrbg(),a=requireUtils$2(),c=requireCurves(),j=requireBrorand(),h=a.assert,et=requireKey$1(),ot=requireSignature$1();function st(lt){if(!(this instanceof st))return new st(lt);typeof lt=="string"&&(h(Object.prototype.hasOwnProperty.call(c,lt),"Unknown curve "+lt),lt=c[lt]),lt instanceof c.PresetCurve&&(lt={curve:lt}),this.curve=lt.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=lt.curve.g,this.g.precompute(lt.curve.n.bitLength()+1),this.hash=lt.hash||lt.curve.hash}return ec=st,st.prototype.keyPair=function(nt){return new et(this,nt)},st.prototype.keyFromPrivate=function(nt,gt){return et.fromPrivate(this,nt,gt)},st.prototype.keyFromPublic=function(nt,gt){return et.fromPublic(this,nt,gt)},st.prototype.genKeyPair=function(nt){nt||(nt={});for(var gt=new e({hash:this.hash,pers:nt.pers,persEnc:nt.persEnc||"utf8",entropy:nt.entropy||j(this.hash.hmacStrength),entropyEnc:nt.entropy&&nt.entropyEnc||"utf8",nonce:this.n.toArray()}),dt=this.n.byteLength(),mt=this.n.sub(new o(2));;){var vt=new o(gt.generate(dt));if(!(vt.cmp(mt)>0))return vt.iaddn(1),this.keyFromPrivate(vt)}},st.prototype._truncateToN=function(nt,gt,dt){var mt;if(o.isBN(nt)||typeof nt=="number")nt=new o(nt,16),mt=nt.byteLength();else if(typeof nt=="object")mt=nt.length,nt=new o(nt,16);else{var vt=nt.toString();mt=vt.length+1>>>1,nt=new o(vt,16)}typeof dt!="number"&&(dt=mt*8);var tt=dt-this.n.bitLength();return tt>0&&(nt=nt.ushrn(tt)),!gt&&nt.cmp(this.n)>=0?nt.sub(this.n):nt},st.prototype.sign=function(nt,gt,dt,mt){if(typeof dt=="object"&&(mt=dt,dt=null),mt||(mt={}),typeof nt!="string"&&typeof nt!="number"&&!o.isBN(nt)){h(typeof nt=="object"&&nt&&typeof nt.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),h(nt.length>>>0===nt.length);for(var vt=0;vt<nt.length;vt++)h((nt[vt]&255)===nt[vt])}gt=this.keyFromPrivate(gt,dt),nt=this._truncateToN(nt,!1,mt.msgBitLength),h(!nt.isNeg(),"Can not sign a negative message");var tt=this.n.byteLength(),bt=gt.getPrivate().toArray("be",tt),ht=nt.toArray("be",tt);h(new o(ht).eq(nt),"Can not sign message");for(var St=new e({hash:this.hash,entropy:bt,nonce:ht,pers:mt.pers,persEnc:mt.persEnc||"utf8"}),At=this.n.sub(new o(1)),Tt=0;;Tt++){var ft=mt.k?mt.k(Tt):new o(St.generate(this.n.byteLength()));if(ft=this._truncateToN(ft,!0),!(ft.cmpn(1)<=0||ft.cmp(At)>=0)){var _t=this.g.mul(ft);if(!_t.isInfinity()){var Rt=_t.getX(),Mt=Rt.umod(this.n);if(Mt.cmpn(0)!==0){var Et=ft.invm(this.n).mul(Mt.mul(gt.getPrivate()).iadd(nt));if(Et=Et.umod(this.n),Et.cmpn(0)!==0){var kt=(_t.getY().isOdd()?1:0)|(Rt.cmp(Mt)!==0?2:0);return mt.canonical&&Et.cmp(this.nh)>0&&(Et=this.n.sub(Et),kt^=1),new ot({r:Mt,s:Et,recoveryParam:kt})}}}}}},st.prototype.verify=function(nt,gt,dt,mt,vt){vt||(vt={}),nt=this._truncateToN(nt,!1,vt.msgBitLength),dt=this.keyFromPublic(dt,mt),gt=new ot(gt,"hex");var tt=gt.r,bt=gt.s;if(tt.cmpn(1)<0||tt.cmp(this.n)>=0||bt.cmpn(1)<0||bt.cmp(this.n)>=0)return!1;var ht=bt.invm(this.n),St=ht.mul(nt).umod(this.n),At=ht.mul(tt).umod(this.n),Tt;return this.curve._maxwellTrick?(Tt=this.g.jmulAdd(St,dt.getPublic(),At),Tt.isInfinity()?!1:Tt.eqXToP(tt)):(Tt=this.g.mulAdd(St,dt.getPublic(),At),Tt.isInfinity()?!1:Tt.getX().umod(this.n).cmp(tt)===0)},st.prototype.recoverPubKey=function(lt,nt,gt,dt){h((3&gt)===gt,"The recovery param is more than two bits"),nt=new ot(nt,dt);var mt=this.n,vt=new o(lt),tt=nt.r,bt=nt.s,ht=gt&1,St=gt>>1;if(tt.cmp(this.curve.p.umod(this.curve.n))>=0&&St)throw new Error("Unable to find sencond key candinate");St?tt=this.curve.pointFromX(tt.add(this.curve.n),ht):tt=this.curve.pointFromX(tt,ht);var At=nt.r.invm(mt),Tt=mt.sub(vt).mul(At).umod(mt),ft=bt.mul(At).umod(mt);return this.g.mulAdd(Tt,tt,ft)},st.prototype.getKeyRecoveryParam=function(lt,nt,gt,dt){if(nt=new ot(nt,dt),nt.recoveryParam!==null)return nt.recoveryParam;for(var mt=0;mt<4;mt++){var vt;try{vt=this.recoverPubKey(lt,nt,mt)}catch{continue}if(vt.eq(gt))return mt}throw new Error("Unable to find valid recovery factor")},ec}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var o=requireUtils$2(),e=o.assert,a=o.parseBytes,c=o.cachedProperty;function j(h,et){this.eddsa=h,this._secret=a(et.secret),h.isPoint(et.pub)?this._pub=et.pub:this._pubBytes=a(et.pub)}return j.fromPublic=function(et,ot){return ot instanceof j?ot:new j(et,{pub:ot})},j.fromSecret=function(et,ot){return ot instanceof j?ot:new j(et,{secret:ot})},j.prototype.secret=function(){return this._secret},c(j,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),c(j,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),c(j,"privBytes",function(){var et=this.eddsa,ot=this.hash(),st=et.encodingLength-1,lt=ot.slice(0,et.encodingLength);return lt[0]&=248,lt[st]&=127,lt[st]|=64,lt}),c(j,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),c(j,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),c(j,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),j.prototype.sign=function(et){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(et,this)},j.prototype.verify=function(et,ot){return this.eddsa.verify(et,ot,this)},j.prototype.getSecret=function(et){return e(this._secret,"KeyPair is public only"),o.encode(this.secret(),et)},j.prototype.getPublic=function(et){return o.encode(this.pubBytes(),et)},key=j,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var o=requireBn$3(),e=requireUtils$2(),a=e.assert,c=e.cachedProperty,j=e.parseBytes;function h(et,ot){this.eddsa=et,typeof ot!="object"&&(ot=j(ot)),Array.isArray(ot)&&(a(ot.length===et.encodingLength*2,"Signature has invalid size"),ot={R:ot.slice(0,et.encodingLength),S:ot.slice(et.encodingLength)}),a(ot.R&&ot.S,"Signature without R or S"),et.isPoint(ot.R)&&(this._R=ot.R),ot.S instanceof o&&(this._S=ot.S),this._Rencoded=Array.isArray(ot.R)?ot.R:ot.Rencoded,this._Sencoded=Array.isArray(ot.S)?ot.S:ot.Sencoded}return c(h,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),c(h,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),c(h,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),c(h,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),h.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},h.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},signature=h,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var o=requireHash(),e=requireCurves(),a=requireUtils$2(),c=a.assert,j=a.parseBytes,h=requireKey(),et=requireSignature();function ot(st){if(c(st==="ed25519","only tested with ed25519 so far"),!(this instanceof ot))return new ot(st);st=e[st].curve,this.curve=st,this.g=st.g,this.g.precompute(st.n.bitLength()+1),this.pointClass=st.point().constructor,this.encodingLength=Math.ceil(st.n.bitLength()/8),this.hash=o.sha512}return eddsa=ot,ot.prototype.sign=function(lt,nt){lt=j(lt);var gt=this.keyFromSecret(nt),dt=this.hashInt(gt.messagePrefix(),lt),mt=this.g.mul(dt),vt=this.encodePoint(mt),tt=this.hashInt(vt,gt.pubBytes(),lt).mul(gt.priv()),bt=dt.add(tt).umod(this.curve.n);return this.makeSignature({R:mt,S:bt,Rencoded:vt})},ot.prototype.verify=function(lt,nt,gt){if(lt=j(lt),nt=this.makeSignature(nt),nt.S().gte(nt.eddsa.curve.n)||nt.S().isNeg())return!1;var dt=this.keyFromPublic(gt),mt=this.hashInt(nt.Rencoded(),dt.pubBytes(),lt),vt=this.g.mul(nt.S()),tt=nt.R().add(dt.pub().mul(mt));return tt.eq(vt)},ot.prototype.hashInt=function(){for(var lt=this.hash(),nt=0;nt<arguments.length;nt++)lt.update(arguments[nt]);return a.intFromLE(lt.digest()).umod(this.curve.n)},ot.prototype.keyFromPublic=function(lt){return h.fromPublic(this,lt)},ot.prototype.keyFromSecret=function(lt){return h.fromSecret(this,lt)},ot.prototype.makeSignature=function(lt){return lt instanceof et?lt:new et(this,lt)},ot.prototype.encodePoint=function(lt){var nt=lt.getY().toArray("le",this.encodingLength);return nt[this.encodingLength-1]|=lt.getX().isOdd()?128:0,nt},ot.prototype.decodePoint=function(lt){lt=a.parseBytes(lt);var nt=lt.length-1,gt=lt.slice(0,nt).concat(lt[nt]&-129),dt=(lt[nt]&128)!==0,mt=a.intFromLE(gt);return this.curve.pointFromY(mt,dt)},ot.prototype.encodeInt=function(lt){return lt.toArray("le",this.encodingLength)},ot.prototype.decodeInt=function(lt){return a.intFromLE(lt)},ot.prototype.isPoint=function(lt){return lt instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(o){var e=o;e.version=require$$0$1.version,e.utils=requireUtils$2(),e.rand=requireBrorand(),e.curve=requireCurve(),e.curves=requireCurves(),e.ec=requireEc(),e.eddsa=requireEddsa()}(elliptic)),elliptic}var asn1$1={},asn1={},bn$2={exports:{}};bn$2.exports;var hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(o){(function(e,a){function c(at,s){if(!at)throw new Error(s||"Assertion failed")}function j(at,s){at.super_=s;var b=function(){};b.prototype=s.prototype,at.prototype=new b,at.prototype.constructor=at}function h(at,s,b){if(h.isBN(at))return at;this.negative=0,this.words=null,this.length=0,this.red=null,at!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(at||0,s||10,b||"be"))}typeof e=="object"?e.exports=h:a.BN=h,h.BN=h,h.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}h.isBN=function(s){return s instanceof h?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===h.wordSize&&Array.isArray(s.words)},h.max=function(s,b){return s.cmp(b)>0?s:b},h.min=function(s,b){return s.cmp(b)<0?s:b},h.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},h.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},h.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,yt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);return this.strip()};function ot(at,s){var b=at.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(at,s,b){var $=ot(at,b);return b-1>=s&&($|=ot(at,b-1)<<4),$}h.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,yt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8;else{var ct=s.length-b;for(_e=ct%2===0?b+1:b;_e<s.length;_e+=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8}this.strip()};function lt(at,s,b,$){for(var _e=0,it=Math.min(at.length,b),pt=s;pt<it;pt++){var yt=at.charCodeAt(pt)-48;_e*=$,yt>=49?_e+=yt-49+10:yt>=17?_e+=yt-17+10:_e+=yt}return _e}h.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,yt=pt%_e,ct=Math.min(pt,pt-yt)+$,_=0,rt=$;rt<ct;rt+=_e)_=lt(s,rt,rt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(yt!==0){var Ct=1;for(_=lt(s,rt,s.length,b),rt=0;rt<yt;rt++)Ct*=b;this.imuln(Ct),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},h.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},h.prototype.clone=function(){var s=new h(null);return this.copy(s),s},h.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},h.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var nt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],dt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var yt=this.words[pt],ct=((yt<<_e|it)&16777215).toString(16);it=yt>>>24-_e&16777215,_e+=2,_e>=26&&(_e-=26,pt--),it!==0||pt!==this.length-1?$=nt[6-ct.length]+ct+$:$=ct+$}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],rt=dt[s];$="";var Ct=this.clone();for(Ct.negative=0;!Ct.isZero();){var It=Ct.modn(rt).toString(s);Ct=Ct.idivn(rt),Ct.isZero()?$=It+$:$=nt[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},h.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},h.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",yt=new s(it),ct,_,rt=this.clone();if(pt){for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[_]=ct;for(;_<it;_++)yt[_]=0}else{for(_=0;_<it-_e;_++)yt[_]=0;for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[it-_-1]=ct}return yt},Math.clz32?h.prototype._countBits=function(s){return 32-Math.clz32(s)}:h.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},h.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},h.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function mt(at){for(var s=new Array(at.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(at.words[$]&1<<_e)>>>_e}return s}h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},h.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return this.negative!==0},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},h.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},h.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},h.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},h.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},h.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},h.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},h.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},h.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},h.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},h.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},h.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},h.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},h.prototype.notn=function(s){return this.clone().inotn(s)},h.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},h.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},h.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},h.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,yt=0;yt<it.length;yt++)b=(_e.words[yt]|0)-(it.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;for(;pt!==0&&yt<_e.length;yt++)b=(_e.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;if(pt===0&&yt<_e.length&&_e!==this)for(;yt<_e.length;yt++)this.words[yt]=_e.words[yt];return this.length=Math.max(this.length,yt),_e!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(s){return this.clone().isub(s)};function vt(at,s,b){b.negative=s.negative^at.negative;var $=at.length+s.length|0;b.length=$,$=$-1|0;var _e=at.words[0]|0,it=s.words[0]|0,pt=_e*it,yt=pt&67108863,ct=pt/67108864|0;b.words[0]=yt;for(var _=1;_<$;_++){for(var rt=ct>>>26,Ct=ct&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-at.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=at.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Ct,rt+=pt/67108864|0,Ct=pt&67108863}b.words[_]=Ct|0,ct=rt|0}return ct!==0?b.words[_]=ct|0:b.length--,b.strip()}var tt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,yt=0,ct,_,rt,Ct=_e[0]|0,It=Ct&8191,Nt=Ct>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,yn=_e[5]|0,Lr=yn&8191,wr=yn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Bn=_e[7]|0,Br=Bn&8191,Gr=Bn>>>13,Dn=_e[8]|0,Fr=Dn&8191,_i=Dn>>>13,Gn=_e[9]|0,Wt=Gn&8191,Lt=Gn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,hn=it[3]|0,Nr=hn&8191,zr=hn>>>13,kn=it[4]|0,Kr=kn&8191,nn=kn>>>13,Qn=it[5]|0,Zr=Qn&8191,on=Qn>>>13,Zn=it[6]|0,en=Zn&8191,ln=Zn>>>13,eo=it[7]|0,$t=eo&8191,or=eo>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Rn=it[9]|0,Ur=Rn&8191,tn=Rn>>>13;$.negative=s.negative^b.negative,$.length=19,ct=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,rt=Math.imul(Nt,ar);var Un=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,ct=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,rt=Math.imul(Pt,ar),ct=ct+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,rt=rt+Math.imul(Nt,Rr)|0;var Hn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,ct=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,rt=Math.imul(jt,ar),ct=ct+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,rt=rt+Math.imul(Pt,Rr)|0,ct=ct+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,rt=rt+Math.imul(Nt,yr)|0;var so=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(so>>>26)|0,so&=67108863,ct=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,rt=Math.imul(Jt,ar),ct=ct+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,rt=rt+Math.imul(jt,Rr)|0,ct=ct+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,rt=rt+Math.imul(Pt,yr)|0,ct=ct+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,rt=rt+Math.imul(Nt,zr)|0;var uo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(uo>>>26)|0,uo&=67108863,ct=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,rt=Math.imul(Ar,ar),ct=ct+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,rt=rt+Math.imul(Jt,Rr)|0,ct=ct+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,rt=rt+Math.imul(jt,yr)|0,ct=ct+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,rt=rt+Math.imul(Pt,zr)|0,ct=ct+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,rt=rt+Math.imul(Nt,nn)|0;var io=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(io>>>26)|0,io&=67108863,ct=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,rt=Math.imul(wr,ar),ct=ct+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,rt=rt+Math.imul(Ar,Rr)|0,ct=ct+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,rt=rt+Math.imul(Jt,yr)|0,ct=ct+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,rt=rt+Math.imul(jt,zr)|0,ct=ct+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,rt=rt+Math.imul(Pt,nn)|0,ct=ct+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,rt=rt+Math.imul(Nt,on)|0;var mo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,ct=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,rt=Math.imul(Qr,ar),ct=ct+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,rt=rt+Math.imul(wr,Rr)|0,ct=ct+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,rt=rt+Math.imul(Ar,yr)|0,ct=ct+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,rt=rt+Math.imul(Jt,zr)|0,ct=ct+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,rt=rt+Math.imul(jt,nn)|0,ct=ct+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,rt=rt+Math.imul(Pt,on)|0,ct=ct+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,rt=rt+Math.imul(Nt,ln)|0;var ao=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,ct=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,rt=Math.imul(Gr,ar),ct=ct+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,rt=rt+Math.imul(Qr,Rr)|0,ct=ct+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,rt=rt+Math.imul(wr,yr)|0,ct=ct+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,rt=rt+Math.imul(Ar,zr)|0,ct=ct+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,rt=rt+Math.imul(Jt,nn)|0,ct=ct+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,rt=rt+Math.imul(jt,on)|0,ct=ct+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,rt=rt+Math.imul(Pt,ln)|0,ct=ct+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,rt=rt+Math.imul(Nt,or)|0;var go=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,ct=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,rt=Math.imul(_i,ar),ct=ct+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,rt=rt+Math.imul(Gr,Rr)|0,ct=ct+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,rt=rt+Math.imul(Qr,yr)|0,ct=ct+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,rt=rt+Math.imul(wr,zr)|0,ct=ct+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,rt=rt+Math.imul(Ar,nn)|0,ct=ct+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,rt=rt+Math.imul(Jt,on)|0,ct=ct+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,rt=rt+Math.imul(jt,ln)|0,ct=ct+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,rt=rt+Math.imul(Pt,or)|0,ct=ct+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,rt=rt+Math.imul(Nt,Hr)|0;var po=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(po>>>26)|0,po&=67108863,ct=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,rt=Math.imul(Lt,ar),ct=ct+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,rt=rt+Math.imul(_i,Rr)|0,ct=ct+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,rt=rt+Math.imul(Gr,yr)|0,ct=ct+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,rt=rt+Math.imul(Qr,zr)|0,ct=ct+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,rt=rt+Math.imul(wr,nn)|0,ct=ct+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,rt=rt+Math.imul(Ar,on)|0,ct=ct+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,rt=rt+Math.imul(Jt,ln)|0,ct=ct+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,rt=rt+Math.imul(jt,or)|0,ct=ct+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,rt=rt+Math.imul(Pt,Hr)|0,ct=ct+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,rt=rt+Math.imul(Nt,tn)|0;var yo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(yo>>>26)|0,yo&=67108863,ct=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,rt=Math.imul(Lt,Rr),ct=ct+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,rt=rt+Math.imul(_i,yr)|0,ct=ct+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,rt=rt+Math.imul(Gr,zr)|0,ct=ct+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,rt=rt+Math.imul(Qr,nn)|0,ct=ct+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,rt=rt+Math.imul(wr,on)|0,ct=ct+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,rt=rt+Math.imul(Ar,ln)|0,ct=ct+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,rt=rt+Math.imul(Jt,or)|0,ct=ct+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,rt=rt+Math.imul(jt,Hr)|0,ct=ct+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,rt=rt+Math.imul(Pt,tn)|0;var wo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(wo>>>26)|0,wo&=67108863,ct=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,rt=Math.imul(Lt,yr),ct=ct+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,rt=rt+Math.imul(_i,zr)|0,ct=ct+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,rt=rt+Math.imul(Gr,nn)|0,ct=ct+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,rt=rt+Math.imul(Qr,on)|0,ct=ct+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,rt=rt+Math.imul(wr,ln)|0,ct=ct+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,rt=rt+Math.imul(Ar,or)|0,ct=ct+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,rt=rt+Math.imul(Jt,Hr)|0,ct=ct+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,rt=rt+Math.imul(jt,tn)|0;var ur=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,ct=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,rt=Math.imul(Lt,zr),ct=ct+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,rt=rt+Math.imul(_i,nn)|0,ct=ct+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,rt=rt+Math.imul(Gr,on)|0,ct=ct+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,rt=rt+Math.imul(Qr,ln)|0,ct=ct+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,rt=rt+Math.imul(wr,or)|0,ct=ct+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,rt=rt+Math.imul(Ar,Hr)|0,ct=ct+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,rt=rt+Math.imul(Jt,tn)|0;var Cr=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ct=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,rt=Math.imul(Lt,nn),ct=ct+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,rt=rt+Math.imul(_i,on)|0,ct=ct+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,rt=rt+Math.imul(Gr,ln)|0,ct=ct+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,rt=rt+Math.imul(Qr,or)|0,ct=ct+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,rt=rt+Math.imul(wr,Hr)|0,ct=ct+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,rt=rt+Math.imul(Ar,tn)|0;var $r=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,ct=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,rt=Math.imul(Lt,on),ct=ct+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,rt=rt+Math.imul(_i,ln)|0,ct=ct+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,rt=rt+Math.imul(Gr,or)|0,ct=ct+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,rt=rt+Math.imul(Qr,Hr)|0,ct=ct+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,rt=rt+Math.imul(wr,tn)|0;var dn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,ct=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,rt=Math.imul(Lt,ln),ct=ct+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,rt=rt+Math.imul(_i,or)|0,ct=ct+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,rt=rt+Math.imul(Gr,Hr)|0,ct=ct+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,rt=rt+Math.imul(Qr,tn)|0;var rn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,ct=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,rt=Math.imul(Lt,or),ct=ct+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,rt=rt+Math.imul(_i,Hr)|0,ct=ct+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,rt=rt+Math.imul(Gr,tn)|0;var An=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(An>>>26)|0,An&=67108863,ct=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,rt=Math.imul(Lt,Hr),ct=ct+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,rt=rt+Math.imul(_i,tn)|0;var Pn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,ct=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,rt=Math.imul(Lt,tn);var Tn=(yt+ct|0)+((_&8191)<<13)|0;return yt=(rt+(_>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,pt[0]=Un,pt[1]=Hn,pt[2]=so,pt[3]=uo,pt[4]=io,pt[5]=mo,pt[6]=ao,pt[7]=go,pt[8]=po,pt[9]=yo,pt[10]=wo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=An,pt[17]=Pn,pt[18]=Tn,yt!==0&&(pt[19]=yt,$.length++),$};Math.imul||(tt=vt);function bt(at,s,b){b.negative=s.negative^at.negative,b.length=at.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var yt=$&67108863,ct=Math.min(it,s.length-1),_=Math.max(0,it-at.length+1);_<=ct;_++){var rt=it-_,Ct=at.words[rt]|0,It=s.words[_]|0,Nt=Ct*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+yt|0,yt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=yt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(at,s,b){var $=new St;return $.mulp(at,s,b)}h.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=tt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function St(at,s){this.x=at,this.y=s}St.prototype.makeRBT=function(s){for(var b=new Array(s),$=h.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},St.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},St.prototype.permute=function(s,b,$,_e,it,pt){for(var yt=0;yt<pt;yt++)_e[yt]=b[s[yt]],it[yt]=$[s[yt]]},St.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var yt=1;yt<it;yt<<=1)for(var ct=yt<<1,_=Math.cos(2*Math.PI/ct),rt=Math.sin(2*Math.PI/ct),Ct=0;Ct<it;Ct+=ct)for(var It=_,Nt=rt,Ut=0;Ut<yt;Ut++){var Gt=$[Ct+Ut],Pt=_e[Ct+Ut],qt=$[Ct+Ut+yt],Kt=_e[Ct+Ut+yt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Ct+Ut]=Gt+qt,_e[Ct+Ut]=Pt+Kt,$[Ct+Ut+yt]=Gt-qt,_e[Ct+Ut+yt]=Pt-Kt,Ut!==ct&&(jt=_*It-rt*Nt,Nt=_*Nt+rt*It,It=jt)}},St.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},St.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},St.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},St.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},St.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},St.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),yt=new Array(_e),ct=new Array(_e),_=new Array(_e),rt=new Array(_e),Ct=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,yt,_e),this.convert13b(b.words,b.length,rt,_e),this.transform(yt,pt,ct,_,_e,it),this.transform(rt,pt,Ct,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=ct[Ut]*Ct[Ut]-_[Ut]*It[Ut];_[Ut]=ct[Ut]*It[Ut]+_[Ut]*Ct[Ut],ct[Ut]=Gt}return this.conjugate(ct,_,_e),this.transform(ct,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},h.prototype.mul=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},h.prototype.mulf=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},h.prototype.imul=function(s){return this.clone().mulTo(s,this)},h.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},h.prototype.muln=function(s){return this.clone().imuln(s)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(s){var b=mt(s);if(b.length===0)return new h(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},h.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var yt=this.words[it]&_e,ct=(this.words[it]|0)-yt<<b;this.words[it]=ct|pt,pt=yt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},h.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},h.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),yt=67108863^67108863>>>it<<it,ct=$;if(_e-=pt,_e=Math.max(0,_e),ct){for(var _=0;_<pt;_++)ct.words[_]=this.words[_];ct.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var rt=0;for(_=this.length-1;_>=0&&(rt!==0||_>=_e);_--){var Ct=this.words[_]|0;this.words[_]=rt<<26-it|Ct>>>it,rt=Ct&yt}return ct&&rt!==0&&(ct.words[ct.length++]=rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},h.prototype.shln=function(s){return this.clone().ishln(s)},h.prototype.ushln=function(s){return this.clone().iushln(s)},h.prototype.shrn=function(s){return this.clone().ishrn(s)},h.prototype.ushrn=function(s){return this.clone().iushrn(s)},h.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},h.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},h.prototype.maskn=function(s){return this.clone().imaskn(s)},h.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},h.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},h.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},h.prototype.addn=function(s){return this.clone().iaddn(s)},h.prototype.subn=function(s){return this.clone().isubn(s)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,yt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+yt;var ct=(s.words[it]|0)*b;pt-=ct&67108863,yt=(pt>>26)-(ct/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+yt,yt=pt>>26,this.words[it+$]=pt&67108863;if(yt===0)return this.strip();for(c(yt===-1),yt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+yt,yt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},h.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,yt=this._countBits(pt);$=26-yt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var ct=_e.length-it.length,_;if(b!=="mod"){_=new h(null),_.length=ct+1,_.words=new Array(_.length);for(var rt=0;rt<_.length;rt++)_.words[rt]=0}var Ct=_e.clone()._ishlnsubmul(it,1,ct);Ct.negative===0&&(_e=Ct,_&&(_.words[ct]=1));for(var It=ct-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},h.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new h(0),mod:new h(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new h(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new h(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new h(this.modn(s.words[0]))}:this._wordDiv(s,b)},h.prototype.div=function(s){return this.divmod(s,"div",!1).div},h.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},h.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},h.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},h.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},h.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},h.prototype.divn=function(s){return this.clone().idivn(s)},h.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=new h(0),yt=new h(1),ct=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++ct;for(var _=$.clone(),rt=b.clone();!b.isZero();){for(var Ct=0,It=1;!(b.words[0]&It)&&Ct<26;++Ct,It<<=1);if(Ct>0)for(b.iushrn(Ct);Ct-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(rt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||yt.isOdd())&&(pt.iadd(_),yt.isub(rt)),pt.iushrn(1),yt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(yt)):($.isub(b),pt.isub(_e),yt.isub(it))}return{a:pt,b:yt,gcd:$.iushln(ct)}},h.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var yt=0,ct=1;!(b.words[0]&ct)&&yt<26;++yt,ct<<=1);if(yt>0)for(b.iushrn(yt);yt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,rt=1;!($.words[0]&rt)&&_<26;++_,rt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Ct;return b.cmpn(1)===0?Ct=_e:Ct=it,Ct.cmpn(0)<0&&Ct.iadd(s),Ct},h.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},h.prototype.invm=function(s){return this.egcd(s).a.umod(s)},h.prototype.isEven=function(){return(this.words[0]&1)===0},h.prototype.isOdd=function(){return(this.words[0]&1)===1},h.prototype.andln=function(s){return this.words[0]&s},h.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var yt=this.words[pt]|0;yt+=it,it=yt>>>26,yt&=67108863,this.words[pt]=yt}return it!==0&&(this.words[pt]=it,this.length++),this},h.prototype.isZero=function(){return this.length===1&&this.words[0]===0},h.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},h.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},h.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},h.prototype.gtn=function(s){return this.cmpn(s)===1},h.prototype.gt=function(s){return this.cmp(s)===1},h.prototype.gten=function(s){return this.cmpn(s)>=0},h.prototype.gte=function(s){return this.cmp(s)>=0},h.prototype.ltn=function(s){return this.cmpn(s)===-1},h.prototype.lt=function(s){return this.cmp(s)===-1},h.prototype.lten=function(s){return this.cmpn(s)<=0},h.prototype.lte=function(s){return this.cmp(s)<=0},h.prototype.eqn=function(s){return this.cmpn(s)===0},h.prototype.eq=function(s){return this.cmp(s)===0},h.red=function(s){return new Et(s)},h.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},h.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(s){return this.red=s,this},h.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},h.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},h.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},h.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},h.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},h.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},h.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},h.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},h.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Tt(at,s){this.name=at,this.p=new h(s,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Tt.prototype._tmp=function(){var s=new h(null);return s.words=new Array(Math.ceil(this.n/13)),s},Tt.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Tt.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Tt.prototype.imulK=function(s){return s.imul(this.k)};function ft(){Tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(ft,Tt),ft.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var yt=s.words[it]|0;s.words[it-10]=(yt&$)<<4|pt>>>22,pt=yt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},ft.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function _t(){Tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(_t,Tt);function Rt(){Tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Tt);function Mt(){Tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Tt),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},h._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new ft;else if(s==="p224")b=new _t;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function Et(at){if(typeof at=="string"){var s=h._prime(at);this.m=s.p,this.prime=s}else c(at.gtn(1),"modulus must be greater than 1"),this.m=at,this.prime=null}Et.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},Et.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},Et.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},Et.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},Et.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},Et.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},Et.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},Et.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},Et.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},Et.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},Et.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},Et.prototype.isqr=function(s){return this.imul(s,s.clone())},Et.prototype.sqr=function(s){return this.mul(s,s)},Et.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new h(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new h(1).toRed(this),yt=pt.redNeg(),ct=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new h(2*_*_).toRed(this);this.pow(_,ct).cmp(yt)!==0;)_.redIAdd(yt);for(var rt=this.pow(_,_e),Ct=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(rt,new h(1).iushln(Nt-Gt-1));Ct=Ct.redMul(Pt),rt=Pt.redSqr(),It=It.redMul(rt),Nt=Gt}return Ct},Et.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},Et.prototype.pow=function(s,b){if(b.isZero())return new h(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new h(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],yt=0,ct=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var rt=b.words[it],Ct=_-1;Ct>=0;Ct--){var It=rt>>Ct&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&yt===0){ct=0;continue}yt<<=1,yt|=It,ct++,!(ct!==$&&(it!==0||Ct!==0))&&(pt=this.mul(pt,_e[yt]),ct=0,yt=0)}_=26}return pt},Et.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},Et.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},h.mont=function(s){return new kt(s)};function kt(at){Et.call(this,at),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,Et),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new h(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn$2)),bn$2.exports}var api$1={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(o,e){if(o.indexOf)return o.indexOf(e);for(var a=0;a<o.length;a++)if(o[a]===e)return a;return-1},Object_keys=function(o){if(Object.keys)return Object.keys(o);var e=[];for(var a in o)e.push(a);return e},forEach=function(o,e){if(o.forEach)return o.forEach(e);for(var a=0;a<o.length;a++)e(o[a],a,o)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(o,e,a){Object.defineProperty(o,e,{writable:!0,enumerable:!1,configurable:!0,value:a})}}catch{return function(e,a,c){e[a]=c}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(o){if(!(o instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var a=e.contentWindow,c=a.eval,j=a.execScript;!c&&j&&(j.call(a,"null"),c=a.eval),forEach(Object_keys(o),function(ot){a[ot]=o[ot]}),forEach(globals,function(ot){o[ot]&&(a[ot]=o[ot])});var h=Object_keys(a),et=c.call(a,this.code);return forEach(Object_keys(a),function(ot){(ot in o||indexOf(h,ot)===-1)&&(o[ot]=a[ot])}),forEach(globals,function(ot){ot in o||defineProp(o,ot,a[ot])}),document.body.removeChild(e),et},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(o){var e=Script.createContext(o),a=this.runInContext(e);return o&&forEach(Object_keys(e),function(c){o[c]=e[c]}),a},forEach(Object_keys(Script.prototype),function(o){exports[o]=Script[o]=function(e){var a=Script(e);return a[o].apply(a,[].slice.call(arguments,1))}}),exports.isContext=function(o){return o instanceof Context},exports.createScript=function(o){return exports.Script(o)},exports.createContext=Script.createContext=function(o){var e=new Context;return typeof o=="object"&&forEach(Object_keys(o),function(a){e[a]=o[a]}),e}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(o){var e=requireAsn1$1(),a=requireInherits_browser(),c=o;c.define=function(et,ot){return new j(et,ot)};function j(h,et){this.name=h,this.body=et,this.decoders={},this.encoders={}}j.prototype._createNamed=function(et){var ot;try{ot=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{ot=function(lt){this._initNamed(lt)}}return a(ot,et),ot.prototype._initNamed=function(lt){et.call(this,lt)},new ot(this)},j.prototype._getDecoder=function(et){return et=et||"der",this.decoders.hasOwnProperty(et)||(this.decoders[et]=this._createNamed(e.decoders[et])),this.decoders[et]},j.prototype.decode=function(et,ot,st){return this._getDecoder(ot).decode(et,st)},j.prototype._getEncoder=function(et){return et=et||"der",this.encoders.hasOwnProperty(et)||(this.encoders[et]=this._createNamed(e.encoders[et])),this.encoders[et]},j.prototype.encode=function(et,ot,st){return this._getEncoder(ot).encode(et,st)}}(api$1)),api$1}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var o=requireInherits_browser();function e(c){this._reporterState={obj:null,path:[],options:c||{},errors:[]}}reporter.Reporter=e,e.prototype.isError=function(j){return j instanceof a},e.prototype.save=function(){var j=this._reporterState;return{obj:j.obj,pathLen:j.path.length}},e.prototype.restore=function(j){var h=this._reporterState;h.obj=j.obj,h.path=h.path.slice(0,j.pathLen)},e.prototype.enterKey=function(j){return this._reporterState.path.push(j)},e.prototype.exitKey=function(j){var h=this._reporterState;h.path=h.path.slice(0,j-1)},e.prototype.leaveKey=function(j,h,et){var ot=this._reporterState;this.exitKey(j),ot.obj!==null&&(ot.obj[h]=et)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){var j=this._reporterState,h=j.obj;return j.obj={},h},e.prototype.leaveObject=function(j){var h=this._reporterState,et=h.obj;return h.obj=j,et},e.prototype.error=function(j){var h,et=this._reporterState,ot=j instanceof a;if(ot?h=j:h=new a(et.path.map(function(st){return"["+JSON.stringify(st)+"]"}).join(""),j.message||j,j.stack),!et.options.partial)throw h;return ot||et.errors.push(h),h},e.prototype.wrapResult=function(j){var h=this._reporterState;return h.options.partial?{result:this.isError(j)?null:j,errors:h.errors}:j};function a(c,j){this.path=c,this.rethrow(j)}return o(a,Error),a.prototype.rethrow=function(j){if(this.message=j+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(h){this.stack=h.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var o=requireInherits_browser(),e=requireBase().Reporter,a=require$$1$2.Buffer;function c(h,et){if(e.call(this,et),!a.isBuffer(h)){this.error("Input not Buffer");return}this.base=h,this.offset=0,this.length=h.length}o(c,e),buffer.DecoderBuffer=c,c.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},c.prototype.restore=function(et){var ot=new c(this.base);return ot.offset=et.offset,ot.length=this.offset,this.offset=et.offset,e.prototype.restore.call(this,et.reporter),ot},c.prototype.isEmpty=function(){return this.offset===this.length},c.prototype.readUInt8=function(et){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(et||"DecoderBuffer overrun")},c.prototype.skip=function(et,ot){if(!(this.offset+et<=this.length))return this.error(ot||"DecoderBuffer overrun");var st=new c(this.base);return st._reporterState=this._reporterState,st.offset=this.offset,st.length=this.offset+et,this.offset+=et,st},c.prototype.raw=function(et){return this.base.slice(et?et.offset:this.offset,this.length)};function j(h,et){if(Array.isArray(h))this.length=0,this.value=h.map(function(ot){return ot instanceof j||(ot=new j(ot,et)),this.length+=ot.length,ot},this);else if(typeof h=="number"){if(!(0<=h&&h<=255))return et.error("non-byte EncoderBuffer value");this.value=h,this.length=1}else if(typeof h=="string")this.value=h,this.length=a.byteLength(h);else if(a.isBuffer(h))this.value=h,this.length=h.length;else return et.error("Unsupported type: "+typeof h)}return buffer.EncoderBuffer=j,j.prototype.join=function(et,ot){return et||(et=new a(this.length)),ot||(ot=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(st){st.join(et,ot),ot+=st.length}):(typeof this.value=="number"?et[ot]=this.value:typeof this.value=="string"?et.write(this.value,ot):a.isBuffer(this.value)&&this.value.copy(et,ot),ot+=this.length)),et},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var o=requireBase().Reporter,e=requireBase().EncoderBuffer,a=requireBase().DecoderBuffer,c=requireMinimalisticAssert(),j=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],h=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(j),et=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function ot(lt,nt){var gt={};this._baseState=gt,gt.enc=lt,gt.parent=nt||null,gt.children=null,gt.tag=null,gt.args=null,gt.reverseArgs=null,gt.choice=null,gt.optional=!1,gt.any=!1,gt.obj=!1,gt.use=null,gt.useDecoder=null,gt.key=null,gt.default=null,gt.explicit=null,gt.implicit=null,gt.contains=null,gt.parent||(gt.children=[],this._wrap())}node=ot;var st=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return ot.prototype.clone=function(){var nt=this._baseState,gt={};st.forEach(function(mt){gt[mt]=nt[mt]});var dt=new this.constructor(gt.parent);return dt._baseState=gt,dt},ot.prototype._wrap=function(){var nt=this._baseState;h.forEach(function(gt){this[gt]=function(){var mt=new this.constructor(this);return nt.children.push(mt),mt[gt].apply(mt,arguments)}},this)},ot.prototype._init=function(nt){var gt=this._baseState;c(gt.parent===null),nt.call(this),gt.children=gt.children.filter(function(dt){return dt._baseState.parent===this},this),c.equal(gt.children.length,1,"Root node can have only one child")},ot.prototype._useArgs=function(nt){var gt=this._baseState,dt=nt.filter(function(mt){return mt instanceof this.constructor},this);nt=nt.filter(function(mt){return!(mt instanceof this.constructor)},this),dt.length!==0&&(c(gt.children===null),gt.children=dt,dt.forEach(function(mt){mt._baseState.parent=this},this)),nt.length!==0&&(c(gt.args===null),gt.args=nt,gt.reverseArgs=nt.map(function(mt){if(typeof mt!="object"||mt.constructor!==Object)return mt;var vt={};return Object.keys(mt).forEach(function(tt){tt==(tt|0)&&(tt|=0);var bt=mt[tt];vt[bt]=tt}),vt}))},et.forEach(function(lt){ot.prototype[lt]=function(){var gt=this._baseState;throw new Error(lt+" not implemented for encoding: "+gt.enc)}}),j.forEach(function(lt){ot.prototype[lt]=function(){var gt=this._baseState,dt=Array.prototype.slice.call(arguments);return c(gt.tag===null),gt.tag=lt,this._useArgs(dt),this}}),ot.prototype.use=function(nt){c(nt);var gt=this._baseState;return c(gt.use===null),gt.use=nt,this},ot.prototype.optional=function(){var nt=this._baseState;return nt.optional=!0,this},ot.prototype.def=function(nt){var gt=this._baseState;return c(gt.default===null),gt.default=nt,gt.optional=!0,this},ot.prototype.explicit=function(nt){var gt=this._baseState;return c(gt.explicit===null&&gt.implicit===null),gt.explicit=nt,this},ot.prototype.implicit=function(nt){var gt=this._baseState;return c(gt.explicit===null&&gt.implicit===null),gt.implicit=nt,this},ot.prototype.obj=function(){var nt=this._baseState,gt=Array.prototype.slice.call(arguments);return nt.obj=!0,gt.length!==0&&this._useArgs(gt),this},ot.prototype.key=function(nt){var gt=this._baseState;return c(gt.key===null),gt.key=nt,this},ot.prototype.any=function(){var nt=this._baseState;return nt.any=!0,this},ot.prototype.choice=function(nt){var gt=this._baseState;return c(gt.choice===null),gt.choice=nt,this._useArgs(Object.keys(nt).map(function(dt){return nt[dt]})),this},ot.prototype.contains=function(nt){var gt=this._baseState;return c(gt.use===null),gt.contains=nt,this},ot.prototype._decode=function(nt,gt){var dt=this._baseState;if(dt.parent===null)return nt.wrapResult(dt.children[0]._decode(nt,gt));var mt=dt.default,vt=!0,tt=null;if(dt.key!==null&&(tt=nt.enterKey(dt.key)),dt.optional){var bt=null;if(dt.explicit!==null?bt=dt.explicit:dt.implicit!==null?bt=dt.implicit:dt.tag!==null&&(bt=dt.tag),bt===null&&!dt.any){var ht=nt.save();try{dt.choice===null?this._decodeGeneric(dt.tag,nt,gt):this._decodeChoice(nt,gt),vt=!0}catch{vt=!1}nt.restore(ht)}else if(vt=this._peekTag(nt,bt,dt.any),nt.isError(vt))return vt}var St;if(dt.obj&&vt&&(St=nt.enterObject()),vt){if(dt.explicit!==null){var At=this._decodeTag(nt,dt.explicit);if(nt.isError(At))return At;nt=At}var Tt=nt.offset;if(dt.use===null&&dt.choice===null){if(dt.any)var ht=nt.save();var ft=this._decodeTag(nt,dt.implicit!==null?dt.implicit:dt.tag,dt.any);if(nt.isError(ft))return ft;dt.any?mt=nt.raw(ht):nt=ft}if(gt&&gt.track&&dt.tag!==null&&gt.track(nt.path(),Tt,nt.length,"tagged"),gt&&gt.track&&dt.tag!==null&&gt.track(nt.path(),nt.offset,nt.length,"content"),dt.any?mt=mt:dt.choice===null?mt=this._decodeGeneric(dt.tag,nt,gt):mt=this._decodeChoice(nt,gt),nt.isError(mt))return mt;if(!dt.any&&dt.choice===null&&dt.children!==null&&dt.children.forEach(function(Mt){Mt._decode(nt,gt)}),dt.contains&&(dt.tag==="octstr"||dt.tag==="bitstr")){var _t=new a(mt);mt=this._getUse(dt.contains,nt._reporterState.obj)._decode(_t,gt)}}return dt.obj&&vt&&(mt=nt.leaveObject(St)),dt.key!==null&&(mt!==null||vt===!0)?nt.leaveKey(tt,dt.key,mt):tt!==null&&nt.exitKey(tt),mt},ot.prototype._decodeGeneric=function(nt,gt,dt){var mt=this._baseState;return nt==="seq"||nt==="set"?null:nt==="seqof"||nt==="setof"?this._decodeList(gt,nt,mt.args[0],dt):/str$/.test(nt)?this._decodeStr(gt,nt,dt):nt==="objid"&&mt.args?this._decodeObjid(gt,mt.args[0],mt.args[1],dt):nt==="objid"?this._decodeObjid(gt,null,null,dt):nt==="gentime"||nt==="utctime"?this._decodeTime(gt,nt,dt):nt==="null_"?this._decodeNull(gt,dt):nt==="bool"?this._decodeBool(gt,dt):nt==="objDesc"?this._decodeStr(gt,nt,dt):nt==="int"||nt==="enum"?this._decodeInt(gt,mt.args&&mt.args[0],dt):mt.use!==null?this._getUse(mt.use,gt._reporterState.obj)._decode(gt,dt):gt.error("unknown tag: "+nt)},ot.prototype._getUse=function(nt,gt){var dt=this._baseState;return dt.useDecoder=this._use(nt,gt),c(dt.useDecoder._baseState.parent===null),dt.useDecoder=dt.useDecoder._baseState.children[0],dt.implicit!==dt.useDecoder._baseState.implicit&&(dt.useDecoder=dt.useDecoder.clone(),dt.useDecoder._baseState.implicit=dt.implicit),dt.useDecoder},ot.prototype._decodeChoice=function(nt,gt){var dt=this._baseState,mt=null,vt=!1;return Object.keys(dt.choice).some(function(tt){var bt=nt.save(),ht=dt.choice[tt];try{var St=ht._decode(nt,gt);if(nt.isError(St))return!1;mt={type:tt,value:St},vt=!0}catch{return nt.restore(bt),!1}return!0},this),vt?mt:nt.error("Choice not matched")},ot.prototype._createEncoderBuffer=function(nt){return new e(nt,this.reporter)},ot.prototype._encode=function(nt,gt,dt){var mt=this._baseState;if(!(mt.default!==null&&mt.default===nt)){var vt=this._encodeValue(nt,gt,dt);if(vt!==void 0&&!this._skipDefault(vt,gt,dt))return vt}},ot.prototype._encodeValue=function(nt,gt,dt){var mt=this._baseState;if(mt.parent===null)return mt.children[0]._encode(nt,gt||new o);var ht=null;if(this.reporter=gt,mt.optional&&nt===void 0)if(mt.default!==null)nt=mt.default;else return;var vt=null,tt=!1;if(mt.any)ht=this._createEncoderBuffer(nt);else if(mt.choice)ht=this._encodeChoice(nt,gt);else if(mt.contains)vt=this._getUse(mt.contains,dt)._encode(nt,gt),tt=!0;else if(mt.children)vt=mt.children.map(function(Tt){if(Tt._baseState.tag==="null_")return Tt._encode(null,gt,nt);if(Tt._baseState.key===null)return gt.error("Child should have a key");var ft=gt.enterKey(Tt._baseState.key);if(typeof nt!="object")return gt.error("Child expected, but input is not object");var _t=Tt._encode(nt[Tt._baseState.key],gt,nt);return gt.leaveKey(ft),_t},this).filter(function(Tt){return Tt}),vt=this._createEncoderBuffer(vt);else if(mt.tag==="seqof"||mt.tag==="setof"){if(!(mt.args&&mt.args.length===1))return gt.error("Too many args for : "+mt.tag);if(!Array.isArray(nt))return gt.error("seqof/setof, but data is not Array");var bt=this.clone();bt._baseState.implicit=null,vt=this._createEncoderBuffer(nt.map(function(Tt){var ft=this._baseState;return this._getUse(ft.args[0],nt)._encode(Tt,gt)},bt))}else mt.use!==null?ht=this._getUse(mt.use,dt)._encode(nt,gt):(vt=this._encodePrimitive(mt.tag,nt),tt=!0);var ht;if(!mt.any&&mt.choice===null){var St=mt.implicit!==null?mt.implicit:mt.tag,At=mt.implicit===null?"universal":"context";St===null?mt.use===null&&gt.error("Tag could be omitted only for .use()"):mt.use===null&&(ht=this._encodeComposite(St,tt,At,vt))}return mt.explicit!==null&&(ht=this._encodeComposite(mt.explicit,!1,"context",ht)),ht},ot.prototype._encodeChoice=function(nt,gt){var dt=this._baseState,mt=dt.choice[nt.type];return mt||c(!1,nt.type+" not found in "+JSON.stringify(Object.keys(dt.choice))),mt._encode(nt.value,gt)},ot.prototype._encodePrimitive=function(nt,gt){var dt=this._baseState;if(/str$/.test(nt))return this._encodeStr(gt,nt);if(nt==="objid"&&dt.args)return this._encodeObjid(gt,dt.reverseArgs[0],dt.args[1]);if(nt==="objid")return this._encodeObjid(gt,null,null);if(nt==="gentime"||nt==="utctime")return this._encodeTime(gt,nt);if(nt==="null_")return this._encodeNull();if(nt==="int"||nt==="enum")return this._encodeInt(gt,dt.args&&dt.reverseArgs[0]);if(nt==="bool")return this._encodeBool(gt);if(nt==="objDesc")return this._encodeStr(gt,nt);throw new Error("Unsupported tag: "+nt)},ot.prototype._isNumstr=function(nt){return/^[0-9 ]*$/.test(nt)},ot.prototype._isPrintstr=function(nt){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(nt)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(o){var e=o;e.Reporter=requireReporter().Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()}(base)),base}var constants$1={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(o){var e=requireConstants();o.tagClass={0:"universal",1:"application",2:"context",3:"private"},o.tagClassByName=e._reverse(o.tagClass),o.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},o.tagByName=e._reverse(o.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(o){var e=o;e._reverse=function(c){var j={};return Object.keys(c).forEach(function(h){(h|0)==h&&(h=h|0);var et=c[h];j[et]=h}),j},e.der=requireDer$2()}(constants$1)),constants$1}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var o=requireInherits_browser(),e=requireAsn1$1(),a=e.base,c=e.bignum,j=e.constants.der;function h(lt){this.enc="der",this.name=lt.name,this.entity=lt,this.tree=new et,this.tree._init(lt.body)}der_1$1=h,h.prototype.decode=function(nt,gt){return nt instanceof a.DecoderBuffer||(nt=new a.DecoderBuffer(nt,gt)),this.tree._decode(nt,gt)};function et(lt){a.Node.call(this,"der",lt)}o(et,a.Node),et.prototype._peekTag=function(nt,gt,dt){if(nt.isEmpty())return!1;var mt=nt.save(),vt=ot(nt,'Failed to peek tag: "'+gt+'"');return nt.isError(vt)?vt:(nt.restore(mt),vt.tag===gt||vt.tagStr===gt||vt.tagStr+"of"===gt||dt)},et.prototype._decodeTag=function(nt,gt,dt){var mt=ot(nt,'Failed to decode tag of "'+gt+'"');if(nt.isError(mt))return mt;var vt=st(nt,mt.primitive,'Failed to get length of "'+gt+'"');if(nt.isError(vt))return vt;if(!dt&&mt.tag!==gt&&mt.tagStr!==gt&&mt.tagStr+"of"!==gt)return nt.error('Failed to match tag: "'+gt+'"');if(mt.primitive||vt!==null)return nt.skip(vt,'Failed to match body of: "'+gt+'"');var tt=nt.save(),bt=this._skipUntilEnd(nt,'Failed to skip indefinite length body: "'+this.tag+'"');return nt.isError(bt)?bt:(vt=nt.offset-tt.offset,nt.restore(tt),nt.skip(vt,'Failed to match body of: "'+gt+'"'))},et.prototype._skipUntilEnd=function(nt,gt){for(;;){var dt=ot(nt,gt);if(nt.isError(dt))return dt;var mt=st(nt,dt.primitive,gt);if(nt.isError(mt))return mt;var vt;if(dt.primitive||mt!==null?vt=nt.skip(mt):vt=this._skipUntilEnd(nt,gt),nt.isError(vt))return vt;if(dt.tagStr==="end")break}},et.prototype._decodeList=function(nt,gt,dt,mt){for(var vt=[];!nt.isEmpty();){var tt=this._peekTag(nt,"end");if(nt.isError(tt))return tt;var bt=dt.decode(nt,"der",mt);if(nt.isError(bt)&&tt)break;vt.push(bt)}return vt},et.prototype._decodeStr=function(nt,gt){if(gt==="bitstr"){var dt=nt.readUInt8();return nt.isError(dt)?dt:{unused:dt,data:nt.raw()}}else if(gt==="bmpstr"){var mt=nt.raw();if(mt.length%2===1)return nt.error("Decoding of string type: bmpstr length mismatch");for(var vt="",tt=0;tt<mt.length/2;tt++)vt+=String.fromCharCode(mt.readUInt16BE(tt*2));return vt}else if(gt==="numstr"){var bt=nt.raw().toString("ascii");return this._isNumstr(bt)?bt:nt.error("Decoding of string type: numstr unsupported characters")}else{if(gt==="octstr")return nt.raw();if(gt==="objDesc")return nt.raw();if(gt==="printstr"){var ht=nt.raw().toString("ascii");return this._isPrintstr(ht)?ht:nt.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(gt)?nt.raw().toString():nt.error("Decoding of string type: "+gt+" unsupported")}},et.prototype._decodeObjid=function(nt,gt,dt){for(var mt,vt=[],tt=0;!nt.isEmpty();){var bt=nt.readUInt8();tt<<=7,tt|=bt&127,bt&128||(vt.push(tt),tt=0)}bt&128&&vt.push(tt);var ht=vt[0]/40|0,St=vt[0]%40;if(dt?mt=vt:mt=[ht,St].concat(vt.slice(1)),gt){var At=gt[mt.join(" ")];At===void 0&&(At=gt[mt.join(".")]),At!==void 0&&(mt=At)}return mt},et.prototype._decodeTime=function(nt,gt){var dt=nt.raw().toString();if(gt==="gentime")var mt=dt.slice(0,4)|0,vt=dt.slice(4,6)|0,tt=dt.slice(6,8)|0,bt=dt.slice(8,10)|0,ht=dt.slice(10,12)|0,St=dt.slice(12,14)|0;else if(gt==="utctime"){var mt=dt.slice(0,2)|0,vt=dt.slice(2,4)|0,tt=dt.slice(4,6)|0,bt=dt.slice(6,8)|0,ht=dt.slice(8,10)|0,St=dt.slice(10,12)|0;mt<70?mt=2e3+mt:mt=1900+mt}else return nt.error("Decoding "+gt+" time is not supported yet");return Date.UTC(mt,vt-1,tt,bt,ht,St,0)},et.prototype._decodeNull=function(nt){return null},et.prototype._decodeBool=function(nt){var gt=nt.readUInt8();return nt.isError(gt)?gt:gt!==0},et.prototype._decodeInt=function(nt,gt){var dt=nt.raw(),mt=new c(dt);return gt&&(mt=gt[mt.toString(10)]||mt),mt},et.prototype._use=function(nt,gt){return typeof nt=="function"&&(nt=nt(gt)),nt._getDecoder("der").tree};function ot(lt,nt){var gt=lt.readUInt8(nt);if(lt.isError(gt))return gt;var dt=j.tagClass[gt>>6],mt=(gt&32)===0;if((gt&31)===31){var vt=gt;for(gt=0;(vt&128)===128;){if(vt=lt.readUInt8(nt),lt.isError(vt))return vt;gt<<=7,gt|=vt&127}}else gt&=31;var tt=j.tag[gt];return{cls:dt,primitive:mt,tag:gt,tagStr:tt}}function st(lt,nt,gt){var dt=lt.readUInt8(gt);if(lt.isError(dt))return dt;if(!nt&&dt===128)return null;if(!(dt&128))return dt;var mt=dt&127;if(mt>4)return lt.error("length octect is too long");dt=0;for(var vt=0;vt<mt;vt++){dt<<=8;var tt=lt.readUInt8(gt);if(lt.isError(tt))return tt;dt|=tt}return dt}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var o=requireInherits_browser(),e=require$$1$2.Buffer,a=requireDer$1();function c(j){a.call(this,j),this.enc="pem"}return o(c,a),pem$1=c,c.prototype.decode=function(h,et){for(var ot=h.toString().split(/[\r\n]+/g),st=et.label.toUpperCase(),lt=/^-----(BEGIN|END) ([^-]+)-----$/,nt=-1,gt=-1,dt=0;dt<ot.length;dt++){var mt=ot[dt].match(lt);if(mt!==null&&mt[2]===st)if(nt===-1){if(mt[1]!=="BEGIN")break;nt=dt}else{if(mt[1]!=="END")break;gt=dt;break}}if(nt===-1||gt===-1)throw new Error("PEM section not found for: "+st);var vt=ot.slice(nt+1,gt).join("");vt.replace(/[^a-z0-9\+\/=]+/gi,"");var tt=new e(vt,"base64");return a.prototype.decode.call(this,tt,et)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(o){var e=o;e.der=requireDer$1(),e.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var o=requireInherits_browser(),e=require$$1$2.Buffer,a=requireAsn1$1(),c=a.base,j=a.constants.der;function h(lt){this.enc="der",this.name=lt.name,this.entity=lt,this.tree=new et,this.tree._init(lt.body)}der_1=h,h.prototype.encode=function(nt,gt){return this.tree._encode(nt,gt).join()};function et(lt){c.Node.call(this,"der",lt)}o(et,c.Node),et.prototype._encodeComposite=function(nt,gt,dt,mt){var vt=st(nt,gt,dt,this.reporter);if(mt.length<128){var ht=new e(2);return ht[0]=vt,ht[1]=mt.length,this._createEncoderBuffer([ht,mt])}for(var tt=1,bt=mt.length;bt>=256;bt>>=8)tt++;var ht=new e(2+tt);ht[0]=vt,ht[1]=128|tt;for(var bt=1+tt,St=mt.length;St>0;bt--,St>>=8)ht[bt]=St&255;return this._createEncoderBuffer([ht,mt])},et.prototype._encodeStr=function(nt,gt){if(gt==="bitstr")return this._createEncoderBuffer([nt.unused|0,nt.data]);if(gt==="bmpstr"){for(var dt=new e(nt.length*2),mt=0;mt<nt.length;mt++)dt.writeUInt16BE(nt.charCodeAt(mt),mt*2);return this._createEncoderBuffer(dt)}else return gt==="numstr"?this._isNumstr(nt)?this._createEncoderBuffer(nt):this.reporter.error("Encoding of string type: numstr supports only digits and space"):gt==="printstr"?this._isPrintstr(nt)?this._createEncoderBuffer(nt):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(gt)?this._createEncoderBuffer(nt):gt==="objDesc"?this._createEncoderBuffer(nt):this.reporter.error("Encoding of string type: "+gt+" unsupported")},et.prototype._encodeObjid=function(nt,gt,dt){if(typeof nt=="string"){if(!gt)return this.reporter.error("string objid given, but no values map found");if(!gt.hasOwnProperty(nt))return this.reporter.error("objid not found in values map");nt=gt[nt].split(/[\s\.]+/g);for(var mt=0;mt<nt.length;mt++)nt[mt]|=0}else if(Array.isArray(nt)){nt=nt.slice();for(var mt=0;mt<nt.length;mt++)nt[mt]|=0}if(!Array.isArray(nt))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(nt));if(!dt){if(nt[1]>=40)return this.reporter.error("Second objid identifier OOB");nt.splice(0,2,nt[0]*40+nt[1])}for(var vt=0,mt=0;mt<nt.length;mt++){var tt=nt[mt];for(vt++;tt>=128;tt>>=7)vt++}for(var bt=new e(vt),ht=bt.length-1,mt=nt.length-1;mt>=0;mt--){var tt=nt[mt];for(bt[ht--]=tt&127;(tt>>=7)>0;)bt[ht--]=128|tt&127}return this._createEncoderBuffer(bt)};function ot(lt){return lt<10?"0"+lt:lt}et.prototype._encodeTime=function(nt,gt){var dt,mt=new Date(nt);return gt==="gentime"?dt=[ot(mt.getFullYear()),ot(mt.getUTCMonth()+1),ot(mt.getUTCDate()),ot(mt.getUTCHours()),ot(mt.getUTCMinutes()),ot(mt.getUTCSeconds()),"Z"].join(""):gt==="utctime"?dt=[ot(mt.getFullYear()%100),ot(mt.getUTCMonth()+1),ot(mt.getUTCDate()),ot(mt.getUTCHours()),ot(mt.getUTCMinutes()),ot(mt.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+gt+" time is not supported yet"),this._encodeStr(dt,"octstr")},et.prototype._encodeNull=function(){return this._createEncoderBuffer("")},et.prototype._encodeInt=function(nt,gt){if(typeof nt=="string"){if(!gt)return this.reporter.error("String int or enum given, but no values map");if(!gt.hasOwnProperty(nt))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(nt));nt=gt[nt]}if(typeof nt!="number"&&!e.isBuffer(nt)){var dt=nt.toArray();!nt.sign&&dt[0]&128&&dt.unshift(0),nt=new e(dt)}if(e.isBuffer(nt)){var mt=nt.length;nt.length===0&&mt++;var tt=new e(mt);return nt.copy(tt),nt.length===0&&(tt[0]=0),this._createEncoderBuffer(tt)}if(nt<128)return this._createEncoderBuffer(nt);if(nt<256)return this._createEncoderBuffer([0,nt]);for(var mt=1,vt=nt;vt>=256;vt>>=8)mt++;for(var tt=new Array(mt),vt=tt.length-1;vt>=0;vt--)tt[vt]=nt&255,nt>>=8;return tt[0]&128&&tt.unshift(0),this._createEncoderBuffer(new e(tt))},et.prototype._encodeBool=function(nt){return this._createEncoderBuffer(nt?255:0)},et.prototype._use=function(nt,gt){return typeof nt=="function"&&(nt=nt(gt)),nt._getEncoder("der").tree},et.prototype._skipDefault=function(nt,gt,dt){var mt=this._baseState,vt;if(mt.default===null)return!1;var tt=nt.join();if(mt.defaultBuffer===void 0&&(mt.defaultBuffer=this._encodeValue(mt.default,gt,dt).join()),tt.length!==mt.defaultBuffer.length)return!1;for(vt=0;vt<tt.length;vt++)if(tt[vt]!==mt.defaultBuffer[vt])return!1;return!0};function st(lt,nt,gt,dt){var mt;if(lt==="seqof"?lt="seq":lt==="setof"&&(lt="set"),j.tagByName.hasOwnProperty(lt))mt=j.tagByName[lt];else if(typeof lt=="number"&&(lt|0)===lt)mt=lt;else return dt.error("Unknown tag: "+lt);return mt>=31?dt.error("Multi-octet tag encoding unsupported"):(nt||(mt|=32),mt|=j.tagClassByName[gt||"universal"]<<6,mt)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var o=requireInherits_browser(),e=requireDer();function a(c){e.call(this,c),this.enc="pem"}return o(a,e),pem=a,a.prototype.encode=function(j,h){for(var et=e.prototype.encode.call(this,j),ot=et.toString("base64"),st=["-----BEGIN "+h.label+"-----"],lt=0;lt<ot.length;lt+=64)st.push(ot.slice(lt,lt+64));return st.push("-----END "+h.label+"-----"),st.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(o){var e=o;e.der=requireDer(),e.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(o){var e=o;e.bignum=requireBn$2(),e.define=requireApi().define,e.base=requireBase(),e.constants=requireConstants(),e.decoders=requireDecoders(),e.encoders=requireEncoders()}(asn1)),asn1}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var o=requireAsn1$1(),e=o.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),a=o.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),c=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),j=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())}),h=o.define("RelativeDistinguishedName",function(){this.setof(a)}),et=o.define("RDNSequence",function(){this.seqof(h)}),ot=o.define("Name",function(){this.choice({rdnSequence:this.use(et)})}),st=o.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),lt=o.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),nt=o.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(c),this.key("issuer").use(ot),this.key("validity").use(st),this.key("subject").use(ot),this.key("subjectPublicKeyInfo").use(j),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(lt).optional())}),gt=o.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(nt),this.key("signatureAlgorithm").use(c),this.key("signatureValue").bitstr())});return certificate=gt,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var o=requireAsn1$1();asn1$1.certificate=requireCertificate();var e=o.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=e;var a=o.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=a;var c=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),j=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=j;var h=o.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(c),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=h;var et=o.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=et;var ot=o.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=ot,asn1$1.DSAparam=o.define("DSAparam",function(){this.int()});var st=o.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),lt=o.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(st),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=lt,asn1$1.signature=o.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var o=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,c=requireEvp_bytestokey(),j=requireBrowser$6(),h=requireSafeBuffer$1().Buffer;return fixProc=function(et,ot){var st=et.toString(),lt=st.match(o),nt;if(lt){var dt="aes"+lt[1],mt=h.from(lt[2],"hex"),vt=h.from(lt[3].replace(/[\r\n]/g,""),"base64"),tt=c(ot,mt.slice(0,8),parseInt(lt[1],10)).key,bt=[],ht=j.createDecipheriv(dt,tt,mt);bt.push(ht.update(vt)),bt.push(ht.final()),nt=h.concat(bt)}else{var gt=st.match(a);nt=h.from(gt[2].replace(/[\r\n]/g,""),"base64")}var St=st.match(e)[1];return{tag:St,data:nt}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var o=requireAsn1(),e=require$$1,a=requireFixProc(),c=requireBrowser$6(),j=requireBrowser$7(),h=requireSafeBuffer$1().Buffer;function et(st,lt){var nt=st.algorithm.decrypt.kde.kdeparams.salt,gt=parseInt(st.algorithm.decrypt.kde.kdeparams.iters.toString(),10),dt=e[st.algorithm.decrypt.cipher.algo.join(".")],mt=st.algorithm.decrypt.cipher.iv,vt=st.subjectPrivateKey,tt=parseInt(dt.split("-")[1],10)/8,bt=j.pbkdf2Sync(lt,nt,gt,tt,"sha1"),ht=c.createDecipheriv(dt,bt,mt),St=[];return St.push(ht.update(vt)),St.push(ht.final()),h.concat(St)}function ot(st){var lt;typeof st=="object"&&!h.isBuffer(st)&&(lt=st.passphrase,st=st.key),typeof st=="string"&&(st=h.from(st));var nt=a(st,lt),gt=nt.tag,dt=nt.data,mt,vt;switch(gt){case"CERTIFICATE":vt=o.certificate.decode(dt,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(vt||(vt=o.PublicKey.decode(dt,"der")),mt=vt.algorithm.algorithm.join("."),mt){case"1.2.840.113549.1.1.1":return o.RSAPublicKey.decode(vt.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return vt.subjectPrivateKey=vt.subjectPublicKey,{type:"ec",data:vt};case"1.2.840.10040.4.1":return vt.algorithm.params.pub_key=o.DSAparam.decode(vt.subjectPublicKey.data,"der"),{type:"dsa",data:vt.algorithm.params};default:throw new Error("unknown key id "+mt)}case"ENCRYPTED PRIVATE KEY":dt=o.EncryptedPrivateKey.decode(dt,"der"),dt=et(dt,lt);case"PRIVATE KEY":switch(vt=o.PrivateKey.decode(dt,"der"),mt=vt.algorithm.algorithm.join("."),mt){case"1.2.840.113549.1.1.1":return o.RSAPrivateKey.decode(vt.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:vt.algorithm.curve,privateKey:o.ECPrivateKey.decode(vt.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return vt.algorithm.params.priv_key=o.DSAparam.decode(vt.subjectPrivateKey,"der"),{type:"dsa",params:vt.algorithm.params};default:throw new Error("unknown key id "+mt)}case"RSA PUBLIC KEY":return o.RSAPublicKey.decode(dt,"der");case"RSA PRIVATE KEY":return o.RSAPrivateKey.decode(dt,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:o.DSAPrivateKey.decode(dt,"der")};case"EC PRIVATE KEY":return dt=o.ECPrivateKey.decode(dt,"der"),{curve:dt.parameters.value,privateKey:dt.privateKey};default:throw new Error("unknown key type "+gt)}}return ot.signature=o.signature,parseAsn1=ot,parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var o=requireSafeBuffer$1().Buffer,e=requireBrowser$8(),a=requireBrowserifyRsa(),c=requireElliptic().ec,j=requireBn$4(),h=requireParseAsn1(),et=require$$4,ot=1;function st(ht,St,At,Tt,ft){var _t=h(St);if(_t.curve){if(Tt!=="ecdsa"&&Tt!=="ecdsa/rsa")throw new Error("wrong private key type");return lt(ht,_t)}else if(_t.type==="dsa"){if(Tt!=="dsa")throw new Error("wrong private key type");return nt(ht,_t,At)}if(Tt!=="rsa"&&Tt!=="ecdsa/rsa")throw new Error("wrong private key type");if(St.padding!==void 0&&St.padding!==ot)throw new Error("illegal or unsupported padding mode");ht=o.concat([ft,ht]);for(var Rt=_t.modulus.byteLength(),Mt=[0,1];ht.length+Mt.length+1<Rt;)Mt.push(255);Mt.push(0);for(var Et=-1;++Et<ht.length;)Mt.push(ht[Et]);var kt=a(Mt,_t);return kt}function lt(ht,St){var At=et[St.curve.join(".")];if(!At)throw new Error("unknown curve "+St.curve.join("."));var Tt=new c(At),ft=Tt.keyFromPrivate(St.privateKey),_t=ft.sign(ht);return o.from(_t.toDER())}function nt(ht,St,At){for(var Tt=St.params.priv_key,ft=St.params.p,_t=St.params.q,Rt=St.params.g,Mt=new j(0),Et,kt=mt(ht,_t).mod(_t),at=!1,s=dt(Tt,_t,ht,At);at===!1;)Et=tt(_t,s,At),Mt=bt(Rt,Et,ft,_t),at=Et.invm(_t).imul(kt.add(Tt.mul(Mt))).mod(_t),at.cmpn(0)===0&&(at=!1,Mt=new j(0));return gt(Mt,at)}function gt(ht,St){ht=ht.toArray(),St=St.toArray(),ht[0]&128&&(ht=[0].concat(ht)),St[0]&128&&(St=[0].concat(St));var At=ht.length+St.length+4,Tt=[48,At,2,ht.length];return Tt=Tt.concat(ht,[2,St.length],St),o.from(Tt)}function dt(ht,St,At,Tt){if(ht=o.from(ht.toArray()),ht.length<St.byteLength()){var ft=o.alloc(St.byteLength()-ht.length);ht=o.concat([ft,ht])}var _t=At.length,Rt=vt(At,St),Mt=o.alloc(_t);Mt.fill(1);var Et=o.alloc(_t);return Et=e(Tt,Et).update(Mt).update(o.from([0])).update(ht).update(Rt).digest(),Mt=e(Tt,Et).update(Mt).digest(),Et=e(Tt,Et).update(Mt).update(o.from([1])).update(ht).update(Rt).digest(),Mt=e(Tt,Et).update(Mt).digest(),{k:Et,v:Mt}}function mt(ht,St){var At=new j(ht),Tt=(ht.length<<3)-St.bitLength();return Tt>0&&At.ishrn(Tt),At}function vt(ht,St){ht=mt(ht,St),ht=ht.mod(St);var At=o.from(ht.toArray());if(At.length<St.byteLength()){var Tt=o.alloc(St.byteLength()-At.length);At=o.concat([Tt,At])}return At}function tt(ht,St,At){var Tt,ft;do{for(Tt=o.alloc(0);Tt.length*8<ht.bitLength();)St.v=e(At,St.k).update(St.v).digest(),Tt=o.concat([Tt,St.v]);ft=mt(Tt,ht),St.k=e(At,St.k).update(St.v).update(o.from([0])).digest(),St.v=e(At,St.k).update(St.v).digest()}while(ft.cmp(ht)!==-1);return ft}function bt(ht,St,At,Tt){return ht.toRed(j.mont(At)).redPow(St).fromRed().mod(Tt)}return sign.exports=st,sign.exports.getKey=dt,sign.exports.makeKey=tt,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var o=requireSafeBuffer$1().Buffer,e=requireBn$4(),a=requireElliptic().ec,c=requireParseAsn1(),j=require$$4;function h(lt,nt,gt,dt,mt){var vt=c(gt);if(vt.type==="ec"){if(dt!=="ecdsa"&&dt!=="ecdsa/rsa")throw new Error("wrong public key type");return et(lt,nt,vt)}else if(vt.type==="dsa"){if(dt!=="dsa")throw new Error("wrong public key type");return ot(lt,nt,vt)}if(dt!=="rsa"&&dt!=="ecdsa/rsa")throw new Error("wrong public key type");nt=o.concat([mt,nt]);for(var tt=vt.modulus.byteLength(),bt=[1],ht=0;nt.length+bt.length+2<tt;)bt.push(255),ht+=1;bt.push(0);for(var St=-1;++St<nt.length;)bt.push(nt[St]);bt=o.from(bt);var At=e.mont(vt.modulus);lt=new e(lt).toRed(At),lt=lt.redPow(new e(vt.publicExponent)),lt=o.from(lt.fromRed().toArray());var Tt=ht<8?1:0;for(tt=Math.min(lt.length,bt.length),lt.length!==bt.length&&(Tt=1),St=-1;++St<tt;)Tt|=lt[St]^bt[St];return Tt===0}function et(lt,nt,gt){var dt=j[gt.data.algorithm.curve.join(".")];if(!dt)throw new Error("unknown curve "+gt.data.algorithm.curve.join("."));var mt=new a(dt),vt=gt.data.subjectPrivateKey.data;return mt.verify(nt,lt,vt)}function ot(lt,nt,gt){var dt=gt.data.p,mt=gt.data.q,vt=gt.data.g,tt=gt.data.pub_key,bt=c.signature.decode(lt,"der"),ht=bt.s,St=bt.r;st(ht,mt),st(St,mt);var At=e.mont(dt),Tt=ht.invm(mt),ft=vt.toRed(At).redPow(new e(nt).mul(Tt).mod(mt)).fromRed().mul(tt.toRed(At).redPow(St.mul(Tt).mod(mt)).fromRed()).mod(dt).mod(mt);return ft.cmp(St)===0}function st(lt,nt){if(lt.cmpn(0)<=0)throw new Error("invalid sig");if(lt.cmp(nt)>=0)throw new Error("invalid sig")}return verify_1=h,verify_1}var browser$5,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$5;hasRequiredBrowser$3=1;var o=requireSafeBuffer$1().Buffer,e=requireBrowser$9(),a=requireReadableBrowser(),c=requireInherits_browser(),j=requireSign(),h=requireVerify(),et=require$$6$1;Object.keys(et).forEach(function(gt){et[gt].id=o.from(et[gt].id,"hex"),et[gt.toLowerCase()]=et[gt]});function ot(gt){a.Writable.call(this);var dt=et[gt];if(!dt)throw new Error("Unknown message digest");this._hashType=dt.hash,this._hash=e(dt.hash),this._tag=dt.id,this._signType=dt.sign}c(ot,a.Writable),ot.prototype._write=function(dt,mt,vt){this._hash.update(dt),vt()},ot.prototype.update=function(dt,mt){return this._hash.update(typeof dt=="string"?o.from(dt,mt):dt),this},ot.prototype.sign=function(dt,mt){this.end();var vt=this._hash.digest(),tt=j(vt,dt,this._hashType,this._signType,this._tag);return mt?tt.toString(mt):tt};function st(gt){a.Writable.call(this);var dt=et[gt];if(!dt)throw new Error("Unknown message digest");this._hash=e(dt.hash),this._tag=dt.id,this._signType=dt.sign}c(st,a.Writable),st.prototype._write=function(dt,mt,vt){this._hash.update(dt),vt()},st.prototype.update=function(dt,mt){return this._hash.update(typeof dt=="string"?o.from(dt,mt):dt),this},st.prototype.verify=function(dt,mt,vt){var tt=typeof mt=="string"?o.from(mt,vt):mt;this.end();var bt=this._hash.digest();return h(tt,bt,dt,this._signType,this._tag)};function lt(gt){return new ot(gt)}function nt(gt){return new st(gt)}return browser$5={Sign:lt,Verify:nt,createSign:lt,createVerify:nt},browser$5}var bn$1={exports:{}};bn$1.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(o){(function(e,a){function c(at,s){if(!at)throw new Error(s||"Assertion failed")}function j(at,s){at.super_=s;var b=function(){};b.prototype=s.prototype,at.prototype=new b,at.prototype.constructor=at}function h(at,s,b){if(h.isBN(at))return at;this.negative=0,this.words=null,this.length=0,this.red=null,at!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(at||0,s||10,b||"be"))}typeof e=="object"?e.exports=h:a.BN=h,h.BN=h,h.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}h.isBN=function(s){return s instanceof h?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===h.wordSize&&Array.isArray(s.words)},h.max=function(s,b){return s.cmp(b)>0?s:b},h.min=function(s,b){return s.cmp(b)<0?s:b},h.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},h.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},h.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,yt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);return this.strip()};function ot(at,s){var b=at.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(at,s,b){var $=ot(at,b);return b-1>=s&&($|=ot(at,b-1)<<4),$}h.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,yt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8;else{var ct=s.length-b;for(_e=ct%2===0?b+1:b;_e<s.length;_e+=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8}this.strip()};function lt(at,s,b,$){for(var _e=0,it=Math.min(at.length,b),pt=s;pt<it;pt++){var yt=at.charCodeAt(pt)-48;_e*=$,yt>=49?_e+=yt-49+10:yt>=17?_e+=yt-17+10:_e+=yt}return _e}h.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,yt=pt%_e,ct=Math.min(pt,pt-yt)+$,_=0,rt=$;rt<ct;rt+=_e)_=lt(s,rt,rt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(yt!==0){var Ct=1;for(_=lt(s,rt,s.length,b),rt=0;rt<yt;rt++)Ct*=b;this.imuln(Ct),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},h.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},h.prototype.clone=function(){var s=new h(null);return this.copy(s),s},h.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},h.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var nt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],dt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var yt=this.words[pt],ct=((yt<<_e|it)&16777215).toString(16);it=yt>>>24-_e&16777215,_e+=2,_e>=26&&(_e-=26,pt--),it!==0||pt!==this.length-1?$=nt[6-ct.length]+ct+$:$=ct+$}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],rt=dt[s];$="";var Ct=this.clone();for(Ct.negative=0;!Ct.isZero();){var It=Ct.modn(rt).toString(s);Ct=Ct.idivn(rt),Ct.isZero()?$=It+$:$=nt[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},h.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},h.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",yt=new s(it),ct,_,rt=this.clone();if(pt){for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[_]=ct;for(;_<it;_++)yt[_]=0}else{for(_=0;_<it-_e;_++)yt[_]=0;for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[it-_-1]=ct}return yt},Math.clz32?h.prototype._countBits=function(s){return 32-Math.clz32(s)}:h.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},h.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},h.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function mt(at){for(var s=new Array(at.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(at.words[$]&1<<_e)>>>_e}return s}h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},h.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return this.negative!==0},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},h.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},h.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},h.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},h.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},h.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},h.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},h.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},h.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},h.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},h.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},h.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},h.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},h.prototype.notn=function(s){return this.clone().inotn(s)},h.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},h.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},h.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},h.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,yt=0;yt<it.length;yt++)b=(_e.words[yt]|0)-(it.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;for(;pt!==0&&yt<_e.length;yt++)b=(_e.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;if(pt===0&&yt<_e.length&&_e!==this)for(;yt<_e.length;yt++)this.words[yt]=_e.words[yt];return this.length=Math.max(this.length,yt),_e!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(s){return this.clone().isub(s)};function vt(at,s,b){b.negative=s.negative^at.negative;var $=at.length+s.length|0;b.length=$,$=$-1|0;var _e=at.words[0]|0,it=s.words[0]|0,pt=_e*it,yt=pt&67108863,ct=pt/67108864|0;b.words[0]=yt;for(var _=1;_<$;_++){for(var rt=ct>>>26,Ct=ct&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-at.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=at.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Ct,rt+=pt/67108864|0,Ct=pt&67108863}b.words[_]=Ct|0,ct=rt|0}return ct!==0?b.words[_]=ct|0:b.length--,b.strip()}var tt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,yt=0,ct,_,rt,Ct=_e[0]|0,It=Ct&8191,Nt=Ct>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,yn=_e[5]|0,Lr=yn&8191,wr=yn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Bn=_e[7]|0,Br=Bn&8191,Gr=Bn>>>13,Dn=_e[8]|0,Fr=Dn&8191,_i=Dn>>>13,Gn=_e[9]|0,Wt=Gn&8191,Lt=Gn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,hn=it[3]|0,Nr=hn&8191,zr=hn>>>13,kn=it[4]|0,Kr=kn&8191,nn=kn>>>13,Qn=it[5]|0,Zr=Qn&8191,on=Qn>>>13,Zn=it[6]|0,en=Zn&8191,ln=Zn>>>13,eo=it[7]|0,$t=eo&8191,or=eo>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Rn=it[9]|0,Ur=Rn&8191,tn=Rn>>>13;$.negative=s.negative^b.negative,$.length=19,ct=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,rt=Math.imul(Nt,ar);var Un=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,ct=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,rt=Math.imul(Pt,ar),ct=ct+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,rt=rt+Math.imul(Nt,Rr)|0;var Hn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,ct=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,rt=Math.imul(jt,ar),ct=ct+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,rt=rt+Math.imul(Pt,Rr)|0,ct=ct+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,rt=rt+Math.imul(Nt,yr)|0;var so=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(so>>>26)|0,so&=67108863,ct=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,rt=Math.imul(Jt,ar),ct=ct+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,rt=rt+Math.imul(jt,Rr)|0,ct=ct+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,rt=rt+Math.imul(Pt,yr)|0,ct=ct+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,rt=rt+Math.imul(Nt,zr)|0;var uo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(uo>>>26)|0,uo&=67108863,ct=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,rt=Math.imul(Ar,ar),ct=ct+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,rt=rt+Math.imul(Jt,Rr)|0,ct=ct+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,rt=rt+Math.imul(jt,yr)|0,ct=ct+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,rt=rt+Math.imul(Pt,zr)|0,ct=ct+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,rt=rt+Math.imul(Nt,nn)|0;var io=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(io>>>26)|0,io&=67108863,ct=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,rt=Math.imul(wr,ar),ct=ct+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,rt=rt+Math.imul(Ar,Rr)|0,ct=ct+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,rt=rt+Math.imul(Jt,yr)|0,ct=ct+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,rt=rt+Math.imul(jt,zr)|0,ct=ct+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,rt=rt+Math.imul(Pt,nn)|0,ct=ct+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,rt=rt+Math.imul(Nt,on)|0;var mo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,ct=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,rt=Math.imul(Qr,ar),ct=ct+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,rt=rt+Math.imul(wr,Rr)|0,ct=ct+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,rt=rt+Math.imul(Ar,yr)|0,ct=ct+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,rt=rt+Math.imul(Jt,zr)|0,ct=ct+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,rt=rt+Math.imul(jt,nn)|0,ct=ct+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,rt=rt+Math.imul(Pt,on)|0,ct=ct+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,rt=rt+Math.imul(Nt,ln)|0;var ao=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,ct=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,rt=Math.imul(Gr,ar),ct=ct+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,rt=rt+Math.imul(Qr,Rr)|0,ct=ct+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,rt=rt+Math.imul(wr,yr)|0,ct=ct+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,rt=rt+Math.imul(Ar,zr)|0,ct=ct+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,rt=rt+Math.imul(Jt,nn)|0,ct=ct+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,rt=rt+Math.imul(jt,on)|0,ct=ct+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,rt=rt+Math.imul(Pt,ln)|0,ct=ct+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,rt=rt+Math.imul(Nt,or)|0;var go=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,ct=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,rt=Math.imul(_i,ar),ct=ct+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,rt=rt+Math.imul(Gr,Rr)|0,ct=ct+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,rt=rt+Math.imul(Qr,yr)|0,ct=ct+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,rt=rt+Math.imul(wr,zr)|0,ct=ct+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,rt=rt+Math.imul(Ar,nn)|0,ct=ct+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,rt=rt+Math.imul(Jt,on)|0,ct=ct+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,rt=rt+Math.imul(jt,ln)|0,ct=ct+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,rt=rt+Math.imul(Pt,or)|0,ct=ct+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,rt=rt+Math.imul(Nt,Hr)|0;var po=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(po>>>26)|0,po&=67108863,ct=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,rt=Math.imul(Lt,ar),ct=ct+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,rt=rt+Math.imul(_i,Rr)|0,ct=ct+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,rt=rt+Math.imul(Gr,yr)|0,ct=ct+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,rt=rt+Math.imul(Qr,zr)|0,ct=ct+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,rt=rt+Math.imul(wr,nn)|0,ct=ct+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,rt=rt+Math.imul(Ar,on)|0,ct=ct+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,rt=rt+Math.imul(Jt,ln)|0,ct=ct+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,rt=rt+Math.imul(jt,or)|0,ct=ct+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,rt=rt+Math.imul(Pt,Hr)|0,ct=ct+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,rt=rt+Math.imul(Nt,tn)|0;var yo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(yo>>>26)|0,yo&=67108863,ct=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,rt=Math.imul(Lt,Rr),ct=ct+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,rt=rt+Math.imul(_i,yr)|0,ct=ct+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,rt=rt+Math.imul(Gr,zr)|0,ct=ct+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,rt=rt+Math.imul(Qr,nn)|0,ct=ct+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,rt=rt+Math.imul(wr,on)|0,ct=ct+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,rt=rt+Math.imul(Ar,ln)|0,ct=ct+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,rt=rt+Math.imul(Jt,or)|0,ct=ct+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,rt=rt+Math.imul(jt,Hr)|0,ct=ct+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,rt=rt+Math.imul(Pt,tn)|0;var wo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(wo>>>26)|0,wo&=67108863,ct=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,rt=Math.imul(Lt,yr),ct=ct+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,rt=rt+Math.imul(_i,zr)|0,ct=ct+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,rt=rt+Math.imul(Gr,nn)|0,ct=ct+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,rt=rt+Math.imul(Qr,on)|0,ct=ct+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,rt=rt+Math.imul(wr,ln)|0,ct=ct+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,rt=rt+Math.imul(Ar,or)|0,ct=ct+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,rt=rt+Math.imul(Jt,Hr)|0,ct=ct+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,rt=rt+Math.imul(jt,tn)|0;var ur=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,ct=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,rt=Math.imul(Lt,zr),ct=ct+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,rt=rt+Math.imul(_i,nn)|0,ct=ct+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,rt=rt+Math.imul(Gr,on)|0,ct=ct+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,rt=rt+Math.imul(Qr,ln)|0,ct=ct+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,rt=rt+Math.imul(wr,or)|0,ct=ct+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,rt=rt+Math.imul(Ar,Hr)|0,ct=ct+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,rt=rt+Math.imul(Jt,tn)|0;var Cr=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ct=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,rt=Math.imul(Lt,nn),ct=ct+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,rt=rt+Math.imul(_i,on)|0,ct=ct+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,rt=rt+Math.imul(Gr,ln)|0,ct=ct+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,rt=rt+Math.imul(Qr,or)|0,ct=ct+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,rt=rt+Math.imul(wr,Hr)|0,ct=ct+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,rt=rt+Math.imul(Ar,tn)|0;var $r=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,ct=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,rt=Math.imul(Lt,on),ct=ct+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,rt=rt+Math.imul(_i,ln)|0,ct=ct+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,rt=rt+Math.imul(Gr,or)|0,ct=ct+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,rt=rt+Math.imul(Qr,Hr)|0,ct=ct+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,rt=rt+Math.imul(wr,tn)|0;var dn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,ct=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,rt=Math.imul(Lt,ln),ct=ct+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,rt=rt+Math.imul(_i,or)|0,ct=ct+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,rt=rt+Math.imul(Gr,Hr)|0,ct=ct+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,rt=rt+Math.imul(Qr,tn)|0;var rn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,ct=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,rt=Math.imul(Lt,or),ct=ct+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,rt=rt+Math.imul(_i,Hr)|0,ct=ct+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,rt=rt+Math.imul(Gr,tn)|0;var An=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(An>>>26)|0,An&=67108863,ct=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,rt=Math.imul(Lt,Hr),ct=ct+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,rt=rt+Math.imul(_i,tn)|0;var Pn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,ct=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,rt=Math.imul(Lt,tn);var Tn=(yt+ct|0)+((_&8191)<<13)|0;return yt=(rt+(_>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,pt[0]=Un,pt[1]=Hn,pt[2]=so,pt[3]=uo,pt[4]=io,pt[5]=mo,pt[6]=ao,pt[7]=go,pt[8]=po,pt[9]=yo,pt[10]=wo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=An,pt[17]=Pn,pt[18]=Tn,yt!==0&&(pt[19]=yt,$.length++),$};Math.imul||(tt=vt);function bt(at,s,b){b.negative=s.negative^at.negative,b.length=at.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var yt=$&67108863,ct=Math.min(it,s.length-1),_=Math.max(0,it-at.length+1);_<=ct;_++){var rt=it-_,Ct=at.words[rt]|0,It=s.words[_]|0,Nt=Ct*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+yt|0,yt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=yt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(at,s,b){var $=new St;return $.mulp(at,s,b)}h.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=tt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function St(at,s){this.x=at,this.y=s}St.prototype.makeRBT=function(s){for(var b=new Array(s),$=h.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},St.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},St.prototype.permute=function(s,b,$,_e,it,pt){for(var yt=0;yt<pt;yt++)_e[yt]=b[s[yt]],it[yt]=$[s[yt]]},St.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var yt=1;yt<it;yt<<=1)for(var ct=yt<<1,_=Math.cos(2*Math.PI/ct),rt=Math.sin(2*Math.PI/ct),Ct=0;Ct<it;Ct+=ct)for(var It=_,Nt=rt,Ut=0;Ut<yt;Ut++){var Gt=$[Ct+Ut],Pt=_e[Ct+Ut],qt=$[Ct+Ut+yt],Kt=_e[Ct+Ut+yt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Ct+Ut]=Gt+qt,_e[Ct+Ut]=Pt+Kt,$[Ct+Ut+yt]=Gt-qt,_e[Ct+Ut+yt]=Pt-Kt,Ut!==ct&&(jt=_*It-rt*Nt,Nt=_*Nt+rt*It,It=jt)}},St.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},St.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},St.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},St.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},St.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},St.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),yt=new Array(_e),ct=new Array(_e),_=new Array(_e),rt=new Array(_e),Ct=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,yt,_e),this.convert13b(b.words,b.length,rt,_e),this.transform(yt,pt,ct,_,_e,it),this.transform(rt,pt,Ct,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=ct[Ut]*Ct[Ut]-_[Ut]*It[Ut];_[Ut]=ct[Ut]*It[Ut]+_[Ut]*Ct[Ut],ct[Ut]=Gt}return this.conjugate(ct,_,_e),this.transform(ct,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},h.prototype.mul=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},h.prototype.mulf=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},h.prototype.imul=function(s){return this.clone().mulTo(s,this)},h.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},h.prototype.muln=function(s){return this.clone().imuln(s)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(s){var b=mt(s);if(b.length===0)return new h(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},h.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var yt=this.words[it]&_e,ct=(this.words[it]|0)-yt<<b;this.words[it]=ct|pt,pt=yt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},h.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},h.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),yt=67108863^67108863>>>it<<it,ct=$;if(_e-=pt,_e=Math.max(0,_e),ct){for(var _=0;_<pt;_++)ct.words[_]=this.words[_];ct.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var rt=0;for(_=this.length-1;_>=0&&(rt!==0||_>=_e);_--){var Ct=this.words[_]|0;this.words[_]=rt<<26-it|Ct>>>it,rt=Ct&yt}return ct&&rt!==0&&(ct.words[ct.length++]=rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},h.prototype.shln=function(s){return this.clone().ishln(s)},h.prototype.ushln=function(s){return this.clone().iushln(s)},h.prototype.shrn=function(s){return this.clone().ishrn(s)},h.prototype.ushrn=function(s){return this.clone().iushrn(s)},h.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},h.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},h.prototype.maskn=function(s){return this.clone().imaskn(s)},h.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},h.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},h.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},h.prototype.addn=function(s){return this.clone().iaddn(s)},h.prototype.subn=function(s){return this.clone().isubn(s)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,yt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+yt;var ct=(s.words[it]|0)*b;pt-=ct&67108863,yt=(pt>>26)-(ct/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+yt,yt=pt>>26,this.words[it+$]=pt&67108863;if(yt===0)return this.strip();for(c(yt===-1),yt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+yt,yt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},h.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,yt=this._countBits(pt);$=26-yt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var ct=_e.length-it.length,_;if(b!=="mod"){_=new h(null),_.length=ct+1,_.words=new Array(_.length);for(var rt=0;rt<_.length;rt++)_.words[rt]=0}var Ct=_e.clone()._ishlnsubmul(it,1,ct);Ct.negative===0&&(_e=Ct,_&&(_.words[ct]=1));for(var It=ct-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},h.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new h(0),mod:new h(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new h(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new h(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new h(this.modn(s.words[0]))}:this._wordDiv(s,b)},h.prototype.div=function(s){return this.divmod(s,"div",!1).div},h.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},h.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},h.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},h.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},h.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},h.prototype.divn=function(s){return this.clone().idivn(s)},h.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=new h(0),yt=new h(1),ct=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++ct;for(var _=$.clone(),rt=b.clone();!b.isZero();){for(var Ct=0,It=1;!(b.words[0]&It)&&Ct<26;++Ct,It<<=1);if(Ct>0)for(b.iushrn(Ct);Ct-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(rt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||yt.isOdd())&&(pt.iadd(_),yt.isub(rt)),pt.iushrn(1),yt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(yt)):($.isub(b),pt.isub(_e),yt.isub(it))}return{a:pt,b:yt,gcd:$.iushln(ct)}},h.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var yt=0,ct=1;!(b.words[0]&ct)&&yt<26;++yt,ct<<=1);if(yt>0)for(b.iushrn(yt);yt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,rt=1;!($.words[0]&rt)&&_<26;++_,rt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Ct;return b.cmpn(1)===0?Ct=_e:Ct=it,Ct.cmpn(0)<0&&Ct.iadd(s),Ct},h.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},h.prototype.invm=function(s){return this.egcd(s).a.umod(s)},h.prototype.isEven=function(){return(this.words[0]&1)===0},h.prototype.isOdd=function(){return(this.words[0]&1)===1},h.prototype.andln=function(s){return this.words[0]&s},h.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var yt=this.words[pt]|0;yt+=it,it=yt>>>26,yt&=67108863,this.words[pt]=yt}return it!==0&&(this.words[pt]=it,this.length++),this},h.prototype.isZero=function(){return this.length===1&&this.words[0]===0},h.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},h.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},h.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},h.prototype.gtn=function(s){return this.cmpn(s)===1},h.prototype.gt=function(s){return this.cmp(s)===1},h.prototype.gten=function(s){return this.cmpn(s)>=0},h.prototype.gte=function(s){return this.cmp(s)>=0},h.prototype.ltn=function(s){return this.cmpn(s)===-1},h.prototype.lt=function(s){return this.cmp(s)===-1},h.prototype.lten=function(s){return this.cmpn(s)<=0},h.prototype.lte=function(s){return this.cmp(s)<=0},h.prototype.eqn=function(s){return this.cmpn(s)===0},h.prototype.eq=function(s){return this.cmp(s)===0},h.red=function(s){return new Et(s)},h.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},h.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(s){return this.red=s,this},h.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},h.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},h.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},h.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},h.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},h.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},h.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},h.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},h.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Tt(at,s){this.name=at,this.p=new h(s,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Tt.prototype._tmp=function(){var s=new h(null);return s.words=new Array(Math.ceil(this.n/13)),s},Tt.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Tt.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Tt.prototype.imulK=function(s){return s.imul(this.k)};function ft(){Tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(ft,Tt),ft.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var yt=s.words[it]|0;s.words[it-10]=(yt&$)<<4|pt>>>22,pt=yt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},ft.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function _t(){Tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(_t,Tt);function Rt(){Tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Tt);function Mt(){Tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Tt),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},h._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new ft;else if(s==="p224")b=new _t;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function Et(at){if(typeof at=="string"){var s=h._prime(at);this.m=s.p,this.prime=s}else c(at.gtn(1),"modulus must be greater than 1"),this.m=at,this.prime=null}Et.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},Et.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},Et.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},Et.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},Et.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},Et.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},Et.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},Et.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},Et.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},Et.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},Et.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},Et.prototype.isqr=function(s){return this.imul(s,s.clone())},Et.prototype.sqr=function(s){return this.mul(s,s)},Et.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new h(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new h(1).toRed(this),yt=pt.redNeg(),ct=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new h(2*_*_).toRed(this);this.pow(_,ct).cmp(yt)!==0;)_.redIAdd(yt);for(var rt=this.pow(_,_e),Ct=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(rt,new h(1).iushln(Nt-Gt-1));Ct=Ct.redMul(Pt),rt=Pt.redSqr(),It=It.redMul(rt),Nt=Gt}return Ct},Et.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},Et.prototype.pow=function(s,b){if(b.isZero())return new h(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new h(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],yt=0,ct=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var rt=b.words[it],Ct=_-1;Ct>=0;Ct--){var It=rt>>Ct&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&yt===0){ct=0;continue}yt<<=1,yt|=It,ct++,!(ct!==$&&(it!==0||Ct!==0))&&(pt=this.mul(pt,_e[yt]),ct=0,yt=0)}_=26}return pt},Et.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},Et.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},h.mont=function(s){return new kt(s)};function kt(at){Et.call(this,at),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,Et),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new h(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn$1)),bn$1.exports}var browser$4,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$4;hasRequiredBrowser$2=1;var o=requireElliptic(),e=requireBn$1();browser$4=function(et){return new c(et)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1;function c(h){this.curveType=a[h],this.curveType||(this.curveType={name:h}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}c.prototype.generateKeys=function(h,et){return this.keys=this.curve.genKeyPair(),this.getPublicKey(h,et)},c.prototype.computeSecret=function(h,et,ot){et=et||"utf8",Buffer.isBuffer(h)||(h=new Buffer(h,et));var st=this.curve.keyFromPublic(h).getPublic(),lt=st.mul(this.keys.getPrivate()).getX();return j(lt,ot,this.curveType.byteLength)},c.prototype.getPublicKey=function(h,et){var ot=this.keys.getPublic(et==="compressed",!0);return et==="hybrid"&&(ot[ot.length-1]%2?ot[0]=7:ot[0]=6),j(ot,h)},c.prototype.getPrivateKey=function(h){return j(this.keys.getPrivate(),h)},c.prototype.setPublicKey=function(h,et){return et=et||"utf8",Buffer.isBuffer(h)||(h=new Buffer(h,et)),this.keys._importPublic(h),this},c.prototype.setPrivateKey=function(h,et){et=et||"utf8",Buffer.isBuffer(h)||(h=new Buffer(h,et));var ot=new e(h);return ot=ot.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(ot),this};function j(h,et,ot){Array.isArray(h)||(h=h.toArray());var st=new Buffer(h);if(ot&&st.length<ot){var lt=new Buffer(ot-st.length);lt.fill(0),st=Buffer.concat([lt,st])}return et?st.toString(et):st}return browser$4}var browser$3={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var o=requireBrowser$9(),e=requireSafeBuffer$1().Buffer;mgf=function(c,j){for(var h=e.alloc(0),et=0,ot;h.length<j;)ot=a(et++),h=e.concat([h,o("sha1").update(c).update(ot).digest()]);return h.slice(0,j)};function a(c){var j=e.allocUnsafe(4);return j.writeUInt32BE(c,0),j}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(e,a){for(var c=e.length,j=-1;++j<c;)e[j]^=a[j];return e}),xor}var bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(o){(function(e,a){function c(at,s){if(!at)throw new Error(s||"Assertion failed")}function j(at,s){at.super_=s;var b=function(){};b.prototype=s.prototype,at.prototype=new b,at.prototype.constructor=at}function h(at,s,b){if(h.isBN(at))return at;this.negative=0,this.words=null,this.length=0,this.red=null,at!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(at||0,s||10,b||"be"))}typeof e=="object"?e.exports=h:a.BN=h,h.BN=h,h.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}h.isBN=function(s){return s instanceof h?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===h.wordSize&&Array.isArray(s.words)},h.max=function(s,b){return s.cmp(b)>0?s:b},h.min=function(s,b){return s.cmp(b)<0?s:b},h.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},h.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},h.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,yt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<yt&67108863,this.words[it+1]=pt>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,it++);return this.strip()};function ot(at,s){var b=at.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(at,s,b){var $=ot(at,b);return b-1>=s&&($|=ot(at,b-1)<<4),$}h.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,yt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8;else{var ct=s.length-b;for(_e=ct%2===0?b+1:b;_e<s.length;_e+=2)yt=st(s,b,_e)<<it,this.words[pt]|=yt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=yt>>>26):it+=8}this.strip()};function lt(at,s,b,$){for(var _e=0,it=Math.min(at.length,b),pt=s;pt<it;pt++){var yt=at.charCodeAt(pt)-48;_e*=$,yt>=49?_e+=yt-49+10:yt>=17?_e+=yt-17+10:_e+=yt}return _e}h.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,yt=pt%_e,ct=Math.min(pt,pt-yt)+$,_=0,rt=$;rt<ct;rt+=_e)_=lt(s,rt,rt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(yt!==0){var Ct=1;for(_=lt(s,rt,s.length,b),rt=0;rt<yt;rt++)Ct*=b;this.imuln(Ct),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},h.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},h.prototype.clone=function(){var s=new h(null);return this.copy(s),s},h.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},h.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var nt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],dt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var yt=this.words[pt],ct=((yt<<_e|it)&16777215).toString(16);it=yt>>>24-_e&16777215,_e+=2,_e>=26&&(_e-=26,pt--),it!==0||pt!==this.length-1?$=nt[6-ct.length]+ct+$:$=ct+$}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],rt=dt[s];$="";var Ct=this.clone();for(Ct.negative=0;!Ct.isZero();){var It=Ct.modn(rt).toString(s);Ct=Ct.idivn(rt),Ct.isZero()?$=It+$:$=nt[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},h.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},h.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",yt=new s(it),ct,_,rt=this.clone();if(pt){for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[_]=ct;for(;_<it;_++)yt[_]=0}else{for(_=0;_<it-_e;_++)yt[_]=0;for(_=0;!rt.isZero();_++)ct=rt.andln(255),rt.iushrn(8),yt[it-_-1]=ct}return yt},Math.clz32?h.prototype._countBits=function(s){return 32-Math.clz32(s)}:h.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},h.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},h.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function mt(at){for(var s=new Array(at.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(at.words[$]&1<<_e)>>>_e}return s}h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},h.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return this.negative!==0},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},h.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},h.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},h.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},h.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},h.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},h.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},h.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},h.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},h.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},h.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},h.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},h.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},h.prototype.notn=function(s){return this.clone().inotn(s)},h.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},h.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},h.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},h.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,yt=0;yt<it.length;yt++)b=(_e.words[yt]|0)-(it.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;for(;pt!==0&&yt<_e.length;yt++)b=(_e.words[yt]|0)+pt,pt=b>>26,this.words[yt]=b&67108863;if(pt===0&&yt<_e.length&&_e!==this)for(;yt<_e.length;yt++)this.words[yt]=_e.words[yt];return this.length=Math.max(this.length,yt),_e!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(s){return this.clone().isub(s)};function vt(at,s,b){b.negative=s.negative^at.negative;var $=at.length+s.length|0;b.length=$,$=$-1|0;var _e=at.words[0]|0,it=s.words[0]|0,pt=_e*it,yt=pt&67108863,ct=pt/67108864|0;b.words[0]=yt;for(var _=1;_<$;_++){for(var rt=ct>>>26,Ct=ct&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-at.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=at.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Ct,rt+=pt/67108864|0,Ct=pt&67108863}b.words[_]=Ct|0,ct=rt|0}return ct!==0?b.words[_]=ct|0:b.length--,b.strip()}var tt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,yt=0,ct,_,rt,Ct=_e[0]|0,It=Ct&8191,Nt=Ct>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,yn=_e[5]|0,Lr=yn&8191,wr=yn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Bn=_e[7]|0,Br=Bn&8191,Gr=Bn>>>13,Dn=_e[8]|0,Fr=Dn&8191,_i=Dn>>>13,Gn=_e[9]|0,Wt=Gn&8191,Lt=Gn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,hn=it[3]|0,Nr=hn&8191,zr=hn>>>13,kn=it[4]|0,Kr=kn&8191,nn=kn>>>13,Qn=it[5]|0,Zr=Qn&8191,on=Qn>>>13,Zn=it[6]|0,en=Zn&8191,ln=Zn>>>13,eo=it[7]|0,$t=eo&8191,or=eo>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Rn=it[9]|0,Ur=Rn&8191,tn=Rn>>>13;$.negative=s.negative^b.negative,$.length=19,ct=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,rt=Math.imul(Nt,ar);var Un=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,ct=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,rt=Math.imul(Pt,ar),ct=ct+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,rt=rt+Math.imul(Nt,Rr)|0;var Hn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,ct=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,rt=Math.imul(jt,ar),ct=ct+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,rt=rt+Math.imul(Pt,Rr)|0,ct=ct+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,rt=rt+Math.imul(Nt,yr)|0;var so=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(so>>>26)|0,so&=67108863,ct=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,rt=Math.imul(Jt,ar),ct=ct+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,rt=rt+Math.imul(jt,Rr)|0,ct=ct+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,rt=rt+Math.imul(Pt,yr)|0,ct=ct+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,rt=rt+Math.imul(Nt,zr)|0;var uo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(uo>>>26)|0,uo&=67108863,ct=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,rt=Math.imul(Ar,ar),ct=ct+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,rt=rt+Math.imul(Jt,Rr)|0,ct=ct+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,rt=rt+Math.imul(jt,yr)|0,ct=ct+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,rt=rt+Math.imul(Pt,zr)|0,ct=ct+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,rt=rt+Math.imul(Nt,nn)|0;var io=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(io>>>26)|0,io&=67108863,ct=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,rt=Math.imul(wr,ar),ct=ct+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,rt=rt+Math.imul(Ar,Rr)|0,ct=ct+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,rt=rt+Math.imul(Jt,yr)|0,ct=ct+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,rt=rt+Math.imul(jt,zr)|0,ct=ct+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,rt=rt+Math.imul(Pt,nn)|0,ct=ct+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,rt=rt+Math.imul(Nt,on)|0;var mo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,ct=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,rt=Math.imul(Qr,ar),ct=ct+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,rt=rt+Math.imul(wr,Rr)|0,ct=ct+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,rt=rt+Math.imul(Ar,yr)|0,ct=ct+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,rt=rt+Math.imul(Jt,zr)|0,ct=ct+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,rt=rt+Math.imul(jt,nn)|0,ct=ct+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,rt=rt+Math.imul(Pt,on)|0,ct=ct+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,rt=rt+Math.imul(Nt,ln)|0;var ao=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,ct=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,rt=Math.imul(Gr,ar),ct=ct+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,rt=rt+Math.imul(Qr,Rr)|0,ct=ct+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,rt=rt+Math.imul(wr,yr)|0,ct=ct+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,rt=rt+Math.imul(Ar,zr)|0,ct=ct+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,rt=rt+Math.imul(Jt,nn)|0,ct=ct+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,rt=rt+Math.imul(jt,on)|0,ct=ct+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,rt=rt+Math.imul(Pt,ln)|0,ct=ct+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,rt=rt+Math.imul(Nt,or)|0;var go=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,ct=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,rt=Math.imul(_i,ar),ct=ct+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,rt=rt+Math.imul(Gr,Rr)|0,ct=ct+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,rt=rt+Math.imul(Qr,yr)|0,ct=ct+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,rt=rt+Math.imul(wr,zr)|0,ct=ct+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,rt=rt+Math.imul(Ar,nn)|0,ct=ct+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,rt=rt+Math.imul(Jt,on)|0,ct=ct+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,rt=rt+Math.imul(jt,ln)|0,ct=ct+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,rt=rt+Math.imul(Pt,or)|0,ct=ct+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,rt=rt+Math.imul(Nt,Hr)|0;var po=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(po>>>26)|0,po&=67108863,ct=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,rt=Math.imul(Lt,ar),ct=ct+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,rt=rt+Math.imul(_i,Rr)|0,ct=ct+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,rt=rt+Math.imul(Gr,yr)|0,ct=ct+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,rt=rt+Math.imul(Qr,zr)|0,ct=ct+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,rt=rt+Math.imul(wr,nn)|0,ct=ct+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,rt=rt+Math.imul(Ar,on)|0,ct=ct+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,rt=rt+Math.imul(Jt,ln)|0,ct=ct+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,rt=rt+Math.imul(jt,or)|0,ct=ct+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,rt=rt+Math.imul(Pt,Hr)|0,ct=ct+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,rt=rt+Math.imul(Nt,tn)|0;var yo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(yo>>>26)|0,yo&=67108863,ct=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,rt=Math.imul(Lt,Rr),ct=ct+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,rt=rt+Math.imul(_i,yr)|0,ct=ct+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,rt=rt+Math.imul(Gr,zr)|0,ct=ct+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,rt=rt+Math.imul(Qr,nn)|0,ct=ct+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,rt=rt+Math.imul(wr,on)|0,ct=ct+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,rt=rt+Math.imul(Ar,ln)|0,ct=ct+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,rt=rt+Math.imul(Jt,or)|0,ct=ct+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,rt=rt+Math.imul(jt,Hr)|0,ct=ct+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,rt=rt+Math.imul(Pt,tn)|0;var wo=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(wo>>>26)|0,wo&=67108863,ct=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,rt=Math.imul(Lt,yr),ct=ct+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,rt=rt+Math.imul(_i,zr)|0,ct=ct+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,rt=rt+Math.imul(Gr,nn)|0,ct=ct+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,rt=rt+Math.imul(Qr,on)|0,ct=ct+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,rt=rt+Math.imul(wr,ln)|0,ct=ct+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,rt=rt+Math.imul(Ar,or)|0,ct=ct+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,rt=rt+Math.imul(Jt,Hr)|0,ct=ct+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,rt=rt+Math.imul(jt,tn)|0;var ur=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,ct=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,rt=Math.imul(Lt,zr),ct=ct+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,rt=rt+Math.imul(_i,nn)|0,ct=ct+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,rt=rt+Math.imul(Gr,on)|0,ct=ct+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,rt=rt+Math.imul(Qr,ln)|0,ct=ct+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,rt=rt+Math.imul(wr,or)|0,ct=ct+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,rt=rt+Math.imul(Ar,Hr)|0,ct=ct+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,rt=rt+Math.imul(Jt,tn)|0;var Cr=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ct=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,rt=Math.imul(Lt,nn),ct=ct+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,rt=rt+Math.imul(_i,on)|0,ct=ct+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,rt=rt+Math.imul(Gr,ln)|0,ct=ct+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,rt=rt+Math.imul(Qr,or)|0,ct=ct+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,rt=rt+Math.imul(wr,Hr)|0,ct=ct+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,rt=rt+Math.imul(Ar,tn)|0;var $r=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,ct=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,rt=Math.imul(Lt,on),ct=ct+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,rt=rt+Math.imul(_i,ln)|0,ct=ct+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,rt=rt+Math.imul(Gr,or)|0,ct=ct+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,rt=rt+Math.imul(Qr,Hr)|0,ct=ct+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,rt=rt+Math.imul(wr,tn)|0;var dn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,ct=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,rt=Math.imul(Lt,ln),ct=ct+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,rt=rt+Math.imul(_i,or)|0,ct=ct+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,rt=rt+Math.imul(Gr,Hr)|0,ct=ct+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,rt=rt+Math.imul(Qr,tn)|0;var rn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,ct=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,rt=Math.imul(Lt,or),ct=ct+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,rt=rt+Math.imul(_i,Hr)|0,ct=ct+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,rt=rt+Math.imul(Gr,tn)|0;var An=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(An>>>26)|0,An&=67108863,ct=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,rt=Math.imul(Lt,Hr),ct=ct+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,rt=rt+Math.imul(_i,tn)|0;var Pn=(yt+ct|0)+((_&8191)<<13)|0;yt=(rt+(_>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,ct=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,rt=Math.imul(Lt,tn);var Tn=(yt+ct|0)+((_&8191)<<13)|0;return yt=(rt+(_>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,pt[0]=Un,pt[1]=Hn,pt[2]=so,pt[3]=uo,pt[4]=io,pt[5]=mo,pt[6]=ao,pt[7]=go,pt[8]=po,pt[9]=yo,pt[10]=wo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=An,pt[17]=Pn,pt[18]=Tn,yt!==0&&(pt[19]=yt,$.length++),$};Math.imul||(tt=vt);function bt(at,s,b){b.negative=s.negative^at.negative,b.length=at.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var yt=$&67108863,ct=Math.min(it,s.length-1),_=Math.max(0,it-at.length+1);_<=ct;_++){var rt=it-_,Ct=at.words[rt]|0,It=s.words[_]|0,Nt=Ct*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+yt|0,yt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=yt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(at,s,b){var $=new St;return $.mulp(at,s,b)}h.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=tt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function St(at,s){this.x=at,this.y=s}St.prototype.makeRBT=function(s){for(var b=new Array(s),$=h.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},St.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},St.prototype.permute=function(s,b,$,_e,it,pt){for(var yt=0;yt<pt;yt++)_e[yt]=b[s[yt]],it[yt]=$[s[yt]]},St.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var yt=1;yt<it;yt<<=1)for(var ct=yt<<1,_=Math.cos(2*Math.PI/ct),rt=Math.sin(2*Math.PI/ct),Ct=0;Ct<it;Ct+=ct)for(var It=_,Nt=rt,Ut=0;Ut<yt;Ut++){var Gt=$[Ct+Ut],Pt=_e[Ct+Ut],qt=$[Ct+Ut+yt],Kt=_e[Ct+Ut+yt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Ct+Ut]=Gt+qt,_e[Ct+Ut]=Pt+Kt,$[Ct+Ut+yt]=Gt-qt,_e[Ct+Ut+yt]=Pt-Kt,Ut!==ct&&(jt=_*It-rt*Nt,Nt=_*Nt+rt*It,It=jt)}},St.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},St.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},St.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},St.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},St.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},St.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),yt=new Array(_e),ct=new Array(_e),_=new Array(_e),rt=new Array(_e),Ct=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,yt,_e),this.convert13b(b.words,b.length,rt,_e),this.transform(yt,pt,ct,_,_e,it),this.transform(rt,pt,Ct,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=ct[Ut]*Ct[Ut]-_[Ut]*It[Ut];_[Ut]=ct[Ut]*It[Ut]+_[Ut]*Ct[Ut],ct[Ut]=Gt}return this.conjugate(ct,_,_e),this.transform(ct,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},h.prototype.mul=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},h.prototype.mulf=function(s){var b=new h(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},h.prototype.imul=function(s){return this.clone().mulTo(s,this)},h.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},h.prototype.muln=function(s){return this.clone().imuln(s)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(s){var b=mt(s);if(b.length===0)return new h(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},h.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var yt=this.words[it]&_e,ct=(this.words[it]|0)-yt<<b;this.words[it]=ct|pt,pt=yt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},h.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},h.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),yt=67108863^67108863>>>it<<it,ct=$;if(_e-=pt,_e=Math.max(0,_e),ct){for(var _=0;_<pt;_++)ct.words[_]=this.words[_];ct.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var rt=0;for(_=this.length-1;_>=0&&(rt!==0||_>=_e);_--){var Ct=this.words[_]|0;this.words[_]=rt<<26-it|Ct>>>it,rt=Ct&yt}return ct&&rt!==0&&(ct.words[ct.length++]=rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},h.prototype.shln=function(s){return this.clone().ishln(s)},h.prototype.ushln=function(s){return this.clone().iushln(s)},h.prototype.shrn=function(s){return this.clone().ishrn(s)},h.prototype.ushrn=function(s){return this.clone().iushrn(s)},h.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},h.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},h.prototype.maskn=function(s){return this.clone().imaskn(s)},h.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},h.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},h.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},h.prototype.addn=function(s){return this.clone().iaddn(s)},h.prototype.subn=function(s){return this.clone().isubn(s)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,yt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+yt;var ct=(s.words[it]|0)*b;pt-=ct&67108863,yt=(pt>>26)-(ct/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+yt,yt=pt>>26,this.words[it+$]=pt&67108863;if(yt===0)return this.strip();for(c(yt===-1),yt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+yt,yt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},h.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,yt=this._countBits(pt);$=26-yt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var ct=_e.length-it.length,_;if(b!=="mod"){_=new h(null),_.length=ct+1,_.words=new Array(_.length);for(var rt=0;rt<_.length;rt++)_.words[rt]=0}var Ct=_e.clone()._ishlnsubmul(it,1,ct);Ct.negative===0&&(_e=Ct,_&&(_.words[ct]=1));for(var It=ct-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},h.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new h(0),mod:new h(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new h(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new h(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new h(this.modn(s.words[0]))}:this._wordDiv(s,b)},h.prototype.div=function(s){return this.divmod(s,"div",!1).div},h.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},h.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},h.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},h.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},h.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},h.prototype.divn=function(s){return this.clone().idivn(s)},h.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=new h(0),yt=new h(1),ct=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++ct;for(var _=$.clone(),rt=b.clone();!b.isZero();){for(var Ct=0,It=1;!(b.words[0]&It)&&Ct<26;++Ct,It<<=1);if(Ct>0)for(b.iushrn(Ct);Ct-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(rt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||yt.isOdd())&&(pt.iadd(_),yt.isub(rt)),pt.iushrn(1),yt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(yt)):($.isub(b),pt.isub(_e),yt.isub(it))}return{a:pt,b:yt,gcd:$.iushln(ct)}},h.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new h(1),it=new h(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var yt=0,ct=1;!(b.words[0]&ct)&&yt<26;++yt,ct<<=1);if(yt>0)for(b.iushrn(yt);yt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,rt=1;!($.words[0]&rt)&&_<26;++_,rt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Ct;return b.cmpn(1)===0?Ct=_e:Ct=it,Ct.cmpn(0)<0&&Ct.iadd(s),Ct},h.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},h.prototype.invm=function(s){return this.egcd(s).a.umod(s)},h.prototype.isEven=function(){return(this.words[0]&1)===0},h.prototype.isOdd=function(){return(this.words[0]&1)===1},h.prototype.andln=function(s){return this.words[0]&s},h.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var yt=this.words[pt]|0;yt+=it,it=yt>>>26,yt&=67108863,this.words[pt]=yt}return it!==0&&(this.words[pt]=it,this.length++),this},h.prototype.isZero=function(){return this.length===1&&this.words[0]===0},h.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},h.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},h.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},h.prototype.gtn=function(s){return this.cmpn(s)===1},h.prototype.gt=function(s){return this.cmp(s)===1},h.prototype.gten=function(s){return this.cmpn(s)>=0},h.prototype.gte=function(s){return this.cmp(s)>=0},h.prototype.ltn=function(s){return this.cmpn(s)===-1},h.prototype.lt=function(s){return this.cmp(s)===-1},h.prototype.lten=function(s){return this.cmpn(s)<=0},h.prototype.lte=function(s){return this.cmp(s)<=0},h.prototype.eqn=function(s){return this.cmpn(s)===0},h.prototype.eq=function(s){return this.cmp(s)===0},h.red=function(s){return new Et(s)},h.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},h.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(s){return this.red=s,this},h.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},h.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},h.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},h.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},h.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},h.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},h.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},h.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},h.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Tt(at,s){this.name=at,this.p=new h(s,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Tt.prototype._tmp=function(){var s=new h(null);return s.words=new Array(Math.ceil(this.n/13)),s},Tt.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Tt.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Tt.prototype.imulK=function(s){return s.imul(this.k)};function ft(){Tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(ft,Tt),ft.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var yt=s.words[it]|0;s.words[it-10]=(yt&$)<<4|pt>>>22,pt=yt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},ft.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function _t(){Tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(_t,Tt);function Rt(){Tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Tt);function Mt(){Tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Tt),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},h._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new ft;else if(s==="p224")b=new _t;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function Et(at){if(typeof at=="string"){var s=h._prime(at);this.m=s.p,this.prime=s}else c(at.gtn(1),"modulus must be greater than 1"),this.m=at,this.prime=null}Et.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},Et.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},Et.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},Et.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},Et.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},Et.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},Et.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},Et.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},Et.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},Et.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},Et.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},Et.prototype.isqr=function(s){return this.imul(s,s.clone())},Et.prototype.sqr=function(s){return this.mul(s,s)},Et.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new h(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new h(1).toRed(this),yt=pt.redNeg(),ct=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new h(2*_*_).toRed(this);this.pow(_,ct).cmp(yt)!==0;)_.redIAdd(yt);for(var rt=this.pow(_,_e),Ct=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(rt,new h(1).iushln(Nt-Gt-1));Ct=Ct.redMul(Pt),rt=Pt.redSqr(),It=It.redMul(rt),Nt=Gt}return Ct},Et.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},Et.prototype.pow=function(s,b){if(b.isZero())return new h(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new h(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],yt=0,ct=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var rt=b.words[it],Ct=_-1;Ct>=0;Ct--){var It=rt>>Ct&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&yt===0){ct=0;continue}yt<<=1,yt|=It,ct++,!(ct!==$&&(it!==0||Ct!==0))&&(pt=this.mul(pt,_e[yt]),ct=0,yt=0)}_=26}return pt},Et.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},Et.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},h.mont=function(s){return new kt(s)};function kt(at){Et.call(this,at),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,Et),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new h(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn)),bn.exports}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var o=requireBn(),e=requireSafeBuffer$1().Buffer;function a(c,j){return e.from(c.toRed(o.mont(j.modulus)).redPow(new o(j.publicExponent)).fromRed().toArray())}return withPublic_1=a,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var o=requireParseAsn1(),e=requireBrowser$b(),a=requireBrowser$9(),c=requireMgf(),j=requireXor(),h=requireBn(),et=requireWithPublic(),ot=requireBrowserifyRsa(),st=requireSafeBuffer$1().Buffer;publicEncrypt=function(mt,vt,tt){var bt;mt.padding?bt=mt.padding:tt?bt=1:bt=4;var ht=o(mt),St;if(bt===4)St=lt(ht,vt);else if(bt===1)St=nt(ht,vt,tt);else if(bt===3){if(St=new h(vt),St.cmp(ht.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return tt?ot(St,ht):et(St,ht)};function lt(dt,mt){var vt=dt.modulus.byteLength(),tt=mt.length,bt=a("sha1").update(st.alloc(0)).digest(),ht=bt.length,St=2*ht;if(tt>vt-St-2)throw new Error("message too long");var At=st.alloc(vt-tt-St-2),Tt=vt-ht-1,ft=e(ht),_t=j(st.concat([bt,At,st.alloc(1,1),mt],Tt),c(ft,Tt)),Rt=j(ft,c(_t,ht));return new h(st.concat([st.alloc(1),Rt,_t],vt))}function nt(dt,mt,vt){var tt=mt.length,bt=dt.modulus.byteLength();if(tt>bt-11)throw new Error("message too long");var ht;return vt?ht=st.alloc(bt-tt-3,255):ht=gt(bt-tt-3),new h(st.concat([st.from([0,vt?1:2]),ht,st.alloc(1),mt],bt))}function gt(dt){for(var mt=st.allocUnsafe(dt),vt=0,tt=e(dt*2),bt=0,ht;vt<dt;)bt===tt.length&&(tt=e(dt*2),bt=0),ht=tt[bt++],ht&&(mt[vt++]=ht);return mt}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var o=requireParseAsn1(),e=requireMgf(),a=requireXor(),c=requireBn(),j=requireBrowserifyRsa(),h=requireBrowser$9(),et=requireWithPublic(),ot=requireSafeBuffer$1().Buffer;privateDecrypt=function(dt,mt,vt){var tt;dt.padding?tt=dt.padding:vt?tt=1:tt=4;var bt=o(dt),ht=bt.modulus.byteLength();if(mt.length>ht||new c(mt).cmp(bt.modulus)>=0)throw new Error("decryption error");var St;vt?St=et(new c(mt),bt):St=j(mt,bt);var At=ot.alloc(ht-St.length);if(St=ot.concat([At,St],ht),tt===4)return st(bt,St);if(tt===1)return lt(bt,St,vt);if(tt===3)return St;throw new Error("unknown padding")};function st(gt,dt){var mt=gt.modulus.byteLength(),vt=h("sha1").update(ot.alloc(0)).digest(),tt=vt.length;if(dt[0]!==0)throw new Error("decryption error");var bt=dt.slice(1,tt+1),ht=dt.slice(tt+1),St=a(bt,e(ht,tt)),At=a(ht,e(St,mt-tt-1));if(nt(vt,At.slice(0,tt)))throw new Error("decryption error");for(var Tt=tt;At[Tt]===0;)Tt++;if(At[Tt++]!==1)throw new Error("decryption error");return At.slice(Tt)}function lt(gt,dt,mt){for(var vt=dt.slice(0,2),tt=2,bt=0;dt[tt++]!==0;)if(tt>=dt.length){bt++;break}var ht=dt.slice(2,tt-1);if((vt.toString("hex")!=="0002"&&!mt||vt.toString("hex")!=="0001"&&mt)&&bt++,ht.length<8&&bt++,bt)throw new Error("decryption error");return dt.slice(tt)}function nt(gt,dt){gt=ot.from(gt),dt=ot.from(dt);var mt=0,vt=gt.length;gt.length!==dt.length&&(mt++,vt=Math.min(gt.length,dt.length));for(var tt=-1;++tt<vt;)mt+=gt[tt]^dt[tt];return mt}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(o){o.publicEncrypt=requirePublicEncrypt(),o.privateDecrypt=requirePrivateDecrypt(),o.privateEncrypt=function(a,c){return o.publicEncrypt(a,c,!0)},o.publicDecrypt=function(a,c){return o.privateDecrypt(a,c,!0)}}(browser$3)),browser$3}var browser$2={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$2;hasRequiredBrowser=1;function o(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=requireSafeBuffer$1(),a=requireBrowser$b(),c=e.Buffer,j=e.kMaxLength,h=commonjsGlobal.crypto||commonjsGlobal.msCrypto,et=Math.pow(2,32)-1;function ot(dt,mt){if(typeof dt!="number"||dt!==dt)throw new TypeError("offset must be a number");if(dt>et||dt<0)throw new TypeError("offset must be a uint32");if(dt>j||dt>mt)throw new RangeError("offset out of range")}function st(dt,mt,vt){if(typeof dt!="number"||dt!==dt)throw new TypeError("size must be a number");if(dt>et||dt<0)throw new TypeError("size must be a uint32");if(dt+mt>vt||dt>j)throw new RangeError("buffer too small")}h&&h.getRandomValues||!process$1.browser?(browser$2.randomFill=lt,browser$2.randomFillSync=gt):(browser$2.randomFill=o,browser$2.randomFillSync=o);function lt(dt,mt,vt,tt){if(!c.isBuffer(dt)&&!(dt instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof mt=="function")tt=mt,mt=0,vt=dt.length;else if(typeof vt=="function")tt=vt,vt=dt.length-mt;else if(typeof tt!="function")throw new TypeError('"cb" argument must be a function');return ot(mt,dt.length),st(vt,mt,dt.length),nt(dt,mt,vt,tt)}function nt(dt,mt,vt,tt){if(process$1.browser){var bt=dt.buffer,ht=new Uint8Array(bt,mt,vt);if(h.getRandomValues(ht),tt){process$1.nextTick(function(){tt(null,dt)});return}return dt}if(tt){a(vt,function(At,Tt){if(At)return tt(At);Tt.copy(dt,mt),tt(null,dt)});return}var St=a(vt);return St.copy(dt,mt),dt}function gt(dt,mt,vt){if(typeof mt>"u"&&(mt=0),!c.isBuffer(dt)&&!(dt instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return ot(mt,dt.length),vt===void 0&&(vt=dt.length-mt),st(vt,mt,dt.length),nt(dt,mt,vt)}return browser$2}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var o=requireAlgos(),e=Object.keys(o),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return a};var c=requireBrowser$7();cryptoBrowserify.pbkdf2=c.pbkdf2,cryptoBrowserify.pbkdf2Sync=c.pbkdf2Sync;var j=requireBrowser$5();cryptoBrowserify.Cipher=j.Cipher,cryptoBrowserify.createCipher=j.createCipher,cryptoBrowserify.Cipheriv=j.Cipheriv,cryptoBrowserify.createCipheriv=j.createCipheriv,cryptoBrowserify.Decipher=j.Decipher,cryptoBrowserify.createDecipher=j.createDecipher,cryptoBrowserify.Decipheriv=j.Decipheriv,cryptoBrowserify.createDecipheriv=j.createDecipheriv,cryptoBrowserify.getCiphers=j.getCiphers,cryptoBrowserify.listCiphers=j.listCiphers;var h=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=h.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=h.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=h.getDiffieHellman,cryptoBrowserify.createDiffieHellman=h.createDiffieHellman,cryptoBrowserify.DiffieHellman=h.DiffieHellman;var et=requireBrowser$3();cryptoBrowserify.createSign=et.createSign,cryptoBrowserify.Sign=et.Sign,cryptoBrowserify.createVerify=et.createVerify,cryptoBrowserify.Verify=et.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var ot=requireBrowser$1();cryptoBrowserify.publicEncrypt=ot.publicEncrypt,cryptoBrowserify.privateEncrypt=ot.privateEncrypt,cryptoBrowserify.publicDecrypt=ot.publicDecrypt,cryptoBrowserify.privateDecrypt=ot.privateDecrypt;var st=requireBrowser();return cryptoBrowserify.randomFill=st.randomFill,cryptoBrowserify.randomFillSync=st.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}(function(o){(function(){var e="input is invalid type",a=typeof window=="object",c=a?window:{};c.JS_SHA256_NO_WINDOW&&(a=!1);var j=!a&&typeof self=="object",h=!c.JS_SHA256_NO_NODE_JS&&typeof process$1=="object"&&process$1.versions&&process$1.versions.node;h?c=commonjsGlobal:j&&(c=self);var et=!c.JS_SHA256_NO_COMMON_JS&&!0&&o.exports,ot=!c.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",st="0123456789abcdef".split(""),lt=[-2147483648,8388608,32768,128],nt=[24,16,8,0],gt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],dt=["hex","array","digest","arrayBuffer"],mt=[];(c.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(_t){return Object.prototype.toString.call(_t)==="[object Array]"}),ot&&(c.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(_t){return typeof _t=="object"&&_t.buffer&&_t.buffer.constructor===ArrayBuffer});var vt=function(_t,Rt){return function(Mt){return new At(Rt,!0).update(Mt)[_t]()}},tt=function(_t){var Rt=vt("hex",_t);h&&(Rt=bt(Rt,_t)),Rt.create=function(){return new At(_t)},Rt.update=function(kt){return Rt.create().update(kt)};for(var Mt=0;Mt<dt.length;++Mt){var Et=dt[Mt];Rt[Et]=vt(Et,_t)}return Rt},bt=function(_t,Rt){var Mt=requireCryptoBrowserify(),Et=require$$1$2.Buffer,kt=Rt?"sha224":"sha256",at;Et.from&&!c.JS_SHA256_NO_BUFFER_FROM?at=Et.from:at=function(b){return new Et(b)};var s=function(b){if(typeof b=="string")return Mt.createHash(kt).update(b,"utf8").digest("hex");if(b==null)throw new Error(e);return b.constructor===ArrayBuffer&&(b=new Uint8Array(b)),Array.isArray(b)||ArrayBuffer.isView(b)||b.constructor===Et?Mt.createHash(kt).update(at(b)).digest("hex"):_t(b)};return s},ht=function(_t,Rt){return function(Mt,Et){return new Tt(Mt,Rt,!0).update(Et)[_t]()}},St=function(_t){var Rt=ht("hex",_t);Rt.create=function(kt){return new Tt(kt,_t)},Rt.update=function(kt,at){return Rt.create(kt).update(at)};for(var Mt=0;Mt<dt.length;++Mt){var Et=dt[Mt];Rt[Et]=ht(Et,_t)}return Rt};function At(_t,Rt){Rt?(mt[0]=mt[16]=mt[1]=mt[2]=mt[3]=mt[4]=mt[5]=mt[6]=mt[7]=mt[8]=mt[9]=mt[10]=mt[11]=mt[12]=mt[13]=mt[14]=mt[15]=0,this.blocks=mt):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=_t}At.prototype.update=function(_t){if(!this.finalized){var Rt,Mt=typeof _t;if(Mt!=="string"){if(Mt==="object"){if(_t===null)throw new Error(e);if(ot&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!Array.isArray(_t)&&(!ot||!ArrayBuffer.isView(_t)))throw new Error(e)}else throw new Error(e);Rt=!0}for(var Et,kt=0,at,s=_t.length,b=this.blocks;kt<s;){if(this.hashed&&(this.hashed=!1,b[0]=this.block,this.block=b[16]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=b[9]=b[10]=b[11]=b[12]=b[13]=b[14]=b[15]=0),Rt)for(at=this.start;kt<s&&at<64;++kt)b[at>>>2]|=_t[kt]<<nt[at++&3];else for(at=this.start;kt<s&&at<64;++kt)Et=_t.charCodeAt(kt),Et<128?b[at>>>2]|=Et<<nt[at++&3]:Et<2048?(b[at>>>2]|=(192|Et>>>6)<<nt[at++&3],b[at>>>2]|=(128|Et&63)<<nt[at++&3]):Et<55296||Et>=57344?(b[at>>>2]|=(224|Et>>>12)<<nt[at++&3],b[at>>>2]|=(128|Et>>>6&63)<<nt[at++&3],b[at>>>2]|=(128|Et&63)<<nt[at++&3]):(Et=65536+((Et&1023)<<10|_t.charCodeAt(++kt)&1023),b[at>>>2]|=(240|Et>>>18)<<nt[at++&3],b[at>>>2]|=(128|Et>>>12&63)<<nt[at++&3],b[at>>>2]|=(128|Et>>>6&63)<<nt[at++&3],b[at>>>2]|=(128|Et&63)<<nt[at++&3]);this.lastByteIndex=at,this.bytes+=at-this.start,at>=64?(this.block=b[16],this.start=at-64,this.hash(),this.hashed=!0):this.start=at}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},At.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var _t=this.blocks,Rt=this.lastByteIndex;_t[16]=this.block,_t[Rt>>>2]|=lt[Rt&3],this.block=_t[16],Rt>=56&&(this.hashed||this.hash(),_t[0]=this.block,_t[16]=_t[1]=_t[2]=_t[3]=_t[4]=_t[5]=_t[6]=_t[7]=_t[8]=_t[9]=_t[10]=_t[11]=_t[12]=_t[13]=_t[14]=_t[15]=0),_t[14]=this.hBytes<<3|this.bytes>>>29,_t[15]=this.bytes<<3,this.hash()}},At.prototype.hash=function(){var _t=this.h0,Rt=this.h1,Mt=this.h2,Et=this.h3,kt=this.h4,at=this.h5,s=this.h6,b=this.h7,$=this.blocks,_e,it,pt,yt,ct,_,rt,Ct,It,Nt,Ut;for(_e=16;_e<64;++_e)ct=$[_e-15],it=(ct>>>7|ct<<25)^(ct>>>18|ct<<14)^ct>>>3,ct=$[_e-2],pt=(ct>>>17|ct<<15)^(ct>>>19|ct<<13)^ct>>>10,$[_e]=$[_e-16]+it+$[_e-7]+pt<<0;for(Ut=Rt&Mt,_e=0;_e<64;_e+=4)this.first?(this.is224?(Ct=300032,ct=$[0]-1413257819,b=ct-150054599<<0,Et=ct+24177077<<0):(Ct=704751109,ct=$[0]-210244248,b=ct-1521486534<<0,Et=ct+143694565<<0),this.first=!1):(it=(_t>>>2|_t<<30)^(_t>>>13|_t<<19)^(_t>>>22|_t<<10),pt=(kt>>>6|kt<<26)^(kt>>>11|kt<<21)^(kt>>>25|kt<<7),Ct=_t&Rt,yt=Ct^_t&Mt^Ut,rt=kt&at^~kt&s,ct=b+pt+rt+gt[_e]+$[_e],_=it+yt,b=Et+ct<<0,Et=ct+_<<0),it=(Et>>>2|Et<<30)^(Et>>>13|Et<<19)^(Et>>>22|Et<<10),pt=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),It=Et&_t,yt=It^Et&Rt^Ct,rt=b&kt^~b&at,ct=s+pt+rt+gt[_e+1]+$[_e+1],_=it+yt,s=Mt+ct<<0,Mt=ct+_<<0,it=(Mt>>>2|Mt<<30)^(Mt>>>13|Mt<<19)^(Mt>>>22|Mt<<10),pt=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),Nt=Mt&Et,yt=Nt^Mt&_t^It,rt=s&b^~s&kt,ct=at+pt+rt+gt[_e+2]+$[_e+2],_=it+yt,at=Rt+ct<<0,Rt=ct+_<<0,it=(Rt>>>2|Rt<<30)^(Rt>>>13|Rt<<19)^(Rt>>>22|Rt<<10),pt=(at>>>6|at<<26)^(at>>>11|at<<21)^(at>>>25|at<<7),Ut=Rt&Mt,yt=Ut^Rt&Et^Nt,rt=at&s^~at&b,ct=kt+pt+rt+gt[_e+3]+$[_e+3],_=it+yt,kt=_t+ct<<0,_t=ct+_<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+_t<<0,this.h1=this.h1+Rt<<0,this.h2=this.h2+Mt<<0,this.h3=this.h3+Et<<0,this.h4=this.h4+kt<<0,this.h5=this.h5+at<<0,this.h6=this.h6+s<<0,this.h7=this.h7+b<<0},At.prototype.hex=function(){this.finalize();var _t=this.h0,Rt=this.h1,Mt=this.h2,Et=this.h3,kt=this.h4,at=this.h5,s=this.h6,b=this.h7,$=st[_t>>>28&15]+st[_t>>>24&15]+st[_t>>>20&15]+st[_t>>>16&15]+st[_t>>>12&15]+st[_t>>>8&15]+st[_t>>>4&15]+st[_t&15]+st[Rt>>>28&15]+st[Rt>>>24&15]+st[Rt>>>20&15]+st[Rt>>>16&15]+st[Rt>>>12&15]+st[Rt>>>8&15]+st[Rt>>>4&15]+st[Rt&15]+st[Mt>>>28&15]+st[Mt>>>24&15]+st[Mt>>>20&15]+st[Mt>>>16&15]+st[Mt>>>12&15]+st[Mt>>>8&15]+st[Mt>>>4&15]+st[Mt&15]+st[Et>>>28&15]+st[Et>>>24&15]+st[Et>>>20&15]+st[Et>>>16&15]+st[Et>>>12&15]+st[Et>>>8&15]+st[Et>>>4&15]+st[Et&15]+st[kt>>>28&15]+st[kt>>>24&15]+st[kt>>>20&15]+st[kt>>>16&15]+st[kt>>>12&15]+st[kt>>>8&15]+st[kt>>>4&15]+st[kt&15]+st[at>>>28&15]+st[at>>>24&15]+st[at>>>20&15]+st[at>>>16&15]+st[at>>>12&15]+st[at>>>8&15]+st[at>>>4&15]+st[at&15]+st[s>>>28&15]+st[s>>>24&15]+st[s>>>20&15]+st[s>>>16&15]+st[s>>>12&15]+st[s>>>8&15]+st[s>>>4&15]+st[s&15];return this.is224||($+=st[b>>>28&15]+st[b>>>24&15]+st[b>>>20&15]+st[b>>>16&15]+st[b>>>12&15]+st[b>>>8&15]+st[b>>>4&15]+st[b&15]),$},At.prototype.toString=At.prototype.hex,At.prototype.digest=function(){this.finalize();var _t=this.h0,Rt=this.h1,Mt=this.h2,Et=this.h3,kt=this.h4,at=this.h5,s=this.h6,b=this.h7,$=[_t>>>24&255,_t>>>16&255,_t>>>8&255,_t&255,Rt>>>24&255,Rt>>>16&255,Rt>>>8&255,Rt&255,Mt>>>24&255,Mt>>>16&255,Mt>>>8&255,Mt&255,Et>>>24&255,Et>>>16&255,Et>>>8&255,Et&255,kt>>>24&255,kt>>>16&255,kt>>>8&255,kt&255,at>>>24&255,at>>>16&255,at>>>8&255,at&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255];return this.is224||$.push(b>>>24&255,b>>>16&255,b>>>8&255,b&255),$},At.prototype.array=At.prototype.digest,At.prototype.arrayBuffer=function(){this.finalize();var _t=new ArrayBuffer(this.is224?28:32),Rt=new DataView(_t);return Rt.setUint32(0,this.h0),Rt.setUint32(4,this.h1),Rt.setUint32(8,this.h2),Rt.setUint32(12,this.h3),Rt.setUint32(16,this.h4),Rt.setUint32(20,this.h5),Rt.setUint32(24,this.h6),this.is224||Rt.setUint32(28,this.h7),_t};function Tt(_t,Rt,Mt){var Et,kt=typeof _t;if(kt==="string"){var at=[],s=_t.length,b=0,$;for(Et=0;Et<s;++Et)$=_t.charCodeAt(Et),$<128?at[b++]=$:$<2048?(at[b++]=192|$>>>6,at[b++]=128|$&63):$<55296||$>=57344?(at[b++]=224|$>>>12,at[b++]=128|$>>>6&63,at[b++]=128|$&63):($=65536+(($&1023)<<10|_t.charCodeAt(++Et)&1023),at[b++]=240|$>>>18,at[b++]=128|$>>>12&63,at[b++]=128|$>>>6&63,at[b++]=128|$&63);_t=at}else if(kt==="object"){if(_t===null)throw new Error(e);if(ot&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!Array.isArray(_t)&&(!ot||!ArrayBuffer.isView(_t)))throw new Error(e)}else throw new Error(e);_t.length>64&&(_t=new At(Rt,!0).update(_t).array());var _e=[],it=[];for(Et=0;Et<64;++Et){var pt=_t[Et]||0;_e[Et]=92^pt,it[Et]=54^pt}At.call(this,Rt,Mt),this.update(it),this.oKeyPad=_e,this.inner=!0,this.sharedMemory=Mt}Tt.prototype=new At,Tt.prototype.finalize=function(){if(At.prototype.finalize.call(this),this.inner){this.inner=!1;var _t=this.array();At.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(_t),At.prototype.finalize.call(this)}};var ft=tt();ft.sha256=ft,ft.sha224=tt(!0),ft.sha256.hmac=St(),ft.sha224.hmac=St(!0),et?o.exports=ft:(c.sha256=ft.sha256,c.sha224=ft.sha224)})()})(sha256$2);class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");/*! js-cookie v3.0.5 | MIT */function assign(o){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var c in a)o[c]=a[c]}return o}var defaultConverter={read:function(o){return o[0]==='"'&&(o=o.slice(1,-1)),o.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(o){return encodeURIComponent(o).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(o,e){function a(j,h,et){if(!(typeof document>"u")){et=assign({},e,et),typeof et.expires=="number"&&(et.expires=new Date(Date.now()+et.expires*864e5)),et.expires&&(et.expires=et.expires.toUTCString()),j=encodeURIComponent(j).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var ot="";for(var st in et)et[st]&&(ot+="; "+st,et[st]!==!0&&(ot+="="+et[st].split(";")[0]));return document.cookie=j+"="+o.write(h,j)+ot}}function c(j){if(!(typeof document>"u"||arguments.length&&!j)){for(var h=document.cookie?document.cookie.split("; "):[],et={},ot=0;ot<h.length;ot++){var st=h[ot].split("="),lt=st.slice(1).join("=");try{var nt=decodeURIComponent(st[0]);if(et[nt]=o.read(lt,nt),j===nt)break}catch{}}return j?et[j]:et}}return Object.create({set:a,get:c,remove:function(j,h){a(j,"",assign({},h,{expires:-1}))},withAttributes:function(j){return init(this.converter,assign({},this.attributes,j))},withConverter:function(j){return init(assign({},this.converter,j),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(o)}})}var api=init(defaultConverter,{path:"/"});const getAuthToken=()=>api.get("authToken");class Http{static async get(e){const a=await getAuthToken(),c={};a&&(c.Authorization=`Bearer ${a}`);const j=await fetch(e,{headers:c}),h=await j.json();return{status:j.status,data:h}}static async post(e,a){const c=await getAuthToken(),j={"Content-Type":"application/json"};c&&(j.Authorization=`Bearer ${c}`);const h=await fetch(e,{method:"POST",headers:j,body:JSON.stringify(a)}),et=await h.json();return{status:h.status,data:et}}static async del(e,a){const c=await getAuthToken(),j={"Content-Type":"application/json"};c&&(j.Authorization=`Bearer ${c}`);const h=await fetch(e,{method:"DELETE",headers:j,body:JSON.stringify(a)});if(!h.ok)return{status:h.status};const et=await h.text();return et?{detail:et,status:h.status}:{status:h.status}}}async function getStreamingSessions(o){const e=`${o}/streaming/stream`;return await Http.get(e)}async function getStreamingSessionInfo(o,e){const a=`${o}/streaming/stream/${e}`;return await Http.get(a)}async function createStreamingSession(o,e,a,c,j){const h=`${o}/streaming/stream`;console.log(`Requesting session with asset url: ${j}`);const et={arguments:{usd_stage_uri:j??""},id:e,version:a,profile:c};return await Http.post(h,et)}async function destroyStreamingSession(o,e){const a=`${o}/streaming/stream`,c={id:e};return await Http.del(a,c)}const ServiceComponent=()=>{const o=useDispatch(),e=useSelector(gt=>gt.service.sessionService),a=useSelector(gt=>gt.service.appId),c=useSelector(gt=>gt.service.version),j=useSelector(gt=>gt.service.profile),h=useSelector(gt=>gt.service.sessionId),et=useSelector(gt=>gt.usdStorage.url),ot=async()=>{console.log(`Requesting streaming session from ${e.address}`),et&&o(setLoadingState("loading"));const gt=await createStreamingSession(e.address,a,c,j,et);if(gt.status>400){o(setStatus$1(gt.status)),console.log({connectionText:`Failed to create a new streaming session for ${a} ${c}. Error code ${gt.status}`,loadingText:"Failed to create stream"});return}o(setSessionId(gt.data.id)),o(setStatus$1(gt.status)),gt.status===202?await st(gt.data.id):lt(gt.data)},st=async gt=>{console.log(`Polling ${gt}`);const dt=await getStreamingSessionInfo(e.address,gt);if(dt.status===200){lt(dt.data),o(setStatus$1(dt.status));return}setTimeout(()=>st(gt),6e4)},lt=gt=>{console.log("Applying stream configuration.");const dt=Object.keys(gt.routes)[0],mt=gt.routes[dt].routes,vt=mt.find(bt=>bt.description==="signaling"),tt=mt.find(bt=>bt.description==="media");if(!vt||!tt){console.error("Signaling or media data is missing");return}o(setRemoteStream({signalingserver:dt,signalingport:vt.source_port,mediaserver:dt,mediaport:tt.source_port,accessToken:"invalid-token",sessionid:gt.id}))},nt=async gt=>{console.log(`Destroying session ${gt}`);const dt=await destroyStreamingSession(e.address,gt);o(setSessionId("")),o(setStatus$1(0)),o(setServer("")),console.log(dt)};return reactExports.useEffect(()=>{e.address&&(e.desiredState==="connected"&&!h?ot():e.desiredState==="destroyed"&&h&&nt(h))},[e,h]),null};var dist={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(o,e){(function(a,c){o.exports=c()})(commonjsGlobal,()=>(()=>{var a={355:function(et,ot,st){var lt=this&&this.__createBinding||(Object.create?function(gt,dt,mt,vt){vt===void 0&&(vt=mt);var tt=Object.getOwnPropertyDescriptor(dt,mt);tt&&!("get"in tt?!dt.__esModule:tt.writable||tt.configurable)||(tt={enumerable:!0,get:function(){return dt[mt]}}),Object.defineProperty(gt,vt,tt)}:function(gt,dt,mt,vt){vt===void 0&&(vt=mt),gt[vt]=dt[mt]}),nt=this&&this.__exportStar||function(gt,dt){for(var mt in gt)mt==="default"||Object.prototype.hasOwnProperty.call(dt,mt)||lt(dt,gt,mt)};Object.defineProperty(ot,"__esModule",{value:!0}),nt(st(11),ot)},11:(et,ot)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.LogImpl=void 0;class st{constructor(nt,gt){this.module=nt,this.enabled=!0,this.shouldLogToConsole=!1,this.queue=[],gt&&(gt.enable!==void 0&&(this.enabled=gt.enable),gt.enableConsoleLogging!==void 0&&(this.shouldLogToConsole=gt.enableConsoleLogging)),this._nop=(dt,mt,...vt)=>{},this._d=(dt,mt,...vt)=>this.handleLog("DEBUG",dt,mt,vt),this._i=(dt,mt,...vt)=>this.handleLog("INFO",dt,mt,vt),this._w=(dt,mt,...vt)=>this.handleLog("WARN",dt,mt,vt),this._e=(dt,mt,...vt)=>this.handleLog("ERROR",dt,mt,vt)}get d(){return this.enabled?this.shouldLogToConsole?console.debug.bind(console,"%s DEBUG [%s] %s@@",this.renderDate(new Date)):this._d:this._nop}get w(){return this.enabled?this.shouldLogToConsole?console.warn.bind(console,"%s WARN  [%s] %s@@",this.renderDate(new Date)):this._w:this._nop}get i(){return this.enabled?this.shouldLogToConsole?console.info.bind(console,"%s INFO  [%s] %s@@",this.renderDate(new Date)):this._i:this._nop}get e(){return this.shouldLogToConsole?console.error.bind(console,"%s ERROR [%s] %s@@",this.renderDate(new Date)):this._e}setLogCallback(nt){this.callback=nt,this.callback&&this.queue.length&&window.setTimeout(()=>{this.executeLogCallback(!0)})}isCallbackRegistered(){return!!this.callback}sanitize(nt){if(!nt)return nt;const gt=[{secretBlock:/(partnerCustomData" *: *")((\\"|[^"])*)(?=")/g,replaceStr:"$1***"},{secretBlock:/("clientIp" *: *")(\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?=")/g,replaceStr:"$1***"}];for(const dt of gt)nt=nt.replace(dt.secretBlock,dt.replaceStr);return nt}stringifyArgs(...nt){return nt.length?`##${JSON.stringify(nt)}`:""}executeLogCallback(nt){this.callback&&this.queue.length&&(this.callback(this.queue[0]),this.queue.shift(),nt&&this.queue.length&&window.setTimeout(()=>{this.executeLogCallback(!0)}))}handleLog(nt,gt,dt,mt){let vt=`${dt}${this.stringifyArgs(...mt)}`,tt={timestamp:this.renderDate(new Date),level:nt,tag:this.module+"/"+gt,message:vt};this.queue.push(tt),this.callback?window.setTimeout(()=>{this.executeLogCallback(!1)}):this.queue.length>st.MAX_QUEUE_SIZE&&this.queue.shift()}renderDate(nt){const gt=(mt,vt,tt)=>{const bt=vt-mt.length;if(bt>0){let ht="";for(let St=0;St<bt;St++)ht+=tt;return ht+=mt,ht}return mt};let dt="";return dt=gt(nt.getFullYear().toString(),4,"0")+"-"+gt((nt.getMonth()+1).toString(),2,"0")+"-"+(mt=>gt(mt.getDate().toString(),2,"0"))(nt)+" "+(mt=>gt(mt.getHours().toString(),2,"0"))(nt)+":"+(mt=>gt(mt.getMinutes().toString(),2,"0"))(nt)+":"+(mt=>gt(mt.getSeconds().toString(),2,"0"))(nt)+"."+(mt=>gt(mt.getMilliseconds().toString(),3,"0"))(nt),dt}}ot.LogImpl=st,st.MAX_QUEUE_SIZE=50},271:(et,ot,st)=>{(()=>{var lt={393:(mt,vt,tt)=>{var bt=!0,ht=!1;function St(d){if(d)switch(d){case"enable":case"on":case"1":case"true":return!0;case"disable":case"off":case"0":case"false":return!1}}var At=tt(778),Tt=tt(754),ft=new At.LogImpl("R",{enable:bt,Sg:ht});function _t(){return Mt||(Mt=new Et),Mt}function Rt(d,ut,wt){const xt=d.g.startSpan(ut);return Tt.context.with(Tt.trace.setSpan(Tt.context.active(),xt),async()=>{try{const Ot=wt();return Ot instanceof Promise?await Ot:Ot}finally{xt.end()}})}var Mt,Et=class{constructor(){this.g=Tt.trace.getTracer("gfn-web-gamestream","2.0")}},kt=class{constructor(d,ut){var wt;this.g=0,this.h=this.o=!1,this.promise=new Promise((xt,Ot)=>{this.C=xt,this.m=Ot}),ut!=null&&ut.aborted?(this.h=!0,this.m()):(this.j=ut,this.l=this.s.bind(this),(wt=this.j)===null||wt===void 0||wt.addEventListener("abort",this.l),this.g=window.setTimeout(this.v.bind(this),d))}cancel(){var d;(d=this.j)===null||d===void 0||d.removeEventListener("abort",this.l),this.g&&(window.clearTimeout(this.g),this.g=0),this.j=void 0}s(){this.h=!0,this.m(),this.cancel()}v(){this.o=!0,this.C(),this.g=0,this.cancel()}};function at(d){return d.os==="Xbox"&&d.browser==="Edge"}function s(d){return d.os==="iOS"||d.os==="iPadOS"}function b(d){return!!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(d)}function $(d){return"0x"+("00000000"+(d>>>0).toString(16).toUpperCase()).slice(-8)}function _e(d){return d?d.os==="iOS":/iPhone|iPod/.test(navigator.userAgent)}function it(d){return d.os==="WebOS"}function pt(d){return d.os==="ChromeOS"}function yt(d){return d.os==="Windows"}function ct(d){return d.os==="macOS"}function _(d){return d.os==="Tizen"}var rt={method:"GET",headers:{},body:"",retryCount:0,timeout:0,keepalive:!1};function Ct(){const d=Tt.trace.getActiveSpan();d&&d.setAttribute("error","true")}function It(d,ut=rt,wt,xt){var Ot;const Vt=(Ot=ut.method)!==null&&Ot!==void 0?Ot:"GET";return Rt(_t(),Vt,()=>{var Dt=ut.headers;const Ft=Tt.trace.getActiveSpan();if(Ft){var Qt=new Map([["component","rtcutils-core"],["component.version","2.0"],["http.method",Vt],["http.url",d],["type",""],["http.hostname",""],["http.path",""]]);try{const rr=new URL(d);Qt.set("type",rr.protocol),Qt.set("http.hostname",rr.hostname),Qt.set("http.path",rr.pathname)}catch{ft.e("{d988e7f}","{997fb3a}")}for(const[rr,nr]of Qt)Ft.setAttribute(rr,nr);Ft.setAttributes(Dt)}return function(rr,nr=rt,lr,Yt){var dr,ir;let Xt=nr.retryCount===void 0?1:nr.retryCount+1;const br=Xt,Tr=(dr=nr.hg)!==null&&dr!==void 0?dr:500;let Sr=Tr;const Mr=(ir=nr.method)!==null&&ir!==void 0?ir:"GET";let gr=new Headers;const Er=Yt??new AbortController;return(_r=>{if(_r)switch(_r.type){case 1:_r.token&&gr.set("authorization","GFNJWT "+_r.token);break;case 2:_r.token&&gr.set("authorization","GFNPartnerJWT auth="+_r.token)}nr.headers!==void 0&&Object.keys(nr.headers).forEach(cr=>{gr.set(cr,nr.headers[cr])}),_r={},Tt.propagation.inject(Tt.context.active(),_r);for(const[cr,kr]of Object.entries(_r))gr.set(cr,kr)})(lr),new Promise((_r,cr)=>{const kr=gn=>{Ct(),cr(gn)},Wr=()=>{if(navigator.onLine){let gn,mn={method:Mr,headers:gr,mode:"cors",keepalive:nr.keepalive,signal:Er.signal,cache:"no-store"};Mr!=="GET"&&Mr!=="HEAD"&&(mn.body=nr.body);const On=[0,DOMException.NETWORK_ERR,DOMException.TIMEOUT_ERR,503],Wn=nr.timeout?new kt(nr.timeout):void 0,sn=[];sn.push(fetch(rr,mn)),Wn&&sn.push(Wn.promise),Promise.race(sn).then(In=>{if(Wn!=null&&Wn.o)throw ft.w("{d988e7f}","{5a69b89}",rr),{code:DOMException.TIMEOUT_ERR,message:"Timeout while performing HTTP request"};if(In instanceof globalThis.Response)return gn=In.status,In.text()}).then(In=>{if(!In&&On.includes(gn)){if(1<Xt)throw{code:gn,message:"Internal server error."};ft.w("{d988e7f}","{d639e52}",gn,br)}var $n=(In={status:gn,data:In??"",Kc:br-Xt}).status;const Mn=Tt.trace.getActiveSpan();Mn&&(Mn.setAttribute("error","false"),Mn.setAttribute("http.status_code",$n.toString())),_r(In)}).catch(In=>{const $n=Mn=>[0,DOMException.NETWORK_ERR,DOMException.TIMEOUT_ERR].includes(Mn)?(ft.d("{d988e7f}","{0a9fabe}"),3237089282):Mn==DOMException.ABORT_ERR?(ft.d("{d988e7f}","{235387a}"),15867905):(ft.w("{d988e7f}","{f116c88}",Mn),3237089284);In instanceof Error?ft.d("{d988e7f}","{b6e778a}",In.message):ft.d("{d988e7f}","{ec768a1}",JSON.stringify(In),In),(In=(Mn=>{let lo=0;return Mn!=null&&Mn.code?lo=Mn==null?void 0:Mn.code:Mn!=null&&Mn.name&&(Mn.name==="AbortError"?lo=DOMException.ABORT_ERR:Mn.name==="NetworkError"?lo=DOMException.NETWORK_ERR:Mn.name==="TimeoutError"&&(lo=DOMException.TIMEOUT_ERR)),lo})(In))==0&&nr.keepalive&&(nr.keepalive=!1),On.includes(In)?(Mn=>{if(1<Xt){Xt--,ft.d("{d988e7f}","{97555ed}",Mn,Xt);const lo=new kt(Sr,Er.signal);return lo.promise.then(Wr).catch(oo=>{lo.h?(oo={code:15867905,Kc:br-Xt},Ct(),cr(oo)):(ft.w("{d988e7f}","{d3ca39d}",JSON.stringify(oo)),oo={code:3237089284,Kc:br-Xt},Ct(),cr(oo))}),Sr+=Tr,!0}return!1})(In)||(ft.w("{d988e7f}","{dff1a05}",br,In),kr({code:$n(In),Kc:br-Xt})):kr({code:$n(In),Kc:br-Xt})}).finally(()=>{Wn==null||Wn.cancel()})}else kr({code:3237089281,description:"No network",Kc:br-Xt})};Wr()})}(d,ut,wt,xt)})}function Nt(){var d,ut;return(ut=(d=window.matchMedia)===null||d===void 0?void 0:d.call(window,"(pointer:coarse)"))===null||ut===void 0?void 0:ut.matches}function Ut(){var d,ut;return!!window.TouchEvent&&((ut=(d=window.matchMedia)===null||d===void 0?void 0:d.call(window,"(any-pointer:coarse)"))===null||ut===void 0?void 0:ut.matches)}function Gt(d){return d.os==="Tizen"||d.os==="WebOS"}function Pt(){let d=new Uint8Array(36);window.crypto.getRandomValues(d);let ut="";for(let wt=0;36>wt;wt++){let xt=d[wt]%16;wt==8||wt==13||wt==18||wt==23?ut+="-":wt==14?ut+="4":(wt==19&&(xt=3&xt|8),ut+=xt.toString(16))}return ft.i("{d988e7f}","{534eaf4}",ut),ut}function qt(d,ut){for(let wt=0;wt<ut.length&&wt<d.length;++wt){const xt=d[wt],Ot=ut[wt];if(xt>Ot)return!0;if(xt<Ot)return!1}if(d.length<ut.length){for(d=d.length;d<ut.length;++d)if(0<ut[d])return!1}return!0}function Kt(d,ut,wt,xt,Ot){if(d.browser!="Chrome")return!1;ut=[ut,wt??0,xt??0,Ot??0];try{return qt(d.browserBestVer.split(".").map(Vt=>Number.parseInt(Vt)),ut)}catch{ft.w("{d988e7f}","{bcd8f94}")}return!0}function jt(d,ut,wt,xt){if(!s(d))return!1;try{return Ht(d.osVer,ut,wt,xt)}catch{ft.w("{d988e7f}","{cf4149f}")}return!ut}function Ht(d,ut,wt,xt){d=d.replace(/[^0-9.]/,"").split(".").map(Vt=>Number.parseInt(Vt));const Ot=[wt,xt??0];return d.length===1&&d.push(0),ut?d.every((Vt,Dt)=>Vt===Ot[Dt]):qt(d,Ot)}function Bt(d,ut=500){const wt=new AbortController;return window.setTimeout(()=>{wt.abort()},ut),fetch(d,{method:"OPTIONS",signal:wt.signal}).then(xt=>xt).catch(xt=>{throw xt})}function Jt(d,ut,wt){return{code:d,description:ut,error:wt!==null?wt:void 0}}function sr(d){switch(d){case"ETHERNET":return"ETHERNET";case"WIFI":case"WIFI_2_4":return"WIFI_2_4";case"WIFI_5_0":return"WIFI_5_0";case"MOBILE":return"MOBILE";case"MOBILE_2G":return"MOBILE_2G";case"MOBILE_3G":return"MOBILE_3G";case"MOBILE_4G":return"MOBILE_4G";case"MOBILE_5G":return"MOBILE_5G";case"OTHER":case"BLUETOOTH":case"WIMAX":return"OTHER";default:return"UNKNOWN"}}function hr(d){return d.replace(/(partnerCustomData" *: *")((\\"|[^"])*)(?=")/g,"$1***")}var Ar=class{constructor(d){this.s=new Map,this.sa=d}addListener(d,ut){var wt=this.s.get(d);wt!==void 0?wt.add(ut):((wt=new Set).add(ut),this.s.set(d,wt))}removeListener(d,ut){(d=this.s.get(d))==null||d.delete(ut)}removeAllListenersOfEvent(d){this.s.delete(d)}removeAllListeners(){this.s.clear()}hasListener(d){return(d=this.s.get(d))!==void 0&&0<d.size}emit(d,...ut){try{let wt=this.s.get(d);if(wt)for(const xt of wt)this.sa?xt(...ut):window.setTimeout(xt,0,...ut)}catch(wt){console.log("Exception in emit: "+wt)}}};function yn(d,ut){var wt=Br,xt=Gr;let Ot=[];var Vt=d;let Dt=[];do Dt.push(Vt),Vt=Object.getPrototypeOf(Vt);while(Vt.name!="");Dt.reverse();for(let Ft of Dt)Ot.push(Ft.toString().replace(/(extends )[^ {]*\.([^ ]*[ {])/,"$1$2"));return Ot.push(`${wt.toString()}`),ut?(Ot.push(`${ut.toString()}`),Ot.push(`onconnect = (event) => { ${ut.name}(${d.name}, event, ${wt.name}); };`)):Ot.push(`onmessage = (event) => { ${wt.name}(${d.name}, event); };`),Ot.push(`${xt.toString()}`),Ot.push(`onerror = (event) => { ${xt.name}(event); };`),URL.createObjectURL(new Blob(Ot,{type:"text/javascript"}))}function Lr(d,ut,wt){if(!d.prototype.nb)throw Error("Invalid Worker class provided");d=yn(d);const xt=new Worker(d);URL.revokeObjectURL(d),Qr(xt,ut,wt)}function wr(d,ut,wt){var xt=window;if(xt.SharedWorker===void 0)throw Error("SharedWorker not supported");if(!d.prototype.nb)throw Error("Invalid Worker class provided");return d=yn(d,Bn),xt=new xt.SharedWorker(d),URL.revokeObjectURL(d),Qr(xt,ut,wt),xt}const En=new Map;function Dr(d){if(!En.has(d)){d.postMessage.bind(d)({Rb:2,data:null});var ut=window.setTimeout(()=>{const wt=En.get(d);wt&&(clearTimeout(wt),En.delete(d)),d instanceof Worker?d.terminate():d instanceof MessagePort&&d.close()},150);En.set(d,ut)}}function Qr(d,ut,wt){const xt="port"in d?d.port:d,Ot=xt.postMessage.bind(xt);let Vt=!1;const Dt=Ft=>{Vt||(Vt=!0,ft.e("{10ca8e2}","{03baf25}",Ft,typeof Ft),Dr(xt),wt(Ft))};xt.onmessage=Ft=>{let Qt=(Ft=Ft.data).data;switch(Ft.Rb){case 1:Ot({Rb:3,data:null});break;case 4:ut(Qt),Dr(xt);break;case 5:Dt(Qt)}},"onmessageerror"in xt&&(xt.onmessageerror=Dt),d.onerror=Dt,Ot({Rb:0,data:null})}function Bn(d,ut,wt){const xt=globalThis;xt.port=ut.ports[0],xt.port.onmessage=wt.bind(self,d)}function Br(d,ut){var wt;const xt=globalThis;xt.Od=(wt=xt.Od)!==null&&wt!==void 0?wt:{},ut=(wt=ut.data).Rb,wt=wt.data;let Ot="port"in xt?xt.port:self;switch(ut){case 0:var Vt=new d;xt.Od[d.name]=Vt,Ot.postMessage({Rb:1,data:null});break;case 2:(Vt=self==null?void 0:self.close)===null||Vt===void 0||Vt.call(self);break;case 3:Promise.resolve(xt.Od[d.name].nb()).then(Dt=>{Ot.postMessage({Rb:4,data:Dt})});break;default:throw Error(`Unknown message: ${ut}:${wt}`)}}function Gr(d){const ut=globalThis;("port"in ut?ut.port:self).postMessage({Rb:5,data:d})}function Dn(d){return d.start=performance.now(),new Promise(ut=>{d.Kf?ut(d.u):async function(wt){var xt=Promise,Ot=xt.all,Vt=function(Xt){return new Promise(br=>{let Tr=!1;const Sr=cr=>{if(Xt.ka)clearTimeout(Xt.ka),Xt.ka=0;else if(Tr)return ft.w("{3c72abb}","{c1bb269}"),void Wt(Xt,"GL",Xt.De-performance.now());if(!Xt.rc){var kr=cr.Qf;if(kr.startsWith("ANGLE")){var Wr=kr.split(",");1<(Wr==null?void 0:Wr.length)&&(Xt.gpuDetail=Wr[1].trim())}else Xt.gpuDetail=kr;Wr=kr.toLowerCase(),kr.includes("SraKmd")?(Xt.I=!0,kr.includes("SraKmd_arden")&&(Xt.Da=!0),(kr=/D3D11-(\d{2,}\.\d{1,}\.\d{5,}\.\d{4,})/.exec(kr))&&1<kr.length&&(Xt.v=kr[1])):kr.includes("AMD")&&Wr.includes("vangogh")&&(Xt.Bb=!0),Xt.Fe=cr.Gf,Xt.rc=!0}br()};let Mr=!1,gr=!1;const Er=cr=>{typeof cr=="string"?Lt(Xt,"GL",cr):"data"in cr?zt(Xt,"GL",cr):Zt(Xt,"GL",cr),gr=!0,ft.e("{3c72abb}","{9e45306}",cr)};let _r=0;try{self.OffscreenCanvas&&(Mr=!0,Lr(on,Sr,Er),_r=150)}catch(cr){gr=!0,ar(Xt,"GL",cr),ft.w("{3c72abb}","{caf8cd7}",cr)}window.setTimeout(()=>{Xt.rc||(Xt.ka=window.setTimeout(()=>{Xt.ka=0,Xt.De=performance.now(),gr?ft.w("{3c72abb}","{fbe663c}"):Mr?(ft.w("{3c72abb}","{2577061}"),Or(Xt,"GL")):(ft.i("{3c72abb}","{95c252e}"),vr(Xt,"GL"));const cr=new on().nb();Sr(cr),Tr=!0},_r))},0)})}(wt),Dt=function(Xt){return new Promise(br=>{if(navigator.userAgentData){var Tr=_r=>{_r&&(Xt.sa&&(clearTimeout(Xt.sa),Xt.sa=0),(cr=>{var kr;if(!Xt.Rf){var Wr=cr.model,gn=cr.platform,mn=cr.platformVersion,On=cr.uaFullVersion,Wn=cr.bitness;Wr==""&&gn==""&&mn==""&&On==""?Xt.lb&&Xt.R||Xt.Ka||Wn==null||Xt.R&&!Xt.$||(Xt.o=!0):Wn==""&&gn!="Android"&&(Xt.o=!0),Wr&&(Wr==="Xbox"?Xt.ca=!0:Wr.startsWith("AFT")?(Xt.ef=!0,Xt.N=!0):Wr.includes("BRAVIA")?(Xt.N=!0,Xt.Ye=!0):Wr==="Chromecast"?(Xt.N=!0,Xt.cf=!0,Xt.deviceName="CHROMECAST"):Wr==="SHIELD Android TV"?(Xt.N=!0,Xt.mf=!0,Xt.deviceName="SHIELDTV"):Wr.startsWith("MiTV")?(Xt.N=!0,Xt.hf=!0,Xt.deviceName="MITV"):Wr.startsWith("TVision")&&(Xt.N=!0,Xt.uf=!0,Xt.deviceName="TVISION")),gn==="Windows"?Xt.P=!0:gn==="macOS"?Xt.L=!0:gn==="Chrome OS"||gn==="ChromeOS"?Xt.O=!0:gn==="Chromium OS"?Xt.ea=!0:gn==="Android"?Xt.da=!0:gn==="Linux"&&(mn==""?(Xt.da=!0,Xt.vf=!0):Xt.na=!0),Wr=sn=>{if(sn&&typeof sn=="string")return sn.replace(/[-._,:;|#@]/g,".")},gn=sn=>Xt.P&&!Xt.ca?(In=>{if(!In||!Xt.qa||95>+Xt.qa)return In;switch(In.split(".").map($n=>Number.parseInt($n))[0]){case 0:return"8-";case 1:return"10.0.10240";case 2:return"10.0.10586";case 3:return"10.0.14393";case 4:return"10.0.15063";case 5:return"10.0.16299";case 6:return"10.0.17134";case 7:return"10.0.17763";case 8:return"10.0.18362+";case 9:return"10.0.9";case 10:return"10.0.19041+";case 11:return"10.0.11";case 12:return"10.0.12";case 13:return"11.0.0";case 14:return"11.0.22000.0";case 15:return"11.0.22621.0";default:return"11.0.22621.0+"}})(sn):sn,cr.brands&&0<cr.brands.length&&function(sn,In){var $n;sn.ra=!0,In.mobile&&(sn.Cb=!0);var Mn=In.brands||[];In=0;for(const lo of Mn){Mn=lo.brand;const oo=lo.version;Mn==="Google Chrome"?(sn.ta=!0,sn.m=oo):Mn==="Microsoft Edge"?(sn.$a=!0,sn.m=oo):Mn==="Opera"?(sn.ua=!0,sn.m=oo):Mn==="Yandex"?(sn.ab=!0,sn.m=oo):Mn==="Chromium"?(sn.Z=!0,sn.m=($n=sn.m)!==null&&$n!==void 0?$n:oo,sn.qa=oo):Mn==="Android WebView"?(sn.Je=!0,sn.m=oo):In++}2<In&&(sn.He=!0)}(Xt,cr),Xt.browserFullVer=Wr(On),Xt.sg=mn,Xt.v=(kr=Xt.v)!==null&&kr!==void 0?kr:gn(Wr(mn)),Xt.Rf=!0}})(_r),br())},Sr=!1,Mr=!1,gr=0;try{if(self.SharedWorker){Sr=!0;var Er=wr(Zn,Tr,_r=>{typeof _r=="string"?Lt(Xt,"HE",_r):"data"in _r?zt(Xt,"HE",_r):Zt(Xt,"HE",_r),Mr=!0,ft.e("{3c72abb}","{217e106}",_r)});gr=300}}catch(_r){Mr=!0,ft.w("{3c72abb}","{a583546}",_r),ar(Xt,"HE",_r)}Xt.sa=window.setTimeout(()=>{Er&&Dr("port"in Er?Er.port:Er),Mr?ft.w("{3c72abb}","{dbf4b42}"):Sr?(ft.w("{3c72abb}","{0bf7a38}"),Or(Xt,"HE"),Xt.Ze=!0):(ft.i("{3c72abb}","{7a82b59}"),vr(Xt,"HE")),new Zn().nb().then(_r=>{Tr(_r)})},gr)}else br()})}(wt),Ft=async function(Xt){Xt.uc=!!window.chrome&&await async function(){if(!window.createImageBitmap)return!1;const br=await fetch("data:image/avif;base64,AAAAGGZ0eXBhdmlmAAAAAGF2aWZtaWYxAAADm21ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAHBpY3QAAAAAAAAAAAAAAAAAAAAADnBpdG0AAAAAAAEAAAAiaWxvYwAAAABEQAABAAEAAAAAA7sAAQAAAAAAAAAjAAAAI2lpbmYAAAAAAAEAAAAVaW5mZQIAAAAAAQAAYXYwMQAAAAMbaXBycAAAAvxpcGNvAAACrGNvbHJwcm9mAAACoGxjbXMEMAAAbW50clJHQiBYWVogB+UACAAJAAsAEAAFYWNzcE1TRlQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPbWAAEAAAAA0y1sY21zAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANZGVzYwAAASAAAABAY3BydAAAAWAAAAA2d3RwdAAAAZgAAAAUY2hhZAAAAawAAAAsclhZWgAAAdgAAAAUYlhZWgAAAewAAAAUZ1hZWgAAAgAAAAAUclRSQwAAAhQAAAAgZ1RSQwAAAhQAAAAgYlRSQwAAAhQAAAAgY2hybQAAAjQAAAAkZG1uZAAAAlgAAAAkZG1kZAAAAnwAAAAkbWx1YwAAAAAAAAABAAAADGVuVVMAAAAkAAAAHABHAEkATQBQACAAYgB1AGkAbAB0AC0AaQBuACAAcwBSAEcAQm1sdWMAAAAAAAAAAQAAAAxlblVTAAAAGgAAABwAUAB1AGIAbABpAGMAIABEAG8AbQBhAGkAbgAAWFlaIAAAAAAAAPbWAAEAAAAA0y1zZjMyAAAAAAABDEIAAAXe///zJQAAB5MAAP2Q///7of///aIAAAPcAADAblhZWiAAAAAAAABvoAAAOPUAAAOQWFlaIAAAAAAAACSfAAAPhAAAtsRYWVogAAAAAAAAYpcAALeHAAAY2XBhcmEAAAAAAAMAAAACZmYAAPKnAAANWQAAE9AAAApbY2hybQAAAAAAAwAAAACj1wAAVHwAAEzNAACZmgAAJmcAAA9cbWx1YwAAAAAAAAABAAAADGVuVVMAAAAIAAAAHABHAEkATQBQbWx1YwAAAAAAAAABAAAADGVuVVMAAAAIAAAAHABzAFIARwBCAAAADGF2MUOBDQwAAAAAFGlzcGUAAAAAAAAAEAAAABAAAAAoY2xhcAAAAAEAAAABAAAAAQAAAAH////xAAAAAv////EAAAACAAAAF2lwbWEAAAAAAAAAAQABBIGCA4QAAAArbWRhdBIACgkfzP/IIEBA0oAyFGW+OwPr0bIHHHHBATZPtaQ3RWTA").then(Tr=>Tr.blob());return createImageBitmap(br).then(()=>!0,()=>!1)}()}(wt),Qt=function(Xt){const br=window.speechSynthesis;if(br){const Tr=br.getVoices;let Sr=(Tr==null?void 0:Tr.call(br))||[];return new Promise(Mr=>{if(!Tr||Sr.length)Fr(Xt,Sr),Mr();else{let gr=0;const Er=()=>{Sr=Tr.call(br);const _r=performance.now();Sr.length==0&&(gr==0||600>_r-gr)?(Xt.T&&clearTimeout(Xt.T),Xt.T=window.setTimeout(Er,150)):(Xt.T&&(clearTimeout(Xt.T),Xt.T=0),Fr(Xt,Sr),Mr())};br.onvoiceschanged!==void 0&&(br.onvoiceschanged=Er),window.setTimeout(()=>{Sr=Tr.call(br),Sr.length?Er():(Xt.T=window.setTimeout(Er,150),gr=performance.now())},0)}})}return new Promise(Tr=>{Tr()})}(wt),rr=function(Xt){return new Promise(br=>{var Tr=navigator.userAgent;Tr&&(Tr=Tr.match(Xt.ze))&&(Xt.rg=Tr==null?void 0:Tr[1],Xt.mg=Tr==null?void 0:Tr[2]),br()})}(wt),nr=function(Xt){var br,Tr,Sr,Mr,gr,Er,_r,cr,kr,Wr,gn,mn,On,Wn;const sn=window,In=sn.hasOwnProperty,$n=sn.navigator;In.call(sn,"MSMediaKeys")?Xt.Le=!0:In.call(sn,"_firefoxTV_cachedScrollPosition")?Xt.Ne=!0:sn.__edgeActiveElement!==void 0||sn.__edgeTrackingPreventionStatistics?Xt.bb=!0:sn.safari?Xt.Ve=!0:sn.opr?Xt.Pe=!0:sn.oprt?Xt.ge=!0:$n.brave?Xt.va=!0:sn.OperaTouch!==void 0||sn.ethereum?(Xt.lb=!0,Xt.R=!0):sn.yandex?Xt.ya=!0:sn.QuickAccess?Xt.xa=!0:sn.chrome?Xt.$=!0:sn.netscape?Xt.wa=!0:sn.__firefox__?Xt.cb=!0:sn.__gCrWeb?Xt.Va=!0:sn.ReactNativeWebView&&(Xt.Re=!0),sn.contacts!==void 0||sn.ContactsManager!==void 0?Xt.R=!0:In.call(sn,"onwebOSAccessibilityAlertDone")||sn.webOSSystem||In.call(sn,"onwebosaccessibilityalertdone")?Xt.Af=!0:sn.tizen||sn.TizenTVApiInfo||sn.addEdgeEffectONSCROLLTizenUIF||sn.tizentvwasm?Xt.Ka=!0:sn.HardkeyEvent&&(Xt.xf=!0);const Mn=sn.Intl;(br=$n.mediaCapabilities)!==null&&br!==void 0&&br.decodingInfo&&(Xt.pe=!0),sn.BigInt&&(Xt.fg=!0,sn.BigInt64Array&&(Xt.ie=!0)),sn.PerformanceNavigationTiming&&(Xt.Ae=!0),sn.WebAssembly&&sn.WebAssembly.Exception&&(Xt.Me=!0),sn.BroadcastChannel&&(Xt.je=!0),sn.GPUBuffer&&(Xt.te=!0),sn.SharedWorker&&(Xt.Ge=!0),sn.MediaRecorder&&(Xt.xe=!0),sn.CSSCounterStyleRule&&(Xt.ke=!0),(br=(Tr=sn.ArrayBuffer)===null||Tr===void 0?void 0:Tr.prototype)!=null&&br.hasOwnProperty("transfer")&&(Xt.cg=!0),In.call(sn,"ondevicelight")&&(Xt.qe=!0),(Sr=sn.AbortSignal)!==null&&Sr!==void 0&&Sr.abort&&(Xt.bg=!0),In.call(sn,"onbeforeinput")&&(Xt.eg=!0),Mn&&(Mn.DisplayNames&&(Xt.Pa=!0),Xt.ue=((Mr=new Mn.Collator("zh",{collation:"pinyin"}).resolvedOptions())===null||Mr===void 0?void 0:Mr.collation)=="pinyin"),sn.Credential&&(Xt.oe=!0),sn.LargestContentfulPaint&&(Xt.we=!0),(gr=sn.CSS)!==null&&gr!==void 0&&gr.registerProperty&&(Xt.me=!0),(Tr=(Er=sn.HTMLElement)===null||Er===void 0?void 0:Er.prototype)!=null&&Tr.hasOwnProperty("autofocus")&&(Xt.se=!0),$n.contacts&&(Xt.ne=!0),sn.TrustedHTML&&(Xt.Ie=!0),sn.WakeLock&&(Xt.Ke=!0),(_r=sn.Promise)!==null&&_r!==void 0&&_r.any&&(Xt.Ce=!0),sn.FileSystemHandle&&(Xt.re=!0),(cr=sn.Atomics)!==null&&cr!==void 0&&cr.waitAsync&&(Xt.dg=!0),(Wr=(kr=sn.CSS)===null||kr===void 0?void 0:kr.supports)!==null&&Wr!==void 0&&Wr.call(kr,"aspect-ratio: auto")&&(Xt.le=!0),sn.ReadableStreamBYOBReader&&(Xt.Ee=!0),(mn=(gn=sn.CSS)===null||gn===void 0?void 0:gn.supports)!==null&&mn!==void 0&&mn.call(gn,"overflow: clip")&&(Xt.ye=!0),(Er=(On=sn.InputEvent)===null||On===void 0?void 0:On.prototype)!=null&&Er.hasOwnProperty("isComposing")&&(Xt.ve=!0),On=(Wn=sn.HTMLVideoElement)===null||Wn===void 0?void 0:Wn.prototype,Xt.Oe=On==null?void 0:On.hasOwnProperty("webkitSupportsPresentationMode")}(wt),lr=function(Xt){var br,Tr,Sr,Mr;const gr=window.RequestCrowNativeApi;if(gr){let Er=0;const _r=new Promise((mn,On)=>{Er=window.setTimeout(()=>{On("timeout")},100)}),cr=window.zoneless,kr=(Tr=(br=cr==null?void 0:cr.windowAddEventListener)===null||br===void 0?void 0:br.bind(window))!==null&&Tr!==void 0?Tr:window.addEventListener.bind(window),Wr=(Mr=(Sr=cr==null?void 0:cr.windowRemoveEventListener)===null||Sr===void 0?void 0:Sr.bind(window))!==null&&Mr!==void 0?Mr:window.removeEventListener.bind(window);let gn;return br=new Promise(mn=>{gn=On=>{mn(On.detail)},kr("CrowNativeApiEvent",gn),gr(JSON.stringify({Wg:"RequestBrowserVersion"}))}).then(mn=>{var On;(mn=(On=mn.browserVersion)===null||On===void 0?void 0:On.match(Xt.ze))&&(Xt.browserFullVer=mn==null?void 0:mn[1],Xt.m=mn==null?void 0:mn[2])}),Promise.race([br,_r]).catch(()=>{ft.d("{3c72abb}","{841bf6f}")}).finally(()=>{window.clearTimeout(Er),Wr("CrowNativeApiEvent",gn)})}return Promise.resolve()}(wt),Yt=function(Xt){return new Promise(br=>{let Tr=!1;const Sr=cr=>{if(Xt.pa)clearTimeout(Xt.pa),Xt.pa=0;else if(Tr)return ft.w("{3c72abb}","{b02109c}"),void Wt(Xt,"Plat",Xt.ag-performance.now());Xt.sc||((cr=cr.platform)==="MacIntel"?Xt.ga=!0:cr==="iPhone"?Xt.Na=!0:cr==="Win32"?Xt.ja=!0:cr==="iPad"?Xt.Nb=!0:cr==="FreeBSD amd64"?Xt.oa=!0:cr==="Windows"&&(Xt.ja=!0,Xt.aa=!0),cr.startsWith("Linux")&&(Xt.S=!0),Xt.sc=!0),br()};let Mr=!1,gr=!1;const Er=cr=>{typeof cr=="string"?Lt(Xt,"Plat",cr):"data"in cr?zt(Xt,"Plat",cr):Zt(Xt,"Plat",cr),gr=!0,ft.e("{3c72abb}","{6350135}",cr)};let _r=0;try{Mr=!0,Lr(ln,Sr,Er),_r=150}catch(cr){gr=!0,ar(Xt,"Plat",cr),ft.w("{3c72abb}","{79668e5}",cr)}window.setTimeout(()=>{Xt.sc||(Xt.pa=window.setTimeout(()=>{Xt.pa=0,Xt.ag=performance.now(),gr?ft.w("{3c72abb}","{d9e1e01}"):Mr?(ft.w("{3c72abb}","{a8d68cb}"),Or(Xt,"Plat")):(ft.i("{3c72abb}","{53e2225}"),vr(Xt,"Plat"));const cr=new ln().nb();Sr(cr),Tr=!0},_r))},0)})}(wt),dr=function(Xt){const br=window;br.ApplePaySession&&br.ApplePaySession.canMakePayments&&(Xt.tc=!0)}(wt),ir=function(Xt){var br=navigator.plugins;for(const Tr of br)(br=Tr.name)!=="Native Client"&&(br.startsWith("Microsoft Edge PDF")?Xt.If=!0:br.startsWith("Chrome PDF")?Xt.Bf=!0:br.startsWith("Chromium PDF")?Xt.Ef=!0:br.startsWith("PPAPI SAMSUNGHEALTH")&&(Xt.Ka=!0))}(wt);navigator.maxTouchPoints&&0<navigator.maxTouchPoints&&(wt.fa=!0),await Ot.call(xt,[Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,void 0,_i(wt),Gn(wt)]).then(()=>{var Xt,br,Tr,Sr,Mr,gr,Er,_r,cr,kr,Wr,gn,mn,On,Wn,sn,In,$n,Mn,lo;if(wt.ra&&(wt.ga==wt.L&&wt.ja==wt.P||(wt.o=!0),(wt.O||wt.ea||wt.da||wt.na)&&!wt.S&&(wt.o=!0),wt.m&&wt.browserFullVer&&!Rr(wt.m,wt.browserFullVer)&&(wt.ua?wt.qa&&!Rr(wt.qa,wt.browserFullVer)&&(wt.o=!0):wt.o=!0),(wt.O&&!wt.ta||wt.ea&&!wt.Z)&&(wt.o=!0),wt.Sa?(wt.U&&!wt.P||wt.F&&!wt.L)&&(wt.o=!0):wt.Ta?wt.O||(wt.o=!0):wt.Ua?wt.o=!0:wt.U||!wt.F||wt.L||(wt.o=!0),wt.s=wt.ra&&!wt.o,wt.W=wt.ra&&wt.o),!wt.Fe&&wt.$)wt.g="Unknown",wt.h="Unknown",wt.aa=!0,wt.l=3,wt.v="0",wt.m="0",wt.browserFullVer="0",ft.d("{3c72abb}","{049d298}");else if(wt.Ta)wt.g="ChromeOS",fr(wt);else if(wt.Sa)fr(wt),wt.U?wt.g="Windows":wt.F?(wt.g="macOS",wt.j="APPLE"):wt.s?wt.P?wt.g="Windows":wt.L?(wt.g="macOS",wt.j="APPLE"):wt.O||wt.ea?(wt.g="ChromeOS",wt.aa=!0,wt.l=7):wt.na&&(wt.g=tr(wt)):wt.ja?wt.g="Windows":wt.ga?(wt.g="macOS",wt.j="APPLE"):wt.S?wt.g=tr(wt):wt.oa?wt.g="FreeBSD":(wt.g="Unknown",wt.l=5,ft.d("{3c72abb}","{101497c}"));else if(wt.Ua)yr(wt),wt.U?wt.g="Windows":wt.F?(wt.g="macOS",wt.j="APPLE"):wt.Se?(wt.g="Android",hn(wt)):wt.S?wt.g=tr(wt):wt.oa?wt.g="FreeBSD":(wt.g="Unknown",wt.l=5,ft.d("{3c72abb}","{49fcccb}"));else if(wt.he)wt.h="Edge",wt.vc?wt.s&&wt.ca||wt.I?(wt.g="Xbox",wt.j="MICROSOFT",wt.Da?wt.M="XBOXSERIES":wt.I&&(wt.M="XBOXONE")):wt.g="Windows":wt.F?(wt.g="macOS",wt.j="APPLE"):wt.Qa?(wt.g="Android",hn(wt)):wt.s?wt.ca?(wt.g="Xbox",wt.j="MICROSOFT",wt.Da?wt.M="XBOXSERIES":wt.I&&(wt.M="XBOXONE")):wt.P?wt.g="Windows":wt.L?(wt.g="macOS",wt.j="APPLE"):wt.O||wt.ea?(wt.g="ChromeOS",wt.aa=!0,wt.l=7):wt.da?(wt.g="Android",hn(wt)):wt.na&&(wt.g=tr(wt)):wt.ja?wt.g="Windows":wt.ga?(wt.g="macOS",wt.j="APPLE"):wt.R?(wt.g="Android",hn(wt)):wt.S?wt.g=tr(wt):wt.oa?wt.g="FreeBSD":(wt.g="Unknown",wt.l=5);else if(wt.U)wt.vc?Nr(wt):(Nr(wt),wt.aa=!0,wt.l=5);else if(wt.F)zr(wt);else if(wt.Qa)kn(wt);else if(wt.s&&(wt.ca||wt.P)||wt.ja||wt.I)Nr(wt);else if(wt.s&&wt.L||wt.Nb||wt.Na||wt.ga)zr(wt);else if(wt.s&&(wt.O||wt.ea))wt.g="ChromeOS",fr(wt);else if(wt.xf)wt.g="ccOS",wt.j="HKMC",wt.h="Chromium";else if(wt.s&&wt.da||wt.R)kn(wt);else if(wt.s&&wt.na)wt.g=tr(wt),wt.Cb||wt.fa?(wt.h="Unknown",wt.l=3):Kr(wt)||(wt.h="Unknown",wt.l=5,ft.d("{3c72abb}","{54c6569}"));else if(wt.Af)wt.g="WebOS",wt.j="LG",wt.h="Chromium",wt.browserFullVer=($n=wt.browserFullVer)!==null&&$n!==void 0?$n:wt.rg,wt.m=(Mn=wt.m)!==null&&Mn!==void 0?Mn:wt.mg,wt.W=!1;else if(wt.Ka){if(wt.g="Tizen",wt.h="Samsung",(lo=window.webapis)!==null&&lo!==void 0&&lo.productinfo)try{wt.v=window.webapis.productinfo.getFirmware(),wt.deviceName=window.webapis.productinfo.getRealModel(),wt.Za=window.webapis.productinfo.getLicensedVendor()}catch{ft.e("{3c72abb}","{bc7dd9b}")}else ft.e("{3c72abb}","{844af47}"),wt.v="0",wt.deviceName="";wt.j=wt.Za!=="Samsung"&&wt.Za?"TIZENLICENSED":"SAMSUNG",$n=/(([0-9]+\.)*[0-9]+)\/(([0-9]+\.)*[0-9]+)/,(Mn=navigator.userAgent)&&($n=Mn.match($n),wt.browserFullVer=$n==null?void 0:$n[0],($n=$n==null?void 0:$n[1])&&($n=$n.split("."),wt.m=$n==null?void 0:$n[0]))}else wt.S?wt.Ne?(wt.g="Android",wt.j="AMAZON",yr(wt),wt.H="TV"):wt.xa?(wt.g="Android",wt.j="SAMSUNG",wt.h="Samsung",hn(wt)):Kr(wt)?wt.W?wt.g=tr(wt):!wt.Ef||wt.Bf||wt.If?wt.S&&(wt.g="Linux"):(wt.g=tr(wt),wt.h="Chromium",wt.l=7):(wt.g="Unknown",wt.h="Unknown",wt.l=0,ft.d("{3c72abb}","{be86380}")):wt.oa?(wt.g="FreeBSD",wt.$?wt.h="Chrome":wt.wa?yr(wt):(wt.h="Unknown",wt.l=3,ft.d("{3c72abb}","{a2c16e4}"))):wt.Va||wt.cb||wt.bb?(wt.Na=!0,zr(wt),wt.l=7):wt.xa?(kn(wt),wt.l=7):(wt.g="Unknown",wt.h="Unknown",wt.l=0,ft.d("{3c72abb}","{f2eecc9}"));switch(wt.W&&(wt.v="0",wt.m="0",wt.browserFullVer="0"),wt.Qc=performance.now(),wt.u.os=(Xt=wt.g)!==null&&Xt!==void 0?Xt:"Unknown",wt.u.browser=(br=wt.h)!==null&&br!==void 0?br:"Unknown",wt.u.osRawVer=(Tr=wt.sg)!==null&&Tr!==void 0?Tr:"0",wt.u.osVer=(Sr=wt.v)!==null&&Sr!==void 0?Sr:"0",wt.u.browserVer=(Mr=wt.m)!==null&&Mr!==void 0?Mr:"0",Xt=(gr=wt.browserFullVer)!==null&&gr!==void 0?gr:void 0,wt.u.browserFullVer=Xt??"0",wt.u.browserBestVer=(Er=Xt??wt.u.browserVer)!==null&&Er!==void 0?Er:"0",wt.u.confidence=(gn=(Wr=(kr=(cr=(_r=wt.l)!==null&&_r!==void 0?_r:wt.g==="Unknown"?0:void 0)!==null&&cr!==void 0?cr:wt.h==="Unknown"?5:void 0)!==null&&kr!==void 0?kr:wt.Ze?6:void 0)!==null&&Wr!==void 0?Wr:wt.W?8:void 0)!==null&&gn!==void 0?gn:10,wt.u.forging=(mn=wt.aa)!==null&&mn!==void 0&&mn,wt.u.spoofing=(On=wt.W)!==null&&On!==void 0&&On,wt.u.vendor=(Wn=wt.j)!==null&&Wn!==void 0?Wn:"",wt.u.vendorFull=(sn=wt.Za)!==null&&sn!==void 0?sn:wt.u.vendor,gr=void 0,wt.u.os){case"ChromeOS":gr="CHROMEOS";break;case"Windows":gr="WINDOWS";break;case"macOS":gr="MACOS";break;case"Linux":gr="LINUX";break;case"iOS":gr="IOS";break;case"iPadOS":gr="IPADOS";break;case"Tizen":gr="TIZEN";break;case"WebOS":gr="WEBOS";break;case"Android":gr="ANDROID";break;case"Xbox":gr="XBOX";break;case"SteamOS":gr="STEAMOS";break;case"ccOS":gr="CCOS"}wt.u.deviceOS=gr,wt.u.os!=="iPadOS"||wt.Oe?wt.Bb?wt.u.deviceModel="STEAMDECK":wt.M&&(wt.u.deviceModel=wt.M):wt.u.deviceModel="VISIONPRO",wt.u.deviceType=(In=wt.H)!==null&&In!==void 0?In:function(oo,Ro){if(Ro==="STEAMDECK")return"CONSOLE";switch(oo){case"iOS":return"PHONE";case"iPadOS":return"TABLET";case"Xbox":return"CONSOLE";case"WebOS":case"Tizen":return"TV";default:return"DESKTOP"}}(wt.u.os,wt.u.deviceModel),wt.u.totalTime=wt.Qc-wt.start,wt.u.gpuDetail=wt.gpuDetail})}(d).then(()=>{d.Kf=!0,ut(d.u)})})}function Fr(d,ut){if(!d.$f){for(const wt of ut)(ut=wt.voiceURI||"").startsWith("Chrome OS")?d.Ta=!0:ut.startsWith("Google")?d.Sa=!0:ut.includes("moz-tts")?(ut.includes("android")&&(d.Se=!0,d.R=!0),d.Ua=!0):ut=="English United States"&&(d.Qa=!0),ut.includes("Microsoft")?(d.U=!0,ut.includes("Online")?d.he=!0:d.vc=!0):ut.includes("com.apple")?(d.F=!0,ut.includes("Ellen")&&(d.Qe=!0)):ut=="Zuzana"&&(d.F=!0);d.We=d.F||d.U||d.Sa||d.Ta||d.Ua||d.Qa,d.$f=!0}}function _i(d){const ut=window;d.pc=ut.matchMedia("(hover: hover)").matches,d.qc=ut.matchMedia("(hover: none)").matches,d.nc=ut.matchMedia("(pointer: coarse)").matches,d.oc=ut.matchMedia("(pointer: fine)").matches}function Gn(d){return new Promise(ut=>{const wt=Qt=>{d.Oa&&(clearTimeout(d.Oa),d.Oa=0),Qt.Id&&(d.wf=Qt.Id,d.kg=Qt.sd,d.jg=Qt.Nd),ut()};let xt=!1,Ot=!1;const Vt=Qt=>{typeof Qt=="string"?Lt(d,"TV",Qt):"data"in Qt?zt(d,"TV",Qt):Zt(d,"TV",Qt),Ot=!0,ft.e("{3c72abb}","{f49e1b4}",Qt)};let Dt,Ft=0;try{self.SharedWorker&&(xt=!0,Dt=wr(en,wt,Vt),Ft=150)}catch(Qt){Ot=!0,ft.w("{3c72abb}","{2066dd6}",Qt),ar(d,"TV",Qt)}d.Oa=window.setTimeout(()=>{Dt&&Dr("port"in Dt?Dt.port:Dt),Ot?ft.w("{3c72abb}","{cdb3848}"):xt?(ft.w("{3c72abb}","{f01188c}"),Or(d,"TV")):(ft.i("{3c72abb}","{db9e3f4}"),vr(d,"TV")),new en().nb().then(Qt=>{wt(Qt)})},Ft)})}function Wt(d,ut,wt){d.G?jo(d.G,"WorkerOverlongDelay",ut,wt.toString()):d.C.push({type:"WorkerOverlongDelay",name:ut,data:wt})}function Lt(d,ut,wt){d.G?jo(d.G,"WebWorkerProblem",ut,wt):d.C.push({type:"ErrorString",name:ut,data:wt})}function zt(d,ut,wt){d.G?jo(d.G,"WorkerMessageProblem",JSON.stringify(wt)):d.C.push({type:"MessageEvent",name:ut,data:wt})}function Zt(d,ut,wt){d.G?jo(d.G,"WorkerProblem",ut,`${wt.message} in ${wt.filename}@${wt.lineno}:${wt.colno}`,JSON.stringify(wt.error)):d.C.push({type:"ErrorEvent",name:ut,data:wt})}function ar(d,ut,wt){var xt;d.G?jo(d.G,"WorkerCreateFailure",ut,(xt=wt==null?void 0:wt.stack)!==null&&xt!==void 0?xt:"",JSON.stringify(wt)):d.C.push({type:"WorkerCreateFailure",name:ut,data:wt})}function Or(d,ut){d.G?jo(d.G,"WorkerTimeout",ut):d.C.push({type:"WorkerTimeout",name:ut})}function vr(d,ut){d.G?jo(d.G,"WorkerUnused",ut):d.C.push({type:"WorkerUnused",name:ut})}function Rr(d,ut){if(d==ut)return!1;let wt=/^(\d+)[.]?(.*)/;if(d=wt.exec(d),ut=wt.exec(ut),d==null){if(ut==null)return!0}else if(ut!=null&&d[1]==ut[1]&&d[2]=="")return!0;return!1}function fr(d){d.h="Chrome",!d.m&&d.we&&(d.m=d.me?d.se?d.ne?d.Pa?d.Ie?d.Ke?d.Ce?d.re?d.dg?d.le?d.Ee?d.ye?"90+":"89":"88":"87":"86":"85":"84":"83":"81":"80":"79":"78":"77")}function tr(d){return d.Bb?"SteamOS":"Linux"}function yr(d){d.h="Firefox",d.m=d.ue?d.Pa?d.eg?d.bg?d.qe?"88":"89+":"87":"86":"85":"84-"}function hn(d){var ut,wt,xt,Ot;d.s&&d.N?d.H="TV":d.Cb||d.fa||!d.wf?d.pc&&!d.oc||(d.da?d.vf?d.qc&&d.nc||(d.H="DESKTOP"):d.pc&&d.oc&&(d.H="DESKTOP"):d.qc&&d.nc||(d.H="DESKTOP")):(d.H="TV",d.j=(wt=(ut=d.j)!==null&&ut!==void 0?ut:d.kg)!==null&&wt!==void 0?wt:"",d.deviceName=(Ot=(xt=d.deviceName)!==null&&xt!==void 0?xt:d.jg)!==null&&Ot!==void 0?Ot:"UNKNOWN",d.l=7),d.H||(d.H=600<=(screen.width<screen.height?screen.width:screen.height)?"TABLET":"PHONE")}function Nr(d){d.g="Windows",Kr(d)||(d.h="Unknown",d.l=5,ft.d("{3c72abb}","{44ce1e0}"))}function zr(d){d.j="APPLE",d.s&&d.L?(d.g="macOS",Kr(d)||(d.h="Unknown",d.l=5,ft.d("{3c72abb}","{b80b712}"))):d.ga?d.fa?(d.g="iPadOS",Qn(d)):(d.g="macOS",Kr(d)||(d.h="Unknown",d.l=5,ft.d("{3c72abb}","{0f3296f}")),d.h=="Safari"&&(d.m=d.ve?"16.4+":"16.3-")):d.Na?(d.g="iOS",Qn(d)):d.Nb?(d.g="iPadOS",Qn(d)):(d.aa=!0,d.l=5,d.fa?(d.g="iOS",Qn(d),ft.d("{3c72abb}","{cf1c572}")):(d.g="macOS",d.h="Unknown",ft.d("{3c72abb}","{1eb1815}")))}function kn(d){d.g="Android",d.wa?yr(d):d.xa?(d.h="Samsung",d.j="SAMSUNG"):d.va?d.h="Brave":d.ya?d.h="Yandex":d.lb?d.h="Opera":d.s?d.$a?d.h="Edge":d.ua?d.h="Opera":d.ab?d.h="Yandex":d.ta||d.Je?(fr(d),nn(d)):d.Z&&(d.h="Chromium",nn(d)):d.$?d.uc?fr(d):d.h=d.fa?"Edge":"Silk":(fr(d),d.l=7),hn(d)}function Kr(d){var ut;if(d.wa)yr(d);else if(d.Pe)d.h="Opera";else if(d.va)d.h="Brave";else if(d.ya)d.h="Yandex";else if(d.$)d.I?(d.g="Xbox",d.j="MICROSOFT",d.h="Edge",d.Da?d.M="XBOXSERIES":d.I&&(d.M="XBOXONE")):d.s?d.ca?(d.g="Xbox",d.j="MICROSOFT",d.h="Edge"):d.$a?d.h="Edge":d.ua?d.h="Opera":d.ab?d.h="Yandex":d.ta?fr(d):d.Z&&!d.He&&(d.h="Chromium"):d.uc?d.s&&d.Z?(d.h="Chromium",d.l=9):d.We?d.h="Chromium":(d.h="Chromium",d.l=7):(d.h="Edge",d.g=(ut=d.g)!==null&&ut!==void 0?ut:"Unknown",d.l=7);else if(d.Ve||d.tc)d.h="Safari";else{if(!d.Le)return!1;d.I&&(d.g="Xbox",d.j="MICROSOFT"),d.h="Edge_Legacy"}return!0}function nn(d){d.ef?(d.j="AMAZON",d.Z&&(d.h="Silk")):d.Ye?d.j="SONY":d.cf?d.j="GOOGLE":d.mf?d.j="NVIDIA":d.hf?d.j="XIAOMI":d.uf&&(d.j="TVISION")}function Qn(d){d.v=d.fg?d.Pa?d.ie?d.ke?d.cg?"17.4+":"17+":d.Ge?"16+":d.te?d.Qe?"15.6+":"15.5+":d.je?"15.4+":d.Me?"15.2+":d.Ae?"15.1+":"15+":"14.5+":d.xe?"14.3+":"14+":d.pe?"13+":"12-";var ut=d.v;ut=!d.oe&&!(ut.startsWith("12")||ut.startsWith("13")),d.cb?d.h="Firefox":d.ge?d.h="Opera":d.va?d.h="Brave":d.ya?d.h="Yandex":d.bb?d.h="Edge":d.Va?d.h="Chrome":d.tc&&!ut?d.h="Safari":d.Re?d.h="ReactNative":ut?(d.h="Unknown",d.l=7,ft.d("{3c72abb}","{5a39f60}")):(d.h="Unknown",d.l=5,ft.d("{3c72abb}","{147d6b4}"))}function Zr(d){var ut,wt=eo;(ut=wt.G)===null||ut===void 0||jo(ut,"TelemetryHandlerChanged"),wt.G=d;for(const xt of wt.C)switch(d=xt.name,ut=xt.data,xt.type){case"ErrorEvent":Zt(wt,d,ut);break;case"MessageEvent":zt(wt,d,ut);break;case"WorkerUnused":vr(wt,d);break;case"WorkerTimeout":Or(wt,d);break;case"WorkerCreateFailure":ar(wt,d,ut);break;case"ErrorString":Lt(wt,d,ut);break;case"WorkerOverlongDelay":Wt(wt,d,ut)}wt.C=[]}class on{nb(){const ut=(self.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")).getContext("webgl"),wt=ut&&ut.getExtension("WEBGL_debug_renderer_info");return wt?{sd:ut&&ut.getParameter(wt.UNMASKED_VENDOR_WEBGL),Qf:ut&&ut.getParameter(wt.UNMASKED_RENDERER_WEBGL),Gf:!0}:{sd:"",Qf:"",Gf:!1}}}class Zn{nb(){const ut=navigator.userAgentData;return ut?ut.getHighEntropyValues("platform architecture uaFullVersion platformVersion model bitness".split(" ")).then(wt=>(wt||(wt={}),wt.brands||(wt.brands=ut.brands),wt.mobile||(wt.mobile=ut.mobile),wt)):Promise.resolve(void 0)}}class en{nb(){let ut={Id:!1,Nd:"",sd:""};if(navigator.userAgent){var wt=navigator.userAgent.toUpperCase();const xt="BRAVIA TIZEN PHILIPSTV GOOGLETV CRKEY CHROMECAST SHIELDTV".split(" "),Ot="SONY SAMSUNG PHILIPS GOOGLE GOOGLE GOOGLE NVIDIA".split(" ");if(RegExp("BRAVIA|SMARTTV|SMART-TV|PHILIPSTV|GOOGLETV|CRKEY|CHROMECAST|SHIELD Android TV","i").test(wt)&&(ut.Id=!0,wt=wt.match(xt.join("|"))))for(let Vt=0;Vt<xt.length;Vt++)wt[0]==xt[Vt]&&(ut.Nd=xt[Vt],ut.sd=Ot[Vt],wt[0]=="CRKEY"&&(ut.Nd="CHROMECAST"))}return Promise.resolve(ut)}}class ln{nb(){return{platform:navigator.platform}}}const eo=new class{constructor(){this.Qc=this.start=0,this.vc=this.he=this.F=this.U=this.Qa=this.Se=this.Ua=this.Sa=this.Ta=!1,this.Qe=!0,this.sc=this.Rf=this.rc=this.$f=this.Kf=this.Ze=this.W=this.s=this.o=this.ra=this.Fe=this.oc=this.nc=this.qc=this.pc=this.ve=this.Oe=this.ye=this.Ee=this.le=this.dg=this.re=this.Ce=this.Ke=this.Ie=this.ne=this.se=this.me=this.we=this.cg=this.ke=this.Ge=this.oe=this.tc=this.ue=this.Pa=this.eg=this.bg=this.qe=this.xe=this.te=this.je=this.Me=this.Ae=this.pe=this.ie=this.fg=this.uc=this.wf=this.N=this.vf=this.na=this.da=this.ea=this.O=this.L=this.P=this.uf=this.hf=this.mf=this.cf=this.Ye=this.ef=this.ca=this.Bb=this.Da=this.I=this.fa=this.Cb=this.He=this.Je=this.Z=this.ab=this.ua=this.$a=this.ta=this.If=this.Ef=this.Bf=this.xf=this.Ka=this.Af=this.R=this.oa=this.S=this.Nb=this.ja=this.Na=this.ga=this.Re=this.xa=this.ya=this.va=this.lb=this.ge=this.Pe=this.Ne=this.cb=this.wa=this.Va=this.$=this.Ve=this.bb=this.Le=this.We=!1,this.ag=this.De=this.pa=this.Oa=this.sa=this.ka=this.T=0,this.gpuDetail="",this.u={os:"Unknown",osRawVer:"0",osVer:"0",browser:"Unknown",browserVer:"0",browserFullVer:"0",browserBestVer:"0",forging:!0,spoofing:!0,confidence:0,totalTime:0,vendor:"",gpuDetail:""},this.C=[],this.ze=/Chrome\/(([0-9]+)\.[0-9]+\.[0-9]+\.[0-9]+)/}};function $t(){performance.mark("platformBegin");var d=eo;return d.Be||(d.Be=Dn(d)),d.Be}var or=class extends Ar{constructor(d){super(d),this.U=[]}$(d){d={logModule:"R",timeStamp:d.timestamp,logLevel:d.level,logtag:d.tag,logstr:d.message},this.hasListener("Log")?this.emit("Log",d):this.U.push(d)}addListener(d,ut){if(super.addListener(d,ut),d=="Log"&&0<this.U.length){for(const wt of this.U)this.emit("Log",wt);this.U=[]}}};function Yr(d){switch(d){case"CONSOLE":return"Console";case"TABLET":return"Tablet";case"PHONE":return"Phone";case"TV":return"TV";case"LAPTOP":return"Laptop";case"DESKTOP":return"Desktop";default:return"undefined"}}function Vr(d){switch(d){case"Chrome":return"Chrome";case"Safari":return"Safari";case"Yandex":return"Yandex";case"Edge":return"Edge";case"Edge_Legacy":return"Edge_legacy";case"Firefox":return"Firefox";case"Samsung":return"Samsung";case"Chromium":return"Chromium";case"Opera":return"Opera";case"Brave":return"Brave";case"Silk":return"Silk";default:return"undefined"}}function Hr(d){switch(d){case"Windows":return"Windows";case"macOS":return"MacOS";case"ChromeOS":return"ChromeOS";case"Linux":return"Linux";case"iOS":return"iOS";case"iPadOS":return"iPadOS";case"Tizen":return"Tizen";case"WebOS":return"WebOS";case"Xbox":return"Xbox";case"Android":return"Android";case"SteamOS":return"SteamOS";default:return"undefined"}}class Rn{constructor(ut){ut=this.g=ut,this.j={os:Hr(ut.os),browser:Vr(ut.browser),deviceType:Yr(ut.deviceType)},ut=this.g,this.l={os:Ur(Hr(ut.os)),browser:Un(Vr(ut.browser)),deviceType:tn(Yr(ut.deviceType))}}get m(){return this.j}get o(){return this.l}get h(){return this.g}}var Ur=d=>{switch(d){case"Windows":return"WINDOWS";case"MacOS":return"MACOS";case"Linux":return"LINUX";case"ChromeOS":return"CHROMEOS";case"iOS":return"IOS";case"iPadOS":return"IPADOS";case"WebOS":return"WEBOS";case"Tizen":return"TIZEN";case"Xbox":return"XBOX";case"Android":return"ANDROID";case"SteamOS":return"STEAMOS";case"Shield":return"SHIELD";default:return"UNKNOWN"}},tn=d=>{switch(d){case"Desktop":default:return"DESKTOP";case"Laptop":return"LAPTOP";case"TV":return"TV";case"Phone":return"PHONE";case"Tablet":return"TABLET";case"Console":return"CONSOLE"}},Un=d=>{switch(d){case"Chrome":return"CHROME";case"Safari":return"SAFARI";case"Yandex":return"YANDEX";case"Edge":return"EDGE";case"Edge_legacy":return"EDGE_LEGACY";case"Firefox":return"FIREFOX";case"Samsung":return"SAMSUNG";case"Chromium":return"CHROMIUM";case"Opera":return"OPERA";case"Brave":return"BRAVE";case"Silk":return"SILK";default:return"UNKNOWN"}};let Hn;function so(d){d.splice(0,d.length)}var uo=class extends Array{constructor(){super(),this.push=this.h}h(...d){return d=Array.prototype.push.apply(this,d),this.g&&this.g(),d}},io=class{constructor(d){this.name="",this.gdprLevel="behavioral",this.parameters=d,this.ts=new Date().toISOString()}},mo=class extends io{constructor(d){super(d),this.name="GS_DebugInfo",this.gdprLevel="technical"}},ao=class extends io{constructor(d){super(d),this.name="GS_ExceptionInfo",this.gdprLevel="technical"}},go=class extends io{constructor(d){super(d),this.name="GS_ClientMetricEvent",this.gdprLevel="functional"}},po=class extends io{constructor(d){super(d),this.name="GS_Sleep_Event",this.gdprLevel="technical"}},yo=class extends io{constructor(d){super(d),this.name="GS_WsCallResult",this.gdprLevel="functional"}},wo=class extends io{constructor(d){super(d),this.name="GS_HttpCallResult",this.gdprLevel="functional"}};function ur(d,ut){d.l.length&&!d.o&&(d.o=window.setTimeout(()=>function(wt){if(wt.l.length&&wt.m){var xt=$r(wt,wt.l);wt.l=[],It(wt.m,{...wt.L,body:xt}).then(Ot=>{200<=Ot.status&&299>=Ot.status||ft.e("{95feb49}","{1dc64ee}",Ot.status)}).catch(Ot=>{ft.e("{95feb49}","{a0b4bea}",Ot)}).finally(()=>{wt.o=0,wt.l.length&&ur(wt,2e3)})}else wt.o=0}(d),ut))}function Cr(d,ut){if(d.g)switch(ut.gdprLevel){case"functional":return d.g.deviceGdprFuncOptIn==="Full"||d.g.deviceGdprFuncOptIn==="Temp";case"technical":return d.g.gdprTechOptIn==="Full";case"behavioral":return d.g.gdprBehOptIn==="Full"}return!1}function $r(d,ut){var wt;(d={...d.g,events:[]}).sentTs=new Date().toISOString();for(const xt of ut)ut={name:xt.name,ts:xt.ts,parameters:xt.parameters},(wt=d.events)===null||wt===void 0||wt.push(ut);return JSON.stringify(d)}var dn=class{constructor(d){this.telemetryEventIds={},this.m="",this.l=[],this.o=0,this.L={method:"POST",headers:{"Content-Type":"application/json"},body:"",retryCount:3,timeout:2e3},this.F=d}configure(d){if(!d.option)return ft.e("{95feb49}","{e936979}"),!1;if(typeof d.option=="function"){ft.i("{95feb49}","{01ded8b}"),this.s=d.option,this.m=void 0,this.o&&(window.clearTimeout(this.o),this.o=0);for(const ut of this.l)this.s(ut);this.l=[]}else{if(typeof d.option!="string")return ft.e("{95feb49}","{328a30f}"),!1;ft.i("{95feb49}","{c76ea37}"),this.m=d.option,this.s=void 0,this.g&&ur(this)}return!0}updateTelemetryCommonData(d){var ut,wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr;const lr=(ut=this.g)===null||ut===void 0?void 0:ut.sessionId;this.g={...d,events:[]},this.g.clientId=this.F.clientId,this.g.eventSchemaVer=this.F.eventSchemaVer,this.g.deviceMake=(wt=this.g.deviceMake)!==null&&wt!==void 0?wt:"undefined",this.g.deviceModel=(xt=this.g.deviceModel)!==null&&xt!==void 0?xt:"undefined",this.g.integrationId=(Ot=this.g.integrationId)!==null&&Ot!==void 0?Ot:"undefined",this.g.userId=(Vt=this.g.userId)!==null&&Vt!==void 0?Vt:"undefined",this.g.externalUserId=(Dt=this.g.externalUserId)!==null&&Dt!==void 0?Dt:"undefined",this.g.idpId=(Ft=this.g.idpId)!==null&&Ft!==void 0?Ft:"undefined",this.g.eventProtocol=(rr=(Qt=this.g)===null||Qt===void 0?void 0:Qt.eventProtocol)!==null&&rr!==void 0?rr:"1.5",this.g.eventSysVer="2.0",this.g.sessionId=(nr=this.g.sessionId)!==null&&nr!==void 0?nr:lr,this.g.sessionId||(this.g.sessionId=Pt(),ft.i("{95feb49}","{7d66b6c}",this.g.sessionId)),this.L.headers["X-Event-Protocol"]=this.g.eventProtocol,this.m&&(this.l=this.l.filter(Yt=>Cr(this,Yt)),ur(this))}updateTelemetryEventIds(d){this.telemetryEventIds={...d}}h(d,ut){d={name:d.name,parameters:d.parameters,gdprLevel:d.gdprLevel,ts:d.ts,clientConfig:this.F},this.s?this.s(d):this.m&&this.g?Cr(this,d)&&(ut?(ut=$r(this,[d]),d=navigator.sendBeacon(this.m,new Blob([ut],{type:"text/plain"})),ft.i("{95feb49}","{6267b70}",d,ut)):(this.l.push(d),ur(this))):this.l.push(d)}};window.RtcUtils=window.RtcUtils||{};var rn={Ga:{},Vb:{type:"UNKNOWN",version:""},Md:!0,$e:!1,fe:!0,ee:!1};function An(d){var ut,wt,xt,Ot,Vt;if(ft.i("{11b33a0}","{e65e133}",JSON.stringify(d)),function(Dt){var Ft,Qt;if(Dt.overrideData){const rr=new URLSearchParams(Dt.overrideData.toLowerCase());rr.get("mode")==="lean"&&(bt=!1),ht=(bt=(Ft=(Dt=nr=>St(nr=rr.get(nr)))("log"))!==null&&Ft!==void 0?Ft:bt)&&((Qt=Dt("console"))!==null&&Qt!==void 0?Qt:ht)}}(d),d.gxtOverrideData){const Dt=JSON.parse(d.gxtOverrideData);if(Dt.params)for(const Ft of Dt.params)Ft.name==="pmCommunication"&&(rn.Ga.pmCommunication=Ft.value,rn.Vb={type:"GXT",version:Ft.version})}if(d.overrideData){const Dt=new URLSearchParams(d.overrideData.toLowerCase());d=Ft=>St(Ft=Dt.get(Ft)),rn.Md=(ut=d("log"))!==null&&ut!==void 0?ut:rn.Md,rn.$e=rn.Md&&((wt=d("console"))!==null&&wt!==void 0?wt:rn.$e),rn.fe=(xt=d("websocketsignaling"))!==null&&xt!==void 0?xt:rn.fe,rn.ee=(Ot=d("webrtcstreamer"))!==null&&Ot!==void 0?Ot:rn.ee,rn.hdr=(Vt=d("hdr"))!==null&&Vt!==void 0?Vt:rn.hdr}}var Pn=class extends io{constructor(d){super(d),this.name="GridServer_GameLaunch_Request",this.gdprLevel="functional"}};const Tn={clientName:"GFN_GridServer",clientId:"93289439828086895",eventSchemaVer:"2.1"};function jn(d,ut,wt){var xt,Ot,Vt,Dt=fo;return{requestedZoneAddress:d,zoneName:"",networkSessionId:(xt=Dt.telemetryEventIds.networkTestId)!==null&&xt!==void 0?xt:"",sessionId:wt??"",subSessionId:"",resumeType:ut?"MANUAL":"NONE",overrideConfigType:rn.Vb.type,overrideConfigVersion:rn.Vb.version,result:"",codec:"UNKNOWN",ipVersion:"UNKNOWN",launchDuration:0,networkType:Dt.networkType,streamingProfileGuid:(Ot=Dt.telemetryEventIds.streamingProfileGuid)!==null&&Ot!==void 0?Ot:"",systemInfoGuid:(Vt=Dt.telemetryEventIds.systemInfoGuid)!==null&&Vt!==void 0?Vt:"",cmsId:String(Dt.cmsId)}}function Nn(d){var ut=fo;d=new wo({callDuration:d.callDuration,verb:d.verb,sessionId:d.sessionId,subSessionId:d.subSessionId,serverId:d.serverId,url:d.url,overrideConfigType:rn.Vb.type,overrideConfigVersion:rn.Vb.version,requestStatusCode:d.requestStatusCode,requestId:d.requestId,networkType:ut.networkType,statusCode:d.statusCode,cmsId:String(ut.cmsId),moduleName:"GRID_SERVER",response:d.response}),ut.h(d)}function zn(d){var ut,wt,xt=fo;d.launchDuration=Math.round(d.launchDuration),(d=new Pn(d)).parameters.sessionId||(d.parameters.sessionId=xt.sessionId),d.parameters.subSessionId||(d.parameters.subSessionId=xt.subSessionId),d.parameters.systemInfoGuid=(ut=xt.telemetryEventIds.systemInfoGuid)!==null&&ut!==void 0?ut:"",d.parameters.streamingProfileGuid=(wt=xt.telemetryEventIds.streamingProfileGuid)!==null&&wt!==void 0?wt:"",xt.h(d)}function Jn(d,ut,wt){var xt,Ot,Vt=fo;if(50<=Vt.v)var Dt=!1;else{var Ft=(Dt=Vt.j.get(ut))!==null&&Dt!==void 0?Dt:0;10<=Ft?Dt=!1:(Vt.v++,Vt.j.set(ut,Ft+1),Dt=!0)}Dt&&(!xt&&d&&(xt=d.name+": "+d.message),d=new ao({filename:wt,lineno:0,stacktrace:(Ot=d==null?void 0:d.stack)!==null&&Ot!==void 0?Ot:"",colno:0,handled:"TRUE",category:xt??"",message:ut,moduleName:"GRID_SERVER",sessionId:Vt.sessionId,subSessionId:Vt.subSessionId}),Vt.h(d))}function _o(d){var ut=fo;ut.subSessionId=d,ut.j.clear(),ut.v=0}var fo=new class extends dn{constructor(){super(Tn),this.networkType="UNKNOWN",this.subSessionId=this.sessionId=this.cmsId="",this.j=new Map,this.v=0}setNetworkType(d){this.networkType=sr(d)}};function $o(d){switch(d){case 15867905:case 15867906:case 15867907:return!0;default:return!1}}function Es(d){switch(d){case"ready_for_connection":case"streaming":case"paused":return!0;default:return!1}}function $s(d){switch(d){case 1:return"initializing";case 2:return"ready_for_connection";case 3:return"streaming";case 4:case 5:return"paused";case 6:return"resuming";case 7:return"finished";default:return"unknown"}}function Ho(d){switch(d){case 3237085186:return"invalid operation";case 15859712:return"success";case 3237093379:case 3237093381:return"Invalid server response";case 3237093384:return"Exception";case 15867907:case 15867905:case 15867906:return"cancelled";case 15868417:return"no network";case 3237089282:return"network error";default:return"server error"}}function Sl(d,ut){var wt,xt;return function(Ot,Vt){if(Ot["content-type"]="application/json",Vt.deviceOs!==void 0&&(Ot["nv-device-os"]=Vt.deviceOs),Vt.deviceType!==void 0&&(Ot["nv-device-type"]=Vt.deviceType),Vt.deviceMake!==void 0&&(Ot["nv-device-make"]=Vt.deviceMake),Vt.deviceModel!==void 0&&(Ot["nv-device-model"]=Vt.deviceModel),Vt.clientType!==void 0&&(Ot["nv-client-type"]=Vt.clientType),Vt.clientAppVersion!==void 0&&(Ot["nv-client-version"]=Vt.clientAppVersion),Vt.clientStreamer!==void 0&&(Ot["nv-client-streamer"]=Vt.clientStreamer),Vt.clientId!==void 0&&(Ot["nv-client-id"]=Vt.clientId),Vt.deviceId!==void 0&&(Ot["x-device-id"]=Vt.deviceId),Vt.browserType!==void 0&&(Ot["nv-browser-type"]=Vt.browserType),Vt.clientHeaders)for(const[Dt,Ft]of Vt.clientHeaders)(Vt=Dt).toLowerCase()!=="x-nv-client-identity"&&(Ot[Vt.toLowerCase()]=Ft)}(d.o.headers,ut),d.s.set("component","gridserver-core"),d.s.set("component.version","2.0"),d.s.set("client.name","GFN-PC"),d.s.set("client.version","29.0"),d.s.set("client.os",(wt=ut.deviceOs)!==null&&wt!==void 0?wt:""),d.s.set("client.os.version",(xt=ut.deviceOsVer)!==null&&xt!==void 0?xt:""),d.serverAddress=ut.serverAddress,d.clientPlatformName=ut.clientPlatformName,d.deviceId=ut.deviceId,(d.serverAddress.startsWith("mockpm://")||d.serverAddress.toLocaleLowerCase()==="mockpm.com")&&(d.serverAddress=d.serverAddress.replace("mockpm://",""),d.protocol="http://"),d.u||d.clientPlatformName!=="browser"||$t().then(Ot=>{d.u=Ot}),!0}function ns(d){const ut=Tt.trace.getActiveSpan();if(ut)for(const[wt,xt]of d.s)ut.setAttribute(wt,xt)}function qs(d,ut,wt,xt,Ot){const Vt=Pt();return new Promise((Dt,Ft)=>{const Qt=!!Ot;var rr=()=>{var lr;const Yt={code:3237085186,subSessionId:Vt};Vo(Yt.code);const dr=jn((lr=ut.serverAddress)!==null&&lr!==void 0?lr:"",Qt,Ot);dr.result=$(Yt.code),dr.subSessionId=Vt,zn(dr),Dt(Yt)};if(js(d))if(d.I())ft.e("{1daeef1}","{3753849}"),rr();else{fo.cmsId=ut.appId,_o(Vt),rr=El(d,ut,Ot);var nr=new URL(rr).hostname;d.g={resolve:Dt,reject:Ft,sessionId:Ot,subSessionId:Vt,Uf:xt,Jd:Number.MAX_VALUE,dd:!1,Tc:wt,Kd:jn(nr,Qt),startTime:performance.now()},Ft=Cl(d,ut,Qt,Vt),Wo(d,Qt?1:0,rr,Ft,wt).then(lr=>{!Qt&&lr.result===15859712&&lr.session&&ft.i("{1daeef1}","{7c01bce}",lr.session.sessionId),d.O(lr)}).catch(lr=>{d.N(lr)})}else ft.e("{1daeef1}","{3781843}"),rr()}).catch(Dt=>(d.l.clear(),so(d.h),d.g=void 0,ss(Dt,"startOrResumeSession"),Vo(3237093384),{code:3237093384,subSessionId:Vt}))}function js(d){return d.C.type===-1||!!d.C.token}function Vo(d,ut){const wt=Tt.trace.getActiveSpan();wt&&($o(d)?(wt.setAttribute("error",!1),wt.setAttribute("error.description",Ho(d))):d==15859712?wt.setAttribute("error",!1):(wt.setAttribute("error",!0),wt.setAttribute("error.description",ut??Ho(d))))}function as(d,ut){let wt=d.protocol;return ut&&d.v.has(ut)?(d=d.v.get(ut))!==void 0&&(wt+=d.server,d.port!=0&&(wt+=":"+d.port)):wt+=d.serverAddress,wt+"/v2/session/"+ut}function Wo(d,ut,wt,xt,Ot,Vt){var Dt;const Ft=Yt=>!$o(Yt)&&(Yt!==15859712||ut!==3);let Qt={method:(()=>{switch(ut){case 0:return"POST";case 2:return"DELETE";case 1:case 4:return"PUT";default:return"GET"}})(),headers:d.o.headers,body:xt,retryCount:d.o.retryCount,timeout:d.o.timeout};ut!==2&&ut!==4||(Qt.keepalive=!0,d.u&&d.u.browser=="Chrome"&&!Kt(d.u,81)&&(Qt.keepalive=!1));const rr=performance.now();let nr=function(Yt,dr,ir){return{url:Yt,verb:dr,statusCode:"0",requestStatusCode:"",sessionId:ir??"",subSessionId:fo.subSessionId,requestId:"",serverId:"",callDuration:0,response:"None"}}(wt,(Dt=Qt.method)!==null&&Dt!==void 0?Dt:"",Vt);nr.statusCode="0";let lr="";return It(wt,Qt,d.C,Ot).then(Yt=>{lr=Yt.data;var dr=performance.now();if(nr.statusCode=Yt.status.toString(),nr.callDuration=Math.round(dr-rr),!Yt.data)throw ft.e("{1daeef1}","{ea40865}"),new SyntaxError("The response from server does not contain any data");try{var ir=JSON.parse(Yt.data)}catch(Er){throw nr.response=Yt.data,Er}if(!ir.requestStatus)throw ft.e("{1daeef1}","{862f264}",Us(Yt.data)),new SyntaxError("RequestStatus missing in response");Yt=ir.requestStatus.serverId.toUpperCase(),nr.requestId=ir.requestStatus.requestId,nr.serverId=Yt,nr.requestStatusCode=ir.requestStatus.statusDescription;var Xt,br,Tr,Sr=3237093632;if((dr=ir.requestStatus).statusCode!==void 0){var Mr=dr.statusCode;Mr==1?Sr=15859712:0<Mr&&255>Mr&&(Sr=3237093632+Mr),Sr!=3237093636&&Sr!=3237093672||!dr.unifiedErrorCode||(Sr=dr.unifiedErrorCode)}if(dr.unifiedErrorCode&&ft.i("{1daeef1}","{d2c9cc8}",$(dr.unifiedErrorCode)),Yt={result:Sr,kd:ir,serverId:Yt},dr=ir.requestStatus,Sr=Tt.trace.getActiveSpan()){Mr=new Map([["host.dc",(Xt=dr.serverId)!==null&&Xt!==void 0?Xt:""],["request.id",(br=dr.requestId)!==null&&br!==void 0?br:""],["request.status",(Tr=dr.statusDescription)!==null&&Tr!==void 0?Tr:""]]);for(const[Er,_r]of Mr)Sr.setAttribute(Er,_r)}if(ut===5)(ir=ir.sessions)&&(Yt.activeSessions=_l(d,ir));else if(ut!==2){var gr;(Xt=ir.session)&&(Yt.session=Al(d,Xt),(br=Tt.trace.getActiveSpan())==null||br.setAttribute("session.status",(gr=Xt.status)!==null&&gr!==void 0?gr:""),nr.sessionId=Yt.session.sessionId),(ir=ir.otherUserSessions)&&(Yt.activeSessions=_l(d,ir),Yt.activeSessions.length&&ft.d("{1daeef1}","{ba4be1c}",Yt.activeSessions.length))}return nr&&Ft(Yt.result)&&(Nn(nr),nr=void 0),Yt}).catch(Yt=>{let dr={result:3237089282};const ir=performance.now();if(Yt.code){var Xt=3237093384;(Yt=Yt.code)===3237089281?Xt=15868417:Yt===3237089282?Xt=3237089282:Yt===3237093377?Xt=3237093377:Yt===3237093379?Xt=3237093379:Yt===3237089283?Xt=3237089283:Yt==15867905&&(Xt=15867907),dr.result=Xt}else Xt=!1,(Yt instanceof SyntaxError||Yt instanceof TypeError&&Yt.message&&Yt.message.includes("Cannot read property"))&&(Xt=!0,ft.e("{1daeef1}","{d8979bb}",Yt.name,Yt.message)),Xt?(dr.result=3237093379,ft.e("{1daeef1}","{04bcd6f}",Us(lr))):(dr.result=3237093384,ft.e("{1daeef1}","{94d55bb}",Yt,Yt.stack),Jn(Yt,"performSessionRequest","sessioncontrolimpl.ts"));return nr&&Ft(dr.result)&&(nr.callDuration=Math.round(ir-rr),Nn(nr)),ft.e("{1daeef1}","{9c647aa}",Qt.method,wt),ft.e("{1daeef1}","{200d7ba}",dr.result,Ho(dr.result)),dr})}function ss(d,ut){ft.e("{1daeef1}","{32f1296}",ut,d.message),ft.e("{1daeef1}","{94d55bb}",d,d.stack),Jn(d,ut,"sessioncontrolimpl.ts")}function Al(d,ut){var wt;let xt={sessionId:ut.sessionId,subSessionId:"",appId:0,appLaunchMode:0,state:$s(ut.status),zoneAddress:"",zoneName:"",deviceId:"",gpuType:"",monitorSettings:[],connectionInfo:[],finalizedStreamingFeatures:ut.finalizedStreamingFeatures};if(xt.appId=ut.sessionRequestData?ut.sessionRequestData.appId:0,ut.connectionInfo){var Ot=ut.connectionInfo;if(d.clientPlatformName==="browser"){let Dt=!1;for(var Vt of Ot)if(Vt.usage===2){Dt=!0,xt.connectionInfo.push(Vt);const Ft={ip:"",port:49100,appLevelProtocol:5,protocol:1,usage:14};Vt=Vt.ip.split("."),Ft.ip=Vt[0]+"-"+Vt[1]+"-"+Vt[2]+"-"+Vt[3],Ft.ip+=ut.sessionControlInfo.ip.substring(ut.sessionControlInfo.ip.indexOf(".")),ft.d("{1daeef1}","{cf7d7ea}",Ft.ip),xt.connectionInfo.push(Ft);break}Dt||(xt.connectionInfo=Ot)}else xt.connectionInfo=Ot}switch(ut.monitorSettings&&(xt.monitorSettings=ut.monitorSettings),ut.gpuType&&(xt.gpuType=ut.gpuType),(wt=ut.sessionRequestData)===null||wt===void 0?void 0:wt.appLaunchMode){case 3:xt.appLaunchMode=2;break;case 2:xt.appLaunchMode=1}return ut.sessionControlInfo&&(wt=ut.sessionControlInfo.ip,ut=ut.sessionControlInfo.port,wt&&ut&&(d.v.has(xt.sessionId)&&(((Ot=d.v.get(xt.sessionId))==null?void 0:Ot.server)===wt&&(Ot==null?void 0:Ot.port)===ut||ft.i("{1daeef1}","{f09f5be}",xt.sessionId,Ot==null?void 0:Ot.server,Ot==null?void 0:Ot.port,wt,ut)),d.v.set(xt.sessionId,{server:wt,port:ut})),xt.zoneAddress=wt,xt.zoneName=wt.split(".")[0].toUpperCase()),xt}function _l(d,ut){return ut.map(wt=>Al(d,wt))}function ls(d,ut,wt,xt,Ot,Vt,Dt){const Ft=()=>{ns(d);let lr=as(d,ut),Yt={action:6,adUpdates:Array.from(d.h)};ft.d("{1daeef1}","{dbca4b1}",JSON.stringify(Yt)),so(d.h),Wo(d,4,lr,JSON.stringify(Yt),wt,ut).then(dr=>{xt(dr)}).catch(dr=>Ot(dr))};for(var Qt=d.h.length-1,rr=0;1<=Qt;)d.h[Qt].adAction===3&&d.h[Qt-1].adAction===2?(d.h.splice(Qt-1,2),rr++,Qt-=2):d.h[Qt-1].adAction===3?Qt--:Qt-=2;rr&&ft.d("{1daeef1}","{98a2816}",rr),rr=!1,Qt=1e3*d.m.adsWaitTimeoutS;const nr=d.h.length;if(nr&&(d.h[nr-1].adAction===4&&1<d.l.size||d.h[nr-1].adAction===2?Qt=d.m.adsThrottleIntervalMS:rr=!0),rr)Rt(_t(),"AdUpdateRequest",Ft);else{rr=new Promise(Yt=>{d.h.g=Yt});const lr=new kt(Qt,wt.signal);Promise.race([lr.promise,rr]).then(()=>{d.h.g=void 0,lr.cancel(),d.h.length?d.h.length==nr?Rt(_t(),"AdUpdateRequest",Ft):ls(d,ut,wt,xt,Ot,Vt,Dt):(ft.w("{1daeef1}","{5e1dfd0}"),Dt())}).catch(Yt=>{d.h.g=void 0,lr.h?(ft.i("{1daeef1}","{d7114d7}"),Vt()):Ot(Yt)})}}function El(d,ut,wt){var xt,Ot,Vt;return wt?d=as(d,wt):(wt=(xt=ut.serverAddress)!==null&&xt!==void 0?xt:d.serverAddress,d=d.protocol+wt+"/v2/session"),(d+="?keyboardLayout="+((Ot=ut.keyboardLayout)!==null&&Ot!==void 0?Ot:"en_US"))+"&languageCode="+((Vt=ut.clientLocale)!==null&&Vt!==void 0?Vt:"en_US")}function Cl(d,ut,wt,xt){var Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt;let dr;switch(ut.appLaunchMode){case 2:ft.d("{1daeef1}","{6d5cf87}"),dr=3;break;case 1:dr=2;break;default:dr=1}let ir=(Dt=(Vt=(Ot=ut.monitorSettings)===null||Ot===void 0?void 0:Ot[0])===null||Vt===void 0?void 0:Vt.sdrHdrMode)!==null&&Dt!==void 0?Dt:0;if(rn.hdr){ir=1;for(const Xt of ut.monitorSettings)Xt.sdrHdrMode=1}Ot={audioMode:2,remoteControllersBitmap:(Ft=ut.remoteControllersBitmap)!==null&&Ft!==void 0?Ft:0,sdrHdrMode:ir,networkTestSessionId:null,availableSupportedControllers:[],clientVersion:"29.0",deviceHashId:d.deviceId,internalTitle:null,clientPlatformName:d.clientPlatformName,metaData:[{key:"SubSessionId",value:xt},{key:"wssignaling",value:rn.fe?"1":"0"}],surroundAudioInfo:0,clientTimezoneOffset:(Qt=ut.clientTimeZoneOffset)!==null&&Qt!==void 0?Qt:-6e4*new Date().getTimezoneOffset(),clientIdentification:"GFN-PC",parentSessionId:null,appId:ut.appId,streamerVersion:1,clientRequestMonitorSettings:ut.monitorSettings,appLaunchMode:dr,sdkVersion:"1.0",enhancedStreamMode:1,useOps:!0,clientDisplayHdrCapabilities:null,accountLinked:(rr=ut.accountLinked)!==null&&rr!==void 0&&rr,partnerCustomData:(nr=ut.partnerCustomData)!==null&&nr!==void 0?nr:"",enablePersistingInGameSettings:(lr=ut.enablePersistingInGameSettings)!==null&&lr!==void 0&&lr,secureRTSPSupported:!1,userAge:(Yt=ut.userAge)!==null&&Yt!==void 0?Yt:0,requestedStreamingFeatures:ut.streamingFeatures},rn.ee||d.clientPlatformName==="browser"?Ot.metaData.push({key:"GSStreamerType",value:"WebRTC"}):Ot.secureRTSPSupported=!0;for(const Xt in ut.metaData)Ot.metaData.push({key:Xt,value:ut.metaData[Xt]});return d=JSON.stringify(wt?{action:2,data:"RESUME",sessionRequestData:Ot,metaData:[]}:{sessionRequestData:Ot}),ft.i("{1daeef1}","{c6c3ed4}",wt?"PUT":"POST",hr(d)),d}function Cs(d,ut,wt,xt){var Ot,Vt,Dt;if(d.g)try{const Ft={code:ut,subSessionId:(Ot=d.g.subSessionId)!==null&&Ot!==void 0?Ot:"",session:d.g.ug,zoneName:wt,activeSessions:xt},Qt=d.g.Kd;Qt.result=$(ut),Qt.zoneName=wt??"",Qt.sessionId=(Vt=d.g.sessionId)!==null&&Vt!==void 0?Vt:"",Qt.launchDuration+=performance.now()-d.g.startTime,zn(d.g.Kd),Vo(ut),ft.d("{1daeef1}","{c4902fa}",$(ut),(Dt=d.g.sessionId)!==null&&Dt!==void 0?Dt:""),d.g.resolve(Ft),d.g=void 0,d.l.clear(),so(d.h)}catch(Ft){d.g&&(d.g.reject(Ft),d.g=void 0)}}var Tl=class{constructor(){var d,ut,wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt,br,Tr,Sr,Mr,gr,Er;let _r;this.v=new Map,this.o={...rt},this.C={type:1},this.s=new Map,this.protocol="https://",this.h=new uo,this.l=new Map,this.clientPlatformName=this.deviceId=this.serverAddress="",_r=0+((ut=(d=rn.Ga.pmCommunication)===null||d===void 0?void 0:d.httpConnectionTimeout)!==null&&ut!==void 0?ut:0),_r+=(xt=(wt=rn.Ga.pmCommunication)===null||wt===void 0?void 0:wt.httpDataReceiveTimeout)!==null&&xt!==void 0?xt:0,this.o.timeout=_r?1e3*_r:13e3,this.o.retryCount=(Vt=(Ot=rn.Ga.pmCommunication)===null||Ot===void 0?void 0:Ot.httpRetryCount)!==null&&Vt!==void 0?Vt:3,this.o.hg=(Ft=(Dt=rn.Ga.pmCommunication)===null||Dt===void 0?void 0:Dt.httpBackOffDelay)!==null&&Ft!==void 0?Ft:500,this.m={wg:(rr=(Qt=rn.Ga.pmCommunication)===null||Qt===void 0?void 0:Qt.pollingIntervalMin)!==null&&rr!==void 0?rr:1e3,vg:(lr=(nr=rn.Ga.pmCommunication)===null||nr===void 0?void 0:nr.pollingIntervalMax)!==null&&lr!==void 0?lr:1e4,step:(dr=(Yt=rn.Ga.pmCommunication)===null||Yt===void 0?void 0:Yt.pollingIntervalStep)!==null&&dr!==void 0?dr:1e3,Jf:(Xt=(ir=rn.Ga.pmCommunication)===null||ir===void 0?void 0:ir.pollingQueueSizePerStep)!==null&&Xt!==void 0?Xt:50,adsPollingIntervalMinMS:(Tr=(br=rn.Ga.pmCommunication)===null||br===void 0?void 0:br.adsPollingIntervalMinMS)!==null&&Tr!==void 0?Tr:3e3,adsThrottleIntervalMS:(Mr=(Sr=rn.Ga.pmCommunication)===null||Sr===void 0?void 0:Sr.adsThrottleIntervalMS)!==null&&Mr!==void 0?Mr:2e3,adsWaitTimeoutS:(Er=(gr=rn.Ga.pmCommunication)===null||gr===void 0?void 0:gr.adsWaitTimeoutS)!==null&&Er!==void 0?Er:600}}setAuthInfo(d){this.C=d}setNetworkType(d){fo.setNetworkType(d)}startSession(d,ut,wt){return Rt(_t(),"StartSession",()=>(ns(this),qs(this,d,ut,wt)))}resumeSession(d,ut,wt,xt){return Rt(_t(),"ResumeSession",()=>(ns(this),qs(this,ut,wt,xt,d)))}deleteSession(d,ut){return Rt(_t(),"DeleteSession",()=>(ns(this),js(this)?Wo(this,2,as(this,d),"",ut,d).then(wt=>(wt.result==15859712?(this.v.delete(d),ft.d("{1daeef1}","{6206c13}",d)):ft.e("{1daeef1}","{4de47e3}",d,$(wt.result)),Vo(wt.result),wt.result)).catch(wt=>(ss(wt,"deleteSession"),Vo(3237093384),3237093384)):(ft.e("{1daeef1}","{4fed44a}"),Vo(3237085186),Promise.resolve(3237085186))))}getActiveSessions(d){return Rt(_t(),"GetSessionList",()=>(ns(this),js(this)?Wo(this,5,this.protocol+this.serverAddress+"/v2/session","",d).then(ut=>(Vo((ut={code:ut.result,activeSessions:ut.activeSessions,zoneName:ut.serverId}).code),ut.code!==15859712?ft.e("{1daeef1}","{9d2bb75}",$(ut.code)):ft.d("{1daeef1}","{081857f}"),ut)).catch(ut=>(ss(ut,"getActiveSessions"),Vo((ut={code:3237093384}).code),ut)):(ft.e("{1daeef1}","{dc27839}"),Vo(3237085186),Promise.resolve({code:3237085186}))))}getSessionInfo(d,ut){return Rt(_t(),"GetSession",()=>Wo(this,3,as(this,d),"",ut,d).then(wt=>((wt={code:wt.result,session:wt.session,zoneName:wt.serverId}).code!==15859712?ft.e("{1daeef1}","{021d0f4}",$(wt.code)):ft.d("{1daeef1}","{fa53c7c}"),wt)).catch(wt=>(ss(wt,"getSessionInfo"),Vo((wt={code:3237093384}).code),wt)))}I(){return!!this.g}updateAdState(d){if(!this.I())return ft.e("{1daeef1}","{20d9281}"),3237085186;const ut=this.l.get(d.adId);if(!ut)return ft.e("{1daeef1}","{74daa9c}",d.adId),3237093386;const wt=function(xt){switch(xt){case 1:return 2;case 2:return 3;case 3:return 4;case 4:return 5;case 5:return 6;default:return 0}}(d.adAction);if(!function(xt,Ot){switch(Ot){case 2:return xt==1||xt==0;case 3:case 5:return xt==2||xt==4;case 4:return xt==3;case 6:return xt!=5;default:return!1}}(ut.ed,wt))return ft.e("{1daeef1}","{09d8184}",d.adAction,d.adId,ut.ed),3237093386;if(this.h.length){const xt=this.h[this.h.length-1].adId;if(xt!==d.adId){const Ot=this.h[this.h.length-1].adAction;if(Ot!=4&&Ot!=5)return ft.e("{1daeef1}","{c161587}",xt),3237093386}}return d.clientTimestamp||(d.clientTimestamp=Math.round(Date.now()/1e3)),this.h.push(d),ut.ed=wt,this.l.set(d.adId,ut),15859712}M(){var d,ut;this.g&&Wo(this,3,as(this,(d=this.g.sessionId)!==null&&d!==void 0?d:""),"",this.g.Tc,(ut=this.g.sessionId)!==null&&ut!==void 0?ut:"").then(wt=>{this.O(wt)}).catch(wt=>{this.N(wt)})}N(d){ft.e("{1daeef1}","{e3be7ea}",d.message),Jn(d,"processSessionSetupException","sessioncontrolimpl.ts"),Cs(this,3237093384)}O(d){var ut,wt,xt;if(this.g){var Ot=()=>{Cs(this,Vt.dd?15867906:15867905)},Vt=this.g;if(d.session&&(d.session.subSessionId=this.g.subSessionId,this.g.ug=d.session,this.g.sessionId=d.session.sessionId,Vt.dd=d.kd.session.seatSetupInfo.seatSetupStep==1),d.result===15859712&&d.session){const Dt=d.session;Dt.state==="ready_for_connection"||Dt.state==="streaming"?(Dt.state=="streaming"&&function(){var Ft=fo;const Qt=new mo({key1:"InvalidSessionStateTransition",key2:"Streaming",key3:"",key4:"",key5:"",moduleName:"GRID_SERVER",networkType:Ft.networkType,overrideConfigType:rn.Vb.type,overrideConfigVersion:rn.Vb.version,cmsId:String(Ft.cmsId),sessionId:Ft.sessionId,subSessionId:Ft.subSessionId});Ft.h(Qt)}(),ft.i("{1daeef1}","{30d6f44}",(ut=this.g.sessionId)!==null&&ut!==void 0?ut:""),Cs(this,15859712,d.serverId)):Dt.state=="initializing"||Dt.state=="resuming"?(ut=function(Ft,Qt,rr,nr){var lr,Yt,dr,ir,Xt,br,Tr="Configuring",Sr=0;if(Qt.seatSetupInfo)switch(Qt.seatSetupInfo.seatSetupStep){case 0:Tr="Connecting";break;case 1:Tr="InQueue",Sr=Qt.seatSetupInfo.queuePosition<rr?Qt.seatSetupInfo.queuePosition:rr;break;case 5:Tr="PreviousSessionCleanup";break;default:Sr=0}if(rr={sessionId:Qt.sessionId,subSessionId:nr,queuePosition:Sr,eta:(Yt=(lr=Qt.seatSetupInfo)===null||lr===void 0?void 0:lr.seatSetupEta)!==null&&Yt!==void 0?Yt:0,progressState:Tr,isAdsRequired:Qt.sessionAdsRequired,ads:[]},lr=new Map(Ft.l),Ft.l.clear(),Qt.sessionAds)for(Yt=Qt.sessionAds.length,Tr=0;Tr<Yt;Tr++){if((nr=Qt.sessionAds[Tr]).adState==5||nr.adState==6)continue;Sr=nr.adId,Ft.l.set(Sr,{Xg:nr.adState,ed:(ir=(dr=lr.get(Sr))===null||dr===void 0?void 0:dr.ed)!==null&&ir!==void 0?ir:0}),Sr={adId:Sr,adState:nr.adState,adUrl:nr.adUrl,adLengthInSeconds:nr.adLengthInSeconds,adMediaFiles:[]};const Mr=(br=(Xt=nr.adMediaFiles)===null||Xt===void 0?void 0:Xt.length)!==null&&br!==void 0?br:0;for(let gr=0;gr<Mr;gr++){const Er=nr.adMediaFiles[gr];Sr.adMediaFiles.push({mediaFileUrl:Er.mediaFileUrl,encodingProfile:Er.encodingProfile})}rr.ads.push(Sr)}return rr}(this,d.kd.session,this.g.Jd,this.g.subSessionId),this.g.Uf(ut),Vt.dd&&(this.g.Jd=ut.queuePosition),ut.ads.length?ls(this,(wt=Vt.sessionId)!==null&&wt!==void 0?wt:"",Vt.Tc,this.O.bind(this),this.N.bind(this),Ot,this.M.bind(this)):new kt(function(Ft,Qt){let rr=Ft.m.wg;return Qt.seatSetupInfo.seatSetupStep===1&&Ft.m.Jf!=0&&(rr+=Math.floor(Qt.seatSetupInfo.queuePosition/Ft.m.Jf)*Ft.m.step),Qt.sessionAdsRequired&&(rr=Math.max(rr,Ft.m.adsPollingIntervalMinMS)),Math.min(rr,Ft.m.vg)}(this,d.kd.session),(xt=this.g.Tc)===null||xt===void 0?void 0:xt.signal).promise.then(this.M.bind(this)).catch(Ot)):(ft.e("{1daeef1}","{ce47cd1}",Us(JSON.stringify(d.kd))),Cs(this,3237093378,d.serverId))}else d.result===15867907?Ot():Cs(this,d.result,d.serverId,d.activeSessions)}}};function Us(d){return hr(d).replace(/("clientIp" *: *")(\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b)(?=")/g,"$1***")}var hs={Success:15859712,InvalidOperation:3237085186,NetworkError:3237089282,GetActiveSessionServerError:3237089283,AuthTokenNotUpdated:3237093377,SessionFinishedState:3237093378,ResponseParseFailure:3237093379,InvalidServerResponse:3237093381,PutOrPostInProgress:3237093382,GridServerNotInitialized:3237093383,DOMExceptionInSessionControl:3237093384,InvalidAdStateTransition:3237093386,SessionServerErrorBegin:3237093632,RequestForbidden:3237093634,ServerInternalTimeout:3237093635,ServerInternalError:3237093636,ServerInvalidRequest:3237093637,ServerInvalidRequestVersion:3237093638,SessionListLimitExceeded:3237093639,InvalidRequestDataMalformed:3237093640,InvalidRequestDataMissing:3237093641,RequestLimitExceeded:3237093642,SessionLimitExceeded:3237093643,InvalidRequestVersionOutOfDate:3237093644,SessionEntitledTimeExceeded:3237093645,AuthFailure:3237093646,InvalidAuthenticationMalformed:3237093647,InvalidAuthenticationExpired:3237093648,InvalidAuthenticationNotFound:3237093649,EntitlementFailure:3237093650,InvalidAppIdNotAvailable:3237093651,InvalidAppIdNotFound:3237093652,InvalidSessionIdMalformed:3237093653,InvalidSessionIdNotFound:3237093654,EulaUnAccepted:3237093655,MaintenanceStatus:3237093656,ServiceUnAvailable:3237093657,SteamGuardRequired:3237093658,SteamLoginRequired:3237093659,SteamGuardInvalid:3237093660,SteamProfilePrivate:3237093661,InvalidCountryCode:3237093662,InvalidLanguageCode:3237093663,MissingCountryCode:3237093664,MissingLanguageCode:3237093665,SessionNotPaused:3237093666,EmailNotVerified:3237093667,InvalidAuthenticationUnsupportedProtocol:3237093668,InvalidAuthenticationUnknownToken:3237093669,InvalidAuthenticationCredentials:3237093670,SessionNotPlaying:3237093671,InvalidServiceResponse:3237093672,AppPatching:3237093673,GameNotFound:3237093674,NotEnoughCredits:3237093675,InvitationOnlyRegistration:3237093676,RegionNotSupportedForRegistration:3237093677,SessionTerminatedByAnotherClient:3237093678,DeviceIdAlreadyUsed:3237093679,ServiceNotExist:3237093680,SessionExpired:3237093681,SessionLimitPerDeviceReached:3237093682,ForwardingZoneOutOfCapacity:3237093683,RegionNotSupportedIndefinitely:3237093684,RegionBanned:3237093685,RegionOnHoldForFree:3237093686,RegionOnHoldForPaid:3237093687,AppMaintenanceStatus:3237093688,ResourcePoolNotConfigured:3237093689,InsufficientVmCapacity:3237093690,InsufficientRouteCapacity:3237093691,InsufficientScratchSpaceCapacity:3237093692,RequiredSeatInstanceTypeNotSupported:3237093693,ServerSessionQueueLengthExceeded:3237093694,RegionNotSupportedForStreaming:3237093695,SessionForwardRequestAllocationTimeExpired:3237093696,SessionForwardGameBinariesNotAvailable:3237093697,GameBinariesNotAvailableInRegion:3237093698,UekRetrievalFailed:3237093699,EntitlementFailureForResource:3237093700,SessionInQueueAbandoned:3237093701,MemberTerminated:3237093702,SessionRemovedFromQueueMaintenance:3237093703,ZoneMaintenanceStatus:3237093704,GuestModeCampaignDisabled:3237093705,RegionNotSupportedAnonymousAccess:3237093706,InstanceTypeNotSupportedInSingleRegion:3237093707,InvalidZoneForQueuedSession:3237093710,SessionWaitingAdsTimeExpired:3237093711,UserCancelledWatchingAds:3237093712,StreamingNotAllowedInLimitedMode:3237093713,ForwardRequestJPMFailed:3237093714,MaxSessionNumberLimitExceeded:3237093715,GuestModePartnerCapacityDisabled:3237093716,SessionRejectedNoCapacity:3237093717,SessionServerErrorEnd:3237093887,SessionSetupCancelled:15867905,SessionSetupCancelledDuringQueuing:15867906,RequestCancelled:15867907,NoInternetDuringSessionSetup:15868417},Ml=At.Og;function Hs(d){var ut={ip:"",port:0,protocol:""};for(const wt of d.connectionInfo)if(wt.usage===14){ut.ip=wt.ip,ut.port=wt.port,ut.protocol=wt.appLevelProtocol===5?"https":"http",ut.resourcePath=wt.resourcePath;break}ut={signalConnectionInfo:ut,mediaConnectionInfo:d.connectionInfo,streamInfo:[],clientLocale:"",...d};for(const wt of d.monitorSettings)ut.streamInfo.push({width:wt.widthInPixels,height:wt.heightInPixels,fps:wt.framesPerSecond,sdrHdrMode:wt.sdrHdrMode});return ut}function Ts(d){let ut=[];if(d)for(const wt of d)ut.push({sessionId:wt.sessionId,appId:wt.appId,state:wt.state,appLaunchMode:wt.appLaunchMode});return ut}function zs(d,ut,wt=""){ft.d("{6bae601}","{1e04fe6}",wt,ut),d.subSessionId=ut,fo.sessionId=wt,_o(ut);const xt=d.P.get(ut);xt===void 0||xt===""?d.P.set(ut,wt):ft.w("{6bae601}","{7dd264b}",wt)}function gs(d){return Vo(d.code,d.description),Promise.reject(d)}function Rl(d,ut){d.zoneAddress=ut.zoneAddress||d.zoneAddress,d.zoneName=ut.zoneName||d.zoneName,d.gpuType=ut.gpuType||d.gpuType}var Os=class extends Tl{constructor(d,ut){super(),this.subSessionId="",this.P=new Map,this.R=!1,this.L=new Map,this.S=wt=>{this.j.emit("TelemetryEvent",wt)},this.T=wt=>{this.j.emit("SessionUpdate",wt),this.j.emit("ProgressUpdate",{sessionId:wt.sessionId,subSessionId:wt.subSessionId,queuePosition:wt.queuePosition,eta:wt.eta,state:wt.progressState})},this.u=d,this.j=new or(ut),ft.isCallbackRegistered()||(this.R=!0,ft.setLogCallback(this.j.$.bind(this.j))),fo.configure({option:this.S})}initialize(d){var ut;ft.i("{6bae601}","{6802390}","0.66.9"),Sl(this,{deviceId:(ut=d.deviceHashId)!==null&&ut!==void 0?ut:"",...d,clientStreamer:d.clientStreamer.toString()}),(d=fo).telemetryEventIds={},d.sessionId="",d.subSessionId="",d.cmsId="",ft.d("{6bae601}","{5af3344}")}uninitialize(){this.cancelSessionSetup(),this.R&&ft.setLogCallback(),this.j.removeAllListeners()}addListener(d,ut){this.j.addListener(d,ut)}removeListener(d,ut){this.j.removeListener(d,ut)}updateTelemetryEventIds(d){fo.updateTelemetryEventIds(d)}getAllActiveSessions(){Rt(_t(),"GetSessionList",()=>(ns(this),async function(d){ft.d("{6bae601}","{1aef200}"),d.serverAddress?(await Wo(d,5,d.protocol+d.serverAddress+"/v2/session","").then(ut=>{let wt={sessionList:Ts(ut.activeSessions)};if(ut.result!=15859712){let xt={code:ut.result,description:Ho(ut.result)};wt.error=xt,ft.e("{6bae601}","{9d2bb75}",$(xt.code))}else ft.d("{6bae601}","{081857f}");Vo(ut.result),d.j.emit("ActiveSessionsResult",wt)}).catch(ut=>{ft.e("{6bae601}","{63f9b57}",ut.message),ft.e("{6bae601}","{94d55bb}",ut,ut.stack),Jn(ut,"getAllActiveSessions","gridserver.ts"),ut={sessionList:[],error:{code:3237093384,description:Ho(3237093384)}},Vo(3237093384),d.j.emit("ActiveSessionsResult",ut)}),ft.d("{6bae601}","{a9e5439}")):(d.j.emit("ActiveSessionsResult",{sessionList:[],error:{code:3237093383,description:"GridServer not initialized"}}),Vo(3237093383))}(this)))}getSessionId(){var d;return(d=this.P.get(this.subSessionId))!==null&&d!==void 0?d:""}getSubSessionId(){return this.subSessionId}putOrPostSession(d,ut,wt){return Rt(_t(),wt?"PutSession":"PostSession",()=>(ns(this),function(xt,Ot,Vt){var Dt;const Ft=!!Vt;if(zs(xt,Pt(),Vt),!xt.serverAddress)return gs({code:3237093383,description:"GridServer not initialized"});if(xt.F)return gs({code:3237093382,description:"Previous PutOrPost call is still in progress"});fo.cmsId=Ot.appId,xt.zoneName=void 0,xt.zoneAddress=void 0,xt.gpuType=void 0;const Qt=jn(xt.serverAddress,Ft,Vt);Qt.networkSessionId=(Dt=Ot.networkSessionId)!==null&&Dt!==void 0?Dt:"",Ot=function(Yt){var dr;const ir={monitorSettings:[],...Yt};if(ir.monitorSettings.length===0)for(const Xt of(dr=Yt.streamParams)!==null&&dr!==void 0?dr:[])ir.monitorSettings.push({heightInPixels:Xt.height,framesPerSecond:Xt.fps,widthInPixels:Xt.width});return ir}(Ot);let rr=El(xt,Ot,Vt),nr=Cl(xt,Ot,Ft,xt.subSessionId),lr=performance.now();return new Promise((Yt,dr)=>{const ir=new AbortController;xt.F=ir,Wo(xt,Ft?1:0,rr,nr,ir,Vt).then(Xt=>{var br,Tr,Sr,Mr,gr;let Er;Qt.launchDuration=Math.round(performance.now()-lr),(br=Xt.session)!==null&&br!==void 0&&br.sessionId&&(Qt.sessionId=(Tr=Xt.session)===null||Tr===void 0?void 0:Tr.sessionId,Vt=(Sr=Xt.session)===null||Sr===void 0?void 0:Sr.sessionId),xt.zoneName=Xt.serverId||xt.zoneName,Xt.session&&(Er=Hs(Xt.session),Er.subSessionId=xt.subSessionId,Rl(xt,Er)),Qt.zoneName=(Mr=xt.zoneName)!==null&&Mr!==void 0?Mr:"",ir.signal.aborted&&!$o(Xt.result)&&(Xt.result=15867905,ft.d("{6bae601}","{3ec0e11}")),Xt.result==15859712?(ft.d("{6bae601}","{30536f4}",Vt),zs(xt,xt.getSubSessionId(),Vt),((gr=Xt.session)===null||gr===void 0?void 0:gr.state)=="ready_for_connection"?(Qt.result=$(15859712),zn(Qt)):xt.L.set(Qt.sessionId,Qt),Vo(Xt.result),Yt(Er)):(Xt.result===15867907&&(Xt.result=15867905),Xt={code:Xt.result,sessionId:Vt,description:Ho(Xt.result),sessionList:Ts(Xt.activeSessions)},ft.e("{6bae601}","{17f93f3}",$(Xt.code)),Qt.result=$(Xt.code),zn(Qt),Vo(Xt.code),dr(Xt))}).catch(Xt=>{let br={code:3237093384,sessionId:Vt,description:Ho(3237093384)};ft.e("{6bae601}","{4318505}",Xt.message),ft.e("{6bae601}","{94d55bb}",Xt,Xt.stack),Jn(Xt,"putOrPostSession","gridserver.ts"),Qt.result=$(br.code),zn(Qt),Vo(br.code),dr(br)})}).finally(()=>{xt.F=void 0})}(this,d,wt)))}getSession(d,ut){return Rt(_t(),"GetSession",()=>(ns(this),function(wt,xt,Ot){return wt.serverAddress?Ot?new Promise((Vt,Dt)=>{var Ft=as(wt,xt),Qt=new URL(Ft).hostname;(Ft=wt.L.get(xt))?wt.L.delete(xt):(ft.e("{6bae601}","{bb9b2e3}",xt),Ft=jn(Qt,!1,xt)),Qt=new AbortController,wt.H=Qt,wt.g={resolve:Vt,reject:Dt,sessionId:xt,subSessionId:wt.subSessionId,Uf:wt.T,Jd:Number.MAX_VALUE,dd:!1,Tc:Qt,startTime:performance.now(),Kd:Ft},wt.M()}).then(Vt=>{let Dt;if(Vt.session&&(Dt=Hs(Vt.session),Rl(wt,Dt)),Vt.code===15859712&&Dt)return Dt;throw{code:Vt.code,description:Ho(Vt.code)}}).finally(()=>{wt.l.clear(),so(wt.h),wt.g=void 0}):(Ot=as(wt,xt),Wo(wt,3,Ot,"",void 0,xt).then(Vt=>{if(Vo(Vt.result),Vt.result===15859712&&Vt.session)return Hs(Vt.session);throw{code:Vt.result,description:Ho(Vt.result)}})):gs({code:3237093383,description:"GridServer not initialized"})}(this,d,ut)))}sendDeleteRequest(d){return Rt(_t(),"DeleteSession",()=>(ns(this),function(ut,wt){if(!ut.serverAddress)return gs({code:3237093383,description:"Gridserver not initialized"});let xt=as(ut,wt);return new Promise((Ot,Vt)=>{ft.d("{6bae601}","{bbad3ce}",wt),Wo(ut,2,xt,"",void 0,wt).then(Dt=>{if(Dt.result==15859712)ft.d("{6bae601}","{6206c13}",wt),Ot();else{let Ft={code:Dt.result,description:Ho(Dt.result),sessionId:wt};ft.e("{6bae601}","{4de47e3}",wt,$(Dt.result)),Vt(Ft)}Vo(Dt.result)}).catch(Dt=>{const Ft={code:3237093384,description:Ho(3237093384)};ft.e("{6bae601}","{c4f620c}",Dt.message),ft.e("{6bae601}","{94d55bb}",Dt,Dt.stack),Jn(Dt,"sendDeleteRequestImpl","gridserver.ts"),Vt(Ft)})})}(this,d)))}cancelSessionSetup(){var d,ut;ft.i("{6bae601}","{c73e640}"),(d=this.F)===null||d===void 0||d.abort(),(ut=this.H)===null||ut===void 0||ut.abort(),this.H=this.F=void 0}getZoneName(){var d;return(d=this.zoneName)!==null&&d!==void 0?d:""}getZoneAddress(){var d;return(d=this.zoneAddress)!==null&&d!==void 0?d:""}getGpuType(){var d;return(d=this.gpuType)!==null&&d!==void 0?d:""}I(){return!!this.H}},Ks=class extends Os{constructor(){super()}getAllActiveSessions(){window.setTimeout(()=>{ft.d("{6bae601}","{b575263}"),this.j.emit("ActiveSessionsResult",{sessionList:[]})},1)}putOrPostSession(d){var ut;return ft.d("{6bae601}","{71c010f}"),zs(this,Pt(),(ut=d.sessionId)!==null&&ut!==void 0?ut:"PassThruSessionId"),new Promise(wt=>{window.setTimeout(()=>{var xt;let Ot={sessionId:this.getSessionId(),subSessionId:this.getSubSessionId(),appId:parseInt(d.appId),state:"ready_for_connection",signalConnectionInfo:{ip:"",port:49100,protocol:"http"},mediaConnectionInfo:[],streamInfo:[],appLaunchMode:d.appLaunchMode?d.appLaunchMode:0,zoneName:this.getZoneName(),zoneAddress:this.getZoneAddress(),gpuType:this.getGpuType(),clientLocale:"",finalizedStreamingFeatures:(xt=d.streamingFeatures)!==null&&xt!==void 0?xt:{}};if(this.serverAddress&&(Ot.signalConnectionInfo.ip=this.serverAddress),d.connectionInfo){Ot.mediaConnectionInfo=d.connectionInfo;for(const Vt of Ot.mediaConnectionInfo)Vt.usage===14&&(Ot.signalConnectionInfo.ip=Vt.ip,Ot.signalConnectionInfo.port=Vt.port,Ot.signalConnectionInfo.protocol=Vt.appLevelProtocol===5?"https":"http",Ot.signalConnectionInfo.resourcePath=Vt.resourcePath,ft.d("{6bae601}","{c6b8e0f}",Vt.ip,Vt.port))}if(Ot.signalConnectionInfo.ip||ft.e("{6bae601}","{a43f57e}"),d.monitorSettings)for(const Vt of d.monitorSettings)Ot.streamInfo.push({width:Vt.widthInPixels,height:Vt.heightInPixels,fps:Vt.framesPerSecond,sdrHdrMode:Vt.sdrHdrMode});else for(const Vt of d.streamParams)Ot.streamInfo.push({width:Vt.width,height:Vt.height,fps:Vt.fps});ft.d("{6bae601}","{07dc276}",Ot.sessionId),wt(Ot)},1)})}getSession(){return new Promise((d,ut)=>{ut({code:-1,description:"PassthruPollingNotSupported"})})}sendDeleteRequest(){return new Promise(d=>{d()})}updateAdState(){return-1}},Gs={VIDEO:"video",AUDIO:"audio"},ys={Unknown:0,ApproachingEntitlementTimeout:1,ApproachingIdleTimeout:2,ApproachingSessionMaxTimeLimit:3,ClearUserIdleTimeOut:4},Ms={allowUnconfined:!1,preventNavigation:!1};function Wl(d){if(!((15868672^d)>>8))return 256;let ut=32769;switch(d){case 15859712:case 15867908:case 15868418:ut=0;break;case 3237093894:case 3237093899:ut=32776;break;case 3237093898:ut=32772;break;case 3237093900:ut=32773;break;case 3237093901:ut=32770;break;case 15867910:ut=1;break;default:ft.d("{c00be32}","{233ad08}",$(d))}return ut}function xl(d){let ut=15868672;switch(d){case 256:ut=15868704;break;case 257:ut=15868705;break;case 258:ut=15868706;break;case 259:ut=15868707;break;case 260:ut=15868708;break;case 261:ut=15868709;break;case 262:ut=15868710;break;case 263:ut=15868711;break;case 264:ut=15868712;break;case 265:ut=15868713;break;case 266:ut=15868714;break;case 267:ut=15868715;break;case 268:ut=15868716;break;case 269:ut=15868719;break;case 270:ut=15868688;break;case 512:ut=15868736;break;case 513:ut=15868737;break;case 514:ut=15868738;break;case 515:ut=15868739;break;case 516:ut=15868740;break;case 517:ut=15868741;break;case 518:ut=15868742;break;case 519:ut=15868743;break;case 520:ut=15868744;break;case 521:ut=15868745;break;case 33025:ut=3237094145;break;case 33026:ut=3237094146;break;case 33027:ut=3237094147;break;case 33028:ut=3237094148;break;case 33029:ut=3237094149;break;case 33030:ut=3237094150;break;case 33031:ut=3237094151;break;case 33032:ut=3237094152;break;case 33034:ut=3237094153;break;case 33035:ut=3237094154;break;case 33040:ut=3237094155;break;case 33041:ut=3237094156;break;case 33042:ut=3237094157;break;case 37634:ut=15868718;break;case 32768:ut=3237094158;break;case 768:ut=15868717;break;case 0:ut=15868752;break;default:ft.d("{c00be32}","{1be40ed}",$(d))}return ut}function Xo(){return qr||(qr=new jy),qr}function pr(d){d.h==="white"?d.g&&(d.g.clearColor(1,0,0,1),d.g.clear(d.g.COLOR_BUFFER_BIT),d.h="red"):d.g&&(d.g.clearColor(1,1,1,1),d.g.clear(d.g.COLOR_BUFFER_BIT),d.h="white")}var qr,pn,Ln,Eo,ro,xo,Po,Io,Co,Do,qo,Lo,zo,Fo,ba,Zo,er,Pr,xr,jr,Jr,an,Xr,wn,cn,Sn,Fn,Kn,So,cs,Ql,fu,hu,Xu,Zu,_f,_h,ep,k0,jy=class{constructor(){this.g=null,this.h=""}initialize(d,ut){this.u=ut,ut="ragnarok-latency-indicator";var wt=document.getElementById(ut);if(wt&&wt instanceof HTMLCanvasElement&&wt.parentElement===d.parentElement)d=wt;else{if(wt)do ut="ragnarok-latency-indicator"+Math.round(1e4*Math.random()),wt=document.getElementById(ut);while(wt);(wt=document.createElement("canvas")).id=ut,wt.style.position="fixed",s(this.u)?(wt.style.bottom="env(safe-area-inset-bottom, 0)",wt.style.right="max(24px, env(safe-area-inset-right, 0))"):(wt.style.bottom="0",wt.style.right="0"),wt.style.width="40px",wt.style.height="40px",wt.style.zIndex="300",wt.style.pointerEvents="none",d.insertAdjacentElement("afterend",wt),d=wt}this.j=d,this.j.style.display="block",this.g=this.j.getContext("webgl"),pr(this)}},Yn={},I0="",xa={type:"UNKNOWN",version:""},tp=!1,rp=!0,P0=!1,Il=!0,pu=!0,vu=!0,Pl=0,Vs=0,Ns=0,mu=!1,$a=!0,Yl=!1,ip=!0,Rs=!1,np=!1,op=!1,Jl=!1,ap=!0,sp=!1,Xl=!0,bs=!0,Zl=!0,lp=!0,cp=!0,xs=0,up=!0,dp=!0,fp={};function O0(d){if(d&&(d=Number.parseInt(d),!Number.isNaN(d)))return d}function V0(d){var ut,wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt,br,Tr,Sr,Mr,gr,Er,_r,cr,kr,Wr,gn,mn,On,Wn,sn,In,$n,Mn,lo,oo,Ro,Jo,us,Ir,vn,un,_n,Cn,Vn,qn,xn,no,Ao,co,Xn,to,ho,vo,ga,Bo;if(ft.i("{fbd6ce8}","{4acfb3a}",JSON.stringify(d)),d.clientConfigOverride&&(I0=d.clientConfigOverride),d.gxtOverrideData){var bo=JSON.parse(d.gxtOverrideData);if(bo.params)for(var Yo of bo.params)Yo.name==="ragnarok"&&(Yn=Yo.value,xa={type:"GXT",version:Yo.version})}else d.remoteConfigData&&d.remoteConfigData.ragnarok&&(Yn=JSON.parse(d.remoteConfigData.ragnarok),xa={type:"RCONFIG",version:(bo=d.remoteConfigData.version)!==null&&bo!==void 0?bo:""});if(d.isInternalUser&&(pn=d.isInternalUser),d.overrideData){Yo=new URLSearchParams(d.overrideData);let ds=new URLSearchParams;for(const[ko,x0]of Yo.entries())ds.append(ko.toLowerCase(),x0);if(((ut=ds.get("mode"))===null||ut===void 0?void 0:ut.toLowerCase())==="lean"?(tp=!0,Ln=vu=pu=Il=rp=!1,pn=Eo=!0):((wt=ds.get("mode"))===null||wt===void 0?void 0:wt.toLowerCase())==="dev"&&(pn=Eo=!0),ut=ko=>{e:{if(ko=ds.get(ko))switch(ko.toLowerCase()){case"enable":case"on":case"1":case"true":ko=!0;break e;case"disable":case"off":case"0":case"false":ko=!1;break e}ko=void 0}return ko},bo=ko=>O0(ko=ds.get(ko)),wt=ko=>((ko=ds.get(ko))&&(ko=Number.parseFloat(ko),!Number.isNaN(ko))||(ko=void 0),ko),Yo=(ko,x0)=>(ko=ds.get(ko))===null?x0:ko||void 0,P0=(rp=(xt=ut("log"))!==null&&xt!==void 0?xt:rp)&&((Ot=ut("console"))!==null&&Ot!==void 0?Ot:P0),Il=(Vt=ut("gamepad"))!==null&&Vt!==void 0?Vt:Il,pu=(Dt=ut("webrtcstats"))!==null&&Dt!==void 0?Dt:pu,vu=(Ft=ut("statsupload"))!==null&&Ft!==void 0?Ft:vu,Ln=(Qt=ut("mic"))!==null&&Qt!==void 0?Qt:Ln,ro=(rr=ut("mousefilter"))!==null&&rr!==void 0?rr:ro,xo=(nr=ut("unadjustedmovement"))!==null&&nr!==void 0?nr:xo,0<(Pl=(lr=bo("bitrate"))!==null&&lr!==void 0?lr:Pl)&&100>=Pl&&(Pl*=1e3),Jl=(Yt=ut("gamepadtest"))!==null&&Yt!==void 0?Yt:Jl,(xt=ds.get("resolution"))&&((Vt=xt.toLowerCase().split("x")).length==2?(Ot=parseInt(Vt[0]),Vt=parseInt(Vt[1]),Ot&&Vt?(Vs=Ot,Ns=Vt):ft.e("{fbd6ce8}","{c87835d}",xt)):ft.e("{fbd6ce8}","{c87835d}",xt)),xs=(dr=bo("fps"))!==null&&dr!==void 0?dr:xs,mu=(ir=ut("gamepadraf"))!==null&&ir!==void 0?ir:mu,Po=(Xt=bo("gamepadpoll"))!==null&&Xt!==void 0?Xt:Po,$a=(br=ut("advancedgestures"))!==null&&br!==void 0?br:$a,Yl=(Tr=ut("forcetouchdevice"))!==null&&Tr!==void 0?Tr:Yl,(dr=ut("touch"))!==void 0&&(Io=dr?2:0,Yl=dr),Rs=(Sr=ut("storetouch"))!==null&&Sr!==void 0?Sr:Rs,np=(Mr=ut("storetouchgesture"))!==null&&Mr!==void 0?Mr:np,ip=(gr=ut("touchwarp"))!==null&&gr!==void 0?gr:ip,op=(Er=ut("latency"))!==null&&Er!==void 0?Er:op,Co=Yo("deviceos",Co),Do=Yo("devicetype",Do),qo=Yo("clientstreamer",qo),Lo=Yo("clienttype",Lo),zo=Yo("clientplatformname",zo),Fo=Yo("clientid",Fo),(Sr=ds.get("applaunchmode"))!==null&&(Io=O0(Sr)),ap=(_r=ut("rsdmm"))!==null&&_r!==void 0?_r:ap,sp=(cr=ut("rsdmmtoggle"))!==null&&cr!==void 0?cr:sp,(kr=ut("ioswars"))===null||kr===void 0||kr||(cp=lp=Xl=Zl=bs=!1),bs=(Wr=ut("audioreset"))!==null&&Wr!==void 0?Wr:bs,Xl=(gn=ut("sourcereset"))!==null&&gn!==void 0?gn:Xl,Zl=(mn=ut("autoplaychange"))!==null&&mn!==void 0?mn:Zl,ba=(On=wt("bitsperpixel"))!==null&&On!==void 0?On:ba,Zo=(Wn=wt("bitsperpixel1440p"))!==null&&Wn!==void 0?Wn:Zo,er=(sn=ut("1440p"))!==null&&sn!==void 0?sn:er,Eo=(In=ut("stutter"))!==null&&In!==void 0?In:Eo,ds.has("meta")){Pr={};for(const ko of ds.getAll("meta"))(_r=ko.split("~")).length===2&&(Pr[_r[0]]=_r[1])}xr=($n=ut("haptics"))!==null&&$n!==void 0?$n:xr,jr=(Mn=ut("av1"))!==null&&Mn!==void 0?Mn:jr,Jr=(Bo="codeclist",(lo=Bo=(Bo=ds.get(Bo))?Bo.split(","):void 0)!==null&&lo!==void 0?lo:Jr),pn=(oo=ut("internaluser"))!==null&&oo!==void 0?oo:pn,an=(Ro=ut("hdr"))!==null&&Ro!==void 0?Ro:an,Xr=(Jo=ut("sdr10"))!==null&&Jo!==void 0?Jo:Xr,up=(us=ut("hotkeys"))!==null&&us!==void 0?us:up,wn=(Ir=ut("forcehotkeys"))!==null&&Ir!==void 0?Ir:wn,cn=(vn=ut("synthesizegamepadhid"))!==null&&vn!==void 0?vn:cn,Sn=(un=ut("synthesizedds4disabled"))!==null&&un!==void 0?un:Sn,Fn=(_n=ut("synthesizedds5disabled"))!==null&&_n!==void 0?_n:Fn,Kn=(Cn=ut("synthesizedds4fromds5disabled"))!==null&&Cn!==void 0?Cn:Kn,So=(Vn=ut("synthesizedds5fromds4disabled"))!==null&&Vn!==void 0?Vn:So,cs=(qn=ut("synthesizedds4fromgenericenabled"))!==null&&qn!==void 0?qn:cs,Ql=(xn=ut("synthesizedds5fromgenericenabled"))!==null&&xn!==void 0?xn:Ql,fu=(no=ut("synthesizedds4allgamesenabled"))!==null&&no!==void 0?no:fu,hu=(Ao=ut("synthesizedds5allgamesenabled"))!==null&&Ao!==void 0?Ao:hu,Xu=(co=ut("forceserverds4"))!==null&&co!==void 0?co:Xu,Zu=(Xn=ut("forceserverds5"))!==null&&Xn!==void 0?Xn:Zu,_f=(to=ds.get("cursor"))!==null&&to!==void 0?to:_f,_h=(ho=ut("pointerlockescape"))!==null&&ho!==void 0?ho:_h,dp=(vo=ut("computepressure"))!==null&&vo!==void 0?vo:dp,ep=(ga=ut("disableworkerws"))!==null&&ga!==void 0?ga:ep}An(d),k0&&N0()}function N0(){var d=Yn.avp;d&&(Yn={...Yn,...d}),(d=rn.Ga.pmCommunication)&&(d=d.avp)&&(rn.Ga.pmCommunication={...rn.Ga.pmCommunication,...d})}function L0(d,ut){var wt,xt,Ot,Vt;d.G.za(void 0,(wt=ut==null?void 0:ut.message)!==null&&wt!==void 0?wt:"",(xt=ut==null?void 0:ut.filename)!==null&&xt!==void 0?xt:"",(Ot=ut==null?void 0:ut.lineno)!==null&&Ot!==void 0?Ot:0,(Vt=ut==null?void 0:ut.colno)!==null&&Vt!==void 0?Vt:0,!0,"WorkerError")}function D0(d){d.perf.RAFTS=0,d.perf.DCSend=0,d.perf.GetStats=0,d.perf.FrameInfo=0}function B0(){var d=To;d.h=!1,d.g&&(ft.d("{1f5ec29}","{76b05dd}"),d.g.postMessage({stopStats:!0}))}function es(d){return performance.now()-d.j}function Ws(d,ut){var wt,xt=To;xt.h&&(ut={webrtcStats:{type:ut,stats:d},ackid:(wt=xt.s)===null||wt===void 0?void 0:wt.g++},xt.g&&xt.g.postMessage(ut,d))}var To=new class{constructor(){this.h=!1,this.g=null,this.j=0,this.o=[],this.m=[],this.v=!1,this.perf={RAFTS:0,DCSend:0,GetStats:0,FrameInfo:0},ft.i("{1f5ec29}","{139da36}");try{const d=URL.createObjectURL(new Blob([`
var p={size:70,version:1,name:"DEPR"},r={size:80,version:3,name:"RTPV"},t={size:48,version:1,name:"RTPA"},aa={size:88,version:1,name:"TRAA"},ba={size:44,version:1,name:"TRAV"},ca={size:12,version:1,name:"VFMD"},da={size:20,version:1,name:"PFDA"},ea={size:0,version:1,name:""};function u(a,b=!1){const d=a.m+1;try{let f;a.sessionId&&(f="x-nv-sessionid."+a.sessionId);let l=a.url;b&&(l+="&reconnect=1");let e=new WebSocket(l,f);e.onopen=()=>{var c;a.h("{48fa30b}"+d);if(e===a.g){null===(c=a.j)||void 0===c?void 0:c.F();for(const g of a.l)g.stats?e.send(g.stats):e.send(JSON.stringify(g));for(const g of a.s)w(a,g);a.s=[]}};e.onclose=c=>{var g;a.h("{6406bff}"+d);e===a.g&&(null===(g=a.j)||void 0===g?void 0:g.D({error:a.u,code:c.code,reason:c.reason,wasClean:c.wasClean}),x(a),a.u=
!1)};e.onerror=()=>{a.h("{7605058}"+d);e===a.g&&(a.u=!0)};e.onmessage=c=>{if(a.j)try{let h=JSON.parse(c.data);a.o||a.h("{523f5b9}");y(a);if(!h.hb){if(void 0!==h.ack){var g=h.ack;for(let m=a.l.length-1;0<=m;m--)a.l[m].ackid<=g&&a.l.splice(m,1)}if(void 0!==h.ackid){if(a.maxReceivedAckId<h.ackid&&(a.j.v(h),a.maxReceivedAckId=h.ackid),a.g){let m=JSON.stringify({ack:a.maxReceivedAckId});a.h("{903be10}"+m);a.g.send(m)}}else void 0===h.ack&&a.j.v(h)}}catch(h){a.C("Error in local websocket message handling: "+
h+' "'+c.data+'"')}};a.g=e}catch(f){a.g=void 0,a.C("WebSocket creation exception: "+f+" for socket "+a.m)}a.m=d}function z(a){0!==a.o&&(self.clearTimeout(a.o),a.o=0)}function x(a){a.g&&(a.g.onclose=null,a.g.onerror=null,a.g.onmessage=null,a.g.onopen=null,a.g=void 0)}function y(a){z(a);a.o=self.setTimeout(()=>{var b;a.h("{6c3505a}"+(null===(b=a.g)||void 0===b?void 0:b.readyState)+"{754f60b}"+a.m);a.g||u(a,!0);y(a)},3E3)}
function w(a,b){void 0!==b.ackid&&void 0!==b.ackid&&a.l.push(b);a.g&&(b.stats?a.g.send(b.stats):a.g.send(JSON.stringify(b)))}
var fa=class{constructor(){var a=A,b=B;this.sessionId=C;this.u=!1;this.l=[];this.s=[];this.maxReceivedAckId=this.o=0;this.url="";this.m=0;this.h=a;this.C=b}initialize(a,b,d,f=!1){this.url=a;this.maxReceivedAckId=b;this.j=d;u(this,f);this.h("{fcf6f89}"+this.m)}uninitialize(a){var b;this.maxReceivedAckId=0;this.l=[];this.s=[];this.j=void 0;z(this);null===(b=this.g)||void 0===b?void 0:b.close(a);x(this);this.h("{986b258}"+a+"{754f60b}"+this.m)}send(a){this.j&&(this.g||u(this,!0),this.g&&this.g.readyState===
WebSocket.OPEN?w(this,a):this.s.push(a))}};const E=self;let F=[],I=[];function J(a){a.h&&(a.j("{890d3ae}"+a.h),a.h=0);a.g.clear()}function ha(a){var b=K;let d=b.g.get(a.type);d||(d=[],b.g.set(a.type,d));for(const f of a.stats)d.push(f)}function ia(a){switch(a){case 0:return p;case 1:return r;case 2:return t;case 3:return ba;case 4:return aa;case 5:return ca;case 6:return da;default:return ea}}
let K=new class{constructor(a){this.j=a;this.g=new Map;this.h=0;J(this)}size(){let a=0;for(let [,b]of this.g){let d=b;for(let f of d)a+=f.byteLength}return a+=9*this.g.size}write(a,b){var d=b;for(let [g,h]of this.g){b=g;var f=h,l=d,e=d;d=f.length;var c=ia(b);let m=c.name,q=new DataView(a.buffer);for(let k=0;4>k;k++)q.setUint8(e+k,m.charCodeAt(k));q.setUint8(e+4,c.version);q.setUint16(e+5,d,!0);q.setUint16(e+7,c.size,!0);l=d=l+9;e=a;c=0;for(let k of f)f=new Uint8Array(k),e.set(f,d+c),c+=k.byteLength;
d=l+c;1===b&&this.h++}return d}}(A),C="",L="",M=null,N=void 0,O=0,P=[],Q=[],R=[],S=[],T=[],U=0;function A(a){E.postMessage({log:a})}function B(a){E.postMessage({exception:a})}function V(){F=[];I=[];J(K);P=[];Q=[];R=[];S=[];T=[]}function W(a,b,d,f,l,e){for(let c=0;4>c;c++)a.setUint8(b+c,d.charCodeAt(c));a.setUint8(b+4,f);a.setUint16(b+5,l,!0);a.setUint16(b+7,e,!0)}function X(a){return 0>a?Math.max(a,-2147483648):Math.min(a,4294967295)}
function Y(){if((F.length||I.length||K.size())&&M)try{M.ackid=U;var a=JSON.stringify(M),b=a.length,d=b+2,f=new ArrayBuffer(d);const D=new DataView(f);D.setUint16(0,b);for(b=2;b<d;++b)D.setUint8(b,a.charCodeAt(b-2));var l=new Uint8Array(f),e=13*F.length,c=72*I.length,g=12*P.length,h=10*Q.length,m=12*R.length,q=16*S.length;const G=8*T.length;let v=9+l.length;e&&(v+=9+e);c&&(v+=9+c);g&&(v+=9+g);h&&(v+=9+h);m&&(v+=9+m);q&&(v+=9+q);G&&(v+=9+G);v+=K.size();const H=new ArrayBuffer(v);var k=new DataView(H);
a=0;(new Uint8Array(H)).set(l);a+=l.length;W(k,a,"BPRF",1,0,0);a+=9;if(e){W(k,a,"PERF",2,F.length,13);a+=9;l=k;d=a;for(f=0;f<F.length;f++)l.setFloat64(d,F[f].RAFTS,!0),l.setUint16(d+8,Math.min(1E3*F[f].DCSend,65535),!0),l.setUint16(d+10,Math.min(1E3*F[f].GetStats,65535),!0),l.setUint8(d+12,F[f].FrameInfo),d+=13;a+=e}if(c){W(k,a,"EVNT",1,I.length,72);a+=9;e=k;l=a;for(d=0;d<I.length;d++){e.setFloat64(l,I[d].TS,!0);l+=8;var n=I[d].eventtype;for(f=0;f<n.length&&63>f;f++)e.setUint8(l+f,n.charCodeAt(f));
e.setUint8(l+f,0);l+=64}a+=c}if(g){W(k,a,"SQEV",1,P.length,12);a+=9;c=k;n=a;for(e=0;e<P.length;e++)c.setUint8(n,P[e].qualityScore),c.setUint8(n+1,P[e].bandwidthScore),c.setUint8(n+2,P[e].latencyScore),c.setUint8(n+3,P[e].networkLossScore),c.setFloat64(n+4,P[e].timestamp,!0),n+=12;a+=g}if(h){W(k,a,"MTBD",1,Q.length,10);a+=9;g=k;c=a;for(n=0;n<Q.length;n++)g.setFloat64(c,Q[n].timestamp,!0),g.setUint16(c+8,Math.min(Q[n].duration,65535),!0),c+=10;a+=h}if(m){W(k,a,"INPT",1,R.length,12);a+=9;h=k;g=a;for(c=
0;c<R.length;c++)h.setFloat64(g,R[c].timestamp,!0),h.setUint16(g+8,Math.min(R[c].bufferedAmount,65535),!0),h.setUint16(g+10,Math.min(R[c].maxSchedulingDelay,65535),!0),g+=12;a+=m}if(q){W(k,a,"GRBG",1,S.length,16);a+=9;m=k;h=a;for(g=0;g<S.length;g++)m.setFloat64(h,S[g].timestamp,!0),m.setInt32(h+8,X(S[g].deltaUsedHeapSize),!0),m.setInt32(h+12,X(S[g].deltaTotalHeapSize),!0),h+=16;a+=q}if(G){W(k,a,"MKPT",1,T.length,8);a+=9;q=k;k=a;for(m=0;m<T.length;m++)q.setFloat64(k,T[m],!0),k+=8;a+=G}let ja=new Uint8Array(H);
K.write(ja,a);null===N||void 0===N?void 0:N.send({stats:H,ackid:U})}catch(D){B("Exception in perf/stats upload. Error : "+D.message+" stack: "+D.stack)}V()}function ka(a){E.postMessage({wsMessage:a})}function la(a){E.postMessage({wsClose:a})}function ma(){E.postMessage({wsOpen:!0})}function Z(){E.postMessage({wsOpening:!0})}function na(a,b){N=new fa;N.initialize(L,a,{v:ka,F:ma,D:la,G:Z},b);Z()}
E.onmessage=function(a){try{const b=a.data;b.initMessage?(C=b.initMessage.sessionId,E.postMessage({initialized:!0})):b.perf?F.push(b.perf):b.clientEvent?I.push(b.clientEvent):b.startStats?(M=b.startStats.statsHeader,O=self.setInterval(()=>Y(),5E3),E.postMessage({statsStarted:!0}),A("{5209d98}")):b.stopStats?(self.clearInterval(O),Y(),V(),A("{b58b6ad}")):b.webrtcStats?(b.ackid&&(U=b.ackid),b.webrtcStats.stats&&ha(b.webrtcStats)):b.sq?P.push(b.sq):b.startWebSocket?(L=b.startWebSocket.signInURL,na(b.startWebSocket.maxReceivedAckId,
b.startWebSocket.reconnect)):b.stopWebSocket?(null===N||void 0===N?void 0:N.uninitialize(),N=void 0):b.send?null===N||void 0===N?void 0:N.send(b.send):b.duration?Q.push(b.duration):b.inputChannelStats?R.push(b.inputChannelStats):b.garbageCollectionStats?S.push(b.garbageCollectionStats):b.qosMarker&&T.push(b.qosMarker)}catch(b){B("Worker onmessage exception: "+b)}};


`],{type:"text/javascript"}));this.g=new Worker(d),URL.revokeObjectURL(d),this.g.onmessage=this.F.bind(this),this.g.onerror=this.C.bind(this),ft.i("{1f5ec29}","{62dee75}")}catch(d){ft.e("{1f5ec29}","{50fa2e5}",d.message),this.m.push({name:"RagnarokWorkerProblem",error:JSON.stringify(d)})}}startWebSocket(d,ut,wt,xt){this.l=wt,d={startWebSocket:{signInURL:d,maxReceivedAckId:ut,reconnect:xt}},this.g&&(this.g.postMessage(d),ft.d("{1f5ec29}","{b3f6faa}"))}stopWebSocket(){this.g&&(ft.d("{1f5ec29}","{7ac815d}"),this.g.postMessage({stopWebSocket:!0})),this.l=void 0}initialize(d,ut,wt){if(this.G=ut,this.s=wt,0<this.m.length){for(const xt of this.m)jo(ut,xt.name,xt.error);this.m=[]}if(0<this.o.length){for(const xt of this.o)L0(this,xt);this.o=[]}this.h=!1,D0(this),this.j===0&&(this.j=performance.now()),this.g?(this.g.postMessage({initMessage:{sessionId:d}}),ft.d("{1f5ec29}","{404f264}")):ft.e("{1f5ec29}","{c62bf29}")}F(d){(d=d.data).initialized?(ft.i("{1f5ec29}","{6ccab8d}"),this.v=!0):d.statsStarted?(this.h=!0,ft.d("{1f5ec29}","{e98d45f}")):d.log?ft.i("{cbf9f59}","{0b0c6f9}",d.log):d.exception?ft.i("{cbf9f59}","{0b0c6f9}",d.exception):d.wsClose?this.l?Wm(this.l,d.wsClose):ft.e("{1f5ec29}","{900a6f2}"):d.wsMessage?this.l?l0(this.l,d.wsMessage):ft.e("{1f5ec29}","{900a6f2}"):d.wsOpening?this.l?ft.i("{93c7910}","{6423101}"):ft.e("{1f5ec29}","{900a6f2}"):d.wsOpen&&(this.l?Qm(this.l):ft.e("{1f5ec29}","{900a6f2}"))}C(d){this.G?L0(this,d):this.o.push(d)}};function F0(){const d=G0();if(d){const ut=d.destination.maxChannelCount;return d.close(),ft.i("{d988e7f}","{fa78e0a}",ut),ut}return ft.w("{d988e7f}","{d018fac}"),2}function gu(d){return d[0]<d[1]?[d[1],d[0]]:d}function $0(d,ut,wt){var xt=screen.width,Ot=screen.height,Vt=!!(1&wt);const Dt=!!(2&wt);var Ft=!!(4&wt);if((Ft||8&wt)&&(xt=3840,Ot=2160),ut&&0<ut.length){[xt,Ot]=gu([xt,Ot]),Dt&&1366<=xt&&d===0&&(xt=1600,Ot=1200);const Qt=xt/Ot,rr=xt*Ot;return(xt=ut.filter(nr=>120>nr.frameRate)).length&&(ut=xt),ut.sort((nr,lr)=>{var Yt=nr.resolution,dr=lr.resolution,ir=Math.abs(Yt.width/Yt.height-Qt)-Math.abs(dr.width/dr.height-Qt);if(.05<Math.abs(ir))return ir;ir=d===0?-1:1;const Xt=(d===1?1:-1)*(nr.frameRate-lr.frameRate),br=(Yt=Yt.width*Yt.height)-(dr=dr.width*dr.height);return Yt<=rr?dr<=rr?nr.frameRate!==lr.frameRate?Xt:ir*br:-1:dr<=rr?1:br||Xt}),ut[0]}if(ut={resolution:{width:1280,height:720},frameRate:60},Vt){let[Qt,rr]=gu([xt,Ot]);2<Qt/rr&&(ut.resolution={width:1376,height:640})}else Dt?d!=0?ut.resolution={width:1024,height:768}:([xt]=gu([xt,Ot]),ut.resolution=1024>=xt?{width:1024,height:768}:1366>xt?{width:1112,height:834}:{width:1600,height:1200}):(Vt=[[1920,1200],[1920,1080],[1280,1024],[1600,1200]],Ft&&Vt.unshift([3840,2160]),Ft=[[1280,800],[1280,720],[1280,1024],[1024,768]],xt=function(Qt,rr){if(rr.length==0)return Qt;class nr{constructor(dr,ir){this.w=dr,this.g=ir,this.a=dr/ir}j(dr){return .05>Math.abs(dr.a-this.a)?dr:dr.a>this.a?new nr(Math.floor(this.a/dr.a*dr.w),dr.g):new nr(dr.w,Math.floor(dr.a/this.a*dr.g))}h(){return[this.w,this.g]}}rr=rr.map(Yt=>new nr(Yt[0],Yt[1]));const lr=new nr(Qt[0],Qt[1]);Qt=rr[0];for(let Yt=1;Yt<rr.length;Yt++){let dr=rr[Yt];Math.abs(lr.a-dr.a)<Math.abs(lr.a-Qt.a)&&(Qt=dr)}return(rr=Qt.j(lr)).w>Qt.w?Qt.h():rr.h()}(xt=[xt,Ot],d==0?Vt:Ft),ut.resolution={width:xt[0],height:xt[1]});return ut}function q0(d){var ut;let wt=0;return _e(d)&&(wt|=1),(d?d.os==="iPadOS":/^(?!.*chrome).*safari/i.test(navigator.userAgent)&&!_e()&&Nt())&&(wt|=2),(ut=window.webapis)!==null&&ut!==void 0&&ut.productinfo&&window.webapis.productinfo.isUdPanelSupported()&&(wt|=4),window.lge_webrtc_hevc_support&&(wt|=8),wt}function j0(){return getComputedStyle(document.documentElement)?(getComputedStyle(document.documentElement).getPropertyValue("--sat")||(document.documentElement.style.setProperty("--sat","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--sar","env(safe-area-inset-right)"),document.documentElement.style.setProperty("--sab","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--sal","env(safe-area-inset-left)")),{top:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sat")),left:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sal")),bottom:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),right:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sar"))}):{top:0,left:0,bottom:0,right:0}}function yu(d,ut){return 0>d?0:d>ut?ut:d}function U0(d){var ut=j0();ut.top=Math.max(ut.top,21),ut.bottom=yu(ut.bottom,10);let wt={x:d.clientX,y:d.clientY},xt=.5;return 0<ut.top&&d.clientY-d.radiusY<ut.top?xt-=.5*(ut=yu(ut=(ut.top-(d.clientY-Math.min(d.radiusY,21)))/d.radiusY,1))*ut:0<ut.bottom&&d.clientY+d.radiusY>window.innerHeight-ut.bottom&&(xt+=.5*(ut=yu(ut=(d.clientY+Math.min(d.radiusY,10)-(window.innerHeight-ut.bottom))/d.radiusY,1))*ut),wt.y=yu(wt.y-d.radiusY+2*xt*d.radiusY,window.innerHeight),wt}function H0(d){let ut=d;if(Yn.offlineErrorsStreaming&&Yn.offlineErrorsStreaming.includes($(d)))ut=15868418;else if(Yn.offlineErrorsSessionSetup&&Yn.offlineErrorsSessionSetup.includes($(d)))ut=15868417;else switch(d){case 3237093906:case 3237093899:ut=15868418;break;case 3237089282:ut=15868417}return ut!==d&&ft.i("{d988e7f}","{b84d4c8}",$(d),$(ut)),ut}function hp(d,ut){let wt=d;if(Yn.sleepErrorsStreaming&&Yn.sleepErrorsStreaming.includes($(d)))wt=15867908;else if(Yn.sleepErrorsSessionSetup&&Yn.sleepErrorsSessionSetup.includes($(d)))wt=15867909;else switch(d){case 3237093906:s(ut)&&(wt=15867908);break;case 3237094159:wt=15867908;break;case 3237093654:wt=15867909}return wt!==d&&ft.i("{d988e7f}","{49e2182}",$(d),$(wt)),wt}function Oo(d,ut,wt,xt,Ot=1){const Vt=4294967295&Math.floor(d*Ot);d=Math.floor(d/4294967296*Ot),xt?(ut.setUint32(wt,Vt,!0),ut.setUint32(wt+4,d,!0)):(ut.setUint32(wt,d,!1),ut.setUint32(wt+4,Vt,!1))}function z0(d,ut){let wt=!1;switch(d){case 3237093896:case 3237093897:case 3237093898:case 3237093906:case 3237093899:case 3237093901:case 15868418:case 3237094159:wt=!0;break;case 15867908:s(ut)&&(wt=!0)}return wt}function pp(d,ut){return 2764800<=(d*=ut)&&4953600>d}function bu(d){switch(d){case"H264":return"H264";case"H265":return"HEVC";case"AV1":return"AV1";default:return"UNKNOWN"}}function K0(d){var ut;return d=pt(d)||yt(d)||ct(d)||d.os==="Linux"||s(d),(ut=Yn.enableCpm)!==null&&ut!==void 0?ut:d}function vp(d){return d!==void 0?d?"TRUE":"FALSE":"UNDEFINED"}function wu(d){return d?"MANUAL":"NONE"}let Su=[];function Ol(d){return`${d.width.toFixed()}x${d.height.toFixed()}`}function mp(d,ut,wt){try{const xt=document.createElement("a");xt.style.display="none";const Ot=URL.createObjectURL(new Blob(d,{type:wt}));return xt.href=Ot,xt.download=ut,document.body.appendChild(xt),xt.click(),URL.revokeObjectURL(Ot),document.body.removeChild(xt),!0}catch(xt){return ft.e("{d988e7f}","{8d57ba9}",xt),!1}}function G0(d){const ut=window.AudioContext||window.webkitAudioContext||void 0;if(ut)return d?new ut({sampleRate:d}):new ut;ft.w("{d988e7f}","{b74c037}")}function W0(){var d;return!((d=globalThis.PointerEvent)===null||d===void 0||!d.prototype)}async function Q0(d,ut,wt){var xt;const Ot=new RTCPeerConnection;try{await Ot.setRemoteDescription({type:"offer",sdp:ut}).catch(Qt=>{throw Error("Audio munging setRemoteDescription failed. "+Qt)});const Vt=await Ot.createAnswer();await Ot.setLocalDescription({type:"answer",sdp:(xt=Vt.sdp)===null||xt===void 0?void 0:xt.replace("opus/48000/2","multiopus/48000/"+d).replace("useinbandfec=1",wt)}).catch(Qt=>{throw Error("Audio munging setLocalDescription failed. "+Qt)});const Dt=Ot.getReceivers()[0];if(!Dt.getParameters)return ft.w("{d988e7f}","{4be0bf6}"),2;const{codecs:Ft}=Dt.getParameters();if(Ft.length!==1||Ft[0].mimeType!=="audio/multiopus"||Ft[0].channels!==d)throw Error("Audio munging failed "+Ft[0]);return ft.i("{d988e7f}","{8919816}",d,Ft[0]),d}catch(Vt){return ft.e("{d988e7f}","{4984c00}",d,Vt),2}finally{Ot.close()}}function na(d){var ut;return((ut=Yn.usePerfNowCaptureTimestamp)!==null&&ut!==void 0?ut:!window.chrome)?es(To):d-To.j}function Uy(d){if(!d)return 8;switch(d==null?void 0:d.bitDepth){case 1:return 10;case 0:return 8;default:return ft.w("{d988e7f}","{6f291f9}",d.bitDepth),8}}function gp(d,ut=!1){return ut=ut?U0(d):{x:d.clientX,y:d.clientY},{identifier:d.identifier,clientX:ut.x,clientY:ut.y,deltaX:0,deltaY:0}}function Y0(d,ut,wt){let xt=!1;const Ot=ut.changedTouches,Vt=na(ut.timeStamp);for(let Dt=0;Dt<Ot.length;Dt++){const Ft=Ot[Dt],Qt=d.h.findIndex(rr=>rr.identifier==Ft.identifier);Qt!=-1&&(xt=!0,pr(Xo()),d.h.splice(Qt,1),d.h.length===0?(d.l!==0?(window.clearTimeout(d.l),d.l=0,wt&&Zy(d.j,d.target,Vt,gp(Ft,!0),d.m)):(d.g===2||d.g===4)&&$a&&Vp(d.j,Vt),d.m=0,d.g=0):d.g===5?d.g=0:d.g===6&&($a&&Np(d.j),d.g=0))}Bl(d.j)&&xt&&ut.preventDefault()}function J0(d,ut){d.clientX=ut.pageX-d.j.pb,d.clientY=ut.pageY-d.j.vertical,d.radiusX=ut.radiusX,d.radiusY=ut.radiusY}function X0(d){const ut=U0(d);d.h=.01<Math.abs(ut.y-d.clientY),d.clientX=ut.x,d.clientY=ut.y}class Hy{constructor(ut,wt,xt){this.radiusY=this.radiusX=this.clientY=this.clientX=0,this.h=!1,this.identifier=ut.identifier,this.g=wt,this.j=xt,J0(this,ut),ip?X0(this):this.h=!1}update(ut){J0(this,ut),this.h&&X0(this)}}class yp{constructor(ut,wt,xt,Ot,Vt){this.h=wt,this.id=ut.identifier,this.v=xt,this.l=ut.pageX,this.m=ut.pageY,this.o=ut.radiusX,this.s=ut.radiusY,this.g=Ot,this.j=Vt}}function Au(d,ut,wt,xt){var Ot,Vt=0;for(let ir of ut){if(40<Vt)return void ft.e("{ec05004}","{2faaf33}",ut.length-Vt);var Dt=(Ot=d.g.get(ir.identifier))===null||Ot===void 0?void 0:Ot.g;if(Dt===void 0)ft.e("{ec05004}","{960ee4f}",ir.identifier);else{var Ft=d.m*ir.clientX,Qt=d.o*ir.clientY,rr=d.m*ir.radiusX,nr=d.o*ir.radiusY,lr=65535+rr,Yt=-nr;if(nr=65535+nr,Ft<-rr||Ft>lr||Qt<Yt||Qt>nr)switch(wt){case 2:case 8:break;default:continue}Ft=Math.min(Math.max(Ft,0),65535),Qt=Math.min(Math.max(Qt,0),65535);e:{rr=d.P,lr=wt,Yt=ir.radiusX,nr=ir.radiusY;var dr=xt;if(40<=Vt){Dt=!1;break e}const Xt=18+16*Vt;rr.gb.setUint8(Xt,Dt),rr.gb.setUint8(Xt+1,lr),rr.gb.setUint16(Xt+2,Ft,!1),rr.gb.setUint16(Xt+4,Qt,!1),rr.gb.setUint8(Xt+6,Yt),rr.gb.setUint8(Xt+7,nr),Oo(dr,rr.gb,Xt+8,!1,1e3),Dt=!0}if(!Dt){d.l+=ut.length-Vt;break}Vt++}}Vt!=0&&(Vt>ut.length?ft.w("{ec05004}","{4e60a66}",Vt,ut.length):(Vt=8+16*(ut=Vt),(d=d.P).gb.setUint16(14,Vt,!1),d.gb.setUint16(16,ut,!1),ut=10,3<=d.La&&(Vt++,ut--),Vt=new DataView(d.gb.buffer,ut,Vt),No(d),No(d,Vt)||ft.e("{ec05004}","{56a8404}")))}function Z0(d,ut,wt){var xt=performance.now(),Ot=na(ut.timeStamp);let Vt=!1,Dt=[];const Ft=ut.changedTouches;let Qt=[];for(let rr=0;rr<Ft.length;rr++){const nr=Ft[rr];if(nr.target===d.target){let lr=d.g.get(nr.identifier);Dt.push(nr.identifier),lr&&(Vt=!0,pr(Xo()),lr.update(nr),Qt.push(lr),Rs&&d.h.push(new yp(nr,lr.g,wt,xt,ut.timeStamp)))}}Au(d,Qt,wt,Ot);for(const rr of Dt)xt=rr,(Ot=(wt=d).g.get(xt))&&(wt.g.delete(xt),wt.s.delete(Ot.g));Rs&&(d.N=d.g.size==0),Bl(d.j)&&Vt&&ut.preventDefault()}var eu=new Map([["Escape",27],["Digit0",48],["Digit1",49],["Digit2",50],["Digit3",51],["Digit4",52],["Digit5",53],["Digit6",54],["Digit7",55],["Digit8",56],["Digit9",57],["Minus",189],["Equal",187],["Backspace",8],["Tab",9],["KeyQ",81],["KeyW",87],["KeyE",69],["KeyR",82],["KeyT",84],["KeyY",89],["KeyU",85],["KeyI",73],["KeyO",79],["KeyP",80],["BracketLeft",219],["BracketRight",221],["Enter",13],["ControlLeft",162],["KeyA",65],["KeyS",83],["KeyD",68],["KeyF",70],["KeyG",71],["KeyH",72],["KeyJ",74],["KeyK",75],["KeyL",76],["Semicolon",186],["Quote",222],["Backquote",192],["ShiftLeft",160],["Backslash",220],["KeyZ",90],["KeyX",88],["KeyC",67],["KeyV",86],["KeyB",66],["KeyN",78],["KeyM",77],["Comma",188],["Period",190],["Slash",191],["ShiftRight",161],["NumpadMultiply",106],["AltLeft",164],["Space",32],["CapsLock",20],["F1",112],["F2",113],["F3",114],["F4",115],["F5",116],["F6",117],["F7",118],["F8",119],["F9",120],["F10",121],["Pause",19],["ScrollLock",145],["Numpad7",103],["Numpad8",104],["Numpad9",105],["NumpadSubtract",109],["Numpad4",100],["Numpad5",101],["Numpad6",102],["NumpadAdd",107],["Numpad1",97],["Numpad2",98],["Numpad3",99],["Numpad0",96],["NumpadDecimal",110],["PrintScreen",42],["IntlBackslash",226],["F11",122],["F12",123],["NumpadEqual",187],["F13",124],["F14",125],["F15",126],["F16",127],["F17",128],["F18",129],["F19",130],["F20",131],["F21",132],["F22",133],["F23",134],["F24",135],["KanaMode",233],["Lang2",25],["Lang1",21],["IntlRo",194],["Convert",234],["NonConvert",235],["IntlYen",193],["NumpadComma",188],["NumpadEnter",13],["ControlRight",163],["NumpadDivide",111],["PrintScreen",42],["AltRight",165],["NumLock",144],["Pause",19],["Home",36],["ArrowUp",38],["PageUp",33],["ArrowLeft",37],["ArrowRight",39],["End",35],["ArrowDown",40],["PageDown",34],["Insert",45],["Delete",46],["MetaLeft",91],["OSLeft",91],["MetaRight",92],["OSRight",92],["Lang2",25],["Lang1",21],["NumpadClear",12],["NumpadClearEntry",12]]),zy=new Map([["HanjaMode",25],["HangulMode",21]]),ev=new Map([["1",{vkCode:49,shift:!1}],["2",{vkCode:50,shift:!1}],["3",{vkCode:51,shift:!1}],["4",{vkCode:52,shift:!1}],["5",{vkCode:53,shift:!1}],["6",{vkCode:54,shift:!1}],["7",{vkCode:55,shift:!1}],["8",{vkCode:56,shift:!1}],["9",{vkCode:57,shift:!1}],["0",{vkCode:48,shift:!1}],["!",{vkCode:49,shift:!0}],["@",{vkCode:50,shift:!0}],["#",{vkCode:51,shift:!0}],["$",{vkCode:52,shift:!0}],["%",{vkCode:53,shift:!0}],["^",{vkCode:54,shift:!0}],["&",{vkCode:55,shift:!0}],["*",{vkCode:56,shift:!0}],["(",{vkCode:57,shift:!0}],[")",{vkCode:48,shift:!0}],["-",{vkCode:189,shift:!1}],["_",{vkCode:189,shift:!0}],["=",{vkCode:187,shift:!1}],["+",{vkCode:187,shift:!0}],[",",{vkCode:188,shift:!1}],["<",{vkCode:188,shift:!0}],[".",{vkCode:190,shift:!1}],[">",{vkCode:190,shift:!0}],[";",{vkCode:186,shift:!1}],[":",{vkCode:186,shift:!0}],["/",{vkCode:191,shift:!1}],["?",{vkCode:191,shift:!0}],["`",{vkCode:192,shift:!1}],["~",{vkCode:192,shift:!0}],["[",{vkCode:219,shift:!1}],["{",{vkCode:219,shift:!0}],["\\",{vkCode:220,shift:!1}],["|",{vkCode:220,shift:!0}],["]",{vkCode:221,shift:!1}],["}",{vkCode:221,shift:!0}],["'",{vkCode:222,shift:!1}],['"',{vkCode:222,shift:!0}],[" ",{vkCode:32,shift:!1}],["A",{vkCode:65,shift:!0}],["B",{vkCode:66,shift:!0}],["C",{vkCode:67,shift:!0}],["D",{vkCode:68,shift:!0}],["E",{vkCode:69,shift:!0}],["F",{vkCode:70,shift:!0}],["G",{vkCode:71,shift:!0}],["H",{vkCode:72,shift:!0}],["I",{vkCode:73,shift:!0}],["J",{vkCode:74,shift:!0}],["K",{vkCode:75,shift:!0}],["L",{vkCode:76,shift:!0}],["M",{vkCode:77,shift:!0}],["N",{vkCode:78,shift:!0}],["O",{vkCode:79,shift:!0}],["P",{vkCode:80,shift:!0}],["Q",{vkCode:81,shift:!0}],["R",{vkCode:82,shift:!0}],["S",{vkCode:83,shift:!0}],["T",{vkCode:84,shift:!0}],["U",{vkCode:85,shift:!0}],["V",{vkCode:86,shift:!0}],["W",{vkCode:87,shift:!0}],["X",{vkCode:88,shift:!0}],["Y",{vkCode:89,shift:!0}],["Z",{vkCode:90,shift:!0}],["a",{vkCode:65,shift:!1}],["b",{vkCode:66,shift:!1}],["c",{vkCode:67,shift:!1}],["d",{vkCode:68,shift:!1}],["e",{vkCode:69,shift:!1}],["f",{vkCode:70,shift:!1}],["g",{vkCode:71,shift:!1}],["h",{vkCode:72,shift:!1}],["i",{vkCode:73,shift:!1}],["j",{vkCode:74,shift:!1}],["k",{vkCode:75,shift:!1}],["l",{vkCode:76,shift:!1}],["m",{vkCode:77,shift:!1}],["n",{vkCode:78,shift:!1}],["o",{vkCode:79,shift:!1}],["p",{vkCode:80,shift:!1}],["q",{vkCode:81,shift:!1}],["r",{vkCode:82,shift:!1}],["s",{vkCode:83,shift:!1}],["t",{vkCode:84,shift:!1}],["u",{vkCode:85,shift:!1}],["v",{vkCode:86,shift:!1}],["w",{vkCode:87,shift:!1}],["x",{vkCode:88,shift:!1}],["y",{vkCode:89,shift:!1}],["z",{vkCode:90,shift:!1}]]);class tv extends DataView{constructor(ut,wt,xt,Ot){super(ut,wt,xt),this.shift=0,this.setUint8=(Vt,Dt)=>super.setUint8(Vt+this.shift,Dt),this.setUint16=(Vt,Dt,Ft)=>super.setUint16(Vt+this.shift,Dt,Ft),this.setUint32=(Vt,Dt,Ft)=>super.setUint32(Vt+this.shift,Dt,Ft),this.setInt8=(Vt,Dt)=>super.setInt8(Vt+this.shift,Dt),this.setInt16=(Vt,Dt,Ft)=>super.setInt16(Vt+this.shift,Dt,Ft),this.setInt32=(Vt,Dt,Ft)=>super.setInt32(Vt+this.shift,Dt,Ft),this.setFloat32=(Vt,Dt,Ft)=>super.setFloat32(Vt+this.shift,Dt,Ft),this.setFloat64=(Vt,Dt,Ft)=>super.setFloat64(Vt+this.shift,Dt,Ft),this.shift=Ot??0}}function No(d,ut,wt=!0,xt="input_channel_v1"){if(xt!="gamepad_channel_v1"&&0<d.ia.h&&(ut=d.Ff(ut)),ut===void 0)return!1;const Ot=window.performance.now();var Vt=d.Ba;if(Vt.aa?(qp(Vt),Vt=!1):Vt=!0,!Vt)return!1;if(Vt=!1,2<d.La&&wt&&(9>ut.byteOffset?ft.w("{57a6a4d}","{0fc6121}"):((ut=new DataView(ut.buffer,ut.byteOffset-9,9+ut.byteLength)).setUint8(0,35),Oo(es(To),ut,1,!1,1e3))),wt=-1,xt==="gamepad_channel_v1"&&d.Zc!==void 0&&(wt=d.Zc,d.Zc=(d.Zc+1)%65536),0<=wt){if(3>ut.byteOffset)return ft.e("{57a6a4d}","{e9ac06c}"),!1;(ut=new DataView(ut.buffer,ut.byteOffset-3,3+ut.byteLength)).setUint8(0,37),ut.setUint16(1,wt)}try{let Dt=performance.now();switch(xt){case"gamepad_channel_v1":d.Aa.send(ut);break;case"input_channel_v1":d.Ja.send(ut);break;default:throw Error(`Invalid input channel ${xt}`)}Ym(d.D,performance.now()-Dt);const Ft=window.performance.now();d.V.ld+=1,5<(ut=Ft-Ot)&&(d.V.nd+=1),10<ut&&(d.V.md+=1),Vt=!0}catch(Dt){Dt.stack&&!Dt.stack.includes("Could not send data")&&(ft.e("{57a6a4d}","{7a6bf7c}",Dt),Eu(d)&&d.G.za(Dt,"sendinput exception","{57a6a4d}.ts",0,0,!0))}return Vt}function rv(d,ut,wt){const xt=d.fb(22);xt.setUint32(0,10,!0),xt.setUint16(4,0,!1),xt.setUint16(6,-ut,!1),xt.setUint16(8,0,!1),xt.setUint32(10,0),Oo(wt,xt,14,!1,1e3);try{No(d,xt)}catch(Ot){ft.e("{57a6a4d}","{3d81a57}",Ot),d.G.za(Ot,"send mousewheel exception","{57a6a4d}.ts",0,0,!0)}}function _u(d,ut,wt,xt,Ot,Vt,Dt=0){let Ft=d.J.eb;d=d.J.Wa;let Qt=7;xt&&(Qt=5);let rr=0;return Qt==5&&(rr=4),ut.setUint32(wt,Qt,!0),ut.setUint16(wt+4,Ot,!1),ut.setUint16(wt+6,Vt,!1),ut.setUint16(wt+8,0,!1),ut.setUint32(wt+10+rr,0,!1),Oo(Dt,ut,wt+14+rr,!1,1e3),rr&&(ut.setUint16(wt+10,Ft,!1),ut.setUint16(wt+12,d,!1)),wt+(xt?26:22)}function Eu(d){return d.Ja.readyState==="open"&&(!d.Aa||d.Aa.readyState==="open")}function bp(d,ut,wt,xt=0){const Ot=d.fb(26);_u(d,Ot,0,!0,ut,wt,xt);try{Eu(d)&&No(d,Ot)}catch(Vt){ft.e("{57a6a4d}","{dba1265}",Vt),d.G.za(Vt,"send CursorPos exception","{57a6a4d}.ts",0,0,!0)}}function Ko(d,ut,wt,xt,Ot=0){if(ut!==4&&ut!==3)ft.e("{57a6a4d}","{66e269d}",ut);else{var Vt=d.fb(18);Vt.setUint32(0,ut,!0),Vt.setUint16(4,wt,!1),Vt.setUint16(6,xt,!1),Vt.setUint16(8,0,!1),Oo(Ot,Vt,10,!1,1e3),No(d,Vt)}}function wp(d,ut,wt,xt,Ot,Vt,Dt=0,Ft=0){d.setUint32(ut,12,!0),d.setUint16(ut+4,26,!0),d.setUint16(ut+6,wt,!0),d.setUint16(ut+8,Ft,!0),d.setUint16(ut+10,20,!0),d.setUint16(ut+12,xt,!0),d.setUint16(ut+14,Ot,!0),d.setInt16(ut+16,Math.round(32767.5*(Vt[0]+1))-32768,!0),d.setInt16(ut+18,Math.round(32767.5*(1-Vt[1]))-32768,!0),d.setInt16(ut+20,Math.round(32767.5*(Vt[2]+1))-32768,!0),d.setInt16(ut+22,Math.round(32767.5*(1-Vt[3]))-32768,!0),d.setUint16(ut+24,0,!0),d.setUint16(ut+26,85,!0),d.setUint16(ut+28,0,!0),Oo(Dt,d,ut+30,!0,1e3)}function Sp(d,ut,wt,xt,Ot,Vt=0,Dt=0){return wp(d=d.fb(38),0,xt,ut,wt,Ot,Vt,Dt),d}function iv(d,ut,wt){return(d=d.fb(10)).setUint32(0,18,!0),d.setUint8(4,ut),d.setUint8(5,wt),d.setUint32(6,1),d}var nv=class{constructor(d){this.g=d}enable(){this.g.Nc=!0}disable(){this.g.Nc=!1}updateInput(d,ut,wt){this.g.Nc&&(pr(Xo()),this.g.$d=d,this.g.ae=ut,this.g.Zd=wt,this.g.be=!0)}};class Ky{constructor(ut){this.buttons=ut.Hb(ut.ba),this.axes=ut.Gb(ut.ba),this.Lb=ut.Ib(ut.ba),this.timestamp=performance.now()}}const ov={startDelay:0,duration:0,weakMagnitude:0,strongMagnitude:0};function Qs(d){var ut,wt,xt,Ot,Vt,Dt,Ft=(wt=(ut=Po)!==null&&ut!==void 0?ut:Yn.gamepadPollInterval)!==null&&wt!==void 0?wt:4;d.qa=Ft,Ft=(Ot=(xt=xr)!==null&&xt!==void 0?xt:Yn.allowHaptics)===null||Ot===void 0||Ot,d.allowHaptics=Ft,xt=(Dt=(Vt=cn)!==null&&Vt!==void 0?Vt:Yn.synthesizeGamepadHid)!==null&&Dt!==void 0&&Dt,d.T=xt}function Ap(d,ut){var wt,xt;Qs(d),ut=ut??0,fu&&(ut|=1),hu&&(ut|=2),d.T&&ut?(d.L=(wt=fu)!==null&&wt!==void 0?wt:!!(1&ut),d.W=(xt=hu)!==null&&xt!==void 0?xt:!!(2&ut),Vl(d,!0)):(d.L=!1,d.W=!1)}function Vl(d,ut=!1){var wt=!1;if(d.g.Nc&&!d.g.qb)d.g.qb?wt=!1:(ft.i("{515a922}","{132d93a}",d.g.Mb),d.g.qb=!0,d.C={Dd:"Nvidia Virtual Gamepad",state:0,buttons:0,Lb:0,axes:[]},_p(d,d.g.Mb,!1),wt=!0);else if(!d.g.Nc&&d.g.qb)e:if(d.g.qb){ft.i("{515a922}","{98ac7c2}",d.g.Mb),d.g.qb=!1,sv(d);var xt=d.g.Mb;for(var Ot of d.h)if(Ot&&Ot.Ca==1&&Ot.ha===xt){wt=!1;break e}wt=Ep(d,xt)}else wt=!1;for(Ot=navigator.getGamepads(),xt=0;xt<Ot.length;xt++){let Ft=Ot[xt];if(Ft)if(vv(d,Ft,xt)){var Vt=d,Dt=Ft;Vt.h[xt].ba=Dt,Vt.hapticsSupported=Vt.hapticsSupported||Rp(Dt),ru(Vt),ut&&((Vt=(wt=d.h[xt]).Ca)!==(Dt=Ds(d,Ft))&&(Vt===1?(Ep(d,wt.ha),wt.Ca=Dt,wt.ha=ks(d,Dt),xp(d,wt)):(mv(d,wt),wt.Ca=Dt,wt.ha=ks(d,Dt),_p(d,xt,pv(Ft)))),wt=!0)}else Nl(d,xt,!0),hv(d,Ft,xt)&&(wt=!0);else Nl(d,xt,!0)&&(wt=!0)}if(wt){d.Eb();for(const Ft of d.h)(Ft==null?void 0:Ft.Ca)==2&&xp(d,Ft)}d.Z=!0}function _p(d,ut,wt){ut=d.g.qb&&ut===d.g.Mb?d.g.Mb:d.h[ut].ha,d.j|=4>ut?1<<ut:0,ut=4>ut?1<<ut+8:0,d.j=wt?d.j|ut:d.j&~ut}function av(d){const ut=d.buttons,wt=d.Lb;return"A:"+(4096&ut?"1":"0")+"_B:"+(8192&ut?"1":"0")+"_X:"+(16384&ut?"1":"0")+"_Y:"+(32768&ut?"1":"0")+"_LB:"+(256&ut?"1":"0")+"_LSB:"+(64&ut?"1":"0")+"_RB:"+(512&ut?"1":"0")+"_RSB:"+(128&ut?"1":"0")+"_LT:"+(255&wt?"1":"0")+"_RT:"+(65280&wt?"1":"0")+"_DU:"+(1&ut?"1":"0")+"_DD:"+(2&ut?"1":"0")+"_DL:"+(4&ut?"1":"0")+"_DR:"+(8&ut?"1":"0")+"_ST:"+(16&ut?"1":"0")+"_BA:"+(32&ut?"1":"0")+"_LS:"+(2<=(d=d.axes).length&&(d[0]===2||d[1]===2)?"1":"0")+"_RS:"+(d.length!==4||d[2]!==2&&d[3]!==2?"0":"1")}function sv(d){var ut;d.C&&((ut=d.G)===null||ut===void 0||rm(ut,d.C.Dd,"0","0",0,!1,!0,d.C.state,av(d.C)),d.C=void 0)}function Ep(d,ut){return!(ut===d.g.Mb&&d.g.qb||(d.j&=~(4>ut?1<<ut:0),d.j&=~(4>ut?1<<ut+8:0),0))}function ks(d,ut){let wt=[];for(let xt of d.h)xt&&xt.Ca==ut&&(wt[xt.ha]=!0);for(d=0;wt[d];)d++;return d}function Ls(d,ut){-1<(ut=d.l.indexOf(ut))&&d.l.splice(ut,1)}function Cp(d,ut){return!!(ut.mapping=="standard"||d.fa||d.ea||uv(d,ut)||dv(ut)||fv(d,ut))}function Tp(d,ut){var wt;for(let xt of d.h){if(!xt)continue;let Ot=xt.ba;Cp(d,Ot)&&(xt.Ca===1?(ut.$c(0,Ot.index,xt.ha,0,0,[0,0,0,0],performance.now(),d.j,Ot.id),ut.Yc(1)):(wt=ut.Wc)===null||wt===void 0||wt.call(ut,Ot.index,xt.ha,0,0,[0,0,0,0],performance.now(),d.j,Ot.id))}}function Mp(d,ut){const wt=d.F;ut!=wt&&(wt?(d.m&&(d.m.stop(),d.m.reset(),Ls(d,d.m),d.F=!1),d.o&&d.l.push(d.o)):(d.o&&(Ls(d,d.o),Tp(d,d.o)),d.m&&(d.l.push(d.m),d.H&&d.m.start(),d.F=!0)))}function lv(d,ut,wt=!1){return d.Z||(ut|=2),wt&&(ut|=1),ut}function Ys(d,ut,wt){return{Dd:wt,state:d.h[ut.index]?d.h[ut.index].Fa.state:lv(d,0),buttons:d.h[ut.index]?d.h[ut.index].Fa.buttons:0,Lb:d.h[ut.index]?d.h[ut.index].Fa.Lb:0,axes:d.h[ut.index]?d.h[ut.index].Fa.axes:[]}}function Ds(d,ut){if(!d.T)return 1;if(d=d.Ka&&d.L&&d.Da&&!d.na){const wt=cs,xt=Ql;if(!((ut.id.includes("Vendor: 054c")||ut.id.includes("Wireless Controller")&&ut.id.includes("054c")||wt||xt)&&18<=ut.buttons.length))return 1;const Ot=ut.id.includes("Product: 09cc")||ut.id.includes("Product: 05c4")||ut.id.includes("Product: 0ba0")||ut.id.includes("Wireless Controller")&&ut.id.includes("09cc");if(ut=(ut.id.includes("Product: 0ce6")||ut.id.includes("Product: 0df2")||xt)&&!Kn,d&&(Ot||ut||wt))return 2}return 1}function cv(d,ut){const wt=Ds(d,ut);return{ba:ut,mc:!0,Ca:wt,Hb:d.ca,Ib:d.da,Gb:d.aa,Fa:Ys(d,ut,"Standard Gamepad"),ha:ks(d,wt)}}function uv(d,ut){return!d.ua&&ut.mapping!="standard"&&ut.id.includes("Vendor: 054c")&&ut.id.includes("Product: 0ce6")}function dv(d){return d.mapping!="standard"&&d.id.includes("Vendor: 045e")&&d.id.includes("Product: 0b13")}function fv(d,ut){return d.S&&ut.mapping!="standard"&&ut.id.includes("Vendor: 045e")&&ut.id.includes("Product: 0b12")}function hv(d,ut,wt){if(Cp(d,ut)){var xt=function(Dt,Ft){if(Dt.fa)return cv(Dt,Ft);if(Dt.ea){var Qt=Ds(Dt,Ft);return{ba:Ft,mc:!0,Ca:Qt,Hb:Dt.Za,Ib:Dt.da,Gb:Dt.Ua,Fa:Ys(Dt,Ft,"Standard Gamepad"),ha:ks(Dt,Qt)}}return Dt.va?null:Ft.mapping!="standard"||!Ft.id.includes("Vendor: 0955")||Dt.xa||Dt.wa?Ft.id.includes("Vendor: 045e")&&(Ft.id.includes("Product: 0b13")||Ft.id.includes("Product: 0b20")||Ft.id.includes("Product: 0b05")||Ft.id.includes("Product: 02e0")||Ft.id.includes("Product: 02fd"))?{ba:Ft,mc:!0,Ca:Qt=Ds(Dt,Ft),Hb:Dt.ca,Ib:Dt.da,Gb:Dt.aa,Fa:Ys(Dt,Ft,"Standard Gamepad"),Gg:!0,ha:ks(Dt,Qt)}:Ft.mapping=="standard"?cv(Dt,Ft):uv(Dt,Ft)?{ba:Ft,mc:!1,Ca:Qt=Ds(Dt,Ft),Hb:Dt.Ta.bind(Dt),Ib:Dt.$.bind(Dt,3,4),Gb:Dt.sa,Fa:Ys(Dt,Ft,"Dual Sense Gamepad"),ha:ks(Dt,Qt)}:dv(Ft)?{ba:Ft,mc:!1,Ca:Qt=Ds(Dt,Ft),Hb:Dt.ab.bind(Dt),Ib:Dt.$.bind(Dt,3,4),Gb:Dt.sa,Fa:Ys(Dt,Ft,"Xbox Series Gamepad"),ha:ks(Dt,Qt)}:fv(Dt,Ft)?{ba:Ft,mc:!1,Ca:Qt=Ds(Dt,Ft),Hb:Dt.Va.bind(Dt),Ib:Dt.$.bind(Dt,2,5),Gb:Dt.Sa,Fa:Ys(Dt,Ft,"Xbox Series Wired Gamepad"),ha:ks(Dt,Qt)}:(ft.e("{515a922}","{be4bfd9}",Ft),null):{ba:Ft,mc:!0,Ca:Qt=Ds(Dt,Ft),Hb:Dt.ca,Ib:Dt.$a,Gb:Dt.aa,Fa:Ys(Dt,Ft,"Nvidia Shield Gamepad"),ha:ks(Dt,Qt)}}(d,ut);if(xt){d.hapticsSupported=d.hapticsSupported||Rp(xt.ba),ru(d);const Dt=d.j;var Ot=d.h[wt],Vt=d.s;const Ft=pv(ut);return d.h[wt]=xt,d.I[wt]===void 0&&(d.I[wt]=0),Ot&&vv(d,ut,wt)?d.h[wt].ha=Ot.ha:(d.s==0&&(d.gamepadPollInterval=d.qa,tu(d)),d.s++,xt.Ca===2?(xp(d,xt),d.U.set(xt.ha,wt)):(_p(d,wt,Ft),d.Zb.set(xt.ha,wt))),Ot=Ot?"Changing":"Adding",(ut=Dt!==d.j)?ft.i("{515a922}","{96051ae}",Ot,wt,Ft,xt.ba.id):Vt!=d.s&&ft.i("{515a922}","{98be0dd}",Ot,wt,xt.ba.id),ut}for(Vt of d.l)Vt.Uc(ut);return Nl(d,wt)}for(xt of d.l)xt.Uc(ut);return Nl(d,wt)}function Nl(d,ut,wt=!1,xt){var Ot,Vt;let Dt=d.h[ut];if(Dt){ft.i("{515a922}","{1b26b8a}",ut,Dt.ba.id);const Ft=Dt.Ca,Qt=d.M[ut];if(Qt){const rr=performance.now()-Qt.timestamp;3e3<=rr&&Qt.axes.some(nr=>.5<Math.abs(nr))&&(ft.w("{515a922}","{fde5612}",rr,Qt.axes.join()),(Ot=d.G)===null||Ot===void 0||jo(Ot,"GamepadStuck",Dt.ba.id,rr.toString(),Qt.axes.join()))}if(wt){const[rr,nr]=function(lr){let Yt=["-1","-1"];return(lr=/Vendor:[ ]+([\w\d]+).+Product:[ ]+([\w\d]+)/.exec(lr))&&3<=lr.length&&(Yt=[lr[1],lr[2]]),Yt}(Dt.ba.id);(Vt=d.G)===null||Vt===void 0||rm(Vt,Dt.Fa.Dd,rr,nr,Dt.ba.index,!!Dt.ba.g&&0<Dt.ba.g.length,xt??function(lr,Yt){let dr=!1;for(const ir of lr.h)if(ir){Yt===ir.ba.index&&(dr=!0);break}return dr}(d,Dt.ba.index),Dt.Fa.state,av(Dt.Fa))}if(delete d.h[ut],delete d.I[ut],delete d.M[ut],d.hapticsSupported=function(rr){let nr=!1;for(let lr of rr.h)lr&&(nr=nr||Rp(lr.ba));return nr}(d),ru(d),d.s--,d.s==0&&(d.gamepadPollInterval=100,tu(d)),Ft!==2)return d.Zb.delete(Dt.ha),Ep(d,Dt.ha);mv(d,Dt),d.U.delete(Dt.ha)}return!1}function tu(d){d.N!=0&&(clearInterval(d.N),d.N=0),d.N=d.H&&!mu?window.setInterval(d.Qa,d.gamepadPollInterval):0}function pv(d){return d.id.includes("Xbox")||d.id.includes("xinput")}function Rp(d){var ut;return((ut=d.vibrationActuator)===null||ut===void 0?void 0:ut.type)=="dual-rumble"}function ru(d){var ut,wt;d.O=d.H&&d.hapticsSupported;var xt,Ot=d.O;if(d.ta!=Ot&&(d.ta=Ot,d.allowHaptics))for(const Vt of d.l)(xt=Vt.Fg)===null||xt===void 0||xt.call(Vt,Ot);if(!d.O){Ot=navigator.getGamepads();for(let Vt of Ot)Vt&&(d.P[Vt.index]=0,d.R[Vt.index]=0,(wt=(ut=Vt.vibrationActuator)===null||ut===void 0?void 0:ut.playEffect)===null||wt===void 0||wt.call(ut,"dual-rumble",ov))}}function vv(d,ut,wt){var xt,Ot;return ut.id!=null&&ut.id==((Ot=(xt=d.h[wt])===null||xt===void 0?void 0:xt.ba)===null||Ot===void 0?void 0:Ot.id)}function xp(d,ut){var wt;switch(ut.Ca){case 3:ft.e("{515a922}","{ea001a4}",ut.ba.id);break;case 2:for(const xt of d.l)(wt=xt.gg)===null||wt===void 0||wt.call(xt,ut.ha);break;default:ft.e("{515a922}","{36eeed4}",ut.ba.id)}}function mv(d,ut){var wt;switch(ut.Ca){case 3:ft.e("{515a922}","{2b2d286}",ut.ba.id);break;case 2:for(const xt of d.l)(wt=xt.Of)===null||wt===void 0||wt.call(xt,ut.ha);break;default:ft.e("{515a922}","{fafe5f9}",ut.ba.id)}}function gv(d){switch(Number.parseFloat((d??0).toFixed(5))){case .71429:return 4;case-.42857:return 8;case-1:return 1;case .14286:return 2;case 1.28571:return 0;case 1:return 5;case-.71429:return 9;case .42857:return 6;case-.14286:return 10;default:return 0}}function yv(d,ut){return(0>ut?1:0)|(0<ut?2:0)|(0>d?4:0)|(0<d?8:0)}function bv(d,ut,wt,xt){d.buttons|=ut,d.Lb|=wt,d.axes.length===0?d.axes=[xt[0],xt[1],xt[2],xt[3]]:(d.axes[0]=d.axes[0]==2||d.axes[0]!==xt[0]?2:d.axes[0],d.axes[1]=d.axes[1]==2||d.axes[1]!==xt[1]?2:d.axes[1],d.axes[2]=d.axes[2]==2||d.axes[2]!==xt[2]?2:d.axes[2],d.axes[3]=d.axes[3]==2||d.axes[3]!==xt[3]?2:d.axes[3])}function Cu(d,ut){e:{for(let wt=0;wt<d.v.length;wt++){const xt=d.v[wt];if(xt.$b===ut.$b&&xt.ic===ut.ic&&xt.jc===ut.jc&&xt.mb===ut.mb){ut=wt;break e}}ut=-1}ut!==-1&&d.v.splice(ut,1)}function kp(d){d.H=!0,Qs(d),ru(d),Il&&(d.windowAddEventListener("gamepadconnected",d.oa),d.windowAddEventListener("gamepaddisconnected",d.pa),tu(d),d.F&&d.m.start(),Vl(d,!0))}function wv(d,ut,wt,xt){if(d.O){var Ot=d.h[ut];if(Ot){let rr=Ot.ba;if(rr)if(wt!=0||xt!=0){var Vt,Dt,Ft=performance.now(),Qt=Ft-d.ga[ut];d.P[ut]=wt/65535,d.R[ut]=xt/65535,(!Ot.Gg||500<Qt)&&(d.ga[ut]=Ft,(Dt=(Vt=rr.vibrationActuator)===null||Vt===void 0?void 0:Vt.playEffect)===null||Dt===void 0||Dt.call(Vt,"dual-rumble",{startDelay:0,duration:1e3,weakMagnitude:d.R[ut],strongMagnitude:d.P[ut]}))}else d.ga[ut]=performance.now(),d.P[ut]=0,d.R[ut]=0,(Qt=(Ft=rr.vibrationActuator)===null||Ft===void 0?void 0:Ft.playEffect)===null||Qt===void 0||Qt.call(Ft,"dual-rumble",ov)}}}function Sv(d){return Qs(d),Vl(d),d.j}var Av=class{constructor(d,ut){this.N=this.s=this.j=0,this.gamepadPollInterval=100,this.qa=4,this.P=[],this.R=[],this.ga=[],this.ta=this.O=this.hapticsSupported=!1,this.allowHaptics=!0,this.F=this.H=!1,this.ja=0,this.Z=this.ua=this.wa=this.xa=this.S=this.fa=this.ea=this.va=this.ka=!1,this.maxSchedulingDelay=0,this.v=[],this.W=this.L=this.T=!1,this.Da=!0,this.na=this.bb=!1,this.Zb=new Map,this.U=new Map,this.windowAddEventListener=ut&&ut.windowAddEventListener?ut.windowAddEventListener.bind(window):window.addEventListener.bind(window),this.windowRemoveEventListener=ut&&ut.windowRemoveEventListener?ut.windowRemoveEventListener.bind(window):window.removeEventListener.bind(window),this.oa=this.Na.bind(this),this.pa=this.Oa.bind(this),this.Qa=this.ra.bind(this),this.h=[],this.M=[],this.I=[],this.l=[],this.u=d,ut=d.os;const wt=d.osVer;this.ea=(d=(ut=="iOS"||ut=="iPadOS")&&d.browser=="Safari")&&wt.startsWith("13"),this.fa=d&&wt.startsWith("14"),this.va=d&&wt=="12-",this.S=ut=="ChromeOS",this.xa=ut=="WebOS",this.wa=ut=="Tizen",this.ua=ut=="Android",this.g={Mb:0,Nc:!1,qb:!1,$d:0,ae:0,Zd:[],be:!1},this.cb=new nv(this.g),Qs(this),this.Ka=!Sn,Ap(this),ft.d("{515a922}","{b0c674b}")}cd(){return this.F}Eb(){for(const d of this.l)d.Eb(this.j)}Na(d){hv(this,d.gamepad,d.gamepad.index)&&this.Eb()}Oa(d){Nl(this,d.gamepad.index,!0)&&this.Eb()}ca(d){return((d=d.buttons)[0].value?4096:0)|(d[1].value?8192:0)|(d[2].value?16384:0)|(d[3].value?32768:0)|(d[4].value?256:0)|(d[5].value?512:0)|(d[8]&&d[8].value?32:0)|(d[9]&&d[9].value?16:0)|(d[10]&&d[10].value?64:0)|(d[11]&&d[11].value?128:0)|(d[12]&&d[12].value?1:0)|(d[13]&&d[13].value?2:0)|(d[14]&&d[14].value?4:0)|(d[15]&&d[15].value?8:0)|(d[16]&&d[16].value?65536:0)|(d[17]&&d[17].value?131072:0)}da(d){var ut,wt;d=d.buttons;let xt=Math.round(255*((ut=d[6])===null||ut===void 0?NaN:ut.value));return(255&Math.round(255*((wt=d[7])===null||wt===void 0?NaN:wt.value)))<<8|255&xt}$a(d){var ut,wt;d=d.buttons;let xt=Math.round(255*((ut=d[7])===null||ut===void 0?NaN:ut.value));return(255&Math.round(255*((wt=d[6])===null||wt===void 0?NaN:wt.value)))<<8|255&xt}$(d,ut,wt){return(255&Math.round(127.5*(wt.axes[ut]+1)))<<8|255&Math.round(127.5*(wt.axes[d]+1))}aa(d){return d.axes}Ua(d){return[d.axes[0],-d.axes[1],d.axes[2],-d.axes[3]]}sa(d){return[d.axes[0],d.axes[1],d.axes[2],d.axes[5]]}Sa(d){return[d.axes[0],d.axes[1],d.axes[3],d.axes[4]]}Za(d){var ut,wt,xt,Ot,Vt,Dt;let Ft=d.buttons;return d=d.axes,((ut=Ft[0])!==null&&ut!==void 0&&ut.value?4096:0)|((wt=Ft[1])!==null&&wt!==void 0&&wt.value?8192:0)|((xt=Ft[2])!==null&&xt!==void 0&&xt.value?16384:0)|((Ot=Ft[3])!==null&&Ot!==void 0&&Ot.value?32768:0)|((Vt=Ft[4])!==null&&Vt!==void 0&&Vt.value?256:0)|((Dt=Ft[5])!==null&&Dt!==void 0&&Dt.value?512:0)|(0<d[5]?1:0)|(0>d[5]?2:0)|(0>d[4]?4:0)|(0<d[4]?8:0)}Ta(d){var ut,wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr;let lr=d.buttons;return d=this.S?yv(d.axes[6],d.axes[7]):gv(d.axes[9]),((ut=lr[1])!==null&&ut!==void 0&&ut.value?4096:0)|((wt=lr[2])!==null&&wt!==void 0&&wt.value?8192:0)|((xt=lr[0])!==null&&xt!==void 0&&xt.value?16384:0)|((Ot=lr[3])!==null&&Ot!==void 0&&Ot.value?32768:0)|((Vt=lr[4])!==null&&Vt!==void 0&&Vt.value?256:0)|((Dt=lr[5])!==null&&Dt!==void 0&&Dt.value?512:0)|((Ft=lr[8])!==null&&Ft!==void 0&&Ft.value?32:0)|((Qt=lr[9])!==null&&Qt!==void 0&&Qt.value?16:0)|((rr=lr[10])!==null&&rr!==void 0&&rr.value?64:0)|((nr=lr[11])!==null&&nr!==void 0&&nr.value?128:0)|d}ab(d){var ut,wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr;let lr=d.buttons;return d=gv(d.axes[9]),((ut=lr[0])!==null&&ut!==void 0&&ut.value?4096:0)|((wt=lr[1])!==null&&wt!==void 0&&wt.value?8192:0)|((xt=lr[3])!==null&&xt!==void 0&&xt.value?16384:0)|((Ot=lr[4])!==null&&Ot!==void 0&&Ot.value?32768:0)|((Vt=lr[6])!==null&&Vt!==void 0&&Vt.value?256:0)|((Dt=lr[7])!==null&&Dt!==void 0&&Dt.value?512:0)|((Ft=lr[10])!==null&&Ft!==void 0&&Ft.value?32:0)|((Qt=lr[11])!==null&&Qt!==void 0&&Qt.value?16:0)|((rr=lr[13])!==null&&rr!==void 0&&rr.value?64:0)|((nr=lr[14])!==null&&nr!==void 0&&nr.value?128:0)|d}Va(d){var ut,wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr;let lr=d.buttons;return d=yv(d.axes[6],d.axes[7]),((ut=lr[0])!==null&&ut!==void 0&&ut.value?4096:0)|((wt=lr[1])!==null&&wt!==void 0&&wt.value?8192:0)|((xt=lr[2])!==null&&xt!==void 0&&xt.value?16384:0)|((Ot=lr[3])!==null&&Ot!==void 0&&Ot.value?32768:0)|((Vt=lr[4])!==null&&Vt!==void 0&&Vt.value?256:0)|((Dt=lr[5])!==null&&Dt!==void 0&&Dt.value?512:0)|((Ft=lr[6])!==null&&Ft!==void 0&&Ft.value?32:0)|((Qt=lr[7])!==null&&Qt!==void 0&&Qt.value?16:0)|((rr=lr[9])!==null&&rr!==void 0&&rr.value?64:0)|((nr=lr[10])!==null&&nr!==void 0&&nr.value?128:0)|d}Yb(){for(const d of this.l)d.Yb(this.g.$d,this.g.ae,this.g.Mb,this.g.Zd,this.j)}ra(){var d,ut=performance.now();this.ya&&(this.maxSchedulingDelay=Math.max(this.maxSchedulingDelay,ut-this.ya-this.gamepadPollInterval)),this.ya=ut,Vl(this);let wt=ut=0;for(let rr of this.h){if(!rr)continue;const nr=na(rr.ba.timestamp);let lr=rr.ba;if(!Cp(this,lr))continue;if(rr.ba.timestamp<=this.I[lr.index]){this.Pa&&5e3<=performance.now()-rr.ba.timestamp&&this.Pa();continue}this.I[lr.index]=rr.ba.timestamp;const Yt=this.M[lr.index];var xt,Ot=new Ky(rr);if((xt=Yt)&&(xt=Yt.buttons==Ot.buttons&&Yt.Lb==Ot.Lb)){e:{xt=Yt.axes;for(var Vt=0;Vt<xt.length;Vt++)if(.01<Math.abs(xt[Vt]-Ot.axes[Vt])){xt=!0;break e}xt=!1}xt=!xt}if(!xt){if(this.M[lr.index]=Ot,Ot=rr.Ib(lr),xt=rr.Hb(lr),Vt=rr.Gb(lr),sp)if(xt&(at(this.u)?64:128)){if(this.ka){this.ka=!1;var Dt=performance.now();Dt<this.ja+500?(Mp(this),this.ja=0):this.ja=Dt}}else this.ka=!0;for(let dr of this.v){Dt=void 0;var Ft=dr.$b,Qt=dr.jc;const ir=(dr.ic|Ft)===xt;Qt=!!(255&Qt)==229.5<=(255&Ot)&&!!(65280&Qt)==58752<=(65280&Ot);const Xt=!(((Dt=Yt==null?void 0:Yt.buttons)!==null&&Dt!==void 0?Dt:0)&Ft||!(xt&Ft));ir&&Qt&&Xt&&dr.mb()}switch(rr.Ca){case 1:for(const dr of this.l)dr.$c(wt,lr.index,rr.ha,xt,Ot,Vt,nr,this.j,lr.id);wt++;break;case 2:for(const dr of this.l)(d=dr.Wc)===null||d===void 0||d.call(dr,lr.index,rr.ha,xt,Ot,Vt,rr.ba.timestamp,this.j,lr.id)}ut++,bv(rr.Fa,xt,Ot,Vt)}}if(ut&&pr(Xo()),wt)for(const rr of this.l)rr.Yc(wt);this.g.qb&&this.g.be&&(this.Yb(),this.g.be=!1,this.C&&bv(this.C,this.g.$d,this.g.ae,this.g.Zd))}getVirtualGamepadHandler(){return this.cb}};function _v(d,ut,wt,xt){var Ot=[];Ot[0]=-.1<xt[0]&&.1>xt[0]?0:xt[0],Ot[1]=-.1<xt[1]&&.1>xt[1]?0:xt[1],Ot[2]=-.1<xt[2]&&.1>xt[2]?0:xt[2],Ot[3]=-.1<xt[3]&&.1>xt[3]?0:xt[3],xt=Ot[d.Vf],Ot=Ot[d.Wf];const Vt=4-3*Math.min(1,Math.sqrt(xt*xt+Ot*Ot));d.Hc=xt*d.scale/Vt,d.Ic=Ot*d.scale/Vt,ut=!!(4224&ut)||58752<=(65280&wt),wt=229.5<=(255&wt),xt=d.wc,Ot=d.xc,d.wc=ut,d.xc=wt,!ut&&xt&&Ll(d,0,!1),!wt&&Ot&&Ll(d,2,!1),ut&&!xt&&Ll(d,0,!0),wt&&!Ot&&Ll(d,2,!0)}function Ll(d,ut,wt){ut=new MouseEvent(wt?d.Bd:d.Yd,{button:ut,buttons:(d.wc?1:0)|(d.xc?2:0)}),d.df.dispatchEvent(ut)}var Gy=class{constructor(d,ut){this.Lc=0,this.Bg=8,this.vb=this.ub=this.Ic=this.Hc=0,this.xc=this.wc=!1,this.scale=12,this.kc="mousemove",this.Bd="mousedown",this.Yd="mouseup",this.Vf=2,this.Wf=3,this.u=ut,this.df=d,this.Dg=this.Cg.bind(this),at(this.u)&&(this.Vf=0,this.Wf=1)}$c(d,ut,wt,xt,Ot,Vt){_v(this,xt,Ot,Vt)}Wc(d,ut,wt,xt,Ot){_v(this,wt,xt,Ot)}Cg(){this.ub=Math.sign(this.ub)!=Math.sign(this.Hc)?this.Hc:this.ub+this.Hc,this.vb=Math.sign(this.vb)!=Math.sign(this.Ic)?this.Ic:this.vb+this.Ic;var d=0;let ut=0;if((1<=this.ub||-1>=this.ub)&&(d=Math.trunc(this.ub),this.ub-=d),(1<=this.vb||-1>=this.vb)&&(ut=Math.trunc(this.vb),this.vb-=ut),d!=0||ut!=0){let wt;d={movementX:d,movementY:ut,isPrimary:!0},wt=this.kc=="pointerrawupdate"||this.kc=="pointermove"?new PointerEvent(this.kc,d):new MouseEvent("mousemove",d),this.df.dispatchEvent(wt)}}start(){this.Lc&&this.stop(),this.Lc=window.setInterval(this.Dg,this.Bg)}stop(){this.Lc&&(clearInterval(this.Lc),this.Lc=0)}reset(){this.wc&&Ll(this,0,!1),this.xc&&Ll(this,2,!1),this.ub=this.vb=this.Hc=this.Ic=0,this.wc=this.xc=!1}Eb(){}Yc(){}Yb(){}Uc(){}};function Wy(d){return{zf:"image/x-icon",scale:1,...d}}const Ev={style:"default",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAOAAAADAAAABwAAAAYAAAAOAAABDAAAAZwAAAHYAAAB4AAAAf+AAAH/AAAB/gAAAfwAAAH4AAAB8AAAAeAAAAHAAAABgAAAAQAAAAAAAAAAAAAAAAAAAA////////////////////////////////////////////5////8P///+D////h////wf//98P///OD///xh///8Af///AP///wAH//8AD///AB///wA///8Af///AP///wH///8D////B////w////8f////P////3/////////8=",Ha:2,Ia:1},Qy=[{style:"none",Ma:"",Ha:0,Ia:0},Ev,{style:"text",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfvwAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAfPwAAAAAAAAAAAAAAAAAA/////////////////////////////////////+BA///Agf///z////8/////P////z////8/////P////z////8/////P////z////8/////P////z////8/////P////z////8/////P////z///+BA///Agf////////////8=",Ha:8,Ia:13},{style:"wait",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/8AAAzzAAAHDgAABfoAAAb2AAADbAAAAfgAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAB+AAAA/wAAAaWAAAH/gAABWoAAA//AAAP/wAAAAAAAAAAAAA//////////////////////////////////////////+AAf//gAH//4AB//+AAf//wAP//8AD///gB///8A////gf///8P////D////w////8P////D////gf///wD///4Af//8AD///AA///gAH//4AB//+AAf//gAH///////8=",Ha:7,Ia:12},{style:"crosshair",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAABjAAABgMAAAQBAAAIAIAACACAABAAQAAAIAAAEABAAAgAgAAIAIAABgMAAAICAAABjAAAAFAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////4////5T///53P//+97///fff//333//79+//+AAP//v37//999///fff//53P///d3///5T////j////////8=",Ha:8,Ia:8},{style:"progress",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4AAAAiAAAAPgAAABwAAAYIAAAOCAAADAgAABwcAAAYNgAAOCoABDA+AAZwAAAHYAAAB4AAAAf+AAAH/AAAB/gAAAfwAAAH4AAAB8AAAAeAAAAHAAAABgAAAAQAAAAAAAAAAAAAAAAAAAA///////////////////////+A////gP///4D///+A///5wf//8OP//+Dj///h4///wcH/98OA//ODgP/xh4D/8AeA//AP///wAH//8AD///AB///wA///8Af///AP///wH///8D////B////w////8f////P////3/////////8=",Ha:2,Ia:1},{style:"nwse-resize",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP4AAAB+AAAAPgAAAB4AAABuAAAA5gAAAcIAAEOAAABnAAAAdgAAAHgAAAB8AAAAfgAAAH8AAAAAAAAAAAAAA/////////////////////////////////////////////////////////////////////////////////wA///+AP///wD///+A////gP///wD//34A//88GP//GDz//wB+//8A////Af///wH///8A////AH///wA////////8=",Ha:9,Ia:8},{style:"nesw-resize",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwAAAH4AAAB8AAAAeAAAAHYAAABnAAAAQ4AAAAHCAAAA5gAAAG4AAAAeAAAAPgAAAH4AAAD+AAAAAAAAAAAAA////////////////////////////////////////////////////////////////////////////////wA///8Af///AP///wH///8B////AP///wB+//8YPP//PBj//34A////AP///4D///+A////AP///gD///wA///////8=",Ha:9,Ia:9},{style:"ew-resize",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAEAABgBgAA4AcAAeAHgAPv98AH7/fgA+/3wAHgB4AA4AcAAGAGAAAgBAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////+/3///P8///j/H//w/w//4P8H/8AAA/+AAAH/AAAA/4AAAf/AAAP/4P8H//D/D//4/x///P8///7/f//////8=",Ha:13,Ia:8},{style:"ns-resize",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADgAAAB8AAAA/gAAAf8AAAP/gAAAAAAAADgAAAA4AAAAOAAAADgAAAA4AAAAOAAAADgAAAA4AAAAAAAAA/+AAAH/AAAA/gAAAHwAAAA4AAAAEAAAAAAAAAAAAAA//////////////////////////////////////+/////H////g////wH///4A///8AH//+AA///AAH///g////4P///+D////g////4P///+D////g////4P///AAH//4AD///AB///4A////Af///4P////H////7////////8=",Ha:9,Ia:12},{style:"move",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAABwAAAA+AAAAHAAAABwAAAAcAAAAHAAAABwAAAgACAAf3fwAP93+AB/d/AAIAAgAABwAAAAcAAAAHAAAABwAAAAcAAAAPgAAABwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////f////j////wf///4D///8Af///wf///8H///vB7//zwef/4AAD/8AAAf+AAAD/wAAB/+AAA//zwef/+8Hv///B////wf///wB///+A////wf///+P////3///////////////////////8=",Ha:13,Ia:12},Ev,{style:"pointer",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAB/gAAA/4AAAP/AAAH/wAAB/8AAA//gAAP/4AAH/+AADttgABzbYAAY2wAAANsAAADYAAAAwAAAAMAAAAAAAAAAAAAA//////////////////////////////////////////////////////////////////////+Af///AD///wA///4AP//+AB///AAf//wAH//4AA//+AAP//AAD//gAA//wAAP/8IAH//mAH///gD///4H///+H////z////////8=",Ha:8,Ia:3},{style:"help",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAABgAAAAYAAAYHAAAOAYAADADAABwwwAAYMMAAODDABDAZgAZwDwAHYAAAB4AAAAf+AAAH/AAAB/gAAAfwAAAH4AAAB8AAAAeAAAAHAAAABgAAAAQAAAAAAAAAAAAAAAAAAAA/////////////+f////D////5//////////n////w///58P//8PB//+D4P//hzB//wYYf98OGH/ODhh/xh8A/8Afgf/AP8P/wAH//8AD///AB///wA///8Af///AP///wH///8D////B////w////8f////P////3/////////8=",Ha:2,Ia:1}];function Cv(d){d.preventDefault()}function iu(d){var ut,wt;return d.yb()&&d.cursorType!=2&&d.s.h&&(!d.g.rb||d.g.yd)&&((wt=(ut=c0(d.D))===null||ut===void 0?void 0:ut.Db())===null||wt===void 0||wt)}function Dl(d){return d.m===1||d.m===2}function ts(d){var ut=iu(d);const wt=Dl(d),xt=d.o&&!d.g.rb,Ot=d.Ka;!d.Db||!ut||wt&&xt===Ot?!ut&&wt&&(document.exitPointerLock?(d.m=3,document.exitPointerLock()):d.m=0):(ut=d.v).requestPointerLock&&3>d.P?(d.m=1,(ut=ut.requestPointerLock({unadjustedMovement:xt}))&&(d.ua=!0,ut.then(()=>{d.m=2,d.Ka=xt,d.P=0}).catch(Vt=>{d.m=0,Vt.name==="NotSupportedError"&&xt?(ft.i("{70cc40b}","{08fd91e}"),d.o=!1,ts(d)):(Vt.name=="UnknownError"?(d.P++,ft.w("{70cc40b}","{9f2ba9f}",d.P)):ft.e("{70cc40b}","{4cdd98f}",Vt.name,Vt.message),Bs(d))}))):d.m=2}function Tv(d){var ut,wt;if(d.cursorType===0){var xt=d.v.getBoundingClientRect(),Ot=(wt=(ut=d.v.parentElement)===null||ut===void 0?void 0:ut.getBoundingClientRect())!==null&&wt!==void 0?wt:new DOMRect(0,0,0,0);ut=xt.left-Ot.left+d.J.ma*d.J.Xa,xt=xt.top-Ot.top+d.J.ma*d.J.Ra,d.j.style.position="absolute",d.j.style.left=ut+"px",d.j.style.top=xt+"px",d.j.style.zIndex="200"}}function Ip(d){var ut=d.j.getContext("2d");if(ut&&(d.h.pg=ut,ut=window.devicePixelRatio,d.h.wb!=ut)){ft.i("{70cc40b}","{b786ba9}",ut),d.h.wb=ut,d.h.bd=!0;for(const wt of d.W.values())wt.style=void 0;Js(d)}}function Tu(d,ut){if(d.T&&d.I!==ut)switch(d.C&&Dv(d),d.I=ut,d.C&&Lv(d),ut){case 1:d.H=4;break;case 2:d.H=8;break;case 3:d.H=16;break;default:d.H=0}}function Mv(d,ut,wt,xt){ut>=d.U.length?ft.e("{70cc40b}","{de8eabe}",ut):Nv(d,d.U[ut],wt,xt)}function Rv(d){d.O&&(window.clearTimeout(d.O),d.O=0)}function Mu(d,ut,wt){Pp(d,ut-d.J.Xa,wt-d.J.Ra)}function Js(d){d.h.Vc=!0}function xv(d,ut){if(ut instanceof PointerEvent){if(xu(ut))return;ut.preventDefault()}let wt=performance.now();if(d.s.h&&(!iu(d)||Dl(d))&&(ut.movementX!==0||ut.movementY!==0)){d.lc(!0);var xt=1,Ot=0,Vt=d.g.rb,Dt=d.ia.h,Ft=Qt=>{if(d.R.update(Qt.movementX,Qt.movementY,Qt.timeStamp)){var rr=d.R.jf(),nr=d.R.kf();if(Vt){if(d.g.yd){var lr=d.S?d.h.wb:1;Pp(d,d.g.sb+rr/lr,d.g.tb+nr/lr)}else Mu(d,Qt.offsetX,Qt.offsetY);d.h.Vc=!0,rr=d.g.sb,nr=d.g.tb}else d.S&&(lr=d.h.wb,rr+=d.g.Sd,nr+=d.g.Td,d.g.Sd=rr%lr,d.g.Td=nr%lr,rr/=lr,nr/=lr);e:{if(lr=d.ia,Qt=na(Qt.timeStamp),Ot%xt!=0&&0<lr.j){const Yt=lr.l[lr.j-1];if(Yt.ib===Vt&&Yt.yc===wt){Vt?(Yt.x=rr,Yt.y=nr):(Yt.x+=rr,Yt.y+=nr);break e}}lr.j==lr.l.length?(lr.l.push({ib:Vt,x:rr,y:nr,captureTimestamp:Qt,jb:0,yc:wt}),lr.j++):((lr=lr.l[lr.j++]).ib=Vt,lr.x=rr,lr.y=nr,lr.captureTimestamp=Qt,lr.jb=0,lr.yc=wt)}Ot++}};if(ut instanceof PointerEvent&&d.$){const Qt=ut.getCoalescedEvents();if(Qt.length==0)Ft(ut);else{ut=d.ia.g.length,ut=Qt.length>2*ut?1:Math.max(ut-d.ia.h-4,1),Qt.length>ut&&(xt=Math.ceil(Qt.length/ut),d.V.Rc+=Qt.length);for(let rr of Qt)Ft(rr)}}else Ft(ut);1<d.l.zg&&Dt===0&&d.ia.h>Dt&&(d.ia.l[Dt].jb=d.ia.h-Dt)}}function Pp(d,ut,wt){d.g.sb=Math.min(Math.max(ut,0),d.J.eb),d.g.tb=Math.min(Math.max(wt,0),d.J.Wa),Js(d)}function kv(d,ut){if(d.J.eb&&d.J.Wa){const wt=ut.Wa/d.J.Wa;d.g.sb*=ut.eb/d.J.eb,d.g.tb*=wt}d.J=ut,Tv(d),Ip(d)}function Iv(d){return 1.499<=d&&1.999>d?2:Math.max(1,Math.floor(d+.001))}function Pv(d,ut){const wt=d.g.cursor;if(wt.image){var xt=d.h.wb,Ot=d.h.pg,Vt=wt.image.width*ut;ut*=wt.image.height;var Dt=Math.ceil(Vt),Ft=Math.ceil(ut);Dt!==d.j.width||Ft!==d.j.height?(d.j.style.width=Vt/xt+"px",d.j.style.height=ut/xt+"px",d.j.width=Dt,d.j.height=Ft,Ot.scale(1,1),Ot.imageSmoothingEnabled=!1):Ot.clearRect(0,0,d.j.width,d.j.height),Ot.drawImage(wt.image,0,0,Vt,ut)}else ft.e("{70cc40b}","{bc9bdcd}")}function Ov(d){d.h.od&&(d.h.od=!1,d.j.style.visibility="hidden")}function Bs(d){const ut=d.v;!d.yb()||iu(d)&&!Dl(d)||d.cursorType==2?ut.style.cursor="default":ut.style.cursor=d.cursorType===0?"none":d.g.style}function Vv(d,ut){const wt=()=>{if(d.g.Ac=void 0,d.g.cursor=ut,d.h.bd=!0,d.cursorType===0)Js(d);else{if(!ut.style){var xt=d.h.wb,Ot=1,Vt=1;d.Da!==void 0&&(Vt=(Ot=Iv(xt/ut.scale))/xt),Pv(d,Ot),xt=d.j.toDataURL("image/bmp"),Ot=ut.Ha*Vt,Vt=ut.Ia*Vt;const Dt=d.h.wb,Ft=d.Da;ut.style=Ft?`${Ft}(url(${xt}) ${Dt}x) ${Ot} ${Vt}, auto`:`url(${xt}) ${Ot} ${Vt}, auto`}d.g.style=ut.style,Bs(d)}};if(d.cursorType!==0&&ut.style)wt();else if(ut.style!=="none")if(ut.image)ut.image.width!==0||ut.image.height!==0?wt():d.g.Ac=ut.image;else{const xt=new Image;ut.image=xt,!xt.decode&&xt.decoding&&(xt.decoding="sync"),xt.src=`data:${ut.zf};base64,${ut.Ma}`,xt.decode?(d.g.Ac=xt,xt.decode().then(()=>{d.g.Ac===xt&&wt()}).catch(()=>{d.g.Ac===xt&&(d.g.Ac=void 0,Vv(d,d.U[1]))})):wt()}else d.g.cursor=ut,Ov(d)}function Nv(d,ut,wt,xt){const Ot=ut.style!=="none";!d.g.rb&&Ot&&wt!==void 0&&xt!==void 0&&Pp(d,wt*d.J.eb/65535,xt*d.J.Wa/65535),d.g.rb=Ot,Ot||(d.g.Sd=0,d.g.Td=0),ts(d),Vv(d,ut),Bs(d)}function Ru(d){d.M!==0&&(window.clearTimeout(d.M),d.M=0)}function Lv(d){d.cursorType==2?(d.N.kc=Xs(d),d.videoAddEventListener(Xs(d),d.L?d.ka:d.ja)):d.I!==0?(d.N.kc="pointerrawupdate",d.videoAddEventListener("pointerrawupdate",d.wa)):(d.N.kc=Xs(d),d.videoAddEventListener(Xs(d),d.va))}function Op(d){if(0<d.F.size){ft.i("{70cc40b}","{041c67f}",d.F.size);for(const ut of d.F)d.Ab(ut,0)}}function Dv(d){d.cursorType==2?d.videoRemoveEventListener(Xs(d),d.L?d.ka:d.ja):d.I!==0?d.videoRemoveEventListener("pointerrawupdate",d.wa):d.videoRemoveEventListener(Xs(d),d.va)}function Xs(d){return d.L?"pointermove":"mousemove"}var Yy=class{constructor(d,ut,wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr){var Yt,dr,ir,Xt,br,Tr,Sr,Mr,gr,Er,_r,cr,kr,Wr,gn,mn,On,Wn;this.Ba=d,this.s=lr,this.W=new Map,this.U=Qy.map(Wy),this.P=this.m=0,this.Db=!1,this.F=new Set,this.ua=this.Ka=this.o=this.$=this.L=this.T=!1,this.H=this.I=0,this.ca=!1,this.ra={passive:!1},this.Z=!0,this.C=!1,this.O=this.M=0,this.Sa=()=>{this.O=0,iu(this)&&!Dl(this)&&(this.Db=!0,ts(this))},this.u=Dt,this.D=ut,this.v=wt,this.G=Ot,this.Na=Vt,this.N=Ft,this.V=Qt,this.ia=rr,this.l=nr,xt.onmessage=sn=>function(In,$n){let Mn=new Uint8Array($n.data);switch(Mn[0]){case 0:case 1:$n=Mn[1];let Jo=Mn[2],us=Mn[3];var lo=Mn[4];let Ir=5,vn=()=>{const Vn=Mn[Ir]+(Mn[Ir+1]<<8);return Ir+=2,Vn};var oo="";lo!=0&&(oo=Mn.subarray(Ir,Ir+lo),Ir+=lo,oo=new TextDecoder("utf-8").decode(oo));var Ro="";let un,_n,Cn;(lo=vn())!=0&&(Ro=Mn.subarray(Ir,Ir+lo),Ir+=lo,Ro=new TextDecoder("utf-8").decode(Ro)),Ir+4<=Mn.byteLength&&(un=vn(),_n=vn()),Ir+2<=Mn.byteLength&&(Cn=vn()/100),Mn[0]==0?Mv(In,$n,un,_n):function(Vn,qn,xn,no,Ao,co,Xn,to,ho){if(0<co.length)xn={Ma:co,Ha:xn,Ia:no,zf:Ao,scale:ho||1},Vn.W.set(qn,xn);else if((xn=Vn.W.get(qn))===void 0)return void ft.e("{70cc40b}","{0196577}",qn);Nv(Vn,xn,Xn,to)}(In,$n,Jo,us,oo,Ro,un,_n,Cn);break;case 10:In.Na.allowUnconfined&&function(Vn,qn){Vn.g.yd=qn,ts(Vn)}(In,Mn[1]==1)}}(this,sn),this.J={eb:wt.clientWidth||window.screen.width,Wa:wt.clientHeight||window.screen.height,Sf:1,Xa:0,Ra:0,videoWidth:0,videoHeight:0,Pc:0,offsetX:0,offsetY:0,ma:1},d=window.zoneless,this.documentAddEventListener=(dr=(Yt=d==null?void 0:d.documentAddEventListener)===null||Yt===void 0?void 0:Yt.bind(document))!==null&&dr!==void 0?dr:document.addEventListener.bind(document),this.documentRemoveEventListener=(Xt=(ir=d==null?void 0:d.documentRemoveEventListener)===null||ir===void 0?void 0:ir.bind(document))!==null&&Xt!==void 0?Xt:document.removeEventListener.bind(document),this.videoAddEventListener=(Mr=(Tr=(br=d==null?void 0:d.videoAddEventListener)===null||br===void 0?void 0:br.bind(wt))!==null&&Tr!==void 0?Tr:(Sr=d==null?void 0:d.documentAddEventListener)===null||Sr===void 0?void 0:Sr.bind(document))!==null&&Mr!==void 0?Mr:wt.addEventListener.bind(wt),this.videoRemoveEventListener=(cr=(Er=(gr=d==null?void 0:d.videoRemoveEventListener)===null||gr===void 0?void 0:gr.bind(wt))!==null&&Er!==void 0?Er:(_r=d==null?void 0:d.documentRemoveEventListener)===null||_r===void 0?void 0:_r.bind(document))!==null&&cr!==void 0?cr:wt.removeEventListener.bind(wt),this.fa=this.na.bind(this),this.xa=this.$a.bind(this),this.pa=this.oa.bind(this),this.ya=this.bb.bind(this),this.qa=this.Ta.bind(this),this.va=this.ab.bind(this),this.wa=this.Va.bind(this),this.ja=this.ga.bind(this),this.ka=this.Qa.bind(this),this.ta=this.Ua.bind(this),this.sa=this.Za.bind(this),this.da=this.Oa.bind(this),this.ea=this.Pa.bind(this),this.aa=!!Vt.windowedStreaming,this.cursorType=(Wr=(kr=function(){switch(_f){case"hw":return 1;case"sw":return 0;case"free":return 2}}())!==null&&kr!==void 0?kr:Vt.cursorType)!==null&&Wr!==void 0?Wr:this.aa?2:0,ft.i("{70cc40b}","{3277c0e}",this.cursorType),this.g={rb:!1,yd:this.cursorType===0&&!Vt.allowUnconfined,sb:0,tb:0,Sd:0,Td:0,style:"",cursor:this.U[0]},this.h={wb:1,Vc:!1,bd:!1,od:!1},this.Da=["image-set","-webkit-image-set"].find(sn=>CSS.supports("cursor",`${sn}(url(image.bmp) 2x) 0 0, auto`)),this.cursorType===0?(this.j=function(sn){let In="canvasId1";var $n=document.getElementById(In);if($n&&$n instanceof HTMLCanvasElement&&$n.parentElement===sn.parentElement)return $n;if($n)do In="canvasId"+Math.round(1e4*Math.random()),$n=document.getElementById(In);while($n);return($n=document.createElement("canvas")).id=In,$n.style.touchAction="none",$n.style.pointerEvents="none",$n.style.willChange="transform",sn.insertAdjacentElement("afterend",$n),$n}(this.v),this.j.style.visibility="hidden",this.j.style.display="none"):this.j=document.createElement("canvas"),Tv(this),Ip(this),this.T="onpointerrawupdate"in this.v,this.$=(this.L=W0())&&"getCoalescedEvents"in PointerEvent.prototype&&Dt.browser!=="Firefox",ft.i("{70cc40b}","{f30b8ee}",this.$?"supported":"not supported"),this.T&&(wt=function(){const sn=Yn.mouseCoalesceInterval;if(sn!==void 0)return new Map([[0,0],[4,1],[8,2],[16,3]]).get(sn)}(),wt!==void 0?Tu(this,wt):pt(Dt)?Tu(this,3):Tu(this,1),ft.i("{70cc40b}","{20be0c0}",this.H,wt!==void 0?" (overridden)":"")),this.o=(gn=Vt.unadjustedMovement)!==null&&gn!==void 0?gn:yt(this.u)?!this.aa&&Kt(this.u,84,0,4147,78):pt(this.u)||ct(this.u)?Kt(this.u,86,0,4240,198):this.u.browser==="Safari",Vt=pt(Dt)&&Kt(this.u,84,0,4147,94)&&!Kt(this.u,88,0,4324,139),Vt=yt(this.u)||!Vt||!Kt(this.u,84,0,4147,94),((mn=ro)!==null&&mn!==void 0?mn:Vt)?this.R=new class{constructor(){this.l=this.j=this.o=this.m=this.F=this.C=this.s=this.h=this.g=0,this.v=!1}jf(){return this.g}kf(){return this.h}update(sn,In,$n){if(sn===0&&In===0)return this.v?this.l=this.j=0:this.v=!0,!1;if(this.v=!1,this.j===0&&this.l===0){if($n<this.s)return this.j=sn,this.l=In,!1}else sn+=this.j,In+=this.l,this.l=this.j=0;var Mn=sn*this.g+In*this.h,lo=sn*sn+In*In,oo=this.g*this.g+this.h*this.h,Ro=!0;if(.95>$n-this.s&&0>Mn&&oo!==0&&Mn*Mn>.81*lo*oo&&(Mn=Math.sqrt(lo)/Math.sqrt(oo),.5<(Mn=Math.abs(Mn-Math.trunc(Mn)))&&(Mn=1-Mn),.1>Mn&&(Ro=!1)),Mn=sn-this.g,lo=In-this.h,Ro&&(Ro=2*(oo=1+.1*Math.max(1,Math.min(16,$n-this.s)))*Math.abs(this.C),oo=2*oo*Math.abs(this.F),!(Ro=Mn*Mn+lo*lo<(oo=Math.max(8100,Ro*Ro+oo*oo)))&&(this.m||this.o))){Ro=sn-this.m;const Jo=In-this.o;Ro=Ro*Ro+Jo*Jo<oo}return Ro?(this.C=.4*this.C+.6*Mn,this.F=.4*this.F+.6*lo,this.g=sn,this.h=In,this.s=$n,this.o=this.m=0,!0):(this.m=sn,this.o=In,!1)}}:this.R=new class{constructor(){this.y=this.x=0}jf(){return this.x}kf(){return this.y}update(sn,In){return this.x=sn,this.y=In,!0}},["pointerlockchange","mozpointerlockchange"].forEach(sn=>this.documentAddEventListener(sn,this.ta)),["pointerlockerror","mozpointerlockerror"].forEach(sn=>this.documentAddEventListener(sn,this.sa)),ps(this.s,0,this.da),ps(this.s,2,this.ea),it(this.u)||_(this.u)?this.S=!0:Dt.browser!="Chrome"||Kt(Dt,99,0,4844,44)||ct(Dt)?this.S=!1:this.S=!0,this.cursorType===1&&Mv(this,1),this.cb=this.cursorType===1&&((Wn=(On=_h)!==null&&On!==void 0?On:Yn.pointerLockEscape)===null||Wn===void 0||Wn),this.lb=this.cursorType===1&&Dt.browser==="Safari",ft.d("{70cc40b}","{ec7c4c5}")}uninitialize(){["pointerlockerror","mozpointerlockerror"].forEach(d=>this.documentRemoveEventListener(d,this.sa)),["pointerlockchange","mozpointerlockchange"].forEach(d=>this.documentRemoveEventListener(d,this.ta)),vs(this.s,0,this.da),vs(this.s,2,this.ea),Rv(this)}$a(d){xu(d)||(d.preventDefault(),this.na(d),this.cursorType===2&&this.v.setPointerCapture(d.pointerId))}na(d){var ut;(ut=this.D.R)===null||ut===void 0||ut.g==2&&(ft.i("{4c846ba}","{89b1a9f}"),g0(ut),my(ut),gy(ut)),n0(this.s,!0),this.Db=!0,ut=na(d.timeStamp),iu(this)&&!Dl(this)?(ts(this),this.g.rb&&(Mu(this,d.offsetX,d.offsetY),Js(this),bp(this.l,this.g.sb,this.g.tb,ut))):(this.lb&&this.g.rb&&(Rv(this),this.O=window.setTimeout(this.Sa,500)),pr(Xo()),this.Jb(d.button,ut))}bb(d){xu(d)||(d.preventDefault(),this.oa(d))}oa(d){pr(Xo()),this.Ab(d.button,na(d.timeStamp))}Ta(d){this.aa&&d.target!==this.v||(rv(this.l,d.deltaY,na(d.timeStamp)),d.preventDefault())}Qa(d){if(!xu(d)){if(d.preventDefault(),d.button!==-1){let ut;switch(d.button){case 1:ut=2;break;case 2:ut=1;break;default:ut=d.button}const wt=na(d.timeStamp);d.buttons&1<<ut?this.Jb(d.button,wt):this.Ab(d.button,wt)}this.ga(d)}}ga(d){Mu(this,d.offsetX,d.offsetY),bp(this.l,this.g.sb,this.g.tb,na(d.timeStamp))}ab(d){xv(this,d)}Va(d){const ut=0<this.l.ia.h;xv(this,d),!ut&&0<this.l.ia.h&&((d=performance.now()-this.l.tg)>=this.H?No(this.l):function(wt,xt){wt.Kb=window.setTimeout(()=>{wt.Kb=0,No(wt)},xt)}(this.l,this.H-d))}Pa(d){this.Db=d,ts(this),Bs(this)}Ua(){if(document.pointerLockElement instanceof HTMLElement)this.m=2;else{var d=this.m===2;this.m=0,Ru(this);var ut=()=>{ft.i("{70cc40b}","{d4b3de3}"),this.Db=!1,Bs(this)},wt=this.Ba.Ya.has(27);this.cb&&d&&!wt?this.M=window.setTimeout(()=>{ut(),this.M!==0&&(Ru(this),Lp(this.Ba,!0))},50):(d&&ut(),Lp(this.Ba,!1))}}Za(){this.ua||(this.m=0,this.o?(this.o=!1,ft.e("{70cc40b}","{7599808}"),ts(this)):(ft.e("{70cc40b}","{d633cd1}"),Bs(this)))}yb(){return this.C}Oa(d){d?(this.s.j&&(this.Db=!0,ts(this)),Ip(this)):(ts(this),this.M!==0&&(Ru(this),Lp(this.Ba,!1)))}Jb(d,ut){this.F.has(d)||(this.F.add(d),this.l.Jb(d,ut))}Ab(d,ut){this.F.has(d)&&(this.F.delete(d),this.l.Ab(d,ut))}lc(d){this.Z!=d&&(Js(this),this.Z=d)}};function xu(d){return!d.isPrimary||d.pointerType==="touch"||d.pointerType==="pen"}const Jy=[{Bc:8,fc:128,rd:Pu(),Wb:27,Xb:[]},{Bc:46,fc:128,rd:Pu(),Wb:27,Xb:[]}];function Xy(d,ut,wt,xt){d.J.ma===1&&(Up(d,ut,xt,wt),d.I.delay(()=>{d.Jb(0,wt)}))}function Vp(d,ut){d.J.ma===1&&(Iu(d.I),d.Ab(0,ut))}function Np(d){var ut=d.h;ut.ca=!1,Js(ut),1.1>d.J.ma&&Zs(d,d.J.offsetX,d.J.offsetY,1)}function Bl(d){return d.aa?(qp(d),!1):d.v.h}function Bv(d,ut){if(ut.length===2){var wt=d.h;wt.ca=!0,Js(wt),wt=ut[0],ut=ut[1];var xt=Math.hypot(wt.clientX-ut.clientX,wt.clientY-ut.clientY),Ot=Math.hypot(wt.clientX-wt.deltaX-(ut.clientX-ut.deltaX),wt.clientY-wt.deltaY-(ut.clientY-ut.deltaY));const Vt=d.j.getBoundingClientRect(),Dt=Hv(d);xt=xt/Ot*d.J.ma,xt=Math.min(Math.max(xt,1),3),Ot=(wt.clientX+ut.clientX)/2-Vt.left,Ot+=d.J.offsetX-Dt.pb-(Vt.width-Ot)/d.J.ma,Ot=(xt/d.J.ma-1)*Ot*-1,Ot+=d.J.offsetX+(wt.deltaX+ut.deltaX)/2;let Ft=(wt.clientY+ut.clientY)/2-Vt.top;Ft+=d.J.offsetY-Dt.vertical-(Vt.height-Ft)/d.J.ma,Ft=(xt/d.J.ma-1)*Ft*-1,Ft+=d.J.offsetY+(wt.deltaY+ut.deltaY)/2,Zs(d,Ot,Ft,xt)}}function Zy(d,ut,wt,xt,Ot){switch(Iu(d.I),Ot){case 1:Up(d,ut,xt,wt),d.I.delay(()=>{ou(d,0,wt)});break;case 2:d.ka++,pn&&d.F===0&&(d.F=window.setTimeout(()=>{d.ka===2?d.D.toggleOnScreenStats():d.ka===3&&d.D.toggleOnScreenStats(!0),$p(d)},300)),ou(d,2,wt);break;case 3:d.ga++,pn&&d.F===0&&(d.F=window.setTimeout(()=>{d.ga===2?d.D.ja():d.ga===3&&qm(d.S),$p(d)},300)),ou(d,1,wt);break;case 4:ou(d,3,wt);break;case 5:ou(d,4,wt)}}function Lp(d,ut){ut&&(ku(d),ft.i("{8bacfa5}","{f46c4da}"),Ko(d.g,3,27,0),Ko(d.g,4,27,0))}function Dp(d){Fv(d),d.fa=window.setTimeout(()=>{d.S.send()},350)}function Bp(d,ut){(d.aa=ut)&&d.m!==15&&(d.oa=d.m,d.toggleUserInput(!0)),ut?qv(d).forEach(wt=>d.documentAddEventListener(wt,d.xa)):qv(d).forEach(wt=>d.documentRemoveEventListener(wt,d.xa))}function Fv(d){d.fa!==0&&(window.clearTimeout(d.fa),d.fa=0)}function $v(d,ut){if(!(d.na&&ut.keyCode===20||s(d.u)&&ut.keyCode!==20)){var wt=16;if(d.O&&d.ja||!ut.getModifierState("CapsLock")||(wt|=1),d.$a&&(wt|=96,ut.getModifierState("NumLock")&&(wt|=2),ut.getModifierState("ScrollLock")&&(wt|=4)),wt!=d.ca){d.ca=wt,(ut=(d=d.g).fb(5)).setUint32(0,19,!0),ut.setUint8(4,wt);try{No(d,ut),ft.d("{57a6a4d}","{56c9613}",wt.toString(2))}catch(xt){ft.e("{57a6a4d}","{cbe483c}",xt),d.G.za(xt,"LockKeys state synchronize exception","{57a6a4d}.ts",0,0,!0)}}}}function Zs(d,ut,wt,xt){d.J.ma=xt;let Ot=Hv(d);Ot.pb-=d.J.Xa,Ot.vertical-=d.J.Ra;let Vt=Math.max(Ot.vertical+Math.max(0,d.J.Wa-d.J.Pc+2*d.J.Ra),0),Dt=Math.max(Ot.vertical,0);Ot.pb=Math.max(Ot.pb,0),ut=Math.min(Math.max(ut,-1*Ot.pb),Ot.pb),wt=Math.min(Math.max(wt,-1*Vt),Dt),d.j.style.transform=`translate3d(${ut}px,${wt}px,0px) scale3d(${xt},${xt},1)`,d.J.offsetX=ut,d.J.offsetY=wt,kv(d.h,d.J)}function Fp(d,ut){var wt;return d.P?d.o&&d.kb?(d=(wt=ut.code)!==null&&wt!==void 0&&wt.length?eu.get(ut.code):eu.get(ut.key))!=null?d:0:(ut=ut.code?eu.get(ut.code):zy.get(ut.key))!=null?ut:0:ut.keyCode}function nu(d,ut){var wt=0;let xt;return ut.ctrlKey&&!ut.code.startsWith("Control")&&(wt|=2),ut.altKey&&!ut.code.startsWith("Alt")&&(wt|=4),ut.metaKey&&!ut.code.startsWith("Meta")&&(wt|=8),s(d.u)&&ut.key.length===1&&('!@#$%^&*()~_+{}|:"<>?'.includes(ut.key)?xt=1:"1234567890`-=[]\\;',./".includes(ut.key)&&(xt=0)),xt===void 0&&ut.shiftKey&&!ut.code.startsWith("Shift")&&(xt=1),wt|(xt??0)}function ku(d){if(0<d.Ya.size){ft.i("{8bacfa5}","{7998ee8}",d.Ya.size);for(const ut of d.Ya)Ko(d.g,4,ut,0);d.Ya.clear()}}function $p(d){window.clearTimeout(d.F),d.F=0,d.ka=0,d.ga=0}function qp(d){Bp(d,!1),d.M.emit("StreamingEvent",{streamingWarnings:{code:4}}),d.Vd(),d.Ba.Df()}function qv(d){return[Xs(d.h),"pointerdown","touchstart"]}function jv(d,ut){ut=new TextEncoder().encode(ut),d.sendTextInput(ut.buffer),d.textInputElement.value=""}function jp(d){for(let ut=d.length-1;0<=ut;ut--)if(ev.get(d.charAt(ut))===void 0)return!1;return!0}function Uv(d,ut){let wt=!1;16&d.ca&&(wt=!!(1&d.ca));for(let Ot=0;Ot<ut.length;Ot++){var xt=ev.get(ut.charAt(Ot));if(!xt)return void ft.e("{8bacfa5}","{67554be}",ut.charAt(Ot));const Vt=xt.vkCode;xt=xt.shift?1:0,65<=Vt&&90>=Vt&&wt&&(xt=~xt),xt&&Ko(d.g,3,160,0,performance.now()),Ko(d.g,3,Vt,xt,performance.now()),Ko(d.g,4,Vt,xt,performance.now()),xt&&Ko(d.g,4,160,0,performance.now())}d.textInputElement.value=""}function Hv(d){return{pb:d.J.eb*(d.J.ma-1)/2,vertical:d.J.Wa*(d.J.ma-1)/2}}function Up(d,ut,wt,xt){Iu(d.I);const Ot=ut.getBoundingClientRect();ut=(wt.clientX-Ot.left)/d.J.ma,wt=(wt.clientY-Ot.top)/d.J.ma,d.lc(!0),Mu(d.h,ut,wt);const{sb:Vt,tb:Dt}=d.h.g;bp(d.g,Vt,Dt,xt)}function ou(d,ut,wt){d.Jb(ut,wt),d.I.delay(()=>{d.Ab(ut,wt)})}var e1=class{constructor(d,ut,wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt,br){var Tr,Sr,Mr,gr,Er,_r,cr,kr,Wr,gn,mn,On,Wn,sn,In,$n,Mn,lo,oo,Ro,Jo,us;this.v=dr,this.ra=!1,this.Ya=new Set,this.m=0,this.kb=!1,this.P=!0,this.F=0,this.I=new t1,this.T=!1,this.H=0,this.ja=this.qa=!1,this.fa=this.ga=this.ka=0,this.ua=this.ta="off",this.Z=new Map,this.W=new Map,this.pa=!1,this.Ta=()=>{ft.d("{8bacfa5}","{9c2578a}"),Dp(this)},this.Sa=()=>{this.pa=!0},this.Qa=()=>{this.pa=!1},this.u=nr,this.D=d,this.j=ut,this.G=Ot,this.Ba=lr,this.S=Yt,this.J={eb:ut.clientWidth||window.screen.width,Wa:ut.clientHeight||window.screen.height,Sf:1,Xa:0,Ra:0,videoWidth:0,videoHeight:0,Pc:0,offsetX:0,offsetY:0,ma:1},lr=window.zoneless,this.windowAddEventListener=(Sr=(Tr=lr==null?void 0:lr.windowAddEventListener)===null||Tr===void 0?void 0:Tr.bind(window))!==null&&Sr!==void 0?Sr:window.addEventListener.bind(window),this.windowRemoveEventListener=(gr=(Mr=lr==null?void 0:lr.windowRemoveEventListener)===null||Mr===void 0?void 0:Mr.bind(window))!==null&&gr!==void 0?gr:window.removeEventListener.bind(window),this.documentAddEventListener=(_r=(Er=lr==null?void 0:lr.documentAddEventListener)===null||Er===void 0?void 0:Er.bind(document))!==null&&_r!==void 0?_r:document.addEventListener.bind(document),this.documentRemoveEventListener=(kr=(cr=lr==null?void 0:lr.documentRemoveEventListener)===null||cr===void 0?void 0:cr.bind(document))!==null&&kr!==void 0?kr:document.removeEventListener.bind(document),this.videoAddEventListener=(On=(gn=(Wr=lr==null?void 0:lr.videoAddEventListener)===null||Wr===void 0?void 0:Wr.bind(ut))!==null&&gn!==void 0?gn:(mn=lr==null?void 0:lr.documentAddEventListener)===null||mn===void 0?void 0:mn.bind(document))!==null&&On!==void 0?On:ut.addEventListener.bind(ut),this.videoRemoveEventListener=($n=(sn=(Wn=lr==null?void 0:lr.videoRemoveEventListener)===null||Wn===void 0?void 0:Wn.bind(ut))!==null&&sn!==void 0?sn:(In=lr==null?void 0:lr.documentRemoveEventListener)===null||In===void 0?void 0:In.bind(document))!==null&&$n!==void 0?$n:ut.removeEventListener.bind(ut),this.Na=this.Ka.bind(this),this.Pa=this.Oa.bind(this),this.va=this.wa.bind(this),this.sa=this.bb.bind(this),this.ea=this.da.bind(this),this.Va=this.Nb.bind(this),this.Ua=this.lb.bind(this),this.xa=this.cb.bind(this),this.ab=this.Cb.bind(this),this.L=this.Bb.bind(this),this.N=Qt,this.preventNavigation=!!Dt.preventNavigation,Qt=new class{constructor(){this.m=!1,this.j=0,this.l=Array(36);for(let Ir=0;Ir<this.g.length;Ir++)this.l[Ir]={ib:!1,x:0,y:0,captureTimestamp:0,jb:0,yc:0}}get g(){return this.l}get h(){return this.j}},this.g=new class{constructor(Ir,vn,un,_n,Cn,Vn,qn,xn){this.La=this.ud=0,this.buffer=new ArrayBuffer(1150),this.ig=new DataView(this.buffer),this.Kg=new ArrayBuffer(658),this.gb=new DataView(this.Kg),this.Fb=new DataView(new ArrayBuffer(176)),this.Jg=new ArrayBuffer(100),this.Kb=0,this.Ff=this.xg,this.fb=this.ng,this.Oc=[],this.Ba=Ir,this.ia=vn,this.D=Cn,this.J=_n,this.Ja=Vn,this.Ja.onmessage=no=>{if(no=new DataView(no.data),this.La===0){let Ao=no.getUint16(0,!0);Ao==526?(this.Fd=this.qg.bind(this),this.La=no.getUint16(2,!0)):(this.Fd=this.ad.bind(this),this.La=Ao),this.La==2?this.ia.m=!0:2<this.La&&(this.ia.m=!0,this.Ff=this.yg,this.fb=this.og),ft.i("{57a6a4d}","{68c4654}",this.La)}else this.Fd(no,0)},this.Aa=xn,this.G=qn,this.V=un,this.Fd=this.ad.bind(this),this.gb.setUint8(9,34),this.gb.setUint32(10,24,!0),this.Aa&&(this.Zc=1)}qg(Ir,vn){var un=Ir.getUint16(vn,!0);if(un===267)this.ad(Ir,vn+2);else switch(vn=255&un){case 32:case 33:case 34:case 35:case 36:case 255:if((un=vn)===34)switch(un=Ir.getUint32(1,!0)){case 267:this.ad(Ir,5);break;case 17:if(6<=(vn=Ir.getUint8(5))&&9>=vn){un=vn-6;var _n=Ir.getUint8(8),Cn=Ir.getUint8(9);if(_n!==5||1&~Cn)ft.w("{57a6a4d}","{d8b7bec}",_n,Cn,vn);else{vn=Ir.getUint8(12)<<8;const Vn=Ir.getUint8(13)<<8;for(const qn of this.Oc){_n=vn,Cn=Vn;const xn=(Ir=qn).U.get(un);xn!==void 0&&wv(Ir,xn,_n,Cn)}}}else ft.w("{57a6a4d}","{6135ec1}",vn);break;default:ft.w("{57a6a4d}","{25be6a3}",un)}else ft.d("{57a6a4d}","{ba4ff6a}",un);break;default:ft.w("{57a6a4d}","{aea35b8}",un)}}ad(Ir,vn){var un=Ir.getUint16(vn,!0);if(un==1)if(6>(un=Ir.getUint16(vn+2,!0)))ft.e("{57a6a4d}","{1527181}",un);else{6<un&&ft.w("{57a6a4d}","{78db114}",un),un=Ir.getUint16(vn+4,!0);var _n=Ir.getUint16(vn+6,!0);Ir=Ir.getUint16(vn+8,!0);for(const qn of this.Oc){var Cn=_n,Vn=Ir;const xn=(vn=qn).Zb.get(un);xn!==void 0&&wv(vn,xn,Cn,Vn)}}else ft.w("{57a6a4d}","{c7cf6da}",un)}Jb(Ir,vn){const un=this.fb(18);un.setUint32(0,8,!0),un.setUint8(4,Ir+1),un.setUint8(5,0),un.setUint32(6,0),Oo(vn,un,10,!1,1e3);try{No(this,un)}catch(_n){ft.e("{57a6a4d}","{b258856}",_n),this.G.za(_n,"send mousedown exception","{57a6a4d}.ts",0,0,!0)}}Ab(Ir,vn){const un=this.fb(18);un.setUint32(0,9,!0),un.setUint8(4,Ir+1),un.setUint8(5,0),un.setUint32(6,0),Oo(vn,un,10,!1,1e3);try{No(this,un)}catch(_n){ft.e("{57a6a4d}","{c1ae1fc}",_n),this.G.za(_n,"send mouseup exception","{57a6a4d}.ts",0,0,!0)}}Vd(){const Ir=this.fb(10);Ir.setUint32(0,2,!0);try{this.Ja.send(Ir),ft.d("{57a6a4d}","{5693344}")}catch(vn){ft.e("{57a6a4d}","{ab52f04}",vn),this.G.za(vn,"heartbeat exception","{57a6a4d}.ts",0,0,!0)}}xg(Ir){this.Kb!==0&&(window.clearTimeout(this.Kb),this.Kb=0);var vn=performance.now();this.ud=vn;for(var un=1,_n=0;_n<this.ia.h;){un+=2;var Cn=this.ia.g[_n].jb;if(0<Cn){un+=19;for(var Vn=0;Vn<Cn;Vn++)un+=1+(this.ia.g[_n+Vn].ib?26:22);_n+=Cn}else un+=this.ia.g[_n].ib?26:22,_n++}(un+=Ir?2+Ir.byteLength:0)>this.buffer.byteLength?(un=new DataView(new ArrayBuffer(un)),this.V.jd++):un=new DataView(this.buffer,0,un),un.setUint8(0,255);var qn=1;for(_n=0;_n<this.ia.h;){if(Cn=qn,qn+=2,0<(Vn=this.ia.g[_n]).jb){var xn=un,no=_n,Ao=vn,co=this.ia.g[no],Xn=qn;qn+=19;for(let to=0;to<co.jb;++to){const ho=this.ia.g[no+to];xn.setUint8(qn,ho.ib?26:22),qn=_u(this,xn,++qn,ho.ib,ho.x,ho.y,ho.captureTimestamp)}no=Xn,Xn=qn-Xn,co=co.yc,xn.setUint8(no,32),xn.setUint16(no+1,Xn,!1),Oo(Ao,xn,no+3,!1,1e3),Oo(co,xn,no+11,!1,1e3),_n+=Vn.jb}else qn=_u(this,un,qn,Vn.ib,Vn.x,Vn.y,Vn.captureTimestamp),_n++;un.setUint16(Cn,qn-Cn-2)}if(this.ia.j=0,Ir)for(un.setUint16(qn,Ir.byteLength),qn+=2,vn=0;vn<Ir.byteLength;vn++)un.setUint8(qn+vn,Ir.getUint8(vn));return un}yg(Ir){var vn;if(Ir&&Ir.buffer!=this.buffer)return No(this),Ir;this.Kb!==0&&(window.clearTimeout(this.Kb),this.Kb=0),this.ud=performance.now();for(var un=0,_n=-1,Cn=0;Cn<this.ia.h;Cn++)0<this.ia.g[Cn].jb?(un+=9,_n=this.ia.g[Cn].jb):_n===0&&(un+=9),un+=3+(this.ia.g[Cn].ib?26:22),_n--;if(un+=(vn=Ir==null?void 0:Ir.byteLength)!==null&&vn!==void 0?vn:0,(vn=9+un)>this.buffer.byteLength){if(vn=new DataView(new ArrayBuffer(vn),vn-un,un),this.V.jd++,Ir)for(un=vn.byteLength-Ir.byteLength,_n=0;_n<Ir.byteLength;_n++)vn.setUint8(un+_n,Ir.getUint8(_n))}else vn=new DataView(this.buffer,this.buffer.byteLength-un,un);for(Ir=0,un=-1,_n=0;_n<this.ia.h;_n++)0<(Cn=this.ia.g[_n]).jb?(un=Cn.jb,vn.setUint8(Ir,36),Oo(Cn.yc,vn,Ir+1,!1,1e3),Ir+=9):un===0&&(vn.setUint8(Ir,36),Oo(0,vn,Ir+1,!1,1e3),Ir+=9),vn.setUint8(Ir,33),vn.setUint16(Ir+1,Cn.ib?26:22),Ir=_u(this,vn,Ir+3,Cn.ib,Cn.x,Cn.y,Cn.captureTimestamp),un--;return this.ia.j=0,vn}ng(Ir){return new tv(this.Jg,0,Ir)}og(Ir){Ir+=1;const vn=this.buffer.byteLength-Ir;return Ir=new tv(this.buffer,vn,Ir,1),this.ig.setUint8(vn,34),Ir}sendTextInput(Ir){let vn=0,un=new DataView(Ir,0,Ir.byteLength),_n=new ArrayBuffer(1021);for(;vn<Ir.byteLength;){let Vn;if(1016>=Ir.byteLength-vn)Vn=Ir.byteLength-vn;else{Vn=vn+1016;var Cn=!1;for(let qn=0;4>qn;qn++){if((192&un.getUint8(Vn))!=128){Cn=!0;break}Vn--}if(!Cn){ft.e("{57a6a4d}","{938b0d3}");break}Vn-=vn}(Cn=new DataView(_n,0,Vn+5)).setUint8(0,34),Cn.setUint32(1,23,!0),new Uint8Array(_n).set(new Uint8Array(Ir,vn,Vn),5),vn+=Vn,No(this,Cn,!1)}}stop(){0<this.Ja.bufferedAmount&&ft.w("{57a6a4d}","{5e5b9e5}",this.Ja.bufferedAmount),this.Aa&&0<this.Aa.bufferedAmount&&ft.w("{57a6a4d}","{1785a7c}",this.Aa.bufferedAmount)}get zg(){return this.La}get tg(){return this.ud}Eb(Ir){No(this,Ir=Sp(this,0,0,0,[0,0,0,0],0,Ir))}$c(Ir,vn,un,_n,Cn,Vn,qn=0,xn){2<this.La?(Ir=(this.Aa?12:9)+41*Ir,this.Fb.setUint8(Ir,33),this.Fb.setUint16(Ir+1,38),wp(this.Fb,Ir+3,un,_n,Cn,Vn,qn,xn)):this.La==2?(Ir=1+40*Ir,this.Fb.setUint16(Ir,38),wp(this.Fb,Ir+2,un,_n,Cn,Vn,qn,xn)):No(this,un=Sp(this,_n,Cn,un,Vn,qn,xn))}Yb(Ir,vn,un,_n,Cn=0){No(this,Ir=Sp(this,Ir,vn,un,_n,0,Cn))}Yc(Ir){if(!(2>this.La||0>=Ir)){No(this);var vn=null;2<this.La?vn=new DataView(this.Fb.buffer,this.Aa?12:9,41*Ir):this.La==2&&(this.Fb.setUint8(0,255),vn=new DataView(this.Fb.buffer,0,1+40*Ir)),vn&&(this.Aa?No(this,vn,!0,"gamepad_channel_v1"):No(this,vn,!0))}}Uc(){}Fg(Ir){const vn=this.fb(6);vn.setUint32(0,13,!0),vn.setUint16(4,Ir?1:0,!1),No(this,vn)}gg(Ir){No(this,iv(this,4>Ir?Ir+6:0,1))}Of(Ir){No(this,iv(this,4>Ir?Ir+6:0,3))}Wc(Ir,vn,un,_n,Cn){(Ir=this.fb(72)).setUint32(0,17,!0),Ir.setUint8(4,4>vn?vn+6:0),Ir.setUint8(5,4),Ir.setUint8(6,0),Ir.setUint8(7,1),Ir.setUint8(8,127.5*(Cn[0]+1)),Ir.setUint8(9,127.5*(Cn[1]+1)),Ir.setUint8(10,127.5*(Cn[2]+1)),Ir.setUint8(11,127.5*(Cn[3]+1)),vn=0;var Vn=!!(2&un);const qn=!!(8&un),xn=!!(1&un);(Cn=!!(4&un))||Vn||qn||xn?xn?vn=qn?1:Cn?7:0:Vn?vn=qn?3:Cn?5:4:qn?vn=2:Cn&&(vn=6):vn=8,Cn=(Cn=(256&un?1:0)|(512&un?2:0)|(255&_n?4:0)|(65280&_n?8:0))|(32&un?16:0)|(16&un?32:0)|(64&un?64:0)|(128&un?128:0),Vn=(65536&un?1:0)|(131072&un?2:0),Ir.setUint8(12,vn|(16384&un?16:0)|(4096&un?32:0)|(8192&un?64:0)|(32768&un?128:0)),Ir.setUint8(13,Cn),Ir.setUint8(14,Vn),Ir.setUint8(15,255&_n),Ir.setUint8(16,(65280&_n)>>8),Ir.setUint16(17,0,!0),Ir.setUint8(19,0),Ir.setInt16(20,0,!0),Ir.setInt16(22,0,!0),Ir.setInt16(24,0,!0),Ir.setInt16(26,0,!0),Ir.setInt16(28,0,!0),Ir.setInt16(30,0,!0),Ir.setUint32(32,0,!0),Ir.setUint8(36,0),Ir.setUint8(37,11),Ir.setUint8(38,0),Ir.setUint8(39,0),Ir.setUint8(40,0),No(this,Ir)}}(this,Qt,ir,this.J,this.D,wt,this.G,Xt),this.R=new Gy(this.j,this.u),this.h=new Yy(this,d,ut,xt,Ot,Dt,nr,this.R,ir,Qt,this.g,this.v),Ft?Yl||Ut()?(this.s=new class{constructor(Ir,vn,un,_n,Cn){this.target=Ir,this.videoAddEventListener=vn,this.videoRemoveEventListener=un,this.P=_n,this.j=Cn,this.o=this.m=0,this.F={pb:1,vertical:1},this.g=new Map,this.s=new Set,this.l=0,this.h=[],this.v=0,this.N=!0,this.M=Vn=>{const qn=performance.now(),xn=na(Vn.timeStamp);let no=!1;this.j.lc(!1);const Ao=Vn.changedTouches;let co=[];for(let to=0;to<Ao.length;to++){const ho=Ao[to];if(ho.target===this.target){no=!0,pr(Xo());var Xn=ho;let vo=0;for(;this.s.has(vo);)vo++;let ga=new Hy(Xn,vo,this.F);this.g.set(Xn.identifier,ga),this.s.add(vo),Xn=ga,co.push(Xn),Rs&&this.h.push(new yp(ho,Xn.g,1,qn,Vn.timeStamp))}}Au(this,co,1,xn),Rs&&np&&this.g.size==8&&this.N&&(this.C(),this.O()),Bl(this.j)&&no&&Vn.preventDefault()},this.L=Vn=>{const qn=performance.now(),xn=na(Vn.timeStamp);let no=!1;const Ao=Vn.changedTouches;let co=[];for(let Xn=0;Xn<Ao.length;Xn++){const to=Ao[Xn];if(to.target===this.target){let ho=this.g.get(to.identifier);ho&&(no=!0,ho.update(to),co.push(ho),Rs&&this.h.push(new yp(to,ho.g,4,qn,Vn.timeStamp)))}}Au(this,co,4,xn),Bl(this.j)&&no&&Vn.preventDefault()},this.H=Vn=>{Z0(this,Vn,8)},this.I=Vn=>{Z0(this,Vn,2)},this.C=this.S.bind(this),this.O=this.R.bind(this)}S(){const Ir=this.h.length;if(Ir){var vn=this.h[Ir-1].g-3e4,un=-1;for(let _n=0;_n<Ir&&this.h[_n].g<vn;_n++)un=_n;this.h.splice(0,un+1)}}R(){for(let Ir of this.h)ft.d("{ec05004}","{3c6a946}",Ir.j.toFixed(2),Ir.g.toFixed(2),Ir.id,Ir.h,Ir.v,Ir.l.toFixed(2),Ir.m.toFixed(2),Ir.o.toFixed(0),Ir.s.toFixed(0));this.h=[]}start(){this.l=0;const Ir={passive:!1};this.videoAddEventListener("touchstart",this.M,Ir),this.videoAddEventListener("touchmove",this.L,Ir),this.videoAddEventListener("touchcancel",this.H,Ir),this.videoAddEventListener("touchend",this.I,Ir),Rs&&(ft.d("{ec05004}","{72764d2}",performance.now()),this.h=[],this.v=window.setInterval(this.C,6e4)),this.j.lc(!1)}stop(){Rs&&(this.v&&clearTimeout(this.v),this.C(),this.O()),this.g.size&&(Au(this,Array.from(this.g.values()),8,performance.now()),this.g.clear(),this.s.clear()),this.l&&ft.w("{ec05004}","{10858ae}",this.l);const Ir={passive:!1};this.videoRemoveEventListener("touchstart",this.M,Ir),this.videoRemoveEventListener("touchmove",this.L,Ir),this.videoRemoveEventListener("touchcancel",this.H,Ir),this.videoRemoveEventListener("touchend",this.I,Ir)}}(this.j,this.videoAddEventListener,this.videoRemoveEventListener,this.g,this),ft.i("{8bacfa5}","{60f3637}")):ft.w("{8bacfa5}","{32104d3}"):ft.i("{8bacfa5}","{6be89bf}"),!Yl&&!Ut()||Gt(this.u)||(this.C=new class{constructor(Ir,vn,un,_n){this.target=Ir,this.videoAddEventListener=vn,this.videoRemoveEventListener=un,this.j=_n,this.h=[],this.g=this.m=this.l=0,this.C=Cn=>{let Vn=!1;const qn=Cn.changedTouches,xn=na(Cn.timeStamp);for(let no=0;no<qn.length;no++){const Ao=qn[no];Ao.target===this.target&&(Vn=!0,pr(Xo()),this.h.length===0?(this.g=1,this.l=window.setTimeout(()=>{this.l=0,this.m===1&&(this.g=2,$a&&Xy(this.j,this.target,xn,gp(Ao)))},500)):this.g!==1&&(this.g===2||this.g===4?$a&&Vp(this.j,xn):this.g===6&&$a&&Np(this.j),this.g=0),this.h.push(gp(Ao)),this.h.length>this.m&&(this.m=this.h.length))}Bl(this.j)&&Vn&&Cn.preventDefault()},this.v=Cn=>{let Vn=!1;for(var qn of this.h)qn.deltaX=0,qn.deltaY=0;qn=Cn.changedTouches;const xn=na(Cn.timeStamp);let no=[];for(let Xn=0;Xn<qn.length;Xn++){const to=qn[Xn],ho=this.h.findIndex(vo=>vo.identifier==to.identifier);if(ho!=-1){Vn=!0;var Ao=this.h[ho],co=to.clientX-Ao.clientX;Ao=to.clientY-Ao.clientY;let vo=!1;this.l!==0?(10<Math.abs(co)||10<Math.abs(Ao))&&(window.clearTimeout(this.l),this.l=0,vo=!0):vo=!0,vo&&(co={identifier:to.identifier,clientX:to.clientX,clientY:to.clientY,deltaX:co,deltaY:Ao},no.push(ho),this.h[ho]=co)}}0<no.length&&this.l===0&&this.g!==0&&(this.h.length===1?(this.g===1?this.g=3:this.g===2&&(this.g=4),$a&&function(Xn,to,ho,vo){Xn.J.ma!==1||Xn.kb||Xn.s!==void 0?Zs(Xn,Xn.J.offsetX+vo.deltaX,Xn.J.offsetY+vo.deltaY,Xn.J.ma):Up(Xn,to,vo,ho)}(this.j,this.target,xn,this.h[0])):this.h.length===2?this.g===5?$a&&this.j.scroll(this.target,xn,this.h):this.g===6?$a&&Bv(this.j,this.h):this.g===1&&(0<this.h[0].deltaY*this.h[1].deltaY&&(Math.sign(this.h[0].deltaX)===Math.sign(this.h[1].deltaX)||10>Math.abs(this.h[0].deltaX)&&10>Math.abs(this.h[1].deltaX))?(this.g=5,$a&&this.j.scroll(this.target,xn,this.h)):(this.g=6,$a&&Bv(this.j,this.h))):this.g=0),Bl(this.j)&&Vn&&Cn.preventDefault()},this.o=Cn=>{Y0(this,Cn,!1)},this.s=Cn=>{Y0(this,Cn,!0)}}start(){const Ir={passive:!$a};this.videoAddEventListener("touchstart",this.C,Ir),this.videoAddEventListener("touchmove",this.v,Ir),this.videoAddEventListener("touchcancel",this.o,Ir),this.videoAddEventListener("touchend",this.s,Ir)}stop(){if(this.videoRemoveEventListener("touchstart",this.C),this.videoRemoveEventListener("touchmove",this.v),this.videoRemoveEventListener("touchcancel",this.o),this.videoRemoveEventListener("touchend",this.s),this.h=[],this.l!==0&&(window.clearTimeout(this.l),this.l=0),this.m=0,$a)switch(this.g){case 6:Np(this.j);break;case 2:case 4:Vp(this.j,performance.now())}this.g=0}}(this.j,this.videoAddEventListener,this.videoRemoveEventListener,this)),this.M=Vt,this.ca=0,this.$a=yt(this.u),this.na=pt(this.u),this.O=ct(this.u),this.o=this.u.os==="Android",this.Da=this.u.deviceModel==="VISIONPRO",d=this.u.browser==="Safari",ut=!!Dt.windowedStreaming,ft.i("{8bacfa5}","{fa2e72c}",ut?"on":"off"),this.$a?(ft.d("{8bacfa5}","{da5ae1d}"),this.$=[20,144,145]):this.na||this.u.os==="Linux"?(ft.d("{8bacfa5}","{b7becf9}"),this.$=[]):(ft.d("{8bacfa5}","{098ce9c}"),this.$=[20]),this.U=this.aa=!1,PerformanceObserver?this.perf=new PerformanceObserver(Ir=>function(vn,un){un.getEntriesByType("longtask").forEach(_n=>{let Cn=Math.round(_n.duration);var Vn,qn=To;qn.h&&(_n={duration:{timestamp:_n.startTime-qn.j,duration:Cn}},qn.g&&qn.g.postMessage(_n)),(Vn=vn.D.h)===null||Vn===void 0||((qn=Vn.g).L=Math.max(Cn,qn.L)),ft.i("{8bacfa5}","{7071359}",Cn)})}(this,Ir)):this.perf=null,ps(this.v,2,this.va),ft.d("{8bacfa5}","{cc9c05b}"),window.ResizeObserver?(this.Za=new ResizeObserver(()=>{this.da()}),this.Za.observe(this.j)):this.windowAddEventListener("resize",this.ea),(s(nr)||_(nr))&&window.IntersectionObserver&&(this.ya=new IntersectionObserver(()=>{this.da()},{threshold:[1]}),this.ya.observe(this.j)),this.j.addEventListener("resize",this.ea),this.windowAddEventListener("orientationchange",this.Ta),(nr=window.visualViewport)&&(this.J.Pc=nr.height,nr.addEventListener("resize",this.Va)),this.l=rr,function(Ir,vn){Ir.o&&(Ls(Ir,Ir.o),Tp(Ir,Ir.o)),Ir.o=vn,Ir.l.push(Ir.o)}(this.l,this.g),this.g.Oc.push(this.l),function(Ir,vn){ap&&(Ir.m&&Ls(Ir,Ir.m),Ir.m=vn)}(this.l,this.R),this.l.G=this.G,this.wa(this.v.j),ps(this.v,0,this.sa),this.perf&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&this.perf.observe({entryTypes:["longtask"]}),op&&Xo().initialize(this.j,this.u),(Gt(this.u)||this.o||s(this.u))&&(this.textInputElement=br,this.o&&(this.ta=(lo=(Mn=this.textInputElement)===null||Mn===void 0?void 0:Mn.getAttribute("autocapitalize"))!==null&&lo!==void 0?lo:"off",this.ua=(Ro=(oo=this.textInputElement)===null||oo===void 0?void 0:oo.getAttribute("autocorrect"))!==null&&Ro!==void 0?Ro:"off",(Jo=this.textInputElement)===null||Jo===void 0||Jo.setAttribute("autocapitalize","off"),(us=this.textInputElement)===null||us===void 0||us.setAttribute("autocorrect","off"))),(wn||up&&(d||ut))&&(function(Ir,vn){if(vn)for(const Cn of vn){if(!(vn=Cn.remote.code)||!(vn=eu.get(vn)))continue;var un=Cn.remote.modifiers,_n=[];1&un&&_n.push(162),2&un&&_n.push(164),4&un&&_n.push(91),8&un&&_n.push(160),un=_n,_n=Cn.local.key;const Vn=Cn.local.code;Vn?(_n=eu.get(Vn))&&Ir.W.set(_n,{Bc:_n,fc:Cn.local.modifiers,rd:Pu(),Wb:vn,Xb:un}):_n&&Ir.Z.set(_n,{Ld:_n,fc:Cn.local.modifiers,rd:Pu(),Wb:vn,Xb:un})}else for(un of Jy)un.Ld?Ir.Z.set(un.Ld,un):un.Bc&&Ir.W.set(un.Bc,un)}(this,Dt.streamingHotkeys),function(Ir){var vn,un,_n,Cn,Vn,qn,xn;for(const no of Ir.W.values())ft.i("{8bacfa5}","{e7c6e9b}",(vn=no.Bc)===null||vn===void 0?void 0:vn.toString(16),(un=no.fc)===null||un===void 0?void 0:un.toString(16),(_n=no.Wb)===null||_n===void 0?void 0:_n.toString(16),(Cn=no.Xb)===null||Cn===void 0?void 0:Cn.map(Ao=>Ao.toString(16)));for(const no of Ir.Z.values())ft.i("{8bacfa5}","{b5e3a31}",no.Ld,(Vn=no.fc)===null||Vn===void 0?void 0:Vn.toString(16),(qn=no.Wb)===null||qn===void 0?void 0:qn.toString(16),(xn=no.Xb)===null||xn===void 0?void 0:xn.map(Ao=>Ao.toString(16)))}(this))}uninitialize(){var d,ut,wt,xt,Ot,Vt,Dt;Bp(this,!1);var Ft=this.j.paused;if(Ft=Ft!==void 0?Ft?"paused":"playing":"unknown",(this.j.paused||1>((d=this.j.currentTime)!==null&&d!==void 0?d:1))&&jo(this.G,"VideoPaused",Ft,(ut=this.j.currentTime)===null||ut===void 0?void 0:ut.toFixed(2)),ft.i("{8bacfa5}","{fdc8bf7}",Ft,this.j.currentTime),(wt=this.ya)===null||wt===void 0||wt.disconnect(),(xt=this.Za)===null||xt===void 0||xt.disconnect(),this.g.stop(),this.perf&&this.perf.disconnect(),this.toggleUserInput(!1),this.windowRemoveEventListener("resize",this.ea),this.windowRemoveEventListener("orientationchange",this.Ta),this.j.removeEventListener("resize",this.ea),(Ot=window.visualViewport)===null||Ot===void 0||Ot.removeEventListener("resize",this.Va),(d=this.l).s){for(var Qt of(ut=!0,d.h))Qt&&(Qt.Fa.state=lv(d,Qt.Fa.state,!0),Nl(d,Qt.ba.index,!0,ut),ut=!1);sv(d),d.j=0,d.s=0,d.g.qb=!1,d.Eb(),d.gamepadPollInterval=100,tu(d),d.h=[],d.Z=!1}-1<(d=(Qt=this.g).Oc.indexOf(this.l))&&Qt.Oc.splice(d,1),vs(this.v,2,this.va),this.R.stop(),Ls(this.l,this.R),Ls(this.l,this.g),this.T&&(Ls(this.l,this.N),this.N.Mc(this.j)),this.h.uninitialize(),vs(this.v,0,this.sa),Fv(this),(Vt=this.textInputElement)===null||Vt===void 0||Vt.setAttribute("autocapitalize",this.ta),(Dt=this.textInputElement)===null||Dt===void 0||Dt.setAttribute("autocorrect",this.ua),ft.d("{8bacfa5}","{b6b2756}")}Yb(){Eu(this.g)&&this.l.Yb()}da(){var d,ut=this.j;if(!(0>=ut.videoWidth||0>=ut.videoHeight)){var wt=0,xt=0;if(ut.clientWidth/ut.clientHeight>ut.videoWidth/ut.videoHeight){var Ot=ut.clientHeight/ut.videoHeight,Vt=ut.videoWidth*Ot,Dt=ut.videoHeight*Ot;xt=(ut.clientWidth-Vt)/2}else Ot=ut.clientWidth/ut.videoWidth,Vt=ut.videoWidth*Ot,Dt=ut.videoHeight*Ot,wt=(ut.clientHeight-Dt)/2;var Ft=1,Qt=1;this.J.eb&&this.J.Wa&&(Ft=Vt/this.J.eb,Qt=Dt/this.J.Wa),this.J.eb=Vt,this.J.Wa=Dt,this.J.Sf=Ot,this.J.Ra=wt,this.J.Xa=xt,this.J.videoWidth=ut.videoWidth,this.J.videoHeight=ut.videoHeight,Zs(this,this.J.offsetX*Ft,this.J.offsetY*Qt,this.J.ma),kv(this.h,this.J),(d=this.s)===null||d===void 0||(ut=this.J,wt=this.j.getBoundingClientRect(),Ot=this.J.ma,d.F={pb:wt.left+window.pageXOffset+this.J.Xa*this.J.ma,vertical:wt.top+window.pageYOffset+this.J.Ra*this.J.ma},d.m=65535/ut.eb,d.o=65535/ut.Wa,d.m/=Ot,d.o/=Ot),d=this.S,ut=this.J.Xa,d.Ra=this.J.Ra,d.Xa=ut,Dp(this)}}Nb(){this.J.Pc=window.visualViewport.height,Zs(this,this.J.offsetX,this.J.offsetY,this.J.ma)}lb(){ft.d("{8bacfa5}","{b6fbd34}"),history.pushState(null,document.title,location.href)}Ka(d){var ut,wt;let xt=this.pa;this.qa=!1;const Ot=na(d.timeStamp);if(this.v.h){(function(ir,Xt){var br;if((br=c0(ir.D))!==null&&br!==void 0&&br.isVisible())return!1;if(ir.na)switch(Xt.code){case"Tab":return!Xt.altKey;case"ZoomToggle":case"SelectTask":case"BrightnessDown":case"BrightnessUp":case"AudioVolumeMute":case"AudioVolumeDown":case"AudioVolumeUp":return!1}return!0})(this,d)&&d.preventDefault();var Vt,Dt=!(!this.O||!this.ja)&&d.code=="CapsLock";Dt&&(xt=xt||Dt),$v(this,d),!(Vt=d.code=="CapsLock"&&(d.key=="Alphanumeric"||d.key=="Katakana"||d.key=="Hiragana"))&&(Vt=d.code=="KanaMode")&&(Vt=(Vt=d.key)=="Hiragana"||Vt=="Katakana"||Vt=="Romaji"||Vt=="KanaMode"),Vt=!!Vt;var Ft=d.code=="Lang1"||d.key=="HangulMode";if(xt=xt||Vt||Ft,!this.$.includes(d.keyCode)||Vt||Dt){if((Dt=Dt?160:Fp(this,d))===0)this.ra=!0,this.M.emit("TextComposition",{compositionText:d.key,imeRecommendation:!0});else if(this.ra&&(this.ra=!1,this.M.emit("TextComposition",{compositionText:""})),!this.Ya.has(Dt)){this.Ya.add(Dt),Vt=!1;var Qt=c0(this.D);if(Ft=void 0,Dt==187){var rr;if((rr=(Vt=this.D).R)===null||rr===void 0)var nr=0;else rr.g==1?(ft.i("{4c846ba}","{1f67b97}"),rr.g=2,nr=!0):nr=!1;nr?(rs(Vt,{latencyTrigger:!0}),Vt=!0):Vt=!1,Vt=!Vt}else if(d.ctrlKey&&d.altKey)if(!pn&&!Eo||Dt!=119&&Dt!=219)if(pn)switch(Dt){case 48:var lr="UNSUPPORTED";if((nr=this.h).T)switch(Tu(nr,(nr.I+1)%4),nr.I){case 1:lr="4ms";break;case 2:lr="8ms";break;case 3:lr="16ms";break;default:lr="OFF"}_s(nr.D,"Non-vsync mouse events: "+lr),ft.i("{70cc40b}","{bac28ff}",lr);break;case 49:this.D.Cb();break;case 56:this.D.sendCustomMessage({messageType:"GpuViewStartRequest",messageRecipient:"GPUViewTraceControl",data:"GpuView"}),ft.i("{93c7910}","{0915cd3}");break;case 68:var Yt;(Yt=(nr=this.D).R)===null||Yt===void 0?lr=0:Yt.g==0?(Yt.g=1,ft.i("{4c846ba}","{008dc86}"),my(Yt),gy(Yt),lr=!0):lr=!1,lr&&rs(nr,{pcmDumpTrigger:!0});break;case 71:this.Mc();break;case 76:Qt==null||wm(Qt,!Qt.isVisible()),ts(this.h);break;case 83:qm(this.S);break;case 115:(nr=this.D).pa?(B0(),nr.pa=!1,cy(nr),_s(nr,"Profiler: OFF, Stats: OFF")):(iy(nr),uy(nr),_s(nr,"Profiler: ON, Stats: ON"));break;case 116:$l(nr=this.D)?(cy(nr),_s(nr,"Stats: OFF")):(uy(nr),_s(nr,"Stats: ON"));break;case 117:this.D.toggleOnScreenStats(d.shiftKey);break;case 118:case 192:(nr=this.D).perfIndicator=!nr.perfIndicator,rs(nr,{perfIndicator:{on:nr.perfIndicator}});break;case 120:(nr=this.h).o=!nr.o,_s(nr.D,"UnadjustedMovement: "+(nr.o?"ON":"OFF")),ft.i("{70cc40b}","{796c5cb}",nr.o?"ON":"OFF");break;case 189:this.P=!this.P,_s(this.D,"Position dependent keys: "+(this.P?"ON":"OFF")),ft.i("{8bacfa5}","{61d2ab5}",this.P?"ON":"OFF");break;case 77:this.D.ja();break;default:Vt=!0}else Vt=!0;else this.D.toggleStutterIndicator();else{e:{if((d.ctrlKey||d.shiftKey||d.metaKey||d.altKey)&&((Ft=this.W.get(Dt))||(Ft=this.Z.get(d.key)),Ft)){(rr=Ft.fc)==128&&(rr=this.O?4:1),Yt=d.ctrlKey;const ir=d.altKey,Xt=d.metaKey,br=d.shiftKey;if((1&rr?Yt:!Yt)&&(2&rr?ir:!ir)&&(4&rr?Xt:!Xt)&&(8&rr?br:!br))break e}Ft=void 0}if(Ft){for(nr of(Qt=nu(this,d),Ft.rd))Qt!=(rr=Qt&~Hp(nr))&&(Qt=rr,Ko(this.g,4,nr,Qt,Ot)),this.Ya.delete(nr);for(lr of Ft.Xb)Qt|=Hp(lr),Ko(this.g,3,lr,Qt,Ot);for(var dr of(Ko(this.g,3,Ft.Wb,Qt,Ot),Ko(this.g,4,Ft.Wb,Qt,Ot),Ft.Xb))Qt&=~Hp(dr),Ko(this.g,4,dr,Qt,Ot);this.Ya.delete(Dt)}else if(Qt!=null&&Qt.isVisible())if(Dt==13)Qt.toggle(),ts(this.h);else if(Dt==82)Qt.reset(),ts(this.h);else if(Dt==65)qu(Qt,!Qt.ac.checked);else if(Dt==83)if(Qt.ec.length){for(nr=`LDAT_${new Date().toISOString()}.csv`,lr=["Sample #,Total,Render,Decode,Begin,Server + Rtd + Receive,Input Callback"],dr=0;dr<Qt.ec.length;dr++)rr=Em(Qt.ec[dr]),lr.push([dr,rr.total,rr.Pf,rr.decode,rr.Xe,rr.Tf,rr.pf].join());mp([lr.join(`
`)],nr,"text/plain")&&ft.i("{50c79eb}","{690879e}",nr)}else ft.w("{50c79eb}","{2884507}");else Dt==67?(ft.i("{50c79eb}","{d2811a7}"),Qt.Sb.value="50",Qt.Tb.value="50",Cm(Qt,.5,.5)):Dt==77?Qt.zb.checked=!Qt.zb.checked:Vt=!0;else Vt=!0}Vt&&(pr(Xo()),Ko(this.g,3,Dt,nu(this,d),Ot)),d.key!="Hankaku"&&d.key!="Zenkaku"||Dt!=192||(xt=!0),this.O&&d.metaKey&&!Ft&&(xt=!0),this.o&&this.kb&&(d.code=="Backspace"&&(xt=!0),d.code==""&&d.key=="Enter"&&(Vt=new CompositionEvent("compositionend",{data:(ut=this.textInputElement)===null||ut===void 0?void 0:ut.value}),(wt=this.textInputElement)===null||wt===void 0||wt.dispatchEvent(Vt))),xt&&(Ko(this.g,4,Dt,nu(this,d),Ot),this.Ya.delete(Dt))}}}}Oa(d){let ut=!1;const wt=na(d.timeStamp);if(this.o&&d.code==""&&d.key=="Unidentified"&&!this.qa)Ko(this.g,3,8,0,wt),Ko(this.g,4,8,0,wt);else{var xt=!(!this.O||!this.ja)&&d.code=="CapsLock";xt&&(ut=ut||xt),$v(this,d),this.$.includes(d.keyCode)&&!xt||(xt=xt?160:Fp(this,d),ut&&(Ko(this.g,3,xt,nu(this,d),wt),this.Ya.add(xt)),this.Ya.has(xt)&&(this.Ya.delete(xt),pr(Xo()),Ko(this.g,4,xt,nu(this,d),wt)))}}wa(d){ft.d("{8bacfa5}","{77df54c}",d?"fullscreen":"not fullscreen"),this.da({}),d?(window.isSecureContext&&(d=window.navigator.keyboard)&&d.lock&&d.lock("Escape F11 BrowserBack BrowserForward BrowserRefresh BrowserHome BrowserFavorites BrowserSearch BrowserStop Sleep Power WakeUp KeyT KeyZ Slash Digit1 Digit2 Digit3 Digit4 Digit5 Digit6 Digit7 Digit8 Digit9 KeyM KeyD KeyN KeyS KeyK KeyL Space PrintScreen LaunchApp1 LaunchApp2 LaunchMail Comma Semicolon ArrowLeft ArrowRight BracketLeft BracketRight KeyW KeyQ KeyR KeyY KeyO KeyP KeyF KeyG".split(" ")),this.j.onclick=null,this.j.removeAttribute("controls")):(ku(this),Op(this.h),window.isSecureContext&&(d=window.navigator.keyboard)&&d.unlock&&d.unlock())}toggleUserInput(d,ut){if(ft.d("{8bacfa5}","{2424824}",d,ut),ut=ut??15,d){var wt,xt,Ot,Vt,Dt,Ft,Qt=!this.yb(),rr=(this.m^ut)&ut;if(rr){if(this.m|=rr,4&rr&&kp(this.l),1&rr){var nr=this.h;if(!nr.C){if(nr.C=!0,!s(nr.u)){if(nr.cursorType==2&&nr.L){var lr=nr.N;lr.Bd="pointerdown",lr.Yd="pointerup",nr.videoAddEventListener("pointerdown",nr.xa),nr.videoAddEventListener("pointerup",nr.ya)}else(lr=nr.N).Bd="mousedown",lr.Yd="mouseup",nr.videoAddEventListener("mousedown",nr.fa),nr.videoAddEventListener("mouseup",nr.pa);nr.u.os==="Xbox"||nr.videoAddEventListener("contextmenu",Cv)}nr.documentAddEventListener("wheel",nr.qa,nr.ra),Lv(nr),nr.cursorType===0&&(nr.j.style.display="block"),ts(nr),Bs(nr)}}2&rr&&(this.documentAddEventListener("keydown",this.Na),this.documentAddEventListener("keyup",this.Pa),(wt=this.textInputElement)===null||wt===void 0||wt.addEventListener("input",this.ab),(xt=this.textInputElement)===null||xt===void 0||xt.addEventListener("compositionstart",this.L),(Ot=this.textInputElement)===null||Ot===void 0||Ot.addEventListener("compositionupdate",this.L),(Vt=this.textInputElement)===null||Vt===void 0||Vt.addEventListener("compositionend",this.L),this.H=0,this.Da&&((Dt=this.textInputElement)===null||Dt===void 0||Dt.addEventListener("focus",this.Sa),(Ft=this.textInputElement)===null||Ft===void 0||Ft.addEventListener("blur",this.Qa))),8&rr&&(this.s&&!this.kb?this.s.start():this.C&&this.C.start()),Qt&&this.preventNavigation&&!this.U&&(this.U=!0,history.pushState(null,document.title,location.href),this.windowAddEventListener("popstate",this.Ua))}}else{var Yt,dr;(xt=this.m&ut)&&(this.m^=xt,wt=!this.yb(),4&xt&&((Ot=this.l).H=!1,Qs(Ot),ru(Ot),Il&&(Ot.o&&Tp(Ot,Ot.o),Ot.windowRemoveEventListener("gamepadconnected",Ot.oa),Ot.windowRemoveEventListener("gamepaddisconnected",Ot.pa),tu(Ot),Ot.F&&(Ot.m.stop(),Ot.m.reset()))),1&xt&&(Ot=this.h).C&&(Op(Ot),Ot.C=!1,s(Ot.u)||(Ot.cursorType==2&&Ot.L?(Ot.videoRemoveEventListener("pointerdown",Ot.xa),Ot.videoRemoveEventListener("pointerup",Ot.ya)):(Ot.videoRemoveEventListener("mousedown",Ot.fa),Ot.videoRemoveEventListener("mouseup",Ot.pa)),Ot.u.os==="Xbox"||Ot.videoRemoveEventListener("contextmenu",Cv)),Ot.documentRemoveEventListener("wheel",Ot.qa,Ot.ra),Dv(Ot),Ot.cursorType===0&&(Ot.j.style.display="none"),ts(Ot),Bs(Ot),Ru(Ot)),2&xt&&(ku(this),this.documentRemoveEventListener("keydown",this.Na),this.documentRemoveEventListener("keyup",this.Pa),(Qt=this.textInputElement)===null||Qt===void 0||Qt.removeEventListener("input",this.ab),(nr=this.textInputElement)===null||nr===void 0||nr.removeEventListener("compositionstart",this.L),(rr=this.textInputElement)===null||rr===void 0||rr.removeEventListener("compositionupdate",this.L),(lr=this.textInputElement)===null||lr===void 0||lr.removeEventListener("compositionend",this.L),this.Da&&((Yt=this.textInputElement)===null||Yt===void 0||Yt.removeEventListener("focus",this.Sa),(dr=this.textInputElement)===null||dr===void 0||dr.removeEventListener("blur",this.Qa))),8&xt&&(this.C&&this.C.stop(),this.s&&this.s.stop(),this.F!==0&&$p(this),(xt=this.I).mb=void 0,zv(xt)),wt&&this.preventNavigation&&this.U&&(this.windowRemoveEventListener("popstate",this.Ua),history.back(),this.U=!1))}}yb(){return this.m!==0}bb(d){d?(Dp(this),ft.d("{8bacfa5}","{cb19d31}")):(ft.d("{8bacfa5}","{8744dbe}"),ku(this),Op(this.h))}Vd(){this.oa!==void 0&&(this.toggleUserInput(!1,15&~this.oa),this.oa=void 0),this.g.Vd()}cb(){this.aa&&qp(this)}getVirtualGamepadHandler(){return this.l.getVirtualGamepadHandler()}sendTextInput(d){this.g.sendTextInput(d)}Bb(d){switch(d.type){case"compositionstart":this.H=1;break;case"compositionupdate":!s(this.u)&&jp(d.data)||this.M.emit("TextComposition",{compositionText:d.data,imeRecommendation:!0});break;case"compositionend":const ut=this.o?d.data.trim():d.data;ut.length&&(d=s(this.u)||!jp(d.data),this.o&&!d?Uv(this,ut):jv(this,ut),d&&this.M.emit("TextComposition",{compositionText:""})),this.H=0}}Cb(){this.qa=!0;let d=this.textInputElement.value;this.H==1&&(this.o&&1<d.length&&(d=d.charAt(d.length-1)),this.H=2),this.o&&jp(d)?(Uv(this,d),this.H=0):this.H!=2&&jv(this,d)}setVirtualKeyboardState(d){ft.i("{8bacfa5}","{60b2d45}",d),this.kb!==d&&(this.kb=d,this.C&&this.s&&(this.kb?(this.s.stop(),this.C.start()):(this.C.stop(),this.J.ma!==1&&Zs(this,0,0,1),this.s.start())))}setKeyboardLayout(d){this.ja=d=="zh-TW"}scroll(d,ut,wt){0<wt.length&&rv(this.g,Math.sign(wt[0].deltaY),ut)}sendKeyEvent(d){Eu(this.g)&&(Fp(this,d)?d.type==="keydown"?this.Ka(d):d.type==="keyup"&&this.Oa(d):d.type==="keydown"&&d.key.length===1&&(d=new TextEncoder().encode(d.key),this.sendTextInput(d.buffer)))}Jb(d,ut){this.h.Jb(d,ut)}Ab(d,ut){this.h.Ab(d,ut)}lc(d){this.h.lc(d)}Mc(){pn&&(this.T=!this.T,this.N.Mc(this.j),this.T?this.l.l.push(this.N):Ls(this.l,this.N))}};function Iu(d){d.h=!0,zv(d),Kv(d),d.h=!1}function zv(d){d.g!==0&&(window.clearTimeout(d.g),d.g=0)}function Kv(d){const ut=d.mb;ut&&(d.mb=void 0,ut())}class t1{constructor(){this.g=0,this.h=!1}delay(ut){this.h?ut():(Iu(this),this.mb=ut,this.g=window.setTimeout(()=>{this.g=0,Kv(this)},r1))}}var r1=30;function Pu(){let d=[];return d.push(162),d.push(163),d.push(164),d.push(165),d.push(91),d.push(92),d.push(160),d.push(161),d}function Hp(d){switch(d){case 162:case 163:return 2;case 164:case 165:return 4;case 91:case 92:return 8;case 160:case 161:return 1}return 0}function Gv(d){return d.qualityScore=3*d.qualityScore/4+Math.min(d.latencyScore,d.networkLossScore,d.bandwidthScore)/4,{latencyScore:d.latencyScore,networkLossScore:d.networkLossScore,bandwidthScore:d.bandwidthScore,qualityScore:d.qualityScore}}var Wv=class{constructor(d,ut){this.maxBitrate=d/1e3,this.g=ut/1e3,this.networkLossScore=this.bandwidthScore=this.latencyScore=this.qualityScore=100}};function zp(){return Ln===!1?Promise.resolve(0):window.navigator.permissions?window.navigator.permissions.query({name:"microphone"}).then(d=>{let ut=2;return(d=d.state)=="granted"?ut=5:d=="prompt"&&(ut=1),ut}).catch(()=>0):Promise.resolve(0)}function Qo(d,ut,wt=!0){d.h=ut,d.h===3&&(d.N=!0),d.L&&wt&&d.L.emit("MicCapture",{state:d.h})}function Kp(d){if(d.initialized)if(au){d.l=!1,d.paused=!0;var ut=d.h;if(navigator.mediaDevices.ondevicechange=()=>{},d.C){ft.d("{223689a}","{6faf5bb}");let xt=Jv();var wt=d.C.getSenders()[0];wt?wt.replaceTrack(xt.getTracks()[0]).then(()=>{ft.d("{223689a}","{797fa55}"),Qo(d,5,!1),ut===3&&(d.F=!0)}).catch(Ot=>{ft.e("{223689a}","{79f26cc}",Ot),Qo(d,7,!1)}).finally(()=>{let Ot=d.g;d.g=null,Ot&&Ot.getTracks().forEach(Vt=>{Vt.stop()}),Qo(d,d.h),s(d.u)&&!jt(d.u,!1,15,4)&&d.j()}):(ft.e("{223689a}","{f7f0250}"),d.g=null)}else ft.e("{223689a}","{9e75fa2}"),Qo(d,0)}else Qo(d,6)}function Ou(d,ut){var wt;d.o=!0,d.s.set(ut,((wt=d.s.get(ut))!==null&&wt!==void 0?wt:0)+1),ft.d("{223689a}","{30f8637}",ut)}async function Qv(d,ut){return d.v=!0,navigator.mediaDevices.getUserMedia({audio:ut}).then(wt=>{if(ft.d("{223689a}","{b204737}"),Qo(d,5,!1),d.v=!1,d.g=wt,s(d.u)&&(wt.getTracks()[0].onended=()=>{d.O=performance.now(),ft.i("{223689a}","{6b60d82}"),Kp(d)}),d.g.oninactive=()=>{ft.d("{223689a}","{eee54f1}"),d.M.clear(),d.g=null},d.paused)ft.d("{223689a}","{21e76e1}"),d.g=null,Qo(d,7);else{var xt=d.C.getSenders()[0];xt?xt.replaceTrack(wt.getTracks()[0]).then(()=>{var Ot;ft.i("{223689a}","{6c92139}");const Vt=(Ot=d.Ea)!==null&&Ot!==void 0?Ot:d.K;if(s(d.u)&&!jt(d.u,!1,15,4)&&Vt&&!Vt.muted){let Dt;Vt.srcObject&&(Dt=Vt.play(),ft.i("{223689a}","{23a6493}",Vt.tagName)),Dt?Dt.then(()=>{ft.d("{223689a}","{5593cbe}"),d.j()}).catch(Ft=>{d.j();try{jo(d.G,"WAR: Play Error",Ft==null?void 0:Ft.name,Ft==null?void 0:Ft.message),ft.e("{223689a}","{69aae72}",Ft==null?void 0:Ft.name,Ft==null?void 0:Ft.message)}catch{}}):ft.e("{223689a}","{b6a6508}")}Qo(d,3),d.F=!1,jt(d.u,!1,15,4)&&(d.o=!1,d.I=!1)}).catch(Ot=>{ft.e("{223689a}","{5c42246}",Ot),d.g=null,Qo(d,7)}):(ft.e("{223689a}","{f7f0250}"),d.g=null)}}).catch(wt=>{var xt,Ot;s(d.u)&&!jt(d.u,!1,15,4)&&d.j(),d.v=!1,wt instanceof DOMException&&wt.name==="NotAllowedError"?(ft.e("{223689a}","{3f9bd66}"),Qo(d,2),d.I&&!d.o&&Ou(d,"permissionDenied")):wt instanceof DOMException&&wt.name==="NotFoundError"?(ft.e("{223689a}","{7f04869}"),Qo(d,4)):(wt instanceof DOMException&&wt.name==="NotReadableError"?(d.M.add((xt=ut.deviceId)!==null&&xt!==void 0?xt:"default"),ft.e("{223689a}","{af7e08c}",(Ot=ut.deviceId)!==null&&Ot!==void 0?Ot:"default",wt.name,wt.message),navigator.mediaDevices.enumerateDevices().then(Vt=>{for(const Dt of Vt)if(Dt.kind==="audioinput"&&Dt.deviceId!=="default"&&!d.M.has(Dt.deviceId)){ft.d("{223689a}","{655d8b0}",Dt.deviceId,Dt.label),ut.deviceId=Dt.deviceId,Qv(d,ut);break}}).catch(Vt=>{ft.e("{223689a}","{930e826}",Vt.name,Vt.message)})):ft.e("{223689a}","{c361fc5}",wt.name,wt.message),Qo(d,7))})}async function Vu(d){if(d.initialized)if(au){if(d.l=!0,d.g==null&&!d.v){d.paused=!1,Qo(d,1,!1);var ut={sampleRate:48e3};pt(d.u)&&(ut.googAutoGainControl2=!1),navigator.mediaDevices.ondevicechange=()=>{ft.i("{223689a}","{50d0169}",!!d.g,d.v),d.g!=null||d.v||(ft.d("{223689a}","{c849290}"),Vu(d))},await Qv(d,ut),d.H||Yv(d)}}else ft.e("{223689a}","{999b07b}"),Qo(d,6)}function Yv(d){return navigator.mediaDevices.enumerateDevices().then(ut=>{let wt=0;ft.d("{223689a}","{fa1ec18}",JSON.stringify(ut));for(const xt of ut)xt.kind=="audioinput"&&wt++;switch(wt){case 0:d.H="No Audio Input",d.m.Qd++;break;case 1:d.H="Built-in Microphone",d.m.wd++;break;default:d.H="Headset Microphone",d.m.Gd++}ft.d("{223689a}","{0d14ab6}",d.H)}).catch(()=>{ft.e("{223689a}","{21131d5}")})}function Jv(){let d=G0(48e3);if(d){let ut=d.createMediaStreamDestination().stream.getAudioTracks()[0];return d.close(),ut.enabled=!0,new MediaStream([ut])}throw Error("Mic stream is not supported")}function Nu(d){if(Ln!==!1){if(d.g!=null){let ut=d.g;d.M.clear(),d.g=null,navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=()=>{}),ut.getTracks().forEach(wt=>{wt.stop()})}d.l=!1,Qo(d,5),Mo(d.G,"AudioInputType",d.N?"started":"not started",0,d.m.Qd,d.m.wd,d.m.Gd),jt(d.u,!1,15,4)&&Mo(d.G,"LowAudioVolume","",0,d.s.get("permissionDenied"),d.s.get("visibilityChange"),d.s.get("deviceChange")),d.C=null,d.L=null,d.K=void 0,d.Ea=void 0,d.initialized=!1,d.m={Qd:0,wd:0,Gd:0};for(const[ut]of d.s)d.s.set(ut,0);d.o=!1,d.F=!1,d.I=!1,d.N=!1}}function Gp(d){return d.H==="Built-in Microphone"}function Xv(d,ut){Yv(d).then(()=>{ut!==0&&jt(d.u,!1,15,4)&&!d.o&&Gp(d)&&(d.l||d.F)&&Ou(d,"deviceChange")})}var Zv=class{constructor(d,ut){this.L=null,this.h=0,this.l=!1,this.M=new Set,this.initialized=this.P=!1,this.O=0,this.F=this.I=this.o=!1,this.m={Qd:0,wd:0,Gd:0},this.s=new Map([["permissionDenied",0],["visibilityChange",0],["deviceChange",0]]),this.N=!1,this.u=d,this.G=ut,this.g=this.C=null,this.paused=this.v=!1,jt(d,!1,15)&&(this.P=!0)}initialize(d,ut,wt,xt){if(Ln!==!1){if(this.C=d,this.L=ut,this.K=wt,this.Ea=xt,au){if((d=Jv())==null)return void ft.w("{223689a}","{360f38b}");this.C.addTrack(d.getAudioTracks()[0],d),this.l&&Vu(this)}else ft.w("{223689a}","{5813c2b}");this.initialized=!0}}j(){var d,ut,wt;if(bs&&this.P){var xt=(ut=(d=this.Ea)===null||d===void 0?void 0:d.srcObject)!==null&&ut!==void 0?ut:(wt=this.K)===null||wt===void 0?void 0:wt.srcObject;if(xt){ft.i("{223689a}","{ad4b8c2}");var Ot=xt.getAudioTracks()[0];Ot.enabled=!1,setTimeout(()=>{Ot.enabled=!0},0)}}}getMicState(){return this.h}},au=navigator.mediaDevices!=null&&(window.AudioContext||window.webkitAudioContext||!1),Lu={clientName:"Ragnarok",clientId:"62677554106929725",eventSchemaVer:"3.2"},em=class extends io{constructor(d){super(d),this.name="Streamer_Start",this.gdprLevel="functional"}},tm=class extends io{constructor(d){super(d),this.name="Streamer_Exit",this.gdprLevel="functional"}},i1=class extends io{constructor(d){super(d),this.name="Streamer_InputDevice",this.gdprLevel="functional"}};function Du(d,ut){const wt=d.j.get(ut);if(wt){d.h=wt;for(const xt of d.g)xt(d.getCurrentNetworkType())}else ft.d("{aac1655}","{1e3c13d}",ut)}var Ss=new class{constructor(){var d;this.j=new Map([["Ethernet","ETHERNET"],["5GHz_WiFi","WIFI_5_0"],["2.4GHz_WiFi","WIFI_2_4"],["Others","OTHER"],["disconnected","UNKNOWN"],["wifi","WIFI"],["ethernet","ETHERNET"],["none","UNKNOWN"],["bluetooth","BLUETOOTH"],["wimax","WIMAX"],["other","OTHER"],["mobile","MOBILE"],["unknown","UNKNOWN"],["NONE","UNKNOWN"],["UNKNOWN","UNKNOWN"],["ETHERNET","ETHERNET"],["WIFI","WIFI"],["NET_PROXY","OTHER"],["2G","MOBILE_2G"],["2.5G","MOBILE_2G"],["3G","MOBILE_3G"],["4G","MOBILE_4G"]]),this.h="UNKNOWN",this.g=[],window.addEventListener("GFNNetworkInfo",wt=>{ft.d("{aac1655}","{2925c9d}",wt.detail.state),Du(this,wt.detail.state)});const ut=navigator.connection;if(ut!=null&&ut.type&&(Du(this,ut.type),ut.addEventListener("change",()=>{var wt;const xt=(wt=navigator.connection)===null||wt===void 0?void 0:wt.type;xt&&(ft.d("{aac1655}","{4a9e05b}",xt),Du(this,xt))})),(d=window.tizen)!==null&&d!==void 0&&d.systeminfo){d=wt=>{(wt=wt.networkType)&&(ft.d("{aac1655}","{e9b5f27}",wt),Du(this,wt))};try{window.tizen.systeminfo.getPropertyValue("NETWORK",d),window.tizen.systeminfo.addPropertyValueChangeListener("NETWORK",d)}catch(wt){ft.w("{aac1655}","{7d035ae}",wt)}}}registerCallback(d){this.g.push(d)}unregisterCallback(d){const ut=this.g.findIndex(wt=>wt==d);ut!==-1&&this.g.splice(ut,1)}getCurrentNetworkType(){return this.h}};function jo(d,ut,wt,xt,Ot,Vt){ut=new mo({key1:ut??"",key2:wt??"",key3:xt??"",key4:Ot??"",key5:Vt??"",moduleName:"RAGNAROK",networkType:sr(Ss.getCurrentNetworkType()),overrideConfigType:xa.type,overrideConfigVersion:xa.version,cmsId:String(d.cmsId),sessionId:d.sessionId,subSessionId:d.subSessionId}),d.h(ut)}function rm(d,ut,wt,xt,Ot,Vt,Dt,Ft,Qt){50<=d.H||(d.H++,ut=new i1({deviceName:ut,deviceType:"GAMEPAD",vendorId:wt,productId:xt,deviceIndex:Ot,reportIndex:Dt?0:Ot,hapticsSupported:vp(Vt),hapticsFeedbackCount:0,state:Ft,eventMapReceived:Qt,eventMapProcessed:Qt,sessionId:d.sessionId,subSessionId:d.subSessionId,cmsId:String(d.cmsId)}),d.h(ut))}function Mo(d,ut,wt,xt,Ot,Vt,Dt){ut=new go({metricName:ut,moduleName:"RAGNAROK",valueInt1:Ot,valueInt2:Vt,valueInt3:Dt,valueString:wt,valueDouble:xt,networkType:sr(Ss.getCurrentNetworkType()),cmsId:String(d.cmsId),sessionId:d.sessionId,subSessionId:d.subSessionId}),d.h(ut)}class im extends dn{constructor(){super(Lu),this.cmsId=this.subSessionId=this.sessionId="",this.isResume=!1,this.zoneAddress="",this.H=0,this.v=new Map,this.C=0}za(ut,wt,xt,Ot,Vt,Dt,Ft){var Qt;if(50<=this.C)var rr=!1;else{var nr=(rr=this.v.get(wt))!==null&&rr!==void 0?rr:0;10<=nr?rr=!1:(this.C++,this.v.set(wt,nr+1),rr=!0)}rr&&(ut instanceof DOMException&&(ut={name:ut.name,message:ut.message}),ut=new ao({filename:xt,lineno:Ot,stacktrace:(Qt=ut==null?void 0:ut.stack)!==null&&Qt!==void 0?Qt:"",colno:Vt,handled:vp(Dt),category:Ft??"",message:wt,moduleName:"RAGNAROK",sessionId:this.sessionId,subSessionId:this.subSessionId}),this.h(ut))}}var Uo=new im;function Wp(d,ut){d.I.hasListener("TelemetryEvent")?d.I.emit("TelemetryEvent",ut):b0(d.j,ut)}function nm(d,ut){let wt=!1;var xt;d.clientShutDownCallback&&(wt=d.clientShutDownCallback(ut),ft.d("{9838627}","{caf81d9}",wt)),wt||(ft.d("{9838627}","{e939db1}"),d=d.j,ft.d("{f7c1592}","{01dcfe5}",(xt=ut.parameters)===null||xt===void 0?void 0:xt.sessionId),Ty(d,ut),My(S0(d,d.h.eventPayload)))}var n1=class extends im{constructor(d,ut){super(),this.I=d,this.j=ut,this.j.H=this.za.bind(this)}h(d){Wp(this,{name:d.name,gdprLevel:d.gdprLevel,parameters:d.parameters,ts:d.ts,clientConfig:Lu})}};function om(d,ut){switch(d){case 0:var wt,xt=window.RTCPeerConnection;if(xt)if(s(ut))ut=jt(ut,!1,14,3);else{switch(d=!1,Gt(ut)&&(d=!0),window.chrome&&(ut.browser=="Chrome"?Kt(ut,77)&&(d=!0):d=!0),ut.browser){case"Edge_Legacy":d=!1;break;case"Safari":const Ot=xt==null?void 0:xt.prototype;if(xt=Ot&&((wt=Ot.hasOwnProperty)===null||wt===void 0?0:wt.call(Ot,"canTrickleIceCandidates")))e:if(ut.browser!="Safari")xt=!1;else{try{xt=Ht(ut.browserVer,!1,16,4);break e}catch{ft.w("{d988e7f}","{07fd1dd}")}xt=!0}xt&&(d=!0)}ut=d}else ut=!1;return ut;case 1:return au;default:return!1}}function am(d){return!(it(d)||_(d)||s(d))}function Bu(d,ut,wt){var xt,Ot,Vt,Dt;const Ft=4953600<=d*ut;var Qt=wt===30?1.25*wt:Math.min(wt,60);let rr=d*ut*Qt;return pp(d,ut)||Ft?(d=(Ot=(xt=Zo)!==null&&xt!==void 0?xt:Yn.bitsPerPixel1440p)!==null&&Ot!==void 0?Ot:.325,Qt=(xt=2073600*Qt)+(3686400*Qt-xt)/3,rr=Ft?Qt+(rr-Qt)/12:xt+(rr-xt)/3):d=(Dt=(Vt=ba)!==null&&Vt!==void 0?Vt:Yn.bitsPerPixel)!==null&&Dt!==void 0?Dt:.3,rr=rr*d/1200,120<=wt&&!Ft&&(rr=Math.min(5e4,Math.round(1.15*rr))),[Math.round(rr),5e4]}function sm(d,ut){return ut*=1e3,ut=3600*(d===120?.916*ut+293098:.678*ut+910569)/1e9/8,d===30&&(ut*=.625),Math.round(.95*ut)}async function lm(d){let ut=0;return d.os==="iOS"&&(ut|=1),d.os==="iPadOS"&&(ut|=2),_(d)&&function(){var wt,xt;if(navigator.userAgent.includes("SamsungBrowser"))return!1;const Ot=(wt=window.webapis)===null||wt===void 0?void 0:wt.productinfo;return!(Ot==null||!Ot.isUdPanelSupported())&&(wt=(xt=Ot.getSmartTVServerVersion)===null||xt===void 0?void 0:xt.call(Ot),(xt=wt&&(xt=wt.match(/T-INFOLINK(\d+)-(\d+)/))?{year:parseInt(xt[1],10),version:parseInt(xt[2],10)}:void 0)?(wt=xt.year,xt=xt.version,ft.i("{d988e7f}","{fc40a4b}",wt,xt),wt===2021||2023<=wt||wt===2022&&1008<=xt):(ft.e("{d988e7f}","{e227976}",wt),!1))}()&&(ut|=4),it(d)&&navigator.userAgent.includes("PWA")&&window.lge_webrtc_hevc_support&&(ut|=8),d.deviceModel==="VISIONPRO"&&(ut|=16),async function(wt){var xt,Ot,Vt,Dt,Ft,Qt,rr,nr=screen.width,lr=screen.height,Yt=window.devicePixelRatio,dr=!!(4&wt)||!!(8&wt)||!!(16&wt),ir=(Ft=(Dt=an)!==null&&Dt!==void 0?Dt:Yn.forceHdrSupport)!==null&&Ft!==void 0&&Ft;return Dt=(rr=(Qt=Xr)!==null&&Qt!==void 0?Qt:Yn.forceSdr10Support)!==null&&rr!==void 0&&rr,[nr,lr]=gu([nr,lr]),lr={width:Math.round(nr*Yt),height:Math.round(lr*Yt),fps:60,scaleFactor:Math.round(100*Yt)},Yt=void 0,dr?Yt={width:3840,height:2160,fps:lr.fps}:2&wt&&1366<=nr&&(Yt={width:1600,height:1200,fps:lr.fps}),wt=[{width:2560,height:1600,fps:120},{width:3840,height:1080,fps:120}],dr&&wt.push({width:3840,height:2160,fps:60}),dr=!1,ir&&(dr=(xt=window.matchMedia)===null||xt===void 0?void 0:xt.call(window,"(dynamic-range: high)").matches,xt=(Ot=window.matchMedia)===null||Ot===void 0?void 0:Ot.call(window,"(video-dynamic-range: high)").matches,Ot=(Vt=window.matchMedia)===null||Vt===void 0?void 0:Vt.call(window,"(color-gamut: p3)").matches,ft.i("{5083445}","{f9f1c3b}",dr,xt,Ot),dr=(dr||xt)&&Ot),Vt=F0(),cm={displayMode:lr,maxAutoMode:Yt,maxSupportedModes:wt,features:{vsync:0,vvsync:!1,hdr:dr,reflex:!1,audioChannelCount:Vt,bitDepth:ir?10:8,sdrBitDepth:Dt?10:8}}}(ut)}let cm;function Fs(d){let ut=0;return d!=null&&d.supported&&(ut|=1),d!=null&&d.smooth&&(ut|=2),d!=null&&d.powerEfficient&&(ut|=4),ut}function Is(d,ut=1920,wt=1080,xt=60){const Ot=navigator.mediaCapabilities;return Ot?Ot.decodingInfo({type:"webrtc",video:{contentType:"video/"+d,width:ut,height:wt,framerate:xt,bitrate:1e3*Bu(ut,wt,xt)[0]}}).catch(Vt=>{ft.w("{5083445}","{f5c2155}",d,Vt)}):Promise.resolve(void 0)}function Qp(){var d=Fl;return d.l?Promise.resolve(d.l):d.g?d.g:d.m()}function su(d,ut){return ut&&(d.refreshRate=void 0),d.refreshRate?Promise.resolve(d.refreshRate):d.j?d.j:function(wt){return wt.j=new Promise((xt,Ot)=>{let Vt=!1;const Dt=window.setTimeout(()=>{Vt=!0},4e3),Ft=[];let Qt,rr=window.innerWidth,nr=window.innerHeight,lr=window.screenX,Yt=window.screenY;const dr=()=>{window.requestAnimationFrame(()=>{if(Vt)ft.w("{5083445}","{0b0c6f9}","Timed out during the refreshRate loop"),window.clearTimeout(Dt),Ot();else{if(window.innerWidth!=rr||window.innerHeight!=nr||lr!=window.screenX||Yt!=window.screenY){rr=window.innerWidth,nr=window.innerHeight,lr=window.screenX,Yt=window.screenY;var ir=!0}else ir=!1;ir?(ft.w("{5083445}","{824b461}"),Ft.length=0,dr()):(ir=performance.now(),Ft.length&&Ft[0]<=ir-2e3?(Qt=Math.floor(Ft.length/2),ft.d("{5083445}","{8c3d290}",Qt,Ft[Ft.length-1]-Ft[0]),ir=Qt,window.clearTimeout(Dt),xt(ir)):(Ft.push(ir),dr()))}})};dr()}).then(xt=>(wt.refreshRate=xt,wt.refreshRate),()=>{var xt;return(xt=wt.refreshRate)!==null&&xt!==void 0?xt:0}),wt.j}(d)}async function um(){return 117<=await su(Fl,!1)}var Fl=new class{constructor(){Su.push(this.s.bind(this)),Su.push(this.m.bind(this)),Su.push(this.o.bind(this))}m(){return this.g=Is("av1").then(d=>this.l=d)}o(){return this.h=Promise.resolve(void 0)}async s(){return 117<=await su(this,!0)}};async function dm(d,ut){var wt;let xt=[];const Ot=(wt=Jr)!==null&&wt!==void 0?wt:Yn.codecList;if(Ot)for(const Vt of Ot)xt.push(Vt);else d=async function(Vt,Dt){var Ft,Qt,rr;const nr=(Qt=(Ft=jr)!==null&&Ft!==void 0?Ft:Yn.enableAv1Support)!==null&&Qt!==void 0?Qt:(pt(Dt)||yt(Dt))&&Dt.browser=="Chrome";return Ft=(rr=Yn.enableAv1ByResolutionAndFps)!==null&&rr!==void 0?rr:7,!(!nr||4953600<=Vt.width*Vt.height&&!(4&Ft)||pp(Vt.width,Vt.height)&&!(2&Ft)||!(Vt.fps!==120||1&Ft))&&(it(Dt)&&window.lge_webrtc_av1_support!=null?window.lge_webrtc_av1_support:!((Vt=await Qp())==null||!Vt.powerEfficient))}(d,ut),ut=async function(Vt){return it(Vt)&&window.lge_webrtc_hevc_support!=null?window.lge_webrtc_hevc_support:!(!_(Vt)&&(Vt=Fl,(Vt=await(Vt.v?Promise.resolve(Vt.v):Vt.h?Vt.h:Vt.o()))==null||!Vt.powerEfficient))}(ut),await d&&xt.push("AV1"),await ut&&xt.push("H265"),xt.push("H264");return xt}function Yp(d,ut,wt,xt){const Ot=/^([^[.]+)(?:\[(\d+)\])?\.([^:]+): *(.+)$/;let Vt=!0;for(const Qt of d.split(/\r?\n/)){var Dt=Ot.exec(Qt);if(Dt){var Ft=Dt[1];d=Dt[2]!==void 0?Number.parseInt(Dt[2]):void 0;const rr=Dt[4];Dt=Ft+"."+Dt[3];const nr=fm(ut,Ft=o1(Ft),d),lr=fm(wt,Ft,d);nr&&lr?lr.has(Dt)?(ft.d("{eb7c2d0}","{2beb68f}",xt,Dt,rr),nr.set(Dt,rr)):(ft.w("{eb7c2d0}","{cc4fdef}",xt,Dt,rr),Vt=!1):(ft.w("{eb7c2d0}","{a649ad8}",xt,Ft,d),Vt=!1)}}return Vt}function o1(d){switch(d){case"video":case"vqos":case"qscore":case"bwe":case"clientPerfBr":case"packetPacing":return"video";case"audio":case"aqos":case"audioBitrate":return"audio";case"ri":return"application";case"mic":return"mic"}}function Fu(d,ut,wt){d.set(wt?"vqos.dfc.adjustResAndFps":"vqos.drc.enable",ut?"1":"0")}function fm(d,ut,wt){var xt;return ut===void 0?d.ob:(xt=d.media.filter(Ot=>Ot.mediaType===ut)[wt??0])===null||xt===void 0?void 0:xt.attributes}function a1(d,ut){let wt=`v=0
o=${d.origin}
s=-
t=${d.time}
`;const xt=(Ot,Vt)=>{for(const[Dt,Ft]of Ot){Ot=Dt;const Qt=Ft;Qt!==Vt.get(Ot)&&(wt+=`a=${Ot}:${Qt}
`)}};xt(d.ob,ut.ob);for(const Ot of d.media)wt+=`m=${Ot.mediaType} 0 RTP/AVP
`,wt+=`a=msid:${Ot.Fc}
`,d=ut.media.find(Vt=>Vt.Fc===Ot.Fc),xt(Ot.attributes,d.attributes);return wt}function s1(d){switch(d){case 0:return 0;case 1:return 1;case 2:return ft.w("{eb7c2d0}","{30c875c}"),0;default:return ft.w("{eb7c2d0}","{7cd5754}",d),0}}function $u(d){const ut=d.j-d.g;return ut!=0?(d.l-d.h)/ut:0}class l1{constructor(){this.j=this.g=this.l=this.h=0}update(ut,wt){this.h==0&&this.g==0?(this.h=ut,this.g=wt):(this.j=wt,this.l=ut)}reset(){this.h=this.l,this.g=this.j}}function hm(d,ut){d.M.innerText=pm(d,ut),d.j={value:0,count:0,max:0},d.l={value:0,count:0,max:0},d.m.reset()}function pm(d,ut){var wt=`Seat: ${d.h.zoneName} (${d.h.Ud}) / ${d.h.gpuType}
`,xt=`Game: CMS ${d.h.appId}`;d.avgGameFps!==void 0&&(xt+=` / fps ${d.avgGameFps.toFixed()}`),wt=wt+(xt+`
`)+`Stream: Current ${Ol(d.streamingResolution)}@${d.fps} / Default: ${d.h.streamInfo.width}x${d.h.streamInfo.height}@${d.h.streamInfo.fps} / Codec ${d.codec}${d.hdr?" HDR":""} ${d.bitDepth} bpc
Network: RTD ${d.rtd}ms / FL ${d.s} / PL ${d.N} / J ${d.H.toFixed(2)}ms / Bitrate ${d.o.toFixed(2)}Mbps / BWU ${d.Ob.toFixed(2)}%
QOS: frame ${d.C} / FT ${d.P.toFixed(2)} / D ${(1e3*$u(d.m)).toFixed(2)} / Q ${Math.floor(d.v.qualityScore)} / Marker ${d.S}
Client: ${d.u.os} ${d.h.clientAppVersion} ${d.h.clientLocale} Resolution ${Ol({width:window.innerWidth*window.devicePixelRatio,height:window.innerHeight*window.devicePixelRatio})}
Input ${d.g.qf}
`,xt=`DC ${mm(d.j)}ms (${d.j.max.toFixed(2)}ms) / Blocked ${d.L}
`;const Ot=`Stats ${mm(d.l)}ms (${d.l.max.toFixed(2)}ms) / FR ${d.O} / FDR ${d.I}
`,Vt=`Latency ${d.v.latencyScore.toFixed(1)} / Network ${d.v.networkLossScore.toFixed(1)} / Bandwidth ${d.v.bandwidthScore.toFixed(1)}
`,Dt=`VP ${d.g.tf?"y":"n"} / AP ${d.g.rf?"y":"n"} / UI ${d.g.yb?"y":"n"} / VKB ${d.g.kb?"y":"n"} / MS ${d.g.yf} / RSDMM ${+d.g.cd}
`;return d=`KBL ${d.g.keyboardLayout} / ALM ${+d.g.appLaunchMode} / SWD ${d.U?"y":"n"} / ${d.cc}`,ut&&(wt+=xt+Ot+Vt+Dt+d),wt}var vm=class{constructor(d,ut,wt){this.o=this.fps=0,this.Ob=4,this.N=this.rtd=this.H=this.I=this.O=this.C=this.R=this.F=0,this.streamingResolution={width:0,height:0},this.L=this.P=0,this.j={count:0,max:0,value:0},this.l={count:0,max:0,value:0},this.m=new l1,this.T=this.s=this.zd=0,this.codec="UNKNOWN",this.hdr=!1,this.bitDepth=8,this.U=!1,this.cc="",this.S=0,this.K=d,this.u=ut,this.h=wt,this.v={qualityScore:0,bandwidthScore:0,networkLossScore:0,latencyScore:0},(d=document.getElementById("overlay-543d9968"))||((d=document.createElement("div")).id="overlay-543d9968",d.style.display="none",d.style.position="fixed",s(this.u)?(d.style.top="env(safe-area-inset-top, 0)",d.style.left="max(24px, env(safe-area-inset-left, 0))"):(d.style.top="0",d.style.left="0"),d.style.padding="0.5em",d.style.backgroundColor="rgba(0,0,0,0.5)",d.style.zIndex="300",d.style.fontSize="12px",d.style.fontFamily="monospace",d.style.color="white",d.style.whiteSpace="pre",d.style.lineHeight="100%",d.style.pointerEvents="none",this.K.insertAdjacentElement("afterend",d)),this.M=d,this.g={tf:!1,rf:!1,yb:!1,kb:!1,yf:0,cd:!1,keyboardLayout:"",appLaunchMode:0,qf:""}}};function mm(d){let ut=0;return 0<d.count&&(ut=d.value/d.count),ut.toFixed(2)}var c1={size:70},u1={size:80},d1={size:48},f1={size:88},h1={size:20};function gm(d){0<d.g.length&&(Ws(d.g,5),d.g=[])}function ym(d,ut){const wt=d.K.videoWidth;return d=d.K.videoHeight,new DOMRect(ut.x*wt,ut.y*d,ut.width*wt,ut.height*d)}function bm(d){const ut={isPrimary:!0,pointerId:1,button:0};d.K.dispatchEvent(new PointerEvent("pointerdown",ut)),d.K.dispatchEvent(new MouseEvent("mousedown")),window.setTimeout(()=>{d.K.dispatchEvent(new PointerEvent("pointerup",ut)),d.K.dispatchEvent(new MouseEvent("mouseup"))},100)}function qu(d,ut){d.ac.checked=ut,d.s.disabled=!ut,d.C.disabled=!ut,d.l.style.color=ut?"white":"gray"}function Jp(d,ut=!1){ut&&(d.g.style.bottom="5px",d.g.style.left="300px",d.g.style.top="",d.g.style.right="",d.g.style.width="150px",d.g.style.height="150px"),d.o()?(d.m.style.display="none",d.g.style.border="2px rgb(76, 175, 80) solid",d.g.style.backgroundColor="transparent"):(d.m.style.display="block",d.g.style.border="none",d.g.style.backgroundColor="rgb(105, 105, 105, 0.7)")}function wm(d,ut){if(ut!==d.visible){for(var wt of(ft.i("{50c79eb}","{5595c14}",ut),d.visible=ut,[d.L,d.g,d.v]))wt===d.v&&ut?Zp(d,d.h.value!=="Show hotkeys"):wt.style.display=ut?"block":"none";var xt=W0();if(wt=xt?"pointerdown":"mousedown",xt=xt?"pointermove":"mousemove",ut){d.P(),function(Vt,Dt){let Ft=0,Qt=0,rr=0,nr=0;const lr=document.onmouseup,Yt=document.onmousemove;Dt.onmousedown=dr=>{dr.preventDefault(),Ft=dr.clientX,Qt=dr.clientY,document.onmouseup=()=>{document.onmouseup=lr,document.onmousemove=Yt},document.onmousemove=ir=>{ir.preventDefault(),rr=Ft-ir.clientX,nr=Qt-ir.clientY,Ft=ir.clientX,Qt=ir.clientY,Vt.style.top=Vt.offsetTop-nr+"px",Vt.style.left=Vt.offsetLeft-rr+"px"}}}(d.g,d.m),d.O.oninput=Vt=>{Vt=parseFloat(Vt.target.value);var Dt=d.j;0>=Vt||1<=Vt?ft.e("{0c7ed7c}","{1cbd879}",Vt.toFixed(2)):Dt.m=Vt,d.S.innerHTML=(100*Vt).toFixed()+"%"},d.ac.oninput=Vt=>{qu(d,Vt.target.checked)},d.s.oninput=Vt=>{d.U.innerHTML=Vt.target.value},d.C.oninput=Vt=>{d.W.innerHTML=Vt.target.value+" ms"},d.zb.oninput=Vt=>{d.zb.checked=Vt.target.checked};const Ot=(Vt,Dt)=>{Dt.value=Math.max(Math.min(parseInt(Vt.target.value),100),0).toFixed(0),Cm(d,parseInt(d.Sb.value||"50")/100,parseInt(d.Tb.value||"50")/100)};d.Sb.oninput=Vt=>Ot(Vt,d.Sb),d.Tb.oninput=Vt=>Ot(Vt,d.Tb),d.H.onclick=()=>lu(d,d.H.value==="Start"),d.h.onclick=()=>Zp(d,d.h.value==="Show hotkeys"),d.g.onmouseup=d.P.bind(d),d.g.onmousedown=()=>{d.o()&&bm(d.j)},ps(d.Z,2,d.$),d.K.addEventListener(wt,d.aa),d.K.addEventListener(xt,d.ca)}else lu(d,!1),d.O.oninput=null,d.ac.oninput=null,d.s.oninput=null,d.C.oninput=null,d.zb.oninput=null,d.Sb.oninput=null,d.Tb.oninput=null,d.H.onclick=null,d.h.onclick=null,d.g.onmouseup=null,d.g.onmousedown=null,d.m.onmousedown=null,vs(d.Z,2,d.$),d.K.removeEventListener(wt,d.aa),d.K.removeEventListener(xt,d.ca)}}function lu(d,ut){ut&&!function(wt){const xt=ym(wt,wt.l);return!(0>xt.x||0>xt.y||xt.x+xt.width>wt.K.videoWidth||xt.y+xt.height>wt.K.videoHeight)}(d.j)?function(wt){wt.R.style.display="block",window.setTimeout(()=>wt.R.style.display="none",5e3)}(d):ut&&d.M?ft.e("{50c79eb}","{89742e9}"):(function(wt,xt){wt.active!==xt&&((wt.active=xt)?(ft.i("{0c7ed7c}","{b56e30d}"),wt.K.dispatchEvent(new Event("focus",{bubbles:!0})),wt.K.addEventListener("pointerdown",wt.j),wt.K.addEventListener("mousedown",wt.j)):(ft.i("{0c7ed7c}","{00425c2}"),wt.K.removeEventListener("pointerdown",wt.j),wt.K.removeEventListener("mousedown",wt.j),wt.g=[],wt.h=[]))}(d.j,ut),Jp(d),ut?(d.H.value="Stop",d.ac.checked&&(ft.i("{50c79eb}","{5974b2c}"),d.M=!0,d.da=parseInt(d.s.value),d.N=window.setInterval(()=>{0<d.da--?bm(d.j):(ft.i("{50c79eb}","{d37e51d}"),Sm(d),lu(d,!1))},parseInt(d.C.value)))):(d.H.value="Start",d.M&&(d.N?(ft.i("{50c79eb}","{d340c50}"),Sm(d)):ft.w("{50c79eb}","{6d8948b}")),Am(d),_m(d)))}function Xp(d,ut){d.value=ut.toString(),d.dispatchEvent(new Event("input"))}function Zp(d,ut){ut?(d.h.value="Hide hotkeys",d.v.style.display="block"):(d.h.value="Show hotkeys",d.v.style.display="none")}function Sm(d){window.clearInterval(d.N),d.N=0,d.M=!1}function Am(d){d.I!==0&&(window.clearTimeout(d.I),d.I=0)}function _m(d){d.F.innerHTML="",d.F.style.display="none"}function Em(d){var ut;const wt=(ut=d.processingDuration)!==null&&ut!==void 0?ut:0;return{pf:d.Ec-d.Ub,Tf:d.receiveTime?d.receiveTime-d.Ec:0,Xe:d.receiveTime&&d.processingDuration?d.presentationTime-d.processingDuration-d.receiveTime:0,decode:wt,Pf:d.td-d.presentationTime,total:d.td-d.Ub}}function Cm(d,ut,wt){const xt=d.K.getBoundingClientRect(),Ot=d.g.getBoundingClientRect(),{paddingTop:Vt,paddingRight:Dt,paddingBottom:Ft,paddingLeft:Qt}=Rm(d.K);ut=xt.left+Qt+(xt.width-Qt-Dt)*ut-Ot.width*ut,d.g.style.top=(xt.top+Vt+(xt.height-Vt-Ft)*wt-Ot.height*wt).toString()+"px",d.g.style.left=ut.toString()+"px",d.P()}function cu(){const d=document.createElement("div");return d.style.display="none",d.style.position="absolute",d.style.color="white",d.style.backgroundColor="rgb(105, 105, 105, 0.7)",d.style.padding="2px",d}function e0(d){const ut=document.createElement("div");return ut.style.width="100%",ut.style.borderBottom="1px dashed darkgray",ut.style.paddingBottom="2px",ut.innerHTML=d,ut}function Tm(d){const ut=document.createElement("input");return ut.type="button",ut.value=d,ut.style.margin="5px",ut.style.backgroundColor="rgb(132, 130, 143, .7)",ut.style.color="white",ut.style.padding="8px 40px",ut.style.border="none",ut.style.borderRadius="4px",ut.style.cursor="pointer",ut}function Mm(){const d=document.createElement("input");return d.type="checkbox",d}function As(d){const ut=document.createElement("label");return ut.innerHTML=d,ut}function t0(d,ut,wt,xt=1){const Ot=document.createElement("input");return Ot.type="range",Ot.min=ut.toString(),Ot.max=wt.toString(),Ot.step=xt.toString(),Ot.value=d.toString(),Ot}function Rm(d){const ut=wt=>{if(!wt)return 0;const xt=wt.length;return wt.substring(xt-1)==="%"?parseInt(wt.substring(0,xt-1)):wt.substring(xt-2)==="px"?parseInt(wt.substring(0,xt-2)):(ft.w("{50c79eb}","{3351f27}",wt),0)};return{paddingTop:ut(d.style.paddingTop),paddingRight:ut(d.style.paddingRight),paddingBottom:ut(d.style.paddingBottom),paddingLeft:ut(d.style.paddingLeft)}}var xm=class extends Map{constructor(){super([["TCP",0],["MDNS",0],["IPV6",0],["IPV4",0],["UNKNOWN",0]])}};function km(d){var ut,wt,xt,Ot;d.m=window.setInterval(()=>{(function(Vt){if(!Vt.I)if(Vt.I=!0,Vt.U===0)Vt.C.getStats().then(Dt=>{Vt.j=Dt}).catch(Dt=>ju(Vt,Dt,"early")).finally(()=>{Vt.I=!1});else if(Vt.U===1)if(Vt.ga){const Dt=Vt.C.getReceivers().find(Ft=>Ft.track.kind===Vt.mediaType&&Ft.track.enabled);Dt&&Dt.getStats().then(Ft=>Im(Vt,Ft)).catch(Ft=>ju(Vt,Ft,"standard")).finally(()=>{Vt.I=!1})}else(function(Dt){Dt.C.getStats(null).then(Ft=>{let Qt=!1;for(let rr of Ft.values())if(rr.type==="track"&&(Qt=!0),["transport","inbound-rtp","candidate-pair"].includes(rr.type)){rr.kind==="audio"&&(Dt.wa=!0);const nr=Dt.P.get(rr.type);nr?nr.includes(rr.id)?ft.e("{5cea617}","{76f5968}",rr.id):nr.push(rr.id):Dt.P.set(rr.type,[rr.id])}Dt.aa=!Qt,ft.i("{5cea617}","{1317761}",Dt.aa?"yes":"no"),Dt.ga=!0,Dt.j=Ft,Im(Dt,Ft)}).catch(Ft=>ju(Dt,Ft,"init")).finally(()=>{Dt.I=!1})})(Vt);else Vt.I=!1})(d)},(ut=Yn.getStatsInterval)!==null&&ut!==void 0?ut:96),window.chrome&&(d.F=window.setInterval(()=>{(function(Vt){if(!Vt.T){Vt.T=!0;var Dt=()=>{ft.i("{5cea617}","{cf8b53f}"),Vt.T=!1,clearInterval(Vt.F),Vt.F=0};Vt.C.getStats(Ft=>{for(var Qt of Ft.result())if(Qt.type=="ssrc")for(var rr of Qt.names()){Qt.stat("mediaType")==="video"&&(Vt.H.ts=es(To),Vt.H.timingFrameInfo=Qt.stat("googTimingFrameInfo"),Vt.H.targetDelayMs=+Qt.stat("googTargetDelayMs"),Vt.H.minPlayoutDelayMs=+Qt.stat("googMinPlayoutDelayMs"),Vt.H.currentDelayMs=+Qt.stat("googCurrentDelayMs"));break}if(!(15>(Qt=(Ft=Vt.H).timingFrameInfo.split(",",15)).length)){rr=new ArrayBuffer(c1.size);var nr=new DataView(rr);nr.setUint32(0,Ft.targetDelayMs||0,!0),nr.setUint32(4,Ft.minPlayoutDelayMs||0,!0),nr.setUint32(8,Ft.currentDelayMs||0,!0),nr.setFloat64(12,es(To),!0),nr.setFloat64(20,parseFloat(Qt[3])||0,!0),nr.setFloat64(28,parseFloat(Qt[4])||0,!0),nr.setFloat64(36,parseFloat(Qt[8])||0,!0),nr.setFloat64(44,parseFloat(Qt[9])||0,!0),nr.setFloat64(52,parseFloat(Qt[10])||0,!0),nr.setFloat64(60,parseFloat(Qt[11])||0,!0),nr.setUint8(68,parseFloat(Qt[13])||0),nr.setUint8(69,parseFloat(Qt[14])||0),Ws([rr],0)}Vt.T=!1},Dt).catch(Dt)}})(d)},(wt=Yn.getDeprecatedStatsInterval)!==null&&wt!==void 0?wt:201)),(Ot=(xt=d.K).requestVideoFrameCallback)===null||Ot===void 0||Ot.call(xt,d.sa)}function Im(d,ut){var wt=performance.now();if(wt>=d.$&&d.mediaType==="video"){(function(Tr,Sr){var Mr,gr,Er,_r=Tr.P.get("inbound-rtp");if(_r&&Tr.j)if(_r=_r.map(kr=>Sr.get(kr)).find(kr=>(kr==null?void 0:kr.kind)==="video"||(kr==null?void 0:kr.mediaType)==="video")){var cr=(_r=Om(Tr,Sr,_r)).decoderImplementation;if(cr!=null&&cr.indexOf){cr!==Tr.h.cc&&cr!=="unknown"&&(Tr.h.cc=cr,Tr.g.cc=cr);const kr=Tr.u.gpuDetail.indexOf("SwiftShader")!==-1;cr.indexOf("fallback")===-1&&cr!=="FFmpeg"&&!kr||Tr.h.zc!==-1||(Tr.h.zc=(Mr=_r.framesDecoded)!==null&&Mr!==void 0?Mr:Tr.l,function(){var Wr=To;if(Wr.h){const gn={clientEvent:{TS:es(Wr),eventtype:"SoftwareDecodeFallback"}};Wr.g&&Wr.g.postMessage(gn)}}(),Mr="Fallback to software decode at frame "+String(Tr.h.zc),ft.i("{5cea617}","{953d211}",String(Tr.h.zc)),Tr.g.U=!0,Hu(Tr.Ba,Mr))}(Mr=Tr.j.get(_r.id))?(Tr.h.bc.Zf++,(cr=_r.codecId)&&((cr=Sr.get(cr).mimeType.toUpperCase()).includes("H265")?Tr.N="H265":cr.includes("AV1")?Tr.N="AV1":cr.includes("H264")?Tr.N="H264":(ft.d("{5cea617}","{4b31535}",cr),Tr.N="UNKNOWN"),Tr.g.codec=Tr.N),function(kr,Wr,gn){var mn=Wr.packetsLost-gn.packetsLost;let On=100-mn/(Wr.packetsReceived-gn.packetsReceived+mn)*100;for((isNaN(On)||On===void 0)&&(On=0),0<(Wr=Wr.pliCount-gn.pliCount)&&mn&&(On=0),mn=0;mn<Wr+1;mn++)kr.networkLossScore=7*kr.networkLossScore/8+On/8}(Tr.L,_r,Mr),function(kr,Wr){if(Wr.frameWidth&&Wr.frameHeight&&(kr.streamingResolution={width:Wr.frameWidth,height:Wr.frameHeight}),Wr.framesDecoded){const gn=kr.R,mn=Wr.timestamp;gn!==mn&&(kr.fps=Math.floor((Wr.framesDecoded-kr.C)/(mn-gn)*1e3)),kr.C=Wr.framesDecoded,Wr.totalDecodeTime&&(kr.m.update(Wr.totalDecodeTime,Wr.framesDecoded),kr.zd=1e3*Wr.totalDecodeTime/Wr.framesDecoded)}Wr.framesReceived&&(kr.O=Wr.framesReceived,Wr.totalInterFrameDelay&&(kr.P=1e3*Wr.totalInterFrameDelay/(Wr.framesReceived-1))),Wr.framesDropped&&(kr.I=Wr.framesDropped),Wr.packetsLost&&(kr.N=Wr.packetsLost),Wr.pliCount&&(kr.s=Wr.pliCount),kr.R=Wr.timestamp}(Tr.g,_r),Tr.l=(gr=_r.framesDecoded)!==null&&gr!==void 0?gr:0,Tr.ta=(Er=_r.packetsReceived)!==null&&Er!==void 0?Er:0,async function(kr){const Wr={width:screen.width*window.devicePixelRatio,height:screen.height*window.devicePixelRatio},gn={width:screen.width,height:screen.height},mn=kr.l,On=kr.ua.m;var Wn=kr.oa;if((Wn=!(Wr.width===Wn.width&&Wr.height===Wn.height))||(Wn=kr.ja,Wn=!(gn.width===Wn.width&&gn.height===Wn.height)),Wn||On!==kr.ca){kr.oa=Wr,kr.ja=gn,Wn=await su(Fl),kr.ca=On;var sn=`Stream[0]: Client display[-1] resolution : {physical : ${Ol(Wr)}@${Wn}, logical : ${Ol(gn)}@${Wn}} at frame#${mn} topology: ${On}`;ft.i("{5cea617}","{810d0ec}",Ol(Wr),Wn,Ol(gn),Wn,mn,On),Hu(kr.Ba,sn)}}(Tr)):Tr.h.bc.Hf++}else Tr.h.bc.af++})(d,ut);var xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt=d.g,dr=d.Ba,ir=dr.K.paused,Xt=(Ot=(xt=dr.Ea)===null||xt===void 0?void 0:xt.paused)!==null&&Ot!==void 0&&Ot;ir={tf:ir,rf:Xt,yb:xt=(Dt=(Vt=dr.m)===null||Vt===void 0?void 0:Vt.yb())!==null&&Dt!==void 0&&Dt,kb:Vt=(Qt=(Ft=dr.m)===null||Ft===void 0?void 0:Ft.kb)!==null&&Qt!==void 0&&Qt,yf:Ft=dr.Da.getMicState(),cd:Qt=dr.s.cd(),keyboardLayout:Dt=dr.keyboardLayout,appLaunchMode:Ot=dr.appLaunchMode,qf:(nr=dr=(rr=dr.m)===null||rr===void 0?void 0:`${(dr=rr.h).g.rb?"local":"alt"} ${Dl(dr)?"locked":"unlocked"}`)!==null&&nr!==void 0?nr:""},Yt.g=ir,function(Tr,Sr){var Mr,gr=Tr.P.get("candidate-pair");if(gr=gr==null?void 0:gr.map(_r=>Sr.get(_r)).find(_r=>_r)){6<=Tr.s.length&&Tr.s.splice(0,1),Tr.s.push(gr);var Er=(Mr=Tr.j)===null||Mr===void 0?void 0:Mr.get(gr.id);Er&&function(_r,cr,kr){var Wr,gn,mn,On;let Wn=(Wr=cr.bytesReceived)!==null&&Wr!==void 0?Wr:0;Wr=(gn=kr.bytesReceived)!==null&&gn!==void 0?gn:0,(cr=(mn=cr.timestamp)!==null&&mn!==void 0?mn:0)!=(kr=(On=kr.timestamp)!==null&&On!==void 0?On:0)&&(_r.o=(Wn-Wr)/(125*(cr-kr)))}(Tr.g,gr,Er)}}(d,ut),d.M!==0&&hm(d.g,d.M===2),nr={avgGameFps:(lr=(Yt=d.g).avgGameFps)!==null&&lr!==void 0?lr:0,fps:Yt.fps,rtd:Yt.rtd,avgDecodeTime:1e3*$u(Yt.m),frameLoss:Yt.s-Yt.T,packetLoss:Yt.N,totalBandwidth:Yt.F,utilizedBandwidth:Yt.Ob,streamingResolution:Yt.streamingResolution,codec:Yt.codec,bitDepth:Yt.bitDepth},Yt.T=Yt.s,d.R.emit("StreamStatsUpdate",nr),d.j=ut,d.$=wt+1e3}for(const[Tr,Sr]of d.P.entries())for(var br of(lr=Tr,Yt=Sr))if((Yt=ut.get(br))&&lr==="inbound-rtp"){if(nr=d.o,(Yt=Om(d,ut,Yt)).kind==="audio")nr=Yt,ir=new ArrayBuffer(d1.size),Xt=new DataView(ir),Oo(nr.packetsReceived||0,Xt,0,!0),Oo(nr.bytesReceived||0,Xt,8,!0),Oo(nr.packetsLost||0,Xt,16,!0),Xt.setFloat64(24,nr.lastPacketReceivedTimestamp||0,!0),Xt.setFloat64(32,nr.jitter||0,!0),Xt.setFloat64(40,es(To),!0),Ws([ir],2),nr=new ArrayBuffer(f1.size),(ir=new DataView(nr)).setFloat64(0,Yt.audioLevel||0,!0),Oo(Yt.concealedSamples||0,ir,8,!0),Oo(Yt.concealmentEvents||0,ir,16,!0),Oo(Yt.insertedSamplesForDeceleration||0,ir,24,!0),ir.setFloat64(32,Yt.jitterBufferDelay||0,!0),Oo(Yt.jitterBufferEmittedCount||0,ir,40,!0),Oo(Yt.removedSamplesForAcceleration||0,ir,48,!0),Oo(Yt.silentConcealedSamples||0,ir,56,!0),ir.setFloat64(64,Yt.totalSamplesReceived||0,!0),ir.setFloat64(72,Yt.totalSamplesDuration||0,!0),ir.setFloat64(80,es(To),!0),Ws([nr],4);else if(Xt=(ir=Yt).packetsLost||0,Qt=dr=ir.framesDecoded||0,Dt=rr=ir.totalDecodeTime||0,Ot=xt=ir.pliCount||0,(Ft=Xt)>=(Vt=nr).o&&(Vt.C=Ft-Vt.o,Vt.o=Ft),Ot>=Vt.l&&(Vt.pliCount=Ot-Vt.l,Vt.l=Ot),Vt.framesDecoded=Qt-Vt.s,0<Vt.framesDecoded&&Dt>Vt.m&&(Vt.v=1e3*(Dt-Vt.m)/Vt.framesDecoded,Vt.s=Qt,Vt.m=Dt),Vt=new ArrayBuffer(u1.size),(Ft=new DataView(Vt)).setUint32(0,dr,!0),Ft.setUint32(4,ir.keyFramesDecoded||0,!0),Ft.setUint32(8,ir.nackCount||0,!0),Ft.setInt32(12,Xt,!0),Ft.setInt32(16,xt,!0),Oo(ir.bytesReceived||0,Ft,20,!0),Oo(ir.packetsReceived||0,Ft,28,!0),Ft.setFloat64(36,rr,!0),Ft.setFloat64(44,ir.totalInterFrameDelay||0,!0),Ft.setFloat64(52,ir.totalSquaredInterFrameDelay||0,!0),Ft.setFloat64(60,ir.totalAssemblyTime||0,!0),Ft.setUint32(68,ir.framesAssembledFromMultiplePackets||0,!0),Ft.setFloat64(72,es(To),!0),Ws([Vt],1),nr.sendVideoTrack(Yt),Yt.perFrameEntries){for(Yt=JSON.parse(Yt.perFrameEntries),ir=[],Xt=nr.h,dr=0;dr<Yt.length;dr++)Yt[dr].frameNumber>nr.h&&(rr=new ArrayBuffer(h1.size),(xt=new DataView(rr)).setUint32(0,Yt[dr].frameNumber,!0),xt.setFloat64(4,Yt[dr].decodeTime,!0),xt.setFloat64(12,Yt[dr].assemblyTime,!0),ir.push(rr)),Xt=Math.max(Xt,Yt[dr].frameNumber);nr.h=Xt,0<ir.length&&Ws(ir,6)}}(br=performance.memory)&&(ut=br.usedJSHeapSize,Yt=br.totalJSHeapSize,br=ut-d.ra,lr=Yt-d.qa,d.ra=ut,d.qa=Yt,0<=br&&0<=lr||(ut=To).h&&(br={garbageCollectionStats:{timestamp:es(ut),deltaUsedHeapSize:br,deltaTotalHeapSize:lr}},ut.g&&ut.g.postMessage(br))),ut=d.Ba,(br=To).h&&(lr={inputChannelStats:{timestamp:es(br),bufferedAmount:ut.Ja.bufferedAmount,maxSchedulingDelay:ut.s.maxSchedulingDelay}},br.g&&br.g.postMessage(lr)),ut.s.maxSchedulingDelay=0,wt>=d.na&&d.Z&&(ut=d.Z,br=new ArrayBuffer(15),(lr=new DataView(br)).setUint8(0,2),lr.setUint8(1,1),lr.setUint8(2,1),lr.setUint32(3,ut.Eg,!0),lr.setFloat64(7,ut.client,!0),Vm(d,br,"rtpmapping"),d.Z=void 0,d.na=wt+1e3),d.mediaType==="video"&&(K0(d.u)&&(ut=new ArrayBuffer(12),(br=new DataView(ut)).setUint8(0,1),br.setUint8(1,1),br.setUint16(2,d.o.C,!0),br.setUint16(4,Math.round(d.o.v),!0),br.setUint16(6,d.o.framesDecoded,!0),br.setUint16(8,d.o.pliCount,!0),br.setUint16(10,d.o.framesDropped,!0),Vm(d,ut,"clientperf")),ut=Gv(d.L),d.g.v=ut,br=Gv(d.L),d.R.emit("StreamingQuality",br),d.xa&&(ut=d.g,d.R.emit("StreamingStats",{fps:ut.fps,zd:ut.zd,avgDecodeTime:1e3*$u(ut.m),Rg:ut.F,Ob:ut.Ob,width:ut.streamingResolution.width,height:ut.streamingResolution.height})),(ut=To).h&&(br={sq:{latencyScore:br.latencyScore,bandwidthScore:br.bandwidthScore,qualityScore:br.qualityScore,networkLossScore:br.networkLossScore,timestamp:es(ut)}},ut.g&&ut.g.postMessage(br))),wt>=d.ka&&(ut=d.g,ft.i("{4155ac9}","{a02a36e}",ut.C,(1e3*$u(ut.m)).toFixed(2),ut.I,ut.H.toFixed(2),ut.s,ut.rtd,ut.o.toFixed(2),ut.Ob.toFixed(2)),d.ka=wt+5e3),wt=performance.now()-wt,(ut=To).h&&(ut.perf.GetStats+=wt),(ut=d.g).l.value+=wt,ut.l.count+=1,ut.l.max=Math.max(wt,ut.l.max),d.wa&&(d.mediaType=d.mediaType==="video"?"audio":"video")}function ju(d,ut,wt){d.G.za(ut,`Exception in ${wt} getStats`,"{5cea617}.ts",0,0,!0,"getStats")}function Pm(d){d.m&&(clearInterval(d.m),d.m=0),d.F&&(clearInterval(d.F),d.F=0),gm(d.o)}function r0(d,ut,wt=!1){d.g.M.style.display=ut?"block":"none",ut?(d.M=wt?2:1,hm(d.g,wt),d.$=performance.now()):d.M=0}function Om(d,ut,wt){return d.aa||(d=ut.get(wt.trackId))&&(wt=Object.assign(d,wt)),wt}function Vm(d,ut,wt){try{d.O.readyState==="open"&&d.O.send(ut)}catch(xt){ft.e("{5cea617}","{78e74c5}",xt),ju(d,xt,wt)}}function Nm(d){if(!(2>d.s.length)){var ut=d.s[0],wt=d.s[d.s.length-1];d=wt.requestsSent-ut.requestsSent+wt.consentRequestsSent-ut.consentRequestsSent;var xt=wt.responsesReceived-ut.responsesReceived;return ut=wt.packetsReceived-ut.packetsReceived,{Mf:isNaN(d)?-1:d,Nf:isNaN(xt)?-1:xt,Lf:isNaN(ut)?-1:ut}}}var p1=class{constructor(d,ut,wt,xt,Ot,Vt,Dt,Ft,Qt,rr){var nr,lr,Yt,dr,ir,Xt,br,Tr,Sr;this.pa=!0,this.l=this.ta=this.F=this.m=0,this.N="UNKNOWN",this.ga=!1,this.P=new Map,this.fa=this.rtd=this.jitter=this.W=0,this.mediaType="video",this.qa=this.ra=this.$=this.M=0,this.s=[],this.ja={width:0,height:0},this.oa={width:0,height:0},this.aa=this.T=this.I=!1,this.ca=this.ka=this.U=this.na=0,this.R=d,this.Ba=ut,this.K=wt,this.C=xt,this.Cc=(lr=(nr=Ot.video)===null||nr===void 0?void 0:nr[0].Cc)!==null&&lr!==void 0&&lr,this.maxBitrate=(dr=(Yt=Ot.video)===null||Yt===void 0?void 0:Yt[0].Dc)!==null&&dr!==void 0?dr:0,this.da=(Xt=(ir=Ot.video)===null||ir===void 0?void 0:ir[0].gd)!==null&&Xt!==void 0?Xt:0,this.bitDepth=(Tr=(br=Ot.video)===null||br===void 0?void 0:br[0].bitDepth)!==null&&Tr!==void 0?Tr:8,this.hdr=((Sr=Ot.video)===null||Sr===void 0?void 0:Sr[0].Xc)===1,this.G=Vt,this.u=Dt,this.ea=Ft,this.ua=Qt,this.H={ts:0,timingFrameInfo:"",targetDelayMs:0,minPlayoutDelayMs:0,currentDelayMs:0},this.L=new Wv(this.maxBitrate,this.da),this.g=new vm(wt,this.u,this.ea),this.g.bitDepth=this.bitDepth,this.g.hdr=this.hdr,pn&&(this.S=new class{constructor(Mr,gr){this.Z=gr,this.visible=!1,this.ec=[],this.M=!1,this.da=this.N=0,this.T={x:0,y:0},this.I=0,this.K=Mr,this.j=new class{constructor(mn){this.active=!1,this.m=.06,this.l=new DOMRect(0,0,0,0),this.g=[],this.h=[],this.K=mn,this.j=this.v.bind(this)}o(){return this.active}v(mn){if(this.g.length){if(!(this.h.length&&100>mn.timeStamp-this.h[this.h.length-1].Ub))for(this.h.push({Ub:mn.timeStamp,Ec:performance.now()});32<this.h.length;)this.h.shift()}else ft.w("{0c7ed7c}","{fe08a50}")}}(Mr),this.$=this.ga.bind(this),this.aa=this.fa.bind(this),this.ca=this.onmousemove.bind(this),gr=cu();var Er=e0("Latency Display Analysis Tool (LDAT)");this.H=Tm("Start"),this.h=Tm("Show hotkeys"),gr.style.bottom="0px",gr.style.left="0px",gr.style.margin="5px",this.h.style.border="1px solid white",this.h.style.fontSize="10px",this.h.style.padding="5px",this.h.style.position="absolute",this.h.style.right="0px",gr.appendChild(Er),gr.appendChild(this.H),gr.appendChild(this.h),Er=gr.appendChild;var _r=document.createElement("div"),cr=this.j.m;this.O=t0(cr,.01,.2,.01),this.S=document.createElement("span");var kr=As("Activation Level"),Wr=document.createElement("span");for(var gn of(this.S.innerHTML=(100*cr).toFixed()+"%",Wr.style.paddingRight="2px",Wr.title="% increase in luminance used to determine whether a flash occurred",Wr.innerHTML="<sup> i </sup>",_r.appendChild(kr),_r.appendChild(Wr),_r.appendChild(this.O),_r.appendChild(this.S),Er.call(gr,_r),Er=gr.appendChild,_r=document.createElement("div"),this.l=document.createElement("div"),this.ac=Mm(),this.s=t0(20,5,100,5),this.C=t0(1e3,500,5e3,100),cr=As("Autofire"),kr=As("# Shots"),Wr=As("Shot Delay"),this.U=document.createElement("span"),this.W=document.createElement("span"),this.U.innerHTML=this.s.value,this.W.innerHTML=this.C.value+" ms",this.s.id="shot-count-slider",this.l.appendChild(kr),this.l.appendChild(this.s),this.l.appendChild(this.U),this.l.appendChild(document.createElement("br")),this.l.appendChild(Wr),this.l.appendChild(this.C),this.l.appendChild(this.W),_r.appendChild(cr),_r.appendChild(this.ac),_r.appendChild(this.l),Er.call(gr,_r),gr.appendChild(function(mn){const On=document.createElement("div"),Wn=As("Loupe Position:"),sn=As("X"),In=As("Y");sn.style.paddingLeft="10px",In.style.paddingLeft="10px",sn.style.paddingRight="2px",In.style.paddingRight="2px";const $n=()=>{const Mn=document.createElement("input");return Mn.type="number",Mn.min="0",Mn.max="100",Mn.step="1",Mn.placeholder="Int",Mn.style.width="40px",Mn};return mn.Sb=$n(),mn.Tb=$n(),On.appendChild(Wn),On.appendChild(sn),On.appendChild(mn.Sb),On.appendChild(As("%")),On.appendChild(In),On.appendChild(mn.Tb),On.appendChild(As("%")),On}(this)),this.zb=Mm(),(Er=document.createElement("span")).title="Simulate mouse move event whenever a mouse click is detected.  Introduces two 300 ms delays between move events and requires a minimum shot delay of 1 sec.",Er.innerHTML="<sup> i </sup>",gr.appendChild(As("Move On Click")),gr.appendChild(Er),gr.appendChild(this.zb),this.L=gr,gr=cu(),Er=e0("Loupe"),this.m=document.createElement("div"),this.m.style.cursor="move",this.m.style.width="100%",this.m.style.height="100%",this.m.innerHTML="Click here to drag the loupe to the area of the screen where flashes will occur.  Then, press start.",gr.appendChild(Er),gr.appendChild(this.m),this.g=gr,(gr=cu()).style.position="relative",gr.style.backgroundColor="gray",gr.style.textAlign="center",gr.innerHTML="Warning: Must place loupe over video element to activate the LDAT.  Please reposition the loupe and then click start.",this.R=gr,gr=cu(),Er=e0("LDAT Hot Keys"),_r=document.createElement("ul"),gr.style.bottom="195px",gr.style.left="0px",gr.style.margin="5px",_r.style.listStyle="none",_r.style.paddingLeft="2px",_r.style.margin="5px",["Enter - Start/Stop","R - Reset","A - Turn On/Off Auto-Fire Mode","S - Save Log File","C - Center Loupe on Screen"]))(cr=document.createElement("li")).innerHTML=gn,_r.append(cr);gr.appendChild(Er),gr.appendChild(_r),this.v=gr,(gn=cu()).style.bottom="325px",gn.style.left="0px",gn.style.margin="5px",this.F=gn,Mr.insertAdjacentElement("afterend",this.L),this.L.insertAdjacentElement("afterend",this.g),this.g.insertAdjacentElement("afterend",this.R),this.L.insertAdjacentElement("beforebegin",this.v),this.v.insertAdjacentElement("beforebegin",this.F),this.j.s=this.ea.bind(this),qu(this,!1),this.zb.checked=!1,Jp(this,!0)}stop(){this.L.remove(),this.g.remove(),this.R.remove(),this.v.remove(),this.F.remove(),wm(this,!1),this.ec=[]}reset(){lu(this,!1),Xp(this.O,.06),Xp(this.s,20),Xp(this.C,1e3),qu(this,!1),this.zb.checked=!1,Jp(this,!0),Zp(this,!1),this.Sb.value="",this.Tb.value="",this.ec=[]}isVisible(){return this.visible}toggle(){lu(this,!this.o())}o(){return this.j.o()}Db(){return!this.isVisible()||this.o()}fa(Mr){if(this.zb.checked&&this.o()&&!Mr.gf){const gr=(cr,kr)=>{switch(cr){case 0:this.K.dispatchEvent(new PointerEvent("pointerup",kr)),this.K.dispatchEvent(new MouseEvent("mouseup",kr));break;case 1:cr=new PointerEvent("pointerdown",kr),kr=new MouseEvent("mousedown",kr),cr.gf=!0,kr.gf=!0,this.K.dispatchEvent(cr),this.K.dispatchEvent(kr);break;case 2:this.K.dispatchEvent(new PointerEvent("pointerrawupdate",kr)),this.K.dispatchEvent(new PointerEvent("pointermove",kr)),this.K.dispatchEvent(new MouseEvent("mousemove",kr))}},Er={button:2,isPrimary:!0,pointerId:1},_r={clientX:(Math.max(Mr.clientX,0)||this.T.x)+64,clientY:Math.max(Mr.clientY,0)||this.T.y,movementX:64,isPrimary:!0};gr(1,Er),window.setTimeout(()=>{gr(2,_r),window.setTimeout(()=>{_r.clientX-=64,_r.movementX=-64,gr(2,_r),window.setTimeout(()=>gr(0,Er),300)},300)},300)}}onmousemove(Mr){this.T={x:Mr.clientX,y:Mr.clientY}}P(){var Mr=this.K.getBoundingClientRect();const gr=this.g.getBoundingClientRect();if(this.K.style.paddingTop||this.K.style.paddingRight||this.K.style.paddingBottom||this.K.style.paddingLeft){const{paddingTop:Er,paddingRight:_r,paddingBottom:cr,paddingLeft:kr}=Rm(this.K);Mr.x+=kr,Mr.y+=Er,Mr.width-=kr+_r,Mr.height-=Er+cr}gr.x=(gr.x-Mr.x)/Mr.width,gr.y=(gr.y-Mr.y)/Mr.height,gr.width/=Mr.width,gr.height/=Mr.height,Mr=this.j,0>=gr.width||0>=gr.height?ft.e("{0c7ed7c}","{3e0eb8f}",gr.width,gr.height):Mr.l=gr}ga(){this.P()}ea(Mr){Am(this),this.ec.push(Mr);const gr=Em(Mr),Er=gr.total.toFixed(),_r=`Flash occurred at frame ${Mr.presentedFrames}. Latency: ${Er} ms.`;ft.i("{50c79eb}","{78905f8}",Mr.presentedFrames,Er),ft.d("{50c79eb}","{d3d4a0c}",Er,gr.pf.toFixed(),gr.Tf.toFixed(),gr.Xe.toFixed(),gr.decode.toFixed(),gr.Pf.toFixed()),this.F.innerHTML=_r,this.F.style.display="block",this.I=window.setTimeout(()=>{_m(this),this.I=0},5e3)}}(wt,Qt)),this.C=xt,function(Mr){Mr.O=Mr.C.createDataChannel("stats_channel",{ordered:!1,reliable:!1,maxRetransmits:0}),Mr.O.binaryType="arraybuffer",uu(Mr.Ba,Mr.O,{open:()=>{Mr.U=1},close:()=>{Pm(Mr),Mr.U=2}}),Mr.O.onmessage=gr=>{var Er=(gr=new DataView(gr.data)).getUint8(0);if(2<=Er){if(Mr.W=gr.getFloat64(1,!0)/1e6,Mr.jitter=1e3*gr.getFloat64(9,!0),Mr.rtd=gr.getFloat64(17,!0),Mr.g.H=Mr.jitter,Mr.g.rtd=Mr.rtd,3<=Er&&(Mr.fa=gr.getFloat64(25,!0),Mr.g.avgGameFps=Mr.fa,4<=Er)){Er=gr.getFloat32(33,!0);var _r=gr.getFloat32(37,!0),cr=gr.getFloat32(41,!0);let kr=gr.getFloat32(45,!0),Wr=gr.getFloat32(49,!0),gn=gr.getFloat32(53,!0),mn=gr.getFloat32(57,!0),On=gr.getFloat32(61,!0),Wn=gr.getFloat32(65,!0);gr=gr.getFloat32(69,!0),ft.d("{5cea617}","{9721183}",Er,_r,cr,kr,Wr,gn,mn,On,Wn,gr)}gr=Mr.L,Er=Mr.W,_r=Mr.g,(cr=Mr.W)&&_r.o<=cr&&(_r.Ob=_r.o/cr*100),_r.F=cr,cr=100,25<=_r.Ob&&(cr=(Er-gr.g)/(gr.maxBitrate-gr.g)*100),100<cr&&(cr=100),cr===void 0||isNaN(cr)||0>cr||(gr.bandwidthScore=15*gr.bandwidthScore/16+cr/16,gr.bandwidthScore=Math.min(gr.bandwidthScore,100)),gr=Mr.L,_r=0,250>(Er=Mr.rtd)&&((_r=100*(250-Er)/240)===void 0||isNaN(_r))&&(_r=0),gr.latencyScore=15*gr.latencyScore/16+_r/16,gr.latencyScore=Math.min(gr.latencyScore,100)}else ft.e("{5cea617}","{4f9f4b7}",Er)}}(this),this.xa=this.R.hasListener("StreamingStats"),this.o=new class{constructor(){this.j=this.framesDropped=this.l=this.pliCount=this.framesDecoded=this.m=this.s=this.o=this.v=this.C=0,this.g=[],this.h=-1}sendVideoTrack(Mr){const gr=Mr.framesDropped||0;gr>=this.j&&(this.framesDropped=gr-this.j,this.j=gr);const Er=new ArrayBuffer(44),_r=new DataView(Er);_r.setUint32(0,Mr.framesDecoded||0,!0),_r.setUint32(4,gr,!0),_r.setUint32(8,Mr.frameHeight||0,!0),_r.setUint32(12,Mr.frameWidth||0,!0),_r.setUint32(16,Mr.framesReceived||0,!0),_r.setFloat64(20,Mr.jitterBufferDelay||0,!0),Oo(Mr.jitterBufferEmittedCount||0,_r,28,!0),_r.setFloat64(36,es(To),!0),Ws([Er],3)}},this.h={bc:{af:0,Hf:0,Zf:0},cc:"",zc:-1},this.v={Ag:0,droppedVideoFrames:0,totalVideoFrames:0},this.va=wt,this.V=rr,this.sa=this.ya.bind(this),km(this)}ya(d,ut){var wt,xt,Ot,Vt,Dt,Ft=this.o,Qt=(Vt=ut.receiveTime)!==null&&Vt!==void 0?Vt:0;Vt=ut.presentationTime-Qt,Qt=1e3*((Dt=ut.processingDuration)!==null&&Dt!==void 0?Dt:0),Dt=(Dt=ut.presentationTime)!==void 0?Dt-To.j:0;const rr=new ArrayBuffer(12),nr=new DataView(rr);nr.setFloat64(0,Dt,!0),nr.setUint16(8,Math.min(100*Vt,65535),!0),nr.setUint16(10,Math.min(100*Qt,65535),!0),Ft.g.push(rr),Ft.g.length==120&&gm(Ft),(wt=this.S)!==null&&wt!==void 0&&wt.o()&&function(lr,Yt,dr){lr.g.push({presentedFrames:dr.presentedFrames,td:Yt,presentationTime:dr.presentationTime,receiveTime:dr.receiveTime,processingDuration:dr.processingDuration}),Yt=ym(lr,lr.l),function(ir,Xt,br,Tr,Sr){return new Promise((Mr,gr)=>{window.setTimeout(()=>{e:if(0>=Tr||0>=Sr)var Er=-1;else{var _r=new OffscreenCanvas(Tr,Sr).getContext("2d");if(_r){try{_r.drawImage(ir,Xt,br,Tr,Sr,0,0,Tr,Sr),Er=_r.getImageData(0,0,Tr,Sr).data}catch(kr){ft.e("{0c7ed7c}","{b16b792}",kr),Er=-1;break e}var cr=_r=0;for(let kr=0;kr<Er.length-3;kr+=4)_r+=.2126*Er[kr]+.7152*Er[kr+1]+.0722*Er[kr+2],cr++;Er=_r/cr/255}else ft.e("{0c7ed7c}","{b72639c}"),Er=-1}Er===-1&&gr(-1),Mr(Er)},0)})}(lr.K,Yt.x,Yt.y,Yt.width,Yt.height).then(ir=>{var Xt,br=dr.presentedFrames;if(lr.g.length){var Tr=lr.g[lr.g.length-1];if(br!==Tr.presentedFrames)ft.d("{0c7ed7c}","{06323ea}",br);else{for(Tr.fd=ir;32<lr.g.length;)lr.g.shift();if(lr.g.length!=1&&!((ir=lr.g[lr.g.length-2]).presentedFrames<br-2||ir.fd===void 0||ir.fd===-1)&&Tr.fd-ir.fd>lr.m){let Sr;ir=0;const Mr={presentedFrames:br,td:Tr.td,presentationTime:Tr.presentationTime,receiveTime:Tr.receiveTime,processingDuration:Tr.processingDuration,Ub:0,Ec:0};for(;lr.h.length&&lr.h[0].Ub<((Xt=Tr.receiveTime)!==null&&Xt!==void 0?Xt:Tr.presentationTime);)ir++,Sr=lr.h.shift();Sr&&(1<ir&&ft.d("{0c7ed7c}","{a4b8c55}",br,ir),Mr.Ub=Sr.Ub,Mr.Ec=Sr.Ec,lr.s&&lr.s(Mr))}}}})}(this.S.j,d,ut),this.Cc&&ut.rtpTimestamp&&ut.receiveTime&&(this.Z={Eg:ut.rtpTimestamp,client:ut.receiveTime-To.j}),this.m!=0&&((Ot=(xt=this.K).requestVideoFrameCallback)===null||Ot===void 0||Ot.call(xt,this.sa))}reset(){Pm(this),this.L=new Wv(this.maxBitrate,this.da),this.g=new vm(this.K,this.u,this.ea),this.j=void 0}stop(){var d;this.pa&&(this.pa=!1,this.m!=0&&(this.reset(),r0(this,!1)),(d=this.S)===null||d===void 0||d.stop(),Mo(this.G,"InboundVideoStats",this.h.cc,this.h.bc.Zf,this.h.bc.af,this.h.zc,this.h.bc.Hf))}toggleOnScreenStats(d,ut){r0(this,ut??this.M===0,d)}packetsReceived(){return this.ta}};function Uu(d){return d.protocol==="tcp"?"TCP":(d=d.address||d.relatedAddress)?d.endsWith(".local")?"MDNS":d.indexOf(":")!==-1?"IPV6":"IPV4":"UNKNOWN"}function Lm(d){var ut=(d=d.address||d.relatedAddress)==null?void 0:d.split(".");if((ut==null?void 0:ut.length)===4&&(d=parseInt(ut[0]),ut=parseInt(ut[1]),!isNaN(d)&&!isNaN(ut))){let wt="UNKNOWN";return d===10?wt="10/8":d===192&&ut===168?wt="192.168/16":d===172&&(240&ut)==16&&(wt="172.16/12"),wt!=="UNKNOWN"&&ft.d("{5cea617}","{343589d}",wt),wt}return ft.i("{5cea617}","{fa2d6b9}"),"UNKNOWN"}function i0(d,ut=!1){const wt=d.m+1;try{let xt;d.sessionId&&(xt="x-nv-sessionid."+d.sessionId);let Ot=d.url;ut&&(Ot+="&reconnect=1");let Vt=new WebSocket(Ot,xt);Vt.onopen=()=>{var Dt;if(d.h("{48fa30b}"+wt),Vt===d.g){(Dt=d.j)===null||Dt===void 0||Qm(Dt);for(const Ft of d.l)Ft.stats?Vt.send(Ft.stats):Vt.send(JSON.stringify(Ft));for(const Ft of d.s)$m(d,Ft);d.s=[]}},Vt.onclose=Dt=>{var Ft;d.h("{6406bff}"+wt),Vt===d.g&&((Ft=d.j)===null||Ft===void 0||Wm(Ft,{error:d.v,code:Dt.code,reason:Dt.reason,wasClean:Dt.wasClean}),Bm(d),d.v=!1)},Vt.onerror=()=>{d.h("{7605058}"+wt),Vt===d.g&&(d.v=!0)},Vt.onmessage=Dt=>{if(d.j)try{let Qt=JSON.parse(Dt.data);if(d.o||d.h("{523f5b9}"),Fm(d),!Qt.hb){if(Qt.ack!==void 0){var Ft=Qt.ack;for(let rr=d.l.length-1;0<=rr;rr--)d.l[rr].ackid<=Ft&&d.l.splice(rr,1)}if(Qt.ackid!==void 0){if(d.maxReceivedAckId<Qt.ackid&&(l0(d.j,Qt),d.maxReceivedAckId=Qt.ackid),d.g){let rr=JSON.stringify({ack:d.maxReceivedAckId});d.h("{903be10}"+rr),d.g.send(rr)}}else Qt.ack===void 0&&l0(d.j,Qt)}}catch(Qt){d.C("Error in local websocket message handling: "+Qt+' "'+Dt.data+'"')}},d.g=Vt}catch(xt){d.g=void 0,d.C("WebSocket creation exception: "+xt+" for socket "+d.m)}d.m=wt}function Dm(d){d.o!==0&&(self.clearTimeout(d.o),d.o=0)}function Bm(d){d.g&&(d.g.onclose=null,d.g.onerror=null,d.g.onmessage=null,d.g.onopen=null,d.g=void 0)}function Fm(d){Dm(d),d.o=self.setTimeout(()=>{var ut;d.h("{6c3505a}"+((ut=d.g)===null||ut===void 0?void 0:ut.readyState)+"{754f60b}"+d.m),d.g||i0(d,!0),Fm(d)},3e3)}function $m(d,ut){ut.ackid!==void 0&&ut.ackid!==void 0&&d.l.push(ut),d.g&&(ut.stats?d.g.send(ut.stats):d.g.send(JSON.stringify(ut)))}var v1=class{constructor(d,ut){this.sessionId=d,this.v=!1,this.l=[],this.s=[],this.maxReceivedAckId=this.o=0,this.url="",this.m=0,this.h=ut.info,this.C=ut.exception}initialize(d,ut,wt,xt=!1){this.url=d,this.maxReceivedAckId=ut,this.j=wt,i0(this,xt),this.h("{fcf6f89}"+this.m)}uninitialize(d){var ut;this.maxReceivedAckId=0,this.l=[],this.s=[],this.j=void 0,Dm(this),(ut=this.g)===null||ut===void 0||ut.close(d),Bm(this),this.h("{986b258}"+d+"{754f60b}"+this.m)}send(d){this.j&&(this.g||i0(this,!0),this.g&&this.g.readyState===WebSocket.OPEN?$m(this,d):this.s.push(d))}};function m1(d){switch(d){case"H264":return"h264";case"H265":return"hevc";case"AV1":return"av1";default:return"video"}}var g1=class{constructor(d,ut){this.g=d,this.h=ut,this.streams=[]}start(d){if(1&this.g.xd&&(d=d.getTransceivers().find(ut=>{var wt,xt;return((xt=(wt=ut.receiver)===null||wt===void 0?void 0:wt.track)===null||xt===void 0?void 0:xt.kind)==="video"}))){const ut={data:new DataView(new ArrayBuffer(209715200)),size:0,Pd:"video",lg:m1(this.h),sf:!1};(function(wt,xt,Ot){const{readable:Vt,writable:Dt}=xt.createEncodedStreams();xt=new TransformStream({start:()=>{ft.i("{d7392d2}","{b96b3ec}",Ot.Pd)},flush:()=>{},transform:(Ft,Qt)=>{if(!Ot.sf){const Yt=new Uint8Array(Ft.data);if(Ot.size+Yt.byteLength<=Ot.data.byteLength){var rr=Ot.data,nr=Ot.size,lr=Yt;const dr=lr.byteLength;for(let ir=0;ir<dr;++ir)rr.setUint8(nr+ir,lr[ir]);Ot.size+=Yt.byteLength}else Ot.sf=!0,ft.w("{d7392d2}","{f35b2f4}",Ot.size,Ot.Pd)}Qt.enqueue(Ft)}}),Vt.pipeThrough(xt).pipeTo(Dt),wt.streams.push(Ot)})(this,d.receiver,ut)}}};function qm(d){d.g&&(d.j=!d.j,d.g.style.display=d.j?"block":"none")}var y1=class{constructor(d,ut,wt,xt){this.l=d,this.K=ut,this.u=wt,this.G=xt,this.h={top:-1,left:-1,bottom:-1,right:-1},this.Xa=this.Ra=0,this.j=!1,this.m=0,pn&&((d=document.createElement("div")).style.display="none",d.style.position="absolute",d.style.color="white",d.style.backgroundColor="rgb(105, 105, 105, 0.7)",d.style.padding="2px",d.style.bottom="0px",d.style.left="0px",d.style.margin="5px",this.g=d,ut.insertAdjacentElement("afterend",this.g))}uninitialize(){this.g&&this.g.remove()}send(){var d,ut,wt;if(!(0>=this.K.videoHeight||0>=this.K.videoWidth)){var xt=j0(),Ot=function(Dt,Ft){let{width:Qt,height:rr}={width:screen.width,height:screen.height};var nr=()=>{let dr;switch(window.orientation!==void 0?dr=window.orientation:screen.orientation&&(dr=screen.orientation.angle),dr){case 90:case-90:case 270:return!1;default:return!0}};s(Dt.u)&&(Ft.top=Math.max(Ft.top,20),nr()||(nr=Qt,Qt=rr,rr=nr)),nr=(dr=>{let ir=dr.offsetTop,Xt=dr.offsetLeft;for(var br=dr.offsetParent;br;)ir+=br.offsetTop,Xt+=br.offsetLeft,br=br.offsetParent;br=dr.clientHeight;let Tr=dr.clientWidth;return Dt.u.os==="Android"&&(window.innerHeight>window.innerWidth&&dr.clientHeight<dr.clientWidth||window.innerHeight<window.innerWidth&&dr.clientHeight>dr.clientWidth)&&(ft.w("{48f82fd}","{c9d343e}"),br=dr.clientWidth,Tr=dr.clientHeight),{top:ir,left:Xt,bottom:Math.max(window.innerHeight-ir-br,0),right:Math.max(window.innerWidth-Xt-Tr,0)}})(Dt.K);const lr=Math.max(rr-window.innerHeight,0)/2,Yt=Math.max(Qt-window.innerWidth,0)/2;return{top:Math.max(Ft.top-lr-nr.top-Dt.Ra,0)/(Dt.K.clientHeight-2*Dt.Ra),left:Math.max(Ft.left-Yt-nr.left-Dt.Xa,0)/(Dt.K.clientWidth-2*Dt.Xa),bottom:Math.max(Ft.bottom-lr-nr.bottom-Dt.Ra,0)/(Dt.K.clientHeight-2*Dt.Ra),right:Math.max(Ft.right-Yt-nr.right-Dt.Xa,0)/(Dt.K.clientWidth-2*Dt.Xa)}}(this,xt);if(!function(Dt,Ft){const Qt=Object.keys(Dt),rr=Object.keys(Ft);if(Qt.length!==rr.length)return!1;for(const nr of Qt)if(Dt[nr]!==Ft[nr])return!1;return!0}(Ot,this.h)){var Vt=JSON.stringify(Ot,(Dt,Ft)=>Ft.toFixed?Number(Ft.toFixed(2)):Ft);ft.d("{48f82fd}","{054b8b0}",JSON.stringify(xt),Vt),(d=Yn.sendInsetValueUpdateEvents)!==null&&d!==void 0&&d&&2>this.m++&&(xt=(d=(Dt,Ft=1)=>{for(const Qt of Object.keys(Dt)){const rr=Math.round(Dt[Qt]*Ft);Dt[Qt]=isNaN(rr)?-1:rr}return Dt})(Object.assign({},xt)),d=d(Object.assign({},Ot),1e3),(ut=this.G)===null||ut===void 0||Mo(ut,"InsetValueUpdate","Original",xt.top,xt.left,xt.bottom,xt.right),(wt=this.G)===null||wt===void 0||Mo(wt,"InsetValueUpdate","Normalized",d.top,d.left,d.bottom,d.right)),this.h=Object.assign({},Ot);for(const Dt of Object.keys(Ot))Ot[Dt]=isNaN(Ot[Dt])?0:Ot[Dt];ut={messageType:"SAFE_ZONE",messageRecipient:"NvGridSvc:NGS",data:JSON.stringify({safeZoneData:{type:"InsetValueUpdate",rect:Ot}})},this.l.sendCustomMessage(ut),pn&&this.g&&(this.g.innerText=`Safe Zone: 
Top: `+(100*Math.max(this.h.top,0)).toFixed()+`%
Right: `+(100*Math.max(this.h.right,0)).toFixed()+`%
Bottom: `+(100*Math.max(this.h.bottom,0)).toFixed()+`%
Left: `+(100*Math.max(this.h.left,0)).toFixed()+"%")}}}};function ps(d,ut,wt){d.g.get(ut).push(wt)}function vs(d,ut,wt){(wt=(d=d.g.get(ut)).indexOf(wt))!==-1&&d.splice(wt,1)}function n0(d,ut){if(d.U&&a0(d,ut),d.h!==ut){d.h=ut;for(const wt of d.g.get(0))wt(ut)}}function jm(d,ut){if(d.C!==ut){d.C=ut;for(const wt of d.g.get(3))wt(ut)}}function Um(d,ut){if(d.s!==ut){d.s=ut;for(const wt of d.g.get(4))wt(ut)}}function Hm(d,ut){return d.T?.22>=ut.level:d.Z?.2>=ut.level:d.W?.1>=ut.level:.33>=ut.level}function o0(){var d,ut;return dp&&(d=Yn.enableComputePressure)!==null&&d!==void 0&&d&&((ut=globalThis.PressureObserver)===null||ut===void 0?void 0:ut.prototype)&&PressureObserver.knownSources instanceof Array&&PressureObserver.knownSources.includes("cpu")}function zm(d){switch(d){case"nominal":default:return 0;case"fair":return 1;case"serious":return 2;case"critical":return 3}}function a0(d,ut){if(d.v!==ut){d.v=ut;for(const wt of d.g.get(1))wt(ut)}}var b1=class{constructor(d){var ut,wt,xt,Ot;this.g=new Map,this.C=this.s=this.j=!1,this.o="nominal",this.U=d.deviceType==="PHONE"||d.deviceType==="TABLET",this.Z=_e(d),this.W=d.os==="iPadOS",this.T=ct(d),this.h=this.v=document.hasFocus(),this.m=0;const Vt=(wt=(ut=(d=window.zoneless)==null?void 0:d.windowAddEventListener)===null||ut===void 0?void 0:ut.bind(window))!==null&&wt!==void 0?wt:window.addEventListener.bind(window),Dt=(Ot=(xt=d==null?void 0:d.documentAddEventListener)===null||xt===void 0?void 0:xt.bind(document))!==null&&Ot!==void 0?Ot:document.addEventListener.bind(document);this.N=this.da.bind(this),this.I=this.aa.bind(this),this.O=this.F.bind(this),this.P=this.ea.bind(this),this.R=this.fa.bind(this),this.L=this.ca.bind(this),this.H=this.$.bind(this),this.M=this.S.bind(this),Vt("focus",this.N),Vt("blur",this.I),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(Ft=>Dt(Ft,this.O)),Dt("mouseenter",this.P),Dt("mouseleave",this.R),navigator.getBattery&&navigator.getBattery().then(Ft=>{jm(this,!Ft.charging),Um(this,Hm(this,Ft)),Ft.addEventListener("chargingchange",this.L),Ft.addEventListener("levelchange",this.H)}),window.screen.isExtended!==void 0&&(this.S(),window.screen.addEventListener("change",this.M)),o0()?(this.l=new PressureObserver(Ft=>{if(0<Ft.length){let Qt="nominal";for(const rr of Ft)zm(rr.state)>zm(Qt)&&(Qt=rr.state);if(Ft=Qt,this.o!=Ft){this.o=Ft;for(const rr of this.g.get(5))rr()}}}),this.l.observe("cpu")):ft.i("{0c4eeb2}","{c70b747}"),this.g.set(0,[]),this.g.set(2,[]),this.g.set(1,[]),this.g.set(3,[]),this.g.set(4,[]),this.g.set(5,[]),this.F()}uninitialize(){var d,ut,wt,xt,Ot,Vt,Dt;const Ft=window.zoneless,Qt=(ut=(d=Ft==null?void 0:Ft.windowRemoveEventListener)===null||d===void 0?void 0:d.bind(window))!==null&&ut!==void 0?ut:window.removeEventListener.bind(window),rr=(xt=(wt=Ft==null?void 0:Ft.documentRemoveEventListener)===null||wt===void 0?void 0:wt.bind(document))!==null&&xt!==void 0?xt:document.removeEventListener.bind(document);Qt("focus",this.N),Qt("blur",this.I),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(nr=>rr(nr,this.O)),rr("mouseenter",this.P),rr("mouseleave",this.R),navigator.getBattery&&navigator.getBattery().then(nr=>{nr.removeEventListener("chargingchange",this.L),nr.removeEventListener("levelchange",this.H)}),window.screen.isExtended!==void 0&&window.screen.removeEventListener("change",this.M),(d=(Ot=this.l)===null||Ot===void 0?void 0:Ot.takeRecords())==null||d.map(nr=>ft.i("{0c4eeb2}","{4f27ba0}",JSON.stringify(nr))),(Vt=this.l)===null||Vt===void 0||Vt.unobserve("cpu"),(Dt=this.l)===null||Dt===void 0||Dt.disconnect();for(const nr of this.g.values())nr.splice(0)}da(){n0(this,!0)}aa(){n0(this,!1)}F(){var d=window.document;if(d=!!(document.fullscreen||d.webkitIsFullScreen==1||d.mozFullScreen||d.msFullscreenElement),this.j!==d){this.j=d;for(const ut of this.g.get(2))ut(d)}}ea(){a0(this,!0)}fa(){a0(this,!1)}ca(){navigator.getBattery().then(d=>{jm(this,!d.charging)})}$(){navigator.getBattery().then(d=>{Um(this,Hm(this,d))})}S(){this.m=window.screen.isExtended?3:0,ft.i("{0c4eeb2}","{ee99c72}",this.m)}};function Km(d){return d.split(`
m=`).map((ut,wt)=>(0<wt?"m="+ut:ut).trim()+`\r
`)}function s0(d,ut){return function(wt){return wt.trim().split(`
`).map(xt=>xt.trim())}(d).filter(wt=>wt.indexOf(ut)===0)}function w1(d){return{algorithm:(d=d.substr(14).split(" "))[0].toLowerCase(),value:d[1].toUpperCase()}}function Gm(d,ut,wt,xt){let Ot=d.split(`\r
`),Vt=-1;for(let Dt=0;Dt<Ot.length;Dt++)if(Ot[Dt].indexOf("m=video")===0){Vt=Dt;break}if(Vt===-1)return ft.e("{93c7910}","{e0899ab}","video"),d;for(ft.d("{93c7910}","{5cc346f}","video",Vt),Vt++,d=";x-google-max-bitrate="+wt+";x-google-min-bitrate="+ut+";x-google-start-bitrate="+xt,ut=new Set;Vt<Ot.length&&Ot[Vt].indexOf("m=")!==0;)(wt=Ot[Vt]).indexOf("a=rtpmap:")===0&&0<wt.indexOf("H264/")?ut.add(wt.slice(9,wt.indexOf(" "))):wt.indexOf("a=fmtp:")===0&&ut.has(wt.slice(7,wt.indexOf(" ")))&&(Ot[Vt]+=d),Vt++;return Ot.join(`\r
`)}function Wm(d,ut){var wt,xt,Ot,Vt;if(ut.error&&d.C!==0){var Dt=d.G,Ft=(wt=ut.code)!==null&&wt!==void 0?wt:0;wt=(Ot=(xt=d.session)===null||xt===void 0?void 0:xt.signalConnectionInfo.ip)!==null&&Ot!==void 0?Ot:"",xt=(Vt=ut.reason)!==null&&Vt!==void 0?Vt:"",Vt=new yo({retryCount:d.ta,sessionId:Dt.sessionId,subSessionId:Dt.subSessionId,serverId:wt,url:d.M,overrideConfigType:xa.type,overrideConfigVersion:xa.version,disconnectionReason:xt,cleanDisconnection:vp(ut.wasClean),networkType:sr(Ss.getCurrentNetworkType()),statusCode:Ft?Ft.toString():"",cmsId:String(Dt.cmsId),moduleName:"RAGNAROK"}),Dt.h(Vt),d.ta++,3>=d.ta?(Xm(d),ey(d)):(window.clearTimeout(d.C),d.C=0,ft.i("{93c7910}","{8595cb4}"),yl(d,{code:3237093890}))}ut.wasClean||d.xa++}function l0(d,ut){var wt;ft.i("{93c7910}","{39024c3}",zl(JSON.stringify(ut))),ut.ackid&&d.maxReceivedAckId<ut.ackid&&(d.maxReceivedAckId=ut.ackid),ut.peer_info?ut.peer_info.name!==d.name&&d.id!==0||(d.id=ut.peer_info.id,ft.d("{93c7910}","{c5faf27}",d.id)):ut.peer_msg?async function(xt,Ot,Vt){var Dt;ft.d("{93c7910}","{9978507}",Ot);try{const Ft=JSON.parse(Vt);if(Ft.type==="offer"){xt.Sa=!0;let Qt,rr=Ft.sdp||"";ft.d("{93c7910}","{ca9a155}",zl(rr));const nr=await xt.pc;if(xt.W=function(Yt,dr){Yt=Yt.split(`\r
`);var ir=-1;if(!dr.length)return"H264";for(var Xt=0;Xt<Yt.length;Xt++)if(Yt[Xt].startsWith("m=video")){ir=Xt;break}if(ir===-1)return ft.e("{93c7910}","{3ab33e3}"),"H264";for(ir+=1,Xt=new Set;ir<Yt.length&&!Yt[ir].startsWith("m=");){var br=Yt[ir];br.indexOf("a=rtpmap:")===0&&((br=br.slice(br.indexOf(" ")+1,br.indexOf("/")))!=="H264"&&br!=="H265"&&br!=="AV1"||Xt.add(br)),ir++}for(const Tr of dr)if(Xt.has(Tr))return ft.i("{93c7910}","{304c3b1}",Tr),Tr;return ft.i("{93c7910}","{81357e4}"),"H264"}(rr,nr),Ft.nvstSdp){const Yt=(Dt=Ft.nvstServerOverrides)!==null&&Dt!==void 0?Dt:"";if(Qt=function(dr,ir,Xt){var br,Tr=dr.v,Sr=dr.u,Mr=dr.W;if(ir=function(co){let Xn,to,ho={origin:"",time:"",ob:new Map,media:[]},vo=new Map,ga=!1;const Bo=()=>{if(ga){if(!to||!Xn)return ft.e("{eb7c2d0}","{adc37a7}"),!1;ho.media.push({mediaType:to,Fc:Xn,attributes:vo}),Xn=to=void 0}else ho.ob=vo,ga=!0;return vo=new Map,!0};for(const Yo of co.split(/\r?\n/))if(!(2>Yo.length||Yo[1]!=="=")){var bo=Yo[0];if(co=Yo.substr(2),bo=="m"){if(!Bo())return;to=co.split(" ")[0]}else if(bo=="a"){if((bo=co.split(":",2)).length!==1){if(bo.length!==2)return void ft.e("{eb7c2d0}","{f6bdb84}",co);if(co=bo[0],bo=bo[1],co==="msid"){if(Xn!==void 0)return void ft.e("{eb7c2d0}","{dc7fbec}",bo);Xn=bo}else vo.set(co,bo)}}else if(bo=="t"){if(ga)return void ft.e("{eb7c2d0}","{14fc069}");ho.time=co}else if(bo=="o"){if(ga)return void ft.e("{eb7c2d0}","{eb0287a}");ho.origin=co}}if(Bo()){if(ho.time!==""&&ho.origin!=="")return ho;ft.e("{eb7c2d0}","{8e7e486}")}}(ir)){var gr,Er=ir;const co={origin:Er.origin,time:Er.time,ob:new Map,media:[]};co.ob.set("general.clientSupportsIntraRefresh",Sr.browser==="Safari"?"0":"1"),co.ob.set("general.clientCapture",(gr=Er.ob.get("general.clientCapture"))!==null&&gr!==void 0?gr:"0"),co.ob.set("runtime.serverTraceCapture","2"),gr=0;for(const Xn of Er.media){if(Er=new Map,Xn.mediaType==="video"&&gr<Tr.video.length){var _r=void 0,cr=Er,kr=Tr.video[gr],Wr=Sr,gn=Mr;cr.set("vqos.fec.rateDropWindow","10"),cr.set("vqos.fec.minRequiredFecPackets","2"),cr.set("vqos.drc.minRequiredBitrateCheckEnabled","1"),cr.set("video.dx9EnableNv12","1"),cr.set("vqos.qpg.enable","1"),cr.set("vqos.resControl.qp.qpg.featureSetting","7"),cr.set("bwe.useOwdCongestionControl","1"),cr.set("video.enableRtpNack","1"),cr.set("vqos.bw.txRxLag.minFeedbackTxDeltaMs","200"),cr.set("vqos.fec.repairMinPercent","5"),cr.set("vqos.fec.repairPercent","5"),cr.set("vqos.fec.repairMaxPercent","35"),cr.set("vqos.drc.bitrateIirFilterFactor","18"),cr.set("video.packetSize","1140"),cr.set("packetPacing.minNumPacketsPerGroup","15"),cr.set("vqos.bllFec.enable","0");var mn=void 0,On=yt(Wr)||ct(Wr);((mn=Yn.enableOOFQosEnhancements)!==null&&mn!==void 0?mn:On)&&(cr.set("vqos.adjustStreamingFpsDuringOutOfFocus","1"),cr.set("vqos.resControl.cpmRtc.ignoreOutOfFocusWindowState","1"),cr.set("vqos.resControl.perfHistory.rtcIgnoreOutOfFocusWindowState","1")),On=120<=kr.hc;var Wn=kr.hc===120,sn=kr.hc===240,In=4953600<=kr.Qb*kr.Pb,$n=pp(kr.Qb,kr.Pb)||In,Mn=2764800<=kr.Qb*kr.Pb;if((mn=K0(Wr))&&cr.set("vqos.resControl.cpmRtc.featureMask","3"),On&&(cr.set("bwe.iirFilterFactor","8"),cr.set("video.encoderFeatureSetting","47"),cr.set("video.encoderPreset","6"),cr.set("vqos.resControl.cpmRtc.badNwSkipFramesCount"," 600"),cr.set("vqos.resControl.cpmRtc.decodeTimeThresholdMs","9"),Wn?(cr.set("video.fbcDynamicFpsGrabTimeoutMs","6"),cr.set("vqos.resControl.cpmRtc.serverResolutionUpdateCoolDownCount","6000")):sn&&(cr.set("video.fbcDynamicFpsGrabTimeoutMs","18"),cr.set("vqos.resControl.cpmRtc.serverResolutionUpdateCoolDownCount","12000"),cr.set("video.enableNextCaptureMode","1"),cr.set("vqos.maxStreamFpsEstimate","240"),cr.set("video.videoSplitEncodeStripsPerFrame","3"),cr.set("video.updateSplitEncodeStateDynamically","1"))),($n||42e3<=kr.Dc)&&(Wn?cr.set("packetPacing.numGroups","3"):cr.set("packetPacing.numGroups","5"),cr.set("packetPacing.maxDelayUs","1000"),cr.set("packetPacing.minNumPacketsFrame","10"),cr.set("video.rtpNackQueueLength","1024"),cr.set("video.rtpNackQueueMaxPackets","512"),cr.set("video.rtpNackMaxPacketCount","25"),cr.set("vqos.drc.qpMaxResThresholdAdj","4"),cr.set("vqos.grc.qpMaxResThresholdAdj","4"),cr.set("vqos.drc.iirFilterFactor","100"),cr.set("vqos.qpg.enable","0"),cr.set("vqos.resControl.qp.qpg.featureSetting","0"),$n&&(cr.set("video.videoSplitEncodeStripsPerFrame","3"),cr.set("video.updateSplitEncodeStateDynamically","1")),In&&(cr.set("video.encoderPreset","6"),cr.set("vqos.drc.add1440pResLevelFor4kDrcTable","1"),cr.set("vqos.drc.minAdaptiveQpThreshold","40"),cr.set("vqos.grc.minAdaptiveQpThreshold","40"),cr.set("vqos.drc.upperQpThreshold","40"),cr.set("vqos.grc.upperQpThreshold","40"),cr.set("vqos.drc.qpMaxResThresholdAdj","5"),cr.set("vqos.grc.qpMaxResThresholdAdj","5"),cr.set("vqos.drc.iirFilterFactor","100"),cr.set("vqos.fec.repairMinPercent","0"),cr.set("vqos.qpg.enable","0"),cr.set("vqos.resControl.qp.qpg.featureSetting","0"))),gn==="AV1"){var lo,oo,Ro,Jo,us,Ir,vn,un,_n,Cn=$n=sn=Wn=void 0,Vn=void 0,qn=void 0,xn=cr;xn.set("vqos.qpg.enable","0"),xn.set("vqos.resControl.qp.qpg.featureSetting","0"),xn.set("vqos.drc.minQpHeadroom","20"),xn.set("vqos.drc.lowerQpThreshold","100"),xn.set("vqos.drc.upperQpThreshold","200"),xn.set("vqos.drc.minAdaptiveQpThreshold","180");let to=Number((_n=xn.get("vqos.drc.qpMaxResThresholdAdj"))!==null&&_n!==void 0?_n:"0");xn.set("vqos.drc.qpMaxResThresholdAdj",(5*to).toString()),xn.set("vqos.drc.qpCodecThresholdAdj","0"),xn.set("vqos.dfc.minQpHeadroom",(un=xn.get("vqos.drc.minQpHeadroom"))!==null&&un!==void 0?un:"0"),xn.set("vqos.dfc.qpLowerLimit",(vn=xn.get("vqos.drc.lowerQpThreshold"))!==null&&vn!==void 0?vn:"0"),xn.set("vqos.dfc.qpMaxUpperLimit",(Ir=xn.get("vqos.drc.upperQpThreshold"))!==null&&Ir!==void 0?Ir:"0"),xn.set("vqos.dfc.qpMinUpperLimit",(us=xn.get("vqos.drc.minAdaptiveQpThreshold"))!==null&&us!==void 0?us:"0"),xn.set("vqos.dfc.qpMaxResThresholdAdj",(Jo=xn.get("vqos.drc.qpMaxResThresholdAdj"))!==null&&Jo!==void 0?Jo:"0"),xn.set("vqos.dfc.qpCodecThresholdAdj",(Ro=xn.get("vqos.drc.qpCodecThresholdAdj"))!==null&&Ro!==void 0?Ro:"0"),In&&(xn.set("vqos.drc.minAdaptiveQpThreshold",(qn=xn.get("vqos.drc.upperQpThreshold"))!==null&&qn!==void 0?qn:"0"),xn.set("vqos.dfc.qpMinUpperLimit",(Vn=xn.get("vqos.dfc.qpMaxUpperLimit"))!==null&&Vn!==void 0?Vn:"0")),xn.set("vqos.grc.minQpHeadroom",(oo=xn.get("vqos.drc.minQpHeadroom"))!==null&&oo!==void 0?oo:"0"),xn.set("vqos.grc.lowerQpThreshold",(lo=xn.get("vqos.drc.lowerQpThreshold"))!==null&&lo!==void 0?lo:"0"),xn.set("vqos.grc.upperQpThreshold",(Cn=xn.get("vqos.drc.upperQpThreshold"))!==null&&Cn!==void 0?Cn:"0"),xn.set("vqos.grc.minAdaptiveQpThreshold",($n=xn.get("vqos.drc.minAdaptiveQpThreshold"))!==null&&$n!==void 0?$n:"0"),xn.set("vqos.grc.qpMaxResThresholdAdj",(sn=xn.get("vqos.drc.qpMaxResThresholdAdj"))!==null&&sn!==void 0?sn:"0"),xn.set("vqos.grc.qpCodecThresholdAdj",(Wn=xn.get("vqos.drc.qpCodecThresholdAdj"))!==null&&Wn!==void 0?Wn:"0"),Mn&&xn.set("video.videoSplitEncodeStripsPerFrame","23")}if(cr.set("video.clientViewportWd",kr.Qb.toString()),cr.set("video.clientViewportHt",kr.Pb.toString()),cr.set("video.maxFPS",kr.hc.toString()),cr.set("video.initialBitrateKbps",kr.Hd.toString()),cr.set("video.initialPeakBitrateKbps",kr.nf.toString()),cr.set("vqos.bw.maximumBitrateKbps",kr.Dc.toString()),cr.set("vqos.bw.minimumBitrateKbps",kr.gd.toString()),cr.set("video.maxNumReferenceFrames","4"),cr.set("video.mapRtpTimestampsToFrames",kr.Cc?"1":"0"),_e()&&(cr.set("vqos.drc.stepDownMinHeight","480"),jt(Wr,!1,14,5)||(Wr=kr.Qb/kr.Pb*100,cr.set("vqos.drc.stepDownResolutionAlignment","16"),cr.set("vqos.drc.stepDownTargetAspectRatioX100",Wr.toFixed(0)))),Wr=cr,Mn=kr.dynamicStreamingMode,(On||Mn===2)&&(Mn!==1&&(Wr.set("vqos.drc.enable","0"),Wr.set("vqos.dfc.enable","1")),Wr.set("vqos.dfc.decodeFpsAdjPercent","85"),Wr.set("vqos.dfc.targetDownCooldownMs","250"),Wr.set("vqos.dfc.dfcAlgoVersion","1"),Wr.set("vqos.dfc.minTargetFps","60"),mn&&Wr.set("vqos.cpm.flags","1"),Wr.set("vqos.resControl.dfc.useClientFpsPerf","0")),Mn!==void 0)switch(Mn){case 3:Fu(Wr,!0,On);break;case 2:Fu(Wr,!0,!0);break;case 1:Fu(Wr,!0,!1);break;case 0:Fu(Wr,!1,On)}mn=3,Wr=0,On=8,gn!=="H265"&&gn!=="AV1"||(On=(_r=(gn=cm)==null?void 0:gn.features.hdr)!==null&&_r!==void 0&&_r,_r=kr.Xc===1,On&&_r?(mn=4,Wr=kr.Xc,On=Math.max(10,Math.min((gn==null?void 0:gn.features.bitDepth)||10,kr.bitDepth))):On=Math.max(8,Math.min((gn==null?void 0:gn.features.sdrBitDepth)||8,kr.bitDepth))),cr.set("video.encoderCscMode",mn.toString()),cr.set("video.dynamicRangeMode",Wr.toString()),cr.set("video.bitDepth",On.toString()),gr++}Xn.mediaType==="application"&&(kr=cr=void 0,gn=Xn,(_r=Er).set("ri.partialReliableThresholdMs",(kr=gn.attributes.get("ri.partialReliableThresholdMs"))!==null&&kr!==void 0?kr:"0"),_r.set("ri.hidDeviceMask",(cr=gn.attributes.get("ri.hidDeviceMask"))!==null&&cr!==void 0?cr:"0")),co.media.push({mediaType:Xn.mediaType,Fc:Xn.Fc,attributes:Er})}var no,Ao;Sr=co,Yp(Mr=(Ao=(no=Yn.nvscClientConfigFields)===null||no===void 0?void 0:no.join(`
`))!==null&&Ao!==void 0?Ao:"",Sr,ir,"remoteconfig"),Yp(Xt,Sr,ir,"server"),Xt=pn&&!Yp(I0,Sr,ir,"client")?{error:3237093917}:function(Xn,to){let ho=!0;const vo=(Bo,bo)=>(Bo=Bo.get(bo))&&(Bo=parseInt(Bo),!Number.isNaN(Bo))?Bo:(ft.e("{eb7c2d0}","{0a60213}",bo),ho=!1,0);Xn.xd=vo(to.ob,"general.clientCapture");let ga=0;for(const Bo of to.media){if(Bo.mediaType==="video"&&ga<Xn.video.length){to=Xn.video[ga];const bo=Bo.attributes;to.Qb=vo(bo,"video.clientViewportWd"),to.Pb=vo(bo,"video.clientViewportHt"),to.hc=vo(bo,"video.maxFPS"),to.Hd=vo(bo,"video.initialBitrateKbps"),to.nf=vo(bo,"video.initialPeakBitrateKbps"),to.Dc=vo(bo,"vqos.bw.maximumBitrateKbps"),to.gd=vo(bo,"vqos.bw.minimumBitrateKbps"),to.Cc=0<vo(bo,"video.mapRtpTimestampsToFrames"),to.Xc=vo(bo,"video.dynamicRangeMode"),to.bitDepth=vo(bo,"video.bitDepth"),ga++}Bo.mediaType==="application"&&(Xn.Jc.Rd=vo(Bo.attributes,"ri.partialReliableThresholdMs"),Xn.Jc.lf=vo(Bo.attributes,"ri.hidDeviceMask"))}return ho}(Tr,Sr)?{config:Tr,Te:a1(Sr,ir)}:{error:3237093918}}else Xt={error:3237093911};if(Xt.config&&Xt.Te)return dr.v=Xt.config,Xt.Te;yl(dr,{code:(br=Xt.error)!==null&&br!==void 0?br:3237093910})}(xt,Ft.nvstSdp,Yt),!Qt)return}xt.aa=new g1(xt.v,xt.W),function(Yt,dr){var ir,Xt,br,Tr,Sr;ft.d("{93c7910}","{d79ed0a}",dr);try{let Mr={};Yn.enableStunServer&&(Mr.iceServers=[{urls:"stun:s1.stun.gamestream.nvidia.com:19308"}]),(ir=Yt.aa)===null||ir===void 0||ir.g.xd&&(Mr.encodedInsertableStreams=!0),ft.d("{93c7910}","{93106c2}",JSON.stringify(Mr)),Yt.ra=dr,Yt.g=new RTCPeerConnection(Mr);const gr=Er=>{var _r,cr;if(Yt.U){var kr=Yt.U;Mo(Yt.G,"IceStats","disconnected",0,kr.Mf,kr.Nf,kr.Lf),Yt.U=void 0}(kr=(_r=Yt.h)===null||_r===void 0?void 0:Nm(_r))&&Mo(Yt.G,"IceStats","failed",0,kr.Mf,kr.Nf,kr.Lf),Yt.l|=16,4&Yt.l?Yt.h&&Yt.h.packetsReceived()==0?Go(Yt,3237093900):Yt.h&&Yt.h.l==0?Go(Yt,3237093901):Go(Yt,Er?3237093906:3237093899):Go(Yt,(cr=d0(Yt))!==null&&cr!==void 0?cr:3237093894)};if(Yt.g.onconnectionstatechange=()=>{Yt.g?(ft.d("{93c7910}","{4ced155}",Yt.g.connectionState),Yt.g.connectionState==="failed"&&(f0(Yt)||gr(!1))):ft.e("{93c7910}","{648f784}")},Yt.g.oniceconnectionstatechange=()=>{var Er;if(Yt.g)switch(ft.d("{93c7910}","{3a3143a}",Yt.g.iceConnectionState),Yt.g.iceConnectionState){case"new":Yt.l|=1;break;case"checking":Yt.l|=2;break;case"connected":Yt.U=void 0,32&Yt.l&&(Yt.I.emit("StreamingEvent",{streamingState:{state:"reconnected"}}),Yt.$a++),Yt.l|=4;break;case"completed":Yt.U=void 0,Yt.l|=12;break;case"failed":gr(!0);break;case"disconnected":Yt.U=(Er=Yt.h)===null||Er===void 0?void 0:Nm(Er),4&Yt.l&&Yt.I.emit("StreamingEvent",{streamingState:{state:"reconnecting"}}),Yt.l|=32;break;case"closed":Yt.l|=64,32&Yt.l&&Go(Yt,3237093892)}else ft.e("{93c7910}","{648f784}")},Yt.g.ondatachannel=Er=>{ft.d("{93c7910}","{b364db9}",Er.channel.label),Er.channel.label=="control_channel"&&(uu(Yt,Er.channel,{errorCode:3237093898,open:()=>{var _r,cr,kr,Wr;Yt.S=Er.channel;for(const gn of Yt.ea)u0(Yt,gn);ft.d("{93c7910}","{038895c}",Yt.ea.length),Yt.ea=[],Hu(Yt,`NvRtcClient Browser name: ${Yt.u.browser}, Browser version: ${Yt.u.browserFullVer}`),rs(Yt,{etwPrintPair:{key:"GPU Detail",value:Yt.u.gpuDetail}}),ay(Yt,(cr=(_r=Yt.h)===null||_r===void 0?void 0:_r.l)!==null&&cr!==void 0?cr:0),ps(Yt.j,0,Yt.P),ps(Yt.j,1,Yt.P),ps(Yt.j,2,Yt.P),navigator.getBattery&&(sy(Yt,(Wr=(kr=Yt.h)===null||kr===void 0?void 0:kr.l)!==null&&Wr!==void 0?Wr:0),ps(Yt.j,4,Yt.fa),ps(Yt.j,3,Yt.fa)),o0()&&(Hu(Yt,"ClientGenericMapping: {ProcCpuUsage, TotalCpuUsage}"),ps(Yt.j,5,Yt.Pa)),window.requestAnimationFrame(Yt.Ka)}}),Er.channel.onmessage=_r=>{try{var cr=JSON.parse(_r.data);if(ft.d("{93c7910}","{9371373}"),cr.exitMessage)Go(Yt,function(gn){if(gn.stopData){var mn=function(On){if(2>On.length)return null;const Wn=atob(On);let sn=0;const In=()=>{const $n=256*Wn.charCodeAt(sn)+Wn.charCodeAt(sn+1);return sn+=2,$n};return In()==0?On.length<sn+2?null:In():null}(gn.stopData);if(mn||mn===0)return ft.d("{c00be32}","{921626d}",mn),xl(mn)}if(gn.nvstResult){switch(ft.d("{c00be32}","{f30bc33}",gn.nvstResult),mn=15868672,gn=gn.nvstResult){case 2147680256:case 2147680291:mn=15868704;break;case 2147680257:mn=15868705;break;case 2147680258:mn=3237093635;break;case 2147680259:mn=3237094152;break;case 2147680260:mn=15868706;break;case 2147680262:mn=15868707;break;case 2147680263:mn=15868708;break;case 2147680264:mn=15868736;break;case 2147680265:mn=15868737;break;case 2147680266:mn=15868738;break;case 2147680267:mn=15868739;break;case 2147680268:mn=15868741;break;case 2147680269:mn=15868740;break;case 2147680270:mn=15868742;break;case 2147680271:mn=3237094147;break;case 2147680275:mn=15868743;break;case 2147680277:mn=15868709;break;case 2147680278:mn=15868744;break;case 2147680279:mn=15868710;break;case 2147680280:mn=15868711;break;case 2147680281:mn=15868712;break;case 2147680283:mn=3237094155;break;case 2147680284:mn=3237094156;break;case 2147680285:mn=3237094157;break;case 2147680286:mn=3237093678;break;case 2147680287:mn=15868715;break;case 2147680288:mn=15868716;break;case 2147680289:mn=15868719;break;case 2147680300:mn=15868688;break;case 2147745794:case 2147745797:case 2147745803:mn=3237093892;break;case 2147745796:mn=3237094158;break;case 2147745804:mn=3237094146;break;case 2147745805:mn=3237094148;break;case 2147745806:mn=3237094149;break;case 2147745807:mn=3237094150;break;case 2148438786:mn=15868718;break;default:ft.d("{c00be32}","{094c45e}",$(gn))}return mn}return gn.code?(ft.d("{c00be32}","{6210ab0}",gn.code),xl(gn.code)):15868672}(cr.exitMessage));else if(cr.timerNotification){var kr=(_r=cr).timerNotification.code;switch(cr=0,ft.d("{c00be32}","{44bd2b6}",kr),kr){case 1:case 2:cr=1;break;case 4:cr=2;break;case 6:cr=3}var Wr=cr;Wr===0?ft.e("{93c7910}","{de37ac5}",_r.timerNotification.code):h0(Yt,Wr,_r.timerNotification.secondsLeft)}else cr.debugMessage?_s(Yt,cr.debugMessage.message):cr.customMessage?Yt.I.emit("CustomMessage",JSON.parse(cr.customMessage)):cr.videoStreamProgressEvent?Yt.videoStreamProgress=cr.videoStreamProgressEvent.videoStreamProgress:ft.d("{93c7910}","{d14e0fd}")}catch(gn){ft.e("{93c7910}","{a40734a}",gn),Yt.G.za(gn,"Error in control_channel message handling","{93c7910}.ts",0,0,!0)}})},ft.d("{93c7910}","{d9ffda2}"),ft.d("{93c7910}","{2bd4728}"),Yt.Ja=Yt.g.createDataChannel("input_channel_v1",{ordered:!0,reliable:!0}),Yt.Ja.binaryType="arraybuffer",uu(Yt,Yt.Ja,{errorCode:3237093896}),0<Yt.v.Jc.Rd){ft.d("{93c7910}","{ff9ae1e}");let Er={ordered:!1,maxPacketLifeTime:Yt.v.Jc.Rd};ft.d("{93c7910}","{9149fff}",JSON.stringify(Er)),Yt.Aa=Yt.g.createDataChannel("gamepad_channel_v1",Er),Yt.Aa.binaryType="arraybuffer",uu(Yt,Yt.Aa,{errorCode:3237093929})}if(Yt.T=Yt.g.createDataChannel("cursor_channel",{ordered:!0,reliable:!0}),Yt.T.binaryType="arraybuffer",uu(Yt,Yt.T,{errorCode:3237093897}),function(Er){var _r;return((_r=Yn.requireDS4TrackpadForAppIds)!==null&&_r!==void 0?_r:[]).indexOf(Er)!==-1}(Yt.session.appId)&&function(Er){Qs(Er),Er.na=!0,Vl(Er,!0)}(Yt.s),function(Er,_r){Qs(Er),Er.Da=Xu||!!(4&_r),Er.bb=Zu||!!(2&_r),Vl(Er,!0)}(Yt.s,Yt.v.Jc.lf),Yt.m=new e1(Yt,Yt.K,Yt.Ja,Yt.T,Yt.G,Yt.I,Yt.Nb,Yt.appLaunchMode===2,Yt.nc,Yt.s,Yt.u,Yt.Ba,Yt.ga,Yt.j,Yt.V,Yt.Aa,Yt.textInputElement),Yt.oa&&(Yt.setKeyboardLayout(Yt.keyboardLayout),Yt.oa=!1),pu){ft.d("{93c7910}","{9ae428b}");const Er={zoneName:Yt.session.zoneName,clientAppVersion:(Xt=Yt.clientAppVersion)!==null&&Xt!==void 0?Xt:"",appId:Yt.session.appId,Ud:(br=Yt.Ud)!==null&&br!==void 0?br:"",gpuType:Yt.session.gpuType,streamInfo:(Tr=Yt.session.streamInfo[0])!==null&&Tr!==void 0?Tr:{width:0,height:0,fps:0},clientLocale:Yt.session.clientLocale};Yt.h=new p1(Yt.I,Yt,Yt.K,Yt.g,Yt.v,Yt.G,Yt.u,Er,Yt.j,Yt.V)}Yt.g.addEventListener("icecandidate",Yt.Ua),Yt.g.onsignalingstatechange=()=>{ft.i("{93c7910}","{3236227}",Yt.g.signalingState)},Yt.g.onicecandidate=Er=>ny(Yt,Er),Yt.g.g=Er=>{ft.w("{93c7910}","{9871b05}",Er.port,Er.url,Er.errorCode,Er.Tg)},((Sr=Ln)!==null&&Sr!==void 0?Sr:!it(Yt.u))&&Yt.Da.initialize(Yt.g,Yt.I,Yt.K,Yt.Ea),Yt.g.ontrack=Er=>{var _r;const cr=Er.streams[0];ft.d("{93c7910}","{47359d4}",cr.id,Er.track.kind,Er.track.id,Er.streams.length,$(Yt.l));let kr={kind:Er.track.kind==="video"?"video":"audio",trackId:Er.track.id};Er.track.kind!=="audio"||cr.id!=="stream_id"&&cr.id!=="app_media_stream"&&cr.id!=="second_stream_id"&&cr.id!=="app_audio_stream"||(Yt.qa=Er.track.id,function(Wr,gn){(gn=function(mn){let On=null;return(mn=mn.getAudioTracks()).length&&(On=mn[0]),On}(gn))&&(gn.onunmute=()=>{Wr.Na=!1})}(Yt,cr),(_r=Yt.R)===null||_r===void 0||_r.initialize(new MediaStream(cr.getAudioTracks()))),(Er=Yt.o.find(Wr=>Wr.streamId===cr.id))?Er.tracks.push(kr):Yt.o.push({streamId:cr.id,tracks:[kr]}),p0(Yt)}}catch(Mr){ft.e("{93c7910}","{ff11182}",Mr),Yt.G.za(Mr,"Exception in creating peer connection","{93c7910}.ts",0,0,!0)}}(xt,Ot);let lr=Date.now();rr=function(Yt,dr){return dr.split(`\r
`).map(ir=>ir.startsWith("a=candidate:")?(Yt.na=!0,"a="+ly(Yt,ir.substr(2))):ir).join(`\r
`)}(xt,rr),rr=function(Yt,dr,ir,Xt){let br=Yt.split(`\r
`),Tr=-1;for(var Sr=0;Sr<br.length;Sr++)if(br[Sr].startsWith("m=video")){Tr=Sr;break}if(Tr===-1)return ft.e("{93c7910}","{3ab33e3}"),Yt;for(Tr++,Sr=Tr;Sr<br.length;Sr++)if(br[Sr].startsWith("a=imageattr"))return ft.d("{93c7910}","{b38bf22}"),Yt;for(Yt=new Set;Tr<br.length&&!br[Tr].startsWith("m=");)Sr=br[Tr],/a=rtpmap:.*H26[45]\//.test(Sr)?Yt.add(Sr.slice(9,Sr.indexOf(" "))):Sr.indexOf("a=fmtp:")===0&&(Sr=Sr.slice(7,Sr.indexOf(" ")),Yt.has(Sr)&&(Tr++,br.splice(Tr,0,`a=imageattr:${Sr} send [x=[960:${dr}],y=[540:${ir}],fps=[30:${Xt}]]`))),Tr++;return br.join(`\r
`)}(rr,xt.v.video[0].Qb,xt.v.video[0].Pb,xt.v.video[0].hc),ft.d("{93c7910}","{542f9d5}",zl(rr)),xt.g.setRemoteDescription({type:Ft.type,sdp:rr}).then(()=>{xt.wa=Date.now()-lr,function(dr){let ir=dr.g.getTransceivers();if(ir.length===0)ft.d("{93c7910}","{3399d9d}"),yl(dr,{code:3237093909});else{for(const Xt of ir)Xt.mid==="3"&&Xt.receiver.track.id!==dr.qa?(ft.i("{93c7910}","{981392f}"),Xt.receiver.track.enabled=!1):dr.$.push({trackId:Xt.receiver.track.id,kind:Xt.receiver.track.kind});ft.d("{93c7910}","{648ae93}",JSON.stringify(dr.$))}}(xt),ft.d("{93c7910}","{ab7b3af}",xt.wa),function(dr){for(const ir of dr.o)ir.streamId==="stream_id"&&dr.o.length===2?ir.streamId="app_video_stream":ir.streamId==="stream_id"?ir.streamId="app_media_stream":ir.streamId==="second_stream_id"&&(ir.streamId="app_audio_stream")}(xt);const Yt=function(dr){var ir=dr.o.find(br=>br.streamId==="app_media_stream");if(ir)zu(dr,ir,dr.K),ft.i("{93c7910}","{a5e354c}");else{ir=dr.o.find(br=>br.streamId==="app_video_stream");var Xt=dr.o.find(br=>br.streamId==="app_audio_stream");if(ir&&Xt){const br={streamId:"app_media_stream",tracks:ir.tracks.concat(Xt.tracks)};dr.o.splice(dr.o.indexOf(ir),1),dr.o.splice(dr.o.indexOf(Xt),1),dr.o.push(br),zu(dr,br,dr.K),ft.i("{93c7910}","{e2dc4ec}")}else if(ir)zu(dr,ir,dr.K),ft.i("{93c7910}","{07f3411}");else if(Xt){if(!dr.Ea)return 3237093937;zu(dr,Xt,dr.Ea),ft.i("{93c7910}","{243a50b}")}else ft.w("{93c7910}","{c3a2679}")}}(xt);Yt?Go(xt,Yt):(function(dr){var ir;(ir=dr.aa)===null||ir===void 0||ir.start(dr.g)}(xt),function(dr){try{if(dr.g&&dr.sendVideoTrack){const ir=dr.g.getTransceivers().find(Xt=>Xt.receiver.track.kind==="video");if(ir){let Xt="",br=ir.direction;ir.direction!=="sendrecv"&&(ir.direction="sendrecv",Xt=" ("+br+" direction is overridden by sendrecv)"),ir.sender.replaceTrack(dr.sendVideoTrack).then(()=>{ft.i("{93c7910}","{b54f651}",Xt)}).catch(Tr=>{ir.direction!==br&&(ir.direction=br),ft.w("{93c7910}","{d225159}",Tr)})}else ft.w("{93c7910}","{8272b59}")}}catch(ir){ft.w("{93c7910}","{66082ec}",ir)}}(xt),function(dr,ir){var Xt,br,Tr;const Sr=dr.g.getTransceivers().find(gr=>gr.receiver.track.kind==="video"&&(gr.direction==="recvonly"||gr.direction==="sendrecv"));if(Sr)if(RTCRtpReceiver.getCapabilities&&RTCRtpSender.getCapabilities&&Sr.setCodecPreferences){var Mr=[ir,"flexfec-03","rtx"];if(ir=(Xt=RTCRtpReceiver.getCapabilities("video"))===null||Xt===void 0?void 0:Xt.codecs,Xt=[],ir){for(const gr of Mr)(Mr=ir.filter(Er=>Er.mimeType==="video/"+gr))&&Xt.push.apply(Xt,Mr);try{Sr.setCodecPreferences(Xt)}catch(gr){ry(dr,"Failed to set codec preferences to receiver capabilities",gr);try{Xt=Xt.concat((Tr=(br=RTCRtpSender.getCapabilities("video"))===null||br===void 0?void 0:br.codecs)!==null&&Tr!==void 0?Tr:[]),Sr.setCodecPreferences(Xt)}catch(Er){ry(dr,"Failed to set codec preferences to sender and receiver capabilities",Er)}}}}else ft.w("{93c7910}","{274c489}")}(xt,xt.W),lr=Date.now(),xt.g.createAnswer().then(dr=>{var ir;xt.ua=Date.now()-lr,ft.d("{93c7910}","{2984003}",xt.ua);const Xt=xt.v.video[0].Dc.toString(),br=xt.v.video[0].gd.toString(),Tr=xt.v.video[0].Hd.toString();ft.d("{93c7910}","{b535c15}",zl(v0((ir=dr.sdp)!==null&&ir!==void 0?ir:""))),dr.sdp!==void 0&&(dr.sdp=function(Sr,Mr){let gr=Sr.split(`\r
`),Er=-1;for(let _r=0;_r<gr.length;_r++)if(gr[_r].indexOf("m=video")===0){Er=_r;break}if(Er===-1)return ft.e("{93c7910}","{e0899ab}","video"),Sr;for(ft.d("{93c7910}","{5cc346f}","video",Er),Er++;gr[Er].indexOf("i=")===0||gr[Er].indexOf("c=")===0;)Er++;return gr[Er].indexOf("b")===0?(ft.d("{93c7910}","{e77177e}",Er),gr[Er]="b=AS:"+Mr,gr.join(`\r
`)):(ft.d("{93c7910}","{3dfc348}",Er),(Sr=gr.slice(0,Er)).push("b=AS:"+Mr),(Sr=Sr.concat(gr.slice(Er,gr.length))).join(`\r
`))}(dr.sdp,Xt),window.chrome&&(dr.sdp=Gm(dr.sdp,br,Xt,Tr)),dr.sdp=function(Sr){var Mr=[];let gr=Sr.split(`\r
`);var Er="-1";let _r;for(let cr=0;cr<gr.length;cr++)gr[cr].indexOf("a=rtpmap:")===0?(_r=gr[cr].split(" ")[1],_r.indexOf("opus")===0&&(Er=gr[cr].split(" ")[0].slice(9),ft.i("{93c7910}","{c3dd71b}","audio",Er))):gr[cr].indexOf("a=fmtp:"+Er+" ")===0&&(Mr.push(cr),Er="-1");if(Mr.length===0)return ft.e("{93c7910}","{115f256}","audio"),Sr;Sr=-1,Er=[];for(const cr of Mr)Mr=gr[cr],ft.d("{93c7910}","{9bb0e6f}",Mr),Mr+=";stereo=1",ft.d("{93c7910}","{4f021eb}",Mr),(Er=Er.concat(gr.slice(Sr+1,cr))).push(Mr),Sr=cr;return(Er=Er.concat(gr.slice(Sr+1))).join(`\r
`)}(dr.sdp),(ir=function(Sr){Sr=Sr.split(`\r
`);for(var Mr=-1,gr=0;gr<Sr.length;gr++)if(Sr[gr].indexOf("m=audio")===0){Mr=gr;break}if(Mr===-1)ft.d("{93c7910}","{a939549}","audio");else{for(var Er=gr=void 0,_r=void 0,cr=void 0,kr=Mr+1;kr<Sr.length;kr++)if(Sr[kr].indexOf("a=rtpmap:")===0){var Wr=Sr[kr].split(" ")[1];Wr.indexOf("red")===0?(Er=Sr[kr].split(" ")[0].slice(9),cr=Wr.split("/")[2],ft.i("{93c7910}","{4e6ce55}","audio",Er,cr)):Wr.indexOf("multiopus")===0&&(gr=Sr[kr].split(" ")[0].slice(9),_r=Wr.split("/")[2],ft.i("{93c7910}","{53ebbb1}","audio",gr,_r))}else if(Sr[kr].indexOf("m=")===0){ft.d("{93c7910}","{9fc6964}",Sr[kr]);break}if(gr){for(Wr=[],kr=[],Mr+=1;Mr<Sr.length;Mr++)if(Sr[Mr].indexOf("a=rtpmap:"+Er)===0||Sr[Mr].indexOf("a=rtcp-fb:"+Er)===0||Sr[Mr].indexOf("a=fmtp:"+Er)===0)kr.push(Sr[Mr]);else if(Sr[Mr].indexOf("a=rtpmap:"+gr)===0||Sr[Mr].indexOf("a=rtcp-fb:"+gr)===0||Sr[Mr].indexOf("a=fmtp:"+gr)===0)Wr.push(Sr[Mr]);else if(Sr[Mr].indexOf("m=")===0){ft.d("{93c7910}","{9fc6964}",Sr[Mr]);break}return cr&&cr!==_r&&(Er=void 0,kr=[],ft.w("{93c7910}","{ad53601}",cr,_r)),{Cd:Er,ff:gr,Ig:kr.join(`\r
`),Hg:Wr.join(`\r
`)}}ft.d("{93c7910}","{cf4ee2d}","audio")}}(rr))&&(dr.sdp=function(Sr,Mr){let gr=Sr.split(`\r
`),Er=-1,_r=-1;for(var cr=0;cr<gr.length;cr++)if(gr[cr].indexOf("m=audio")===0){Er=cr;break}if(Er===-1)return ft.d("{93c7910}","{e0899ab}","audio"),Sr;cr=gr.slice(0,Er);let kr=gr[Er].split(" ");if(kr[3]!=="0")return ft.d("{93c7910}","{794b3c6}","audio",kr.join(" ")),Sr;for(Mr.Cd?(kr[3]=Mr.Cd,kr[4]=Mr.ff):kr[3]=Mr.ff,cr.push(kr.join(" ")),Sr=Er+1;Sr<gr.length;Sr++)if(gr[Sr].indexOf("m=")===0){_r=Sr;break}return _r===-1&&(_r=gr.length-1),cr=cr.concat(gr.slice(Er+1,_r)),Mr.Cd&&(cr=cr.concat(Mr.Ig.split(`\r
`))),(cr=(cr=cr.concat(Mr.Hg.split(`\r
`))).concat(gr.slice(_r))).join(`\r
`)}(dr.sdp,ir)),ft.d("{93c7910}","{1a048a7}",zl(v0(dr.sdp)))),lr=Date.now(),xt.g.setLocalDescription(dr).then(()=>{if(xt.va=Date.now()-lr,ft.d("{93c7910}","{de86c01}",xt.va),dr.sdp===void 0||window.chrome||(dr.sdp=Gm(dr.sdp,br,Xt,Tr)),dr.sdp!==void 0&&Qt){var Sr=Km(dr.sdp),Mr=Sr.shift(),gr=Sr[0],Er=Mr,_r=s0(gr+Er,"a=ice-ufrag:")[0];gr=s0(gr+Er,"a=ice-pwd:")[0],_r=_r.substr(12),gr=gr.substr(10),Sr=s0(Sr[0]+Mr,"a=fingerprint:").map(w1),(Mr=Km(Qt))[0]+="a=general.icePassword:"+gr+`\r
`,Mr[0]+="a=general.iceUserNameFragment:"+_r+`\r
`,Mr[0]+="a=general.dtlsFingerprint:"+Sr[0].value+`\r
`,Qt=Mr.join("")}oy(xt,Ot,{type:dr.type,sdp:dr.sdp,nvstSdp:Qt}),ft.i("{93c7910}","{bd70666}",JSON.stringify(xt.o)),p0(xt)}).catch(Sr=>{ft.e("{93c7910}","{ba2deaa}",Sr),Go(xt,3237093902)})}).catch(dr=>{ft.d("{93c7910}","{40c0f69}",dr)}))}).catch(Yt=>{ft.e("{93c7910}","{ec2853e}",Yt),Go(xt,3237093902)})}else if(Ft.candidate){ft.d("{93c7910}","{cf4c103}");let Qt=ly(xt,Ft.candidate);ft.d("{93c7910}","{43e80e0}",Qt),xt.g.addIceCandidate({sdpMLineIndex:Ft.sdpMLineIndex,sdpMid:Ft.sdpMid,candidate:Qt}).then(()=>{ft.d("{93c7910}","{db0ae14}"),xt.na=!0}).catch(rr=>{ft.e("{93c7910}","{62f207e}",rr),jo(xt.G,"AddCandidateFailed",rr==null?void 0:rr.name,rr==null?void 0:rr.message)}),ft.d("{93c7910}","{9454009}")}}catch(Ft){Vt==="BYE"?Go(xt,15868672):(ft.e("{93c7910}","{93367fc}",Ft),xt.G.za(Ft,"Invalid handlePeerMessage Response","{93c7910}.ts",0,0,!0))}}(d,ut.peer_msg.from,ut.peer_msg.msg):ut.error&&(ut.error==="peerRemoved"?(d.F!==0?(ut=(wt=d0(d))!==null&&wt!==void 0?wt:3237094161,ft.w("{93c7910}","{cbb35d3}")):ut=3237094159,Go(d,ut)):Go(d,3237094160))}function Qm(d){d.C!==0&&(window.clearTimeout(d.C),d.C=0,d.bb=Date.now()-d.cb),d.H||d.F!==0||function(ut){ut.F=window.setTimeout(()=>{var wt;ut.F=0,ft.i("{93c7910}","{d22df91}"),Go(ut,(wt=d0(ut))!==null&&wt!==void 0?wt:3237093895)},3e4),ut.Bb=Date.now()}(d)}function Ym(d,ut){var wt,xt=To;xt.h&&(xt.perf.DCSend+=ut),(wt=d.h)===null||wt===void 0||((d=wt.g).j.value+=ut,d.j.count+=1,d.j.max=Math.max(ut,d.j.max))}function c0(d){if($l(d))return d.h.S}function _s(d,ut){d.da.innerHTML=ut,d.da.style.display="block",d.N&&clearTimeout(d.N),d.N=window.setTimeout(()=>{d.da.style.display="none"},1e3)}function uu(d,ut,wt){const xt=ut.label;let Ot=!1;ut.onopen=()=>{var Vt;ft.d("{93c7910}","{8e9ee5d}",xt),(Vt=wt.open)===null||Vt===void 0||Vt.call(wt),wt.errorCode&&p0(d)},ut.onclosing=()=>{ft.d("{93c7910}","{d0c8ae7}",xt),Ot=!0},ut.onclose=()=>{var Vt;ft.d("{93c7910}","{a3c9826}",xt),(Vt=wt.close)===null||Vt===void 0||Vt.call(wt),wt.errorCode&&f0(d)},ut.onerror=Vt=>{if(ft.e("{93c7910}","{fcd64bb}",xt),Ot&&wt.errorCode)f0(d)||Go(d,15867907);else{var Dt=ut.bufferedAmount;Vt=Vt==null?void 0:Vt.error,d.Z||jo(d.G,"ChannelError",xt,Vt==null?void 0:Vt.name,Vt==null?void 0:Vt.message,Dt==null?void 0:Dt.toString()),ft.e("{93c7910}","{db7ae96}",xt,Vt==null?void 0:Vt.name,Vt==null?void 0:Vt.message),wt.errorCode&&Go(d,wt.errorCode)}}}function Hu(d,ut){rs(d,{etwPrint:ut})}function Jm(){ft.d("{93c7910}","{440d709}",To.j,performance.timeOrigin)}function Xm(d){var ut=1;for(let wt=1;10>wt;wt++)ut*=10;ut=(ut=""+Math.floor(Math.random()*ut)).padEnd(10,"0"),d.name="peer-"+ut,ft.d("{93c7910}","{f2b789d}",d.name),d.M=d.L+"/sign_in?peer_id="+d.name+"&version=2",d.signalingUrlQueryParameters&&(d.M+="&"+d.signalingUrlQueryParameters),ft.d("{93c7910}","{05b8afd}",d.M)}function yl(d,ut){var wt,xt,Ot,Vt;d.H||(d.lb=Date.now()-d.Bb,ut===void 0?ep||((Vt=d.O)===null||Vt===void 0||Vt.uninitialize(4001),d.O=void 0,To.startWebSocket(d.M,d.maxReceivedAckId,d,!0),vu&&iy(d)):function(Dt){var Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt;const br=_r=>{var cr,kr;return((cr=_r==null?void 0:_r.get("TCP"))!==null&&cr!==void 0?cr:0)+((kr=_r==null?void 0:_r.get("IPV6"))!==null&&kr!==void 0?kr:0)};var Tr=(_r,cr)=>{let kr=0;if(cr){_r=`${_r} local candidates:`;for(const[Wr,gn]of cr)kr+=gn,_r+=` ${cr=Wr}: ${gn}`;ft.i("{93c7910}","{0b0c6f9}",_r)}return kr};const Sr=(Ft=Dt.h)===null||Ft===void 0?void 0:function(_r){let cr=new xm;if(!_r.j)return cr;for(const kr of _r.j.values())kr.type==="local-candidate"&&(_r=Uu(kr),cr.set(_r,cr.get(_r)+1));return cr}(Ft);Ft=Tr("event",Dt.ca);const Mr=Tr("stats",Sr);Tr=Ft-Dt.Ta;let gr="";const Er=(Qt=Dt.g)===null||Qt===void 0?void 0:Qt.getReceivers().find(_r=>_r.track.kind==="video"&&_r.track.enabled);(Qt=(Yt=(lr=(nr=(rr=Er==null?void 0:Er.Yg)===null||rr===void 0?void 0:rr.Ug)===null||nr===void 0?void 0:nr.getSelectedCandidatePair)===null||lr===void 0?void 0:lr.call(nr))===null||Yt===void 0?void 0:Yt.local)&&(gr=`category: ${Uu(Qt)}, type: ${Qt.type}`),Mo(Dt.G,"LocalCandidatesCategories",gr,Ft,Ft-br(Dt.ca),Mr,Mr-br(Sr)),rr=(ir=(dr=Dt.h)===null||dr===void 0?void 0:function(_r){let cr=new Set;if(!_r.j)return cr;for(const kr of _r.j.values())kr.type==="local-candidate"&&Uu(_r=kr)==="IPV4"&&(_r=Lm(_r))!=="UNKNOWN"&&cr.add(_r);return cr}(dr))!==null&&ir!==void 0?ir:new Set,Mo(Dt.G,"LocalCandidateRanges",`${(Xt=Dt.g)===null||Xt===void 0?void 0:Xt.iceGatheringState}`,Tr,rr==null?void 0:rr.size,Dt.ka.size,new Set([...rr,...Dt.ka]).size)}(d),d.H=!0,d.F!==0&&(window.clearTimeout(d.F),d.F=0),ut={sessionId:d.session.sessionId,subSessionId:d.session.subSessionId,streams:d.o,streamInfo:d.session.streamInfo,error:ut,zoneName:d.session.zoneName,zoneAddress:d.session.zoneAddress,gpuType:d.session.gpuType,isResume:(wt=d.isResume)!==null&&wt!==void 0&&wt,bitDepth:(Ot=(xt=d.h)===null||xt===void 0?void 0:xt.bitDepth)!==null&&Ot!==void 0?Ot:8},d.Ba.Gc(ut),d.ga.send())}function u0(d,ut){var wt;try{if(((wt=d.S)===null||wt===void 0?void 0:wt.readyState)==="open"){let xt=performance.now();d.S.send(JSON.stringify(ut)),Ym(d,performance.now()-xt)}else ft.w("{93c7910}","{593db1b}")}catch(xt){ft.e("{93c7910}","{a585a6e}",xt),d.G.za(xt,"sendControlMessage exception","{93c7910}.ts",0,0,!0)}}function Zm(d){d.m&&(d.m.uninitialize(),d.m=void 0)}function _g(d){var ut;(ut=d.h)===null||ut===void 0||ut.stop()}function d0(d){var ut;const wt=ty(d);let xt;switch(d.videoStreamProgress){case 0:case 2:break;case 3:xt=3237093922;break;case 5:xt=3237093923;break;case 7:xt=3237093924;break;default:xt=3237093925}if((ut=d.h)===null||ut===void 0)var Ot=void 0;else e:{if(ut.j){var Vt=Ot=0,Dt=0,Ft=0;for(const Qt of ut.j.values())Qt.type==="candidate-pair"&&(Ot+=(ut=Qt).requestsSent+ut.consentRequestsSent,Vt+=ut.responsesReceived,ut.Vg&&Dt++,ut.state==="succeeded"&&Ft++);if(ft.i("{5cea617}","{47c0ce7}",Ot,Vt),0<Ot&&Vt===0){Ot=3237093926;break e}if(!Dt){Ot=3237093927;break e}if(!Ft){Ot=3237093928;break e}}Ot=void 0}return d.id?d.Sa?wt!==15859712?xt=wt:d.na?d.Qa?Ot?xt=Ot:4&d.l&&(Ps(d.Ja)==="connecting"?xt=3237093919:Ps(d.T)==="connecting"?xt=3237093920:Ps(d.S)==="connecting"?xt=3237093921:d.Aa&&Ps(d.Aa)==="connecting"&&(xt=3237093936)):xt=3237093903:xt=3237093904:xt=3237093913:xt=3237093912,xt}function Go(d,ut){var wt;if(!d.Z){if(d.Z=!0,Zm(d),_g(d),d.H){let xt={sessionId:d.session.sessionId,subSessionId:d.session.subSessionId,error:{code:ut},zoneName:d.session.zoneName,zoneAddress:d.session.zoneAddress};jo(d.G,"SignalingState",$(ut),(wt=d.g)===null||wt===void 0?void 0:wt.signalingState),ft.i("{93c7910}","{89d3ea6}",d.g.signalingState),d.Ba.Cf(xt)}else yl(d,{code:ut});ft.e("{93c7910}","{573fb24}",$(ut))}}function ey(d){d.O=new v1(d.session.sessionId,{info:d.vc.bind(d),exception:d.uc.bind(d)}),d.O.initialize(d.M,d.maxReceivedAckId,d)}function ty(d){const ut=d.o.flatMap(wt=>wt.tracks);for(const wt of d.$)if(!ut.find(xt=>xt.trackId===wt.trackId))return wt.kind==="audio"?3237093914:3237093905;return ft.d("{93c7910}","{4fef10b}"),ut.length>d.$.length&&ft.w("{93c7910}","{7861bb3}"),15859712}function f0(d){let ut=!1;return window.chrome&&d.g.signalingState==="closed"&&(ut=!0,Go(d,15867908)),ut}function zu(d,ut,wt){d=d.g.getTransceivers().map(xt=>xt.receiver.track),d=new MediaStream(d.filter(xt=>ut.tracks.find(Ot=>Ot.trackId===xt.id))),wt.srcObject=d}function ry(d,ut,wt){ft.w("{93c7910}","{4d3c418}",ut,wt),d.G.za(wt,ut,"{93c7910}.ts",0,0,!0)}function iy(d){var ut={stats:{from:d.id,to:d.ra}},wt=To;wt.h=!1,ut={startStats:{statsHeader:ut}},wt.g&&(ft.d("{1f5ec29}","{6897d5e}"),wt.g.postMessage(ut)),d.pa=!0}function rs(d,ut){Ps(d.S)==="connecting"?d.ea.push(ut):u0(d,ut)}function h0(d,ut,wt){var xt;ut===2&&((xt=d.m)===null||xt===void 0||Bp(xt,!0)),ft.d("{93c7910}","{5ba6173}",ut,wt),d.I.emit("StreamingEvent",{streamingWarnings:{code:ut,secondsLeft:wt}})}function ny(d,ut,wt){ut.candidate?(wt||(wt=Uu(ut.candidate),d.ca.set(wt,d.ca.get(wt)+1),wt==="IPV4"&&(wt=Lm(ut.candidate))!=="UNKNOWN"&&d.ka.add(wt)),ut.candidate.protocol==="tcp"?ft.d("{93c7910}","{6f19d1e}"):(ft.d("{93c7910}","{ac052fa}",ut.candidate.port,ut.candidate.protocol),oy(d,d.ra,{sdpMLineIndex:ut.candidate.sdpMLineIndex,sdpMid:ut.candidate.sdpMid,candidate:ut.candidate.candidate}),d.Qa=!0)):ft.d("{93c7910}","{a759d16}")}function oy(d,ut,wt){const xt=JSON.stringify(wt);wt={peer_msg:{from:d.id,to:ut,msg:xt},ackid:d.ya.g++},ft.d("{93c7910}","{7ecb902}",ut,xt.length,zl(v0(JSON.stringify(wt)))),d.O?d.O.send(wt):(d=To).g&&d.g.postMessage({send:wt})}function ay(d,ut){let wt=0;d.j.h&&(wt|=2),d.j.v&&(wt|=1),d.j.j&&(wt|=16);const xt={windowState:{streamIndex:0,frameNumber:ut,windowStateFlags:wt}};ft.i("{93c7910}","{ca317d5}",wt.toString(16),ut),rs(d,xt)}function sy(d,ut){let wt=0;d.j.s&&(wt|=4),d.j.C&&(wt|=1);const xt={systemState:{streamIndex:0,frameNumber:ut,systemStateFlags:wt}};ft.i("{93c7910}","{455ccc0}",wt.toString(16),ut),rs(d,xt)}function p0(d){0<d.$.length&&Ps(d.S)!=="connecting"&&Ps(d.T)!=="connecting"&&Ps(d.Ja)!=="connecting"&&(!d.Aa||Ps(d.Aa)!=="connecting")&&ty(d)===15859712&&yl(d)}function ly(d,ut){return ft.d("{93c7910}","{2dd62a2}"),(d=d.session.mediaConnectionInfo.find(wt=>wt.usage===2||wt.usage===17))?((ut=ut.split(" "))[4]=d.ip,ut[5]=""+d.port,ut=ut.join(" "),ft.d("{93c7910}","{1fbcd88}",ut),ut):(ft.d("{93c7910}","{aee7283}"),ut)}function $l(d){return!(!d.h||d.h.m==0)}function cy(d){var ut;(ut=d.h)===null||ut===void 0||ut.m!=0&&(ut.reset(),r0(ut,!1))}function uy(d){var ut;(ut=d.h)===null||ut===void 0||ut.m!=0||km(ut)}function Ul(d){return d.h?d.h.l:0}function Hl(d){var ut;let wt=(ut=d.h)===null||ut===void 0?void 0:ut.N;return wt!==void 0&&wt!=="UNKNOWN"||(wt=d.W),wt}var dy=class{constructor(d,ut,wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt,br,Tr,Sr){var Mr,gr;let Er;this.signalingUrlQueryParameters=Sr,this.name="",this.id=0,this.v={video:[],xd:0,Jc:{Rd:0,lf:0}},this.ra=-1,this.H=this.Z=!1,this.F=this.N=this.l=0,this.pa=!1,this.C=this.xa=0,this.na=this.Qa=this.Sa=!1,this.Na=!0,this.stutterIndicator=this.perfIndicator=!1,this.sa=0,this.$=[],this.o=[],this.M="",this.ta=0,this.ya=new class{constructor(){this.g=1}},this.cb=this.ua=this.va=this.wa=0,this.Bb=Date.now(),this.$a=this.lb=this.bb=0,this.oa=!1,this.keyboardLayout="",this.videoStreamProgress=this.maxReceivedAckId=0,this.ea=[],this.qa="",this.P=this.tc.bind(this),this.fa=this.sc.bind(this),this.Pa=this.rc.bind(this),this.Ta=0,this.ca=new xm,this.Ua=this.qc.bind(this),this.ka=new Set,this.W="UNKNOWN",this.u=Qt,this.K=ut,this.Ea=wt,this.Da=xt,this.I=d,ft.d("{93c7910}","{e1ca54d}",JSON.stringify(rr)),rr.finalizedStreamingFeatures||ft.w("{93c7910}","{6f17ef5}"),this.session=rr,Pl?(Er=Pl,ft.d("{93c7910}","{55e5b30}",Er)):nr!=null&&nr.maxBitrateKbps&&(Er=nr==null?void 0:nr.maxBitrateKbps,ft.d("{93c7910}","{965049f}",Er)),br===void 0&&(nr==null?void 0:nr.drc)!==void 0&&(br=nr.drc?3:0);for(const kr of rr.streamInfo){if(Er!=null)var _r=Er;else wt=Bu(kr.width,kr.height,kr.fps)[0],ft.d("{93c7910}","{aff4184}",wt),_r=wt;xt=(wt=this.v.video).push,Sr=void 0;var cr=_r;_r=rr.finalizedStreamingFeatures,cr=Math.max(4e3,cr);const Wr=Math.max(4e3,Math.round(cr/4));cr={Qb:kr.width,Pb:kr.height,hc:kr.fps,dynamicStreamingMode:br,Dc:cr,Hd:Wr,nf:Wr,Cc:!0,gd:4e3,Xc:s1((Sr=kr.sdrHdrMode)!==null&&Sr!==void 0?Sr:0),bitDepth:Uy(_r)},xt.call(wt,cr)}if(this.pc=dm((Mr=this.session.streamInfo[0])!==null&&Mr!==void 0?Mr:{width:0,height:0,fps:0},this.u),async function(){let kr=2;var Wr="minptime=10;useinbandfec=1;channel_mapping=0,4,1,2,3,5;num_streams=4;coupled_streams=2";const gn=Q0(6,`v=0
o=- 0 3 IN IP4 127.0.0.1
s=-
t=0 0
a=fingerprint:sha-256 A7:24:72:CA:6E:02:55:39:BA:66:DF:6E:CC:4C:D8:B0:1A:BF:1A:56:65:7D:F4:03:AD:7E:77:43:2A:29:EC:93
m=audio 9 UDP/TLS/RTP/SAVPF 100 101
c=IN IP4 0.0.0.0
a=rtcp-mux
a=sendonly
a=mid:audio
a=setup:actpass
a=ice-ufrag:ETEn
a=ice-pwd:OtSK0WpNtpUjkY4+86js7Z/l\r
a=rtpmap:100 multiopus/48000/6\r
a=fmtp:100 `+Wr+`\r
a=rtpmap:101 opus/48000/2
a=fmtp:101 minptime=10;useinbandfec=1
`,Wr);Wr=Q0(8,`v=0
o=- 0 3 IN IP4 127.0.0.1
s=-
t=0 0
a=fingerprint:sha-256 A7:24:72:CA:6E:02:55:39:BA:66:DF:6E:CC:4C:D8:B0:1A:BF:1A:56:65:7D:F4:03:AD:7E:77:43:2A:29:EC:93
m=audio 9 UDP/TLS/RTP/SAVPF 100 101
c=IN IP4 0.0.0.0
a=rtcp-mux
a=sendonly
a=mid:audio
a=setup:actpass
a=ice-ufrag:ETEn
a=ice-pwd:OtSK0WpNtpUjkY4+86js7Z/l\r
a=rtpmap:100 multiopus/48000/8\r
a=fmtp:100 `+(Wr="minptime=10;useinbandfec=1;channel_mapping=0,6,1,2,3,4,5,7;num_streams=5;coupled_streams=3")+`\r
a=rtpmap:101 opus/48000/2
a=fmtp:101 minptime=10;useinbandfec=1
`,Wr),await Promise.all([gn,Wr]).then(mn=>{kr=Math.max(Number(mn[0]),Number(mn[1]))}),ft.i("{d988e7f}","{dc7ee29}",kr)}(),this.G=Ft,Ft=rr.appId,(br=Yn.disableUnadjustedMovementForAppIds)&&br.indexOf(Ft)!==-1?(ft.i("{d988e7f}","{265cfdc}",Ft),Ft=!1):Ft=xo,this.Nb={unadjustedMovement:Ft,...Ot},this.Ba=d,this.nc=Vt,this.s=Dt,this.R=lr,this.textInputElement=Yt,this.appLaunchMode=rr.appLaunchMode,this.clientAppVersion=dr,this.isResume=ir,this.Ud=Xt,Tr){for(const kr of Tr)if(kr.track instanceof MediaStreamTrack&&kr.track.kind==="video"){this.sendVideoTrack=kr.track;break}}this.sendVideoTrack=(gr=this.sendVideoTrack)!==null&&gr!==void 0?gr:nr==null?void 0:nr.sendVideoTrack,d=(d=this.session.signalConnectionInfo.protocol).replace("http","ws"),this.L=d+"://"+this.session.signalConnectionInfo.ip+":"+this.session.signalConnectionInfo.port,(d=this.session.signalConnectionInfo.resourcePath)&&(this.L+=(d.charAt(0)==="/"?"":"/")+d,this.L.charAt(this.L.length-1)==="/"&&(this.L=this.L.slice(0,-1))),To.initialize(this.session.sessionId,this.G,this.ya),this.ga=new y1(this,ut,this.u,this.G),this.j=new b1(Qt),(ut=document.createElement("div")).style.position="absolute",ut.style.zIndex="300",ut.style.left="0",ut.style.top="0",ut.style.width="100%",ut.style.display="none",ut.style.fontSize="3em",ut.style.color="white",ut.style.backgroundColor="gray",ut.style.textAlign="center",this.K.insertAdjacentElement("afterend",ut),this.da=ut,this.ab={$b:32768,ic:256,jc:255,mb:this.ja.bind(this)},this.Va={$b:16384,ic:512,jc:65280,mb:this.Cb.bind(this)},this.Oa={$b:16384,ic:512,jc:255,mb:this.Qc.bind(this)},this.Za={$b:8192,ic:256,jc:255,mb:this.toggleOnScreenStats.bind(this)},this.V={vd:0,Ue:0,Sc:0,ld:0,nd:0,md:0,Wd:0,hd:0,Rc:0,jd:0},this.Ka=this.oc.bind(this)}start(){(function(d){Xm(d);let ut=1e4;Yn.signInTimeout&&Yn.signInTimeout!==0&&(ut=Yn.signInTimeout,ft.i("{93c7910}","{4f2f101}",ut)),d.C=window.setTimeout(()=>d.signInTimeout(),ut),d.cb=Date.now(),ey(d)})(this),To.j=performance.now(),Jm(),pn&&(this.s.v.push(this.ab),this.s.v.push(this.Va),this.s.v.push(this.Oa),this.s.v.push(this.Za))}stop(d){var ut,wt,xt,Ot;Mo(this.G,"StreamTimersAndReconnects",$(d),0,this.bb,this.lb,this.$a);const Vt=Dt=>{ft.i("{93c7910}","{a848987}",Dt),Mo(this.G,"PeerAPIDurationsAndMic",$(d),this.ua,this.wa,this.va,Dt)};zp().then(Dt=>{Vt(Dt)}),yl(this,{code:d,description:"Session stopped before stream connected"}),this.N&&(clearTimeout(this.N),this.N=0),this.da.remove(),this.Z=!0;try{u0(this,{exitMessage:{code:Wl(d)}})}catch(Dt){ft.e("{93c7910}","{d337883}",Dt)}Zm(this),this.Ja&&this.Ja.close(),(ut=this.Aa)===null||ut===void 0||ut.close(),_g(this),(wt=this.g)===null||wt===void 0||wt.removeEventListener("icecandidate",this.Ua),this.g&&this.g.close(),function(Dt){var Ft;if(!((Ft=Dt.aa)===null||Ft===void 0)){for(const rr of Ft.streams){var Qt=new Date().toISOString();Qt=`ragnarok-${rr.Pd}-${Qt}.${rr.lg}`,mp([new DataView(rr.data.buffer,0,rr.size)],Qt,"text/plain")&&ft.i("{d7392d2}","{4b3378a}",Qt)}Ft.streams=[]}Dt.aa=void 0}(this),this.F!==0&&(window.clearTimeout(this.F),this.F=0),this.C!==0&&(window.clearTimeout(this.C),this.C=0),B0(),(xt=this.O)===null||xt===void 0||xt.uninitialize(),To.stopWebSocket(),Jm(),function(){var Dt,Ft=To;Ft.v||(Dt=Ft.G)===null||Dt===void 0||jo(Dt,"Worker Thread Creation Failed"),Ft.G=void 0,Ft.s=void 0}(),this.qa&&this.Na&&(ft.e("{93c7910}","{283a180}"),jo(this.G,"Audio track muted")),0<this.xa&&Mo(this.G,"WebSocketClose","",0,this.xa,0,0),(Ot=this.R)===null||Ot===void 0||Ot.uninitialize(),this.ga.uninitialize(),vs(this.j,0,this.P),vs(this.j,1,this.P),vs(this.j,2,this.P),vs(this.j,4,this.fa),vs(this.j,3,this.fa),o0()&&vs(this.j,5,this.Pa),this.j.uninitialize(),Cu(this.s,this.ab),Cu(this.s,this.Va),Cu(this.s,this.Oa),Cu(this.s,this.Za),this.K.srcObject=null,this.Ea&&(this.Ea.srcObject=null)}signInTimeout(){this.C=0,ft.i("{93c7910}","{6d6b337}"),yl(this,{code:3237093907})}vc(d){ft.i("{8ba4138}","{0b0c6f9}",d)}uc(d){this.G.za(void 0,d,"{8ba4138}.ts",0,0,!0),ft.e("{8ba4138}","{0b0c6f9}",d)}setUpstreamMedia(){return Promise.resolve(!1)}unsetUpstreamMedia(){return Promise.resolve(!1)}stopUpstreamMedia(){return Promise.resolve(!1)}qc(d){ft.d("{93c7910}","{4742d5e}"),d.candidate&&this.Ta++,!window.chrome&&this.g&&this.g.canTrickleIceCandidates&&this.g.onicecandidate&&ny(this,d,!0)}oc(){var d,ut;(d=this.h)===null||d===void 0||function(wt){var xt=To;if(xt.h){if(xt.perf.RAFTS!=0){var Ot={perf:xt.perf};xt.g&&xt.g.postMessage(Ot),D0(xt)}xt.perf.RAFTS=es(xt)}if(!tp){if(xt=window.performance.now(),(Ot=wt.va).getVideoPlaybackQuality){var Vt=Ot.getVideoPlaybackQuality();Ot={Ad:Vt.totalVideoFrames,bf:Vt.droppedVideoFrames}}else Ot=Ot.webkitDecodedFrameCount!==void 0?{Ad:Ot.webkitDecodedFrameCount,bf:(Vt=Ot.webkitDroppedFrameCount)!==null&&Vt!==void 0?Vt:0}:void 0;var Dt=Ot;if(Dt){const Ft=Dt.bf;Vt=Ft-wt.v.droppedVideoFrames,Ot=Dt.Ad-wt.v.totalVideoFrames,wt.v.droppedVideoFrames=Ft,wt.v.totalVideoFrames=Dt.Ad,Vt==1?wt.V.Wd++:1<Vt&&(wt.V.hd+=Vt),(Dt=To).h&&(Dt.perf.FrameInfo=Math.min(Ot,15)<<4|Math.min(Vt,15))}wt.v.Ag=xt}}(d),window.setTimeout(()=>{var wt,xt;if(this.Z||window.requestAnimationFrame(this.Ka),!((wt=this.m)===null||wt===void 0)){var Ot=wt.h;Ot.I===0&&No(Ot.l),Il&&mu&&wt.l.ra()}(xt=this.h)===null||xt===void 0||tp||((wt=window.performance.now())>xt.V.vd+1e4?(xt.V.vd!==0&&ft.i("{5cea617}","{5fa9066}",xt.V.Sc,xt.V.ld,xt.V.nd,xt.V.md,xt.v.totalVideoFrames-xt.V.Ue,xt.V.Wd,xt.V.hd,xt.V.Rc,xt.V.jd),xt.V.vd=wt,xt.V.Ue=xt.v.totalVideoFrames,xt.V.Sc=1,xt.V.ld=0,xt.V.nd=0,xt.V.md=0,xt.V.Wd=0,xt.V.hd=0,xt.V.Rc=0,xt.V.jd=0):xt.V.Sc+=1)}),(ut=this.m)===null||ut===void 0||function(wt){if(wt.h.Vc){wt.h.Vc=!1;var xt=wt.g.sb,Ot=wt.g.tb;if(wt.cursorType===0)if(wt.Z&&wt.g.rb){var Vt=Iv(wt.h.wb/wt.g.cursor.scale);wt.h.bd&&(wt.h.bd=!1,Pv(wt,Vt));const Dt=wt.g.cursor,Ft=wt.h.wb;Vt/=Ft,xt=(xt*wt.J.ma-Dt.Ha*Vt)*Ft,Ot=(Ot*wt.J.ma-Dt.Ia*Vt)*Ft,wt.ca||(xt=Math.round(xt),Ot=Math.round(Ot)),wt.j.style.transform="translate("+xt/Ft+"px, "+Ot/Ft+"px)",wt.h.od||(wt.h.od=!0,wt.j.style.visibility="visible")}else Ov(wt)}}(ut.h)}toggleOnScreenStats(d=!1,ut){pn&&($l(this)?this.h.toggleOnScreenStats(d,ut):_s(this,"Stats is OFF. Please enable by ctrl+alt+F5/F6"))}ja(){var d;if(!((d=this.h)===null||d===void 0)){var ut=To;if(ut.h){const wt={qosMarker:es(ut)};ut.g&&ut.g.postMessage(wt)}d.g.S++,(ut=d.g).M.innerText=pm(ut,d.M===2)}_s(this,"User marker added")}toggleUserInput(d,ut){this.m?this.m.toggleUserInput(d,ut):ft.e("{93c7910}","{5a0e299}",d)}getVirtualGamepadHandler(){var d;return(d=this.m)===null||d===void 0?void 0:d.getVirtualGamepadHandler()}toggleStutterIndicator(d){this.stutterIndicator=d??!this.stutterIndicator,rs(this,{stutterIndicator:{on:this.stutterIndicator}})}Cb(){this.sa^=1,rs(this,{riDeviceOverlay:{bitmap:this.sa}})}Qc(){var d;(d=this.m)===null||d===void 0||d.Mc()}sendTextInput(d){var ut;(ut=this.m)===null||ut===void 0||ut.sendTextInput(d)}setVirtualKeyboardState(d){var ut;(ut=this.m)===null||ut===void 0||ut.setVirtualKeyboardState(d)}setVideoTransforms(d,ut,wt){var xt;if(!((xt=this.m)===null||xt===void 0)){const Ot=window.visualViewport;Ot&&(xt.J.Pc=Ot.height),Zs(xt,d,ut,wt)}}sendCustomMessage(d){rs(this,d={customMessage:JSON.stringify(d)})}setStreamingMaxBitrate(d,ut,wt){wt||(rs(this,{setMaxBitrate:{streamIndex:d,maxBitrate:ut}}),ft.d("{93c7910}","{6bbc1a2}",ut))}setDrcDfcState(d,ut,wt){wt||(rs(this,{setDrcState:{streamIndex:d,state:!!(1&ut)}}),rs(this,{setDfcState:{streamIndex:d,state:!!(2&ut)}}),ft.d("{93c7910}","{0ed76f3}",ut))}sendKeyEvent(d){var ut;(ut=this.m)===null||ut===void 0||ut.sendKeyEvent(d)}setKeyboardLayout(d){this.keyboardLayout=d,this.m?(this.sendCustomMessage({messageType:"kbLayout",messageRecipient:"KBLayoutChange",data:d}),this.m.setKeyboardLayout(d)):this.oa=!0}tc(){$l(this)?ay(this,this.h.l):ft.w("{93c7910}","{76bcede}")}sc(){$l(this)?sy(this,this.h.l):ft.w("{93c7910}","{20ab5a1}")}rc(){if($l(this)){var d=this.h.l;const ut=function(xt){switch(xt.o){case"nominal":return 20;case"fair":return 70;case"serious":return 85;case"critical":return 100}}(this.j),wt={cpuUsage:{streamIndex:0,frameNumber:d,procCpuUsage:0,totalCpuUsage:ut}};ft.i("{93c7910}","{9bb3298}",ut.toString(),d),rs(this,wt)}else ft.w("{93c7910}","{7b1f129}")}};function Ps(d){var ut;return(ut=d==null?void 0:d.readyState)!==null&&ut!==void 0?ut:"connecting"}function zl(d){return d.replace(/((ice-pwd|ufrag)(:|\s))((?!(\\|\s)).)*/g,"$1***")}function v0(d){const ut=RegExp('(candidate:[^"\\r\\n\\\\]+)(\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\b)',"g");let wt="";for(;wt!==d;)wt=d,d=d.replace(ut,"$1***");return d}function Kl(d){ft.i("{0f7a7d0}","{206f492}"),d.m&&(window.clearInterval(d.m),d.m=0)}function fy(d){Kl(d),d.g=new Date().getTime(),d.j=0,d.l=0,d.h=0,d.sleepTime=0,ft.i("{0f7a7d0}","{d5ff5ba}"),d.m=window.setInterval(()=>{try{let ut=new Date().getTime();1e4<ut-d.g-1e4&&(d.h=ut,d.sleepTime=d.h-d.g-1e4),1e4<ut-d.g-1e4&&d.j!=0?Ku(d,0<d.g-d.l?"epsp":"esp"):36e5<ut-d.g&&Kl(d),d.g=ut}catch{}},1e4)}function Ku(d,ut){if(d.o!==d.subSessionId){var wt=d.G,xt=$(d.j);ut=new po({eventSequence:ut,sleepTime:d.sleepTime,error:xt,timeToSleep:d.g-d.l,moduleName:"RAGNAROK",cmsId:String(wt.cmsId),sessionId:d.sessionId,subSessionId:d.subSessionId}),wt.h(ut),d.o=d.subSessionId}Kl(d)}function m0(d,ut){if(ut===15868704||ut===15859712)return Kl(d),!1;let wt=new Date().getTime();return d.j=ut,d.l=wt,ft.i("{0f7a7d0}","{425293a}",String(wt-d.g),d.h),1e4<wt-d.g-1e4?(d.h=wt,d.sleepTime=d.h-d.g-1e4,Ku(d,"pse")):d.h!==0&&2e4>wt-d.h?Ku(d,"pspe"):ut!==15867909&&ut!==15867908||(d.h=wt,Ku(d,"other")),d.h!==0}var hy=class{constructor(d){this.subSessionId=this.sessionId="",this.g=0,this.o="",this.sleepTime=this.h=this.m=this.l=this.j=0,this.G=d}};function py(d){let ut=document.createElement("div");return ut.id=d.Ed,ut.className="genericdiv",ut.style.display="grid",ut.style.gridTemplateColumns="1fr 1fr",ut.style.gridTemplateRows="1fr 1fr",d.visible=!0,(d=document.createElement("p")).id="instruction",d.style.color="white",d.style.position="fixed",d.innerHTML="Connect GamePads",d.style.top="0",ut.appendChild(d),ut}var vy=class{constructor(){this.Ed="gamepadTester",this.visible=!1,this.xb=[],this.Xd=[],this.Zb=new Map,Jl&&(document.body.appendChild(py(this)),this.start())}Eb(d){for(let ut=0;4>ut;ut++){const wt=this.Zb.get(ut);wt!==void 0&&!(d&1<<ut)&&(this.xb[wt]=null,this.Zb.delete(ut))}}Of(d){for(let ut=0;ut<this.xb.length;ut++){let wt=this.xb[ut];wt&&wt.dc&&wt.ha==d&&(this.xb[ut]=null)}}$c(d,ut,wt,xt,Ot,Vt,Dt,Ft,Qt){this.Zb.set(wt,ut),this.xb[ut]={index:ut,ha:wt,buttons:xt,qd:Ot,axes:Vt,name:Qt,dc:!1}}Wc(d,ut,wt,xt,Ot,Vt,Dt,Ft){this.xb[d]={index:d,ha:ut,buttons:wt,qd:xt,axes:Ot,name:Ft,dc:!0}}Uc(d){4>d.index&&(this.Xd[d.index]={index:d.index,ha:d.index,buttons:-1,qd:-1,axes:[-1],name:d.id,dc:!1})}Mc(d){let ut=document.getElementById(this.Ed);ut?(ut.remove(),this.xb=[],this.visible=!1):(d.insertAdjacentElement("afterend",py(this)),this.start())}start(){let d,ut=document.getElementById(this.Ed);if(ut==null)ft.e("{e13a879}","{0c955af}");else{var wt=.49*window.innerWidth,xt=.4*window.innerHeight,Ot=.3*wt,Vt=.7*wt,Dt=.8*xt,Ft=.8*xt,Qt=.07*wt,rr=ir=>{ir.style.position="absolute",ir.style.width="2%",ir.style.height="3.5%",ir.style.backgroundColor="red",ir.style.borderRadius="50%",ir.style.transform="translate(-50%, -50%)"},nr=ir=>{let Xt=(Tr=>Tr?{left:{X:Tr.axes[0],Y:Tr.axes[1]},right:{X:Tr.axes[2],Y:Tr.axes[3]}}:null)(ir);if(ut.querySelector(`.gamepad${ir.index}`).querySelector(".leftStick")===null){var br=document.createElement("div");br.className="gamepadJoystickPointer leftStick",rr(br),br.style.left=`${Ot+Xt.left.X*Qt}px`,br.style.top=`${Dt+Xt.left.Y*Qt}px`,ut.querySelector(`.gamepad${ir.index}`).querySelector(".gamepadContainer").appendChild(br)}else(br=ut.querySelector(`.gamepad${ir.index}`).querySelector(".leftStick")).style.opacity="1",br.style.left=`${Ot+Qt*Xt.left.X}px`,br.style.top=`${Dt+Xt.left.Y*Qt}px`;ut.querySelector(`.gamepad${ir.index}`).querySelector(".rightStick")===null?((br=document.createElement("div")).className="gamepadJoystickPointer rightStick",rr(br),br.style.left=`${Vt+Xt.right.X*Qt}px`,br.style.top=`${Ft+Xt.right.Y*Qt}px`,ut.querySelector(`.gamepad${ir.index}`).querySelector(".gamepadContainer").appendChild(br)):((ir=ut.querySelector(`.gamepad${ir.index}`).querySelector(".rightStick")).style.opacity="1",ir.style.left=(Vt+Xt.right.X*Qt).toString()+"px",ir.style.top=(Ft+Xt.right.Y*Qt).toString()+"px")},lr=(ir,Xt,br,Tr)=>{var Sr=ir.getContext("2d");if(Sr){Sr.beginPath();var Mr=br===!0?1:br===!1?0:br;switch(Sr.fillStyle=br?Tr?"#006FCD":"#0e7a0d":"grey",br=gr=>{if(Sr){var Er=.12*Mr;Sr.rect(ir.width*gr,ir.height*(.12-Er+.07),.02*ir.width,ir.height*Er),Sr.closePath(),Sr.fill(),Sr.beginPath(),Sr.fillStyle="grey",Sr.rect(ir.width*gr,.07*ir.height,.02*ir.width,ir.height*(.12-Er))}},Xt){case 0:Sr.moveTo(.14*ir.width,.48*ir.height),Sr.lineTo(.19*ir.width,.48*ir.height),Sr.lineTo(.165*ir.width,.54*ir.height),Sr.lineTo(.14*ir.width,.48*ir.height);break;case 1:Sr.moveTo(.14*ir.width,.66*ir.height),Sr.lineTo(.19*ir.width,.66*ir.height),Sr.lineTo(.165*ir.width,.61*ir.height),Sr.lineTo(.14*ir.width,.66*ir.height);break;case 2:Sr.moveTo(.09*ir.width,.55*ir.height),Sr.lineTo(.09*ir.width,.61*ir.height),Sr.lineTo(.135*ir.width,.57*ir.height),Sr.lineTo(.09*ir.width,.55*ir.height);break;case 3:Sr.moveTo(.24*ir.width,.55*ir.height),Sr.lineTo(.24*ir.width,.61*ir.height),Sr.lineTo(.195*ir.width,.57*ir.height),Sr.lineTo(.24*ir.width,.55*ir.height);break;case 4:Sr.arc(.7*ir.width,.4*ir.height,.02*ir.width,0,2*Math.PI);break;case 5:Sr.arc(.3*ir.width,.4*ir.height,.02*ir.width,0,2*Math.PI);break;case 6:Sr.arc(.3*ir.width,.8*ir.height,.07*ir.width,0,2*Math.PI);break;case 7:Sr.arc(.7*ir.width,.8*ir.height,.07*ir.width,0,2*Math.PI);break;case 8:Sr.rect(.13*ir.width,.23*ir.height,.07*ir.width,.05*ir.height);break;case 9:Sr.rect(.815*ir.width,.23*ir.height,.07*ir.width,.05*ir.height);break;case 12:Sr.arc(.85*ir.width,.65*ir.height,.02*ir.width,0,2*Math.PI);break;case 13:Sr.arc(.9*ir.width,.55*ir.height,.02*ir.width,0,2*Math.PI);break;case 14:Sr.arc(.8*ir.width,.55*ir.height,.02*ir.width,0,2*Math.PI);break;case 15:Sr.arc(.85*ir.width,.45*ir.height,.02*ir.width,0,2*Math.PI);break;case-1:br(.155);break;case-2:br(.84);break;case 16:if(!Tr)break;Sr.arc(.5*ir.width,.5*ir.height,.02*ir.width,0,2*Math.PI);break;case 17:Tr&&(Sr.roundRect?Sr.roundRect(.395*ir.width,.085*ir.height,.21*ir.width,.18*ir.height,.02*ir.width):Sr.arc(.5*ir.width,.175*ir.height,.02*ir.width,0,2*Math.PI))}Sr.closePath(),Sr.fill()}},Yt=ir=>{if(ut.querySelector(`.gamepad${ir.index}`)===null){var Xt=document.createElement("div");Xt.className=`gamepad gamepad${ir.index}`,Xt.style.display="flex",Xt.style.flexDirection="column",Xt.style.justifyContent="space-between",Xt.style.height="98%";var br=document.createElement("p");br.className="active",br.style.margin="0px";var Tr=document.createElement("span");Tr.className="gamepadPlayerNumber",Tr.style.color="white",Tr.style.background=ir.dc?"#006FCD":"#0e7a0d",Tr.style.position="relative",Tr.style.marginRight="0.5vw",Tr.innerHTML=ir.dc?"S":"X",Tr.style.fontSize="1.5vw",br.appendChild(Tr),(Tr=document.createElement("span")).className="gamepadPlayerNumber",Tr.style.color="white",Tr.style.position="relative",Tr.innerHTML=`P${ir.index+1}|${ir.name}`,Tr.style.fontSize="1.5vw",br.appendChild(Tr),Xt.appendChild(br),(ir=document.createElement("div")).className="gamepadContainer",ir.style.position="relative",ir.style.width=`${wt+2}px`,ir.style.height=`${xt}px`,(br=document.createElement("canvas")).className="canvas",br.width=wt,br.height=xt,br.style.width=`${wt}px`,br.style.height=`${xt}px`,br.style.border="1px solid white",ir.appendChild(br),Xt.appendChild(ir),ut.appendChild(Xt),(Xt=ut.querySelector("#instruction"))&&(Xt.style.display="none")}},dr=()=>{if(this.visible){for(let br=0;br<this.xb.length;br++){var ir=this.xb[br];if(ir){var Xt=ir.dc;ut.querySelector(`.gamepad${ir.index}`)||Yt(ir),nr(ir);let Tr=ut.querySelector(`.gamepad${ir.index}`).querySelector("canvas"),Sr=Xt?2:0;for(let Mr=0;16>Mr;Mr++)lr(Tr,Mr,!!(ir.buttons&1<<Mr),Xt);1<=Sr&&lr(Tr,16,65536&ir.buttons,Xt),2<=Sr&&lr(Tr,17,131072&ir.buttons,Xt),lr(Tr,-1,(255&ir.qd)/255,Xt),lr(Tr,-2,(ir.qd>>8&255)/255,Xt)}else this.Xd[br]?!ut.querySelector(`.gamepad${br}`)&&(Yt(this.Xd[br]),Xt=(ir=ut.querySelector(`.gamepad${br}`).querySelector("canvas")).getContext("2d"))&&(Xt.font="20px Arial",Xt.fillStyle="white",Xt.textAlign="center",Xt.fillText("Unsupported Gamepad",ir.width/2,ir.height/2)):((ir=ut.querySelector(`.gamepad${br}`))&&ut.removeChild(ir),1>=ut.childNodes.length&&(ir=ut.querySelector("#instruction"))&&(ir.style.display="block"))}d=window.requestAnimationFrame(dr)}else window.cancelAnimationFrame(d)};dr()}}Yc(){}Yb(){}};function my(d){if(ft.i("{4c846ba}","{b11cb24}"),d.l){try{d.h=new MediaRecorder(d.l)}catch(ut){return void ft.e("{4c846ba}","{0d1420e}",ut)}d.h&&(d.h.onstart=()=>{},d.h.onstop=()=>{ft.i("{4c846ba}","{7a944b4}")},d.h.ondataavailable=ut=>{ut.data&&0<ut.data.size&&(d.s.push(ut.data),d.v.push(d.s),++d.m,d.s=[])},ft.i("{4c846ba}","{ffb713f}",d.h)),d.o=!1}else ft.e("{4c846ba}","{74475ae}")}function g0(d){var ut;(ut=d.h)===null||ut===void 0||ut.stop(),d.h=void 0,d.j!==0&&(window.clearTimeout(d.j),d.j=0)}function gy(d){let ut;if(d.g==1)ut=18e5;else{if(d.g!=2)return;ut=3e3}d.h&&!d.o&&(d.h.start(),d.o=!0,d.j=window.setTimeout(()=>{ft.i("{4c846ba}","{2282d21}"),g0(d)},ut),ft.i("{4c846ba}","{4f438e3}"))}var yy=class{constructor(){this.o=!1,this.s=[],this.v=[],this.g=this.m=this.j=0}initialize(d){this.l=d}uninitialize(){g0(this),this.downloadAudio(),this.l=void 0,this.g=0}downloadAudio(){if(this.g!=0){for(let d=0;d<this.m;++d)mp(this.v[d],"audioCapture_"+d+".wmv","audio/webm")&&ft.i("{4c846ba}","{c24ed3b}");this.m=0,this.v=[]}}};function by(d,ut){d.h=!1,d.j=!1,d.g=ut,d.g.onversionchange=()=>{ft.w("{10dc2cc}","{65276d8}"),d.close(),d.g=void 0},d.g.onclose=()=>{ft.w("{10dc2cc}","{342f7f8}"),d.h=!0,d.j=!0}}function Gu(d){return d.l?d.g?d.h?Jt(2,"Db is closing, unexpectedly: "+d.j+", visibility state hidden: "+(document.visibilityState==="hidden")):void 0:Jt(1,"Db not yet open"):Jt(17,"Indexdb object not found")}function wy(d,ut){const wt=Gu(d);return wt?Promise.reject(wt):new Promise((xt,Ot)=>{try{const Vt=d.g.transaction(ut,"readwrite"),Dt=Vt.objectStore(ut);Vt.oncomplete=()=>{ft.i("{10dc2cc}","{30f23d1}")};const Ft=Dt.clear();Ft.onsuccess=()=>{xt()},Ft.onerror=()=>{Ot(Jt(80,"clear method failed)",Vt.error))}}catch(Vt){Ot(Jt(81,"Unexpected Exception happened in clear",Vt))}})}function y0(d,ut){const wt=Gu(d);return wt?Promise.reject(wt):new Promise((xt,Ot)=>{try{const Vt=d.g.transaction(ut,"readonly"),Dt=Vt.objectStore(ut);Vt.oncomplete=()=>{ft.i("{10dc2cc}","{59d1f78}")};const Ft=Dt.getAll();Ft.onsuccess=()=>{xt(Ft.result)},Ft.onerror=()=>{Ot(Jt(96,"getAll method failed",Vt.error))}}catch(Vt){Ot(Jt(97,"Unexpected Exception in getAll",Vt))}})}function b0(d,ut){if(d.g.commonData){var wt=ut.gdprLevel;let xt=!1;d.g.commonData&&(wt!=="functional"||d.g.commonData.deviceGdprFuncOptIn!=="Full"&&d.g.commonData.deviceGdprFuncOptIn!=="Temp"?(wt==="technical"&&d.g.commonData.gdprTechOptIn==="Full"||wt==="behavioral"&&d.g.commonData.gdprBehOptIn==="Full")&&(xt=!0):xt=!0),xt&&(window.navigator.onLine?function(Ot){var Vt,Dt,Ft,Qt;(Vt=Ot.config)!==null&&Vt!==void 0&&Vt.server&&(Dt=Ot.config)!==null&&Dt!==void 0&&Dt.version&&(Vt={method:"POST",headers:{"Content-Type":"application/json","X-Event-Protocol":(Qt=(Ft=Ot.commonData)===null||Ft===void 0?void 0:Ft.eventProtocol)!==null&&Qt!==void 0?Qt:"1.5"},body:JSON.stringify(Ot.commonData),retryCount:3,timeout:2e3},ft.i("{f7c1592}","{056661f}",Vt.body),It(Cy(Ot.config),Vt).then(()=>{}).catch(()=>{}))}(S0(d,ut)):function(Ot,Vt){!Ot.j&&Ry(Vt)&&Ot.m.then(()=>Ot.l.set("telemetry-events",Vt)).then(()=>{ft.i("{f7c1592}","{f03d70b}")}).catch(Dt=>{const Ft=!Ot.F;Ot.F=!0,wl(Ot,Dt,"cacheTelemetryEventInDb",Ft)})}(d,{userId:d.g.commonData.userId,sessionId:d.g.commonData.sessionId,name:ut.name,eventPayload:ut}))}else d.C.push(ut)}function Sy(d){var ut,wt,xt;return(xt=(wt=(ut=d.g)===null||ut===void 0?void 0:ut.telemetryEventIds)===null||wt===void 0?void 0:wt.streamingProfileGuid)!==null&&xt!==void 0?xt:""}function Ay(d){var ut,wt,xt;return(xt=(wt=(ut=d.g)===null||ut===void 0?void 0:ut.telemetryEventIds)===null||wt===void 0?void 0:wt.systemInfoGuid)!==null&&xt!==void 0?xt:""}function _y(d,ut){var wt,xt,Ot,Vt;let Dt=(wt=ut.exitErrorCode)!==null&&wt!==void 0?wt:"";return ut.sleep?Dt="SleepExit":(xt=ut.connectivity)!==null&&xt!==void 0&&xt.startsWith("online")&&(Dt=(Ot=ut.connectivity)!==null&&Ot!==void 0?Ot:""),{name:(wt=new tm({zoneAddress:ut.zoneAddress,networkSessionId:(Vt=ut.networkTestSessionId)!==null&&Vt!==void 0?Vt:"",sessionId:ut.sessionId,subSessionId:ut.subSessionId,resumeType:wu(ut.isResume),overrideConfigType:xa.type,overrideConfigVersion:xa.version,exitReason:Dt,result:ut.exitErrorCode,frameCount:ut.frameCount,codec:bu(ut.codec),ipVersion:"UNKNOWN",streamDuration:Math.round(ut.streamDuration),networkType:sr(Ss.getCurrentNetworkType()),streamingProfileGuid:Sy(d),systemInfoGuid:Ay(d),cmsId:String(d.I)})).name,gdprLevel:wt.gdprLevel,parameters:wt.parameters,ts:wt.ts,clientConfig:Lu}}function w0(d){ft.d("{f7c1592}","{badefed}",!0),function(ut){ut.j||ut.m.then(()=>wy(ut.l,"exit-events")).then(()=>{ft.i("{f7c1592}","{1b8f127}")}).catch(wt=>{wl(ut,wt,"clearExitEventStoreInDb",!ut.s),ut.s||(ut.s=!0)})}(d),d.h.eventPayload=void 0}function wl(d,ut,wt,xt){var Ot,Vt,Dt,Ft;ft.e("{f7c1592}","{146ec91}",wt,$(ut.code),ut.description),xt&&(xt=(Dt=(Vt=(Ot=ut.error)===null||Ot===void 0?void 0:Ot.message)!==null&&Vt!==void 0?Vt:ut.description)!==null&&Dt!==void 0?Dt:`Exception in ${wt}`,d.H?d.H(ut.error,xt,"telemetryeventprocessor.ts",ut.code,0,!0,(Ft=ut.error)===null||Ft===void 0?void 0:Ft.name):ft.w("{f7c1592}","{12e0846}"))}function S0(d,ut){let wt={};if(!d.g.commonData)return wt;const xt={name:ut.name,ts:ut.ts,parameters:ut.parameters};return Ey(wt,d.g),(d=wt.commonData).clientId=ut.clientConfig.clientId,d.eventSchemaVer=ut.clientConfig.eventSchemaVer,d.sentTs=new Date().toISOString(),d.events=[xt],wt}function Ey(d,ut){d.commonData=ut.commonData?Object.assign({},ut.commonData):void 0,d.experiments=[],d.config=ut.config,d.telemetryEventIds=ut.telemetryEventIds}function Cy(d){return d.server+"/"+d.version+"/events/json"}function Ty(d,ut){var wt,xt,Ot;d.h.userId=(xt=(wt=d.g.commonData)===null||wt===void 0?void 0:wt.userId)!==null&&xt!==void 0?xt:"",d.h.sessionId=(Ot=ut.parameters.sessionId)!==null&&Ot!==void 0?Ot:"",d.h.name=ut.name,d.h.eventPayload=ut}function My(d){var ut,wt;(ut=d.config)!==null&&ut!==void 0&&ut.server&&(wt=d.config)!==null&&wt!==void 0&&wt.version&&d.experiments&&(d.commonData&&(d.commonData.sentTs=new Date().toISOString()),ut=JSON.stringify(d.commonData),d=navigator.sendBeacon(Cy(d.config),new Blob([ut],{type:"text/plain"})),ft.i("{f7c1592}","{b9367c5}",d,ut))}function Ry(d){return!!d.userId&&!!d.sessionId&&!!d.name}function xy(d){return d.j||!Ry(d.h)?Promise.resolve():d.m.then(()=>d.l.set("exit-events",d.h)).then(()=>{ft.i("{f7c1592}","{5d026f8}")}).catch(ut=>{wl(d,ut,"cacheExitEventInDb",!d.o),d.o||(d.o=!0)})}function ky(d){d.j||window.navigator.onLine&&d.m.then(()=>y0(d.l,"telemetry-events")).then(ut=>{if(ft.i("{f7c1592}","{d4e574c}",ut.length),0<ut.length){(function(wt){wt.j||wt.m.then(()=>wy(wt.l,"telemetry-events")).then(()=>{ft.i("{f7c1592}","{8f62936}")}).catch(xt=>{wl(wt,xt,"clearEventStoreInDb",!wt.v),wt.v||(wt.v=!0)})})(d);for(const wt of ut)wt.eventPayload&&b0(d,wt.eventPayload)}}).catch(ut=>{ft.e("{f7c1592}","{aaaa3de}",ut.code,ut.description)})}function A0(d){if(d.g){const wt=d.g.getSessionId(),xt=d.g.getSubSessionId();ft.d("{9d1820c}","{2fd42df}",wt,xt);var ut=d.G;ut.subSessionId=xt,ut.v.clear(),ut.C=0,d.F.subSessionId=xt,(ut=d.G).sessionId=wt,ut.H=0,d.F.sessionId=wt,(d=d.m).o=!1,d.s=!1,d.F=!1,d.v=!1}}function Iy(d,ut){var wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr;d.M&&(d.M=!1,d.framesDecoded=(xt=(wt=d.D)===null||wt===void 0?void 0:Ul(wt))!==null&&xt!==void 0?xt:0,wt={sessionId:(Vt=(Ot=d.g)===null||Ot===void 0?void 0:Ot.getSessionId())!==null&&Vt!==void 0?Vt:"",subSessionId:(Ft=(Dt=d.g)===null||Dt===void 0?void 0:Dt.getSubSessionId())!==null&&Ft!==void 0?Ft:"",zoneName:(rr=(Qt=d.g)===null||Qt===void 0?void 0:Qt.getZoneName())!==null&&rr!==void 0?rr:"",zoneAddress:((nr=d.g)===null||nr===void 0?void 0:nr.getZoneAddress())||d.h.serverAddress,error:{code:ut}},Ot=Wu(d,wt,performance.now()-d.startTime),Nu(d.j),(!d.D||!((lr=d.D)===null||lr===void 0)&&lr.H)&&E0(d,Ot),T0(d,ut),d.cancelSessionSetup())}function _0(d){d.I!==0&&(window.clearTimeout(d.I),d.I=0)}function E0(d,ut){_0(d);var wt=d.G;let xt;xt=_y(wt.j,ut),nm(wt,xt),w0(wt.j),ut=ut.streamDuration,document.visibilityState==="hidden"&&(d.o+=performance.now()-d.L),wt=0,ut&&(wt=Math.max(0,100*(ut-d.o)/ut)),Mo(d.G,"sessionVisibilityMetrics","",wt,Math.round(ut),Math.round(d.o),0),d.o=0,d.L=0}function Wu(d,ut,wt,xt,Ot){var Vt,Dt,Ft,Qt;return{exitErrorCode:ut.error?$(ut.error.code):$(15859712),sessionId:ut.sessionId,subSessionId:ut.subSessionId,zoneAddress:ut.zoneAddress,streamDuration:wt,frameCount:d.framesDecoded,codec:(Dt=(Vt=d.D)===null||Vt===void 0?void 0:Hl(Vt))!==null&&Dt!==void 0?Dt:"UNKNOWN",isResume:d.isResume,connectivity:xt??"undefined",sleep:Ot!=null&&Ot,networkTestSessionId:(Qt=(Ft=d.v)===null||Ft===void 0?void 0:Ft.la.networkSessionId)!==null&&Qt!==void 0?Qt:""}}function Qu(d){var ut;Vy(d,$((ut=d.S)!==null&&ut!==void 0?ut:15867911));const wt=d.I;xy(d.m).then(()=>{wt===d.I&&function(xt){_0(xt),xt.I=window.setTimeout(()=>Qu(xt),12e4)}(d)}).catch(()=>{ft.e("{9d1820c}","{204a7ac}")})}function Yu(d){return{code:3237093380,description:d+" called before initialize"}}function Py(d,ut){var wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt;let dr={sessionId:(xt=(wt=d.g)===null||wt===void 0?void 0:wt.getSessionId())!==null&&xt!==void 0?xt:"",subSessionId:(Vt=(Ot=d.g)===null||Ot===void 0?void 0:Ot.getSubSessionId())!==null&&Vt!==void 0?Vt:"",error:{code:3237089284,description:"Quitting due to exception"},streamInfo:(Dt=d.H)===null||Dt===void 0?void 0:Dt.streamInfo,zoneName:(Qt=(Ft=d.g)===null||Ft===void 0?void 0:Ft.getZoneName())!==null&&Qt!==void 0?Qt:"",zoneAddress:(nr=(rr=d.g)===null||rr===void 0?void 0:rr.getZoneAddress())!==null&&nr!==void 0?nr:"",gpuType:(Yt=(lr=d.g)===null||lr===void 0?void 0:lr.getGpuType())!==null&&Yt!==void 0?Yt:"",isResume:d.isResume};d.Gc(dr,!0),ft.e("{9d1820c}","{90f98fb}",ut),d.G.za(ut,"Exception happened in session call","{9d1820c}.ts",0,0,!0)}function S1(d,ut){var wt=Pt();d.Gc({sessionId:"",subSessionId:wt,error:ut,zoneName:"",zoneAddress:"",gpuType:"",isResume:d.isResume},!0)}function Oy(d,ut,wt,xt){if(d.H=void 0,d.aa=!1,d.g){Ap(d.C,wt.la.additionalInputDevices),wt.la.remoteControllersBitmap=Sv(d.C);try{(function(Vt,Dt){Vt.j.I=Dt})(d.G,wt.la.appId,wt.la.shortName),d.startTime=performance.now(),fy(d.F),ft.d("{9d1820c}","{892168d}",hr(JSON.stringify(wt.la)));const Ot=d.g;Ot.putOrPostSession(wt.la,ut,xt).then(Vt=>(A0(d),ft.d("{9d1820c}","{92a2573}",Vt==null?void 0:Vt.sessionId,Vt==null?void 0:Vt.subSessionId),(Vt==null?void 0:Vt.state)==="ready_for_connection"?(ft.d("{9d1820c}","{2042e0a}"),d.H=Vt,new Promise(Dt=>{Dt(Vt)})):Ot.getSession(Vt.sessionId,!0))).then(Vt=>{d.H=Vt,ft.d("{9d1820c}","{315afdc}",Vt==null?void 0:Vt.sessionId),d.startStreaming(wt)}).catch(Vt=>{var Dt,Ft,Qt,rr,nr,lr;if(A0(d),Vt.code){Vt.code!=15867905&&Vt.code!=15867906||!Ot.getSessionId()||d.aa||d.sendDeleteRequest(Ot.getSessionId(),Ot),ft.e("{9d1820c}","{09efe49}",$(Vt.code));let Yt={sessionId:(Dt=Ot.getSessionId())!==null&&Dt!==void 0?Dt:"",subSessionId:(Ft=Ot.getSubSessionId())!==null&&Ft!==void 0?Ft:"",error:Vt,sessionList:Vt.sessionList,streamInfo:(Qt=d.H)===null||Qt===void 0?void 0:Qt.streamInfo,zoneName:(rr=Ot.getZoneName())!==null&&rr!==void 0?rr:"",zoneAddress:(nr=Ot.getZoneAddress())!==null&&nr!==void 0?nr:"",gpuType:(lr=Ot.getGpuType())!==null&&lr!==void 0?lr:"",isResume:d.isResume};d.Gc(Yt,!0)}else Py(d,Vt)})}catch(Ot){Py(d,Ot)}}else d.emit("SessionStartResult",{sessionId:"",subSessionId:"",zoneName:"",zoneAddress:"",gpuType:"",isResume:d.isResume,error:Yu(d.isResume?"Resume":"Start")})}function Vy(d,ut){var wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr=d.m,Yt=(xt=(wt=d.g)===null||wt===void 0?void 0:wt.getSessionId())!==null&&xt!==void 0?xt:"";wt=(Vt=(Ot=d.g)===null||Ot===void 0?void 0:Ot.getSubSessionId())!==null&&Vt!==void 0?Vt:"",Ot=((Dt=d.g)===null||Dt===void 0?void 0:Dt.getZoneAddress())||d.h.serverAddress,Dt=(Qt=(Ft=d.D)===null||Ft===void 0?void 0:Ul(Ft))!==null&&Qt!==void 0?Qt:0,Ft=(nr=(rr=d.D)===null||rr===void 0?void 0:Hl(rr))!==null&&nr!==void 0?nr:"UNKNOWN",Ty(lr,d=_y(lr,{exitErrorCode:ut,sessionId:Yt,subSessionId:wt,zoneAddress:Ot,streamDuration:performance.now()-d.startTime,frameCount:Dt,codec:Ft,isResume:d.isResume,connectivity:"",sleep:!1,networkTestSessionId:""}))}function Ny(d){d.T&&(window.clearTimeout(d.T),d.T=0)}function C0(d){window.removeEventListener("pagehide",d.ja),window.removeEventListener("online",d.ea),document.removeEventListener("visibilitychange",d.ka),navigator.mediaDevices&&navigator.mediaDevices.removeEventListener("devicechange",d.W),it(d.u)&&(document.removeEventListener("SystemIdle",d.ga),Ny(d))}function Ly(d,ut){d.S=void 0,ky(d.m),d.M=!0,window.addEventListener("pagehide",d.ja),window.addEventListener("online",d.ea),document.addEventListener("visibilitychange",d.ka),navigator.mediaDevices&&navigator.mediaDevices.addEventListener("devicechange",d.W),d.isResume=ut,d.P&&jo(d.G,"SessionSetupInProgressError",d.isResume?"resume":"start"),d.P=!0}function Dy(d,ut){var wt,xt,Ot;if((ut={la:Object.assign({},ut),ce:[]}).la.streamParams)for(const Ft of ut.la.streamParams){const Qt=document.getElementById(Ft.videoTagId);if(Qt==null||!(Qt instanceof HTMLVideoElement))return void S1(d,{code:3237094400,description:"Didn't find video element for videoTagId: "+Ft.videoTagId});ut.ce.push({K:Qt})}if(ut.la.keyboardLayout=(wt=ut.la.keyboardLayout)!==null&&wt!==void 0?wt:ct(d.u)?"m-us":"en_US",ut.la.appLaunchMode!==void 0&&ut.la.appLaunchMode!==0||(ut.la.appLaunchMode=Nt()||Gt(d.u)||d.u.os==="Xbox"?1:0),Pr)if(ut.la.metaData)for(const Ft in Pr)ut.la.metaData[Ft]=Pr[Ft];else ut.la.metaData=Pr;Io!==void 0&&(ut.la.appLaunchMode=Io,ft.d("{9d1820c}","{c4969b1}",Io));const Vt=!!Vs&&!!Ns,Dt=!!xs;return(Vt||Dt)&&((xt=ut.la.streamParams)===null||xt===void 0||xt.forEach(Ft=>{Vt&&(Ft.width=Vs,Ft.height=Ns),Dt&&(Ft.fps=xs)}),(Ot=ut.la.monitorSettings)===null||Ot===void 0||Ot.forEach(Ft=>{Vt&&(Ft.widthInPixels=Vs,Ft.heightInPixels=Ns),Dt&&(Ft.framesPerSecond=xs)}),Vt&&ft.i("{9d1820c}","{92a6b38}",Vs,Ns),Dt&&ft.d("{9d1820c}","{6618bcd}",xs)),d.v=ut,d.v}function T0(d,ut){d.D&&(d.D.stop(ut),d.D=void 0)}function Ju(d,ut,wt){var xt,Ot;ut={sessionId:ut,subSessionId:(Ot=(xt=d.g)===null||xt===void 0?void 0:xt.getSubSessionId())!==null&&Ot!==void 0?Ot:"",framesDecoded:d.framesDecoded,error:wt},M0(d),s(d.u)&&d.l&&(ft.d("{9d1820c}","{b9b1288}"),d.setMicRecordingEnabled(!1)),d.emit("SessionStopResult",ut)}function M0(d){bs&&(window.ios15AudioContext&&(window.ios15AudioContext.close(),window.ios15AudioContext=void 0,ft.i("{9d1820c}","{0ac2a42}")),window.ios15AudioStream=void 0,navigator.mediaDevices&&d.O&&navigator.mediaDevices.removeEventListener("devicechange",d.O))}function By(d,ut){d.P=!1,ut.error&&(d.M=!1,C0(d)),d.emit("SessionStartResult",ut)}function Fy(d,ut,wt,xt){var Ot,Vt,Dt,Ft;M0(d),xt&&((Ot=xt.connectivity)!==null&&Ot!==void 0&&Ot.startsWith("offline")||(Vt=xt.connectivity)!==null&&Vt!==void 0&&Vt.startsWith("timeout")?(_0(d),Vy(d,$((Ft=(Dt=ut.error)===null||Dt===void 0?void 0:Dt.code)!==null&&Ft!==void 0?Ft:15867911)),xy(d.m).catch(()=>{ft.e("{9d1820c}","{0c2de99}")})):E0(d,xt)),T0(d,ut.error?ut.error.code:15859712),wt?By(d,ut):(ut.error&&(wt=z0(ut.error.code,d.u),ut.isResumable=wt,ft.i("{9d1820c}","{723f7be}",wt)),d.M=!1,d.P=!1,C0(d),d.emit("StreamStopped",ut))}function $y(d,ut){let wt={errorCode:ut??15859712,connectivity:"online"};if(ut&&(!((3237093888^ut)>>8)||ut===3237089282)){let xt=1500;Yn.connectivityCheckTimeout&&Yn.connectivityCheckTimeout!==0&&(xt=Yn.connectivityCheckTimeout,ft.i("{9d1820c}","{f9909d8}",xt)),d=(window.location.protocol==="http:"?"http://":"https://")+d.h.serverAddress,ft.i("{9d1820c}","{df38106}",d);const Ot=performance.now();return Bt(d,xt).then(Vt=>(wt.connectivity=200<=Vt.status&&300>Vt.status||Vt.status==403?"online("+String(25*Math.ceil((performance.now()-Ot)/25))+")":"offline_wrong_status("+String(Vt.status)+")",wt)).catch(Vt=>(Vt.name==="AbortError"?wt.connectivity="timeout":(wt.connectivity="offline("+Vt.name+":"+Vt.message+")",wt.errorCode=H0(ut)),wt))}return Promise.resolve(wt)}performance.mark("GfnRBegin");var A1=At.LogImpl;function Gl(d,ut,wt){var xt;if(d.streamingState!==4&&d.streamingState!==0){var Ot=d.streamingState;d.streamingState=4,Kl(d.l),Mo(Uo,"HotPlug","",0,d.o,0,0),s(d.u)&&d.m&&(ft.d("{0a9be04}","{b9b1288}"),d.captureMic(!1)),Nu(d.g),(xt=d.D)===null||xt===void 0||xt.stop(ut),m0(d.l,ut)&&(ut=hp(ut,d.u)),function(Vt,Dt){let Ft={errorCode:Dt??15859712,connectivity:"online"};if(Dt&&(!((3237093888^Dt)>>8)||Dt===3237089282)){let Qt=1500;Yn.connectivityCheckTimeout&&Yn.connectivityCheckTimeout!==0&&(Qt=Yn.connectivityCheckTimeout,ft.i("{0a9be04}","{f9909d8}",Qt)),Vt=(window.location.protocol==="http:"?"http://":"https://")+Vt.zoneAddress,ft.i("{0a9be04}","{df38106}",Vt);const rr=performance.now();return Bt(Vt,Qt).then(nr=>(Ft.connectivity=200<=nr.status&&300>nr.status||nr.status==403?"online("+String(25*Math.ceil((performance.now()-rr)/25))+")":"offline_wrong_status("+String(nr.status)+")",Ft)).catch(nr=>(nr.name==="AbortError"?Ft.connectivity="timeout":(Ft.connectivity="offline("+nr.name+":"+nr.message+")",Ft.errorCode=H0(Dt)),Ft))}return Promise.resolve(Ft)}(d,ut).then(Vt=>{if(ut=Vt.errorCode,Ot!==1){var Dt,Ft,Qt,rr,nr={code:ut,isResumable:z0(ut,d.u),reason:3},lr=new Set([3237093892,15867907,3237093896,3237093897,3237093898,3237093899,3237093900,3237093895,3237093901,3237093906,3237093929,15867908,15868418,3237094151,3237094158]);wt?nr.reason=0:lr.has(ut)?nr.reason=2:(268435200&ut)==15868672&&(nr.reason=1),d.h.onStreamStopped(nr),lr=Vt.connectivity,nr=Vt=$(ut||15859712),lr!=null&&lr.startsWith("online")&&(nr=lr??""),lr=performance.now()-d.startTime;const Mr=(Ft=(Dt=d.D)===null||Dt===void 0?void 0:Hl(Dt))!==null&&Ft!==void 0?Ft:"UNKNOWN";var Yt,dr,ir;Dt=(rr=(Qt=d.D)===null||Qt===void 0?void 0:Ul(Qt))!==null&&rr!==void 0?rr:0,rr=new tm({zoneAddress:(Qt=Uo).zoneAddress,sessionId:Qt.sessionId,subSessionId:Qt.subSessionId,resumeType:wu(Qt.isResume),cmsId:Qt.cmsId,overrideConfigType:xa.type,overrideConfigVersion:xa.version,exitReason:nr,result:Vt,frameCount:Dt,codec:bu(Mr),ipVersion:"UNKNOWN",streamDuration:Math.round(lr),networkType:sr(Ss.getCurrentNetworkType()),streamingProfileGuid:(Yt=Qt.telemetryEventIds.streamingProfileGuid)!==null&&Yt!==void 0?Yt:"",systemInfoGuid:(dr=Qt.telemetryEventIds.systemInfoGuid)!==null&&dr!==void 0?dr:"",networkSessionId:(ir=Qt.telemetryEventIds.networkTestId)!==null&&ir!==void 0?ir:""}),Qt.h(rr,!0)}var Xt,br,Tr,Sr;qy(d),R0(d),d.D=void 0,d.startTime=0,d.isResume=!1,d.P=void 0,d.C=0,d.o=0,d.sessionId="",d.subSessionId="",d.zoneAddress="",d.zoneName="",d.K=void 0,d.Ea=void 0,d.m=!1,d.appId=0,d.setSupportedHidTypes(0),d.setGamepadRsdmm(!1),d.l.sessionId="",d.l.subSessionId="",Yt=(br=(Xt=(dr=window.zoneless)==null?void 0:dr.windowRemoveEventListener)===null||Xt===void 0?void 0:Xt.bind(window))!==null&&br!==void 0?br:window.removeEventListener.bind(window),Xt=(Sr=(Tr=dr==null?void 0:dr.documentRemoveEventListener)===null||Tr===void 0?void 0:Tr.bind(document))!==null&&Sr!==void 0?Sr:document.removeEventListener.bind(document),Yt("pagehide",d.M),Yt("error",d.L),Xt("visibilitychange",d.N),navigator.mediaDevices&&navigator.mediaDevices.removeEventListener("devicechange",d.F),it(d.u)&&(Xt("SystemIdle",d.I),R0(d))})}}function qy(d){bs&&(window.ios15AudioContext&&(window.ios15AudioContext.close(),window.ios15AudioContext=void 0,ft.i("{0a9be04}","{0ac2a42}")),window.ios15AudioStream=void 0,navigator.mediaDevices&&d.s&&navigator.mediaDevices.removeEventListener("devicechange",d.s))}function R0(d){d.v&&(window.clearTimeout(d.v),d.v=0)}performance.mark("GfnNskBegin"),window.Ragnarok=window.Ragnarok||{},window.Ragnarok.GridApp=class extends or{constructor(d){super(),this.u=d,this.l=this.Z=!1,this.da=new vy,this.P=!1,this.O=this.W=void 0,this.fa=!1,this.R=this.L=this.T=this.I=0,this.aa=this.M=!1,this.o=0,ft.isCallbackRegistered()||ft.setLogCallback(this.$.bind(this)),this.h={clientIdentification:"GFN-PC",clientVersion:"29.0",deviceHashId:"",serverAddress:""},this.startTime=performance.now(),this.ja=this.ra.bind(this),this.ea=this.xa.bind(this),this.ka=this.Da.bind(this),this.ya=this.qa.bind(this),this.framesDecoded=0,this.m=new class{constructor(){this.h={userId:"",sessionId:"",eventPayload:void 0,name:""},this.g={},this.v=this.F=this.s=this.o=!1,this.I="",this.C=[],this.j=!1,this.l=new class{constructor(){this.l=window.indexedDB,this.version=2,this.j=this.h=!1,this.name="ragnarok",this.m=[{Yf:"exit-events",pd:{keyPath:["userId","sessionId","name"]},Xf:"exit-event-index"},{Yf:"telemetry-events",pd:{keyPath:["userId","sessionId","name","eventPayload.ts"]},Xf:"telemetry-event-index"}]}open(){return new Promise((ut,wt)=>{try{if(this.l){let xt=this.l.open(this.name,this.version);xt.onerror=()=>{wt(Jt(18,`${this.name} db opening failed`,xt.error))},xt.onsuccess=()=>{by(this,xt.result),ut()},xt.onupgradeneeded=Ot=>{ft.i("{10dc2cc}","{1f70767}",Ot.oldVersion,Ot.newVersion),by(this,xt.result);const Vt=Dt=>{var Ft;const Qt=(Ft=this.g)===null||Ft===void 0?void 0:Ft.createObjectStore(Dt.Yf,Dt.pd);Dt.pd.keyPath&&(Qt==null||Qt.createIndex(Dt.Xf,Dt.pd.keyPath,{unique:!0}))};switch(Ot.oldVersion){case 0:Vt(this.m[0]);case 1:Vt(this.m[1])}},xt.onblocked=()=>{wt(Jt(19,`${this.name} db blocked during opening`,xt.error))}}else wt(Jt(17,"Indexdb object not found"))}catch(xt){wt(Jt(20,"Unexpected Exception in open",xt))}})}get(ut,wt){const xt=Gu(this);return xt?Promise.reject(xt):new Promise((Ot,Vt)=>{try{const Dt=this.g.transaction(ut,"readonly"),Ft=Dt.objectStore(ut);Dt.oncomplete=()=>{ft.i("{10dc2cc}","{82638ba}")};const Qt=Ft.get(wt);Qt.onsuccess=()=>{Ot(Qt.result)},Qt.onerror=()=>{Vt(Jt(32,"get method failed",Dt.error))}}catch(Dt){Vt(Jt(33,"Unexpected Exception happened in get",Dt))}})}set(ut,wt){const xt=Gu(this);return xt?Promise.reject(xt):new Promise((Ot,Vt)=>{try{const Dt=this.g.transaction(ut,"readwrite"),Ft=Dt.objectStore(ut);Dt.oncomplete=()=>{ft.i("{10dc2cc}","{f993875}")};const Qt=Ft.put(wt);Qt.onsuccess=()=>{Ot()},Qt.onerror=()=>{Vt(Jt(48,"put method failed",Dt.error))}}catch(Dt){Vt(Jt(49,"Unexpected Exception happened in set",Dt))}})}close(){var ut;this.h=!0,(ut=this.g)===null||ut===void 0||ut.close()}},this.m=this.l.open().catch(ut=>{this.j=!0,wl(this,ut,"TelemetryEventProcessorConstruction",!0)})}updateEventDataElements(ut){var wt;if(Ey(this.g,ut),this.g.commonData){ft.d("{f7c1592}","{66f209c}");for(let xt of this.C)b0(this,xt);this.C=[]}this.h.userId=(wt=this.g.commonData)===null||wt===void 0?void 0:wt.userId}},this.G=new n1(this,this.m),this.F=new hy(this.G),this.isResume=!1,this.N=Ms,this.ca=new yy,window.addEventListener("error",this.ya),d=window.zoneless,this.j=new Zv(this.u,this.G),this.O=this.j.j.bind(this.j),this.W=this.na.bind(this),this.C=new Av(this.u,d),Jl&&(this.C.l.push(this.da),kp(this.C)),this.ga=this.oa.bind(this),Zr(this.G),function(ut){var wt,xt,Ot;if(Yn.sendNonEssentialMetricEvents){var Vt=performance.getEntriesByName("GfnJsInitStart")[0];const Dt=performance.getEntriesByName("platformBegin")[0],Ft=performance.getEntriesByName("GfnRBegin")[0],Qt=performance.getEntriesByType("navigation");Vt=Math.round((wt=Vt==null?void 0:Vt.startTime)!==null&&wt!==void 0?wt:-1),wt=Math.round((xt=Dt==null?void 0:Dt.startTime)!==null&&xt!==void 0?xt:-1),Mo(ut.G,"PerformanceTiming","application timings",Vt,wt,Math.round((Ot=Ft==null?void 0:Ft.startTime)!==null&&Ot!==void 0?Ot:-1),wt-Vt),Qt.length?(xt=Qt[Qt.length-1],Mo(ut.G,"PerformanceTiming","load timings",Math.round(xt.loadEventStart),Math.round(xt.loadEventEnd),Math.round(xt.domContentLoadedEventStart),Math.round(xt.domContentLoadedEventEnd))):Mo(ut.G,"PerformanceTiming","navigation timings unsupported",0,0,0,0)}}(this),function(ut){if(navigator.mediaCapabilities){var wt=performance.now();Is("h264").then(async xt=>{if(xt){xt=Is("h264; profile-level-id=640033",2560,1440,60);var Ot=Is("h264; profile-level-id=64e033",2560,1440,60);xt=Fs(await xt),Ot=Fs(await Ot);const Ft=performance.now()-wt;var Vt=Qp(),Dt=Is("h264",1920,1080,120);Vt=Fs(await Vt),Dt=Fs(await Dt);const Qt=await su(Fl),rr=await um();ft.d("{9d1820c}","{1efbc27}",Qt,rr),Mo(ut.G,"DisplayCaps","Is120FpsSupported: "+rr,Qt,0,0,0),Mo(ut.G,"MediaCapabilities","codec 5.1: "+xt+" 5.1 constrained: "+Ot+" AV1: "+Vt,Ft,Dt,xt|Ot,Math.round(window.screen.height))}else Mo(ut.G,"MediaCapabilities","webrtc unsupported",performance.now()-wt,-1,-1,-1)})}else Mo(ut.G,"MediaCapabilities","API unsupported",-1,-1,-1,-1)}(this),Yn.sendNonEssentialMetricEvents&&Mo(this.G,"PlatformDetailsExecutionTime","",this.u.totalTime,0,0,0),Ss.registerCallback(ut=>{var wt;(wt=this.g)===null||wt===void 0||wt.setNetworkType(ut)}),this.u.deviceModel==="VISIONPRO"&&(k0=!0,N0())}qa(d){var ut;return ft.e("{9d1820c}","{8516485}",d.filename,d.lineno,d.colno),this.G.za(d.error,d.error&&d.error.message?d.error.message:d.message,d.filename,d.lineno,d.colno,!1),((ut=Yn.terminateUnhandledException)===null||ut===void 0||ut)&&Iy(this,3237093392),!1}ra(){var d,ut;this.fa||(this.fa=!0,Iy(this,((d=this.S)!==null&&d!==void 0?d:(ut=this.D)!==null&&ut!==void 0&&ut.H)?15867912:15867905))}xa(){ft.i("{9d1820c}","{a9a135f}"),ky(this.m)}Da(){var d;if(ft.i("{9d1820c}","{478a408}",document.visibilityState,!!this.D),this.D){var ut=this.v.ce[0].K,wt=jt(this.u,!1,15,4)&&cp,xt=jt(this.u,!1,15,4)&&this.l&&lp;document.visibilityState==="hidden"?(this.L=performance.now(),wt&&(ft.i("{9d1820c}","{cbd3b6e}"),ut.muted=!0),Qu(this)):document.visibilityState==="visible"&&(this.o+=performance.now()-this.L,wt&&(ft.i("{9d1820c}","{05deefa}"),ut.muted=!1),xt?(ut=(d=Yn.userTerminatedMicRecorderThreshold)!==null&&d!==void 0?d:2e3,this.L-this.j.O<ut?(ft.i("{9d1820c}","{862bd20}"),this.j.I=!0,this.setMicRecordingEnabled(!0)):this.l=!1):jt(this.u,!1,15,4)&&!this.j.o&&Gp(this.j)&&this.j.F&&Ou(this.j,"visibilityChange"))}}wa(d){ft.d("{9d1820c}","{972bb72}",JSON.stringify(d)),Wp(this.G,d)}ta(d){this.emit("ActiveSessionsResult",d)}ua(d){this.emit("ProgressUpdate",d)}va(d){this.emit("SessionUpdate",d)}initialize(d,ut=Ms){var wt,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt;if(ft.i("{9d1820c}","{2569364}","0.66.9"),ft.d("{9d1820c}","{e85ad66}",navigator.userAgent),!d)return ft.e("{9d1820c}","{a98b177}"),!1;Object.assign(this.h,d),(wt=this.g)===null||wt===void 0||wt.uninitialize(),!this.h.serverAddress||b(this.h.serverAddress)?(ft.d("{9d1820c}","{e2d9a04}"),this.g=new Ks):this.g=new Os(this.u,!0),d=this.g,ft.d("{9d1820c}","{3c652b7}"),A0(this),d.addListener("TelemetryEvent",this.wa.bind(this)),d.addListener("Log",this.$.bind(this)),d.addListener("ActiveSessionsResult",this.ta.bind(this)),d.addListener("ProgressUpdate",this.ua.bind(this)),d.addListener("SessionUpdate",this.va.bind(this)),this.h.clientHeaders=(rr=this.h.clientHeaders)!==null&&rr!==void 0?rr:new Map,(wt=(rr=Lo||this.h.clientType||"BROWSER")!=="NATIVE")&&this.h.clientHeaders.set("nv-browser-version",this.u.browserFullVer);var br=this.h.clientHeaders;for(var[Tr]of br){const Sr=Tr;Co&&Sr.toLowerCase()==="nv-device-os"&&br.set(Sr,Co),Do&&Sr.toLowerCase()==="nv-device-type"&&br.set(Sr,Do),fp.deviceModel&&Sr.toLowerCase()==="nv-device-model"&&br.set(Sr,fp.deviceModel),qo&&Sr.toLowerCase()==="nv-client-streamer"&&br.set(Sr,qo),Fo&&Sr.toLowerCase()==="nv-client-id"&&br.set(Sr,Fo)}return Tr={deviceOs:(nr=Co)!==null&&nr!==void 0?nr:this.u.deviceOS,deviceOsVer:this.u.osVer,deviceType:(lr=Do)!==null&&lr!==void 0?lr:this.u.deviceType,deviceModel:(Yt=fp.deviceModel)!==null&&Yt!==void 0?Yt:this.u.deviceModel,clientIdentification:(dr=this.h.clientIdentification)!==null&&dr!==void 0?dr:"GFN-PC",clientVersion:(ir=this.h.clientVersion)!==null&&ir!==void 0?ir:"29.0",clientAppVersion:this.h.clientAppVersion,clientStreamer:(Xt=qo)!==null&&Xt!==void 0?Xt:"WEBRTC",clientId:Fo||this.h.clientId,browserType:wt?this.u.browser.toUpperCase():void 0,clientPlatformName:zo||"browser",clientType:rr,deviceHashId:this.h.deviceHashId,serverAddress:this.h.serverAddress,authTokenCallback:this.h.authTokenCallback,clientHeaders:this.h.clientHeaders},d.initialize(Tr),d.setNetworkType(Ss.getCurrentNetworkType()),this.N={...ut},(xt=(Dt=this.N).windowedStreaming)!==null&&xt!==void 0||(Dt.windowedStreaming=this.h.windowedStreaming),(Ot=(Ft=this.N).windowedStreaming)!==null&&Ot!==void 0||(Ft.windowedStreaming=ut.cursorType===2),(Vt=(Qt=this.N).cursorType)!==null&&Vt!==void 0||(Qt.cursorType=this.h.cursorType),this.G.clientShutDownCallback=this.h.clientShutDownCallback,!0}downloadAudio(){this.ca.downloadAudio()}updateEventDataElements(d){var ut;ft.i("{9d1820c}","{4008dc4}",JSON.stringify(d)),this.m.updateEventDataElements(d),d.telemetryEventIds&&((ut=this.g)===null||ut===void 0||ut.updateTelemetryEventIds(d.telemetryEventIds)),this.D&&!this.P&&Qu(this)}getActiveSessions(){this.g?this.g.getAllActiveSessions():this.emit("ActiveSessionsResult",{sessionList:[],error:Yu("ActiveSessions")})}startSession(d){Ly(this,!1),(d=Dy(this,d))&&Oy(this,0,d)}updateAdState(d){var ut;return this.g?(ut=this.g)===null||ut===void 0?void 0:ut.updateAdState(d):3237093380}getSession(d){this.g?this.g.getSession(d,!1).then(ut=>{var wt,xt;let Ot={sessionId:(wt=ut==null?void 0:ut.sessionId)!==null&&wt!==void 0?wt:"",appId:ut==null?void 0:ut.appId,subSessionId:(xt=ut==null?void 0:ut.subSessionId)!==null&&xt!==void 0?xt:"",state:ut==null?void 0:ut.state,status:ut==null?void 0:ut.state};this.emit("GetSessionResult",Ot)}).catch(ut=>{var wt,xt;let Ot={sessionId:d,subSessionId:(xt=(wt=this.g)===null||wt===void 0?void 0:wt.getSubSessionId())!==null&&xt!==void 0?xt:"",error:ut};this.emit("GetSessionResult",Ot)}):this.emit("GetSessionResult",{sessionId:"",subSessionId:"",error:Yu("GetSession")})}resume(){this.resumeSession(this.v.la,this.g.getSessionId())}resumeSession(d,ut){Ly(this,!0),(d=Dy(this,d))&&Oy(this,2,d,ut)}stopSession(d,ut){var wt,xt,Ot,Vt,Dt,Ft,Qt;this.g?(ut!==void 0&&ft.i("{9d1820c}","{ae7f61b}",$(ut)),d===this.g.getSessionId()||d===void 0?(ut===15867910?this.aa=!0:this.Z=!1,Nu(this.j),this.framesDecoded=(xt=(wt=this.D)===null||wt===void 0?void 0:Ul(wt))!==null&&xt!==void 0?xt:0,Kl(this.F),wt=Wu(this,{sessionId:(Ot=this.g.getSessionId())!==null&&Ot!==void 0?Ot:"",subSessionId:(Vt=this.g.getSubSessionId())!==null&&Vt!==void 0?Vt:"",error:ut?{code:ut}:void 0,zoneName:(Dt=this.g.getZoneName())!==null&&Dt!==void 0?Dt:"",zoneAddress:this.g.getZoneAddress()||this.h.serverAddress,gpuType:(Ft=this.g.getGpuType())!==null&&Ft!==void 0?Ft:"",isResume:this.isResume},performance.now()-this.startTime),d=(Qt=this.g.getSessionId())!==null&&Qt!==void 0?Qt:"",this.D?(this.M=!1,C0(this),this.D.H&&E0(this,wt),T0(this,ut??(this.D.H?15859712:15867905)),ut===15867910?(ft.d("{9d1820c}","{12bc45e}",d),Ju(this,d)):this.sendDeleteRequest(d,this.g)):this.H?Ju(this,d):this.cancelSessionSetup()):d&&this.sendDeleteRequest(d,this.g)):this.emit("SessionStopResult",{sessionId:"",subSessionId:"",error:Yu("StopSession")})}pauseSession(d){this.stopSession(d,15867910)}startStreaming(d){var ut,wt,xt,Ot;const Vt={sessionId:(wt=(ut=this.g)===null||ut===void 0?void 0:ut.getSessionId())!==null&&wt!==void 0?wt:"",subSessionId:(Ot=(xt=this.g)===null||xt===void 0?void 0:xt.getSubSessionId())!==null&&Ot!==void 0?Ot:"",progressState:"StartingStreamer",queuePosition:0,eta:0,ads:[]};this.emit("SessionUpdate",Vt),this.emit("ProgressUpdate",{...Vt,state:Vt.progressState}),ut=b(this.h.serverAddress)?"":this.h.serverAddress.split(".")[0];const{K:Dt}=d.ce[0];if(jt(this.u,!1,15)){Dt.ragnarokOldPlay||(Dt.ragnarokOldPlay=Dt.play);const Ft=Xl&&jt(this.u,!0,15,1);Dt.play=()=>{if(bs&&(ft.i("{9d1820c}","{4a5b360}"),M0(this),function(Qt){if(bs)if(window.ios15AudioContext)ft.i("{9d1820c}","{e2aba64}");else{var rr=new(window.AudioContext||window.webkitAudioContext)({latencyHint:"interactive",sampleRate:48e3});rr.onstatechange=()=>{rr.state==="suspended"&&(rr.resume(),Qt.j.j(),ft.i("{9d1820c}","{faee684}"))},window.ios15AudioContext=rr,window.ios15AudioStream=rr.createMediaStreamDestination(),navigator.mediaDevices&&Qt.O&&navigator.mediaDevices.addEventListener("devicechange",Qt.O),ft.i("{9d1820c}","{b5f7b9b}")}}(this),this.j.j()),Ft){ft.i("{9d1820c}","{8f5cd77}");const Qt=Dt.srcObject;Dt.srcObject=null,Dt.srcObject=Qt}return Dt.ragnarokOldPlay.apply(Dt)}}Zl&&(jt(this.u,!0,15,0)||jt(this.u,!0,15,1))&&(Dt.hasAttribute("data-shouldautoplay")?Dt.setAttribute("autoplay",""):(Dt.setAttribute("data-shouldautoplay",""),Dt.removeAttribute("autoplay"))),this.D=new dy(this,Dt,void 0,this.j,this.N,this.da,this.C,this.G,this.u,this.H,d.la.streamParams[0],this.ca,this.h.textInputElement,this.h.clientAppVersion,this.isResume,ut,void 0,void 0,d.la.signalingUrlQueryParameters),this.D.start(),d.la.keyboardLayout&&this.D.setKeyboardLayout(d.la.keyboardLayout),function(Ft){return Ft.clientShutDownCallback?(ft.d("{9838627}","{c7dcc4e}"),function(Qt){return Qt.j?Promise.resolve([]):Qt.m.then(()=>y0(Qt.l,"exit-events")).then(rr=>{ft.i("{f7c1592}","{d938300}",rr.length);let nr=[];if(0<rr.length)for(const lr of rr)lr.eventPayload&&nr.push(lr.eventPayload);return nr}).catch(rr=>(wl(Qt,rr,"getCachedExitEvents",!0),Promise.reject()))}(Ft.j).then(Qt=>{for(const rr of Qt)nm(Ft,rr);w0(Ft.j)}).catch(()=>{ft.d("{9838627}","{41cf828}")})):(ft.d("{9838627}","{77df598}"),function(Qt){return Qt.j?Promise.resolve():Qt.m.then(()=>y0(Qt.l,"exit-events")).then(rr=>{if(ft.i("{f7c1592}","{ca568ff}",rr.length),0<rr.length){for(const nr of rr)nr.eventPayload&&My(S0(Qt,nr.eventPayload));w0(Qt)}}).catch(rr=>{wl(Qt,rr,"sendCachedExitEvent",!0)})}(Ft.j))}(this.G).then(()=>{Qu(this)}).catch(()=>{ft.e("{9d1820c}","{c761bfd}")})}Gc(d,ut){var wt,xt,Ot,Vt,Dt,Ft,Qt;if(d.error){const rr=m0(this.F,d.error.code);rr&&(d.error.code=hp(d.error.code,this.u)),$y(this,(wt=d.error)===null||wt===void 0?void 0:wt.code).then(nr=>{var lr,Yt,dr;this.framesDecoded=(Yt=(lr=this.D)===null||lr===void 0?void 0:Ul(lr))!==null&&Yt!==void 0?Yt:0,d.zoneAddress||(d.zoneAddress=this.h.serverAddress),d.error&&(d.error.code=nr.errorCode),lr=void 0,ut||(lr=Wu(this,d,0,nr.connectivity,rr),this.S=(dr=d.error)===null||dr===void 0?void 0:dr.code),Fy(this,d,!0,lr)})}else(function(rr,nr,lr,Yt,dr,ir,Xt,br,Tr,Sr){Wp(rr,{name:(nr=new em({zoneAddress:dr,networkSessionId:Sr,sessionId:nr,subSessionId:lr,resumeType:wu(Yt),overrideConfigType:xa.type,overrideConfigVersion:xa.version,result:Xt,codec:bu(br),ipVersion:"UNKNOWN",launchDuration:Math.round(ir),networkType:sr(Ss.getCurrentNetworkType()),streamingProfileGuid:Sy(rr.j),systemInfoGuid:Ay(rr.j),cmsId:Tr})).name,gdprLevel:nr.gdprLevel,parameters:nr.parameters,ts:nr.ts,clientConfig:Lu})})(this.G,d.sessionId,d.subSessionId,this.isResume,d.zoneAddress||this.h.serverAddress,Math.round(performance.now()-this.startTime),$(15859712),(Ot=(xt=this.D)===null||xt===void 0?void 0:Hl(xt))!==null&&Ot!==void 0?Ot:"UNKNOWN",this.v?String((Vt=this.v)===null||Vt===void 0?void 0:Vt.la.appId):"",(Ft=(Dt=this.v)===null||Dt===void 0?void 0:Dt.la.networkSessionId)!==null&&Ft!==void 0?Ft:""),this.startTime=performance.now(),document.visibilityState==="hidden"&&(this.L=this.startTime),this.o=0,this.isResume&&this.l&&this.setMicRecordingEnabled(!0),By(this,d),this.Z&&((Qt=this.D)===null||Qt===void 0||Qt.toggleUserInput(!0,this.pa)),it(this.u)&&document.addEventListener("SystemIdle",this.ga)}Cf(d){var ut,wt,xt;Nu(this.j),ft.d("{9d1820c}","{a94b484}");let Ot=m0(this.F,d.error.code);Ot&&(d.error.code=hp(d.error.code,this.u)),this.framesDecoded=(wt=(ut=this.D)===null||ut===void 0?void 0:Ul(ut))!==null&&wt!==void 0?wt:0,d.zoneAddress||(d.zoneAddress=this.h.serverAddress),$y(this,(xt=d.error)===null||xt===void 0?void 0:xt.code).then(Vt=>{var Dt;d.error.code=Vt.errorCode,Vt=Wu(this,d,performance.now()-this.startTime,Vt.connectivity,Ot),this.S=(Dt=d.error)===null||Dt===void 0?void 0:Dt.code,Mo(this.G,"HotPlug","",0,this.R,0,0),this.R=0,Fy(this,d,!1,Vt)})}Df(){Ny(this)}sendDeleteRequest(d,ut){ut.sendDeleteRequest(d).then(()=>{ft.d("{9d1820c}","{fee1eea}",d),Ju(this,d)},wt=>{ft.e("{9d1820c}","{50e2a6e}",d),Ju(this,d,wt)})}isMicSupported(){return au}setMicRecordingEnabled(d){ft.i("{9d1820c}","{f5b2f30}",d),d?(this.l=!0,Vu(this.j)):(this.l=!1,Kp(this.j))}getMicState(){var d;d=this.j,Ln!==!1&&(d.v||d.h==3||d.h==2||d.h==6||d.h==7?Qo(d,d.h):zp().then(ut=>{ut!==0&&Qo(d,ut)}))}shouldDefaultEnableMic(){return am(this.u)}sendCustomMessage(d){var ut;(ut=this.D)===null||ut===void 0||ut.sendCustomMessage(d)}toggleUserInput(d,ut){var wt;(wt=this.D)===null||wt===void 0||wt.toggleUserInput(d,ut),this.Z=d,this.pa=ut}toggleRsdmm(d){Mp(this.C,d)}getVirtualGamepadHandler(){var d;return(d=this.D)===null||d===void 0?void 0:d.getVirtualGamepadHandler()}setAuthInfo(d){var ut;(ut=this.g)===null||ut===void 0||ut.setAuthInfo(d)}sendTextInput(d){var ut;(ut=this.D)===null||ut===void 0||ut.sendTextInput(d)}setVirtualKeyboardState(d){var ut;(ut=this.D)===null||ut===void 0||ut.setVirtualKeyboardState(d)}setVideoTransforms(d,ut,wt){var xt;(xt=this.D)===null||xt===void 0||xt.setVideoTransforms(d,ut,wt)}toggleOnScreenStats(){var d;pn&&((d=this.D)===null||d===void 0||d.toggleOnScreenStats())}toggleStutterIndicator(){var d;(d=this.D)===null||d===void 0||d.toggleStutterIndicator()}setKeyboardLayout(d){var ut;ft.i("{9d1820c}","{10717a6}",d),(ut=this.D)===null||ut===void 0||ut.setKeyboardLayout(d)}sendKeyEvent(d){var ut;(ut=this.D)===null||ut===void 0||ut.sendKeyEvent(d)}setStreamingMaxBitrate(d,ut=0){var wt;(wt=this.D)===null||wt===void 0||wt.setStreamingMaxBitrate(ut,d)}setDrcDfcState(d,ut=0){var wt;(wt=this.D)===null||wt===void 0||wt.setDrcDfcState(ut,d?3:0)}oa(d){var ut;d.detail.idle&&((ut=this.D)===null||ut===void 0||h0(ut,2,60),this.T=window.setTimeout(()=>{var wt;(wt=this.D)===null||wt===void 0||Go(wt,15867913)},6e4))}na(){Xv(this.j,this.R),this.R++}cancelSessionSetup(){!this.D&&this.g&&this.g.cancelSessionSetup()}},window.Ragnarok.ChooseStreamingSettings=function(d=0,ut,wt){return $0(d,ut,q0(wt))},window.Ragnarok.ChooseStreamingResolution=function(d=0,ut){return $0(d,ut=ut==null?void 0:ut.map(wt=>({resolution:wt,frameRate:60})),q0()).resolution},window.Ragnarok.InitializeUtils=function(){for(const d of Su)d()},window.Ragnarok.GetSupportedAudioChannelCount=F0,window.Ragnarok.GetDeviceCapabilities=lm,window.Ragnarok.getSupportedCodecs=dm,window.Ragnarok.VirtualButton={A:4096,B:8192,X:16384,Y:32768,LB:256,RB:512,LT:255,RT:65280,BACK:32,START:16,STICK_LEFT:64,STICK_RIGHT:128,DPAD_UP:1,DPAD_DOWN:2,DPAD_LEFT:4,DPAD_RIGHT:8},window.Ragnarok.VirtualGamepadHandler=nv,window.Ragnarok.ConfigureRagnarokSettings=V0,window.Ragnarok.CHANGELIST="rel-66-17789033",window.Ragnarok.AuthType={NONE:-1,JARVIS:0,JWT_GFN:1,JWT_PARTNER:2},window.Ragnarok.performHttpRequest=It,window.Ragnarok.AddPlatformTelemetry=function(d){Zr(d)},window.Ragnarok.IsFeatureSupported=om,window.Ragnarok.CalculateMaxBitrateKbps=function(d,ut,wt){return Bu(d,ut,wt)[0]},window.Ragnarok.CalculateDataUsage=function(d,ut){return sm(d,ut)},window.Ragnarok.LogImpl=A1,window.Ragnarok.EVENTS={SESSION_START_RESULT:"SessionStartResult",SESSION_STOP_RESULT:"SessionStopResult",ACTIVE_SESSIONS_RESULT:"ActiveSessionsResult",PROGRESS_UPDATE:"ProgressUpdate",SESSION_UPDATE:"SessionUpdate",STREAM_STOPPED:"StreamStopped",STREAMING_EVENT:"StreamingEvent",GETSESSIONRESULT:"GetSessionResult",GET_SESSION_RESULT:"GetSessionResult",LOG_EVENT:"Log",STREAMING_QUALITY:"StreamingQuality",MIC_CAPTURE:"MicCapture",CUSTOM_MESSAGE:"CustomMessage",TEXT_COMPOSITION:"TextComposition",STREAM_STATS_UPDATE:"StreamStatsUpdate",TELEMETRY_EVENT:"TelemetryEvent"},window.Ragnarok.HotkeyModifier={None:0,Ctrl:1,Alt:2,Meta:4,Shift:8,Default:128},window.Ragnarok.defaultInputConfigFlags=Ms,window.Ragnarok.StreamingProfilePreset={BALANCED:0,DATASAVER:1,COMPETITIVE:2},window.Ragnarok.TrackType=Gs,window.Ragnarok.STREAMING_STATE={RECONNECTING:"reconnecting",RECONNECTED:"reconnected"},window.Ragnarok.RNotificationCode=ys,window.Ragnarok.ScErrorCode=hs,window.Ragnarok.configureSessionControlSettings=An,window.Ragnarok.DeviceType={DESKTOP:"DESKTOP",LAPTOP:"LAPTOP",TV:"TV",PHONE:"PHONE",TABLET:"TABLET",CONSOLE:"CONSOLE"},window.Ragnarok.DeviceOS={WINDOWS:"WINDOWS",MACOS:"MACOS",SHIELD:"SHIELD",ANDROID:"ANDROID",IOS:"IOS",IPADOS:"IPADOS",CHROMEOS:"CHROMEOS",LINUX:"LINUX",TIZEN:"TIZEN",WEBOS:"WEBOS",TVOS:"TVOS",XBOX:"XBOX",STEAMOS:"STEAMOS",CCOS:"CCOS"},window.Ragnarok.NetworkType={OTHER:"OTHER",ETHERNET:"ETHERNET",UNKNOWN:"UNKNOWN",WIFI:"WIFI",WIFI_2_4:"WIFI_2_4",WIFI_5_0:"WIFI_5_0",MOBILE:"MOBILE",MOBILE_2G:"MOBILE_2G",MOBILE_3G:"MOBILE_3G",MOBILE_4G:"MOBILE_4G",MOBILE_5G:"MOBILE_5G",WIMAX:"WIMAX",BLUETOOTH:"BLUETOOTH"},window.Ragnarok.registerLogCallback=function(d){ft.setLogCallback(d)},window.Ragnarok.LogLevel=Ml,window.Ragnarok.createSessionControl=function(d){const ut=new Tl;if(Sl(ut,d))return ut},window.Ragnarok.SdrHdrMode={SDR:0,HDR:1,EDR:2},window.Ragnarok.Usage={UNKNOWN:0,CONTROL:1,VIDEO:2,AUDIO:3,INPUT:4,CUSTOM:5,USB:6,RTSP:7,GAMESTREAM_CONTROL:8,GAMESTREAM_SECURE_CONTROL:9,SESSION_CONTROL:10,NETWORK_TEST_CONTROL:11,RTSPRU:12,AUDIO_INPUT:13,SIGNALING:14,MEDIA:15,RTSPS:16,BUNDLE:17},window.Ragnarok.Protocol={UNKNOWN:0,TCP:1,UDP:2},window.Ragnarok.AppLevelProtocol={UNKNOWN:0,RTSP:1,HTTP:2,RTSPRU:3,SOCKET:4,HTTPS:5,RTSPS:6},window.Ragnarok.AdState={UNKNOWN:0,NOT_STARTED:1,STARTED:2,PAUSED:3,RESUMED:4,FINISHED:5,CANCELED:6},window.Ragnarok.AdAction={UNKNOWN:0,START:1,PAUSE:2,RESUME:3,FINISH:4,CANCEL:5},window.Ragnarok.BitDepth={BIT_DEPTH_8:0,BIT_DEPTH_10:1},window.Ragnarok.ClientType={BROWSER:"BROWSER",GFNSDK:"GFNSDK",NATIVE:"NATIVE"},window.Ragnarok.SessionState={INITIALIZING:"initializing",READY_FOR_CONNECTION:"ready_for_connection",STREAMING:"streaming",PAUSED:"paused",RESUMING:"resuming",FINISHED:"finished",UNKNOWN:"unknown"},window.Ragnarok.SessionProgressState={CONNECTING:"Connecting",IN_QUEUE:"InQueue",CONFIGURING:"Configuring",PREVIOUS_SESSION_CLEANUP:"PreviousSessionCleanup",STARTING_STREAMER:"StartingStreamer"},window.Ragnarok.AppLaunchMode={Default:0,GamepadFriendly:1,TouchFriendly:2},window.Ragnarok.updateSessionParameters=function(d,ut){var wt;ut=JSON.parse(ut),d.monitorSettings=(wt=ut.clientRequestMonitorSettings)!==null&&wt!==void 0?wt:[],d.streamingFeatures=ut.requestedStreamingFeatures},window.Ragnarok.isCancelCode=$o,window.Ragnarok.isResumableSessionState=Es,window.Ragnarok.getResumableSession=function(d,ut){for(const wt of d)if(wt.appId===ut&&Es(wt.state))return wt},window.Ragnarok.SessionControlTelemetry=fo,window.Ragnarok.GsErrorCode=hs,window.Ragnarok.GridServerSettings=rn,window.Ragnarok.ConfigureGridServerSettings=function(d){An(d)},window.Ragnarok.BrowserName={UNKNOWN:"Unknown",CHROME:"Chrome",SAFARI:"Safari",YANDEX:"Yandex",EDGE:"Edge",EDGE_LEGACY:"Edge_Legacy",FIREFOX:"Firefox",SAMSUNG:"Samsung",CHROMIUM:"Chromium",OPERA:"Opera",BRAVE:"Brave",SILK:"Silk",REACT:"ReactNative"},window.Ragnarok.PlatformName={UNKNOWN:"Unknown",CHROME_OS:"ChromeOS",WINDOWS:"Windows",MAC:"macOS",LINUX:"Linux",IOS:"iOS",IPADOS:"iPadOS",WEBOS:"WebOS",TIZEN:"Tizen",ANDROID:"Android",FIRETV:"FireTV",XBOX:"Xbox",FREEBSD:"FreeBSD",STEAMOS:"SteamOS",CCOS:"ccOS"},window.Ragnarok.getPlatformDetails=$t,window.Ragnarok.DeviceModel={STEAMDECK:"STEAMDECK",XBOX_ONE:"XBOXONE",XBOX_SERIES:"XBOXSERIES",VISION_PRO:"VISIONPRO"},window.Ragnarok.DeviceVendor={APPLE:"APPLE",LG:"LG",SAMSUNG:"SAMSUNG",TIZEN_LICENSED:"TIZENLICENSED",MICROSOFT:"MICROSOFT",AMAZON:"AMAZON",HKMC:"HKMC",SONY:"SONY",PHILIPS:"PHILIPS",GOOGLE:"GOOGLE",NVIDIA:"NVIDIA",XIAOMI:"XIAOMI",TVISION:"TVISION",UNKNOWN:""},window.Ragnarok.CLIENT_VERSION="29.0",window.Ragnarok.CLIENT_IDENTIFICATION="GFN-PC",window.Ragnarok.SESSIONMODIFY_ACTION={UNKNOWN:0,PAUSE:1,RESUME:2,Pg:3,Ng:4,Mg:5,Lg:6,Qg:7},window.Ragnarok.AudioFormat={UNKNOWN:0,STEREO:1,UP_TO_5_1_SURROUND_PCM:2,UP_TO_7_1_SURROUND_PCM:3},window.Ragnarok.ClientStreamer={CLASSIC:"NVIDIA-CLASSIC",WEBRTC:"WEBRTC"},window.Ragnarok.GS_EVENTS={ACTIVE_SESSIONS_RESULT:"ActiveSessionsResult",PROGRESS_UPDATE:"ProgressUpdate",SESSION_UPDATE:"SessionUpdate",TELEMETRY_EVENT:"TelemetryEvent",LOG_EVENT:"Log"},window.Ragnarok.GridServer=Os,window.Ragnarok.PassThruServer=Ks,window.Ragnarok.VsyncType={OFF:0,ON:1,ADAPTIVE:2},window.Ragnarok.getDeviceCapabilities=lm,window.Ragnarok.serializeDeviceCapabilities=function(d){return JSON.stringify(d)},window.Ragnarok.PayloadOSType={WINDOWS:"Windows",MACOS:"MacOS",SHIELD:"Shield",ANDROID:"Android",IOS:"iOS",IPADOS:"iPadOS",CHROMEOS:"ChromeOS",LINUX:"Linux",TIZEN:"Tizen",WEBOS:"WebOS",TVOS:"tvOS",XBOX:"Xbox",STEAMOS:"SteamOS",UNDEFINED:"undefined"},window.Ragnarok.PayloadBrowserType={CHROME:"Chrome",SAFARI:"Safari",YANDEX:"Yandex",EDGE:"Edge",EDGE_LEGACY:"Edge_legacy",FIREFOX:"Firefox",SAMSUNG:"Samsung",CHROMIUM:"Chromium",OPERA:"Opera",BRAVE:"Brave",SILK:"Silk",UNDEFINED:"undefined"},window.Ragnarok.PayloadDeviceType={DESKTOP:"Desktop",LAPTOP:"Laptop",TV:"TV",PHONE:"Phone",TABLET:"Tablet",SERVER:"Server",CONSOLE:"Console",UNDEFINED:"undefined"},window.Ragnarok.ClientHeaderOSType={WINDOWS:"WINDOWS",MACOS:"MACOS",SHIELD:"SHIELD",ANDROID:"ANDROID",IOS:"IOS",IPADOS:"IPADOS",CHROMEOS:"CHROMEOS",LINUX:"LINUX",TIZEN:"TIZEN",WEBOS:"WEBOS",XBOX:"XBOX",STEAMOS:"STEAMOS",UNKNOWN:"UNKNOWN"},window.Ragnarok.ClientHeaderBrowserType={CHROME:"CHROME",SAFARI:"SAFARI",YANDEX:"YANDEX",EDGE:"EDGE",EDGE_LEGACY:"EDGE_LEGACY",FIREFOX:"FIREFOX",SAMSUNG:"SAMSUNG",CHROMIUM:"CHROMIUM",OPERA:"OPERA",BRAVE:"BRAVE",SILK:"SILK",UNKNOWN:"UNKNOWN"},window.Ragnarok.ClientHeaderDeviceType={DESKTOP:"DESKTOP",LAPTOP:"LAPTOP",TV:"TV",PHONE:"PHONE",TABLET:"TABLET",CONSOLE:"CONSOLE",UNKNOWN:"UNKNOWN"},window.Ragnarok.translatePlatformDetailsForPayload=function(d){return(Hn==null?void 0:Hn.h)!=d&&(Hn=new Rn(d)),Hn.m},window.Ragnarok.translatePlatformDetailsForClientHeader=function(d){return(Hn==null?void 0:Hn.h)!=d&&(Hn=new Rn(d)),Hn.o},window.Ragnarok.getStreamerType=function(){return"WEBRTC"},window.Ragnarok.BrowserFeature={Streaming:0,MicCapture:1},window.Ragnarok.isFeatureSupported=om,window.Ragnarok.shouldDefaultEnableMic=am,window.Ragnarok.getRecommendedBitrate=Bu,window.Ragnarok.getStreamStartParameters=function(d){const ut={downstreamParams:[],signalConnectionInfo:{address:"",port:0},enableTouchInput:(d=JSON.parse(d)).appLaunchMode===2,sessionId:d.sessionId,subSessionId:d.subSessionId,audioTagId:"",zoneAddress:d.zoneAddress,statTelemetryInfo:{appId:d.appId,zoneName:d.zoneName,gpuType:d.gpuType},streamingFeatures:d.finalizedStreamingFeatures};for(const wt of d.monitorSettings)ut.downstreamParams.push({width:wt.widthInPixels,height:wt.heightInPixels,fps:wt.framesPerSecond,videoTagId:"",sdrHdrMode:wt.sdrHdrMode});for(const wt of d.connectionInfo)switch(wt.usage){case 14:ut.signalConnectionInfo.address=wt.ip,ut.signalConnectionInfo.port=wt.port,ut.signalConnectionInfo.secure=wt.appLevelProtocol===5;break;case 2:case 17:ut.mediaConnectionInfo={address:wt.ip,port:wt.port}}return ut},window.Ragnarok.estimateDataUsage=sm,window.Ragnarok.NskTelemetry=Uo,window.Ragnarok.createNskStreamClient=function(d,ut,wt){return new class{constructor(xt,Ot,Vt){this.u=xt,this.h=Ot,this.R=Vt,this.H=new vy,this.O=new yy,this.startTime=this.streamingState=0,this.isResume=!1,this.o=this.C=this.v=0,this.zoneName=this.zoneAddress=this.subSessionId=this.sessionId="",this.m=!1,this.appId=0,this.L=Dt=>{var Ft;return ft.e("{0a9be04}","{8516485}",Dt.filename,Dt.lineno,Dt.colno),Uo.za(Dt.error,Dt.error&&Dt.error.message?Dt.error.message:Dt.message,Dt.filename,Dt.lineno,Dt.colno,!1),((Ft=Yn.terminateUnhandledException)===null||Ft===void 0||Ft)&&Gl(this,3237093392),!1},this.N=()=>{var Dt;if(ft.i("{0a9be04}","{478a408}",document.visibilityState,!!this.D),this.D){var Ft=this.K,Qt=this.Ea,rr=Ft&&Qt&&jt(this.u,!1,15,4)&&cp,nr=jt(this.u,!1,15,4)&&this.m&&lp;document.visibilityState==="hidden"?(this.C=performance.now(),rr&&(ft.i("{0a9be04}","{cbd3b6e}"),Ft.muted=!0,Qt.muted=!0)):document.visibilityState==="visible"&&(rr&&(ft.i("{0a9be04}","{05deefa}"),Ft.muted=!1,Qt.muted=!1),nr?(Ft=(Dt=Yn.userTerminatedMicRecorderThreshold)!==null&&Dt!==void 0?Dt:2e3,this.C-this.g.O<Ft?(ft.i("{0a9be04}","{862bd20}"),this.g.I=!0,this.captureMic(!0)):this.m=!1):jt(this.u,!1,15,4)&&!this.g.o&&Gp(this.g)&&this.g.F&&Ou(this.g,"visibilityChange"))}},this.M=()=>{var Dt,Ft;Gl(this,((Dt=this.P)!==null&&Dt!==void 0?Dt:(Ft=this.D)!==null&&Ft!==void 0&&Ft.H)?15867912:15867905)},this.F=()=>{Xv(this.g,this.o),this.o++},this.I=Dt=>{var Ft;Dt.detail.idle&&((Ft=this.D)===null||Ft===void 0||h0(Ft,2,60),this.v=window.setTimeout(()=>{var Qt;(Qt=this.D)===null||Qt===void 0||Go(Qt,15867913)},6e4))},this.s=()=>{this.g.j()},this.j=new Av(this.u,window.zoneless),this.g=new Zv(this.u,Uo),this.l=new hy(Uo),Jl&&(this.j.l.push(this.H),kp(this.j)),Zr(Uo),function(){var Dt,Ft,Qt;if(Yn.sendNonEssentialMetricEvents){var rr=performance.getEntriesByName("GfnJsInitStart")[0];const nr=performance.getEntriesByName("platformBegin")[0],lr=performance.getEntriesByName("GfnNskBegin")[0],Yt=performance.getEntriesByType("navigation");rr=Math.round((Dt=rr==null?void 0:rr.startTime)!==null&&Dt!==void 0?Dt:-1),Dt=Math.round((Ft=nr==null?void 0:nr.startTime)!==null&&Ft!==void 0?Ft:-1),Mo(Uo,"PerformanceTiming","application timings",rr,Dt,Math.round((Qt=lr==null?void 0:lr.startTime)!==null&&Qt!==void 0?Qt:-1),Dt-rr),Yt.length?(Ft=Yt[Yt.length-1],Mo(Uo,"PerformanceTiming","load timings",Math.round(Ft.loadEventStart),Math.round(Ft.loadEventEnd),Math.round(Ft.domContentLoadedEventStart),Math.round(Ft.domContentLoadedEventEnd))):Mo(Uo,"PerformanceTiming","navigation timings unsupported",0,0,0,0)}}(),function(){if(navigator.mediaCapabilities){var Dt=performance.now();Is("h264").then(async Ft=>{if(Ft){Ft=Is("h264; profile-level-id=640033",2560,1440,60);var Qt=Is("h264; profile-level-id=64e033",2560,1440,60);Ft=Fs(await Ft),Qt=Fs(await Qt);const lr=performance.now()-Dt;var rr=Qp(),nr=Is("h264",1920,1080,120);rr=Fs(await rr),nr=Fs(await nr);const Yt=await su(Fl),dr=await um();ft.d("{0a9be04}","{1efbc27}",Yt,dr),Mo(Uo,"DisplayCaps","Is120FpsSupported: "+dr,Yt,0,0,0),Mo(Uo,"MediaCapabilities","codec 5.1: "+Ft+" 5.1 constrained: "+Qt+" AV1: "+rr,lr,nr,Ft|Qt,Math.round(window.screen.height))}else Mo(Uo,"MediaCapabilities","webrtc unsupported",performance.now()-Dt,-1,-1,-1)})}else Mo(Uo,"MediaCapabilities","API unsupported",-1,-1,-1,-1)}(),Yn.sendNonEssentialMetricEvents&&Mo(Uo,"PlatformDetailsExecutionTime","",this.u.totalTime,0,0,0),ft.i("{0a9be04}","{2569364}","0.66.9"),ft.d("{0a9be04}","{e85ad66}",navigator.userAgent)}startStreaming(xt){var Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt,br,Tr,Sr;if(this.streamingState!==4&&this.streamingState!==0)return ft.w("{0a9be04}","{60a7ff5}"),jo(Uo,"SessionSetupInProgressError",xt.resume?"resume":"start"),3237085186;const Mr=function(gr){var Er;const _r={errorCode:void 0,streamParams:Object.assign({},gr),Ea:void 0,de:[]};if(0<_r.streamParams.downstreamParams.length||!gr.audioTagId){for(var cr of _r.streamParams.downstreamParams)(gr=document.getElementById(cr.videoTagId))&&gr instanceof HTMLVideoElement&&_r.de.push(gr);if(!_r.de.length)return{errorCode:3237094400}}else{if(!((cr=document.getElementById(gr.audioTagId))&&cr instanceof HTMLAudioElement))return{errorCode:3237094401};_r.Ea=cr}const kr=!!Vs&&!!Ns,Wr=!!xs;return(kr||Wr)&&((Er=_r.streamParams.downstreamParams)===null||Er===void 0||Er.forEach(gn=>{kr&&(gn.width=Vs,gn.height=Ns),Wr&&(gn.fps=xs)}),kr&&ft.i("{0a9be04}","{92a6b38}",Vs,Ns),Wr&&ft.d("{0a9be04}","{6618bcd}",xs)),_r}(xt);if(Mr.errorCode)return Mr.errorCode;if(xt=Mr.streamParams,this.K=Mr.de[0],this.Ea=Mr.Ea,this.isResume=(Ot=xt.resume)!==null&&Ot!==void 0&&Ot,this.sessionId=xt.sessionId,this.subSessionId=(Vt=xt.subSessionId)!==null&&Vt!==void 0?Vt:"",this.zoneAddress=(Dt=xt.zoneAddress)!==null&&Dt!==void 0?Dt:"",this.zoneName=(Qt=(Ft=xt.statTelemetryInfo)===null||Ft===void 0?void 0:Ft.zoneName)!==null&&Qt!==void 0?Qt:"",this.appId=(nr=(rr=xt.statTelemetryInfo)===null||rr===void 0?void 0:rr.appId)!==null&&nr!==void 0?nr:0,function(gr,Er,_r,cr,kr){var Wr=Uo;Wr.subSessionId=gr,Wr.sessionId=Er,Wr.cmsId=_r,Wr.isResume=cr,Wr.zoneAddress=kr}(this.subSessionId,this.sessionId,this.appId.toString(),this.isResume,this.zoneAddress),this.l.sessionId=this.sessionId,this.l.subSessionId=this.subSessionId,jt(this.u,!1,15)){const gr=this.K;gr.ragnarokOldPlay||(gr.ragnarokOldPlay=this.K.play);const Er=Xl&&jt(this.u,!0,15,1);this.K.play=()=>{var _r,cr,kr;if(bs&&(ft.i("{0a9be04}","{4a5b360}"),qy(this),function(Wr){if(bs)if(window.ios15AudioContext)ft.i("{0a9be04}","{e2aba64}");else{var gn=new(window.AudioContext||window.webkitAudioContext)({latencyHint:"interactive",sampleRate:48e3});gn.onstatechange=()=>{gn.state==="suspended"&&(gn.resume(),Wr.g.j(),ft.i("{0a9be04}","{faee684}"))},window.ios15AudioContext=gn,window.ios15AudioStream=gn.createMediaStreamDestination(),navigator.mediaDevices&&Wr.s&&navigator.mediaDevices.addEventListener("devicechange",Wr.s),ft.i("{0a9be04}","{b5f7b9b}")}}(this),this.g.j()),Er){ft.i("{0a9be04}","{8f5cd77}");const Wr=(cr=(_r=this.K)===null||_r===void 0?void 0:_r.srcObject)!==null&&cr!==void 0?cr:null;(kr=this.K)!==null&&kr!==void 0&&kr.srcObject&&(this.K.srcObject=null,this.K.srcObject=Wr)}return gr.ragnarokOldPlay.apply(this.K)}}return Zl&&(jt(this.u,!0,15,0)||jt(this.u,!0,15,1))&&(this.K.hasAttribute("data-shouldautoplay")?this.K.setAttribute("autoplay",""):(this.K.setAttribute("data-shouldautoplay",""),this.K.removeAttribute("autoplay"))),Dt={ip:"",port:0,appLevelProtocol:0,usage:0,protocol:0},xt.mediaConnectionInfo&&(Dt.ip=xt.mediaConnectionInfo.address,Dt.port=xt.mediaConnectionInfo.port,Dt.usage=2),Ft={ip:xt.signalConnectionInfo.address,port:xt.signalConnectionInfo.port,protocol:xt.signalConnectionInfo.secure?"wss":"ws"},Qt={width:(Ot=xt.downstreamParams[0]).width,height:Ot.height,fps:Ot.fps,sdrHdrMode:Ot.sdrHdrMode},Vt={appId:this.appId,appLaunchMode:xt.enableTouchInput?2:0,clientLocale:(Yt=(lr=xt.statTelemetryInfo)===null||lr===void 0?void 0:lr.clientLocale)!==null&&Yt!==void 0?Yt:"",gpuType:(ir=(dr=xt.statTelemetryInfo)===null||dr===void 0?void 0:dr.gpuType)!==null&&ir!==void 0?ir:"",mediaConnectionInfo:[Dt],sessionId:this.sessionId,signalConnectionInfo:Ft,state:"ready_for_connection",streamInfo:[Qt],subSessionId:this.subSessionId,zoneAddress:this.zoneAddress,zoneName:this.zoneName,finalizedStreamingFeatures:xt.streamingFeatures},lr={width:Ot.width,height:Ot.height,fps:Ot.fps,maxBitrateKbps:Ot.maxBitrateKbps,videoTagId:Ot.videoTagId,audioTagId:xt.audioTagId},(Xt=(Yt={...Ms}).windowedStreaming)!==null&&Xt!==void 0||(Yt.windowedStreaming=xt.windowedStreaming),(br=Yt.cursorType)!==null&&br!==void 0||(Yt.cursorType=xt.cursorType),this.D=new dy(this,this.K,this.Ea,this.g,Yt,this.H,this.j,Uo,this.u,Vt,lr,this.O,this.R.textInputElement,(Tr=xt.statTelemetryInfo)===null||Tr===void 0?void 0:Tr.clientAppVersion,this.isResume,(Sr=xt.statTelemetryInfo)===null||Sr===void 0?void 0:Sr.region,Ot.dynamicStreamingMode,xt.upstreamParams),function(gr){var Er,_r,cr,kr;const Wr=window.zoneless,gn=(_r=(Er=Wr==null?void 0:Wr.windowAddEventListener)===null||Er===void 0?void 0:Er.bind(window))!==null&&_r!==void 0?_r:window.addEventListener.bind(window);Er=(kr=(cr=Wr==null?void 0:Wr.documentAddEventListener)===null||cr===void 0?void 0:cr.bind(document))!==null&&kr!==void 0?kr:document.addEventListener.bind(document),gn("pagehide",gr.M),gn("error",gr.L),Er("visibilitychange",gr.N),navigator.mediaDevices&&navigator.mediaDevices.addEventListener("devicechange",gr.F),it(gr.u)&&Er("SystemIdle",gr.I)}(this),this.streamingState=1,fy(this.l),this.startTime=performance.now(),this.D.start(),xt.keyboardLayout&&this.D.setKeyboardLayout(xt.keyboardLayout),15859712}stopStreaming(xt){!this.D||this.streamingState!==1&&this.streamingState!==2||(xt=xt??15859712,ft.i("{0a9be04}","{ae7f61b}",$(xt)),this.streamingState=3,Gl(this,xt,!0))}getStreamingState(){return this.streamingState}sendCustomMessage(xt){var Ot;return(Ot=this.D)===null||Ot===void 0||Ot.sendCustomMessage(xt),!!this.D}setStreamingMaxBitrate(xt,Ot,Vt){var Dt;return(Dt=this.D)===null||Dt===void 0||Dt.setStreamingMaxBitrate(Ot??0,xt,Vt),!!this.D}setDynamicStreamingMode(xt,Ot,Vt){var Dt;return(Dt=this.D)===null||Dt===void 0||Dt.setDrcDfcState(Ot??0,xt,Vt),!!this.D}setKeyboardLayout(xt){var Ot;return(Ot=this.D)===null||Ot===void 0||Ot.setKeyboardLayout(xt),!!this.D}setSupportedHidTypes(xt){Ap(this.j,xt)}setGamepadRsdmm(xt){return!!this.D&&(Mp(this.j,xt),!0)}getVirtualInputController(){return this}getGamepadBitmap(){return Sv(this.j)}captureUserInput(xt,Ot){var Vt;return(Vt=this.D)===null||Vt===void 0||Vt.toggleUserInput(xt,Ot),!!this.D}sendTextInput(xt){var Ot;return(Ot=this.D)===null||Ot===void 0||Ot.sendTextInput(xt),!!this.D}getMicState(){return zp()}captureMic(xt){return!!this.D&&((this.m=xt)?Vu(this.g):Kp(this.g),!0)}setVideoTransforms(xt,Ot,Vt){var Dt;return(Dt=this.D)===null||Dt===void 0||Dt.setVideoTransforms(xt,Ot,Vt),!!this.D}setUpstreamMedia(xt,Ot){var Vt;return this.D?(Vt=this.D)===null||Vt===void 0?void 0:Vt.setUpstreamMedia(xt,Ot):Promise.resolve(!1)}unsetUpstreamMedia(xt){var Ot;return this.D?(Ot=this.D)===null||Ot===void 0?void 0:Ot.unsetUpstreamMedia(xt):Promise.resolve(!1)}stopUpstreamMedia(xt){var Ot;return this.D?(Ot=this.D)===null||Ot===void 0?void 0:Ot.stopUpstreamMedia(xt):Promise.resolve(!1)}Gc(xt){var Ot,Vt,Dt,Ft,Qt,rr,nr,lr;let Yt=15859712;if(xt.error)Yt=xt.error.code,this.h.onStreamStartFailed(Yt),Gl(this,Yt);else if((Ot=xt.streamInfo)!==null&&Ot!==void 0&&Ot.length&&(Vt=xt.streams)!==null&&Vt!==void 0&&Vt.length){this.streamingState=2,Ot={streams:[],separateAudioStream:!!xt.streams.find(dr=>{const ir=dr.tracks.find(Xt=>Xt.kind==="video");return dr=dr.tracks.find(Xt=>Xt.kind==="audio"),!ir&&dr})};for(const dr of xt.streamInfo)Vt={width:dr.width,height:dr.height,fps:dr.fps,sdrHdrMode:dr.sdrHdrMode,bitDepth:(Dt=xt.bitDepth)!==null&&Dt!==void 0?Dt:8,codec:(Ft=this.D)===null||Ft===void 0?void 0:Hl(Ft),videoTagId:(rr=(Qt=this.K)===null||Qt===void 0?void 0:Qt.tagName)!==null&&rr!==void 0?rr:""},Ot.streams.push(Vt);this.h.onStreamStarted(Ot),this.isResume&&this.m&&this.captureMic(!0)}else Yt=3237093905,ft.e("{0a9be04}","{0cfb100}"),this.h.onStreamStartFailed(Yt),Gl(this,Yt);(function(dr,ir,Xt){var br,Tr,Sr,Mr=Uo;const gr=new em({zoneAddress:Mr.zoneAddress,networkSessionId:(br=Mr.telemetryEventIds.networkTestId)!==null&&br!==void 0?br:"",sessionId:Mr.sessionId,subSessionId:Mr.subSessionId,resumeType:wu(Mr.isResume),overrideConfigType:xa.type,overrideConfigVersion:xa.version,result:ir,codec:bu(Xt),ipVersion:"UNKNOWN",launchDuration:Math.round(dr),networkType:sr(Ss.getCurrentNetworkType()),streamingProfileGuid:(Tr=Mr.telemetryEventIds.streamingProfileGuid)!==null&&Tr!==void 0?Tr:"",systemInfoGuid:(Sr=Mr.telemetryEventIds.systemInfoGuid)!==null&&Sr!==void 0?Sr:"",cmsId:Mr.cmsId});Mr.h(gr)})(Math.round(performance.now()-this.startTime),$(Yt),(lr=(nr=this.D)===null||nr===void 0?void 0:Hl(nr))!==null&&lr!==void 0?lr:"UNKNOWN"),this.startTime=performance.now()}Cf(xt){Gl(this,xt.error.code)}Df(){R0(this)}emit(xt,...Ot){if(Ot.length)switch(xt){case"StreamingEvent":this.h.onStreamWarning(Ot[0]);break;case"StreamingQuality":this.h.onStreamQuality(Ot[0]);break;case"MicCapture":this.h.onMicStateUpdate&&Ot[0].state!==void 0&&this.h.onMicStateUpdate(Ot[0].state);break;case"TextComposition":this.h.onTextComposition(Ot[0]);break;case"CustomMessage":this.h.onCustomMessage&&this.h.onCustomMessage(Ot[0]);break;case"StreamStatsUpdate":this.h.onStreamStatistics(Ot[0])}}addListener(){}removeListener(){}removeAllListeners(){}removeAllListenersOfEvent(){}hasListener(){return!0}setClientSupportsVirtualGamepad(){this.j.getVirtualGamepadHandler().enable()}handleVirtualGamepadState(xt,Ot,Vt){this.j.getVirtualGamepadHandler().updateInput(xt,Ot,Vt)}setVirtualKeyboardState(xt){var Ot;return(Ot=this.D)===null||Ot===void 0||Ot.setVirtualKeyboardState(xt),!!this.D}handleVirtualKeyInput(xt){var Ot;return(Ot=this.D)===null||Ot===void 0||Ot.sendKeyEvent(xt),!!this.D}}(d,ut,wt)},window.Ragnarok.configureRagnarokSettings=V0,window.Ragnarok.getNetworkTypeDetector=function(){return Ss},window.Ragnarok.RErrorCode={Success:15859712,AuthProviderError:3237085185,InvalidOperation:3237085186,NoNetwork:3237089281,NetworkError:3237089282,GetActiveSessionServerError:3237089283,ExceptionHappened:3237089284,AuthTokenNotUpdated:3237093377,SessionFinishedState:3237093378,ResponseParseFailure:3237093379,GridAppNotInitialized:3237093380,InvalidServerResponse:3237093381,PutOrPostInProgress:3237093382,GridServerNotInitialized:3237093383,DOMExceptionInGridServer:3237093384,InvalidAdStateTransition:3237093386,SessionServerErrorBegin:3237093632,RequestForbidden:3237093634,ServerInternalTimeout:3237093635,ServerInternalError:3237093636,ServerInvalidRequest:3237093637,ServerInvalidRequestVersion:3237093638,SessionListLimitExceeded:3237093639,InvalidRequestDataMalformed:3237093640,InvalidRequestDataMissing:3237093641,RequestLimitExceeded:3237093642,SessionLimitExceeded:3237093643,InvalidRequestVersionOutOfDate:3237093644,SessionEntitledTimeExceeded:3237093645,AuthFailure:3237093646,InvalidAuthenticationMalformed:3237093647,InvalidAuthenticationExpired:3237093648,InvalidAuthenticationNotFound:3237093649,EntitlementFailure:3237093650,InvalidAppIdNotAvailable:3237093651,InvalidAppIdNotFound:3237093652,InvalidSessionIdMalformed:3237093653,InvalidSessionIdNotFound:3237093654,EulaUnAccepted:3237093655,MaintenanceStatus:3237093656,ServiceUnAvailable:3237093657,SteamGuardRequired:3237093658,SteamLoginRequired:3237093659,SteamGuardInvalid:3237093660,SteamProfilePrivate:3237093661,InvalidCountryCode:3237093662,InvalidLanguageCode:3237093663,MissingCountryCode:3237093664,MissingLanguageCode:3237093665,SessionNotPaused:3237093666,EmailNotVerified:3237093667,InvalidAuthenticationUnsupportedProtocol:3237093668,InvalidAuthenticationUnknownToken:3237093669,InvalidAuthenticationCredentials:3237093670,SessionNotPlaying:3237093671,InvalidServiceResponse:3237093672,AppPatching:3237093673,GameNotFound:3237093674,NotEnoughCredits:3237093675,InvitationOnlyRegistration:3237093676,RegionNotSupportedForRegistration:3237093677,SessionTerminatedByAnotherClient:3237093678,DeviceIdAlreadyUsed:3237093679,ServiceNotExist:3237093680,SessionExpired:3237093681,SessionLimitPerDeviceReached:3237093682,ForwardingZoneOutOfCapacity:3237093683,RegionNotSupportedIndefinitely:3237093684,RegionBanned:3237093685,RegionOnHoldForFree:3237093686,RegionOnHoldForPaid:3237093687,AppMaintenanceStatus:3237093688,ResourcePoolNotConfigured:3237093689,InsufficientVmCapacity:3237093690,InsufficientRouteCapacity:3237093691,InsufficientScratchSpaceCapacity:3237093692,RequiredSeatInstanceTypeNotSupported:3237093693,ServerSessionQueueLengthExceeded:3237093694,RegionNotSupportedForStreaming:3237093695,SessionForwardRequestAllocationTimeExpired:3237093696,SessionForwardGameBinariesNotAvailable:3237093697,GameBinariesNotAvailableInRegion:3237093698,UekRetrievalFailed:3237093699,EntitlementFailureForResource:3237093700,SessionInQueueAbandoned:3237093701,MemberTerminated:3237093702,SessionRemovedFromQueueMaintenance:3237093703,ZoneMaintenanceStatus:3237093704,GuestModeCampaignDisabled:3237093705,RegionNotSupportedAnonymousAccess:3237093706,InstanceTypeNotSupportedInSingleRegion:3237093707,InvalidZoneForQueuedSession:3237093710,SessionWaitingAdsTimeExpired:3237093711,UserCancelledWatchingAds:3237093712,SessionServerErrorEnd:3237093887,StreamerErrorCategory:3237093888,StreamErrorGeneric:3237093889,StreamerSignInFailure:3237093890,StreamerHangingGetFailure:3237093891,StreamerNetworkError:3237093892,StreamerVideoPlayError:3237093893,StreamerIceConnectionFailed:3237093894,StreamerGetRemotePeerTimedOut:3237093895,StreamInputChannelError:3237093896,StreamCursorChannelError:3237093897,StreamControlChannelError:3237093898,StreamerReConnectionFailed:3237093899,StreamerNoVideoPacketsReceivedEver:3237093900,StreamerNoVideoFramesLossyNetwork:3237093901,StreamerSetSDPFailure:3237093902,StreamerNoLocalCandidates:3237093903,StreamerNoRemoteCandidates:3237093904,StreamerNoVideoTrack:3237093905,StreamerIceReConnectionFailed:3237093906,StreamerSignInTimeout:3237093907,StreamerSignInWorkerFailure:3237093908,StreamerNoTracksReceivedInSdp:3237093909,StreamerNvstSdpFailure:3237093910,StreamerNvstSdpParseFailure:3237093911,StreamerNoPeerInfo:3237093912,StreamerNoOffer:3237093913,StreamerNoAudioTrack:3237093914,StreamerInvalidRemoteConfigOverride:3237093915,StreamerInvalidServerOverride:3237093916,StreamerInvalidClientOverride:3237093917,StreamerConfigUpdateFailure:3237093918,StreamerInputChannelNotOpen:3237093919,StreamerCursorChannelNotOpen:3237093920,StreamerControlChannelNotOpen:3237093921,StreamerVideoAdapterInitTimeOut:3237093922,StreamerVideoFrameProviderInitTimeOut:3237093923,StreamerVideoEncoderInitTimeOut:3237093924,StreamerVideoSetupTimeOut:3237093925,StreamerNoStunResponsesReceived:3237093926,StreamerNoNominatedCandidatePairs:3237093927,StreamerNoSucceededCandidatePairs:3237093928,StreamGamepadChannelError:3237093929,StreamerGamepadChannelNotOpen:3237093936,StreamerNeedAudioElement:3237093937,SessionSetupCancelled:15867905,SessionSetupCancelledDuringQueuing:15867906,StreamerDataChannelClosing:15867907,SystemSleepDuringStreaming:15867908,SystemSleepDuringSessionSetup:15867909,PauseSession:15867910,DelayedSessionError:15867911,WebPageClosed:15867912,ClientDisconnectedUserIdle:15867913,UnhandledException:3237093392,NoInternetDuringSessionSetup:15868417,NoInternetDuringStreaming:15868418,StreamDisconnectedFromServer:15868672,ServerDisconnectedNoResponse:3237094145,ServerDisconnectedRemoteInputError:3237094146,ServerDisconnectedFrameGrabFailed:3237094147,ServerDisconnectedConfigUnAvailable:3237094148,ServerDisconnectedInvalidCommand:3237094149,ServerDisconnectedInvalidMouseState:3237094150,ServerDisconnectedNetworkError:3237094151,ServerDisconnectedGameLaunchFailed:3237094152,ServerDisconnectedVideoFirstFrameSendFailed:3237094153,ServerDisconnectedVideoNextFrameSendFailed:3237094154,ServerDisconnectedFrameGrabTimedOut:3237094155,ServerDisconnectedFrameEncodeTimedOut:3237094156,ServerDisconnectedFrameSendTimedOut:3237094157,ServerDisconnectedNetworkTimedOut:3237094158,ServerDisconnectedPeerRemovedByServer:3237094159,ServerDisconnectedUnknownError:3237094160,ServerDisconnectedPeerRemovedBeforeStream:3237094161,ServerDisconnectedIntended:15868704,ServerDisconnectedHotKey:15868705,ServerDisconnectedUserLoggedInDifferentAccount:15868706,ServerDisconnectedWindowedMode:15868707,ServerDisconnectedUserIdle:15868708,ServerDisconnectedUnAuthorizedProcessDetected:15868709,ServerDisconnectedMaliciousProcessDetected:15868710,ServerDisconnectedUnKnownProcessDetected:15868711,ServerDisconnectedMinerProcessDetected:15868712,ServerDisconnectedStreamingUnsupported:15868713,ServerDisconnectedAnotherClient:15868714,ServerDisconnectedCodeIntegrityViolation:15868715,ServerDisconnectedUnauthorizedActivityDetected:15868716,ServerDisconnectedGameNotOwnedByUser:15868717,ServerDisconnectedProtectedContent:15868718,ServerDisconnectedDisplayTopologyChanged:15868719,ServerDisconnectedAbruptly:15868688,ServerDisconnectedUnknownFromPm:15868736,ServerDisconnectedUserEntitledMinutesExceeded:15868737,ServerDisconnectedClientReconnectTimeLimitExceeded:15868738,ServerDisconnectedOperatorCommandedTermination:15868739,ServerDisconnectedConcurrentSessionLimitExceeded:15868740,ServerDisconnectedMaxSessionTimeLimitExceeded:15868741,ServerDisconnectedBifrostInitiatedSessionPause:15868742,ServerDisconnectedSystemCommandTermination:15868743,ServerDisconnectedMultipleLogin:15868744,ServerDisconnectedMaintenanceMode:15868745,ServerDisconnectedMultipleTab:15868752,InvalidVideoElement:3237094400,InvalidAudioElement:3237094401},window.Ragnarok.HidType={NONE:0,DS4:1,DS5:2},window.Ragnarok.InputType={None:0,Mouse:1,Keyboard:2,Gamepad:4,Touch:8,All:15},window.Ragnarok.VideoCodecType={H264:"H264",H265:"H265",AV1:"AV1",UNKNOWN:"UNKNOWN"},window.Ragnarok.MicState={UNINITIALIZED:0,PERMISSION_PENDING:1,PERMISSION_DENIED:2,STARTED:3,NO_SUITABLE_DEVICE:4,STOPPED:5,UNSUPPORTED:6,ERROR:7},window.Ragnarok.DynamicStreamingMode={NONE:0,DRC:1,DFC:2,ALL:3},window.Ragnarok.MediaTrackKind=Gs,window.Ragnarok.StreamStopReason={CLIENT_DISCONNECTED:0,SERVER_DISCONNECTED:1,NETWORK_ERROR:2,ERROR:3},window.Ragnarok.StreamWarningType=ys,window.Ragnarok.CursorType={SOFTWARE:0,HARDWARE:1,FREE:2},window.Ragnarok.StreamingState={NONE:0,STARTING_STREAM:1,STREAMING:2,STOPPING_STREAM:3,STOPPED:4}},134:(mt,vt,tt)=>{var bt=tt(985);function ht(_t,Rt,Mt,Et,kt){var at=bt.writeRtpDescription(_t.kind,Rt);if(at+=bt.writeIceParameters(_t.iceGatherer.getLocalParameters()),at+=bt.writeDtlsParameters(_t.dtlsTransport.getLocalParameters(),Mt==="offer"?"actpass":kt||"active"),at+="a=mid:"+_t.mid+`\r
`,_t.rtpSender&&_t.rtpReceiver?at+=`a=sendrecv\r
`:_t.rtpSender?at+=`a=sendonly\r
`:_t.rtpReceiver?at+=`a=recvonly\r
`:at+=`a=inactive\r
`,_t.rtpSender){var s=_t.rtpSender._initialTrackId||_t.rtpSender.track.id;_t.rtpSender._initialTrackId=s;var b="msid:"+(Et?Et.id:"-")+" "+s+`\r
`;at+="a="+b,at+="a=ssrc:"+_t.sendEncodingParameters[0].ssrc+" "+b,_t.sendEncodingParameters[0].rtx&&(at+="a=ssrc:"+_t.sendEncodingParameters[0].rtx.ssrc+" "+b,at+="a=ssrc-group:FID "+_t.sendEncodingParameters[0].ssrc+" "+_t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return at+="a=ssrc:"+_t.sendEncodingParameters[0].ssrc+" cname:"+bt.localCName+`\r
`,_t.rtpSender&&_t.sendEncodingParameters[0].rtx&&(at+="a=ssrc:"+_t.sendEncodingParameters[0].rtx.ssrc+" cname:"+bt.localCName+`\r
`),at}function St(_t,Rt){var Mt={codecs:[],headerExtensions:[],fecMechanisms:[]},Et=function(at,s){at=parseInt(at,10);for(var b=0;b<s.length;b++)if(s[b].payloadType===at||s[b].preferredPayloadType===at)return s[b]},kt=function(at,s,b,$){var _e=Et(at.parameters.apt,b),it=Et(s.parameters.apt,$);return _e&&it&&_e.name.toLowerCase()===it.name.toLowerCase()};return _t.codecs.forEach(function(at){for(var s=0;s<Rt.codecs.length;s++){var b=Rt.codecs[s];if(at.name.toLowerCase()===b.name.toLowerCase()&&at.clockRate===b.clockRate){if(at.name.toLowerCase()==="rtx"&&at.parameters&&b.parameters.apt&&!kt(at,b,_t.codecs,Rt.codecs))continue;(b=JSON.parse(JSON.stringify(b))).numChannels=Math.min(at.numChannels,b.numChannels),Mt.codecs.push(b),b.rtcpFeedback=b.rtcpFeedback.filter(function($){for(var _e=0;_e<at.rtcpFeedback.length;_e++)if(at.rtcpFeedback[_e].type===$.type&&at.rtcpFeedback[_e].parameter===$.parameter)return!0;return!1});break}}}),_t.headerExtensions.forEach(function(at){for(var s=0;s<Rt.headerExtensions.length;s++){var b=Rt.headerExtensions[s];if(at.uri===b.uri){Mt.headerExtensions.push(b);break}}}),Mt}function At(_t,Rt,Mt){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[Rt][_t].indexOf(Mt)!==-1}function Tt(_t,Rt){var Mt=_t.getRemoteCandidates().find(function(Et){return Rt.foundation===Et.foundation&&Rt.ip===Et.ip&&Rt.port===Et.port&&Rt.priority===Et.priority&&Rt.protocol===Et.protocol&&Rt.type===Et.type});return Mt||_t.addRemoteCandidate(Rt),!Mt}function ft(_t,Rt){var Mt=new Error(Rt);return Mt.name=_t,Mt.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[_t],Mt}mt.exports=function(_t,Rt){function Mt(s,b){b.addTrack(s),b.dispatchEvent(new _t.MediaStreamTrackEvent("addtrack",{track:s}))}function Et(s,b,$,_e){var it=new Event("track");it.track=b,it.receiver=$,it.transceiver={receiver:$},it.streams=_e,_t.setTimeout(function(){s._dispatchEvent("track",it)})}var kt=function(s){var b=this,$=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(it){b[it]=$[it].bind($)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",s=JSON.parse(JSON.stringify(s||{})),this.usingBundle=s.bundlePolicy==="max-bundle",s.rtcpMuxPolicy==="negotiate")throw ft("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(s.rtcpMuxPolicy||(s.rtcpMuxPolicy="require"),s.iceTransportPolicy){case"all":case"relay":break;default:s.iceTransportPolicy="all"}switch(s.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:s.bundlePolicy="balanced"}if(s.iceServers=function(it,pt){var yt=!1;return(it=JSON.parse(JSON.stringify(it))).filter(function(ct){if(ct&&(ct.urls||ct.url)){var _=ct.urls||ct.url;ct.url&&!ct.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var rt=typeof _=="string";return rt&&(_=[_]),_=_.filter(function(Ct){return Ct.indexOf("turn:")!==0||Ct.indexOf("transport=udp")===-1||Ct.indexOf("turn:[")!==-1||yt?Ct.indexOf("stun:")===0&&pt>=14393&&Ct.indexOf("?transport=udp")===-1:(yt=!0,!0)}),delete ct.url,ct.urls=rt?_[0]:_,!!_.length}})}(s.iceServers||[],Rt),this._iceGatherers=[],s.iceCandidatePoolSize)for(var _e=s.iceCandidatePoolSize;_e>0;_e--)this._iceGatherers.push(new _t.RTCIceGatherer({iceServers:s.iceServers,gatherPolicy:s.iceTransportPolicy}));else s.iceCandidatePoolSize=0;this._config=s,this.transceivers=[],this._sdpSessionId=bt.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(kt.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(kt.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),kt.prototype.onicecandidate=null,kt.prototype.onaddstream=null,kt.prototype.ontrack=null,kt.prototype.onremovestream=null,kt.prototype.onsignalingstatechange=null,kt.prototype.oniceconnectionstatechange=null,kt.prototype.onconnectionstatechange=null,kt.prototype.onicegatheringstatechange=null,kt.prototype.onnegotiationneeded=null,kt.prototype.ondatachannel=null,kt.prototype._dispatchEvent=function(s,b){this._isClosed||(this.dispatchEvent(b),typeof this["on"+s]=="function"&&this["on"+s](b))},kt.prototype._emitGatheringStateChange=function(){var s=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",s)},kt.prototype.getConfiguration=function(){return this._config},kt.prototype.getLocalStreams=function(){return this.localStreams},kt.prototype.getRemoteStreams=function(){return this.remoteStreams},kt.prototype._createTransceiver=function(s,b){var $=this.transceivers.length>0,_e={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:s,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&$)_e.iceTransport=this.transceivers[0].iceTransport,_e.dtlsTransport=this.transceivers[0].dtlsTransport;else{var it=this._createIceAndDtlsTransports();_e.iceTransport=it.iceTransport,_e.dtlsTransport=it.dtlsTransport}return b||this.transceivers.push(_e),_e},kt.prototype.addTrack=function(s,b){if(this._isClosed)throw ft("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var $;if(this.transceivers.find(function(it){return it.track===s}))throw ft("InvalidAccessError","Track already exists.");for(var _e=0;_e<this.transceivers.length;_e++)this.transceivers[_e].track||this.transceivers[_e].kind!==s.kind||($=this.transceivers[_e]);return $||($=this._createTransceiver(s.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(b)===-1&&this.localStreams.push(b),$.track=s,$.stream=b,$.rtpSender=new _t.RTCRtpSender(s,$.dtlsTransport),$.rtpSender},kt.prototype.addStream=function(s){var b=this;if(Rt>=15025)s.getTracks().forEach(function(_e){b.addTrack(_e,s)});else{var $=s.clone();s.getTracks().forEach(function(_e,it){var pt=$.getTracks()[it];_e.addEventListener("enabled",function(yt){pt.enabled=yt.enabled})}),$.getTracks().forEach(function(_e){b.addTrack(_e,$)})}},kt.prototype.removeTrack=function(s){if(this._isClosed)throw ft("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(s instanceof _t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var b=this.transceivers.find(function(_e){return _e.rtpSender===s});if(!b)throw ft("InvalidAccessError","Sender was not created by this connection.");var $=b.stream;b.rtpSender.stop(),b.rtpSender=null,b.track=null,b.stream=null,this.transceivers.map(function(_e){return _e.stream}).indexOf($)===-1&&this.localStreams.indexOf($)>-1&&this.localStreams.splice(this.localStreams.indexOf($),1),this._maybeFireNegotiationNeeded()},kt.prototype.removeStream=function(s){var b=this;s.getTracks().forEach(function($){var _e=b.getSenders().find(function(it){return it.track===$});_e&&b.removeTrack(_e)})},kt.prototype.getSenders=function(){return this.transceivers.filter(function(s){return!!s.rtpSender}).map(function(s){return s.rtpSender})},kt.prototype.getReceivers=function(){return this.transceivers.filter(function(s){return!!s.rtpReceiver}).map(function(s){return s.rtpReceiver})},kt.prototype._createIceGatherer=function(s,b){var $=this;if(b&&s>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var _e=new _t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(_e,"state",{value:"new",writable:!0}),this.transceivers[s].bufferedCandidateEvents=[],this.transceivers[s].bufferCandidates=function(it){var pt=!it.candidate||Object.keys(it.candidate).length===0;_e.state=pt?"completed":"gathering",$.transceivers[s].bufferedCandidateEvents!==null&&$.transceivers[s].bufferedCandidateEvents.push(it)},_e.addEventListener("localcandidate",this.transceivers[s].bufferCandidates),_e},kt.prototype._gather=function(s,b){var $=this,_e=this.transceivers[b].iceGatherer;if(!_e.onlocalcandidate){var it=this.transceivers[b].bufferedCandidateEvents;this.transceivers[b].bufferedCandidateEvents=null,_e.removeEventListener("localcandidate",this.transceivers[b].bufferCandidates),_e.onlocalcandidate=function(pt){if(!($.usingBundle&&b>0)){var yt=new Event("icecandidate");yt.candidate={sdpMid:s,sdpMLineIndex:b};var ct=pt.candidate,_=!ct||Object.keys(ct).length===0;if(_)_e.state!=="new"&&_e.state!=="gathering"||(_e.state="completed");else{_e.state==="new"&&(_e.state="gathering"),ct.component=1,ct.ufrag=_e.getLocalParameters().usernameFragment;var rt=bt.writeCandidate(ct);yt.candidate=Object.assign(yt.candidate,bt.parseCandidate(rt)),yt.candidate.candidate=rt,yt.candidate.toJSON=function(){return{candidate:yt.candidate.candidate,sdpMid:yt.candidate.sdpMid,sdpMLineIndex:yt.candidate.sdpMLineIndex,usernameFragment:yt.candidate.usernameFragment}}}var Ct=bt.getMediaSections($._localDescription.sdp);Ct[yt.candidate.sdpMLineIndex]+=_?`a=end-of-candidates\r
`:"a="+yt.candidate.candidate+`\r
`,$._localDescription.sdp=bt.getDescription($._localDescription.sdp)+Ct.join("");var It=$.transceivers.every(function(Nt){return Nt.iceGatherer&&Nt.iceGatherer.state==="completed"});$.iceGatheringState!=="gathering"&&($.iceGatheringState="gathering",$._emitGatheringStateChange()),_||$._dispatchEvent("icecandidate",yt),It&&($._dispatchEvent("icecandidate",new Event("icecandidate")),$.iceGatheringState="complete",$._emitGatheringStateChange())}},_t.setTimeout(function(){it.forEach(function(pt){_e.onlocalcandidate(pt)})},0)}},kt.prototype._createIceAndDtlsTransports=function(){var s=this,b=new _t.RTCIceTransport(null);b.onicestatechange=function(){s._updateIceConnectionState(),s._updateConnectionState()};var $=new _t.RTCDtlsTransport(b);return $.ondtlsstatechange=function(){s._updateConnectionState()},$.onerror=function(){Object.defineProperty($,"state",{value:"failed",writable:!0}),s._updateConnectionState()},{iceTransport:b,dtlsTransport:$}},kt.prototype._disposeIceAndDtlsTransports=function(s){var b=this.transceivers[s].iceGatherer;b&&(delete b.onlocalcandidate,delete this.transceivers[s].iceGatherer);var $=this.transceivers[s].iceTransport;$&&(delete $.onicestatechange,delete this.transceivers[s].iceTransport);var _e=this.transceivers[s].dtlsTransport;_e&&(delete _e.ondtlsstatechange,delete _e.onerror,delete this.transceivers[s].dtlsTransport)},kt.prototype._transceive=function(s,b,$){var _e=St(s.localCapabilities,s.remoteCapabilities);b&&s.rtpSender&&(_e.encodings=s.sendEncodingParameters,_e.rtcp={cname:bt.localCName,compound:s.rtcpParameters.compound},s.recvEncodingParameters.length&&(_e.rtcp.ssrc=s.recvEncodingParameters[0].ssrc),s.rtpSender.send(_e)),$&&s.rtpReceiver&&_e.codecs.length>0&&(s.kind==="video"&&s.recvEncodingParameters&&Rt<15019&&s.recvEncodingParameters.forEach(function(it){delete it.rtx}),s.recvEncodingParameters.length?_e.encodings=s.recvEncodingParameters:_e.encodings=[{}],_e.rtcp={compound:s.rtcpParameters.compound},s.rtcpParameters.cname&&(_e.rtcp.cname=s.rtcpParameters.cname),s.sendEncodingParameters.length&&(_e.rtcp.ssrc=s.sendEncodingParameters[0].ssrc),s.rtpReceiver.receive(_e))},kt.prototype.setLocalDescription=function(s){var b,$,_e=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(ft("TypeError",'Unsupported type "'+s.type+'"'));if(!At("setLocalDescription",s.type,_e.signalingState)||_e._isClosed)return Promise.reject(ft("InvalidStateError","Can not set local "+s.type+" in state "+_e.signalingState));if(s.type==="offer")b=bt.splitSections(s.sdp),$=b.shift(),b.forEach(function(pt,yt){var ct=bt.parseRtpParameters(pt);_e.transceivers[yt].localCapabilities=ct}),_e.transceivers.forEach(function(pt,yt){_e._gather(pt.mid,yt)});else if(s.type==="answer"){b=bt.splitSections(_e._remoteDescription.sdp),$=b.shift();var it=bt.matchPrefix($,"a=ice-lite").length>0;b.forEach(function(pt,yt){var ct=_e.transceivers[yt],_=ct.iceGatherer,rt=ct.iceTransport,Ct=ct.dtlsTransport,It=ct.localCapabilities,Nt=ct.remoteCapabilities;if(!(bt.isRejected(pt)&&bt.matchPrefix(pt,"a=bundle-only").length===0||ct.rejected)){var Ut=bt.getIceParameters(pt,$),Gt=bt.getDtlsParameters(pt,$);it&&(Gt.role="server"),_e.usingBundle&&yt!==0||(_e._gather(ct.mid,yt),rt.state==="new"&&rt.start(_,Ut,it?"controlling":"controlled"),Ct.state==="new"&&Ct.start(Gt));var Pt=St(It,Nt);_e._transceive(ct,Pt.codecs.length>0,!1)}})}return _e._localDescription={type:s.type,sdp:s.sdp},s.type==="offer"?_e._updateSignalingState("have-local-offer"):_e._updateSignalingState("stable"),Promise.resolve()},kt.prototype.setRemoteDescription=function(s){var b=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(ft("TypeError",'Unsupported type "'+s.type+'"'));if(!At("setRemoteDescription",s.type,b.signalingState)||b._isClosed)return Promise.reject(ft("InvalidStateError","Can not set remote "+s.type+" in state "+b.signalingState));var $={};b.remoteStreams.forEach(function(rt){$[rt.id]=rt});var _e=[],it=bt.splitSections(s.sdp),pt=it.shift(),yt=bt.matchPrefix(pt,"a=ice-lite").length>0,ct=bt.matchPrefix(pt,"a=group:BUNDLE ").length>0;b.usingBundle=ct;var _=bt.matchPrefix(pt,"a=ice-options:")[0];return b.canTrickleIceCandidates=!!_&&_.substr(14).split(" ").indexOf("trickle")>=0,it.forEach(function(rt,Ct){var It=bt.splitLines(rt),Nt=bt.getKind(rt),Ut=bt.isRejected(rt)&&bt.matchPrefix(rt,"a=bundle-only").length===0,Gt=It[0].substr(2).split(" ")[2],Pt=bt.getDirection(rt,pt),qt=bt.parseMsid(rt),Kt=bt.getMid(rt)||bt.generateIdentifier();if(Ut||Nt==="application"&&(Gt==="DTLS/SCTP"||Gt==="UDP/DTLS/SCTP"))b.transceivers[Ct]={mid:Kt,kind:Nt,protocol:Gt,rejected:!0};else{var jt,Ht,Bt,Jt,sr,hr,Ar,yn,Lr;!Ut&&b.transceivers[Ct]&&b.transceivers[Ct].rejected&&(b.transceivers[Ct]=b._createTransceiver(Nt,!0));var wr,En,Dr=bt.parseRtpParameters(rt);Ut||(wr=bt.getIceParameters(rt,pt),(En=bt.getDtlsParameters(rt,pt)).role="client"),Ar=bt.parseRtpEncodingParameters(rt);var Qr=bt.parseRtcpParameters(rt),Bn=bt.matchPrefix(rt,"a=end-of-candidates",pt).length>0,Br=bt.matchPrefix(rt,"a=candidate:").map(function(Fr){return bt.parseCandidate(Fr)}).filter(function(Fr){return Fr.component===1});if((s.type==="offer"||s.type==="answer")&&!Ut&&ct&&Ct>0&&b.transceivers[Ct]&&(b._disposeIceAndDtlsTransports(Ct),b.transceivers[Ct].iceGatherer=b.transceivers[0].iceGatherer,b.transceivers[Ct].iceTransport=b.transceivers[0].iceTransport,b.transceivers[Ct].dtlsTransport=b.transceivers[0].dtlsTransport,b.transceivers[Ct].rtpSender&&b.transceivers[Ct].rtpSender.setTransport(b.transceivers[0].dtlsTransport),b.transceivers[Ct].rtpReceiver&&b.transceivers[Ct].rtpReceiver.setTransport(b.transceivers[0].dtlsTransport)),s.type!=="offer"||Ut)s.type!=="answer"||Ut||(Ht=(jt=b.transceivers[Ct]).iceGatherer,Bt=jt.iceTransport,Jt=jt.dtlsTransport,sr=jt.rtpReceiver,hr=jt.sendEncodingParameters,yn=jt.localCapabilities,b.transceivers[Ct].recvEncodingParameters=Ar,b.transceivers[Ct].remoteCapabilities=Dr,b.transceivers[Ct].rtcpParameters=Qr,Br.length&&Bt.state==="new"&&(!yt&&!Bn||ct&&Ct!==0?Br.forEach(function(Fr){Tt(jt.iceTransport,Fr)}):Bt.setRemoteCandidates(Br)),ct&&Ct!==0||(Bt.state==="new"&&Bt.start(Ht,wr,"controlling"),Jt.state==="new"&&Jt.start(En)),!St(jt.localCapabilities,jt.remoteCapabilities).codecs.filter(function(Fr){return Fr.name.toLowerCase()==="rtx"}).length&&jt.sendEncodingParameters[0].rtx&&delete jt.sendEncodingParameters[0].rtx,b._transceive(jt,Pt==="sendrecv"||Pt==="recvonly",Pt==="sendrecv"||Pt==="sendonly"),!sr||Pt!=="sendrecv"&&Pt!=="sendonly"?delete jt.rtpReceiver:(Lr=sr.track,qt?($[qt.stream]||($[qt.stream]=new _t.MediaStream),Mt(Lr,$[qt.stream]),_e.push([Lr,sr,$[qt.stream]])):($.default||($.default=new _t.MediaStream),Mt(Lr,$.default),_e.push([Lr,sr,$.default]))));else{(jt=b.transceivers[Ct]||b._createTransceiver(Nt)).mid=Kt,jt.iceGatherer||(jt.iceGatherer=b._createIceGatherer(Ct,ct)),Br.length&&jt.iceTransport.state==="new"&&(!Bn||ct&&Ct!==0?Br.forEach(function(Fr){Tt(jt.iceTransport,Fr)}):jt.iceTransport.setRemoteCandidates(Br)),yn=_t.RTCRtpReceiver.getCapabilities(Nt),Rt<15019&&(yn.codecs=yn.codecs.filter(function(Fr){return Fr.name!=="rtx"})),hr=jt.sendEncodingParameters||[{ssrc:1001*(2*Ct+2)}];var Gr,Dn=!1;Pt==="sendrecv"||Pt==="sendonly"?(Dn=!jt.rtpReceiver,sr=jt.rtpReceiver||new _t.RTCRtpReceiver(jt.dtlsTransport,Nt),Dn&&(Lr=sr.track,qt&&qt.stream==="-"||(qt?($[qt.stream]||($[qt.stream]=new _t.MediaStream,Object.defineProperty($[qt.stream],"id",{get:function(){return qt.stream}})),Object.defineProperty(Lr,"id",{get:function(){return qt.track}}),Gr=$[qt.stream]):($.default||($.default=new _t.MediaStream),Gr=$.default)),Gr&&(Mt(Lr,Gr),jt.associatedRemoteMediaStreams.push(Gr)),_e.push([Lr,sr,Gr]))):jt.rtpReceiver&&jt.rtpReceiver.track&&(jt.associatedRemoteMediaStreams.forEach(function(Fr){var _i=Fr.getTracks().find(function(Gn){return Gn.id===jt.rtpReceiver.track.id});_i&&function(Gn,Wt){Wt.removeTrack(Gn),Wt.dispatchEvent(new _t.MediaStreamTrackEvent("removetrack",{track:Gn}))}(_i,Fr)}),jt.associatedRemoteMediaStreams=[]),jt.localCapabilities=yn,jt.remoteCapabilities=Dr,jt.rtpReceiver=sr,jt.rtcpParameters=Qr,jt.sendEncodingParameters=hr,jt.recvEncodingParameters=Ar,b._transceive(b.transceivers[Ct],!1,Dn)}}}),b._dtlsRole===void 0&&(b._dtlsRole=s.type==="offer"?"active":"passive"),b._remoteDescription={type:s.type,sdp:s.sdp},s.type==="offer"?b._updateSignalingState("have-remote-offer"):b._updateSignalingState("stable"),Object.keys($).forEach(function(rt){var Ct=$[rt];if(Ct.getTracks().length){if(b.remoteStreams.indexOf(Ct)===-1){b.remoteStreams.push(Ct);var It=new Event("addstream");It.stream=Ct,_t.setTimeout(function(){b._dispatchEvent("addstream",It)})}_e.forEach(function(Nt){var Ut=Nt[0],Gt=Nt[1];Ct.id===Nt[2].id&&Et(b,Ut,Gt,[Ct])})}}),_e.forEach(function(rt){rt[2]||Et(b,rt[0],rt[1],[])}),_t.setTimeout(function(){b&&b.transceivers&&b.transceivers.forEach(function(rt){rt.iceTransport&&rt.iceTransport.state==="new"&&rt.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),rt.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},kt.prototype.close=function(){this.transceivers.forEach(function(s){s.iceTransport&&s.iceTransport.stop(),s.dtlsTransport&&s.dtlsTransport.stop(),s.rtpSender&&s.rtpSender.stop(),s.rtpReceiver&&s.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},kt.prototype._updateSignalingState=function(s){this.signalingState=s;var b=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",b)},kt.prototype._maybeFireNegotiationNeeded=function(){var s=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,_t.setTimeout(function(){if(s.needNegotiation){s.needNegotiation=!1;var b=new Event("negotiationneeded");s._dispatchEvent("negotiationneeded",b)}},0))},kt.prototype._updateIceConnectionState=function(){var s,b={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(_e){_e.iceTransport&&!_e.rejected&&b[_e.iceTransport.state]++}),s="new",b.failed>0?s="failed":b.checking>0?s="checking":b.disconnected>0?s="disconnected":b.new>0?s="new":b.connected>0?s="connected":b.completed>0&&(s="completed"),s!==this.iceConnectionState){this.iceConnectionState=s;var $=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",$)}},kt.prototype._updateConnectionState=function(){var s,b={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(_e){_e.iceTransport&&_e.dtlsTransport&&!_e.rejected&&(b[_e.iceTransport.state]++,b[_e.dtlsTransport.state]++)}),b.connected+=b.completed,s="new",b.failed>0?s="failed":b.connecting>0?s="connecting":b.disconnected>0?s="disconnected":b.new>0?s="new":b.connected>0&&(s="connected"),s!==this.connectionState){this.connectionState=s;var $=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",$)}},kt.prototype.createOffer=function(){var s=this;if(s._isClosed)return Promise.reject(ft("InvalidStateError","Can not call createOffer after close"));var b=s.transceivers.filter(function(yt){return yt.kind==="audio"}).length,$=s.transceivers.filter(function(yt){return yt.kind==="video"}).length,_e=arguments[0];if(_e){if(_e.mandatory||_e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");_e.offerToReceiveAudio!==void 0&&(b=_e.offerToReceiveAudio===!0?1:_e.offerToReceiveAudio===!1?0:_e.offerToReceiveAudio),_e.offerToReceiveVideo!==void 0&&($=_e.offerToReceiveVideo===!0?1:_e.offerToReceiveVideo===!1?0:_e.offerToReceiveVideo)}for(s.transceivers.forEach(function(yt){yt.kind==="audio"?--b<0&&(yt.wantReceive=!1):yt.kind==="video"&&--$<0&&(yt.wantReceive=!1)});b>0||$>0;)b>0&&(s._createTransceiver("audio"),b--),$>0&&(s._createTransceiver("video"),$--);var it=bt.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(yt,ct){var _=yt.track,rt=yt.kind,Ct=yt.mid||bt.generateIdentifier();yt.mid=Ct,yt.iceGatherer||(yt.iceGatherer=s._createIceGatherer(ct,s.usingBundle));var It=_t.RTCRtpSender.getCapabilities(rt);Rt<15019&&(It.codecs=It.codecs.filter(function(Ut){return Ut.name!=="rtx"})),It.codecs.forEach(function(Ut){Ut.name==="H264"&&Ut.parameters["level-asymmetry-allowed"]===void 0&&(Ut.parameters["level-asymmetry-allowed"]="1"),yt.remoteCapabilities&&yt.remoteCapabilities.codecs&&yt.remoteCapabilities.codecs.forEach(function(Gt){Ut.name.toLowerCase()===Gt.name.toLowerCase()&&Ut.clockRate===Gt.clockRate&&(Ut.preferredPayloadType=Gt.payloadType)})}),It.headerExtensions.forEach(function(Ut){(yt.remoteCapabilities&&yt.remoteCapabilities.headerExtensions||[]).forEach(function(Gt){Ut.uri===Gt.uri&&(Ut.id=Gt.id)})});var Nt=yt.sendEncodingParameters||[{ssrc:1001*(2*ct+1)}];_&&Rt>=15019&&rt==="video"&&!Nt[0].rtx&&(Nt[0].rtx={ssrc:Nt[0].ssrc+1}),yt.wantReceive&&(yt.rtpReceiver=new _t.RTCRtpReceiver(yt.dtlsTransport,rt)),yt.localCapabilities=It,yt.sendEncodingParameters=Nt}),s._config.bundlePolicy!=="max-compat"&&(it+="a=group:BUNDLE "+s.transceivers.map(function(yt){return yt.mid}).join(" ")+`\r
`),it+=`a=ice-options:trickle\r
`,s.transceivers.forEach(function(yt,ct){it+=ht(yt,yt.localCapabilities,"offer",yt.stream,s._dtlsRole),it+=`a=rtcp-rsize\r
`,!yt.iceGatherer||s.iceGatheringState==="new"||ct!==0&&s.usingBundle||(yt.iceGatherer.getLocalCandidates().forEach(function(_){_.component=1,it+="a="+bt.writeCandidate(_)+`\r
`}),yt.iceGatherer.state==="completed"&&(it+=`a=end-of-candidates\r
`))});var pt=new _t.RTCSessionDescription({type:"offer",sdp:it});return Promise.resolve(pt)},kt.prototype.createAnswer=function(){var s=this;if(s._isClosed)return Promise.reject(ft("InvalidStateError","Can not call createAnswer after close"));if(s.signalingState!=="have-remote-offer"&&s.signalingState!=="have-local-pranswer")return Promise.reject(ft("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var b=bt.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(b+="a=group:BUNDLE "+s.transceivers.map(function(it){return it.mid}).join(" ")+`\r
`),b+=`a=ice-options:trickle\r
`;var $=bt.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach(function(it,pt){if(!(pt+1>$)){if(it.rejected)return it.kind==="application"?it.protocol==="DTLS/SCTP"?b+=`m=application 0 DTLS/SCTP 5000\r
`:b+="m=application 0 "+it.protocol+` webrtc-datachannel\r
`:it.kind==="audio"?b+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:it.kind==="video"&&(b+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(b+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+it.mid+`\r
`);var yt;it.stream&&(it.kind==="audio"?yt=it.stream.getAudioTracks()[0]:it.kind==="video"&&(yt=it.stream.getVideoTracks()[0]),yt&&Rt>=15019&&it.kind==="video"&&!it.sendEncodingParameters[0].rtx&&(it.sendEncodingParameters[0].rtx={ssrc:it.sendEncodingParameters[0].ssrc+1}));var ct=St(it.localCapabilities,it.remoteCapabilities);!ct.codecs.filter(function(_){return _.name.toLowerCase()==="rtx"}).length&&it.sendEncodingParameters[0].rtx&&delete it.sendEncodingParameters[0].rtx,b+=ht(it,ct,"answer",it.stream,s._dtlsRole),it.rtcpParameters&&it.rtcpParameters.reducedSize&&(b+=`a=rtcp-rsize\r
`)}});var _e=new _t.RTCSessionDescription({type:"answer",sdp:b});return Promise.resolve(_e)},kt.prototype.addIceCandidate=function(s){var b,$=this;return s&&s.sdpMLineIndex===void 0&&!s.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(_e,it){if(!$._remoteDescription)return it(ft("InvalidStateError","Can not add ICE candidate without a remote description"));if(s&&s.candidate!==""){var pt=s.sdpMLineIndex;if(s.sdpMid){for(var yt=0;yt<$.transceivers.length;yt++)if($.transceivers[yt].mid===s.sdpMid){pt=yt;break}}var ct=$.transceivers[pt];if(!ct)return it(ft("OperationError","Can not add ICE candidate"));if(ct.rejected)return _e();var _=Object.keys(s.candidate).length>0?bt.parseCandidate(s.candidate):{};if(_.protocol==="tcp"&&(_.port===0||_.port===9)||_.component&&_.component!==1)return _e();if((pt===0||pt>0&&ct.iceTransport!==$.transceivers[0].iceTransport)&&!Tt(ct.iceTransport,_))return it(ft("OperationError","Can not add ICE candidate"));var rt=s.candidate.trim();rt.indexOf("a=")===0&&(rt=rt.substr(2)),(b=bt.getMediaSections($._remoteDescription.sdp))[pt]+="a="+(_.type?rt:"end-of-candidates")+`\r
`,$._remoteDescription.sdp=bt.getDescription($._remoteDescription.sdp)+b.join("")}else for(var Ct=0;Ct<$.transceivers.length&&($.transceivers[Ct].rejected||($.transceivers[Ct].iceTransport.addRemoteCandidate({}),(b=bt.getMediaSections($._remoteDescription.sdp))[Ct]+=`a=end-of-candidates\r
`,$._remoteDescription.sdp=bt.getDescription($._remoteDescription.sdp)+b.join(""),!$.usingBundle));Ct++);_e()})},kt.prototype.getStats=function(s){if(s&&s instanceof _t.MediaStreamTrack){var b=null;if(this.transceivers.forEach(function(_e){_e.rtpSender&&_e.rtpSender.track===s?b=_e.rtpSender:_e.rtpReceiver&&_e.rtpReceiver.track===s&&(b=_e.rtpReceiver)}),!b)throw ft("InvalidAccessError","Invalid selector.");return b.getStats()}var $=[];return this.transceivers.forEach(function(_e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(it){_e[it]&&$.push(_e[it].getStats())})}),Promise.all($).then(function(_e){var it=new Map;return _e.forEach(function(pt){pt.forEach(function(yt){it.set(yt.id,yt)})}),it})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(s){var b=_t[s];if(b&&b.prototype&&b.prototype.getStats){var $=b.prototype.getStats;b.prototype.getStats=function(){return $.apply(this).then(function(_e){var it=new Map;return Object.keys(_e).forEach(function(pt){var yt;_e[pt].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(yt=_e[pt]).type]||yt.type,it.set(pt,_e[pt])}),it})}}});var at=["createOffer","createAnswer"];return at.forEach(function(s){var b=kt.prototype[s];kt.prototype[s]=function(){var $=arguments;return typeof $[0]=="function"||typeof $[1]=="function"?b.apply(this,[arguments[2]]).then(function(_e){typeof $[0]=="function"&&$[0].apply(null,[_e])},function(_e){typeof $[1]=="function"&&$[1].apply(null,[_e])}):b.apply(this,arguments)}}),(at=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(s){var b=kt.prototype[s];kt.prototype[s]=function(){var $=arguments;return typeof $[1]=="function"||typeof $[2]=="function"?b.apply(this,arguments).then(function(){typeof $[1]=="function"&&$[1].apply(null)},function(_e){typeof $[2]=="function"&&$[2].apply(null,[_e])}):b.apply(this,arguments)}}),["getStats"].forEach(function(s){var b=kt.prototype[s];kt.prototype[s]=function(){var $=arguments;return typeof $[1]=="function"?b.apply(this,arguments).then(function(){typeof $[1]=="function"&&$[1].apply(null)}):b.apply(this,arguments)}}),kt}},985:mt=>{var vt={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};vt.localCName=vt.generateIdentifier(),vt.splitLines=function(tt){return tt.trim().split(`
`).map(function(bt){return bt.trim()})},vt.splitSections=function(tt){return tt.split(`
m=`).map(function(bt,ht){return(ht>0?"m="+bt:bt).trim()+`\r
`})},vt.getDescription=function(tt){var bt=vt.splitSections(tt);return bt&&bt[0]},vt.getMediaSections=function(tt){var bt=vt.splitSections(tt);return bt.shift(),bt},vt.matchPrefix=function(tt,bt){return vt.splitLines(tt).filter(function(ht){return ht.indexOf(bt)===0})},vt.parseCandidate=function(tt){for(var bt,ht={foundation:(bt=tt.indexOf("a=candidate:")===0?tt.substring(12).split(" "):tt.substring(10).split(" "))[0],component:parseInt(bt[1],10),protocol:bt[2].toLowerCase(),priority:parseInt(bt[3],10),ip:bt[4],address:bt[4],port:parseInt(bt[5],10),type:bt[7]},St=8;St<bt.length;St+=2)switch(bt[St]){case"raddr":ht.relatedAddress=bt[St+1];break;case"rport":ht.relatedPort=parseInt(bt[St+1],10);break;case"tcptype":ht.tcpType=bt[St+1];break;case"ufrag":ht.ufrag=bt[St+1],ht.usernameFragment=bt[St+1];break;default:ht[bt[St]]=bt[St+1]}return ht},vt.writeCandidate=function(tt){var bt=[];bt.push(tt.foundation),bt.push(tt.component),bt.push(tt.protocol.toUpperCase()),bt.push(tt.priority),bt.push(tt.address||tt.ip),bt.push(tt.port);var ht=tt.type;return bt.push("typ"),bt.push(ht),ht!=="host"&&tt.relatedAddress&&tt.relatedPort&&(bt.push("raddr"),bt.push(tt.relatedAddress),bt.push("rport"),bt.push(tt.relatedPort)),tt.tcpType&&tt.protocol.toLowerCase()==="tcp"&&(bt.push("tcptype"),bt.push(tt.tcpType)),(tt.usernameFragment||tt.ufrag)&&(bt.push("ufrag"),bt.push(tt.usernameFragment||tt.ufrag)),"candidate:"+bt.join(" ")},vt.parseIceOptions=function(tt){return tt.substr(14).split(" ")},vt.parseRtpMap=function(tt){var bt=tt.substr(9).split(" "),ht={payloadType:parseInt(bt.shift(),10)};return bt=bt[0].split("/"),ht.name=bt[0],ht.clockRate=parseInt(bt[1],10),ht.channels=bt.length===3?parseInt(bt[2],10):1,ht.numChannels=ht.channels,ht},vt.writeRtpMap=function(tt){var bt=tt.payloadType;tt.preferredPayloadType!==void 0&&(bt=tt.preferredPayloadType);var ht=tt.channels||tt.numChannels||1;return"a=rtpmap:"+bt+" "+tt.name+"/"+tt.clockRate+(ht!==1?"/"+ht:"")+`\r
`},vt.parseExtmap=function(tt){var bt=tt.substr(9).split(" ");return{id:parseInt(bt[0],10),direction:bt[0].indexOf("/")>0?bt[0].split("/")[1]:"sendrecv",uri:bt[1]}},vt.writeExtmap=function(tt){return"a=extmap:"+(tt.id||tt.preferredId)+(tt.direction&&tt.direction!=="sendrecv"?"/"+tt.direction:"")+" "+tt.uri+`\r
`},vt.parseFmtp=function(tt){for(var bt,ht={},St=tt.substr(tt.indexOf(" ")+1).split(";"),At=0;At<St.length;At++)ht[(bt=St[At].trim().split("="))[0].trim()]=bt[1];return ht},vt.writeFmtp=function(tt){var bt="",ht=tt.payloadType;if(tt.preferredPayloadType!==void 0&&(ht=tt.preferredPayloadType),tt.parameters&&Object.keys(tt.parameters).length){var St=[];Object.keys(tt.parameters).forEach(function(At){tt.parameters[At]?St.push(At+"="+tt.parameters[At]):St.push(At)}),bt+="a=fmtp:"+ht+" "+St.join(";")+`\r
`}return bt},vt.parseRtcpFb=function(tt){var bt=tt.substr(tt.indexOf(" ")+1).split(" ");return{type:bt.shift(),parameter:bt.join(" ")}},vt.writeRtcpFb=function(tt){var bt="",ht=tt.payloadType;return tt.preferredPayloadType!==void 0&&(ht=tt.preferredPayloadType),tt.rtcpFeedback&&tt.rtcpFeedback.length&&tt.rtcpFeedback.forEach(function(St){bt+="a=rtcp-fb:"+ht+" "+St.type+(St.parameter&&St.parameter.length?" "+St.parameter:"")+`\r
`}),bt},vt.parseSsrcMedia=function(tt){var bt=tt.indexOf(" "),ht={ssrc:parseInt(tt.substr(7,bt-7),10)},St=tt.indexOf(":",bt);return St>-1?(ht.attribute=tt.substr(bt+1,St-bt-1),ht.value=tt.substr(St+1)):ht.attribute=tt.substr(bt+1),ht},vt.parseSsrcGroup=function(tt){var bt=tt.substr(13).split(" ");return{semantics:bt.shift(),ssrcs:bt.map(function(ht){return parseInt(ht,10)})}},vt.getMid=function(tt){var bt=vt.matchPrefix(tt,"a=mid:")[0];if(bt)return bt.substr(6)},vt.parseFingerprint=function(tt){var bt=tt.substr(14).split(" ");return{algorithm:bt[0].toLowerCase(),value:bt[1]}},vt.getDtlsParameters=function(tt,bt){return{role:"auto",fingerprints:vt.matchPrefix(tt+bt,"a=fingerprint:").map(vt.parseFingerprint)}},vt.writeDtlsParameters=function(tt,bt){var ht="a=setup:"+bt+`\r
`;return tt.fingerprints.forEach(function(St){ht+="a=fingerprint:"+St.algorithm+" "+St.value+`\r
`}),ht},vt.parseCryptoLine=function(tt){var bt=tt.substr(9).split(" ");return{tag:parseInt(bt[0],10),cryptoSuite:bt[1],keyParams:bt[2],sessionParams:bt.slice(3)}},vt.writeCryptoLine=function(tt){return"a=crypto:"+tt.tag+" "+tt.cryptoSuite+" "+(typeof tt.keyParams=="object"?vt.writeCryptoKeyParams(tt.keyParams):tt.keyParams)+(tt.sessionParams?" "+tt.sessionParams.join(" "):"")+`\r
`},vt.parseCryptoKeyParams=function(tt){if(tt.indexOf("inline:")!==0)return null;var bt=tt.substr(7).split("|");return{keyMethod:"inline",keySalt:bt[0],lifeTime:bt[1],mkiValue:bt[2]?bt[2].split(":")[0]:void 0,mkiLength:bt[2]?bt[2].split(":")[1]:void 0}},vt.writeCryptoKeyParams=function(tt){return tt.keyMethod+":"+tt.keySalt+(tt.lifeTime?"|"+tt.lifeTime:"")+(tt.mkiValue&&tt.mkiLength?"|"+tt.mkiValue+":"+tt.mkiLength:"")},vt.getCryptoParameters=function(tt,bt){return vt.matchPrefix(tt+bt,"a=crypto:").map(vt.parseCryptoLine)},vt.getIceParameters=function(tt,bt){var ht=vt.matchPrefix(tt+bt,"a=ice-ufrag:")[0],St=vt.matchPrefix(tt+bt,"a=ice-pwd:")[0];return ht&&St?{usernameFragment:ht.substr(12),password:St.substr(10)}:null},vt.writeIceParameters=function(tt){return"a=ice-ufrag:"+tt.usernameFragment+`\r
a=ice-pwd:`+tt.password+`\r
`},vt.parseRtpParameters=function(tt){for(var bt={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},ht=vt.splitLines(tt)[0].split(" "),St=3;St<ht.length;St++){var At=ht[St],Tt=vt.matchPrefix(tt,"a=rtpmap:"+At+" ")[0];if(Tt){var ft=vt.parseRtpMap(Tt),_t=vt.matchPrefix(tt,"a=fmtp:"+At+" ");switch(ft.parameters=_t.length?vt.parseFmtp(_t[0]):{},ft.rtcpFeedback=vt.matchPrefix(tt,"a=rtcp-fb:"+At+" ").map(vt.parseRtcpFb),bt.codecs.push(ft),ft.name.toUpperCase()){case"RED":case"ULPFEC":bt.fecMechanisms.push(ft.name.toUpperCase())}}}return vt.matchPrefix(tt,"a=extmap:").forEach(function(Rt){bt.headerExtensions.push(vt.parseExtmap(Rt))}),bt},vt.writeRtpDescription=function(tt,bt){var ht="";ht+="m="+tt+" ",ht+=bt.codecs.length>0?"9":"0",ht+=" UDP/TLS/RTP/SAVPF ",ht+=bt.codecs.map(function(At){return At.preferredPayloadType!==void 0?At.preferredPayloadType:At.payloadType}).join(" ")+`\r
`,ht+=`c=IN IP4 0.0.0.0\r
`,ht+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,bt.codecs.forEach(function(At){ht+=vt.writeRtpMap(At),ht+=vt.writeFmtp(At),ht+=vt.writeRtcpFb(At)});var St=0;return bt.codecs.forEach(function(At){At.maxptime>St&&(St=At.maxptime)}),St>0&&(ht+="a=maxptime:"+St+`\r
`),ht+=`a=rtcp-mux\r
`,bt.headerExtensions&&bt.headerExtensions.forEach(function(At){ht+=vt.writeExtmap(At)}),ht},vt.parseRtpEncodingParameters=function(tt){var bt,ht=[],St=vt.parseRtpParameters(tt),At=St.fecMechanisms.indexOf("RED")!==-1,Tt=St.fecMechanisms.indexOf("ULPFEC")!==-1,ft=vt.matchPrefix(tt,"a=ssrc:").map(function(Et){return vt.parseSsrcMedia(Et)}).filter(function(Et){return Et.attribute==="cname"}),_t=ft.length>0&&ft[0].ssrc,Rt=vt.matchPrefix(tt,"a=ssrc-group:FID").map(function(Et){return Et.substr(17).split(" ").map(function(kt){return parseInt(kt,10)})});Rt.length>0&&Rt[0].length>1&&Rt[0][0]===_t&&(bt=Rt[0][1]),St.codecs.forEach(function(Et){if(Et.name.toUpperCase()==="RTX"&&Et.parameters.apt){var kt={ssrc:_t,codecPayloadType:parseInt(Et.parameters.apt,10)};_t&&bt&&(kt.rtx={ssrc:bt}),ht.push(kt),At&&((kt=JSON.parse(JSON.stringify(kt))).fec={ssrc:_t,mechanism:Tt?"red+ulpfec":"red"},ht.push(kt))}}),ht.length===0&&_t&&ht.push({ssrc:_t});var Mt=vt.matchPrefix(tt,"b=");return Mt.length&&(Mt=Mt[0].indexOf("b=TIAS:")===0?parseInt(Mt[0].substr(7),10):Mt[0].indexOf("b=AS:")===0?1e3*parseInt(Mt[0].substr(5),10)*.95-16e3:void 0,ht.forEach(function(Et){Et.maxBitrate=Mt})),ht},vt.parseRtcpParameters=function(tt){var bt={},ht=vt.matchPrefix(tt,"a=ssrc:").map(function(Tt){return vt.parseSsrcMedia(Tt)}).filter(function(Tt){return Tt.attribute==="cname"})[0];ht&&(bt.cname=ht.value,bt.ssrc=ht.ssrc);var St=vt.matchPrefix(tt,"a=rtcp-rsize");bt.reducedSize=St.length>0,bt.compound=St.length===0;var At=vt.matchPrefix(tt,"a=rtcp-mux");return bt.mux=At.length>0,bt},vt.parseMsid=function(tt){var bt,ht=vt.matchPrefix(tt,"a=msid:");if(ht.length===1)return{stream:(bt=ht[0].substr(7).split(" "))[0],track:bt[1]};var St=vt.matchPrefix(tt,"a=ssrc:").map(function(At){return vt.parseSsrcMedia(At)}).filter(function(At){return At.attribute==="msid"});return St.length>0?{stream:(bt=St[0].value.split(" "))[0],track:bt[1]}:void 0},vt.parseSctpDescription=function(tt){var bt,ht=vt.parseMLine(tt),St=vt.matchPrefix(tt,"a=max-message-size:");St.length>0&&(bt=parseInt(St[0].substr(19),10)),isNaN(bt)&&(bt=65536);var At=vt.matchPrefix(tt,"a=sctp-port:");if(At.length>0)return{port:parseInt(At[0].substr(12),10),protocol:ht.fmt,maxMessageSize:bt};if(vt.matchPrefix(tt,"a=sctpmap:").length>0){var Tt=vt.matchPrefix(tt,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(Tt[0],10),protocol:Tt[1],maxMessageSize:bt}}},vt.writeSctpDescription=function(tt,bt){var ht=[];return ht=tt.protocol!=="DTLS/SCTP"?["m="+tt.kind+" 9 "+tt.protocol+" "+bt.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+bt.port+`\r
`]:["m="+tt.kind+" 9 "+tt.protocol+" "+bt.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+bt.port+" "+bt.protocol+` 65535\r
`],bt.maxMessageSize!==void 0&&ht.push("a=max-message-size:"+bt.maxMessageSize+`\r
`),ht.join("")},vt.generateSessionId=function(){return Math.random().toString().substr(2,21)},vt.writeSessionBoilerplate=function(tt,bt,ht){var St=bt!==void 0?bt:2;return`v=0\r
o=`+(ht||"thisisadapterortc")+" "+(tt||vt.generateSessionId())+" "+St+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},vt.writeMediaSection=function(tt,bt,ht,St){var At=vt.writeRtpDescription(tt.kind,bt);if(At+=vt.writeIceParameters(tt.iceGatherer.getLocalParameters()),At+=vt.writeDtlsParameters(tt.dtlsTransport.getLocalParameters(),ht==="offer"?"actpass":"active"),At+="a=mid:"+tt.mid+`\r
`,tt.direction?At+="a="+tt.direction+`\r
`:tt.rtpSender&&tt.rtpReceiver?At+=`a=sendrecv\r
`:tt.rtpSender?At+=`a=sendonly\r
`:tt.rtpReceiver?At+=`a=recvonly\r
`:At+=`a=inactive\r
`,tt.rtpSender){var Tt="msid:"+St.id+" "+tt.rtpSender.track.id+`\r
`;At+="a="+Tt,At+="a=ssrc:"+tt.sendEncodingParameters[0].ssrc+" "+Tt,tt.sendEncodingParameters[0].rtx&&(At+="a=ssrc:"+tt.sendEncodingParameters[0].rtx.ssrc+" "+Tt,At+="a=ssrc-group:FID "+tt.sendEncodingParameters[0].ssrc+" "+tt.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return At+="a=ssrc:"+tt.sendEncodingParameters[0].ssrc+" cname:"+vt.localCName+`\r
`,tt.rtpSender&&tt.sendEncodingParameters[0].rtx&&(At+="a=ssrc:"+tt.sendEncodingParameters[0].rtx.ssrc+" cname:"+vt.localCName+`\r
`),At},vt.getDirection=function(tt,bt){for(var ht=vt.splitLines(tt),St=0;St<ht.length;St++)switch(ht[St]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return ht[St].substr(2)}return bt?vt.getDirection(bt):"sendrecv"},vt.getKind=function(tt){return vt.splitLines(tt)[0].split(" ")[0].substr(2)},vt.isRejected=function(tt){return tt.split(" ",2)[1]==="0"},vt.parseMLine=function(tt){var bt=vt.splitLines(tt)[0].substr(2).split(" ");return{kind:bt[0],port:parseInt(bt[1],10),protocol:bt[2],fmt:bt.slice(3).join(" ")}},vt.parseOLine=function(tt){var bt=vt.matchPrefix(tt,"o=")[0].substr(2).split(" ");return{username:bt[0],sessionId:bt[1],sessionVersion:parseInt(bt[2],10),netType:bt[3],addressType:bt[4],address:bt[5]}},vt.isValidSDP=function(tt){if(typeof tt!="string"||tt.length===0)return!1;for(var bt=vt.splitLines(tt),ht=0;ht<bt.length;ht++)if(bt[ht].length<2||bt[ht].charAt(1)!=="=")return!1;return!0},mt.exports=vt},778:mt=>{mt.exports=st(355)},754:mt=>{mt.exports=st(142)}},nt={};function gt(mt){var vt=nt[mt];if(vt!==void 0)return vt.exports;var tt=nt[mt]={exports:{}};return lt[mt](tt,tt.exports,gt),tt.exports}gt.n=mt=>{var vt=mt&&mt.__esModule?()=>mt.default:()=>mt;return gt.d(vt,{a:vt}),vt},gt.d=(mt,vt)=>{for(var tt in vt)gt.o(vt,tt)&&!gt.o(mt,tt)&&Object.defineProperty(mt,tt,{enumerable:!0,get:vt[tt]})},gt.o=(mt,vt)=>Object.prototype.hasOwnProperty.call(mt,vt),gt.r=mt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(mt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(mt,"__esModule",{value:!0})};var dt={};(()=>{gt.r(dt),gt.d(dt,{AdAction:()=>Pn,AdState:()=>An,AddPlatformTelemetry:()=>$t,AppLaunchMode:()=>Jn,AppLevelProtocol:()=>rn,AudioFormat:()=>ls,AuthType:()=>ln,BitDepth:()=>Tn,BrowserFeature:()=>Ms,BrowserName:()=>qs,CHANGELIST:()=>en,CLIENT_IDENTIFICATION:()=>Al,CLIENT_VERSION:()=>ss,CalculateDataUsage:()=>Vr,CalculateMaxBitrateKbps:()=>Yr,ChooseStreamingResolution:()=>zr,ChooseStreamingSettings:()=>Nr,ClientHeaderBrowserType:()=>Rl,ClientHeaderDeviceType:()=>Os,ClientHeaderOSType:()=>gs,ClientStreamer:()=>El,ClientType:()=>jn,ConfigureGridServerSettings:()=>ns,ConfigureRagnarokSettings:()=>Zn,CursorType:()=>ba,DeviceModel:()=>as,DeviceOS:()=>go,DeviceType:()=>ao,DeviceVendor:()=>Wo,DynamicStreamingMode:()=>qo,EVENTS:()=>Rn,GS_EVENTS:()=>Cl,GetDeviceCapabilities:()=>nn,GetSupportedAudioChannelCount:()=>Kr,GridApp:()=>hn,GridServer:()=>Cs,GridServerSettings:()=>Sl,GsErrorCode:()=>Ho,HidType:()=>Po,HotkeyModifier:()=>Ur,InitializeUtils:()=>kn,InputType:()=>Io,IsFeatureSupported:()=>or,LogImpl:()=>Hr,LogLevel:()=>wo,MediaTrackKind:()=>Lo,MicState:()=>Do,NetworkType:()=>po,NskTelemetry:()=>pn,PassThruServer:()=>Tl,PayloadBrowserType:()=>Ts,PayloadDeviceType:()=>zs,PayloadOSType:()=>Hs,PlatformName:()=>js,Protocol:()=>dn,RErrorCode:()=>xo,RNotificationCode:()=>uo,SESSIONMODIFY_ACTION:()=>_l,STREAMING_STATE:()=>so,ScErrorCode:()=>io,SdrHdrMode:()=>Cr,SessionControlTelemetry:()=>$s,SessionProgressState:()=>zn,SessionState:()=>Nn,StreamStopReason:()=>zo,StreamWarningType:()=>Fo,StreamingProfilePreset:()=>Un,StreamingState:()=>Zo,TrackType:()=>Hn,Usage:()=>$r,VideoCodecType:()=>Co,VirtualButton:()=>Zr,VirtualGamepadHandler:()=>on,VsyncType:()=>Us,configureRagnarokSettings:()=>Eo,configureSessionControlSettings:()=>mo,createNskStreamClient:()=>Ln,createSessionControl:()=>ur,defaultInputConfigFlags:()=>tn,estimateDataUsage:()=>qr,getDeviceCapabilities:()=>hs,getNetworkTypeDetector:()=>ro,getPlatformDetails:()=>Vo,getRecommendedBitrate:()=>Xo,getResumableSession:()=>Es,getStreamStartParameters:()=>pr,getStreamerType:()=>ys,getSupportedCodecs:()=>Qn,isCancelCode:()=>fo,isFeatureSupported:()=>Wl,isResumableSessionState:()=>$o,performHttpRequest:()=>eo,registerLogCallback:()=>yo,serializeDeviceCapabilities:()=>Ml,shouldDefaultEnableMic:()=>xl,translatePlatformDetailsForClientHeader:()=>Gs,translatePlatformDetailsForPayload:()=>Ks,updateSessionParameters:()=>_o});var mt={};gt.r(mt),gt.d(mt,{fixNegotiationNeeded:()=>Gt,shimAddTrackRemoveTrack:()=>Nt,shimAddTrackRemoveTrackWithNative:()=>It,shimGetDisplayMedia:()=>pt,shimGetSendersWithDtmf:()=>_,shimGetStats:()=>rt,shimGetUserMedia:()=>it,shimMediaStream:()=>yt,shimOnTrack:()=>ct,shimPeerConnection:()=>Ut,shimSenderReceiverGetStats:()=>Ct});var vt={};gt.r(vt),gt.d(vt,{shimGetDisplayMedia:()=>jt,shimGetUserMedia:()=>Kt,shimPeerConnection:()=>Ht,shimReplaceTrack:()=>Bt});var tt={};gt.r(tt),gt.d(tt,{shimAddTransceiver:()=>Dr,shimCreateAnswer:()=>Br,shimCreateOffer:()=>Bn,shimGetDisplayMedia:()=>sr,shimGetParameters:()=>Qr,shimGetUserMedia:()=>Jt,shimOnTrack:()=>hr,shimPeerConnection:()=>Ar,shimRTCDataChannel:()=>En,shimReceiverGetStats:()=>Lr,shimRemoveStream:()=>wr,shimSenderGetStats:()=>yn});var bt={};gt.r(bt),gt.d(bt,{shimAudioContext:()=>Zt,shimCallbacksAPI:()=>Fr,shimConstraints:()=>Gn,shimCreateOfferLegacy:()=>zt,shimGetUserMedia:()=>_i,shimLocalStreamsAPI:()=>Gr,shimRTCIceServerUrls:()=>Wt,shimRemoteStreamsAPI:()=>Dn,shimTrackEventTransceiver:()=>Lt});var ht={};gt.r(ht),gt.d(ht,{removeAllowExtmapMixed:()=>yr,shimConnectionState:()=>tr,shimMaxMessageSize:()=>Rr,shimRTCIceCandidate:()=>vr,shimSendThrowTypeError:()=>fr});let St=!0,At=!0;function Tt(er,Pr,xr){const jr=er.match(Pr);return jr&&jr.length>=xr&&parseInt(jr[xr],10)}function ft(er,Pr,xr){if(!er.RTCPeerConnection)return;const jr=er.RTCPeerConnection.prototype,Jr=jr.addEventListener;jr.addEventListener=function(Xr,wn){if(Xr!==Pr)return Jr.apply(this,arguments);const cn=Sn=>{const Fn=xr(Sn);Fn&&(wn.handleEvent?wn.handleEvent(Fn):wn(Fn))};return this._eventMap=this._eventMap||{},this._eventMap[Pr]||(this._eventMap[Pr]=new Map),this._eventMap[Pr].set(wn,cn),Jr.apply(this,[Xr,cn])};const an=jr.removeEventListener;jr.removeEventListener=function(Xr,wn){if(Xr!==Pr||!this._eventMap||!this._eventMap[Pr])return an.apply(this,arguments);if(!this._eventMap[Pr].has(wn))return an.apply(this,arguments);const cn=this._eventMap[Pr].get(wn);return this._eventMap[Pr].delete(wn),this._eventMap[Pr].size===0&&delete this._eventMap[Pr],Object.keys(this._eventMap).length===0&&delete this._eventMap,an.apply(this,[Xr,cn])},Object.defineProperty(jr,"on"+Pr,{get(){return this["_on"+Pr]},set(Xr){this["_on"+Pr]&&(this.removeEventListener(Pr,this["_on"+Pr]),delete this["_on"+Pr]),Xr&&this.addEventListener(Pr,this["_on"+Pr]=Xr)},enumerable:!0,configurable:!0})}function _t(er){return typeof er!="boolean"?new Error("Argument type: "+typeof er+". Please use a boolean."):(St=er,er?"adapter.js logging disabled":"adapter.js logging enabled")}function Rt(er){return typeof er!="boolean"?new Error("Argument type: "+typeof er+". Please use a boolean."):(At=!er,"adapter.js deprecation warnings "+(er?"disabled":"enabled"))}function Mt(){if(typeof window=="object"){if(St)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Et(er,Pr){At&&console.warn(er+" is deprecated, please use "+Pr+" instead.")}function kt(er){const{navigator:Pr}=er,xr={browser:null,version:null};if(er===void 0||!er.navigator)return xr.browser="Not a browser.",xr;if(Pr.mozGetUserMedia)xr.browser="firefox",xr.version=Tt(Pr.userAgent,/Firefox\/(\d+)\./,1);else if(Pr.webkitGetUserMedia||er.isSecureContext===!1&&er.webkitRTCPeerConnection&&!er.RTCIceGatherer)xr.browser="chrome",xr.version=Tt(Pr.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(Pr.mediaDevices&&Pr.userAgent.match(/Edge\/(\d+).(\d+)$/))xr.browser="edge",xr.version=Tt(Pr.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!er.RTCPeerConnection||!Pr.userAgent.match(/AppleWebKit\/(\d+)\./))return xr.browser="Not a supported browser.",xr;xr.browser="safari",xr.version=Tt(Pr.userAgent,/AppleWebKit\/(\d+)\./,1),xr.supportsUnifiedPlan=er.RTCRtpTransceiver&&"currentDirection"in er.RTCRtpTransceiver.prototype}return xr}function at(er){return Object.prototype.toString.call(er)==="[object Object]"}function s(er){return at(er)?Object.keys(er).reduce(function(Pr,xr){const jr=at(er[xr]),Jr=jr?s(er[xr]):er[xr],an=jr&&!Object.keys(Jr).length;return Jr===void 0||an?Pr:Object.assign(Pr,{[xr]:Jr})},{}):er}function b(er,Pr,xr){Pr&&!xr.has(Pr.id)&&(xr.set(Pr.id,Pr),Object.keys(Pr).forEach(jr=>{jr.endsWith("Id")?b(er,er.get(Pr[jr]),xr):jr.endsWith("Ids")&&Pr[jr].forEach(Jr=>{b(er,er.get(Jr),xr)})}))}function $(er,Pr,xr){const jr=xr?"outbound-rtp":"inbound-rtp",Jr=new Map;if(Pr===null)return Jr;const an=[];return er.forEach(Xr=>{Xr.type==="track"&&Xr.trackIdentifier===Pr.id&&an.push(Xr)}),an.forEach(Xr=>{er.forEach(wn=>{wn.type===jr&&wn.trackId===Xr.id&&b(er,wn,Jr)})}),Jr}const _e=Mt;function it(er){const Pr=er&&er.navigator;if(!Pr.mediaDevices)return;const xr=kt(er),jr=function(Xr){if(typeof Xr!="object"||Xr.mandatory||Xr.optional)return Xr;const wn={};return Object.keys(Xr).forEach(cn=>{if(cn==="require"||cn==="advanced"||cn==="mediaSource")return;const Sn=typeof Xr[cn]=="object"?Xr[cn]:{ideal:Xr[cn]};Sn.exact!==void 0&&typeof Sn.exact=="number"&&(Sn.min=Sn.max=Sn.exact);const Fn=function(Kn,So){return Kn?Kn+So.charAt(0).toUpperCase()+So.slice(1):So==="deviceId"?"sourceId":So};if(Sn.ideal!==void 0){wn.optional=wn.optional||[];let Kn={};typeof Sn.ideal=="number"?(Kn[Fn("min",cn)]=Sn.ideal,wn.optional.push(Kn),Kn={},Kn[Fn("max",cn)]=Sn.ideal,wn.optional.push(Kn)):(Kn[Fn("",cn)]=Sn.ideal,wn.optional.push(Kn))}Sn.exact!==void 0&&typeof Sn.exact!="number"?(wn.mandatory=wn.mandatory||{},wn.mandatory[Fn("",cn)]=Sn.exact):["min","max"].forEach(Kn=>{Sn[Kn]!==void 0&&(wn.mandatory=wn.mandatory||{},wn.mandatory[Fn(Kn,cn)]=Sn[Kn])})}),Xr.advanced&&(wn.optional=(wn.optional||[]).concat(Xr.advanced)),wn},Jr=function(Xr,wn){if(xr.version>=61)return wn(Xr);if((Xr=JSON.parse(JSON.stringify(Xr)))&&typeof Xr.audio=="object"){const cn=function(Sn,Fn,Kn){Fn in Sn&&!(Kn in Sn)&&(Sn[Kn]=Sn[Fn],delete Sn[Fn])};cn((Xr=JSON.parse(JSON.stringify(Xr))).audio,"autoGainControl","googAutoGainControl"),cn(Xr.audio,"noiseSuppression","googNoiseSuppression"),Xr.audio=jr(Xr.audio)}if(Xr&&typeof Xr.video=="object"){let cn=Xr.video.facingMode;cn=cn&&(typeof cn=="object"?cn:{ideal:cn});const Sn=xr.version<66;if(cn&&(cn.exact==="user"||cn.exact==="environment"||cn.ideal==="user"||cn.ideal==="environment")&&(!Pr.mediaDevices.getSupportedConstraints||!Pr.mediaDevices.getSupportedConstraints().facingMode||Sn)){let Fn;if(delete Xr.video.facingMode,cn.exact==="environment"||cn.ideal==="environment"?Fn=["back","rear"]:cn.exact!=="user"&&cn.ideal!=="user"||(Fn=["front"]),Fn)return Pr.mediaDevices.enumerateDevices().then(Kn=>{let So=(Kn=Kn.filter(cs=>cs.kind==="videoinput")).find(cs=>Fn.some(Ql=>cs.label.toLowerCase().includes(Ql)));return!So&&Kn.length&&Fn.includes("back")&&(So=Kn[Kn.length-1]),So&&(Xr.video.deviceId=cn.exact?{exact:So.deviceId}:{ideal:So.deviceId}),Xr.video=jr(Xr.video),_e("chrome: "+JSON.stringify(Xr)),wn(Xr)})}Xr.video=jr(Xr.video)}return _e("chrome: "+JSON.stringify(Xr)),wn(Xr)},an=function(Xr){return xr.version>=64?Xr:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[Xr.name]||Xr.name,message:Xr.message,constraint:Xr.constraint||Xr.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(Pr.getUserMedia=(function(Xr,wn,cn){Jr(Xr,Sn=>{Pr.webkitGetUserMedia(Sn,wn,Fn=>{cn&&cn(an(Fn))})})}).bind(Pr),Pr.mediaDevices.getUserMedia){const Xr=Pr.mediaDevices.getUserMedia.bind(Pr.mediaDevices);Pr.mediaDevices.getUserMedia=function(wn){return Jr(wn,cn=>Xr(cn).then(Sn=>{if(cn.audio&&!Sn.getAudioTracks().length||cn.video&&!Sn.getVideoTracks().length)throw Sn.getTracks().forEach(Fn=>{Fn.stop()}),new DOMException("","NotFoundError");return Sn},Sn=>Promise.reject(an(Sn))))}}}function pt(er,Pr){er.navigator.mediaDevices&&"getDisplayMedia"in er.navigator.mediaDevices||er.navigator.mediaDevices&&(typeof Pr=="function"?er.navigator.mediaDevices.getDisplayMedia=function(xr){return Pr(xr).then(jr=>{const Jr=xr.video&&xr.video.width,an=xr.video&&xr.video.height,Xr=xr.video&&xr.video.frameRate;return xr.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:jr,maxFrameRate:Xr||3}},Jr&&(xr.video.mandatory.maxWidth=Jr),an&&(xr.video.mandatory.maxHeight=an),er.navigator.mediaDevices.getUserMedia(xr)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function yt(er){er.MediaStream=er.MediaStream||er.webkitMediaStream}function ct(er){if(typeof er=="object"&&er.RTCPeerConnection&&!("ontrack"in er.RTCPeerConnection.prototype)){Object.defineProperty(er.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(xr){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=xr)},enumerable:!0,configurable:!0});const Pr=er.RTCPeerConnection.prototype.setRemoteDescription;er.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=xr=>{xr.stream.addEventListener("addtrack",jr=>{let Jr;Jr=er.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(Xr=>Xr.track&&Xr.track.id===jr.track.id):{track:jr.track};const an=new Event("track");an.track=jr.track,an.receiver=Jr,an.transceiver={receiver:Jr},an.streams=[xr.stream],this.dispatchEvent(an)}),xr.stream.getTracks().forEach(jr=>{let Jr;Jr=er.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(Xr=>Xr.track&&Xr.track.id===jr.id):{track:jr};const an=new Event("track");an.track=jr,an.receiver=Jr,an.transceiver={receiver:Jr},an.streams=[xr.stream],this.dispatchEvent(an)})},this.addEventListener("addstream",this._ontrackpoly)),Pr.apply(this,arguments)}}else ft(er,"track",Pr=>(Pr.transceiver||Object.defineProperty(Pr,"transceiver",{value:{receiver:Pr.receiver}}),Pr))}function _(er){if(typeof er=="object"&&er.RTCPeerConnection&&!("getSenders"in er.RTCPeerConnection.prototype)&&"createDTMFSender"in er.RTCPeerConnection.prototype){const Pr=function(Jr,an){return{track:an,get dtmf(){return this._dtmf===void 0&&(an.kind==="audio"?this._dtmf=Jr.createDTMFSender(an):this._dtmf=null),this._dtmf},_pc:Jr}};if(!er.RTCPeerConnection.prototype.getSenders){er.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const Jr=er.RTCPeerConnection.prototype.addTrack;er.RTCPeerConnection.prototype.addTrack=function(Xr,wn){let cn=Jr.apply(this,arguments);return cn||(cn=Pr(this,Xr),this._senders.push(cn)),cn};const an=er.RTCPeerConnection.prototype.removeTrack;er.RTCPeerConnection.prototype.removeTrack=function(Xr){an.apply(this,arguments);const wn=this._senders.indexOf(Xr);wn!==-1&&this._senders.splice(wn,1)}}const xr=er.RTCPeerConnection.prototype.addStream;er.RTCPeerConnection.prototype.addStream=function(Jr){this._senders=this._senders||[],xr.apply(this,[Jr]),Jr.getTracks().forEach(an=>{this._senders.push(Pr(this,an))})};const jr=er.RTCPeerConnection.prototype.removeStream;er.RTCPeerConnection.prototype.removeStream=function(Jr){this._senders=this._senders||[],jr.apply(this,[Jr]),Jr.getTracks().forEach(an=>{const Xr=this._senders.find(wn=>wn.track===an);Xr&&this._senders.splice(this._senders.indexOf(Xr),1)})}}else if(typeof er=="object"&&er.RTCPeerConnection&&"getSenders"in er.RTCPeerConnection.prototype&&"createDTMFSender"in er.RTCPeerConnection.prototype&&er.RTCRtpSender&&!("dtmf"in er.RTCRtpSender.prototype)){const Pr=er.RTCPeerConnection.prototype.getSenders;er.RTCPeerConnection.prototype.getSenders=function(){const xr=Pr.apply(this,[]);return xr.forEach(jr=>jr._pc=this),xr},Object.defineProperty(er.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function rt(er){if(!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection.prototype.getStats;er.RTCPeerConnection.prototype.getStats=function(){const[xr,jr,Jr]=arguments;if(arguments.length>0&&typeof xr=="function")return Pr.apply(this,arguments);if(Pr.length===0&&(arguments.length===0||typeof xr!="function"))return Pr.apply(this,[]);const an=function(wn){const cn={};return wn.result().forEach(Sn=>{const Fn={id:Sn.id,timestamp:Sn.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[Sn.type]||Sn.type};Sn.names().forEach(Kn=>{Fn[Kn]=Sn.stat(Kn)}),cn[Fn.id]=Fn}),cn},Xr=function(wn){return new Map(Object.keys(wn).map(cn=>[cn,wn[cn]]))};if(arguments.length>=2){const wn=function(cn){jr(Xr(an(cn)))};return Pr.apply(this,[wn,xr])}return new Promise((wn,cn)=>{Pr.apply(this,[function(Sn){wn(Xr(an(Sn)))},cn])}).then(jr,Jr)}}function Ct(er){if(!(typeof er=="object"&&er.RTCPeerConnection&&er.RTCRtpSender&&er.RTCRtpReceiver))return;if(!("getStats"in er.RTCRtpSender.prototype)){const xr=er.RTCPeerConnection.prototype.getSenders;xr&&(er.RTCPeerConnection.prototype.getSenders=function(){const Jr=xr.apply(this,[]);return Jr.forEach(an=>an._pc=this),Jr});const jr=er.RTCPeerConnection.prototype.addTrack;jr&&(er.RTCPeerConnection.prototype.addTrack=function(){const Jr=jr.apply(this,arguments);return Jr._pc=this,Jr}),er.RTCRtpSender.prototype.getStats=function(){const Jr=this;return this._pc.getStats().then(an=>$(an,Jr.track,!0))}}if(!("getStats"in er.RTCRtpReceiver.prototype)){const xr=er.RTCPeerConnection.prototype.getReceivers;xr&&(er.RTCPeerConnection.prototype.getReceivers=function(){const jr=xr.apply(this,[]);return jr.forEach(Jr=>Jr._pc=this),jr}),ft(er,"track",jr=>(jr.receiver._pc=jr.srcElement,jr)),er.RTCRtpReceiver.prototype.getStats=function(){const jr=this;return this._pc.getStats().then(Jr=>$(Jr,jr.track,!1))}}if(!("getStats"in er.RTCRtpSender.prototype)||!("getStats"in er.RTCRtpReceiver.prototype))return;const Pr=er.RTCPeerConnection.prototype.getStats;er.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof er.MediaStreamTrack){const xr=arguments[0];let jr,Jr,an;return this.getSenders().forEach(Xr=>{Xr.track===xr&&(jr?an=!0:jr=Xr)}),this.getReceivers().forEach(Xr=>(Xr.track===xr&&(Jr?an=!0:Jr=Xr),Xr.track===xr)),an||jr&&Jr?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):jr?jr.getStats():Jr?Jr.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return Pr.apply(this,arguments)}}function It(er){er.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(an=>this._shimmedLocalStreams[an][0])};const Pr=er.RTCPeerConnection.prototype.addTrack;er.RTCPeerConnection.prototype.addTrack=function(an,Xr){if(!Xr)return Pr.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const wn=Pr.apply(this,arguments);return this._shimmedLocalStreams[Xr.id]?this._shimmedLocalStreams[Xr.id].indexOf(wn)===-1&&this._shimmedLocalStreams[Xr.id].push(wn):this._shimmedLocalStreams[Xr.id]=[Xr,wn],wn};const xr=er.RTCPeerConnection.prototype.addStream;er.RTCPeerConnection.prototype.addStream=function(an){this._shimmedLocalStreams=this._shimmedLocalStreams||{},an.getTracks().forEach(cn=>{if(this.getSenders().find(Sn=>Sn.track===cn))throw new DOMException("Track already exists.","InvalidAccessError")});const Xr=this.getSenders();xr.apply(this,arguments);const wn=this.getSenders().filter(cn=>Xr.indexOf(cn)===-1);this._shimmedLocalStreams[an.id]=[an].concat(wn)};const jr=er.RTCPeerConnection.prototype.removeStream;er.RTCPeerConnection.prototype.removeStream=function(an){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[an.id],jr.apply(this,arguments)};const Jr=er.RTCPeerConnection.prototype.removeTrack;er.RTCPeerConnection.prototype.removeTrack=function(an){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},an&&Object.keys(this._shimmedLocalStreams).forEach(Xr=>{const wn=this._shimmedLocalStreams[Xr].indexOf(an);wn!==-1&&this._shimmedLocalStreams[Xr].splice(wn,1),this._shimmedLocalStreams[Xr].length===1&&delete this._shimmedLocalStreams[Xr]}),Jr.apply(this,arguments)}}function Nt(er){if(!er.RTCPeerConnection)return;const Pr=kt(er);if(er.RTCPeerConnection.prototype.addTrack&&Pr.version>=65)return It(er);const xr=er.RTCPeerConnection.prototype.getLocalStreams;er.RTCPeerConnection.prototype.getLocalStreams=function(){const cn=xr.apply(this);return this._reverseStreams=this._reverseStreams||{},cn.map(Sn=>this._reverseStreams[Sn.id])};const jr=er.RTCPeerConnection.prototype.addStream;er.RTCPeerConnection.prototype.addStream=function(cn){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},cn.getTracks().forEach(Sn=>{if(this.getSenders().find(Fn=>Fn.track===Sn))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[cn.id]){const Sn=new er.MediaStream(cn.getTracks());this._streams[cn.id]=Sn,this._reverseStreams[Sn.id]=cn,cn=Sn}jr.apply(this,[cn])};const Jr=er.RTCPeerConnection.prototype.removeStream;function an(cn,Sn){let Fn=Sn.sdp;return Object.keys(cn._reverseStreams||[]).forEach(Kn=>{const So=cn._reverseStreams[Kn],cs=cn._streams[So.id];Fn=Fn.replace(new RegExp(cs.id,"g"),So.id)}),new RTCSessionDescription({type:Sn.type,sdp:Fn})}er.RTCPeerConnection.prototype.removeStream=function(cn){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},Jr.apply(this,[this._streams[cn.id]||cn]),delete this._reverseStreams[this._streams[cn.id]?this._streams[cn.id].id:cn.id],delete this._streams[cn.id]},er.RTCPeerConnection.prototype.addTrack=function(cn,Sn){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const Fn=[].slice.call(arguments,1);if(Fn.length!==1||!Fn[0].getTracks().find(So=>So===cn))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(So=>So.track===cn))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const Kn=this._streams[Sn.id];if(Kn)Kn.addTrack(cn),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const So=new er.MediaStream([cn]);this._streams[Sn.id]=So,this._reverseStreams[So.id]=Sn,this.addStream(So)}return this.getSenders().find(So=>So.track===cn)},["createOffer","createAnswer"].forEach(function(cn){const Sn=er.RTCPeerConnection.prototype[cn],Fn={[cn](){const Kn=arguments;return arguments.length&&typeof arguments[0]=="function"?Sn.apply(this,[So=>{const cs=an(this,So);Kn[0].apply(null,[cs])},So=>{Kn[1]&&Kn[1].apply(null,So)},arguments[2]]):Sn.apply(this,arguments).then(So=>an(this,So))}};er.RTCPeerConnection.prototype[cn]=Fn[cn]});const Xr=er.RTCPeerConnection.prototype.setLocalDescription;er.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(cn,Sn){let Fn=Sn.sdp;return Object.keys(cn._reverseStreams||[]).forEach(Kn=>{const So=cn._reverseStreams[Kn],cs=cn._streams[So.id];Fn=Fn.replace(new RegExp(So.id,"g"),cs.id)}),new RTCSessionDescription({type:Sn.type,sdp:Fn})}(this,arguments[0]),Xr.apply(this,arguments)):Xr.apply(this,arguments)};const wn=Object.getOwnPropertyDescriptor(er.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(er.RTCPeerConnection.prototype,"localDescription",{get(){const cn=wn.get.apply(this);return cn.type===""?cn:an(this,cn)}}),er.RTCPeerConnection.prototype.removeTrack=function(cn){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!cn._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(cn._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let Sn;this._streams=this._streams||{},Object.keys(this._streams).forEach(Fn=>{this._streams[Fn].getTracks().find(Kn=>cn.track===Kn)&&(Sn=this._streams[Fn])}),Sn&&(Sn.getTracks().length===1?this.removeStream(this._reverseStreams[Sn.id]):Sn.removeTrack(cn.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Ut(er){const Pr=kt(er);if(!er.RTCPeerConnection&&er.webkitRTCPeerConnection&&(er.RTCPeerConnection=er.webkitRTCPeerConnection),!er.RTCPeerConnection)return;const xr=er.RTCPeerConnection.prototype.addIceCandidate.length===0;Pr.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Jr){const an=er.RTCPeerConnection.prototype[Jr],Xr={[Jr](){return arguments[0]=new(Jr==="addIceCandidate"?er.RTCIceCandidate:er.RTCSessionDescription)(arguments[0]),an.apply(this,arguments)}};er.RTCPeerConnection.prototype[Jr]=Xr[Jr]});const jr=er.RTCPeerConnection.prototype.addIceCandidate;er.RTCPeerConnection.prototype.addIceCandidate=function(){return xr||arguments[0]?Pr.version<78&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():jr.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}function Gt(er){const Pr=kt(er);ft(er,"negotiationneeded",xr=>{const jr=xr.target;if(!(Pr.version<72||jr.getConfiguration&&jr.getConfiguration().sdpSemantics==="plan-b")||jr.signalingState==="stable")return xr})}var Pt=gt(134),qt=gt.n(Pt);function Kt(er){const Pr=er&&er.navigator,xr=Pr.mediaDevices.getUserMedia.bind(Pr.mediaDevices);Pr.mediaDevices.getUserMedia=function(jr){return xr(jr).catch(Jr=>Promise.reject(function(an){return{name:{PermissionDeniedError:"NotAllowedError"}[an.name]||an.name,message:an.message,constraint:an.constraint,toString(){return this.name}}}(Jr)))}}function jt(er){"getDisplayMedia"in er.navigator&&er.navigator.mediaDevices&&(er.navigator.mediaDevices&&"getDisplayMedia"in er.navigator.mediaDevices||(er.navigator.mediaDevices.getDisplayMedia=er.navigator.getDisplayMedia.bind(er.navigator)))}function Ht(er){const Pr=kt(er);if(er.RTCIceGatherer&&(er.RTCIceCandidate||(er.RTCIceCandidate=function(jr){return jr}),er.RTCSessionDescription||(er.RTCSessionDescription=function(jr){return jr}),Pr.version<15025)){const jr=Object.getOwnPropertyDescriptor(er.MediaStreamTrack.prototype,"enabled");Object.defineProperty(er.MediaStreamTrack.prototype,"enabled",{set(Jr){jr.set.call(this,Jr);const an=new Event("enabled");an.enabled=Jr,this.dispatchEvent(an)}})}er.RTCRtpSender&&!("dtmf"in er.RTCRtpSender.prototype)&&Object.defineProperty(er.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new er.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),er.RTCDtmfSender&&!er.RTCDTMFSender&&(er.RTCDTMFSender=er.RTCDtmfSender);const xr=qt()(er,Pr.version);er.RTCPeerConnection=function(jr){return jr&&jr.iceServers&&(jr.iceServers=function(Jr){let an=!1;return(Jr=JSON.parse(JSON.stringify(Jr))).filter(Xr=>{if(Xr&&(Xr.urls||Xr.url)){var wn=Xr.urls||Xr.url;Xr.url&&!Xr.urls&&Et("RTCIceServer.url","RTCIceServer.urls");const cn=typeof wn=="string";return cn&&(wn=[wn]),wn=wn.filter(Sn=>{if(Sn.indexOf("stun:")===0)return!1;const Fn=Sn.startsWith("turn")&&!Sn.startsWith("turn:[")&&Sn.includes("transport=udp");return Fn&&!an?(an=!0,!0):Fn&&!an}),delete Xr.url,Xr.urls=cn?wn[0]:wn,!!wn.length}})}(jr.iceServers,Pr.version),Mt("ICE servers after filtering:",jr.iceServers)),new xr(jr)},er.RTCPeerConnection.prototype=xr.prototype}function Bt(er){er.RTCRtpSender&&!("replaceTrack"in er.RTCRtpSender.prototype)&&(er.RTCRtpSender.prototype.replaceTrack=er.RTCRtpSender.prototype.setTrack)}function Jt(er){const Pr=kt(er),xr=er&&er.navigator,jr=er&&er.MediaStreamTrack;if(xr.getUserMedia=function(Jr,an,Xr){Et("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),xr.mediaDevices.getUserMedia(Jr).then(an,Xr)},!(Pr.version>55&&"autoGainControl"in xr.mediaDevices.getSupportedConstraints())){const Jr=function(Xr,wn,cn){wn in Xr&&!(cn in Xr)&&(Xr[cn]=Xr[wn],delete Xr[wn])},an=xr.mediaDevices.getUserMedia.bind(xr.mediaDevices);if(xr.mediaDevices.getUserMedia=function(Xr){return typeof Xr=="object"&&typeof Xr.audio=="object"&&(Xr=JSON.parse(JSON.stringify(Xr)),Jr(Xr.audio,"autoGainControl","mozAutoGainControl"),Jr(Xr.audio,"noiseSuppression","mozNoiseSuppression")),an(Xr)},jr&&jr.prototype.getSettings){const Xr=jr.prototype.getSettings;jr.prototype.getSettings=function(){const wn=Xr.apply(this,arguments);return Jr(wn,"mozAutoGainControl","autoGainControl"),Jr(wn,"mozNoiseSuppression","noiseSuppression"),wn}}if(jr&&jr.prototype.applyConstraints){const Xr=jr.prototype.applyConstraints;jr.prototype.applyConstraints=function(wn){return this.kind==="audio"&&typeof wn=="object"&&(wn=JSON.parse(JSON.stringify(wn)),Jr(wn,"autoGainControl","mozAutoGainControl"),Jr(wn,"noiseSuppression","mozNoiseSuppression")),Xr.apply(this,[wn])}}}}function sr(er,Pr){er.navigator.mediaDevices&&"getDisplayMedia"in er.navigator.mediaDevices||er.navigator.mediaDevices&&(er.navigator.mediaDevices.getDisplayMedia=function(xr){if(!xr||!xr.video){const jr=new DOMException("getDisplayMedia without video constraints is undefined");return jr.name="NotFoundError",jr.code=8,Promise.reject(jr)}return xr.video===!0?xr.video={mediaSource:Pr}:xr.video.mediaSource=Pr,er.navigator.mediaDevices.getUserMedia(xr)})}function hr(er){typeof er=="object"&&er.RTCTrackEvent&&"receiver"in er.RTCTrackEvent.prototype&&!("transceiver"in er.RTCTrackEvent.prototype)&&Object.defineProperty(er.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ar(er){const Pr=kt(er);if(typeof er!="object"||!er.RTCPeerConnection&&!er.mozRTCPeerConnection)return;if(!er.RTCPeerConnection&&er.mozRTCPeerConnection&&(er.RTCPeerConnection=er.mozRTCPeerConnection),Pr.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Jr){const an=er.RTCPeerConnection.prototype[Jr],Xr={[Jr](){return arguments[0]=new(Jr==="addIceCandidate"?er.RTCIceCandidate:er.RTCSessionDescription)(arguments[0]),an.apply(this,arguments)}};er.RTCPeerConnection.prototype[Jr]=Xr[Jr]}),Pr.version<68){const Jr=er.RTCPeerConnection.prototype.addIceCandidate;er.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&arguments[0].candidate===""?Promise.resolve():Jr.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}const xr={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},jr=er.RTCPeerConnection.prototype.getStats;er.RTCPeerConnection.prototype.getStats=function(){const[Jr,an,Xr]=arguments;return jr.apply(this,[Jr||null]).then(wn=>{if(Pr.version<53&&!an)try{wn.forEach(cn=>{cn.type=xr[cn.type]||cn.type})}catch(cn){if(cn.name!=="TypeError")throw cn;wn.forEach((Sn,Fn)=>{wn.set(Fn,Object.assign({},Sn,{type:xr[Sn.type]||Sn.type}))})}return wn}).then(an,Xr)}}function yn(er){if(typeof er!="object"||!er.RTCPeerConnection||!er.RTCRtpSender||er.RTCRtpSender&&"getStats"in er.RTCRtpSender.prototype)return;const Pr=er.RTCPeerConnection.prototype.getSenders;Pr&&(er.RTCPeerConnection.prototype.getSenders=function(){const jr=Pr.apply(this,[]);return jr.forEach(Jr=>Jr._pc=this),jr});const xr=er.RTCPeerConnection.prototype.addTrack;xr&&(er.RTCPeerConnection.prototype.addTrack=function(){const jr=xr.apply(this,arguments);return jr._pc=this,jr}),er.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Lr(er){if(typeof er!="object"||!er.RTCPeerConnection||!er.RTCRtpSender||er.RTCRtpSender&&"getStats"in er.RTCRtpReceiver.prototype)return;const Pr=er.RTCPeerConnection.prototype.getReceivers;Pr&&(er.RTCPeerConnection.prototype.getReceivers=function(){const xr=Pr.apply(this,[]);return xr.forEach(jr=>jr._pc=this),xr}),ft(er,"track",xr=>(xr.receiver._pc=xr.srcElement,xr)),er.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function wr(er){er.RTCPeerConnection&&!("removeStream"in er.RTCPeerConnection.prototype)&&(er.RTCPeerConnection.prototype.removeStream=function(Pr){Et("removeStream","removeTrack"),this.getSenders().forEach(xr=>{xr.track&&Pr.getTracks().includes(xr.track)&&this.removeTrack(xr)})})}function En(er){er.DataChannel&&!er.RTCDataChannel&&(er.RTCDataChannel=er.DataChannel)}function Dr(er){if(typeof er!="object"||!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection.prototype.addTransceiver;Pr&&(er.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const xr=arguments[1],jr=xr&&"sendEncodings"in xr;jr&&xr.sendEncodings.forEach(an=>{if("rid"in an&&!/^[a-z0-9]{0,16}$/i.test(an.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in an&&!(parseFloat(an.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in an&&!(parseFloat(an.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const Jr=Pr.apply(this,arguments);if(jr){const{sender:an}=Jr,Xr=an.getParameters();"encodings"in Xr||(Xr.encodings=xr.sendEncodings,an.sendEncodings=xr.sendEncodings,this.setParametersPromises.push(an.setParameters(Xr).then(()=>{delete an.sendEncodings}).catch(()=>{delete an.sendEncodings})))}return Jr})}function Qr(er){if(typeof er!="object"||!er.RTCRtpSender)return;const Pr=er.RTCRtpSender.prototype.getParameters;Pr&&(er.RTCRtpSender.prototype.getParameters=function(){var xr=Pr.apply(this,arguments);return"sendEncodings"in this?Object.assign({},{encodings:this.sendEncodings},xr):xr})}function Bn(er){if(typeof er!="object"||!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection.prototype.createOffer;er.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>Pr.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):Pr.apply(this,arguments)}}function Br(er){if(typeof er!="object"||!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection.prototype.createAnswer;er.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>Pr.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):Pr.apply(this,arguments)}}function Gr(er){if(typeof er=="object"&&er.RTCPeerConnection){if("getLocalStreams"in er.RTCPeerConnection.prototype||(er.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in er.RTCPeerConnection.prototype)){const Pr=er.RTCPeerConnection.prototype.addTrack;er.RTCPeerConnection.prototype.addStream=function(xr){this._localStreams||(this._localStreams=[]),this._localStreams.includes(xr)||this._localStreams.push(xr),xr.getAudioTracks().forEach(jr=>Pr.call(this,jr,xr)),xr.getVideoTracks().forEach(jr=>Pr.call(this,jr,xr))},er.RTCPeerConnection.prototype.addTrack=function(xr,...jr){return jr&&jr.forEach(Jr=>{this._localStreams?this._localStreams.includes(Jr)||this._localStreams.push(Jr):this._localStreams=[Jr]}),Pr.apply(this,arguments)}}"removeStream"in er.RTCPeerConnection.prototype||(er.RTCPeerConnection.prototype.removeStream=function(Pr){this._localStreams||(this._localStreams=[]);const xr=this._localStreams.indexOf(Pr);if(xr===-1)return;this._localStreams.splice(xr,1);const jr=Pr.getTracks();this.getSenders().forEach(Jr=>{jr.includes(Jr.track)&&this.removeTrack(Jr)})})}}function Dn(er){if(typeof er=="object"&&er.RTCPeerConnection&&("getRemoteStreams"in er.RTCPeerConnection.prototype||(er.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in er.RTCPeerConnection.prototype))){Object.defineProperty(er.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(xr){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=xr),this.addEventListener("track",this._onaddstreampoly=jr=>{jr.streams.forEach(Jr=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(Jr))return;this._remoteStreams.push(Jr);const an=new Event("addstream");an.stream=Jr,this.dispatchEvent(an)})})}});const Pr=er.RTCPeerConnection.prototype.setRemoteDescription;er.RTCPeerConnection.prototype.setRemoteDescription=function(){const xr=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(jr){jr.streams.forEach(Jr=>{if(xr._remoteStreams||(xr._remoteStreams=[]),xr._remoteStreams.indexOf(Jr)>=0)return;xr._remoteStreams.push(Jr);const an=new Event("addstream");an.stream=Jr,xr.dispatchEvent(an)})}),Pr.apply(xr,arguments)}}}function Fr(er){if(typeof er!="object"||!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection.prototype,xr=Pr.createOffer,jr=Pr.createAnswer,Jr=Pr.setLocalDescription,an=Pr.setRemoteDescription,Xr=Pr.addIceCandidate;Pr.createOffer=function(cn,Sn){const Fn=arguments.length>=2?arguments[2]:arguments[0],Kn=xr.apply(this,[Fn]);return Sn?(Kn.then(cn,Sn),Promise.resolve()):Kn},Pr.createAnswer=function(cn,Sn){const Fn=arguments.length>=2?arguments[2]:arguments[0],Kn=jr.apply(this,[Fn]);return Sn?(Kn.then(cn,Sn),Promise.resolve()):Kn};let wn=function(cn,Sn,Fn){const Kn=Jr.apply(this,[cn]);return Fn?(Kn.then(Sn,Fn),Promise.resolve()):Kn};Pr.setLocalDescription=wn,wn=function(cn,Sn,Fn){const Kn=an.apply(this,[cn]);return Fn?(Kn.then(Sn,Fn),Promise.resolve()):Kn},Pr.setRemoteDescription=wn,wn=function(cn,Sn,Fn){const Kn=Xr.apply(this,[cn]);return Fn?(Kn.then(Sn,Fn),Promise.resolve()):Kn},Pr.addIceCandidate=wn}function _i(er){const Pr=er&&er.navigator;if(Pr.mediaDevices&&Pr.mediaDevices.getUserMedia){const xr=Pr.mediaDevices,jr=xr.getUserMedia.bind(xr);Pr.mediaDevices.getUserMedia=Jr=>jr(Gn(Jr))}!Pr.getUserMedia&&Pr.mediaDevices&&Pr.mediaDevices.getUserMedia&&(Pr.getUserMedia=(function(xr,jr,Jr){Pr.mediaDevices.getUserMedia(xr).then(jr,Jr)}).bind(Pr))}function Gn(er){return er&&er.video!==void 0?Object.assign({},er,{video:s(er.video)}):er}function Wt(er){if(!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection;er.RTCPeerConnection=function(xr,jr){if(xr&&xr.iceServers){const Jr=[];for(let an=0;an<xr.iceServers.length;an++){let Xr=xr.iceServers[an];!Xr.hasOwnProperty("urls")&&Xr.hasOwnProperty("url")?(Et("RTCIceServer.url","RTCIceServer.urls"),Xr=JSON.parse(JSON.stringify(Xr)),Xr.urls=Xr.url,delete Xr.url,Jr.push(Xr)):Jr.push(xr.iceServers[an])}xr.iceServers=Jr}return new Pr(xr,jr)},er.RTCPeerConnection.prototype=Pr.prototype,"generateCertificate"in Pr&&Object.defineProperty(er.RTCPeerConnection,"generateCertificate",{get:()=>Pr.generateCertificate})}function Lt(er){typeof er=="object"&&er.RTCTrackEvent&&"receiver"in er.RTCTrackEvent.prototype&&!("transceiver"in er.RTCTrackEvent.prototype)&&Object.defineProperty(er.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zt(er){const Pr=er.RTCPeerConnection.prototype.createOffer;er.RTCPeerConnection.prototype.createOffer=function(xr){if(xr){xr.offerToReceiveAudio!==void 0&&(xr.offerToReceiveAudio=!!xr.offerToReceiveAudio);const jr=this.getTransceivers().find(an=>an.receiver.track.kind==="audio");xr.offerToReceiveAudio===!1&&jr?jr.direction==="sendrecv"?jr.setDirection?jr.setDirection("sendonly"):jr.direction="sendonly":jr.direction==="recvonly"&&(jr.setDirection?jr.setDirection("inactive"):jr.direction="inactive"):xr.offerToReceiveAudio!==!0||jr||this.addTransceiver("audio"),xr.offerToReceiveVideo!==void 0&&(xr.offerToReceiveVideo=!!xr.offerToReceiveVideo);const Jr=this.getTransceivers().find(an=>an.receiver.track.kind==="video");xr.offerToReceiveVideo===!1&&Jr?Jr.direction==="sendrecv"?Jr.setDirection?Jr.setDirection("sendonly"):Jr.direction="sendonly":Jr.direction==="recvonly"&&(Jr.setDirection?Jr.setDirection("inactive"):Jr.direction="inactive"):xr.offerToReceiveVideo!==!0||Jr||this.addTransceiver("video")}return Pr.apply(this,arguments)}}function Zt(er){typeof er!="object"||er.AudioContext||(er.AudioContext=er.webkitAudioContext)}var ar=gt(985),Or=gt.n(ar);function vr(er){if(!er.RTCIceCandidate||er.RTCIceCandidate&&"foundation"in er.RTCIceCandidate.prototype)return;const Pr=er.RTCIceCandidate;er.RTCIceCandidate=function(xr){if(typeof xr=="object"&&xr.candidate&&xr.candidate.indexOf("a=")===0&&((xr=JSON.parse(JSON.stringify(xr))).candidate=xr.candidate.substr(2)),xr.candidate&&xr.candidate.length){const jr=new Pr(xr),Jr=Or().parseCandidate(xr.candidate),an=Object.assign(jr,Jr);return an.toJSON=function(){return{candidate:an.candidate,sdpMid:an.sdpMid,sdpMLineIndex:an.sdpMLineIndex,usernameFragment:an.usernameFragment}},an}return new Pr(xr)},er.RTCIceCandidate.prototype=Pr.prototype,ft(er,"icecandidate",xr=>(xr.candidate&&Object.defineProperty(xr,"candidate",{value:new er.RTCIceCandidate(xr.candidate),writable:"false"}),xr))}function Rr(er){if(!er.RTCPeerConnection)return;const Pr=kt(er);"sctp"in er.RTCPeerConnection.prototype||Object.defineProperty(er.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const xr=er.RTCPeerConnection.prototype.setRemoteDescription;er.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,Pr.browser==="chrome"&&Pr.version>=76){const{sdpSemantics:jr}=this.getConfiguration();jr==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(function(jr){if(!jr||!jr.sdp)return!1;const Jr=Or().splitSections(jr.sdp);return Jr.shift(),Jr.some(an=>{const Xr=Or().parseMLine(an);return Xr&&Xr.kind==="application"&&Xr.protocol.indexOf("SCTP")!==-1})}(arguments[0])){const jr=function(cn){const Sn=cn.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(Sn===null||Sn.length<2)return-1;const Fn=parseInt(Sn[1],10);return Fn!=Fn?-1:Fn}(arguments[0]),Jr=function(cn){let Sn=65536;return Pr.browser==="firefox"&&(Sn=Pr.version<57?cn===-1?16384:2147483637:Pr.version<60?Pr.version===57?65535:65536:2147483637),Sn}(jr),an=function(cn,Sn){let Fn=65536;Pr.browser==="firefox"&&Pr.version===57&&(Fn=65535);const Kn=Or().matchPrefix(cn.sdp,"a=max-message-size:");return Kn.length>0?Fn=parseInt(Kn[0].substr(19),10):Pr.browser==="firefox"&&Sn!==-1&&(Fn=2147483637),Fn}(arguments[0],jr);let Xr;Xr=Jr===0&&an===0?Number.POSITIVE_INFINITY:Jr===0||an===0?Math.max(Jr,an):Math.min(Jr,an);const wn={};Object.defineProperty(wn,"maxMessageSize",{get:()=>Xr}),this._sctp=wn}return xr.apply(this,arguments)}}function fr(er){if(!er.RTCPeerConnection||!("createDataChannel"in er.RTCPeerConnection.prototype))return;function Pr(jr,Jr){const an=jr.send;jr.send=function(){const Xr=arguments[0],wn=Xr.length||Xr.size||Xr.byteLength;if(jr.readyState==="open"&&Jr.sctp&&wn>Jr.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+Jr.sctp.maxMessageSize+" bytes)");return an.apply(jr,arguments)}}const xr=er.RTCPeerConnection.prototype.createDataChannel;er.RTCPeerConnection.prototype.createDataChannel=function(){const jr=xr.apply(this,arguments);return Pr(jr,this),jr},ft(er,"datachannel",jr=>(Pr(jr.channel,jr.target),jr))}function tr(er){if(!er.RTCPeerConnection||"connectionState"in er.RTCPeerConnection.prototype)return;const Pr=er.RTCPeerConnection.prototype;Object.defineProperty(Pr,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(Pr,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(xr){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),xr&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=xr)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(xr=>{const jr=Pr[xr];Pr[xr]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=Jr=>{const an=Jr.target;if(an._lastConnectionState!==an.connectionState){an._lastConnectionState=an.connectionState;const Xr=new Event("connectionstatechange",Jr);an.dispatchEvent(Xr)}return Jr},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),jr.apply(this,arguments)}})}function yr(er){if(!er.RTCPeerConnection)return;const Pr=kt(er);if(Pr.browser==="chrome"&&Pr.version>=71||Pr.browser==="safari"&&Pr.version>=605)return;const xr=er.RTCPeerConnection.prototype.setRemoteDescription;er.RTCPeerConnection.prototype.setRemoteDescription=function(jr){return jr&&jr.sdp&&jr.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1&&(jr.sdp=jr.sdp.split(`
`).filter(Jr=>Jr.trim()!=="a=extmap-allow-mixed").join(`
`)),xr.apply(this,arguments)}}(function({window:er}={},Pr={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const xr=Mt,jr=kt(er),Jr={browserDetails:jr,commonShim:ht,extractVersion:Tt,disableLog:_t,disableWarnings:Rt};switch(jr.browser){case"chrome":if(!mt||!Ut||!Pr.shimChrome)return xr("Chrome shim is not included in this adapter release."),Jr;if(jr.version===null)return xr("Chrome shim can not determine version, not shimming."),Jr;xr("adapter.js shimming chrome."),Jr.browserShim=mt,it(er),yt(er),Ut(er),ct(er),Nt(er),_(er),rt(er),Ct(er),Gt(er),vr(er),tr(er),Rr(er),fr(er),yr(er);break;case"firefox":if(!tt||!Ar||!Pr.shimFirefox)return xr("Firefox shim is not included in this adapter release."),Jr;xr("adapter.js shimming firefox."),Jr.browserShim=tt,Jt(er),Ar(er),hr(er),wr(er),yn(er),Lr(er),En(er),Dr(er),Qr(er),Bn(er),Br(er),vr(er),tr(er),Rr(er),fr(er);break;case"edge":if(!vt||!Ht||!Pr.shimEdge)return xr("MS edge shim is not included in this adapter release."),Jr;xr("adapter.js shimming edge."),Jr.browserShim=vt,Kt(er),jt(er),Ht(er),Bt(er),Rr(er),fr(er);break;case"safari":if(!bt||!Pr.shimSafari)return xr("Safari shim is not included in this adapter release."),Jr;xr("adapter.js shimming safari."),Jr.browserShim=bt,Wt(er),zt(er),Fr(er),Gr(er),Dn(er),Lt(er),_i(er),Zt(er),vr(er),Rr(er),fr(er),yr(er);break;default:xr("Unsupported browser!")}})({window}),gt(393);var hn=Ragnarok.GridApp,Nr=Ragnarok.ChooseStreamingSettings,zr=Ragnarok.ChooseStreamingResolution,kn=Ragnarok.InitializeUtils,Kr=Ragnarok.GetSupportedAudioChannelCount,nn=Ragnarok.GetDeviceCapabilities,Qn=Ragnarok.getSupportedCodecs,Zr=Ragnarok.VirtualButton,on=Ragnarok.VirtualGamepadHandler,Zn=Ragnarok.ConfigureRagnarokSettings,en=Ragnarok.CHANGELIST,ln=Ragnarok.AuthType,eo=Ragnarok.performHttpRequest,$t=Ragnarok.AddPlatformTelemetry,or=Ragnarok.IsFeatureSupported,Yr=Ragnarok.CalculateMaxBitrateKbps,Vr=Ragnarok.CalculateDataUsage,Hr=Ragnarok.LogImpl,Rn=Ragnarok.EVENTS,Ur=Ragnarok.HotkeyModifier,tn=Ragnarok.defaultInputConfigFlags,Un=Ragnarok.StreamingProfilePreset,Hn=Ragnarok.TrackType,so=Ragnarok.STREAMING_STATE,uo=Ragnarok.RNotificationCode,io=Ragnarok.ScErrorCode,mo=Ragnarok.configureSessionControlSettings,ao=Ragnarok.DeviceType,go=Ragnarok.DeviceOS,po=Ragnarok.NetworkType,yo=Ragnarok.registerLogCallback,wo=Ragnarok.LogLevel,ur=Ragnarok.createSessionControl,Cr=Ragnarok.SdrHdrMode,$r=Ragnarok.Usage,dn=Ragnarok.Protocol,rn=Ragnarok.AppLevelProtocol,An=Ragnarok.AdState,Pn=Ragnarok.AdAction,Tn=Ragnarok.BitDepth,jn=Ragnarok.ClientType,Nn=Ragnarok.SessionState,zn=Ragnarok.SessionProgressState,Jn=Ragnarok.AppLaunchMode,_o=Ragnarok.updateSessionParameters,fo=Ragnarok.isCancelCode,$o=Ragnarok.isResumableSessionState,Es=Ragnarok.getResumableSession,$s=Ragnarok.SessionControlTelemetry,Ho=Ragnarok.GsErrorCode,Sl=Ragnarok.GridServerSettings,ns=Ragnarok.ConfigureGridServerSettings,qs=Ragnarok.BrowserName,js=Ragnarok.PlatformName,Vo=Ragnarok.getPlatformDetails,as=Ragnarok.DeviceModel,Wo=Ragnarok.DeviceVendor,ss=Ragnarok.CLIENT_VERSION,Al=Ragnarok.CLIENT_IDENTIFICATION,_l=Ragnarok.SESSIONMODIFY_ACTION,ls=Ragnarok.AudioFormat,El=Ragnarok.ClientStreamer,Cl=Ragnarok.GS_EVENTS,Cs=Ragnarok.GridServer,Tl=Ragnarok.PassThruServer,Us=Ragnarok.VsyncType,hs=Ragnarok.getDeviceCapabilities,Ml=Ragnarok.serializeDeviceCapabilities,Hs=Ragnarok.PayloadOSType,Ts=Ragnarok.PayloadBrowserType,zs=Ragnarok.PayloadDeviceType,gs=Ragnarok.ClientHeaderOSType,Rl=Ragnarok.ClientHeaderBrowserType,Os=Ragnarok.ClientHeaderDeviceType,Ks=Ragnarok.translatePlatformDetailsForPayload,Gs=Ragnarok.translatePlatformDetailsForClientHeader,ys=Ragnarok.getStreamerType,Ms=Ragnarok.BrowserFeature,Wl=Ragnarok.isFeatureSupported,xl=Ragnarok.shouldDefaultEnableMic,Xo=Ragnarok.getRecommendedBitrate,pr=Ragnarok.getStreamStartParameters,qr=Ragnarok.estimateDataUsage,pn=Ragnarok.NskTelemetry,Ln=Ragnarok.createNskStreamClient,Eo=Ragnarok.configureRagnarokSettings,ro=Ragnarok.getNetworkTypeDetector,xo=Ragnarok.RErrorCode,Po=Ragnarok.HidType,Io=Ragnarok.InputType,Co=Ragnarok.VideoCodecType,Do=Ragnarok.MicState,qo=Ragnarok.DynamicStreamingMode,Lo=Ragnarok.MediaTrackKind,zo=Ragnarok.StreamStopReason,Fo=Ragnarok.StreamWarningType,ba=Ragnarok.CursorType,Zo=Ragnarok.StreamingState})(),et.exports=dt})()},142:(et,ot,st)=>{st.r(ot),st.d(ot,{DiagConsoleLogger:()=>pt,DiagLogLevel:()=>At,INVALID_SPANID:()=>Bn,INVALID_SPAN_CONTEXT:()=>Gr,INVALID_TRACEID:()=>Br,ProxyTracer:()=>nn,ProxyTracerProvider:()=>Zr,ROOT_CONTEXT:()=>_e,SamplingDecision:()=>yr,SpanKind:()=>hn,SpanStatusCode:()=>Nr,TraceFlags:()=>Ar,ValueType:()=>$,baggageEntryMetadataFromString:()=>at,context:()=>or,createContextKey:()=>s,createNoopMeter:()=>hr,createTraceState:()=>$t,default:()=>wo,defaultTextMapGetter:()=>yn,defaultTextMapSetter:()=>Lr,diag:()=>Yr,isSpanContextValid:()=>fr,isValidSpanId:()=>Rr,isValidTraceId:()=>vr,metrics:()=>Rn,propagation:()=>go,trace:()=>yo});var lt=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof st.g=="object"?st.g:{},nt="1.4.1",gt=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,dt=function(ur){var Cr=new Set([ur]),$r=new Set,dn=ur.match(gt);if(!dn)return function(){return!1};var rn=+dn[1],An=+dn[2],Pn=+dn[3];if(dn[4]!=null)return function(Nn){return Nn===ur};function Tn(Nn){return $r.add(Nn),!1}function jn(Nn){return Cr.add(Nn),!0}return function(Nn){if(Cr.has(Nn))return!0;if($r.has(Nn))return!1;var zn=Nn.match(gt);if(!zn)return Tn(Nn);var Jn=+zn[1],_o=+zn[2],fo=+zn[3];return zn[4]!=null||rn!==Jn?Tn(Nn):rn===0?An===_o&&Pn<=fo?jn(Nn):Tn(Nn):An<=_o?jn(Nn):Tn(Nn)}}(nt),mt=nt.split(".")[0],vt=Symbol.for("opentelemetry.js.api."+mt),tt=lt;function bt(ur,Cr,$r,dn){var rn;dn===void 0&&(dn=!1);var An=tt[vt]=(rn=tt[vt])!==null&&rn!==void 0?rn:{version:nt};if(!dn&&An[ur]){var Pn=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+ur);return $r.error(Pn.stack||Pn.message),!1}return An.version!==nt?(Pn=new Error("@opentelemetry/api: Registration of version v"+An.version+" for "+ur+" does not match previously registered API v"+nt),$r.error(Pn.stack||Pn.message),!1):(An[ur]=Cr,$r.debug("@opentelemetry/api: Registered a global for "+ur+" v"+nt+"."),!0)}function ht(ur){var Cr,$r,dn=(Cr=tt[vt])===null||Cr===void 0?void 0:Cr.version;if(dn&&dt(dn))return($r=tt[vt])===null||$r===void 0?void 0:$r[ur]}function St(ur,Cr){Cr.debug("@opentelemetry/api: Unregistering a global for "+ur+" v"+nt+".");var $r=tt[vt];$r&&delete $r[ur]}var At,Tt=function(){function ur(Cr){this._namespace=Cr.namespace||"DiagComponentLogger"}return ur.prototype.debug=function(){for(var Cr=[],$r=0;$r<arguments.length;$r++)Cr[$r]=arguments[$r];return ft("debug",this._namespace,Cr)},ur.prototype.error=function(){for(var Cr=[],$r=0;$r<arguments.length;$r++)Cr[$r]=arguments[$r];return ft("error",this._namespace,Cr)},ur.prototype.info=function(){for(var Cr=[],$r=0;$r<arguments.length;$r++)Cr[$r]=arguments[$r];return ft("info",this._namespace,Cr)},ur.prototype.warn=function(){for(var Cr=[],$r=0;$r<arguments.length;$r++)Cr[$r]=arguments[$r];return ft("warn",this._namespace,Cr)},ur.prototype.verbose=function(){for(var Cr=[],$r=0;$r<arguments.length;$r++)Cr[$r]=arguments[$r];return ft("verbose",this._namespace,Cr)},ur}();function ft(ur,Cr,$r){var dn=ht("diag");if(dn)return $r.unshift(Cr),dn[ur].apply(dn,function(rn,An,Pn){if(arguments.length===2)for(var Tn,jn=0,Nn=An.length;jn<Nn;jn++)!Tn&&jn in An||(Tn||(Tn=Array.prototype.slice.call(An,0,jn)),Tn[jn]=An[jn]);return rn.concat(Tn||Array.prototype.slice.call(An))}([],function(rn,An){var Pn=typeof Symbol=="function"&&rn[Symbol.iterator];if(!Pn)return rn;var Tn,jn,Nn=Pn.call(rn),zn=[];try{for(;(An===void 0||An-- >0)&&!(Tn=Nn.next()).done;)zn.push(Tn.value)}catch(Jn){jn={error:Jn}}finally{try{Tn&&!Tn.done&&(Pn=Nn.return)&&Pn.call(Nn)}finally{if(jn)throw jn.error}}return zn}($r),!1))}(function(ur){ur[ur.NONE=0]="NONE",ur[ur.ERROR=30]="ERROR",ur[ur.WARN=50]="WARN",ur[ur.INFO=60]="INFO",ur[ur.DEBUG=70]="DEBUG",ur[ur.VERBOSE=80]="VERBOSE",ur[ur.ALL=9999]="ALL"})(At||(At={}));var _t=function(){function ur(){function Cr(dn){return function(){for(var rn=[],An=0;An<arguments.length;An++)rn[An]=arguments[An];var Pn=ht("diag");if(Pn)return Pn[dn].apply(Pn,function(Tn,jn,Nn){if(arguments.length===2)for(var zn,Jn=0,_o=jn.length;Jn<_o;Jn++)!zn&&Jn in jn||(zn||(zn=Array.prototype.slice.call(jn,0,Jn)),zn[Jn]=jn[Jn]);return Tn.concat(zn||Array.prototype.slice.call(jn))}([],function(Tn,jn){var Nn=typeof Symbol=="function"&&Tn[Symbol.iterator];if(!Nn)return Tn;var zn,Jn,_o=Nn.call(Tn),fo=[];try{for(;(jn===void 0||jn-- >0)&&!(zn=_o.next()).done;)fo.push(zn.value)}catch($o){Jn={error:$o}}finally{try{zn&&!zn.done&&(Nn=_o.return)&&Nn.call(_o)}finally{if(Jn)throw Jn.error}}return fo}(rn),!1))}}var $r=this;$r.setLogger=function(dn,rn){var An,Pn,Tn;if(rn===void 0&&(rn={logLevel:At.INFO}),dn===$r){var jn=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return $r.error((An=jn.stack)!==null&&An!==void 0?An:jn.message),!1}typeof rn=="number"&&(rn={logLevel:rn});var Nn=ht("diag"),zn=function(_o,fo){function $o(Es,$s){var Ho=fo[Es];return typeof Ho=="function"&&_o>=$s?Ho.bind(fo):function(){}}return _o<At.NONE?_o=At.NONE:_o>At.ALL&&(_o=At.ALL),fo=fo||{},{error:$o("error",At.ERROR),warn:$o("warn",At.WARN),info:$o("info",At.INFO),debug:$o("debug",At.DEBUG),verbose:$o("verbose",At.VERBOSE)}}((Pn=rn.logLevel)!==null&&Pn!==void 0?Pn:At.INFO,dn);if(Nn&&!rn.suppressOverrideMessage){var Jn=(Tn=new Error().stack)!==null&&Tn!==void 0?Tn:"<failed to generate stacktrace>";Nn.warn("Current logger will be overwritten from "+Jn),zn.warn("Current logger will overwrite one already registered from "+Jn)}return bt("diag",zn,$r,!0)},$r.disable=function(){St("diag",$r)},$r.createComponentLogger=function(dn){return new Tt(dn)},$r.verbose=Cr("verbose"),$r.debug=Cr("debug"),$r.info=Cr("info"),$r.warn=Cr("warn"),$r.error=Cr("error")}return ur.instance=function(){return this._instance||(this._instance=new ur),this._instance},ur}(),Rt=function(){function ur(Cr){this._entries=Cr?new Map(Cr):new Map}return ur.prototype.getEntry=function(Cr){var $r=this._entries.get(Cr);if($r)return Object.assign({},$r)},ur.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(Cr){var $r=function(dn,rn){var An=typeof Symbol=="function"&&dn[Symbol.iterator];if(!An)return dn;var Pn,Tn,jn=An.call(dn),Nn=[];try{for(;(rn===void 0||rn-- >0)&&!(Pn=jn.next()).done;)Nn.push(Pn.value)}catch(zn){Tn={error:zn}}finally{try{Pn&&!Pn.done&&(An=jn.return)&&An.call(jn)}finally{if(Tn)throw Tn.error}}return Nn}(Cr,2);return[$r[0],$r[1]]})},ur.prototype.setEntry=function(Cr,$r){var dn=new ur(this._entries);return dn._entries.set(Cr,$r),dn},ur.prototype.removeEntry=function(Cr){var $r=new ur(this._entries);return $r._entries.delete(Cr),$r},ur.prototype.removeEntries=function(){for(var Cr,$r,dn=[],rn=0;rn<arguments.length;rn++)dn[rn]=arguments[rn];var An=new ur(this._entries);try{for(var Pn=function(Nn){var zn=typeof Symbol=="function"&&Symbol.iterator,Jn=zn&&Nn[zn],_o=0;if(Jn)return Jn.call(Nn);if(Nn&&typeof Nn.length=="number")return{next:function(){return Nn&&_o>=Nn.length&&(Nn=void 0),{value:Nn&&Nn[_o++],done:!Nn}}};throw new TypeError(zn?"Object is not iterable.":"Symbol.iterator is not defined.")}(dn),Tn=Pn.next();!Tn.done;Tn=Pn.next()){var jn=Tn.value;An._entries.delete(jn)}}catch(Nn){Cr={error:Nn}}finally{try{Tn&&!Tn.done&&($r=Pn.return)&&$r.call(Pn)}finally{if(Cr)throw Cr.error}}return An},ur.prototype.clear=function(){return new ur},ur}(),Mt=Symbol("BaggageEntryMetadata"),Et=_t.instance();function kt(ur){return ur===void 0&&(ur={}),new Rt(new Map(Object.entries(ur)))}function at(ur){return typeof ur!="string"&&(Et.error("Cannot create baggage metadata from unknown type: "+typeof ur),ur=""),{__TYPE__:Mt,toString:function(){return ur}}}function s(ur){return Symbol.for(ur)}var b,$,_e=new function ur(Cr){var $r=this;$r._currentContext=Cr?new Map(Cr):new Map,$r.getValue=function(dn){return $r._currentContext.get(dn)},$r.setValue=function(dn,rn){var An=new ur($r._currentContext);return An._currentContext.set(dn,rn),An},$r.deleteValue=function(dn){var rn=new ur($r._currentContext);return rn._currentContext.delete(dn),rn}},it=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],pt=function(){function ur($r){return function(){for(var dn=[],rn=0;rn<arguments.length;rn++)dn[rn]=arguments[rn];if(console){var An=console[$r];if(typeof An!="function"&&(An=console.log),typeof An=="function")return An.apply(console,dn)}}}for(var Cr=0;Cr<it.length;Cr++)this[it[Cr].n]=ur(it[Cr].c)},yt=(b=function(ur,Cr){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($r,dn){$r.__proto__=dn}||function($r,dn){for(var rn in dn)Object.prototype.hasOwnProperty.call(dn,rn)&&($r[rn]=dn[rn])},b(ur,Cr)},function(ur,Cr){if(typeof Cr!="function"&&Cr!==null)throw new TypeError("Class extends value "+String(Cr)+" is not a constructor or null");function $r(){this.constructor=ur}b(ur,Cr),ur.prototype=Cr===null?Object.create(Cr):($r.prototype=Cr.prototype,new $r)}),ct=function(){function ur(){}return ur.prototype.createHistogram=function(Cr,$r){return jt},ur.prototype.createCounter=function(Cr,$r){return Kt},ur.prototype.createUpDownCounter=function(Cr,$r){return Ht},ur.prototype.createObservableGauge=function(Cr,$r){return Jt},ur.prototype.createObservableCounter=function(Cr,$r){return Bt},ur.prototype.createObservableUpDownCounter=function(Cr,$r){return sr},ur.prototype.addBatchObservableCallback=function(Cr,$r){},ur.prototype.removeBatchObservableCallback=function(Cr){},ur}(),_=function(){},rt=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return yt(Cr,ur),Cr.prototype.add=function($r,dn){},Cr}(_),Ct=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return yt(Cr,ur),Cr.prototype.add=function($r,dn){},Cr}(_),It=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return yt(Cr,ur),Cr.prototype.record=function($r,dn){},Cr}(_),Nt=function(){function ur(){}return ur.prototype.addCallback=function(Cr){},ur.prototype.removeCallback=function(Cr){},ur}(),Ut=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return yt(Cr,ur),Cr}(Nt),Gt=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return yt(Cr,ur),Cr}(Nt),Pt=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return yt(Cr,ur),Cr}(Nt),qt=new ct,Kt=new rt,jt=new It,Ht=new Ct,Bt=new Ut,Jt=new Gt,sr=new Pt;function hr(){return qt}(function(ur){ur[ur.INT=0]="INT",ur[ur.DOUBLE=1]="DOUBLE"})($||($={}));var Ar,yn={get:function(ur,Cr){if(ur!=null)return ur[Cr]},keys:function(ur){return ur==null?[]:Object.keys(ur)}},Lr={set:function(ur,Cr,$r){ur!=null&&(ur[Cr]=$r)}},wr=function(){function ur(){}return ur.prototype.active=function(){return _e},ur.prototype.with=function(Cr,$r,dn){for(var rn=[],An=3;An<arguments.length;An++)rn[An-3]=arguments[An];return $r.call.apply($r,function(Pn,Tn,jn){if(arguments.length===2)for(var Nn,zn=0,Jn=Tn.length;zn<Jn;zn++)!Nn&&zn in Tn||(Nn||(Nn=Array.prototype.slice.call(Tn,0,zn)),Nn[zn]=Tn[zn]);return Pn.concat(Nn||Array.prototype.slice.call(Tn))}([dn],function(Pn,Tn){var jn=typeof Symbol=="function"&&Pn[Symbol.iterator];if(!jn)return Pn;var Nn,zn,Jn=jn.call(Pn),_o=[];try{for(;(Tn===void 0||Tn-- >0)&&!(Nn=Jn.next()).done;)_o.push(Nn.value)}catch(fo){zn={error:fo}}finally{try{Nn&&!Nn.done&&(jn=Jn.return)&&jn.call(Jn)}finally{if(zn)throw zn.error}}return _o}(rn),!1))},ur.prototype.bind=function(Cr,$r){return $r},ur.prototype.enable=function(){return this},ur.prototype.disable=function(){return this},ur}(),En="context",Dr=new wr,Qr=function(){function ur(){}return ur.getInstance=function(){return this._instance||(this._instance=new ur),this._instance},ur.prototype.setGlobalContextManager=function(Cr){return bt(En,Cr,_t.instance())},ur.prototype.active=function(){return this._getContextManager().active()},ur.prototype.with=function(Cr,$r,dn){for(var rn,An=[],Pn=3;Pn<arguments.length;Pn++)An[Pn-3]=arguments[Pn];return(rn=this._getContextManager()).with.apply(rn,function(Tn,jn,Nn){if(arguments.length===2)for(var zn,Jn=0,_o=jn.length;Jn<_o;Jn++)!zn&&Jn in jn||(zn||(zn=Array.prototype.slice.call(jn,0,Jn)),zn[Jn]=jn[Jn]);return Tn.concat(zn||Array.prototype.slice.call(jn))}([Cr,$r,dn],function(Tn,jn){var Nn=typeof Symbol=="function"&&Tn[Symbol.iterator];if(!Nn)return Tn;var zn,Jn,_o=Nn.call(Tn),fo=[];try{for(;(jn===void 0||jn-- >0)&&!(zn=_o.next()).done;)fo.push(zn.value)}catch($o){Jn={error:$o}}finally{try{zn&&!zn.done&&(Nn=_o.return)&&Nn.call(_o)}finally{if(Jn)throw Jn.error}}return fo}(An),!1))},ur.prototype.bind=function(Cr,$r){return this._getContextManager().bind(Cr,$r)},ur.prototype._getContextManager=function(){return ht(En)||Dr},ur.prototype.disable=function(){this._getContextManager().disable(),St(En,_t.instance())},ur}();(function(ur){ur[ur.NONE=0]="NONE",ur[ur.SAMPLED=1]="SAMPLED"})(Ar||(Ar={}));var Bn="0000000000000000",Br="00000000000000000000000000000000",Gr={traceId:Br,spanId:Bn,traceFlags:Ar.NONE},Dn=function(){function ur(Cr){Cr===void 0&&(Cr=Gr),this._spanContext=Cr}return ur.prototype.spanContext=function(){return this._spanContext},ur.prototype.setAttribute=function(Cr,$r){return this},ur.prototype.setAttributes=function(Cr){return this},ur.prototype.addEvent=function(Cr,$r){return this},ur.prototype.setStatus=function(Cr){return this},ur.prototype.updateName=function(Cr){return this},ur.prototype.end=function(Cr){},ur.prototype.isRecording=function(){return!1},ur.prototype.recordException=function(Cr,$r){},ur}(),Fr=s("OpenTelemetry Context Key SPAN");function _i(ur){return ur.getValue(Fr)||void 0}function Gn(){return _i(Qr.getInstance().active())}function Wt(ur,Cr){return ur.setValue(Fr,Cr)}function Lt(ur){return ur.deleteValue(Fr)}function zt(ur,Cr){return Wt(ur,new Dn(Cr))}function Zt(ur){var Cr;return(Cr=_i(ur))===null||Cr===void 0?void 0:Cr.spanContext()}var ar=/^([0-9a-f]{32})$/i,Or=/^[0-9a-f]{16}$/i;function vr(ur){return ar.test(ur)&&ur!==Br}function Rr(ur){return Or.test(ur)&&ur!==Bn}function fr(ur){return vr(ur.traceId)&&Rr(ur.spanId)}function tr(ur){return new Dn(ur)}var yr,hn,Nr,zr=Qr.getInstance(),kn=function(){function ur(){}return ur.prototype.startSpan=function(Cr,$r,dn){if(dn===void 0&&(dn=zr.active()),!!($r!=null&&$r.root))return new Dn;var rn,An=dn&&Zt(dn);return typeof(rn=An)=="object"&&typeof rn.spanId=="string"&&typeof rn.traceId=="string"&&typeof rn.traceFlags=="number"&&fr(An)?new Dn(An):new Dn},ur.prototype.startActiveSpan=function(Cr,$r,dn,rn){var An,Pn,Tn;if(!(arguments.length<2)){arguments.length===2?Tn=$r:arguments.length===3?(An=$r,Tn=dn):(An=$r,Pn=dn,Tn=rn);var jn=Pn??zr.active(),Nn=this.startSpan(Cr,An,jn),zn=Wt(jn,Nn);return zr.with(zn,Tn,void 0,Nn)}},ur}(),Kr=new kn,nn=function(){function ur(Cr,$r,dn,rn){this._provider=Cr,this.name=$r,this.version=dn,this.options=rn}return ur.prototype.startSpan=function(Cr,$r,dn){return this._getTracer().startSpan(Cr,$r,dn)},ur.prototype.startActiveSpan=function(Cr,$r,dn,rn){var An=this._getTracer();return Reflect.apply(An.startActiveSpan,An,arguments)},ur.prototype._getTracer=function(){if(this._delegate)return this._delegate;var Cr=this._provider.getDelegateTracer(this.name,this.version,this.options);return Cr?(this._delegate=Cr,this._delegate):Kr},ur}(),Qn=new(function(){function ur(){}return ur.prototype.getTracer=function(Cr,$r,dn){return new kn},ur}()),Zr=function(){function ur(){}return ur.prototype.getTracer=function(Cr,$r,dn){var rn;return(rn=this.getDelegateTracer(Cr,$r,dn))!==null&&rn!==void 0?rn:new nn(this,Cr,$r,dn)},ur.prototype.getDelegate=function(){var Cr;return(Cr=this._delegate)!==null&&Cr!==void 0?Cr:Qn},ur.prototype.setDelegate=function(Cr){this._delegate=Cr},ur.prototype.getDelegateTracer=function(Cr,$r,dn){var rn;return(rn=this._delegate)===null||rn===void 0?void 0:rn.getTracer(Cr,$r,dn)},ur}();(function(ur){ur[ur.NOT_RECORD=0]="NOT_RECORD",ur[ur.RECORD=1]="RECORD",ur[ur.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(yr||(yr={})),function(ur){ur[ur.INTERNAL=0]="INTERNAL",ur[ur.SERVER=1]="SERVER",ur[ur.CLIENT=2]="CLIENT",ur[ur.PRODUCER=3]="PRODUCER",ur[ur.CONSUMER=4]="CONSUMER"}(hn||(hn={})),function(ur){ur[ur.UNSET=0]="UNSET",ur[ur.OK=1]="OK",ur[ur.ERROR=2]="ERROR"}(Nr||(Nr={}));var on="[_0-9a-z-*/]",Zn=new RegExp("^(?:[a-z]"+on+"{0,255}|[a-z0-9]"+on+"{0,240}@[a-z]"+on+"{0,13})$"),en=/^[ -~]{0,255}[!-~]$/,ln=/,|=/,eo=function(){function ur(Cr){this._internalState=new Map,Cr&&this._parse(Cr)}return ur.prototype.set=function(Cr,$r){var dn=this._clone();return dn._internalState.has(Cr)&&dn._internalState.delete(Cr),dn._internalState.set(Cr,$r),dn},ur.prototype.unset=function(Cr){var $r=this._clone();return $r._internalState.delete(Cr),$r},ur.prototype.get=function(Cr){return this._internalState.get(Cr)},ur.prototype.serialize=function(){var Cr=this;return this._keys().reduce(function($r,dn){return $r.push(dn+"="+Cr.get(dn)),$r},[]).join(",")},ur.prototype._parse=function(Cr){Cr.length>512||(this._internalState=Cr.split(",").reverse().reduce(function($r,dn){var rn=dn.trim(),An=rn.indexOf("=");if(An!==-1){var Pn=rn.slice(0,An),Tn=rn.slice(An+1,dn.length);(function(jn){return Zn.test(jn)})(Pn)&&function(jn){return en.test(jn)&&!ln.test(jn)}(Tn)&&$r.set(Pn,Tn)}return $r},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},ur.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},ur.prototype._clone=function(){var Cr=new ur;return Cr._internalState=new Map(this._internalState),Cr},ur}();function $t(ur){return new eo(ur)}var or=Qr.getInstance(),Yr=_t.instance(),Vr=new(function(){function ur(){}return ur.prototype.getMeter=function(Cr,$r,dn){return qt},ur}()),Hr="metrics",Rn=function(){function ur(){}return ur.getInstance=function(){return this._instance||(this._instance=new ur),this._instance},ur.prototype.setGlobalMeterProvider=function(Cr){return bt(Hr,Cr,_t.instance())},ur.prototype.getMeterProvider=function(){return ht(Hr)||Vr},ur.prototype.getMeter=function(Cr,$r,dn){return this.getMeterProvider().getMeter(Cr,$r,dn)},ur.prototype.disable=function(){St(Hr,_t.instance())},ur}().getInstance(),Ur=function(){function ur(){}return ur.prototype.inject=function(Cr,$r){},ur.prototype.extract=function(Cr,$r){return Cr},ur.prototype.fields=function(){return[]},ur}(),tn=s("OpenTelemetry Baggage Key");function Un(ur){return ur.getValue(tn)||void 0}function Hn(){return Un(Qr.getInstance().active())}function so(ur,Cr){return ur.setValue(tn,Cr)}function uo(ur){return ur.deleteValue(tn)}var io="propagation",mo=new Ur,ao=function(){function ur(){this.createBaggage=kt,this.getBaggage=Un,this.getActiveBaggage=Hn,this.setBaggage=so,this.deleteBaggage=uo}return ur.getInstance=function(){return this._instance||(this._instance=new ur),this._instance},ur.prototype.setGlobalPropagator=function(Cr){return bt(io,Cr,_t.instance())},ur.prototype.inject=function(Cr,$r,dn){return dn===void 0&&(dn=Lr),this._getGlobalPropagator().inject(Cr,$r,dn)},ur.prototype.extract=function(Cr,$r,dn){return dn===void 0&&(dn=yn),this._getGlobalPropagator().extract(Cr,$r,dn)},ur.prototype.fields=function(){return this._getGlobalPropagator().fields()},ur.prototype.disable=function(){St(io,_t.instance())},ur.prototype._getGlobalPropagator=function(){return ht(io)||mo},ur}(),go=ao.getInstance(),po="trace",yo=function(){function ur(){this._proxyTracerProvider=new Zr,this.wrapSpanContext=tr,this.isSpanContextValid=fr,this.deleteSpan=Lt,this.getSpan=_i,this.getActiveSpan=Gn,this.getSpanContext=Zt,this.setSpan=Wt,this.setSpanContext=zt}return ur.getInstance=function(){return this._instance||(this._instance=new ur),this._instance},ur.prototype.setGlobalTracerProvider=function(Cr){var $r=bt(po,this._proxyTracerProvider,_t.instance());return $r&&this._proxyTracerProvider.setDelegate(Cr),$r},ur.prototype.getTracerProvider=function(){return ht(po)||this._proxyTracerProvider},ur.prototype.getTracer=function(Cr,$r){return this.getTracerProvider().getTracer(Cr,$r)},ur.prototype.disable=function(){St(po,_t.instance()),this._proxyTracerProvider=new Zr},ur}().getInstance();const wo={context:or,diag:Yr,metrics:Rn,propagation:go,trace:yo}},52:(et,ot,st)=>{Object.defineProperty(ot,"__esModule",{value:!0});const lt=st(823),nt=st(84),gt=st(704);class dt{static async connect(vt){if(!dt._stream){const tt=vt.streamSource;try{if(tt==="gfn")return dt._stream=new nt.default,dt._stream.connect(vt.streamConfig);if(tt==="direct")return dt._stream=new lt.default,dt._stream.connect(vt.streamConfig)}catch(bt){throw{action:gt.eAction.start,status:gt.eStatus.error,info:bt}}throw console.error(`Stream:init: ${tt} is an invalid source`),{action:gt.eAction.start,status:gt.eStatus.error,info:TypeError(`Stream:init: '${tt}' is an invalid source`)}}return{action:gt.eAction.start,status:gt.eStatus.inProgress,info:"Starting stream"}}static async sendMessage(vt){try{if(dt._stream)return setTimeout(()=>{var tt;return(tt=dt._stream)===null||tt===void 0?void 0:tt.sendMessage(vt)},100),console.debug(`Sent message to GFN app: ${vt}`),{action:gt.eAction.message,status:gt.eStatus.success,info:"Message was successfully sent."};{const tt="There is no stream controller. Please call the setup method.";throw console.error(`Error sending message: ${tt}`),{action:gt.eAction.message,status:gt.eStatus.error,info:tt}}}catch(tt){throw console.error("Error sending message: "+tt),{action:gt.eAction.message,status:gt.eStatus.error,info:tt}}}static async start(){if(dt._stream)return dt._stream.start();throw{action:gt.eAction.start,status:gt.eStatus.error,info:"There is no stream controller. Please call the setup method."}}static async stop(){if(dt._stream)return dt._stream.stop().then(vt=>vt);throw{action:gt.eAction.stop,status:gt.eStatus.error,info:"There is no stream controller. Please call the setup method."}}static async terminate(vt=!1,tt=!1){if(dt._stream)return dt._stream.terminate(vt).then(bt=>((bt==null?void 0:bt.status)==="success"&&(dt._stream=null),bt));throw{action:gt.eAction.terminate,status:gt.eStatus.error,info:"There is no stream controller. Please call the setup method."}}}ot.default=dt},122:(et,ot)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.DefaultDirectQueryProps=void 0,ot.DefaultDirectQueryProps={accessToken:"",autolaunch:!0,cursor:"free",fps:60,height:1080,mediaport:14109,mediaserver:"",mic:!1,nucleus:"",server:"",sessionid:"",signalingport:48322,signalingserver:"",width:1920},ot.default=class{static query(st){return Object.keys(st).reduce((lt,nt)=>(ot.DefaultDirectQueryProps[nt]!==void 0&&st[nt]!==void 0&&nt!=="width"&&nt!=="height"&&(lt=`${lt}&${nt}=${st[nt]}`),lt),`?resolution=${st.width}x${st.height}`)}}},823:(et,ot,st)=>{Object.defineProperty(ot,"__esModule",{value:!0});const lt=st(271),nt=st(947),gt=st(473),dt=st(498),mt=st(704),vt=st(122),tt="client",bt={videoElementId:"remote-video",audioElementId:"remote-audio",authenticate:!1,maxReconnects:5,nativeTouchEvents:!1,backendurl:"",connectivityTimeout:2e3,onUpdate:null,onStart:null,onStop:null,onTerminate:null,onStreamStats:null,onCustomEvent:null,...vt.DefaultDirectQueryProps};ot.default=class{constructor(){this._ragnarokApp=null,this._backendURL="",this._accessToken=null,this._nucleus=null,this._sessionID=null}async connect(ht){if(!ht)throw{action:mt.eAction.start,status:mt.eStatus.error,info:"No DirectConfig props provided. Please refer to usage documentation."};if((ht={...bt,...ht}).maxReconnects<0)throw{action:mt.eAction.start,status:mt.eStatus.error,info:`Invalid prop DirectConfig.maxReconnects: ${ht.maxReconnects}. Must be >= 0.`};const St={search:vt.default.query(ht)};try{this._backendURL=ht.backendurl,this._accessToken=ht.accessToken,this._nucleus=ht.nucleus,this._sessionID=ht.sessionid,ht.maxReconnects===0&&(St.search=`${St.search}&disableworkerws=true`);const At=await(0,lt.getPlatformDetails)(),Tt=ht.maxReconnects+1;let ft=1;const _t=(Rt,Mt)=>{const Et=mt.StreamEventConverter.convert(Rt,Mt);Et.status===mt.eStatus.error&&(ft<Tt&&(Et.status=mt.eStatus.warning),Et.info=`${ft} of ${Tt} connection attempts have failed.`,++ft),ht.onStart&&ht.onStart(Et)};ht.authenticate||(St.search=St.search.replace("accessToken","accessTokenUnused")),this._ragnarokApp=new dt.RagnarokApp({maxSessionStartRetry:ht.maxReconnects,platformDetails:At,videoElementId:ht.videoElementId,audioElementId:ht.audioElementId,urlLocation:St,authProvider:new nt.DummyAuth,logBuffer:new gt.LogBuffer(512e3),onSessionStartResult:_t,onProgressUpdate:ht.onUpdate?(Rt,Mt)=>ht.onUpdate(mt.StreamEventConverter.convert(Rt,Mt)):null,onStreamStopped:null,onActiveSessionResult:null,onStreamingEvent:null,onGetSessionResult:null,onISSOUpdate:ht.onStreamStats?(Rt,Mt)=>ht.onStreamStats(mt.StreamEventConverter.convert(Rt,Mt)):null,onCustomEvent:ht.onCustomEvent,useTelemetry:!1,nativeTouchEvents:ht.nativeTouchEvents,connectivityTimeout:ht.connectivityTimeout}),ht.autolaunch&&await this._ragnarokApp.startButtonClick()}catch(At){throw gt.Log.e(tt,`Some error happened: ${At==null?void 0:At.name}, ${At==null?void 0:At.message}.`),{action:mt.eAction.start,status:mt.eStatus.error,info:At}}return{action:mt.eAction.start,status:mt.eStatus.inProgress,info:"Starting stream."}}sendMessage(ht){const St={messageType:"json",messageRecipient:"kit",data:ht};this._ragnarokApp.sendCustomMessage(St)}async stop(){try{return this._ragnarokApp.stopButtonClick(),{action:mt.eAction.stop,status:mt.eStatus.inProgress,info:"Stopping stream."}}catch{return{action:mt.eAction.stop,status:mt.eStatus.error,info:"Stopping stream."}}}async start(){try{return await this._ragnarokApp.startButtonClick(),{action:mt.eAction.start,status:mt.eStatus.inProgress,info:"Starting stream."}}catch(ht){return{action:mt.eAction.start,status:mt.eStatus.error,info:ht}}}_terminateStream(){this._ragnarokApp.stopButtonClick(!1,!0),this._ragnarokApp=null,this._backendURL="",this._accessToken=null,this._nucleus=null,this._sessionID=null}async terminate(ht){if(!ht)return this._terminateStream(),{action:mt.eAction.terminate,status:mt.eStatus.success,info:"Session has terminated"};if(confirm("Terminating session will destroy all associated resources and is irrecoverable, unsaved changes will be lost, do you confirm you want to terminate it?")){const St=this._accessToken;this._nucleus;const At=this._sessionID,Tt=this._backendURL;this._terminateStream();let ft="DELETE";if(Tt){let _t=null;{const Rt=`https://${Tt}/stream`;_t=await fetch(Rt,{method:ft,headers:{Authorization:`Bearer ${St}`,accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({session_id:`${At}`})})}if((_t==null?void 0:_t.status)!==200){let Rt=null,Mt=null,Et=null;try{Rt=await _t.setHeader("Strict-Transport-Security","max-age=63072000; includeSubDomains").json(),Et=Rt.message,Mt=`${_t.status}: ${Rt}`}catch{Mt=`${_t.status}: ${_t.statusText} ${_t.url}`}return gt.Log.e(tt,`Session termination failed due to '${Et}'`),{action:mt.eAction.terminate,status:mt.eStatus.error,info:Mt}}}return{action:mt.eAction.terminate,status:mt.eStatus.success,info:"Session has terminated"}}return{action:mt.eAction.terminate,status:mt.eStatus.canceled,info:"Termination has been cancelled"}}}},84:(et,ot,st)=>{Object.defineProperty(ot,"__esModule",{value:!0});const lt=st(704),nt={GFN:null,catalogClientId:null,clientId:null,cmsId:null,nonce:null,partnerId:null,muteAudio:!0,onUpdate:null,onStart:null,onCustomEvent:null};ot.default=class{constructor(){this._GFN=null,this._catalogClientId="",this._clientId="",this._cmsId=-9999,this._nonce="",this._partnerId="",this._muteAudio=!0}async connect(gt){if(!gt)throw{action:lt.eAction.start,status:lt.eStatus.error,info:"Invalid GFNConfig props provided. Please refer to usage documentation."};return gt={...nt,...gt},this._GFN=gt.GFN,this._catalogClientId=gt.catalogClientId,this._clientId=gt.clientId,this._cmsId=gt.cmsId,this._muteAudio=gt.muteAudio,this._nonce=gt.nonce,this._partnerId=gt.partnerId,this._initialize().then(async()=>{var dt,mt;await this._login();const vt=await this._GFN.server.getServerInfo();gt.onUpdate({action:lt.eAction.authUser,status:lt.eStatus.success,info:(dt=this._GFN.currentUser)===null||dt===void 0?void 0:dt.displayName}),await this._stream((mt=vt==null?void 0:vt.defaultZone)===null||mt===void 0?void 0:mt.address),console.debug("Started streaming"),this._GFN.streamer.on("started",()=>{gt.onStart({action:lt.eAction.start,status:lt.eStatus.success,info:"streamready"})}),this._GFN.streamer.on("message",tt=>{console.debug(`Received message from GFN app: ${tt}`);const bt=JSON.parse(tt);bt.event_type&&bt.payload?gt.onCustomEvent(bt):Object.keys(bt).forEach(ht=>{gt.onUpdate({action:lt.eAction.update,status:lt.eStatus.success,info:JSON.stringify({key:ht,value:bt[ht]})})})})}).catch(dt=>{throw{action:lt.eAction.start,status:lt.eStatus.error,info:dt}}),{action:lt.eAction.start,status:lt.eStatus.inProgress,info:"Starting stream."}}async start(){throw new Error("GFNStreamer::start is not defined.")}async stop(){throw new Error("GFNStreamer::stop is not defined.")}async terminate(){throw new Error("GFNStreamer::terminate is not defined.")}sendMessage(gt){try{this._GFN.streamer.sendMessage(gt)}catch(dt){console.error("Error sending message: "+dt)}}async _initialize(){console.debug("initialize");const gt=new this._GFN.Settings({clientId:this._clientId,catalogClientId:this._catalogClientId,partnerId:this._partnerId});try{if(await this._GFN.initialize(gt),console.debug("gfn init finished"),!this._GFN.settings.vpcId){const dt=await this._GFN.server.getServerInfo();this._GFN.settings.vpcId=dt.vpcId}}catch(dt){console.error(`GFN Initialization Failed: ${dt.message}`)}}async _login(){this._nonce?await this._loginWithNonce(this._nonce,this._cmsId):await this._gfnLogin()}async _loginWithNonce(gt,dt){console.debug("_loginWithNonce");try{await this._GFN.auth.loginWithNonce(gt,dt.toString())}catch(mt){throw console.error(`GFN Authorization Failed: ${mt.message}`),mt}}async _gfnLogin(){console.debug("gfn login");const gt=this._GFN.auth.createLoginUrl();console.debug(`login ${gt}`);try{await this._GFN.auth.loginWithBrowserPopup(gt),console.debug("GFN Authorization Successful!"),console.debug(`GFN Logged in username: ${this._GFN.currentUser.displayName}`)}catch(dt){throw console.error(`GFN Authorization Failed: ${dt.message}`),dt}}async _stream(gt){const dt=this._cmsId,mt=this._GFN.streamer.detectStreamingResolution(),vt={server:gt,appId:dt,streamParams:{width:mt.width,height:mt.height,fps:60},authTokenCallback:async()=>this._GFN.currentUser.authInfo.idToken.value,windowElementId:"view",enableMutedAutoPlay:this._muteAudio};return this._GFN.streamer.start(vt).then(()=>{console.debug("streamer is starting...")}).catch(tt=>{console.debug(`error while starting stream. ${tt}`)})}}},704:(et,ot,st)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.StreamEventConverter=ot.eStatus=ot.eAction=void 0;const lt=st(271);var nt,gt,dt;(function(vt){vt.unknown="unknown",vt.active="active",vt.configure="configure",vt.connect="connect",vt.get="get",vt.start="start",vt.stop="stop",vt.stream="stream",vt.terminate="terminate",vt.update="update",vt.message="message",vt.authUser="authUser"})(nt=ot.eAction||(ot.eAction={})),function(vt){vt.unknown="unknown",vt.inProgress="inProgress",vt.success="success",vt.canceled="canceled",vt.error="error",vt.warning="warning",vt.waiting="waiting"}(gt=ot.eStatus||(ot.eStatus={})),function(vt){vt.sessionProgressUpdateEvent="SessionProgressUpdateEvent",vt.streamingEvent="StreamingEvent",vt.streamUpdateEvent="StreamUpdateEvent",vt.startSessionResultEvent="StartSessionResultEvent",vt.streamingTerminatedEvent="StreamingTerminatedEvent",vt.activeSessionResultEvent="ActiveSessionResultEvent",vt.getSessionResult="GetSessionResult"}(dt||(dt={}));class mt{static convert(tt,bt){return bt===dt.sessionProgressUpdateEvent?mt.fromSessionProgressUpdateEvent(tt):bt===dt.activeSessionResultEvent?mt.fromActiveSessionResultEvent(tt):bt===dt.streamingEvent?mt.fromStreamingEvent(tt):bt===dt.streamUpdateEvent?mt.fromStreamUpdateEvent(tt):bt===dt.getSessionResult?mt.fromGetSessionResult(tt):bt===dt.streamingTerminatedEvent?mt.fromStreamingTerminatedEvent(tt):bt===dt.startSessionResultEvent?mt.fromStartSessionResultEvent(tt):{action:nt.unknown,status:gt.unknown,info:"An unknown event has occured."}}static fromSessionProgressUpdateEvent(tt){const bt=tt.state===lt.SessionProgressState.STARTING_STREAMER?nt.start:tt.state===lt.SessionProgressState.CONFIGURING?nt.configure:tt.state===lt.SessionProgressState.CONNECTING?nt.connect:nt.unknown;return{action:bt,status:gt.inProgress,info:`${bt}ing`,sessionId:tt.sessionId,subSessionId:tt.subSessionId,queuePosition:tt.queuePosition,eta:tt.eta}}static fromStartSessionResultEvent(tt){var bt;return{action:nt.start,status:tt.error?gt.error:gt.success,info:((bt=tt==null?void 0:tt.error)===null||bt===void 0?void 0:bt.description)||"",sessionId:tt.sessionId,subSessionId:tt.subSessionId}}static fromStreamingEvent(tt){return{action:nt.stream,status:gt.unknown,info:"streaming"}}static fromStreamUpdateEvent(tt){return{action:nt.update,status:gt.unknown,info:"stat-update",stats:{codec:tt.codec,fps:tt.fps,rtd:tt.rtd,avgDecodeTime:tt.avgDecodeTime,frameLoss:tt.frameLoss,packetLoss:tt.packetLoss,totalBandwidth:tt.totalBandwidth,utilizedBandwidth:tt.utilizedBandwidth,streamingResolutionHeight:tt.streamingResolution.height,streamingResolutionWidth:tt.streamingResolution.width}}}static fromStreamingTerminatedEvent(tt){return{action:nt.terminate,status:gt.unknown,info:"terminating",sessionId:tt.sessionId,subSessionId:tt.subSessionId}}static fromActiveSessionResultEvent(tt){return{action:nt.active,status:gt.unknown,info:"active"}}static fromGetSessionResult(tt){return{action:nt.get,status:gt.unknown,info:"streaming",sessionId:tt.sessionId,subSessionId:tt.subSessionId}}}ot.StreamEventConverter=mt},947:(et,ot,st)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.DummyAuth=void 0;const lt=st(271);ot.DummyAuth=class{setDataForLoginType(nt){console.log("initializing dummy auth")}getLoginUrl(){return"error"}getUserName(){return"Local"}getUserId(){return"Local"}getExternalUserId(){return"Local"}getDeviceId(){return"Local"}getIdpId(){return"Local"}checkTokenValidity(){return Promise.resolve()}respondToRedirect(nt){return Promise.resolve()}getTokenCallback(){return()=>Promise.resolve("dummy")}getAuthInfo(){return Promise.resolve({type:lt.AuthType.JWT_GFN,token:"dummy"})}logout(){console.log("logging out of dummy auth")}startOffDeviceLogin(){return Promise.resolve({verification_uri:"",user_code:"",device_code:"",expires_in:0,interval:0})}pollOffDeviceLogin(nt){return Promise.resolve()}}},473:(et,ot,st)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.Log=ot.LogBuffer=void 0;const lt=st(271);class nt{constructor(dt,mt){this.encoder=new TextEncoder,this.logIndex=0,this.full=!1,this.buffer=new Uint8Array(dt+nt.FULL_MESSAGE.length),this.maxLength=dt,this.logfile=mt}clear(){this.encoder=new TextEncoder,this.logIndex=0,this.full=!1}log(dt){if(this.full)return;let mt=this.encoder.encode(dt+`
`);this.logIndex+mt.byteLength>this.maxLength&&(this.full=!0,mt=this.encoder.encode(nt.FULL_MESSAGE)),this.buffer.set(mt,this.logIndex),this.logIndex+=mt.byteLength}download(){const dt=document.createElement("a");dt.style.display="none";const mt=new Blob([new DataView(this.buffer.buffer,0,this.logIndex)],{type:"text/plain"}),vt=URL.createObjectURL(mt);dt.href=vt,this.logfile?dt.download=this.logfile:dt.download=`omniverse-streaming-${new Date().toISOString()}.log`,document.body.appendChild(dt),dt.click(),URL.revokeObjectURL(vt),document.body.removeChild(dt)}setIds(dt,mt){this.sessionId=dt,this.subSessionId=mt}}ot.LogBuffer=nt,nt.FULL_MESSAGE=`Log is full
`,ot.Log=new lt.LogImpl("ows",{enable:!0,enableConsoleLogging:!0})},498:(et,ot,st)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.RagnarokApp=void 0;const lt=st(271),nt=st(473),gt=st(593),dt=st(704),mt="client";ot.RagnarokApp=class{constructor({maxSessionStartRetry:vt,platformDetails:tt,videoElementId:bt,audioElementId:ht,urlLocation:St,authProvider:At,logBuffer:Tt,onSessionStartResult:ft,onProgressUpdate:_t,onStreamStopped:Rt,onActiveSessionResult:Mt,onStreamingEvent:Et,onGetSessionResult:kt,onISSOUpdate:at,onCustomEvent:s,useTelemetry:b=!1,nativeTouchEvents:$=!1,connectivityTimeout:_e=2e3}){this.tracksMap=new Map,this.totalTracks=0,this.hasPlatformBeenSimulated=!1,this.hasAppLaunchBeenSimulated=!1,this.micEnabled=!1,this.sessionStartRetryLeft=0,this._hasFocus=!1,St=St||location,this.sessionStartParams={},this.sessionId="",this.sessionsToDelete=0,this.sessionStartRetryLeft=vt,this.videoElement=document.getElementById(bt),this.audioElement=document.getElementById(ht),this.logBuffer=Tt,this.authProvider=At,this.useTelemetry=b,this.nativeTouchEvents=$,this.connectivityTimeout=_e,this.errorMap=new Map,this.buildErrorMessageMap(),this.platformDetails=tt,nt.Log.i(mt,`Platform details: ${this.platformDetails}`),this.instantiateGridApp(),this.setupHTMLElements(),this.queryParams=new URLSearchParams(St.search),this._onProgressUpdate=_t,this._onSessionStartResult=ft,this._onStreamStopped=Rt,this._onActiveSessionResult=Mt,this._onStreamingEvent=Et,this._onGetSessionResult=kt,this._onISSOUpdate=at,this._onCustomEvent=s}setupHTMLElements(){this.audioElement&&(this.audioElement.muted=!0),this.videoElement.muted=!0,this.videoElement.playsInline=!0,this.videoElement.autoplay=!0,this.videoElement.tabIndex=-1,this.videoElement.addEventListener("contextmenu",function(vt){vt.preventDefault()}),this.videoElement.addEventListener("keydown",this.keyUpDownEventHandler.bind(this)),this.videoElement.addEventListener("keyup",this.keyUpDownEventHandler.bind(this)),document.addEventListener("focusin",this.focusinEventHandler.bind(this)),document.addEventListener("focusout",this.focusoutEventHandler.bind(this)),this.videoElement.parentElement.addEventListener("click",this.videoElementClickedEventHandler.bind(this)),this._hasFocus=this.videoElement.parentElement.tabIndex===-1,console.log(`Viewport has focus: ${this._hasFocus}`)}videoElementClickedEventHandler(vt){this.videoElement.parentElement.focus()}focusoutEventHandler(vt){vt.relatedTarget||this._hasFocus===!0||(console.log("Viewport getting focus"),this._hasFocus=!0,this.tracksMap.size>0&&this.gridApp.toggleUserInput(!0,lt.InputType.All))}focusinEventHandler(vt){document.activeElement===this.videoElement.parentElement?this._hasFocus!==!0&&(console.log("Viewport getting focus"),this._hasFocus=!0,this.tracksMap.size>0&&this.gridApp.toggleUserInput(!0,lt.InputType.All)):this._hasFocus===!0&&(console.log("Viewport loosing focus"),this._hasFocus=!1,this.tracksMap.size>0&&this.gridApp.toggleUserInput(!1,lt.InputType.Keyboard|lt.InputType.Gamepad|lt.InputType.Touch))}keyUpDownEventHandler(vt){vt.keyCode==73&&vt.ctrlKey&&vt.shiftKey||vt.keyCode==67&&vt.shiftKey&&vt.metaKey||vt.keyCode==68&&vt.ctrlKey&&vt.shiftKey||vt.code=="Tab"&&vt.altKey||vt.code=="ZoomToggle"||vt.code=="SelectTask"||vt.code=="BrightnessDown"||vt.code=="BrightnessUp"||vt.code=="AudioVolumeMute"||vt.code=="AudioVolumeDown"||vt.code=="AudioVolumeUp"||vt.keyCode>=48&&vt.keyCode<=57||vt.code=="Backspace"||vt.preventDefault(),vt.keyCode==86&&vt.ctrlKey&&this.pasteClipboardText()}pasteClipboardText(){navigator.clipboard&&window.isSecureContext?navigator.clipboard.readText().then(vt=>{vt&&(nt.Log.i(mt,"Sent clipboard text to the server."),this.gridApp.sendTextInput((0,gt.StringToUtf8)(vt)))}).catch(vt=>{nt.Log.e(mt,"Failed to read clipboard contents: "+vt)}):nt.Log.i(mt,"Cannot read from clipboard because in insecure context.")}copyTextToClipboard(vt){navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(vt).then(()=>{nt.Log.i(mt,"Copied clipboard text from the server: "+vt)}).catch(tt=>{nt.Log.e(mt,"Failed to write clipboard contents: "+tt)}):nt.Log.i(mt,"Cannot write to clipboard because in insecure context.")}getQueryParam(vt){return this.queryParams.get(vt)}onLogEvent(vt){if(this.logBuffer)vt.logLevel!=="DEBUG"&&this.logBuffer.log(`${vt.timeStamp} ${vt.logLevel} ${vt.logModule}/${vt.logtag} ${vt.logstr}`);else switch(vt.logLevel){case"INFO":console.log(`${vt.timeStamp} ${vt.logLevel} ${vt.logModule}/${vt.logtag} ${vt.logstr}`);break;case"WARN":console.warn(`${vt.timeStamp} ${vt.logLevel} ${vt.logModule}/${vt.logtag} ${vt.logstr}`);break;case"DEBUG":console.debug(`${vt.timeStamp} ${vt.logLevel} ${vt.logModule}/${vt.logtag} ${vt.logstr}`);break;case"ERROR":console.error(`${vt.timeStamp} ${vt.logLevel} ${vt.logModule}/${vt.logtag} ${vt.logstr}`)}}updateEventDataElements(){var vt;(vt=this.gridApp)===null||vt===void 0||vt.updateEventDataElements({commonData:{clientId:"78589530426925203",clientVer:"2.0.45.34",clientVariant:"Release",eventSchemaVer:"23.0",eventSysVer:"0.12.2",deviceId:this.authProvider.getDeviceId(),userId:this.authProvider.getUserId(),externalUserId:this.authProvider.getExternalUserId(),idpId:this.authProvider.getIdpId(),integrationId:"undefined",sessionId:"92774af7-fbc1-488f-a090-ba49cfd13da2",deviceOS:this.getMappedDeviceOS(this.platformDetails.os),deviceOSVersion:this.platformDetails.osVer,deviceType:this.getMappedDeviceType(this.platformDetails.deviceType),deviceMake:"APPLE",deviceModel:"undefined",clientType:"Browser",browserType:this.getMappedBrowserName(this.platformDetails.browser),platform:"Web",eventProtocol:"1.4",deviceGdprFuncOptIn:"Full",deviceGdprTechOptIn:"None",deviceGdprBehOptIn:"None",gdprFuncOptIn:"Full",gdprTechOptIn:"Full",gdprBehOptIn:"Full"},experiments:[{id:"6376d3bf-3f62-419d-989c-2955c25f2b4e",group:"ENABLE"},{id:"feb30a68-ee9a-44a0-a717-da2d28c81e97",group:"ENABLE"},{id:"ea128779-32c7-45c1-94c8-c9374d64219d",group:"ENABLE"},{id:"ac00061b-eb8d-4d6c-978a-f3ac96f8e91a",group:"ENABLE"},{id:"21f7e7af-b5ae-4c76-b269-3cc4351671d2",group:"ENABLE"},{id:"b205ded0-6c08-4436-b818-f0bde4633f08",group:"ENABLE"},{id:"d639ef8f-c6c5-4931-8e75-451e9e075c62",group:"ENABLE"},{id:"cdce276d-d611-4ef9-ba6f-a90c3e7040d4",group:"ENABLE"},{id:"4c57b739-c860-4c5e-b3e4-9d89ff91b561",group:"ENABLE"},{id:"86bf4cf1-b717-4f72-8414-0f40d6a32656",group:"ENABLE"}],config:{server:"https://events.gfestage.nvidia.com",version:"v1.0"},telemetryEventIds:{streamingProfileGuid:"testClientStreamingProfileGuid",systemInfoGuid:"testClientSystemInfoGuid"}})}getMappedBrowserName(vt){switch(vt){case lt.BrowserName.CHROME:return"Chrome";case lt.BrowserName.SAFARI:return"Safari";case lt.BrowserName.YANDEX:return"Yandex";case lt.BrowserName.EDGE:return"Edge";case lt.BrowserName.EDGE_LEGACY:return"Edge_legacy";case lt.BrowserName.FIREFOX:return"Firefox";case lt.BrowserName.SAMSUNG:return"Samsung";case lt.BrowserName.CHROMIUM:return"Chromium";case lt.BrowserName.OPERA:return"Opera";case lt.BrowserName.BRAVE:return"Brave";case lt.BrowserName.SILK:return"Silk";case lt.BrowserName.UNKNOWN:case lt.BrowserName.REACT:default:return"undefined"}}getMappedDeviceType(vt){let tt="undefined";return vt===lt.DeviceType.CONSOLE?tt="Console":vt===lt.DeviceType.TABLET?tt="Tablet":vt===lt.DeviceType.PHONE?tt="Phone":vt===lt.DeviceType.TV?tt="TV":vt===lt.DeviceType.LAPTOP?tt="Laptop":vt===lt.DeviceType.DESKTOP&&(tt="Desktop"),tt}getMappedDeviceOS(vt){switch(vt.toLowerCase()){case"windows":return"Windows";case"macosx":case"macos":return"MacOS";case"chromeos":case"chrome os":return"ChromeOS";case"linux":return"Linux";case"ios":return"iOS";case"ipados":return"iPadOS";case"tizen":return"Tizen";case"webos":return"WebOS";case"xbox":return"Xbox";default:return"undefined"}}setMessageElementValue(vt,tt=!1){}instantiateGridApp(){nt.Log.i(mt,"Instantiating grid app."),this.gridApp=new lt.GridApp(this.platformDetails),this.gridApp.addListener(lt.EVENTS.SESSION_START_RESULT,this.onSessionStartResult.bind(this)),this.gridApp.addListener(lt.EVENTS.SESSION_STOP_RESULT,this.onSessionStopResult.bind(this)),this.gridApp.addListener(lt.EVENTS.ACTIVE_SESSIONS_RESULT,this.onActiveSessionResult.bind(this)),this.gridApp.addListener(lt.EVENTS.PROGRESS_UPDATE,this.onProgressUpdate.bind(this)),this.gridApp.addListener(lt.EVENTS.STREAM_STOPPED,this.onStreamStopped.bind(this)),this.gridApp.addListener(lt.EVENTS.STREAMING_EVENT,this.onStreamingEvent.bind(this)),this.gridApp.addListener(lt.EVENTS.GET_SESSION_RESULT,this.onGetSessionResult.bind(this)),this.gridApp.addListener(lt.EVENTS.CUSTOM_MESSAGE,this.onCustomMessage.bind(this)),this.gridApp.addListener(lt.EVENTS.STREAM_STATS_UPDATE,this.onISSOUpdate.bind(this)),this.gridApp.addListener(lt.EVENTS.LOG_EVENT,this.onLogEvent.bind(this))}buildErrorMessageMap(){this.errorMap.set(lt.RErrorCode.AuthProviderError,"Error happened during request to auth provider"),this.errorMap.set(lt.RErrorCode.NoNetwork,"No internet connection."),this.errorMap.set(lt.RErrorCode.NetworkError,"A network error occurred."),this.errorMap.set(lt.RErrorCode.GetActiveSessionServerError,"Error occurred due to GetActiveSessionServerError."),this.errorMap.set(lt.RErrorCode.ExceptionHappened,"Unexpected exception happened."),this.errorMap.set(lt.RErrorCode.AuthTokenNotUpdated,"Error occurred due to AuthTokenNotUpdated."),this.errorMap.set(lt.RErrorCode.SessionFinishedState,"Unexpected session state while polling."),this.errorMap.set(lt.RErrorCode.ResponseParseFailure,"Failed to parse server response."),this.errorMap.set(lt.RErrorCode.StreamerVideoPlayError,"Video play failure."),this.errorMap.set(lt.RErrorCode.GridAppNotInitialized,"Grid app instance was not initialized."),this.errorMap.set(lt.RErrorCode.SessionLimitExceeded,"Session Limit Exceeded."),this.errorMap.set(lt.RErrorCode.StreamErrorGeneric,"Some generic error happened in streamer."),this.errorMap.set(lt.RErrorCode.StreamerSignInFailure,"Error happened during signin request to signaling server."),this.errorMap.set(lt.RErrorCode.StreamerHangingGetFailure,"Error happened in hanging get request of peer connection."),this.errorMap.set(lt.RErrorCode.StreamerIceConnectionFailed,"Could not find valid ice candidate pair."),this.errorMap.set(lt.RErrorCode.StreamerGetRemotePeerTimedOut,"Streaming stopped as there is no remote peer."),this.errorMap.set(lt.RErrorCode.StreamInputChannelError,"Streaming stopped due to input channel error."),this.errorMap.set(lt.RErrorCode.StreamCursorChannelError,"Streaming stopped due to cursor channel error."),this.errorMap.set(lt.RErrorCode.StreamControlChannelError,"Streaming stopped due to control channel error."),this.errorMap.set(lt.RErrorCode.StreamerIceReConnectionFailed,"Reconnect attempt failed after network problem or remote peer not alive."),this.errorMap.set(lt.RErrorCode.StreamerNoVideoPacketsReceivedEver,"Streaming stopped as NoVideoPacketsReceivedEver."),this.errorMap.set(lt.RErrorCode.StreamerNoVideoFramesLossyNetwork,"Streaming stopped as NoVideoFramesLossyNetwork."),this.errorMap.set(lt.RErrorCode.StreamDisconnectedFromServer,"Stream Disconnected from server, unknown reason."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedNoResponse,"Stream Disconnected from server, NoResponce."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedRemoteInputError,"Stream Disconnected from server, RemoteInputError."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedFrameGrabFailed,"Stream Disconnected from server, FrameGrabFailed."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedConfigUnAvailable,"Stream Disconnected from server, ConfigUnAvailable."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedInvalidCommand,"Stream Disconnected from server, InvalidCommand."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedInvalidMouseState,"Stream Disconnected from server, InvalidMouseState."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedNetworkError,"Stream Disconnected from server, NetworkError."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedGameLaunchFailed,"Stream Disconnected from server, GameLaunchFailed."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedVideoFirstFrameSendFailed,"Stream Disconnected from server, VideoFirstFrameSendFailed."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedVideoNextFrameSendFailed,"Stream Disconnected from server, VideoNextFrameSendFailed."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedFrameGrabTimedOut,"Stream Disconnected from server, FrameGrabTimedOut."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedFrameEncodeTimedOut,"Stream Disconnected from server, FrameEncodeTimedOut."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedFrameSendTimedOut,"Stream Disconnected from server, FrameSendTimedOut."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedIntended,"Stream Disconnected from server as user quit the game."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedUserLoggedInDifferentAccount,"Stream Disconnected from server, userLoggedinDifferenAccount."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedWindowedMode,"Stream Disconnected from server, WindowedMode."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedUserIdle,"Stream Disconnected from server, UserIdle."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedUnAuthorizedProcessDetected,"Stream Disconnected from server, UnAuthorizedProcessDetected."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedMaliciousProcessDetected,"Stream Disconnected from server, MaliciousProcessDetected."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedUnKnownProcessDetected,"Stream Disconnected from server, UnKnownProcessDetected."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedMinerProcessDetected,"Stream Disconnected from server, MinerProcessDetected."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedStreamingUnsupported,"Stream Disconnected from server, StreamingUnsupported."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedAnotherClient,"Stream Disconnected from server, AnotherClient."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedUnknownFromPm,"Stream Disconnected from server, UnknownFromPm."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedUserEntitledMinutesExceeded,"Stream Disconnected from server, UserEntitledMinutesExceeded."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedClientReconnectTimeLimitExceeded,"Stream Disconnected from server, ClientReconnectTimeLimitExceeded."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedOperatorCommandedTermination,"Stream Disconnected from server, OperatorCommandedTermination."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedConcurrentSessionLimitExceeded,"Stream Disconnected from server, ConcurrentSessionLimitExceeded."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedMaxSessionTimeLimitExceeded,"Stream Disconnected from server, MaxSessionTimeLimitExceeded."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedBifrostInitiatedSessionPause,"Stream Disconnected from server, BifrostInitiatedSessionPause."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedSystemCommandTermination,"Stream Disconnected from server, SystemCommandTermination."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedMultipleLogin,"Stream Disconnected from server, MultipleLogin."),this.errorMap.set(lt.RErrorCode.ServerInternalError,"Session setup failed on server."),this.errorMap.set(lt.RErrorCode.RequestLimitExceeded,"You've tried to play too many games in a short period of time. Please wait a few minutes and try again."),this.errorMap.set(lt.RErrorCode.EntitlementFailure,"You are not entitled to play this game. Please check you entitlement."),this.errorMap.set(lt.RErrorCode.EntitlementFailure,"One of the micro services on Zone failed. Please check telemetry for more details."),this.errorMap.set(lt.RErrorCode.AppPatching,"Game is currently in patching state, please try again later."),this.errorMap.set(lt.RErrorCode.GameNotFound,"Requested game is not available in the zone. Please try another zone."),this.errorMap.set(lt.RErrorCode.AppMaintenanceStatus,"Requested game is under maintenance."),this.errorMap.set(lt.RErrorCode.RequiredSeatInstanceTypeNotSupported,"Required instance type for the game is not available in current zone. Please try different zone."),this.errorMap.set(lt.RErrorCode.ServerSessionQueueLengthExceeded,"We’ve reached our limit for the number of gamers who can wait for the next available rig. Please try again later"),this.errorMap.set(lt.RErrorCode.SessionTerminatedByAnotherClient,"Session setup request was terminated by another client."),this.errorMap.set(lt.RErrorCode.ServerDisconnectedGameNotOwnedByUser,"Your session ended as you do not own the requested game."),this.errorMap.set(lt.RErrorCode.SystemSleepDuringStreaming,"Your session ended as device went to sleep during streaming"),this.errorMap.set(lt.RErrorCode.SessionInQueueAbandoned,"Session abandoned during polling"),this.errorMap.set(lt.RErrorCode.NoInternetDuringSessionSetup,"Cannot connect to server."),this.errorMap.set(lt.RErrorCode.NoInternetDuringStreaming,"Cannot connect to server.")}getDisplayableErrorMessage(vt){return this.errorMap.has(vt)?this.errorMap.get(vt):`No displayable error message found for error code ${vt}`}handleActiveSessions(vt){for(let tt=0;tt<vt.length;tt++)if(this.sessionStartParams.appId==vt[tt].appId&&(vt[tt].state==lt.SessionState.READY_FOR_CONNECTION||vt[tt].state==lt.SessionState.STREAMING||vt[tt].state==lt.SessionState.PAUSED))return nt.Log.i(mt,"Existing session found with the appid "+vt[tt].appId+" and SessionState "+vt[tt].state),this.setMessageElementValue("Resuming previous session..."),this.sessionStartParams.appLaunchMode==lt.AppLaunchMode.TouchFriendly&&vt[tt].appLaunchMode!=lt.AppLaunchMode.TouchFriendly&&(this.sessionStartParams.appLaunchMode=lt.AppLaunchMode.Default,nt.Log.w(mt,"session "+vt[tt].sessionId+" was not launched in touch friendly mode, ignoring touch input mode.")),void this.gridApp.resumeSession(this.sessionStartParams,vt[tt].sessionId);this.setMessageElementValue("Stopping existing sessions"),this.sessionsToDelete=vt.length;for(let tt=0;tt<vt.length;tt++)this.gridApp.stopSession(vt[tt].sessionId)}resetTrackInfo(){this.totalTracks=0,this.tracksMap.clear()}playTrack(vt,tt){let bt=tt.play();const ht=St=>{for(const At of tt.srcObject.getTracks())this.tracksMap.set(At.id,St)};if(bt){let St=this._hasFocus;bt.then(()=>{nt.Log.i(mt,`${vt} play succeeded.`),tt instanceof HTMLVideoElement&&(St?this.gridApp.toggleUserInput(!0,lt.InputType.All):this.gridApp.toggleUserInput(!0,lt.InputType.Mouse)),ht(!0)}).catch(At=>{nt.Log.e(mt,`${vt} play error: ${At==null?void 0:At.name} , ${At==null?void 0:At.message}`),ht(!1),this.gridApp.stopSession(this.sessionId),this.setMessageElementValue("Play failed",!0)})}else tt instanceof HTMLVideoElement&&(this._hasFocus?this.gridApp.toggleUserInput(!0,lt.InputType.All):this.gridApp.toggleUserInput(!0,lt.InputType.Mouse)),ht(!0)}playMedia(){for(let vt of this.startResult.streams)for(let tt of vt.tracks)tt.kind===lt.TrackType.VIDEO&&this.videoElement.srcObject?this.playTrack(tt.trackId,this.videoElement):tt.kind===lt.TrackType.AUDIO&&this.audioElement.srcObject&&this.playTrack(tt.trackId,this.audioElement)}onSessionStartResult(vt){if(this.lastSessionId=vt.sessionId,this.lastSubSessionId=vt.subSessionId,vt.error)if(vt.error.code==lt.RErrorCode.SessionLimitExceeded)vt.sessionList?(nt.Log.i(mt,"Session limit reached. Number of active sessions: "+vt.sessionList.length),vt.sessionList.length&&this.handleActiveSessions(vt.sessionList)):(this.setMessageElementValue("Checking for existing sessions.."),this.gridApp.getActiveSessions()),this.handleLogs(vt.sessionId,vt.subSessionId);else if(vt.error.code==lt.RErrorCode.SessionLimitPerDeviceReached)this.setMessageElementValue("There is an active session for this device belonging to another user. Please try again after sometime"),this.handleLogs(vt.sessionId,vt.subSessionId);else if(vt.error.code==lt.RErrorCode.SessionSetupCancelled||vt.error.code==lt.RErrorCode.SessionSetupCancelledDuringQueuing)this.setMessageElementValue("Session setup was cancelled, please reconfigure your session.",!0);else{let tt=this.getDisplayableErrorMessage(vt.error.code);if(this.sessionStartRetryLeft>0){let bt=`
                        Connection attempt failed with error message '${tt}'. 
                        Number of retry left: ${this.sessionStartRetryLeft}. 
                        Retry in 5 seconds...`;nt.Log.e(mt,bt),this.setMessageElementValue("Connection in progress..."),this.sessionStartRetryLeft-=1,window.setTimeout(()=>this.startButtonClick(),5e3)}else this.setMessageElementValue(tt+" "+(0,gt.GetHexString)(vt.error.code),!0);this.handleLogs(vt.sessionId,vt.subSessionId)}else{nt.Log.i(mt,"client: successfully set up session: "+vt.sessionId),nt.Log.i(mt,"Should enable mic: "+this.getGridApp().shouldDefaultEnableMic()),this.sessionId=vt.sessionId,this.startResult=vt,nt.Log.i(mt,"streams: "+JSON.stringify(this.startResult.streams));for(let tt of this.startResult.streams)this.totalTracks+=tt.tracks.length;this.playMedia()}this._onSessionStartResult&&this._onSessionStartResult(vt,"StartSessionResultEvent")}handleLogs(vt,tt){this.logBuffer.setIds(vt,tt)}onSessionStopResult(vt){this.lastSessionId=vt.sessionId,this.lastSubSessionId=vt.subSessionId,this.sessionId==vt.sessionId?(this.sessionId="",vt.framesDecoded>0?nt.Log.i(mt,"Session stop result is normal"):this.setMessageElementValue("Zero frame decoded.",!0)):this.sessionsToDelete>0&&(this.sessionsToDelete--,this.sessionsToDelete===0&&this.begin()),this.handleLogs(vt.sessionId,vt.subSessionId)}onProgressUpdate(vt){nt.Log.i(mt,JSON.stringify(vt));let tt="Setting up your session. state: "+vt.state;vt.state==lt.SessionProgressState.STARTING_STREAMER?tt="Starting streamer...":vt.state==lt.SessionProgressState.CONNECTING&&(tt="Connecting to streamer..."),vt.queuePosition&&(tt+=". QueuePosition: "+vt.queuePosition),vt.eta>1e3&&(tt+=". ETA "+Math.round(vt.eta/1e3)+"seconds"),this._onProgressUpdate&&this._onProgressUpdate(vt,"SessionProgressUpdateEvent"),this.setMessageElementValue(tt)}onStreamStopped(vt){if(this.lastSessionId=vt.sessionId,this.lastSubSessionId=vt.subSessionId,this.resetTrackInfo(),vt.error){let tt=this.getQueryParam("resume");if(vt.error.code==lt.RErrorCode.ServerDisconnectedIntended)this.setMessageElementValue("Server disconnected intended.",!0);else if(tt&&vt.isResumable)nt.Log.i(mt,"Resuming after 15 secs"),this.setMessageElementValue("Resuming after 15 secs..."),window.setTimeout(()=>this.gridApp.getActiveSessions(),15e3);else{let bt=this.getDisplayableErrorMessage(vt.error.code);this.setMessageElementValue(bt+" "+(0,gt.GetHexString)(vt.error.code),!0)}}this._onStreamStopped&&this._onStreamStopped(vt,"StreamingTerminatedEvent"),this.handleLogs(vt.sessionId,vt.subSessionId)}onActiveSessionResult(vt){vt.error?(nt.Log.e(mt,"ActiveSession request failed. Error: "+vt.error.code.toString(16).toUpperCase()),this.setMessageElementValue("Get Active session failed",!0)):(nt.Log.i(mt,"ActiveSession request succeeded. Number of active sessions: "+vt.sessionList.length),vt.sessionList.length?this.handleActiveSessions(vt.sessionList):this.begin()),this._onActiveSessionResult&&this._onActiveSessionResult(vt,"ActiveSessionResultEvent")}onStreamingEvent(vt){nt.Log.i(mt,"StreamingEvent event: "+JSON.stringify(vt)),vt.streamingState&&vt.streamingState.state===lt.STREAMING_STATE.RECONNECTING&&(this.setMessageElementValue("Reconnecting...",!0),this._onStreamingEvent&&this._onStreamingEvent(vt,"StreamingEvent"))}onGetSessionResult(vt){vt.error?(nt.Log.e(mt,"Cannot resume: "+vt.error.code),this.setMessageElementValue(vt.error.description+": "+vt.error.code,!0)):(nt.Log.i(mt,"onGetSessionResult state: "+vt.state),vt.state==lt.SessionState.INITIALIZING||vt.state==lt.SessionState.RESUMING?window.setTimeout(()=>this.gridApp.getSession(vt.sessionId),1e3):vt.state==lt.SessionState.READY_FOR_CONNECTION&&this.gridApp.resumeSession(this.sessionStartParams,vt.sessionId)),this._onGetSessionResult&&this._onGetSessionResult(vt,"GetSessionResult")}sendCustomMessage(vt){nt.Log.i(mt,JSON.stringify(vt)),this.gridApp.sendCustomMessage(vt)}onCustomMessage(vt){"clipboard_set"in vt?this.copyTextToClipboard(vt.clipboard_set):this._onCustomEvent?(nt.Log.i(mt,JSON.stringify(vt)),this._onCustomEvent(vt)):nt.Log.i(mt,JSON.stringify({action:dt.eAction.message,status:dt.eStatus.warning,info:"Stream sent a custom message, but client has not provided an onCustomEvent handler method."}))}onISSOUpdate(vt){this._onISSOUpdate&&this._onISSOUpdate(vt,"StreamUpdateEvent")}downloadLogs(){this.logBuffer.download()}downloadAudioRecordings(){var vt;(vt=this.gridApp)===null||vt===void 0||vt.downloadAudio()}getPlatformOverride(vt,tt,bt,ht,St){return"clientplatformname="+vt+"&clienttype="+tt+"&deviceos="+bt+"&devicetype="+ht+"&clientstreamer="+St}getPlatformAndAppLaunchOverrides(vt,tt){let bt,ht=this.queryParams.toString(),St="";switch(vt){case 0:this.hasPlatformBeenSimulated&&this.getPlatformOverride("","","","","");break;case 1:St=this.getPlatformOverride("Windows",lt.ClientType.NATIVE,lt.DeviceOS.WINDOWS,lt.DeviceType.DESKTOP,lt.ClientStreamer.CLASSIC);break;case 2:St=this.getPlatformOverride("MacOSX",lt.ClientType.NATIVE,lt.DeviceOS.MACOS,lt.DeviceType.DESKTOP,lt.ClientStreamer.CLASSIC);break;case 3:St=this.getPlatformOverride("Linux",lt.ClientType.NATIVE,lt.DeviceOS.ANDROID,lt.DeviceType.TABLET,lt.ClientStreamer.CLASSIC);break;case 4:St=this.getPlatformOverride("browser",lt.ClientType.BROWSER,lt.DeviceOS.IOS,lt.DeviceType.PHONE,lt.ClientStreamer.WEBRTC);break;case 5:St=this.getPlatformOverride("browser",lt.ClientType.BROWSER,lt.DeviceOS.IPADOS,lt.DeviceType.TABLET,lt.ClientStreamer.WEBRTC);break;case 6:St=this.getPlatformOverride("browser",lt.ClientType.BROWSER,lt.DeviceOS.CHROMEOS,lt.DeviceType.DESKTOP,lt.ClientStreamer.WEBRTC);break;case 7:St=this.getPlatformOverride("browser",lt.ClientType.BROWSER,lt.DeviceOS.WINDOWS,lt.DeviceType.DESKTOP,lt.ClientStreamer.WEBRTC);break;case 8:St=this.getPlatformOverride("browser",lt.ClientType.BROWSER,lt.DeviceOS.MACOS,lt.DeviceType.DESKTOP,lt.ClientStreamer.WEBRTC);break;case 9:St=this.getPlatformOverride("browser",lt.ClientType.BROWSER,lt.DeviceOS.LINUX,lt.DeviceType.DESKTOP,lt.ClientStreamer.WEBRTC);break;case 10:St=this.getPlatformOverride("browser",lt.ClientType.BROWSER,lt.DeviceOS.WEBOS,lt.DeviceType.TV,lt.ClientStreamer.WEBRTC);break;case 11:St=this.getPlatformOverride("browser",lt.ClientType.BROWSER,lt.DeviceOS.TIZEN,lt.DeviceType.TV,lt.ClientStreamer.WEBRTC);break;case 12:St=this.getPlatformOverride("browser",lt.ClientType.BROWSER,lt.DeviceOS.XBOX,lt.DeviceType.CONSOLE,lt.ClientStreamer.WEBRTC)}switch(St&&(this.hasPlatformBeenSimulated=!0,ht+=St+"&"),tt){case 0:this.hasAppLaunchBeenSimulated&&(bt=lt.AppLaunchMode.Default);break;case 1:bt=lt.AppLaunchMode.Default;break;case 2:bt=lt.AppLaunchMode.TouchFriendly;break;case 3:bt=lt.AppLaunchMode.GamepadFriendly}return bt!==void 0&&(this.hasAppLaunchBeenSimulated=!0,ht+="applaunchmode="+bt+"&"),ht.endsWith("&")||(ht+="&"),ht+"webrtcstreamer=enable"}configureGridApp(vt){return new Promise((tt,bt)=>{this.useTelemetry&&this.updateEventDataElements();const ht={serverAddress:vt,authTokenCallback:this.authProvider.getTokenCallback(),deviceHashId:"",clientShutDownCallback:void 0};let St;switch(this.getQueryParam("cursor")){case"hw":St=lt.CursorType.HARDWARE;break;case"free":St=lt.CursorType.FREE;break;case"sw":St=lt.CursorType.SOFTWARE;default:St=lt.CursorType.FREE}let At={cursorType:St,allowUnconfined:this.getQueryParam("allowunconfined")!==null};nt.Log.i(mt,"initializing gridApp with server: "+ht.serverAddress),this.gridApp.initialize(ht,At)?this.authProvider.getAuthInfo().then(Tt=>{this.gridApp.setAuthInfo(Tt),tt()}).catch(()=>{bt()}):bt()})}getGridApp(){return this.gridApp}begin(){this.gridApp.startSession(this.sessionStartParams)}async startButtonClick(){let vt=this.getPlatformAndAppLaunchOverrides(0,0);const tt={remoteConfigData:{ragnarok:`{"connectivityCheckTimeout": ${this.connectivityTimeout}, "sleepErrorsStreaming": ["0xC0F2230F"]}`},gxtOverrideData:JSON.stringify({params:[{name:"ragnarok",value:{enableCpm:!1}}]}),overrideData:vt};(0,lt.ConfigureRagnarokSettings)(tt);let bt=this.getQueryParam("server");try{let ht=this.getQueryParam("resolution").split(":"),St=(0,gt.ToNumber)(this.getQueryParam("fps"));const At="0";let Tt="en-US";this.configureGridApp(bt).then(()=>{nt.Log.i(mt,"grid app setup completed");const ft=this.nativeTouchEvents&&(0,gt.IsiDevice)(this.platformDetails);this.sessionStartParams={streamParams:[],appLaunchMode:ft?lt.AppLaunchMode.TouchFriendly:lt.AppLaunchMode.Default,keyboardLayout:Tt,shortName:"Omniverse App Streaming",accountLinked:!1};let _t=parseInt(ht[0]),Rt=parseInt(ht[1]),Mt=St;const Et=parseInt(At);if(!_t||!Rt){const $=[{resolution:{width:3840,height:2160},frameRate:60},{resolution:{width:3440,height:1440},frameRate:60},{resolution:{width:2560,height:1600},frameRate:120},{resolution:{width:2560,height:1600},frameRate:60},{resolution:{width:2560,height:1440},frameRate:120},{resolution:{width:2560,height:1440},frameRate:60},{resolution:{width:1920,height:1200},frameRate:60},{resolution:{width:1920,height:1080},frameRate:60},{resolution:{width:1920,height:1080},frameRate:30},{resolution:{width:1920,height:1080},frameRate:120},{resolution:{width:1680,height:1050},frameRate:60},{resolution:{width:1600,height:900},frameRate:60},{resolution:{width:1280,height:1024},frameRate:60},{resolution:{width:1440,height:900},frameRate:60},{resolution:{width:1366,height:768},frameRate:60},{resolution:{width:1280,height:800},frameRate:60},{resolution:{width:1280,height:720},frameRate:60},{resolution:{width:1600,height:1200},frameRate:60},{resolution:{width:1112,height:834},frameRate:60},{resolution:{width:1024,height:768},frameRate:60},{resolution:{width:960,height:540},frameRate:60}],_e=(0,lt.ChooseStreamingSettings)(lt.StreamingProfilePreset.BALANCED,$,this.platformDetails);_t=_e.resolution.width,Rt=_e.resolution.height,nt.Log.i(mt,"Recommended stream settings: "+_t+"x"+Rt+"@"+_e.frameRate),nt.Log.i(mt,"Capable stream settings: "+$)}this.sessionStartParams.streamParams.push({width:_t,height:Rt,fps:Mt,maxBitrateKbps:Et,drc:!1,videoTagId:this.videoElement.id,audioTagId:this.audioElement.id});const kt=this.getQueryParam("signalingserver");let at=[];if(kt){const $=parseInt(this.getQueryParam("signalingport")),_e=this.getQueryParam("signalingpath"),it=(0,gt.IsValidIPv4)(kt)?lt.AppLevelProtocol.HTTP:lt.AppLevelProtocol.HTTPS;at.push({ip:kt,port:$,resourcePath:_e,usage:lt.Usage.SIGNALING,appLevelProtocol:it,protocol:lt.Protocol.TCP})}const s=this.getQueryParam("mediaserver");if(s)if((0,gt.IsIPv4Address)(s)&&!(0,gt.IsValidIPv4)(s))nt.Log.e(mt,"mediaserver query parameter is not a valid IP. value: "+s);else{const $=parseInt(this.getQueryParam("mediaport"));at.push({ip:s,port:$,usage:lt.Usage.VIDEO,appLevelProtocol:lt.AppLevelProtocol.UNKNOWN,protocol:lt.Protocol.UDP})}let b=this.getQueryParam("signalingquery");if(b&&(this.sessionStartParams.signalingUrlQueryParameters=decodeURIComponent(b)),bt)this.sessionStartParams.connectionInfo=void 0,this.sessionStartParams.sessionId=void 0;else{if(!at.length)return void this.setMessageElementValue("Signaling server info is required in passthru use case. Please add signalingserver=<> to the query parameters",!0);this.sessionStartParams.connectionInfo=at;const $=this.getQueryParam("sessionid");$&&(this.sessionStartParams.sessionId=$)}this.getQueryParam("accessToken")&&(this.sessionStartParams.sessionId+="-Authorization.Bearer-"+this.getQueryParam("accessToken")),nt.Log.i(mt,"Beginning"),this.begin()}).catch(ft=>{const _t=`Something unexpected happened: ${ft==null?void 0:ft.name} ${ft==null?void 0:ft.message}`;nt.Log.e(mt,_t),this.setMessageElementValue(_t,!0)})}catch(ht){nt.Log.e(mt,"Exception in start button click: "+ht)}}stopButtonClick(vt=!1,tt=!1){this.resetTrackInfo(),this.sessionId&&(vt?this.gridApp.pauseSession(this.sessionId):this.gridApp.stopSession(this.sessionId)),this.setMessageElementValue("Session is stopped.")}}},593:(et,ot,st)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.KeyUpDownEventHandler=ot.StringToUtf8=ot.ToNumber=ot.IsiDevice=ot.IsiOS=ot.IsTizen=ot.IsWebOS=ot.IsiPadOS=ot.IsXbox=ot.IsValidIPv4=ot.IsIPv4Address=ot.GetRandNumericString=ot.GetHexString=ot.convertToUnsignedInt=void 0;const lt=st(271);function nt(mt){return mt>>>0}function gt(mt){return mt.os===lt.PlatformName.IPADOS}function dt(mt){return mt.os===lt.PlatformName.IOS}ot.convertToUnsignedInt=nt,ot.GetHexString=function(mt){return"0x"+("00000000"+(mt=nt(mt)).toString(16).toUpperCase()).slice(-8)},ot.GetRandNumericString=function(mt){let vt=1;for(let bt=1;bt<mt;bt++)vt*=10;let tt=""+Math.floor(Math.random()*vt);return tt=tt.padEnd(mt,"0"),tt},ot.IsIPv4Address=function(mt){const vt=mt.split(".");if(vt.length!==4)return!1;for(const tt of vt){const bt=parseInt(tt);if(isNaN(bt))return!1}return!0},ot.IsValidIPv4=function(mt){const vt=mt.split(".");if(vt.length!==4)return!1;for(const tt of vt){const bt=parseInt(tt);if(isNaN(bt)||bt<0||bt>255)return!1}return!0},ot.IsXbox=function(mt){return mt.os===lt.PlatformName.XBOX},ot.IsiPadOS=gt,ot.IsWebOS=function(mt){return mt.os===lt.PlatformName.WEBOS},ot.IsTizen=function(mt){return mt.os===lt.PlatformName.TIZEN},ot.IsiOS=dt,ot.IsiDevice=function(mt){return dt(mt)||gt(mt)},ot.ToNumber=function(mt){if(mt){const vt=Number.parseInt(mt);if(!Number.isNaN(vt))return vt}},ot.StringToUtf8=function(mt){let vt=new TextEncoder().encode(mt),tt=new ArrayBuffer(vt.byteLength),bt=new DataView(tt);for(let ht=0;ht<vt.byteLength;ht++)bt.setUint8(ht,vt[ht]);return tt},ot.KeyUpDownEventHandler=function(mt){mt.keyCode==73&&mt.ctrlKey&&mt.shiftKey||mt.keyCode==67&&mt.shiftKey&&mt.metaKey||mt.keyCode==68&&mt.ctrlKey&&mt.shiftKey||mt.code=="Tab"&&mt.altKey||mt.code=="ZoomToggle"||mt.code=="SelectTask"||mt.code=="BrightnessDown"||mt.code=="BrightnessUp"||mt.code=="AudioVolumeMute"||mt.code=="AudioVolumeDown"||mt.code=="AudioVolumeUp"||mt.keyCode>=48&&mt.keyCode<=57||mt.code=="Backspace"||mt.preventDefault()}}},c={};function j(et){var ot=c[et];if(ot!==void 0)return ot.exports;var st=c[et]={exports:{}};return a[et].call(st.exports,st,st.exports,j),st.exports}j.d=(et,ot)=>{for(var st in ot)j.o(ot,st)&&!j.o(et,st)&&Object.defineProperty(et,st,{enumerable:!0,get:ot[st]})},j.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),j.o=(et,ot)=>Object.prototype.hasOwnProperty.call(et,ot),j.r=et=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(et,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(et,"__esModule",{value:!0})};var h={};return(()=>{var et=h;Object.defineProperty(et,"__esModule",{value:!0}),et.eStatus=et.eAction=et.AppStreamer=void 0;const ot=j(52);et.AppStreamer=ot.default;const st=j(704);Object.defineProperty(et,"eAction",{enumerable:!0,get:function(){return st.eAction}}),Object.defineProperty(et,"eStatus",{enumerable:!0,get:function(){return st.eStatus}})})(),h})())})(dist);var distExports=dist.exports;const initialState$1={assetIds:[],selectionChangeOrigin:"client"},selectionSlice=createSlice({name:"selection",initialState:initialState$1,reducers:{setSelection:(o,e)=>{o.assetIds=e.payload},setSelectionChangeOrigin:(o,e)=>{o.selectionChangeOrigin=e.payload},setSelectionWithOrigin:(o,e)=>{o.selectionChangeOrigin=e.payload.origin,o.assetIds=e.payload.assetIds}}}),{setSelection}=selectionSlice.actions,{setSelectionChangeOrigin}=selectionSlice.actions,{setSelectionWithOrigin}=selectionSlice.actions,selectionReducer=selectionSlice.reducer,AppStreamComponent=()=>{const o=useSelector(tt=>tt.service.sessionService),e=useSelector(tt=>tt.appStream.server),a=useSelector(tt=>tt.appStream.remoteStream),c=useSelector(tt=>tt.appStream.kitState),j=useDispatch(),h=reactExports.useRef(!1),et=reactExports.useRef(c);reactExports.useEffect(()=>{et.current=c},[c]);const ot=async()=>{if(!h.current)for(h.current=!0;et.current=="unknown";){console.log("Polling Kit for responsiveness.");const tt={event_type:"loadingStateQuery",payload:{}};if(distExports.AppStreamer.sendMessage(JSON.stringify(tt)),await new Promise(bt=>setTimeout(bt,1e3)),et.current=="responsive"){h.current=!1;break}}},st=async tt=>{console.log("Stream Started:",tt),tt.status==="success"&&ot()},lt=tt=>{console.log("Stream Update:",tt)},nt=tt=>{if(tt.event_type==="loadingStateResponse")et.current==="unknown"&&(console.log("Kit is responsive, stopping polling."),j(setKitState("responsive")),tt.payload.loading_state=="idle"?j(setLoadingState("idle")):j(setLoadingState("loading")),j(setLoadedURL(tt.payload.url)));else if(tt.event_type==="openedStageResult")j(setLoadingState("idle")),j(setLoadedURL(tt.payload.url));else if(tt.event_type==="stageSelectionChanged"){!Array.isArray(tt.payload.prims)||tt.payload.prims.length===0?(console.log("Kit App selection empty."),j(setSelectionWithOrigin({assetIds:[],origin:"kit"}))):(console.log("Kit App selection: "+tt.payload.prims.map(ht=>ht).join(", ")),j(setSelectionWithOrigin({assetIds:tt.payload.prims,origin:"kit"})));const bt=setTimeout(()=>{j(setSelectionChangeOrigin("client"))},0);return()=>clearTimeout(bt)}else console.log("Stream Custom Event:",tt)},gt=tt=>{console.log("Stream Stopped:",tt),j(setServer("")),j(setKitState("unknown"))},dt=tt=>{console.log("Stream Terminated:",tt),j(setServer("")),j(setKitState("unknown"))};reactExports.useEffect(()=>{e&&(console.log(`Server URL changed to: ${e}`),mt())},[e]);const mt=()=>{distExports.AppStreamer.connect({streamSource:"direct",streamConfig:{videoElementId:"remote-video",audioElementId:"remote-audio",authenticate:!1,maxReconnects:5,server:e,nativeTouchEvents:!0,width:1920,height:1080,fps:60,cursor:"free",autolaunch:!0,onUpdate:lt,onStart:st,onCustomEvent:nt,onStop:gt,onTerminate:dt}}).then(tt=>{console.info("AppStreamer Setup Success:",tt)}).catch(tt=>{console.error("AppStreamer Setup Error:",tt)})};reactExports.useEffect(()=>{a&&a.signalingserver&&(console.log(`OVAS Server changed to: ${a}`),vt())},[a]);const vt=()=>{distExports.AppStreamer.connect({streamSource:"direct",streamConfig:{videoElementId:"remote-video",audioElementId:"remote-audio",signalingserver:a.signalingserver,signalingport:a.signalingport,mediaserver:a.mediaserver,mediaport:a.mediaport,accessToken:a.accessToken,sessionid:a.sessionid,authenticate:!1,maxReconnects:30,connectivityTimeout:12e4,nativeTouchEvents:!0,width:1920,height:1080,fps:60,cursor:"free",autolaunch:!0,onUpdate:lt,onStart:st,onCustomEvent:nt,onStop:gt,onTerminate:dt}}).then(tt=>{console.info("AppStreamer Setup Success:",tt)}).catch(tt=>{console.error("AppStreamer Setup Error:",tt)})};return reactExports.useEffect(()=>{o.desiredState==="destroyed"&&(distExports.AppStreamer.terminate(),j(setKitState("unknown")),j(setLoadingState("idle")),j(setLoadedURL("")),j(setURL("")),j(setRemoteStream({signalingserver:"",signalingport:0,mediaserver:"",mediaport:0,accessToken:"",sessionid:""})))},[o]),jsxRuntimeExports.jsx("div",{id:"main-div",style:{outline:"none"},children:jsxRuntimeExports.jsxs("div",{id:"aspect-ratio-div",tabIndex:0,style:{position:"relative",top:0,bottom:0,left:0,right:0,paddingBottom:"56.25%",outline:"none"},children:[jsxRuntimeExports.jsx("video",{id:"remote-video",style:{position:"absolute",top:0,bottom:0,left:0,right:0,outline:"none"},tabIndex:-1,playsInline:!0,muted:!0,autoPlay:!0},"video-canvas"),jsxRuntimeExports.jsx("audio",{id:"remote-audio",muted:!0}),jsxRuntimeExports.jsx("h3",{style:{visibility:"hidden"},id:"message-display",children:"..."})]})},"stream-canvas")},USDStorageComponent=()=>{const o=useDispatch(),e=useSelector(c=>c.usdStorage.url),a=useSelector(c=>c.appStream.kitState);return reactExports.useEffect(()=>{if(!(a==="unknown"||!e)&&e){o(setLoadingState("loading")),console.log("Sending request to open stage: url: ${url}");const c={event_type:"openStageRequest",payload:{url:e}};distExports.AppStreamer.sendMessage(JSON.stringify(c))}},[e]),null},SelectionComponent=()=>{const o=useSelector(c=>c.selection.assetIds),e=useSelector(c=>c.selection.selectionChangeOrigin),a=useSelector(c=>c.appStream.kitState);return reactExports.useEffect(()=>{if(e==="kit"||a!=="responsive")return;const c={event_type:"selectPrimsRequest",payload:{paths:o}};distExports.AppStreamer.sendMessage(JSON.stringify(c))},[o]),null},StatusComponent=()=>{const o=useSelector(c=>c.status.assetId),e=useSelector(c=>c.status.assetStatus),a=useSelector(c=>c.appStream.kitState);return reactExports.useEffect(()=>{if(a!=="responsive")return;const c={event_type:"setStatusRequest",payload:{asset_id:o,asset_status:e}};distExports.AppStreamer.sendMessage(JSON.stringify(c))},[o,e]),null};class AbortError extends Error{constructor(e){super(e),this.name="AbortError"}}function log$7(...o){if(o.length>0){const e=String(o[0]);e.includes(":error")?console.error(...o):e.includes(":warning")?console.warn(...o):e.includes(":info")?console.info(...o):e.includes(":verbose")?console.debug(...o):console.debug(...o)}}var define_process_env_default$2={};const debugEnvVariable=typeof process$1<"u"&&define_process_env_default$2&&define_process_env_default$2.DEBUG||void 0;let enabledString,enabledNamespaces=[],skippedNamespaces=[];const debuggers=[];debugEnvVariable&&enable(debugEnvVariable);const debugObj=Object.assign(o=>createDebugger(o),{enable,enabled,disable,log:log$7});function enable(o){enabledString=o,enabledNamespaces=[],skippedNamespaces=[];const e=/\*/g,a=o.split(",").map(c=>c.trim().replace(e,".*?"));for(const c of a)c.startsWith("-")?skippedNamespaces.push(new RegExp(`^${c.substr(1)}$`)):enabledNamespaces.push(new RegExp(`^${c}$`));for(const c of debuggers)c.enabled=enabled(c.namespace)}function enabled(o){if(o.endsWith("*"))return!0;for(const e of skippedNamespaces)if(e.test(o))return!1;for(const e of enabledNamespaces)if(e.test(o))return!0;return!1}function disable(){const o=enabledString||"";return enable(""),o}function createDebugger(o){const e=Object.assign(a,{enabled:enabled(o),destroy,log:debugObj.log,namespace:o,extend});function a(...c){e.enabled&&(c.length>0&&(c[0]=`${o} ${c[0]}`),e.log(...c))}return debuggers.push(e),e}function destroy(){const o=debuggers.indexOf(this);return o>=0?(debuggers.splice(o,1),!0):!1}function extend(o){const e=createDebugger(`${this.namespace}:${o}`);return e.log=this.log,e}var define_process_env_default$1={};const registeredLoggers=new Set,logLevelFromEnv=typeof process$1<"u"&&define_process_env_default$1&&define_process_env_default$1.AZURE_LOG_LEVEL||void 0;let azureLogLevel;const AzureLogger=debugObj("azure");AzureLogger.log=(...o)=>{debugObj.log(...o)};const AZURE_LOG_LEVELS=["verbose","info","warning","error"];logLevelFromEnv&&(isAzureLogLevel(logLevelFromEnv)?setLogLevel(logLevelFromEnv):console.error(`AZURE_LOG_LEVEL set to unknown log level '${logLevelFromEnv}'; logging is not enabled. Acceptable values: ${AZURE_LOG_LEVELS.join(", ")}.`));function setLogLevel(o){if(o&&!isAzureLogLevel(o))throw new Error(`Unknown log level '${o}'. Acceptable values: ${AZURE_LOG_LEVELS.join(",")}`);azureLogLevel=o;const e=[];for(const a of registeredLoggers)shouldEnable(a)&&e.push(a.namespace);debugObj.enable(e.join(","))}const levelMap={verbose:400,info:300,warning:200,error:100};function createClientLogger(o){const e=AzureLogger.extend(o);return patchLogMethod(AzureLogger,e),{error:createLogger(e,"error"),warning:createLogger(e,"warning"),info:createLogger(e,"info"),verbose:createLogger(e,"verbose")}}function patchLogMethod(o,e){e.log=(...a)=>{o.log(...a)}}function createLogger(o,e){const a=Object.assign(o.extend(e),{level:e});if(patchLogMethod(o,a),shouldEnable(a)){const c=debugObj.disable();debugObj.enable(c+","+a.namespace)}return registeredLoggers.add(a),a}function shouldEnable(o){return!!(azureLogLevel&&levelMap[o.level]<=levelMap[azureLogLevel])}function isAzureLogLevel(o){return AZURE_LOG_LEVELS.includes(o)}function createAbortablePromise(o,e){const{cleanupBeforeAbort:a,abortSignal:c,abortErrorMsg:j}=e??{};return new Promise((h,et)=>{function ot(){et(new AbortError(j??"The operation was aborted."))}function st(){c==null||c.removeEventListener("abort",lt)}function lt(){a==null||a(),st(),ot()}if(c!=null&&c.aborted)return ot();try{o(nt=>{st(),h(nt)},nt=>{st(),et(nt)})}catch(nt){et(nt)}c==null||c.addEventListener("abort",lt)})}const StandardAbortMessage$1="The delay was aborted.";function delay$2(o,e){let a;const{abortSignal:c,abortErrorMsg:j}=e??{};return createAbortablePromise(h=>{a=setTimeout(h,o)},{cleanupBeforeAbort:()=>clearTimeout(a),abortSignal:c,abortErrorMsg:j??StandardAbortMessage$1})}function isObject(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&!(o instanceof RegExp)&&!(o instanceof Date)}function isError(o){if(isObject(o)){const e=typeof o.name=="string",a=typeof o.message=="string";return e&&a}return!1}function isDefined(o){return typeof o<"u"&&o!==null}function isObjectWithProperties(o,e){if(!isDefined(o)||typeof o!="object")return!1;for(const a of e)if(!objectHasProperty(o,a))return!1;return!0}function objectHasProperty(o,e){return isDefined(o)&&typeof o=="object"&&e in o}function generateUUID(){let o="";for(let e=0;e<32;e++){const a=Math.floor(Math.random()*16);e===12?o+="4":e===16?o+=a&3|8:o+=a.toString(16),(e===7||e===11||e===15||e===19)&&(o+="-")}return o}var _a$1;const uuidFunction=typeof((_a$1=globalThis==null?void 0:globalThis.crypto)===null||_a$1===void 0?void 0:_a$1.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):generateUUID;function randomUUID(){return uuidFunction()}var _a,_b,_c,_d;typeof self=="object"&&typeof(self==null?void 0:self.importScripts)=="function"&&(((_a=self.constructor)===null||_a===void 0?void 0:_a.name)==="DedicatedWorkerGlobalScope"||((_b=self.constructor)===null||_b===void 0?void 0:_b.name)==="ServiceWorkerGlobalScope"||((_c=self.constructor)===null||_c===void 0||_c.name));typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u";typeof Bun<"u"&&typeof Bun.version<"u";const isNodeLike=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((_d=globalThis.process.versions)===null||_d===void 0)&&_d.node),logger$1=createClientLogger("event-hubs");function logErrorStackTrace$1(o){isObjectWithProperties(o,["stack"])&&logger$1.verbose(o.stack)}function createReceiverLogPrefix(o,e,a){return`[${e}] Receiver P${a}-${o}`}function createManagementLogPrefix(o){return`[${o}] Management`}function createLogFunction(o,e,a){return(c,...j)=>o[a](...typeof c=="string"?[`${e}: ${c}`]:[e,c],...j)}function createSimpleLogger(o,e){return{info:createLogFunction(o,e,"info"),error:createLogFunction(o,e,"error"),verbose:createLogFunction(o,e,"verbose"),warning:createLogFunction(o,e,"warning")}}function logObj(o){JSON.stringify(o,void 0,2)}class PartitionProcessor{constructor(e,a,c){this._eventHandlers=e,this._checkpointStore=a,this._context=c}get lastEnqueuedEventProperties(){return this._lastEnqueuedEventProperties}set lastEnqueuedEventProperties(e){this._lastEnqueuedEventProperties=e}get fullyQualifiedNamespace(){return this._context.fullyQualifiedNamespace}get consumerGroup(){return this._context.consumerGroup}get eventHubName(){return this._context.eventHubName}get partitionId(){return this._context.partitionId}get eventProcessorId(){return this._context.eventProcessorId}async initialize(){var e,a;return(a=(e=this._eventHandlers).processInitialize)===null||a===void 0?void 0:a.call(e,this)}async close(e){this._eventHandlers.processClose&&await this._eventHandlers.processClose(e,this)}async processEvents(e){await this._eventHandlers.processEvents(e,this)}async processError(e){if(this._eventHandlers.processError)try{await this._eventHandlers.processError(e,this)}catch(a){logger$1.verbose(`Error thrown from user's processError handler : ${a}`)}}async updateCheckpoint(e){const a={fullyQualifiedNamespace:this._context.fullyQualifiedNamespace,eventHubName:this._context.eventHubName,consumerGroup:this._context.consumerGroup,partitionId:this._context.partitionId,sequenceNumber:e.sequenceNumber,offset:e.offset};await this._checkpointStore.updateCheckpoint(a)}}var lib={},util$6=util$8;function ProtocolError(o){Error.captureStackTrace(this,ProtocolError),this.message=o,this.name="ProtocolError"}util$6.inherits(ProtocolError,Error);function TypeError$1(o){Error.captureStackTrace(this,TypeError$1),this.message=o,this.name="TypeError"}util$6.inherits(TypeError$1,ProtocolError);function ConnectionError(o,e,a){Error.captureStackTrace(this,ConnectionError),this.message=o,this.name="ConnectionError",this.condition=e,this.description=o,Object.defineProperty(this,"connection",{value:a})}util$6.inherits(ConnectionError,Error);ConnectionError.prototype.toJSON=function(){return{type:this.name,code:this.condition,message:this.description}};var errors$5={ProtocolError,TypeError:TypeError$1,ConnectionError},errors$4=errors$5,util$5={};util$5.allocate_buffer=function(o){return Buffer.alloc?Buffer.alloc(o):new Buffer(o)};util$5.generate_uuid=function(){return util$5.uuid_to_string(util$5.uuid4())};util$5.uuid4=function(){for(var o=util$5.allocate_buffer(16),e=0;e<o.length;e++)o[e]=Math.random()*255|0;return o[7]&=15,o[7]|=64,o[8]&=63,o[8]|=128,o};util$5.uuid_to_string=function(o){if(o.length===16){var e=[o.slice(0,4),o.slice(4,6),o.slice(6,8),o.slice(8,10),o.slice(10,16)];return e.map(function(a){return a.toString("hex")}).join("-")}else throw new errors$4.TypeError("Not a UUID, expecting 16 byte buffer")};var parse_uuid=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/;util$5.string_to_uuid=function(o){var e=parse_uuid.exec(o.toLowerCase());if(e)return Buffer.from(e.slice(1).join(""),"hex");throw new errors$4.TypeError("Not a valid UUID string: "+o)};util$5.clone=function(o){for(var e=Object.create(o.prototype||{}),a=Object.getOwnPropertyNames(o),c=0;c<a.length;c++){var j=a[c];e[j]=o[j]}return e};util$5.and=function(o,e){return e===void 0?o:function(a){return o(a)&&e(a)}};util$5.is_sender=function(o){return o.is_sender()};util$5.is_receiver=function(o){return o.is_receiver()};util$5.sender_filter=function(o){return util$5.and(util$5.is_sender,o)};util$5.receiver_filter=function(o){return util$5.and(util$5.is_receiver,o)};util$5.is_defined=function(o){return o!=null};var util_1=util$5,types_1,hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types_1;hasRequiredTypes=1;var o=errors$5,e=util_1,a=1,c=2,j=3,h=4;function et(rt,Ct,It,Nt){this.type=rt,this.value=Ct,It&&(this.array_constructor={typecode:It},Nt&&(this.array_constructor.descriptor=Nt))}et.prototype.toString=function(){return this.value?this.value.toString():null},et.prototype.toLocaleString=function(){return this.value?this.value.toLocaleString():null},et.prototype.valueOf=function(){return this.value},et.prototype.toJSON=function(){return this.value&&this.value.toJSON?this.value.toJSON():this.value},et.prototype.toRheaTyped=function(){return this};function ot(rt,Ct,It,Nt){this.name=rt,this.typecode=Ct;var Ut=Ct>>>4;switch(Ut){case 4:this.width=0,this.category=a;break;case 5:this.width=1,this.category=a;break;case 6:this.width=2,this.category=a;break;case 7:this.width=4,this.category=a;break;case 8:this.width=8,this.category=a;break;case 9:this.width=16,this.category=a;break;case 10:this.width=1,this.category=c;break;case 11:this.width=4,this.category=c;break;case 12:this.width=1,this.category=j;break;case 13:this.width=4,this.category=j;break;case 14:this.width=1,this.category=h;break;case 15:this.width=4,this.category=h;break}It&&(It.read&&(this.read=It.read),It.write&&(this.write=It.write),It.encoding&&(this.encoding=It.encoding));var Gt=this;Ut===4?this.create=function(){return new et(Gt,Nt)}:Ut===14||Ut===15?this.create=function(Pt,qt,Kt){return new et(Gt,Pt,qt,Kt)}:this.create=function(Pt){return new et(Gt,Pt)}}ot.prototype.toString=function(){return this.name+"#"+st(this.typecode)};function st(rt){return Number(rt).toString(16)}var lt={by_code:{}};Object.defineProperty(lt,"MAX_UINT",{value:4294967295,writable:!1,configurable:!1}),Object.defineProperty(lt,"MAX_USHORT",{value:65535,writable:!1,configurable:!1});function nt(rt,Ct,It,Nt){var Ut=new ot(rt,Ct,It,Nt);Ut.create.typecode=Ut.typecode,lt.by_code[Ut.typecode]=Ut,lt[rt]=Ut.create}function gt(){return{read:function(rt,Ct){return rt.readUInt8(Ct)},write:function(rt,Ct,It){rt.writeUInt8(Ct,It)}}}function dt(){return{read:function(rt,Ct){return rt.readUInt16BE(Ct)},write:function(rt,Ct,It){rt.writeUInt16BE(Ct,It)}}}function mt(){return{read:function(rt,Ct){return rt.readUInt32BE(Ct)},write:function(rt,Ct,It){rt.writeUInt32BE(Ct,It)}}}function vt(){return{read:function(rt,Ct){return rt.readInt8(Ct)},write:function(rt,Ct,It){rt.writeInt8(Ct,It)}}}function tt(){return{read:function(rt,Ct){return rt.readInt16BE(Ct)},write:function(rt,Ct,It){rt.writeInt16BE(Ct,It)}}}function bt(){return{read:function(rt,Ct){return rt.readInt32BE(Ct)},write:function(rt,Ct,It){rt.writeInt32BE(Ct,It)}}}function ht(){return{read:function(rt,Ct){return rt.readFloatBE(Ct)},write:function(rt,Ct,It){rt.writeFloatBE(Ct,It)}}}function St(){return{read:function(rt,Ct){return rt.readDoubleBE(Ct)},write:function(rt,Ct,It){rt.writeDoubleBE(Ct,It)}}}var At=4294967296,Tt=-2147483647;function ft(rt,Ct,It){if(typeof Ct=="number"||Ct instanceof Number){var Nt=Math.floor(Ct/At),Ut=Ct%At;rt.writeUInt32BE(Nt,It),rt.writeUInt32BE(Ut,It+4)}else Ct.copy(rt,It)}function _t(rt,Ct){var It=rt.readUInt32BE(Ct),Nt=rt.readUInt32BE(Ct+4);return It<2097153?It*At+Nt:rt.slice(Ct,Ct+8)}function Rt(rt,Ct,It){if(typeof Ct=="number"||Ct instanceof Number){var Nt=Math.abs(Ct),Ut=Math.floor(Nt/At),Gt=Nt%At;if(rt.writeInt32BE(Ut,It),rt.writeUInt32BE(Gt,It+4),Ct<0)for(var Pt=1,qt=0;qt<8;qt++){var Kt=It+(7-qt),jt=(rt[Kt]^255)+Pt;rt[Kt]=jt&255,Pt=jt>>8}}else Ct.copy(rt,It)}function Mt(rt,Ct,It){return typeof Ct=="object"&&Ct!==null&&typeof Ct.getTime=="function"&&(Ct=Ct.getTime()),Rt(rt,Ct,It)}function Et(rt,Ct){var It=rt.readInt32BE(Ct),Nt=rt.readUInt32BE(Ct+4);return It<2097153&&It>-2097153?It*At+Nt:rt.slice(Ct,Ct+8)}function kt(rt,Ct){const It=Et(rt,Ct);return new Date(It)}nt("Null",64,void 0,null),nt("Boolean",86,gt()),nt("True",65,void 0,!0),nt("False",66,void 0,!1),nt("Ubyte",80,gt()),nt("Ushort",96,dt()),nt("Uint",112,mt()),nt("SmallUint",82,gt()),nt("Uint0",67,void 0,0),nt("Ulong",128,{write:ft,read:_t}),nt("SmallUlong",83,gt()),nt("Ulong0",68,void 0,0),nt("Byte",81,vt()),nt("Short",97,tt()),nt("Int",113,bt()),nt("SmallInt",84,vt()),nt("Long",129,{write:Rt,read:Et}),nt("SmallLong",85,vt()),nt("Float",114,ht()),nt("Double",130,St()),nt("Decimal32",116),nt("Decimal64",132),nt("Decimal128",148),nt("CharUTF32",115,mt()),nt("Timestamp",131,{write:Mt,read:kt}),nt("Uuid",152),nt("Vbin8",160),nt("Vbin32",176),nt("Str8",161,{encoding:"utf8"}),nt("Str32",177,{encoding:"utf8"}),nt("Sym8",163,{encoding:"ascii"}),nt("Sym32",179,{encoding:"ascii"}),nt("List0",69,void 0,[]),nt("List8",192),nt("List32",208),nt("Map8",193),nt("Map32",209),nt("Array8",224),nt("Array32",240);function at(rt,Ct){for(var It=0;It<Ct.length;It++)if(rt.type.typecode===Ct[It].typecode)return!0;return!1}function s(rt,Ct,It){for(var Nt=0;Nt<Ct&&Nt<rt.length;Nt++)if(rt[Nt]!==(It?255:0))return!1;return!0}lt.is_ulong=function(rt){return at(rt,[lt.Ulong,lt.Ulong0,lt.SmallUlong])},lt.is_string=function(rt){return at(rt,[lt.Str8,lt.Str32])},lt.is_symbol=function(rt){return at(rt,[lt.Sym8,lt.Sym32])},lt.is_list=function(rt){return at(rt,[lt.List0,lt.List8,lt.List32])},lt.is_map=function(rt){return at(rt,[lt.Map8,lt.Map32])},lt.wrap_boolean=function(rt){return rt?lt.True():lt.False()},lt.wrap_ulong=function(rt){return Buffer.isBuffer(rt)?s(rt,8,!1)?lt.Ulong0():s(rt,7,!1)?lt.SmallUlong(rt[7]):lt.Ulong(rt):rt===0?lt.Ulong0():rt>255?lt.Ulong(rt):lt.SmallUlong(rt)},lt.wrap_uint=function(rt){return rt===0?lt.Uint0():rt>255?lt.Uint(rt):lt.SmallUint(rt)},lt.wrap_ushort=function(rt){return lt.Ushort(rt)},lt.wrap_ubyte=function(rt){return lt.Ubyte(rt)},lt.wrap_long=function(rt){if(Buffer.isBuffer(rt)){var Ct=(rt[0]&128)!==0;return s(rt,7,Ct)&&(rt[7]&128)===(Ct?128:0)?lt.SmallLong(Ct?-((rt[7]^255)+1):rt[7]):lt.Long(rt)}else return rt>127||rt<-128?lt.Long(rt):lt.SmallLong(rt)},lt.wrap_int=function(rt){return rt>127||rt<-128?lt.Int(rt):lt.SmallInt(rt)},lt.wrap_short=function(rt){return lt.Short(rt)},lt.wrap_byte=function(rt){return lt.Byte(rt)},lt.wrap_float=function(rt){return lt.Float(rt)},lt.wrap_double=function(rt){return lt.Double(rt)},lt.wrap_timestamp=function(rt){return lt.Timestamp(rt)},lt.wrap_char=function(rt){return lt.CharUTF32(rt)},lt.wrap_uuid=function(rt){return lt.Uuid(rt)},lt.wrap_binary=function(rt){return rt.length>255?lt.Vbin32(rt):lt.Vbin8(rt)},lt.wrap_string=function(rt){return Buffer.byteLength(rt)>255?lt.Str32(rt):lt.Str8(rt)},lt.wrap_symbol=function(rt){return Buffer.byteLength(rt)>255?lt.Sym32(rt):lt.Sym8(rt)},lt.wrap_list=function(rt){if(rt.length===0)return lt.List0();var Ct=rt.map(lt.wrap);return lt.List32(Ct)},lt.wrap_set_as_list=function(rt){if(rt.size===0)return lt.List0();var Ct=Array.from(rt,lt.wrap);return lt.List32(Ct)},lt.wrap_map=function(rt,Ct){var It=[];for(var Nt in rt)It.push(Ct?Ct(Nt):lt.wrap(Nt)),It.push(lt.wrap(rt[Nt]));return lt.Map32(It)},lt.wrap_map_as_map=function(rt){var Ct=[];for(var[It,Nt]of rt)Ct.push(lt.wrap(It)),Ct.push(lt.wrap(Nt));return lt.Map32(Ct)},lt.wrap_symbolic_map=function(rt){return lt.wrap_map(rt,lt.wrap_symbol)},lt.wrap_array=function(rt,Ct,It){if(Ct)return lt.Array32(rt,Ct,It);throw console.trace("An array must specify a type for its elements"),new o.TypeError("An array must specify a type for its elements")},lt.wrap=function(rt){var Ct=typeof rt;return Ct==="object"&&rt!==null&&typeof rt.toRheaTyped=="function"?rt.toRheaTyped():Ct==="string"?lt.wrap_string(rt):Ct==="boolean"?rt?lt.True():lt.False():Ct==="number"||rt instanceof Number?isNaN(rt)?lt.Null():Math.floor(rt)-rt!==0?lt.Double(rt):rt>0?rt<At?lt.wrap_uint(rt):lt.wrap_ulong(rt):rt>Tt?lt.wrap_int(rt):lt.wrap_long(rt):rt instanceof Date?lt.wrap_timestamp(rt.getTime()):rt instanceof Buffer||rt instanceof Uint8Array?lt.wrap_binary(rt):Ct==="undefined"||rt===null?lt.Null():Array.isArray(rt)?lt.wrap_list(rt):rt instanceof Map?lt.wrap_map_as_map(rt):rt instanceof Set?lt.wrap_set_as_list(rt):lt.wrap_map(rt)},lt.wrap_described=function(rt,Ct){var It=lt.wrap(rt);return Ct&&(typeof Ct=="string"?It=lt.described(lt.wrap_symbol(Ct),It):(typeof Ct=="number"||Ct instanceof Number)&&(It=lt.described(lt.wrap_ulong(Ct),It))),It},lt.wrap_message_id=function(rt){var Ct=typeof rt;if(Ct==="string")return lt.wrap_string(rt);if(Ct==="number"||rt instanceof Number)return lt.wrap_ulong(rt);if(Buffer.isBuffer(rt))return lt.wrap_uuid(rt);if(rt instanceof et)return rt;throw new o.TypeError("invalid message id:"+rt)};function b(rt){for(var Ct={},It=0;It+1<rt.length;)Ct[rt[It++]]=rt[It++];return Ct}var $={};lt.unwrap_map_simple=function(rt){return b(rt.value.map(function(Ct){return lt.unwrap(Ct,!0)}))},lt.unwrap=function(rt,Ct){if(rt instanceof et){if(rt.descriptor){var It=$[rt.descriptor.value];if(It)return new It(rt.value);if(Ct)return rt}var Nt=lt.unwrap(rt.value,!0);return lt.is_map(rt)?b(Nt):Nt}else return Array.isArray(rt)?rt.map(function(Ut){return lt.unwrap(Ut,!0)}):rt},lt.described_nc=function(rt,Ct){return rt.length?(Ct.descriptor=rt.shift(),lt.described(rt,Ct)):(Ct.descriptor=rt,Ct)},lt.described=lt.described_nc;function _e(rt){var Ct=lt.by_code[rt];if(!Ct)throw new o.TypeError("Unrecognised typecode: "+st(rt));return Ct}lt.Reader=function(rt){this.buffer=rt,this.position=0},lt.Reader.prototype.read_typecode=function(){return this.read_uint(1)},lt.Reader.prototype.read_uint=function(rt){var Ct=this.position;if(this.position+=rt,rt===1)return this.buffer.readUInt8(Ct);if(rt===2)return this.buffer.readUInt16BE(Ct);if(rt===4)return this.buffer.readUInt32BE(Ct);throw new o.TypeError("Unexpected width for uint "+rt)},lt.Reader.prototype.read_fixed_width=function(rt){var Ct=this.position;return this.position+=rt.width,rt.read?rt.read(this.buffer,Ct):this.buffer.slice(Ct,this.position)},lt.Reader.prototype.read_variable_width=function(rt){var Ct=this.read_uint(rt.width),It=this.read_bytes(Ct);return rt.encoding?It.toString(rt.encoding):It},lt.Reader.prototype.read=function(){var rt=this.read_constructor(),Ct=this.read_value(_e(rt.typecode));return rt.descriptor?lt.described_nc(rt.descriptor,Ct):Ct},lt.Reader.prototype.read_constructor=function(rt){var Ct=this.read_typecode();return Ct===0?(rt===void 0&&(rt=[]),rt.push(this.read()),this.read_constructor(rt)):rt===void 0?{typecode:Ct}:rt.length===1?{typecode:Ct,descriptor:rt[0]}:{typecode:Ct,descriptor:rt[0],descriptors:rt}},lt.Reader.prototype.read_value=function(rt){if(rt.width===0)return rt.create();if(rt.category===a)return rt.create(this.read_fixed_width(rt));if(rt.category===c)return rt.create(this.read_variable_width(rt));if(rt.category===j)return this.read_compound(rt);if(rt.category===h)return this.read_array(rt);throw new o.TypeError("Invalid category for type: "+rt)},lt.Reader.prototype.read_array_items=function(rt,Ct){for(var It=[];It.length<rt;)It.push(this.read_value(Ct));return It},lt.Reader.prototype.read_n=function(rt){for(var Ct=new Array(rt),It=0;It<rt;It++)Ct[It]=this.read();return Ct},lt.Reader.prototype.read_size_count=function(rt){return{size:this.read_uint(rt),count:this.read_uint(rt)}},lt.Reader.prototype.read_compound=function(rt){var Ct=this.read_size_count(rt.width);return rt.create(this.read_n(Ct.count))},lt.Reader.prototype.read_array=function(rt){var Ct=this.read_size_count(rt.width),It=this.read_constructor();return rt.create(this.read_array_items(Ct.count,_e(It.typecode)),It.typecode,It.descriptor)},lt.Reader.prototype.toString=function(){var rt="buffer@"+this.position;this.position&&(rt+=": ");for(var Ct=this.position;Ct<this.buffer.length;Ct++)Ct>0&&(rt+=","),rt+="0x"+Number(this.buffer[Ct]).toString(16);return rt},lt.Reader.prototype.reset=function(){this.position=0},lt.Reader.prototype.skip=function(rt){this.position+=rt},lt.Reader.prototype.read_bytes=function(rt){var Ct=this.position;return this.position+=rt,this.buffer.slice(Ct,this.position)},lt.Reader.prototype.remaining=function(){return this.buffer.length-this.position},lt.Writer=function(rt){this.buffer=rt||e.allocate_buffer(1024),this.position=0},lt.Writer.prototype.toBuffer=function(){return this.buffer.slice(0,this.position)};function it(rt,Ct){return rt>Ct?rt:Ct}lt.Writer.prototype.ensure=function(rt){if(this.buffer.length<rt){var Ct=e.allocate_buffer(it(this.buffer.length*2,rt));this.buffer.copy(Ct),this.buffer=Ct}},lt.Writer.prototype.write_typecode=function(rt){this.write_uint(rt,1)},lt.Writer.prototype.write_uint=function(rt,Ct){var It=this.position;if(this.ensure(this.position+Ct),this.position+=Ct,Ct===1)return this.buffer.writeUInt8(rt,It);if(Ct===2)return this.buffer.writeUInt16BE(rt,It);if(Ct===4)return this.buffer.writeUInt32BE(rt,It);throw new o.TypeError("Unexpected width for uint "+Ct)},lt.Writer.prototype.write_fixed_width=function(rt,Ct){var It=this.position;if(this.ensure(this.position+rt.width),this.position+=rt.width,rt.write)rt.write(this.buffer,Ct,It);else if(Ct.copy)Ct.copy(this.buffer,It);else throw new o.TypeError("Cannot handle write for "+rt)},lt.Writer.prototype.write_variable_width=function(rt,Ct){var It=rt.encoding?Buffer.from(Ct,rt.encoding):Buffer.from(Ct);this.write_uint(It.length,rt.width),this.write_bytes(It)},lt.Writer.prototype.write_bytes=function(rt){var Ct=this.position;this.ensure(this.position+rt.length),this.position+=rt.length,rt.copy(this.buffer,Ct)},lt.Writer.prototype.write_constructor=function(rt,Ct){Ct&&(this.write_typecode(0),this.write(Ct)),this.write_typecode(rt)},lt.Writer.prototype.write=function(rt){if(rt.type===void 0)if(rt.described)this.write(rt.described());else throw new o.TypeError("Cannot write "+JSON.stringify(rt));else this.write_constructor(rt.type.typecode,rt.descriptor),this.write_value(rt.type,rt.value,rt.array_constructor)},lt.Writer.prototype.write_value=function(rt,Ct,It){if(rt.width!==0)if(rt.category===a)this.write_fixed_width(rt,Ct);else if(rt.category===c)this.write_variable_width(rt,Ct);else if(rt.category===j)this.write_compound(rt,Ct);else if(rt.category===h)this.write_array(rt,Ct,It);else throw new o.TypeError("Invalid category "+rt.category+" for type: "+rt)},lt.Writer.prototype.backfill_size=function(rt,Ct){var It=this.position-Ct;this.position=Ct,this.write_uint(It-rt,rt),this.position+=It-rt},lt.Writer.prototype.write_compound=function(rt,Ct){var It=this.position;this.position+=rt.width,this.write_uint(Ct.length,rt.width);for(var Nt=0;Nt<Ct.length;Nt++)Ct[Nt]===void 0||Ct[Nt]===null?this.write(lt.Null()):this.write(Ct[Nt]);this.backfill_size(rt.width,It)},lt.Writer.prototype.write_array=function(rt,Ct,It){var Nt=this.position;this.position+=rt.width,this.write_uint(Ct.length,rt.width),this.write_constructor(It.typecode,It.descriptor);for(var Ut=_e(It.typecode),Gt=0;Gt<Ct.length;Gt++)this.write_value(Ut,Ct[Gt]);this.backfill_size(rt.width,Nt)},lt.Writer.prototype.toString=function(){var rt="buffer@"+this.position;this.position&&(rt+=": ");for(var Ct=0;Ct<this.position;Ct++)Ct>0&&(rt+=","),rt+=("00"+Number(this.buffer[Ct]).toString(16)).slice(-2);return rt},lt.Writer.prototype.skip=function(rt){this.ensure(this.position+rt),this.position+=rt},lt.Writer.prototype.clear=function(){this.buffer.fill(0),this.position=0},lt.Writer.prototype.remaining=function(){return this.buffer.length-this.position};function pt(rt){if(rt==="symbol")return{typecode:lt.Sym8.typecode};throw new o.TypeError("TODO: Array of type "+rt+" not yet supported")}function yt(rt,Ct){if(Ct!=null)if(Array.isArray(Ct)){if(!rt.multiple)throw new o.TypeError("Field "+rt.name+" does not support multiple values, got "+JSON.stringify(Ct));var It=pt(rt.type);return lt.wrap_array(Ct,It.typecode,It.descriptor)}else{if(rt.type==="*")return Ct;var Nt=lt["wrap_"+rt.type];if(Nt)return Nt(Ct);throw new o.TypeError("No wrapper for field "+rt.name+" of type "+rt.type)}else{if(rt.mandatory)throw new o.TypeError("Field "+rt.name+" is mandatory");return lt.Null()}}function ct(rt,Ct){var It;Ct.type==="*"?It=function(){return this.value[rt]}:It=function(){return lt.unwrap(this.value[rt])};var Nt=function(Ut){this.value[rt]=yt(Ct,Ut)};return{get:It,set:Nt,enumerable:!0,configurable:!1}}lt.define_composite=function(rt){var Ct=function(Ut){this.value=Ut||[]};Ct.descriptor={numeric:rt.code,symbolic:"amqp:"+rt.name+":list"},Ct.prototype.dispatch=function(Ut,Gt){Ut["on_"+rt.name](Gt)};for(var It=0;It<rt.fields.length;It++){var Nt=rt.fields[It];Object.defineProperty(Ct.prototype,Nt.name,ct(It,Nt))}return Ct.toString=function(){return rt.name+"#"+Number(rt.code).toString(16)},Ct.prototype.toJSON=function(){var Ut={};for(var Gt in this)Gt!=="value"&&this[Gt]&&(Ut[Gt]=this[Gt]);return Ut},Ct.create=function(Ut){var Gt=new Ct;for(var Pt in Ut)Gt[Pt]=Ut[Pt];return Gt},Ct.prototype.described=function(){return lt.described_nc(lt.wrap_ulong(Ct.descriptor.numeric),lt.wrap_list(this.value))},Ct};function _(rt){var Ct=lt.define_composite(rt);lt["wrap_"+rt.name]=function(It){return Ct.create(It).described()},$[Number(Ct.descriptor.numeric).toString(10)]=Ct,$[Ct.descriptor.symbolic]=Ct}return _({name:"error",code:29,fields:[{name:"condition",type:"symbol",mandatory:!0},{name:"description",type:"string"},{name:"info",type:"map"}]}),types_1=lt,types_1}var types$2=requireTypes(),errors$3=errors$5,frames$5={},by_descriptor$1={};frames$5.read_header=function(o){var e=4,a={},c=o.toString("ascii",0,e);if(c!=="AMQP")throw new errors$3.ProtocolError("Invalid protocol header for AMQP: "+o.toString("hex",0,e));if(a.protocol_id=o.readUInt8(e++),a.major=o.readUInt8(e++),a.minor=o.readUInt8(e++),a.revision=o.readUInt8(e++),a.protocol_id===0&&a.major===0&&a.minor===9&&a.revision===1)throw new errors$3.ProtocolError("Unsupported AMQP version: 0-9-1");if(a.protocol_id===1&&a.major===1&&a.minor===0&&a.revision===10)throw new errors$3.ProtocolError("Unsupported AMQP version: 0-10");if(a.major!==1||a.minor!==0)throw new errors$3.ProtocolError("Unsupported AMQP version: "+JSON.stringify(a));return a};frames$5.write_header=function(o,e){var a=4;return o.write("AMQP",0,a,"ascii"),o.writeUInt8(e.protocol_id,a++),o.writeUInt8(e.major,a++),o.writeUInt8(e.minor,a++),o.writeUInt8(e.revision,a++),8};frames$5.TYPE_AMQP=0;frames$5.TYPE_SASL=1;frames$5.read_frame=function(o){var e=new types$2.Reader(o),a={};if(a.size=e.read_uint(4),e.remaining()<a.size-4)return null;var c=e.read_uint(1);if(c<2)throw new errors$3.ProtocolError("Invalid data offset, must be at least 2 was "+c);if(a.type=e.read_uint(1),a.type===frames$5.TYPE_AMQP)a.channel=e.read_uint(2);else if(a.type===frames$5.TYPE_SASL)e.skip(2),a.channel=0;else throw new errors$3.ProtocolError("Unknown frame type "+a.type);if(c>1&&e.skip(c*4-8),e.remaining()){a.performative=e.read();var j=by_descriptor$1[a.performative.descriptor.value];j&&(a.performative=new j(a.performative.value)),e.remaining()&&(a.payload=e.read_bytes(e.remaining()))}return a};frames$5.write_frame=function(o){var e=new types$2.Writer;if(e.skip(4),e.write_uint(2,1),e.write_uint(o.type,1),o.type===frames$5.TYPE_AMQP)e.write_uint(o.channel,2);else if(o.type===frames$5.TYPE_SASL)e.write_uint(0,2);else throw new errors$3.ProtocolError("Unknown frame type "+o.type);o.performative&&(e.write(o.performative),o.payload&&e.write_bytes(o.payload));var a=e.toBuffer();return a.writeUInt32BE(a.length,0),a};frames$5.amqp_frame=function(o,e,a){return{channel:o||0,type:frames$5.TYPE_AMQP,performative:e,payload:a}};frames$5.sasl_frame=function(o){return{channel:0,type:frames$5.TYPE_SASL,performative:o}};function define_frame(o,e){var a=types$2.define_composite(e);frames$5[e.name]=a.create,by_descriptor$1[Number(a.descriptor.numeric).toString(10)]=a,by_descriptor$1[a.descriptor.symbolic]=a}var open={name:"open",code:16,fields:[{name:"container_id",type:"string",mandatory:!0},{name:"hostname",type:"string"},{name:"max_frame_size",type:"uint",default_value:4294967295},{name:"channel_max",type:"ushort",default_value:65535},{name:"idle_time_out",type:"uint"},{name:"outgoing_locales",type:"symbol",multiple:!0},{name:"incoming_locales",type:"symbol",multiple:!0},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]},begin={name:"begin",code:17,fields:[{name:"remote_channel",type:"ushort"},{name:"next_outgoing_id",type:"uint",mandatory:!0},{name:"incoming_window",type:"uint",mandatory:!0},{name:"outgoing_window",type:"uint",mandatory:!0},{name:"handle_max",type:"uint",default_value:"4294967295"},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]},attach$1={name:"attach",code:18,fields:[{name:"name",type:"string",mandatory:!0},{name:"handle",type:"uint",mandatory:!0},{name:"role",type:"boolean",mandatory:!0},{name:"snd_settle_mode",type:"ubyte",default_value:2},{name:"rcv_settle_mode",type:"ubyte",default_value:0},{name:"source",type:"*"},{name:"target",type:"*"},{name:"unsettled",type:"map"},{name:"incomplete_unsettled",type:"boolean",default_value:!1},{name:"initial_delivery_count",type:"uint"},{name:"max_message_size",type:"ulong"},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]},flow={name:"flow",code:19,fields:[{name:"next_incoming_id",type:"uint"},{name:"incoming_window",type:"uint",mandatory:!0},{name:"next_outgoing_id",type:"uint",mandatory:!0},{name:"outgoing_window",type:"uint",mandatory:!0},{name:"handle",type:"uint"},{name:"delivery_count",type:"uint"},{name:"link_credit",type:"uint"},{name:"available",type:"uint"},{name:"drain",type:"boolean",default_value:!1},{name:"echo",type:"boolean",default_value:!1},{name:"properties",type:"symbolic_map"}]},transfer={name:"transfer",code:20,fields:[{name:"handle",type:"uint",mandatory:!0},{name:"delivery_id",type:"uint"},{name:"delivery_tag",type:"binary"},{name:"message_format",type:"uint"},{name:"settled",type:"boolean"},{name:"more",type:"boolean",default_value:!1},{name:"rcv_settle_mode",type:"ubyte"},{name:"state",type:"delivery_state"},{name:"resume",type:"boolean",default_value:!1},{name:"aborted",type:"boolean",default_value:!1},{name:"batchable",type:"boolean",default_value:!1}]},disposition={name:"disposition",code:21,fields:[{name:"role",type:"boolean",mandatory:!0},{name:"first",type:"uint",mandatory:!0},{name:"last",type:"uint"},{name:"settled",type:"boolean",default_value:!1},{name:"state",type:"*"},{name:"batchable",type:"boolean",default_value:!1}]},detach={name:"detach",code:22,fields:[{name:"handle",type:"uint",mandatory:!0},{name:"closed",type:"boolean",default_value:!1},{name:"error",type:"error"}]},end={name:"end",code:23,fields:[{name:"error",type:"error"}]},close={name:"close",code:24,fields:[{name:"error",type:"error"}]};define_frame(frames$5.TYPE_AMQP,open);define_frame(frames$5.TYPE_AMQP,begin);define_frame(frames$5.TYPE_AMQP,attach$1);define_frame(frames$5.TYPE_AMQP,flow);define_frame(frames$5.TYPE_AMQP,transfer);define_frame(frames$5.TYPE_AMQP,disposition);define_frame(frames$5.TYPE_AMQP,detach);define_frame(frames$5.TYPE_AMQP,end);define_frame(frames$5.TYPE_AMQP,close);var sasl_mechanisms={name:"sasl_mechanisms",code:64,fields:[{name:"sasl_server_mechanisms",type:"symbol",multiple:!0,mandatory:!0}]},sasl_init={name:"sasl_init",code:65,fields:[{name:"mechanism",type:"symbol",mandatory:!0},{name:"initial_response",type:"binary"},{name:"hostname",type:"string"}]},sasl_challenge={name:"sasl_challenge",code:66,fields:[{name:"challenge",type:"binary",mandatory:!0}]},sasl_response={name:"sasl_response",code:67,fields:[{name:"response",type:"binary",mandatory:!0}]},sasl_outcome={name:"sasl_outcome",code:68,fields:[{name:"code",type:"ubyte",mandatory:!0},{name:"additional_data",type:"binary"}]};define_frame(frames$5.TYPE_SASL,sasl_mechanisms);define_frame(frames$5.TYPE_SASL,sasl_init);define_frame(frames$5.TYPE_SASL,sasl_challenge);define_frame(frames$5.TYPE_SASL,sasl_response);define_frame(frames$5.TYPE_SASL,sasl_outcome);var frames_1=frames$5,browser$1={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var o=1e3,e=o*60,a=e*60,c=a*24,j=c*7,h=c*365.25;ms=function(nt,gt){gt=gt||{};var dt=typeof nt;if(dt==="string"&&nt.length>0)return et(nt);if(dt==="number"&&isFinite(nt))return gt.long?st(nt):ot(nt);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(nt))};function et(nt){if(nt=String(nt),!(nt.length>100)){var gt=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(nt);if(gt){var dt=parseFloat(gt[1]),mt=(gt[2]||"ms").toLowerCase();switch(mt){case"years":case"year":case"yrs":case"yr":case"y":return dt*h;case"weeks":case"week":case"w":return dt*j;case"days":case"day":case"d":return dt*c;case"hours":case"hour":case"hrs":case"hr":case"h":return dt*a;case"minutes":case"minute":case"mins":case"min":case"m":return dt*e;case"seconds":case"second":case"secs":case"sec":case"s":return dt*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return dt;default:return}}}}function ot(nt){var gt=Math.abs(nt);return gt>=c?Math.round(nt/c)+"d":gt>=a?Math.round(nt/a)+"h":gt>=e?Math.round(nt/e)+"m":gt>=o?Math.round(nt/o)+"s":nt+"ms"}function st(nt){var gt=Math.abs(nt);return gt>=c?lt(nt,gt,c,"day"):gt>=a?lt(nt,gt,a,"hour"):gt>=e?lt(nt,gt,e,"minute"):gt>=o?lt(nt,gt,o,"second"):nt+" ms"}function lt(nt,gt,dt,mt){var vt=gt>=dt*1.5;return Math.round(nt/dt)+" "+mt+(vt?"s":"")}return ms}function setup(o){a.debug=a,a.default=a,a.coerce=st,a.disable=et,a.enable=j,a.enabled=ot,a.humanize=requireMs(),a.destroy=lt,Object.keys(o).forEach(nt=>{a[nt]=o[nt]}),a.names=[],a.skips=[],a.formatters={};function e(nt){let gt=0;for(let dt=0;dt<nt.length;dt++)gt=(gt<<5)-gt+nt.charCodeAt(dt),gt|=0;return a.colors[Math.abs(gt)%a.colors.length]}a.selectColor=e;function a(nt){let gt,dt=null,mt,vt;function tt(...bt){if(!tt.enabled)return;const ht=tt,St=Number(new Date),At=St-(gt||St);ht.diff=At,ht.prev=gt,ht.curr=St,gt=St,bt[0]=a.coerce(bt[0]),typeof bt[0]!="string"&&bt.unshift("%O");let Tt=0;bt[0]=bt[0].replace(/%([a-zA-Z%])/g,(_t,Rt)=>{if(_t==="%%")return"%";Tt++;const Mt=a.formatters[Rt];if(typeof Mt=="function"){const Et=bt[Tt];_t=Mt.call(ht,Et),bt.splice(Tt,1),Tt--}return _t}),a.formatArgs.call(ht,bt),(ht.log||a.log).apply(ht,bt)}return tt.namespace=nt,tt.useColors=a.useColors(),tt.color=a.selectColor(nt),tt.extend=c,tt.destroy=a.destroy,Object.defineProperty(tt,"enabled",{enumerable:!0,configurable:!1,get:()=>dt!==null?dt:(mt!==a.namespaces&&(mt=a.namespaces,vt=a.enabled(nt)),vt),set:bt=>{dt=bt}}),typeof a.init=="function"&&a.init(tt),tt}function c(nt,gt){const dt=a(this.namespace+(typeof gt>"u"?":":gt)+nt);return dt.log=this.log,dt}function j(nt){a.save(nt),a.namespaces=nt,a.names=[],a.skips=[];const gt=(typeof nt=="string"?nt:"").trim().replace(" ",",").split(",").filter(Boolean);for(const dt of gt)dt[0]==="-"?a.skips.push(dt.slice(1)):a.names.push(dt)}function h(nt,gt){let dt=0,mt=0,vt=-1,tt=0;for(;dt<nt.length;)if(mt<gt.length&&(gt[mt]===nt[dt]||gt[mt]==="*"))gt[mt]==="*"?(vt=mt,tt=dt,mt++):(dt++,mt++);else if(vt!==-1)mt=vt+1,tt++,dt=tt;else return!1;for(;mt<gt.length&&gt[mt]==="*";)mt++;return mt===gt.length}function et(){const nt=[...a.names,...a.skips.map(gt=>"-"+gt)].join(",");return a.enable(""),nt}function ot(nt){for(const gt of a.skips)if(h(nt,gt))return!1;for(const gt of a.names)if(h(nt,gt))return!0;return!1}function st(nt){return nt instanceof Error?nt.stack||nt.message:nt}function lt(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.enable(a.load()),a}var common=setup;(function(o,e){var a={};e.formatArgs=j,e.save=h,e.load=et,e.useColors=c,e.storage=ot(),e.destroy=(()=>{let lt=!1;return()=>{lt||(lt=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function c(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let lt;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(lt=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(lt[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function j(lt){if(lt[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+lt[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;const nt="color: "+this.color;lt.splice(1,0,nt,"color: inherit");let gt=0,dt=0;lt[0].replace(/%[a-zA-Z%]/g,mt=>{mt!=="%%"&&(gt++,mt==="%c"&&(dt=gt))}),lt.splice(dt,0,nt)}e.log=console.debug||console.log||(()=>{});function h(lt){try{lt?e.storage.setItem("debug",lt):e.storage.removeItem("debug")}catch{}}function et(){let lt;try{lt=e.storage.getItem("debug")}catch{}return!lt&&typeof process$1<"u"&&"env"in process$1&&(lt=a.DEBUG),lt}function ot(){try{return localStorage}catch{}}o.exports=common(e);const{formatters:st}=o.exports;st.j=function(lt){try{return JSON.stringify(lt)}catch(nt){return"[UnexpectedJSONParseError]: "+nt.message}}})(browser$1,browser$1.exports);var browserExports=browser$1.exports,debug=browserExports;debug.formatters&&(debug.formatters.h=function(o){return o.toString("hex")});var log$6={config:debug("rhea:config"),frames:debug("rhea:frames"),raw:debug("rhea:raw"),reconnect:debug("rhea:reconnect"),events:debug("rhea:events"),message:debug("rhea:message"),flow:debug("rhea:flow"),io:debug("rhea:io")},errors$2=errors$5,frames$4=frames_1,log$5=log$6,util$4=util_1,Transport$2=function(o,e,a,c){this.identifier=o,this.protocol_id=e,this.frame_type=a,this.handler=c,this.pending=[],this.header_sent=void 0,this.header_received=void 0,this.write_complete=!1,this.read_complete=!1};Transport$2.prototype.has_writes_pending=function(){return this.pending.length>0||!this.header_sent};Transport$2.prototype.encode=function(o){this.pending.push(o)};Transport$2.prototype.write=function(o){if(!this.header_sent){var e=util$4.allocate_buffer(8),a={protocol_id:this.protocol_id,major:1,minor:0,revision:0};log$5.frames("[%s] -> %o",this.identifier,a),frames$4.write_header(e,a),o.write(e),this.header_sent=a}for(var c=0;c<this.pending.length;c++){var j=this.pending[c],e=frames$4.write_frame(j);o.write(e),j.performative?log$5.frames("[%s]:%s -> %s %j",this.identifier,j.channel,j.performative.constructor,j.performative,j.payload||""):log$5.frames("[%s]:%s -> empty",this.identifier,j.channel),log$5.raw("[%s] SENT: %d %h",this.identifier,e.length,e)}this.pending=[]};Transport$2.prototype.peek_size=function(o){if(log$5.frames("[%s] peek_size %o, %d",this.identifier,this.header_received,o.length),this.header_received&&o.length>=4)return o.readUInt32BE()};Transport$2.prototype.read=function(o){var e=0;if(!this.header_received){if(o.length<8)return e;if(this.header_received=frames$4.read_header(o),log$5.frames("[%s] <- %o",this.identifier,this.header_received),this.header_received.protocol_id!==this.protocol_id)throw this.protocol_id===3&&this.header_received.protocol_id===0?new errors$2.ProtocolError("Expecting SASL layer"):this.protocol_id===0&&this.header_received.protocol_id===3?new errors$2.ProtocolError("SASL layer not enabled"):new errors$2.ProtocolError("Invalid AMQP protocol id "+this.header_received.protocol_id+" expecting: "+this.protocol_id);e=8}for(;e<o.length-4&&!this.read_complete;){var a=o.readUInt32BE(e);if(log$5.io("[%s] got frame of size %d",this.identifier,a),o.length<e+a){log$5.io("[%s] incomplete frame; have only %d of %d",this.identifier,o.length-e,a);break}else{var c=o.slice(e,e+a);log$5.raw("[%s] RECV: %d %h",this.identifier,c.length,c);var j=frames$4.read_frame(c);if(j.performative?log$5.frames("[%s]:%s <- %s %j",this.identifier,j.channel,j.performative.constructor,j.performative,j.payload||""):log$5.frames("[%s]:%s <- empty",this.identifier,j.channel),j.type!==this.frame_type)throw new errors$2.ProtocolError("Invalid frame type: "+j.type);e+=a,j.performative&&j.performative.dispatch(this.handler,j)}}return e};var transport=Transport$2,errors$1=errors$5,frames$3=frames_1,Transport$1=transport,util$3=util_1,sasl_codes={OK:0,AUTH:1,SYS:2,SYS_PERM:3,SYS_TEMP:4},SASL_PROTOCOL_ID=3;function extract(o){for(var e=[],a=0,c=0;c<o.length;)o[c]===0?(c>a?e.push(o.toString("utf8",a,c)):e.push(null),a=++c):++c;return c>a?e.push(o.toString("utf8",a,c)):e.push(null),e}var PlainServer=function(o){this.callback=o,this.outcome=void 0,this.username=void 0};PlainServer.prototype.start=function(o,e){var a=extract(o);if(a.length!==3)return Promise.reject("Unexpected response in PLAIN, got "+a.length+" fields, expected 3");var c=this;return Promise.resolve(this.callback(a[1],a[2],e)).then(function(j){j?(c.outcome=!0,c.username=a[1]):c.outcome=!1})};var PlainClient=function(o,e){this.username=o,this.password=e};PlainClient.prototype.start=function(o){var e=util$3.allocate_buffer(1+this.username.length+1+this.password.length);e.writeUInt8(0,0),e.write(this.username,1),e.writeUInt8(0,1+this.username.length),e.write(this.password,1+this.username.length+1),o(void 0,e)};var AnonymousServer=function(){this.outcome=void 0,this.username=void 0};AnonymousServer.prototype.start=function(o){this.outcome=!0,this.username=o?o.toString("utf8"):"anonymous"};var AnonymousClient=function(o){this.username=o||"anonymous"};AnonymousClient.prototype.start=function(o){var e=util$3.allocate_buffer(1+this.username.length);e.writeUInt8(0,0),e.write(this.username,1),o(void 0,e)};var ExternalServer=function(){this.outcome=void 0,this.username=void 0};ExternalServer.prototype.start=function(){this.outcome=!0};var ExternalClient=function(){this.username=void 0};ExternalClient.prototype.start=function(o){o(void 0,"")};ExternalClient.prototype.step=function(o){o(void 0,"")};var XOAuth2Client=function(o,e){this.username=o,this.token=e};XOAuth2Client.prototype.start=function(o){var e=util$3.allocate_buffer(this.username.length+this.token.length+5+12+3),a=0;e.write("user=",a),a+=5,e.write(this.username,a),a+=this.username.length,e.writeUInt8(1,a),a+=1,e.write("auth=Bearer ",a),a+=12,e.write(this.token,a),a+=this.token.length,e.writeUInt8(1,a),a+=1,e.writeUInt8(1,a),a+=1,o(void 0,e)};var SaslServer=function(o,e){this.connection=o,this.transport=new Transport$1(o.amqp_transport.identifier,SASL_PROTOCOL_ID,frames$3.TYPE_SASL,this),this.next=o.amqp_transport,this.mechanisms=e,this.mechanism=void 0,this.outcome=void 0,this.username=void 0;var a=Object.getOwnPropertyNames(e);this.transport.encode(frames$3.sasl_frame(frames$3.sasl_mechanisms({sasl_server_mechanisms:a})))};SaslServer.prototype.do_step=function(o){if(this.mechanism.outcome===void 0)this.transport.encode(frames$3.sasl_frame(frames$3.sasl_challenge({challenge:o}))),this.connection.output();else{this.outcome=this.mechanism.outcome?sasl_codes.OK:sasl_codes.AUTH;var e=frames$3.sasl_frame(frames$3.sasl_outcome({code:this.outcome}));this.transport.encode(e),this.connection.output(),this.outcome===sasl_codes.OK&&(this.username=this.mechanism.username,this.transport.write_complete=!0,this.transport.read_complete=!0)}};SaslServer.prototype.on_sasl_init=function(o){var e=this.mechanisms[o.performative.mechanism];e?(this.mechanism=e(),Promise.resolve(this.mechanism.start(o.performative.initial_response,o.performative.hostname)).then(this.do_step.bind(this)).catch(this.do_fail.bind(this))):(this.outcome=sasl_codes.AUTH,this.transport.encode(frames$3.sasl_frame(frames$3.sasl_outcome({code:this.outcome}))))};SaslServer.prototype.on_sasl_response=function(o){Promise.resolve(this.mechanism.step(o.performative.response)).then(this.do_step.bind(this)).catch(this.do_fail.bind(this))};SaslServer.prototype.do_fail=function(o){var e=frames$3.sasl_frame(frames$3.sasl_outcome({code:sasl_codes.SYS}));this.transport.encode(e),this.connection.output();try{this.connection.sasl_failed("Sasl callback promise failed with "+o,"amqp:internal-error")}catch(a){console.error("Uncaught error: ",a.message)}};SaslServer.prototype.has_writes_pending=function(){return this.transport.has_writes_pending()||this.next.has_writes_pending()};SaslServer.prototype.write=function(o){return this.transport.write_complete&&this.transport.pending.length===0?this.next.write(o):this.transport.write(o)};SaslServer.prototype.peek_size=function(o){return this.transport.read_complete?this.next.peek_size(o):this.transport.peek_size(o)};SaslServer.prototype.read=function(o){return this.transport.read_complete?this.next.read(o):this.transport.read(o)};var SaslClient=function(o,e,a){this.connection=o,this.transport=new Transport$1(o.amqp_transport.identifier,SASL_PROTOCOL_ID,frames$3.TYPE_SASL,this),this.next=o.amqp_transport,this.mechanisms=e,this.mechanism=void 0,this.mechanism_name=void 0,this.hostname=a,this.failed=!1};SaslClient.prototype.on_sasl_mechanisms=function(o){var e=[];Array.isArray(o.performative.sasl_server_mechanisms)?e=o.performative.sasl_server_mechanisms:o.performative.sasl_server_mechanisms&&(e=[o.performative.sasl_server_mechanisms]);for(var a=0;this.mechanism===void 0&&a<e.length;a++){var c=e[a],j=this.mechanisms[c];j&&(this.mechanism=typeof j=="function"?j():j,this.mechanism_name=c)}if(this.mechanism){var h=this;this.mechanism.start(function(et,ot){if(et)h.failed=!0,h.connection.sasl_failed("SASL mechanism init failed: "+et);else{var st={mechanism:h.mechanism_name,initial_response:ot};h.hostname&&(st.hostname=h.hostname),h.transport.encode(frames$3.sasl_frame(frames$3.sasl_init(st))),h.connection.output()}})}else this.failed=!0,this.connection.sasl_failed("No suitable mechanism; server supports "+o.performative.sasl_server_mechanisms)};SaslClient.prototype.on_sasl_challenge=function(o){var e=this;this.mechanism.step(o.performative.challenge,function(a,c){a?(e.failed=!0,e.connection.sasl_failed("SASL mechanism challenge failed: "+a)):(e.transport.encode(frames$3.sasl_frame(frames$3.sasl_response({response:c}))),e.connection.output())})};SaslClient.prototype.on_sasl_outcome=function(o){switch(o.performative.code){case sasl_codes.OK:this.transport.read_complete=!0,this.transport.write_complete=!0;break;case sasl_codes.SYS:case sasl_codes.SYS_PERM:case sasl_codes.SYS_TEMP:this.transport.write_complete=!0,this.connection.sasl_failed("Failed to authenticate: "+o.performative.code,"amqp:internal-error");break;default:this.transport.write_complete=!0,this.connection.sasl_failed("Failed to authenticate: "+o.performative.code)}};SaslClient.prototype.has_writes_pending=function(){return this.transport.has_writes_pending()||this.next.has_writes_pending()};SaslClient.prototype.write=function(o){return this.transport.write_complete?this.next.write(o):this.transport.write(o)};SaslClient.prototype.peek_size=function(o){return this.transport.read_complete?this.next.peek_size(o):this.transport.peek_size(o)};SaslClient.prototype.read=function(o){return this.transport.read_complete?this.next.read(o):this.transport.read(o)};var SelectiveServer=function(o,e){this.header_received=!1,this.transports={0:o.amqp_transport,3:new SaslServer(o,e)},this.selected=void 0};SelectiveServer.prototype.has_writes_pending=function(){return this.header_received&&this.selected.has_writes_pending()};SelectiveServer.prototype.write=function(o){return this.selected?this.selected.write(o):0};SelectiveServer.prototype.peek_size=function(o){if(this.header_received)return this.selected.peek_size(o)};SelectiveServer.prototype.read=function(o){if(!this.header_received){if(o.length<8)return 0;if(this.header_received=frames$3.read_header(o),this.selected=this.transports[this.header_received.protocol_id],this.selected===void 0)throw new errors$1.ProtocolError("Invalid AMQP protocol id "+this.header_received.protocol_id)}return this.selected.read(o)};var default_server_mechanisms={enable_anonymous:function(){this.ANONYMOUS=function(){return new AnonymousServer}},enable_plain:function(o){this.PLAIN=function(){return new PlainServer(o)}}},default_client_mechanisms={enable_anonymous:function(o){this.ANONYMOUS=function(){return new AnonymousClient(o)}},enable_plain:function(o,e){this.PLAIN=function(){return new PlainClient(o,e)}},enable_external:function(){this.EXTERNAL=function(){return new ExternalClient}},enable_xoauth2:function(o,e){if(o&&e)this.XOAUTH2=function(){return new XOAuth2Client(o,e)};else{if(e===void 0)throw Error("token must be specified");if(o===void 0)throw Error("username must be specified")}}},sasl$2={Client:SaslClient,Server:SaslServer,Selective:SelectiveServer,server_mechanisms:function(){return Object.create(default_server_mechanisms)},client_mechanisms:function(){return Object.create(default_client_mechanisms)},server_add_external:function(o){return o.EXTERNAL=function(){return new ExternalServer},o}},EndpointState$3=function(){this.init()};EndpointState$3.prototype.init=function(){this.local_open=!1,this.remote_open=!1,this.open_requests=0,this.close_requests=0,this.initialised=!1,this.marker=void 0};EndpointState$3.prototype.mark=function(o){return this.marker=o||Date.now(),this.marker};EndpointState$3.prototype.open=function(){return this.marker=void 0,this.initialised=!0,this.local_open?!1:(this.local_open=!0,this.open_requests++,!0)};EndpointState$3.prototype.close=function(){return this.marker=void 0,this.local_open?(this.local_open=!1,this.close_requests++,!0):!1};EndpointState$3.prototype.disconnected=function(){var o=this.initialised;this.was_open=this.local_open,this.init(),this.initialised=o};EndpointState$3.prototype.reconnect=function(){this.was_open&&(this.open(),this.was_open=void 0)};EndpointState$3.prototype.remote_opened=function(){return this.remote_open?!1:(this.remote_open=!0,!0)};EndpointState$3.prototype.remote_closed=function(){return this.remote_open?(this.remote_open=!1,!0):!1};EndpointState$3.prototype.is_open=function(){return this.local_open&&this.remote_open};EndpointState$3.prototype.is_closed=function(){return this.initialised&&!(this.local_open||this.was_open)&&!this.remote_open};EndpointState$3.prototype.has_settled=function(){return this.open_requests===0&&this.close_requests===0};EndpointState$3.prototype.need_open=function(){return this.open_requests>0?(this.open_requests--,!0):!1};EndpointState$3.prototype.need_close=function(){return this.close_requests>0?(this.close_requests--,!0):!1};var endpoint=EndpointState$3,message_1,hasRequiredMessage;function requireMessage(){if(hasRequiredMessage)return message_1;hasRequiredMessage=1;var o=log$6,e=requireTypes(),a={},c={},j=[],h={};function et(bt,ht,St){ht.descriptor=bt,c[bt.symbolic]=ht,c[Number(bt.numeric).toString(10)]=ht,St&&j.push(St)}function ot(bt){var ht=e.define_composite(bt);h[bt.name]=ht.create,a[Number(ht.descriptor.numeric).toString(10)]=ht,a[ht.descriptor.symbolic]=ht;var St=function(Tt,ft){for(var _t=new ht(ft.value),Rt=0;Rt<bt.fields.length;Rt++){var Mt=bt.fields[Rt],Et=_t[Mt.name];Et!=null&&(Tt[Mt.name]=Et)}},At=function(Tt,ft){Tt.push(ht.create(ft).described())};et(ht.descriptor,St,At)}function st(bt,ht){var St=ht?e.wrap_symbolic_map:e.wrap_map,At={numeric:bt.code};At.symbolic="amqp:"+bt.name.replace(/_/g,"-")+":map";var Tt=function(_t,Rt){_t[bt.name]=e.unwrap_map_simple(Rt)},ft=function(_t,Rt){Rt[bt.name]&&_t.push(e.described_nc(e.wrap_ulong(At.numeric),St(Rt[bt.name])))};et(At,Tt,ft)}function lt(bt,ht,St){this.typecode=bt,this.content=ht,this.multiple=St}lt.prototype.described=function(bt){return e.described(e.wrap_ulong(this.typecode),e.wrap(bt||this.content))},lt.prototype.collect_sections=function(bt){if(this.multiple)for(var ht=0;ht<this.content.length;ht++)bt.push(this.described(this.content[ht]));else bt.push(this.described())},ot({name:"header",code:112,fields:[{name:"durable",type:"boolean",default_value:!1},{name:"priority",type:"ubyte",default_value:4},{name:"ttl",type:"uint"},{name:"first_acquirer",type:"boolean",default_value:!1},{name:"delivery_count",type:"uint",default_value:0}]}),st({name:"delivery_annotations",code:113},!0),st({name:"message_annotations",code:114},!0),ot({name:"properties",code:115,fields:[{name:"message_id",type:"message_id"},{name:"user_id",type:"binary"},{name:"to",type:"string"},{name:"subject",type:"string"},{name:"reply_to",type:"string"},{name:"correlation_id",type:"message_id"},{name:"content_type",type:"symbol"},{name:"content_encoding",type:"symbol"},{name:"absolute_expiry_time",type:"timestamp"},{name:"creation_time",type:"timestamp"},{name:"group_id",type:"string"},{name:"group_sequence",type:"uint"},{name:"reply_to_group_id",type:"string"}]}),st({name:"application_properties",code:116});function nt(bt,ht,St){bt.body===void 0?bt.body=new lt(St,e.unwrap(ht)):bt.body.constructor===lt&&bt.body.typecode===St&&(bt.body.multiple?bt.body.content.push(e.unwrap(ht)):(bt.body.multiple=!0,bt.body.content=[bt.body.content,e.unwrap(ht)]))}et({numeric:117,symbolic:"amqp:data:binary"},function(bt,ht){nt(bt,ht,117)}),et({numeric:118,symbolic:"amqp:amqp-sequence:list"},function(bt,ht){nt(bt,ht,118)}),et({numeric:119,symbolic:"amqp:value:*"},function(bt,ht){bt.body=e.unwrap(ht)}),st({name:"footer",code:120});function gt(bt,ht){ht.body&&ht.body.collect_sections?ht.body.collect_sections(bt):bt.push(e.described(e.wrap_ulong(119),e.wrap(ht.body)))}j.push(gt),h.data_section=function(bt){return new lt(117,bt)},h.sequence_section=function(bt){return new lt(118,bt)},h.data_sections=function(bt){return new lt(117,bt,!0)},h.sequence_sections=function(bt){return new lt(118,bt,!0)};function dt(bt,ht){for(var St in bt){var At=bt[St];typeof At=="object"?dt(At,ht[St]):ht[St]=At}}function mt(bt){bt&&dt(bt,this)}mt.prototype.toJSON=function(){var bt={};for(var ht in this)typeof this[ht]!="function"&&(bt[ht]=this[ht]);return bt},mt.prototype.toString=function(){return JSON.stringify(this.toJSON())},h.encode=function(bt){var ht=[];j.forEach(function(ft){ft(ht,bt)});for(var St=new e.Writer,At=0;At<ht.length;At++)o.message("Encoding section %d of %d: %o",At+1,ht.length,ht[At]),St.write(ht[At]);var Tt=St.toBuffer();return o.message("encoded %d bytes",Tt.length),Tt},h.decode=function(bt){for(var ht=new mt,St=new e.Reader(bt);St.remaining();){var At=St.read();if(o.message("decoding section: %o of type: %o",At,At.descriptor),At.descriptor){var Tt=c[At.descriptor.value];Tt?Tt(ht,At):console.warn("WARNING: did not recognise message section with descriptor "+At.descriptor)}else console.warn("WARNING: expected described message section got "+JSON.stringify(At))}return ht};var vt={};function tt(bt){var ht=e.define_composite(bt);ht.composite_type=bt.name,h[bt.name]=ht.create,vt[Number(ht.descriptor.numeric).toString(10)]=ht,vt[ht.descriptor.symbolic]=ht,h["is_"+bt.name]=function(St){if(St&&St.descriptor){var At=vt[St.descriptor.value];if(At)return At.descriptor.numeric===bt.code}return!1}}return h.unwrap_outcome=function(bt){if(bt&&bt.descriptor){var ht=vt[bt.descriptor.value];if(ht)return new ht(bt.value)}return console.error("unrecognised outcome: "+JSON.stringify(bt)),bt},h.are_outcomes_equivalent=function(bt,ht){return bt===void 0&&ht===void 0?!0:bt===void 0||ht===void 0?!1:bt.descriptor.value===ht.descriptor.value&&bt.descriptor.value===36},tt({name:"received",code:35,fields:[{name:"section_number",type:"uint",mandatory:!0},{name:"section_offset",type:"ulong",mandatory:!0}]}),tt({name:"accepted",code:36,fields:[]}),tt({name:"rejected",code:37,fields:[{name:"error",type:"error"}]}),tt({name:"released",code:38,fields:[]}),tt({name:"modified",code:39,fields:[{name:"delivery_failed",type:"boolean"},{name:"undeliverable_here",type:"boolean"},{name:"message_annotations",type:"map"}]}),message_1=h,message_1}var types$1=requireTypes(),terminus$1={},by_descriptor={};function define_terminus(o){var e=types$1.define_composite(o);terminus$1[o.name]=e.create,by_descriptor[Number(e.descriptor.numeric).toString(10)]=e,by_descriptor[e.descriptor.symbolic]=e}terminus$1.unwrap=function(o){if(o&&o.descriptor){var e=by_descriptor[o.descriptor.value];if(e)return new e(o.value);console.warn("Unknown terminus: "+o.descriptor)}return null};define_terminus({name:"source",code:40,fields:[{name:"address",type:"string"},{name:"durable",type:"uint",default_value:0},{name:"expiry_policy",type:"symbol",default_value:"session-end"},{name:"timeout",type:"uint",default_value:0},{name:"dynamic",type:"boolean",default_value:!1},{name:"dynamic_node_properties",type:"symbolic_map"},{name:"distribution_mode",type:"symbol"},{name:"filter",type:"symbolic_map"},{name:"default_outcome",type:"*"},{name:"outcomes",type:"symbol",multiple:!0},{name:"capabilities",type:"symbol",multiple:!0}]});define_terminus({name:"target",code:41,fields:[{name:"address",type:"string"},{name:"durable",type:"uint",default_value:0},{name:"expiry_policy",type:"symbol",default_value:"session-end"},{name:"timeout",type:"uint",default_value:0},{name:"dynamic",type:"boolean",default_value:!1},{name:"dynamic_node_properties",type:"symbolic_map"},{name:"capabilities",type:"symbol",multiple:!0}]});var terminus_1=terminus$1,frames$2=frames_1,log$4=log$6,message$1=requireMessage(),terminus=terminus_1,EndpointState$2=endpoint,FlowController=function(o){this.window=o};FlowController.prototype.update=function(o){var e=this.window-o.receiver.credit;e>=this.window/4&&o.receiver.flow(e)};function auto_settle(o){o.delivery.settled=!0}function auto_accept(o){o.delivery.update(void 0,message$1.accepted().described())}function LinkError(o,e,a){Error.call(this),Error.captureStackTrace(this,this.constructor),this.message=o,this.condition=e,this.description=o,Object.defineProperty(this,"link",{value:a})}util$8.inherits(LinkError,Error);var EventEmitter$3=eventsExports.EventEmitter,link$2=Object.create(EventEmitter$3.prototype);link$2.dispatch=function(o){return log$4.events("[%s] Link got event: %s",this.connection.options.id,o),EventEmitter$3.prototype.emit.apply(this.observers,arguments),this.listeners(o).length?(EventEmitter$3.prototype.emit.apply(this,arguments),!0):this.session.dispatch.apply(this.session,arguments)};link$2.set_source=function(o){this.local.attach.source=terminus.source(o).described()};link$2.set_target=function(o){this.local.attach.target=terminus.target(o).described()};link$2.attach=function(){this.state.open()&&this.connection._register()};link$2.open=link$2.attach;link$2.detach=function(){this.local.detach.closed=!1,this.state.close()&&this.connection._register()};link$2.close=function(o){o&&(this.local.detach.error=o),this.local.detach.closed=!0,this.state.close()&&this.connection._register()};link$2.remove=function(){this.session.remove_link(this)};link$2.is_open=function(){return this.session.is_open()&&this.state.is_open()};link$2.is_remote_open=function(){return this.session.is_remote_open()&&this.state.remote_open};link$2.is_itself_closed=function(){return this.state.is_closed()};link$2.is_closed=function(){return this.session.is_closed()||this.is_itself_closed()};link$2._process=function(){do this.state.need_open()&&this.session.output(this.local.attach),this.issue_flow&&this.state.local_open&&(this.session._write_flow(this),this.issue_flow=!1),this.state.need_close()&&this.session.output(this.local.detach);while(!this.state.has_settled())};link$2.on_attach=function(o){if(this.state.remote_opened())this.remote.handle||(this.remote.handle=o.handle),o.performative.source=terminus.unwrap(o.performative.source),o.performative.target=terminus.unwrap(o.performative.target),this.remote.attach=o.performative,this.open(),this.dispatch(this.is_receiver()?"receiver_open":"sender_open",this._context());else throw Error("Attach already received")};link$2.prefix_event=function(o){return(this.local.attach.role?"receiver_":"sender_")+o};link$2.on_detach=function(o){if(this.state.remote_closed()){this._incomplete&&(this._incomplete.settled=!0),this.remote.detach=o.performative;var e=this.remote.detach.error;if(e){var a=this.dispatch(this.prefix_event("error"),this._context());a=this.dispatch(this.prefix_event("close"),this._context())||a,a||EventEmitter$3.prototype.emit.call(this.connection.container,"error",new LinkError(e.description,e.condition,this))}else this.dispatch(this.prefix_event("close"),this._context());var c=this,j=this.state.mark();process$1.nextTick(function(){c.state.marker===j&&(c.close(),process$1.nextTick(function(){c.remove()}))})}else throw Error("Detach already received")};function is_internal(o){switch(o){case"name":case"handle":case"role":case"initial_delivery_count":return!0;default:return!1}}var aliases$1=["snd_settle_mode","rcv_settle_mode","source","target","max_message_size","offered_capabilities","desired_capabilities","properties"];function remote_property_shortcut$1(o){return function(){return this.remote.attach?this.remote.attach[o]:void 0}}link$2.init=function(o,e,a,c,j){this.session=o,this.connection=o.connection,this.name=e,this.options=c===void 0?{}:c,this.state=new EndpointState$2,this.issue_flow=!1,this.local={handle:a},this.local.attach=frames$2.attach({handle:a,name:e,role:j});for(var h in this.local.attach)!is_internal(h)&&this.options[h]!==void 0&&(this.local.attach[h]=this.options[h]);this.local.detach=frames$2.detach({handle:a,closed:!0}),this.remote={handle:void 0},this.delivery_count=0,this.credit=0,this.observers=new EventEmitter$3;var et=this;aliases$1.forEach(function(ot){Object.defineProperty(et,ot,{get:remote_property_shortcut$1(ot)})}),Object.defineProperty(this,"error",{get:function(){return this.remote.detach?this.remote.detach.error:void 0}})};link$2._disconnect=function(){this.state.disconnected(),this.state.was_open||this.remove()};link$2._reconnect=function(){this.state.reconnect(),this.remote={handle:void 0},this.delivery_count=0,this.credit=0};link$2.has_credit=function(){return this.credit>0};link$2.is_receiver=function(){return this.local.attach.role};link$2.is_sender=function(){return!this.is_receiver()};link$2._context=function(o){var e=o||{};return this.is_receiver()?e.receiver=this:e.sender=this,this.session._context(e)};link$2.get_option=function(o,e){return this.options[o]!==void 0?this.options[o]:this.session.get_option(o,e)};var Sender=function(o,e,a,c){this.init(o,e,a,c,!1),this._draining=!1,this._drained=!1,this.local.attach.initial_delivery_count=0,this.tag=0,this.get_option("autosettle",!0)&&this.observers.on("settled",auto_settle);var j=this;this.get_option("treat_modified_as_released",!0)&&this.observers.on("modified",function(h){j.dispatch("released",h)})};Sender.prototype=Object.create(link$2);Sender.prototype.constructor=Sender;Sender.prototype._get_drain=function(){if(this._draining&&this._drained&&this.credit){for(;this.credit;)++this.delivery_count,--this.credit;return!0}else return!1};Sender.prototype.set_drained=function(o){this._drained=o,this._draining&&this._drained&&(this.issue_flow=!0)};Sender.prototype.next_tag=function(){return Buffer.from(new String(this.tag++))};Sender.prototype.sendable=function(){return!!(this.credit&&this.session.outgoing.available())};Sender.prototype.on_flow=function(o){var e=o.performative;this.credit=e.delivery_count+e.link_credit-this.delivery_count,this._draining=e.drain,this._drained=this.credit>0,this.is_open()&&(this.dispatch("sender_flow",this._context()),this._draining&&this.dispatch("sender_draining",this._context()),this.sendable()&&this.dispatch("sendable",this._context()))};Sender.prototype.on_transfer=function(){throw Error("got transfer on sending link")};Sender.prototype.send=function(o,e,a){var c=a===void 0?message$1.encode(o):o,j=this.session.send(this,e||this.next_tag(),c,a);return this.local.attach.snd_settle_mode===1&&(j.settled=!0),j};var Receiver=function(o,e,a,c){this.init(o,e,a,c,!0),this.drain=!1,this.set_credit_window(this.get_option("credit_window",1e3)),this.get_option("autoaccept",!0)&&this.observers.on("message",auto_accept),this.local.attach.rcv_settle_mode===1&&this.get_option("autosettle",!0)&&this.observers.on("settled",auto_settle)};Receiver.prototype=Object.create(link$2);Receiver.prototype.constructor=Receiver;Receiver.prototype.on_flow=function(o){this.dispatch("receiver_flow",this._context()),o.performative.drain&&(this.credit=o.performative.link_credit,this.delivery_count=o.performative.delivery_count,o.performative.link_credit>0?console.error("ERROR: received flow with drain set, but non zero credit"):this.dispatch("receiver_drained",this._context()))};Receiver.prototype.flow=function(o){o>0&&(this.credit+=o,this.issue_flow=!0,this.connection._register())};Receiver.prototype.drain_credit=function(){this.drain=!0,this.issue_flow=!0,this.connection._register()};Receiver.prototype.add_credit=Receiver.prototype.flow;Receiver.prototype._get_drain=function(){return this.drain};Receiver.prototype.set_credit_window=function(o){if(o>0){var e=new FlowController(o),a=e.update.bind(e);this.observers.on("message",a),this.observers.on("receiver_open",a)}};var link_1={Sender,Receiver},frames$1=frames_1,link$1=link_1,log$3=log$6,message=requireMessage(),types=requireTypes(),util$2=util_1,EndpointState$1=endpoint,EventEmitter$2=eventsExports.EventEmitter,DEFAULT_BUFFER_SIZE=2048;function SessionError(o,e,a){Error.call(this),Error.captureStackTrace(this,this.constructor),this.message=o,this.condition=e,this.description=o,Object.defineProperty(this,"session",{value:a})}util$8.inherits(SessionError,Error);var CircularBuffer=function(o){this.capacity=o,this.size=0,this.head=0,this.tail=0,this.entries=[]};CircularBuffer.prototype.available=function(){return this.capacity-this.size};CircularBuffer.prototype.push=function(o){if(this.size<this.capacity)this.entries[this.tail]=o,this.tail=(this.tail+1)%this.capacity,this.size++;else throw Error("circular buffer overflow: head="+this.head+" tail="+this.tail+" size="+this.size+" capacity="+this.capacity)};CircularBuffer.prototype.pop_if=function(o){for(var e=0;this.size&&o(this.entries[this.head]);)this.entries[this.head]=void 0,this.head=(this.head+1)%this.capacity,this.size--,e++;return e};CircularBuffer.prototype.by_id=function(o){if(this.size>0){var e=o-this.entries[this.head].id;if(e<this.size)return this.entries[(this.head+e)%this.capacity]}};CircularBuffer.prototype.get_head=function(){return this.size>0?this.entries[this.head]:void 0};CircularBuffer.prototype.get_tail=function(){return this.size>0?this.entries[(this.head+this.size-1)%this.capacity]:void 0};function write_dispositions(o){var e,a,c,j,h;for(j=0;j<o.length;j++)h=o[j],e===void 0&&(e=h,a=h,c=h.id),e!==a&&!message.are_outcomes_equivalent(a.state,h.state)||a.settled!==h.settled||c!==h.id?(e.link.session.output(frames$1.disposition({role:e.link.is_receiver(),first:e.id,last:a.id,state:e.state,settled:e.settled})),e=h,a=h,c=h.id):(a.id!==h.id&&(a=h),c++);e!==void 0&&a!==void 0&&e.link.session.output(frames$1.disposition({role:e.link.is_receiver(),first:e.id,last:a.id,state:e.state,settled:e.settled}))}function validate_buffer_size(o){return o&&Number.isInteger(Number(o))?Number(o):DEFAULT_BUFFER_SIZE}function get_buffer_size(o,e){return o?validate_buffer_size(typeof o=="number"?o:o[e]):DEFAULT_BUFFER_SIZE}var Outgoing=function(o,e){this.deliveries=new CircularBuffer(get_buffer_size(e,"outgoing")),this.updated=[],this.pending_dispositions=[],this.next_delivery_id=0,this.next_pending_delivery=0,this.next_transfer_id=0,this.window=types.MAX_UINT,this.remote_next_transfer_id=void 0,this.remote_window=void 0,this.connection=o};Outgoing.prototype.available=function(){return this.deliveries.available()};Outgoing.prototype.compute_max_payload=function(o){if(this.connection.max_frame_size)return this.connection.max_frame_size-(50+o.length)};Outgoing.prototype.send=function(o,e,a,c){var j=[],h=this.compute_max_payload(e);if(h&&a.length>h)for(var et=0;et<a.length;){var ot=Math.min(et+h,a.length);j.push(a.slice(et,ot)),et=ot}else j.push(a);var st={id:this.next_delivery_id++,tag:e,link:o,data:j,format:c||0,next_to_send:0,sent:!1,settled:!1,state:void 0,remote_settled:!1,remote_state:void 0},lt=this;return st.update=function(nt,gt){lt.update(st,nt,gt)},this.deliveries.push(st),st};Outgoing.prototype.on_begin=function(o){this.remote_window=o.incoming_window};Outgoing.prototype.on_flow=function(o){this.remote_next_transfer_id=o.next_incoming_id,this.remote_window=o.incoming_window};Outgoing.prototype.on_disposition=function(o){for(var e=o.last?o.last:o.first,a=o.first;a<=e;a++){var c=this.deliveries.by_id(a);if(c&&!c.remote_settled){var j=!1;o.settled&&(c.remote_settled=o.settled,j=!0),o.state&&o.state!==c.remote_state&&(c.remote_state=message.unwrap_outcome(o.state),j=!0),j&&this.updated.push(c)}}};Outgoing.prototype.update=function(o,e,a){o&&(o.settled=e,a!==void 0&&(o.state=a),o.remote_settled||this.pending_dispositions.push(o),o.link.connection._register())};Outgoing.prototype.transfer_window=function(){return this.remote_window?this.remote_window-(this.next_transfer_id-this.remote_next_transfer_id):0};Outgoing.prototype.process=function(){for(var o;this.next_pending_delivery<this.next_delivery_id;)if(o=this.deliveries.by_id(this.next_pending_delivery),o)if(o.link.has_credit()){const j=Math.min(this.transfer_window(),o.data.length-o.next_to_send);if(j>0){this.window-=j;const h=o.next_to_send+j;for(var e=o.next_to_send;e<h;e++){this.next_transfer_id++;var a=e+1<o.data.length,c=frames$1.transfer({handle:o.link.local.handle,message_format:o.format,delivery_id:o.id,delivery_tag:o.tag,settled:o.settled,more:a});o.link.session.output(c,o.data[e])}if(h<o.data.length){o.next_to_send=h;break}else o.settled&&(o.remote_settled=!0),o.link.credit--,o.link.delivery_count++,this.next_pending_delivery++}else{log$3.flow("[%s] Incoming window of peer preventing sending further transfers: remote_window=%d, remote_next_transfer_id=%d, next_transfer_id=%d",this.connection.options.id,this.remote_window,this.remote_next_transfer_id,this.next_transfer_id);break}}else{log$3.flow("[%s] Link has no credit",this.connection.options.id);break}else{console.error("ERROR: Next pending delivery not found: "+this.next_pending_delivery);break}for(var e=0;e<this.updated.length;e++)o=this.updated[e],o.remote_state&&o.remote_state.constructor.composite_type&&o.link.dispatch(o.remote_state.constructor.composite_type,o.link._context({delivery:o})),o.remote_settled&&o.link.dispatch("settled",o.link._context({delivery:o}));this.updated=[],this.pending_dispositions.length&&(write_dispositions(this.pending_dispositions),this.pending_dispositions=[]),this.deliveries.pop_if(function(j){return j.settled&&j.remote_settled})};var Incoming=function(o){this.deliveries=new CircularBuffer(get_buffer_size(o,"incoming")),this.updated=[],this.next_transfer_id=0,this.next_delivery_id=void 0,Object.defineProperty(this,"window",{get:function(){return this.deliveries.available()}}),this.remote_next_transfer_id=void 0,this.remote_window=void 0,this.max_transfer_id=this.next_transfer_id+this.window};Incoming.prototype.update=function(o,e,a){o&&(o.settled=e,a!==void 0&&(o.state=a),o.remote_settled||this.updated.push(o),o.link.connection._register())};Incoming.prototype.on_transfer=function(o,e){if(this.next_transfer_id++,e.is_remote_open()){this.next_delivery_id===void 0&&(this.next_delivery_id=o.performative.delivery_id);var a;if(e._incomplete){if(a=e._incomplete,util$2.is_defined(o.performative.delivery_id)&&a.id!==o.performative.delivery_id)throw Error("frame sequence error: delivery "+a.id+" not complete, got "+o.performative.delivery_id);o.payload&&a.frames.push(o.payload)}else if(this.next_delivery_id===o.performative.delivery_id){a={id:o.performative.delivery_id,tag:o.performative.delivery_tag,format:o.performative.message_format,link:e,settled:!1,state:void 0,remote_settled:o.performative.settled===void 0?!1:o.performative.settled,remote_state:o.performative.state,frames:[o.payload]};var c=this;a.update=function(h,et){var ot=h;ot===void 0&&(ot=e.local.attach.rcv_settle_mode!==1),c.update(a,ot,et)},a.accept=function(){this.update(void 0,message.accepted().described())},a.release=function(h){h?this.update(void 0,message.modified(h).described()):this.update(void 0,message.released().described())},a.reject=function(h){this.update(void 0,message.rejected({error:h}).described())},a.modified=function(h){this.update(void 0,message.modified(h).described())},this.deliveries.push(a),this.next_delivery_id++}else throw Error("frame sequence error: expected "+this.next_delivery_id+", got "+o.performative.delivery_id);if(a.incomplete=o.performative.more,a.incomplete)e._incomplete=a;else{e._incomplete=void 0;const h=a.frames.length===1?a.frames[0]:Buffer.concat(a.frames);delete a.frames,e.credit>0?e.credit--:console.error("Received transfer when credit was %d",e.credit),e.delivery_count++;var j=a.format===0?{message:message.decode(h),delivery:a}:{message:h,delivery:a,format:a.format};e.dispatch("message",e._context(j))}}else throw Error("transfer after detach")};Incoming.prototype.process=function(o){this.updated.length>0&&(write_dispositions(this.updated),this.updated=[]),this.deliveries.pop_if(function(e){return e.settled}),this.max_transfer_id-this.next_transfer_id<this.window/2&&o._write_flow()};Incoming.prototype.on_begin=function(o){this.next_transfer_id=o.next_outgoing_id,this.remote_window=o.outgoing_window,this.remote_next_transfer_id=o.next_outgoing_id};Incoming.prototype.on_flow=function(o){this.next_transfer_id=o.next_outgoing_id,this.remote_next_transfer_id=o.next_outgoing_id,this.remote_window=o.outgoing_window};Incoming.prototype.on_disposition=function(o){for(var e=o.last?o.last:o.first,a=o.first;a<=e;a++){var c=this.deliveries.by_id(a);c&&!c.remote_settled&&(o.state&&o.state!==c.remote_state&&(c.remote_state=message.unwrap_outcome(o.state)),o.settled&&(c.remote_settled=o.settled,c.link.dispatch("settled",c.link._context({delivery:c}))))}};var Session$1=function(o,e,a){this.connection=o,this.session_buffer_size=a,this.outgoing=new Outgoing(o,a),this.incoming=new Incoming(a),this.state=new EndpointState$1,this.local={channel:e,handles:{}},this.local.begin=frames$1.begin({next_outgoing_id:this.outgoing.next_transfer_id,incoming_window:this.incoming.window,outgoing_window:this.outgoing.window}),this.local.end=frames$1.end(),this.remote={handles:{}},this.links={},this.options={},Object.defineProperty(this,"error",{get:function(){return this.remote.end?this.remote.end.error:void 0}}),this.observers=new EventEmitter$2};Session$1.prototype=Object.create(EventEmitter$2.prototype);Session$1.prototype.constructor=Session$1;Session$1.prototype._disconnect=function(){this.state.disconnected();for(var o in this.links)this.links[o]._disconnect();this.state.was_open||this.remove()};Session$1.prototype._reconnect=function(){this.state.reconnect(),this.outgoing=new Outgoing(this.connection,this.session_buffer_size),this.incoming=new Incoming(this.session_buffer_size),this.remote={handles:{}};for(var o in this.links)this.links[o]._reconnect()};Session$1.prototype.dispatch=function(o){return log$3.events("[%s] Session got event: %s",this.connection.options.id,o),EventEmitter$2.prototype.emit.apply(this.observers,arguments),this.listeners(o).length?(EventEmitter$2.prototype.emit.apply(this,arguments),!0):this.connection.dispatch.apply(this.connection,arguments)};Session$1.prototype.output=function(o,e){this.connection._write_frame(this.local.channel,o,e)};Session$1.prototype.create_sender=function(o,e){return e||(e=this.get_option("sender_options",{})),this.create_link(o,link$1.Sender,e)};Session$1.prototype.create_receiver=function(o,e){return e||(e=this.get_option("receiver_options",{})),this.create_link(o,link$1.Receiver,e)};function merge(o,e){for(var a in e)a==="properties"&&o.properties?merge(o.properties,e.properties):o[a]=e[a]}function attach(o,e,a,c){var j=Object.create(c||{});typeof e=="string"?j[a]=e:e&&merge(j,e),j.name||(j.name=util$2.generate_uuid());var h=o(j.name,j);for(var et in{source:0,target:0})j[et]&&(typeof j[et]=="string"&&(j[et]={address:j[et]}),h["set_"+et](j[et]));return h.is_sender()&&j.source===void 0&&(j.source=h.set_source({})),h.is_receiver()&&j.target===void 0&&(j.target=h.set_target({})),h.attach(),h}Session$1.prototype.get_option=function(o,e){return this.options[o]!==void 0?this.options[o]:this.connection.get_option(o,e)};Session$1.prototype.attach_sender=function(o){return attach(this.create_sender.bind(this),o,"target",this.get_option("sender_options",{}))};Session$1.prototype.open_sender=Session$1.prototype.attach_sender;Session$1.prototype.attach_receiver=function(o){return attach(this.create_receiver.bind(this),o,"source",this.get_option("receiver_options",{}))};Session$1.prototype.open_receiver=Session$1.prototype.attach_receiver;Session$1.prototype.find_sender=function(o){return this.find_link(util$2.sender_filter(o))};Session$1.prototype.find_receiver=function(o){return this.find_link(util$2.receiver_filter(o))};Session$1.prototype.find_link=function(o){for(var e in this.links){var a=this.links[e];if(o(a))return a}};Session$1.prototype.each_receiver=function(o,e){this.each_link(o,util$2.receiver_filter(e))};Session$1.prototype.each_sender=function(o,e){this.each_link(o,util$2.sender_filter(e))};Session$1.prototype.each_link=function(o,e){for(var a in this.links){var c=this.links[a];(e===void 0||e(c))&&o(c)}};Session$1.prototype.create_link=function(o,e,a){for(var c=0;this.local.handles[c];)c++;var j=new e(this,o,c,a);return this.links[o]=j,this.local.handles[c]=j,j};Session$1.prototype.begin=function(){this.state.open()&&this.connection._register()};Session$1.prototype.open=Session$1.prototype.begin;Session$1.prototype.end=function(o){o&&(this.local.end.error=o),this.state.close()&&this.connection._register()};Session$1.prototype.close=Session$1.prototype.end;Session$1.prototype.is_open=function(){return this.connection.is_open()&&this.state.is_open()};Session$1.prototype.is_remote_open=function(){return this.connection.is_remote_open()&&this.state.remote_open};Session$1.prototype.is_itself_closed=function(){return this.state.is_closed()};Session$1.prototype.is_closed=function(){return this.connection.is_closed()||this.is_itself_closed()};function notify_sendable(o){o.dispatch("sendable",o._context())}function is_sender_sendable(o){return o.is_open()&&o.sendable()}Session$1.prototype._process=function(){do{this.state.need_open()&&this.output(this.local.begin);var o=this.outgoing.deliveries.available()===0;this.outgoing.process(),o&&this.outgoing.deliveries.available()&&this.each_sender(notify_sendable,is_sender_sendable),this.incoming.process(this);for(var e in this.links)this.links[e]._process();this.state.need_close()&&this.output(this.local.end)}while(!this.state.has_settled())};Session$1.prototype.send=function(o,e,a,c){var j=this.outgoing.send(o,e,a,c);return this.connection._register(),j};Session$1.prototype._write_flow=function(o){var e={next_incoming_id:this.incoming.next_transfer_id,incoming_window:this.incoming.window,next_outgoing_id:this.outgoing.next_transfer_id,outgoing_window:this.outgoing.window};this.incoming.max_transfer_id=e.next_incoming_id+e.incoming_window,o&&(o._get_drain()&&(e.drain=!0),e.delivery_count=o.delivery_count,e.handle=o.local.handle,e.link_credit=o.credit),this.output(frames$1.flow(e))};Session$1.prototype.on_begin=function(o){if(this.state.remote_opened())this.remote.channel||(this.remote.channel=o.channel),this.remote.begin=o.performative,this.outgoing.on_begin(o.performative),this.incoming.on_begin(o.performative),this.open(),this.dispatch("session_open",this._context());else throw Error("Begin already received")};Session$1.prototype.on_end=function(o){if(this.state.remote_closed()){this.remote.end=o.performative;var e=this.remote.end.error;if(e){var a=this.dispatch("session_error",this._context());a=this.dispatch("session_close",this._context())||a,a||EventEmitter$2.prototype.emit.call(this.connection.container,"error",new SessionError(e.description,e.condition,this))}else this.dispatch("session_close",this._context());var c=this,j=this.state.mark();process$1.nextTick(function(){c.state.marker===j&&(c.close(),process$1.nextTick(function(){c.remove()}))})}else throw Error("End already received")};Session$1.prototype.on_attach=function(o){var e=o.performative.name,a=this.links[e];a||(a=o.performative.role?this.create_sender(e):this.create_receiver(e)),this.remote.handles[o.performative.handle]=a,a.on_attach(o),a.remote.attach=o.performative};Session$1.prototype.on_disposition=function(o){o.performative.role?(log$3.events("[%s] Received disposition for outgoing transfers",this.connection.options.id),this.outgoing.on_disposition(o.performative)):(log$3.events("[%s] Received disposition for incoming transfers",this.connection.options.id),this.incoming.on_disposition(o.performative)),this.connection._register()};Session$1.prototype.on_flow=function(o){this.outgoing.on_flow(o.performative),this.incoming.on_flow(o.performative),util$2.is_defined(o.performative.handle)&&this._get_link(o).on_flow(o),this.connection._register()};Session$1.prototype._context=function(o){var e=o||{};return e.session=this,this.connection._context(e)};Session$1.prototype._get_link=function(o){var e=o.performative.handle,a=this.remote.handles[e];if(!a)throw Error("Invalid handle "+e);return a};Session$1.prototype.on_detach=function(o){this._get_link(o).on_detach(o)};Session$1.prototype.remove_link=function(o){delete this.remote.handles[o.remote.handle],delete this.local.handles[o.local.handle],delete this.links[o.name]};Session$1.prototype.remove=function(){this.connection.remove_session(this)};Session$1.prototype.on_transfer=function(o){this.incoming.on_transfer(o,this._get_link(o))};var session$1=Session$1,empty=null;const empty$1=Object.freeze(Object.defineProperty({__proto__:null,default:empty},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(empty$1);var browser={};browser.endianness=function(){return"LE"};browser.hostname=function(){return typeof location<"u"?location.hostname:""};browser.loadavg=function(){return[]};browser.uptime=function(){return 0};browser.freemem=function(){return Number.MAX_VALUE};browser.totalmem=function(){return Number.MAX_VALUE};browser.cpus=function(){return[]};browser.type=function(){return"Browser"};browser.release=function(){return typeof navigator<"u"?navigator.appVersion:""};browser.networkInterfaces=browser.getNetworkInterfaces=function(){return{}};browser.arch=function(){return"javascript"};browser.platform=function(){return"browser"};browser.tmpdir=browser.tmpDir=function(){return"/tmp"};browser.EOL=`
`;browser.homedir=function(){return"/"};function assertPath(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function normalizeStringPosix(o,e){for(var a="",c=0,j=-1,h=0,et,ot=0;ot<=o.length;++ot){if(ot<o.length)et=o.charCodeAt(ot);else{if(et===47)break;et=47}if(et===47){if(!(j===ot-1||h===1))if(j!==ot-1&&h===2){if(a.length<2||c!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var st=a.lastIndexOf("/");if(st!==a.length-1){st===-1?(a="",c=0):(a=a.slice(0,st),c=a.length-1-a.lastIndexOf("/")),j=ot,h=0;continue}}else if(a.length===2||a.length===1){a="",c=0,j=ot,h=0;continue}}e&&(a.length>0?a+="/..":a="..",c=2)}else a.length>0?a+="/"+o.slice(j+1,ot):a=o.slice(j+1,ot),c=ot-j-1;j=ot,h=0}else et===46&&h!==-1?++h:h=-1}return a}function _format(o,e){var a=e.dir||e.root,c=e.base||(e.name||"")+(e.ext||"");return a?a===e.root?a+c:a+o+c:c}var posix={resolve:function o(){for(var e="",a=!1,c,j=arguments.length-1;j>=-1&&!a;j--){var h;j>=0?h=arguments[j]:(c===void 0&&(c=process$1.cwd()),h=c),assertPath(h),h.length!==0&&(e=h+"/"+e,a=h.charCodeAt(0)===47)}return e=normalizeStringPosix(e,!a),a?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function o(e){if(assertPath(e),e.length===0)return".";var a=e.charCodeAt(0)===47,c=e.charCodeAt(e.length-1)===47;return e=normalizeStringPosix(e,!a),e.length===0&&!a&&(e="."),e.length>0&&c&&(e+="/"),a?"/"+e:e},isAbsolute:function o(e){return assertPath(e),e.length>0&&e.charCodeAt(0)===47},join:function o(){if(arguments.length===0)return".";for(var e,a=0;a<arguments.length;++a){var c=arguments[a];assertPath(c),c.length>0&&(e===void 0?e=c:e+="/"+c)}return e===void 0?".":posix.normalize(e)},relative:function o(e,a){if(assertPath(e),assertPath(a),e===a||(e=posix.resolve(e),a=posix.resolve(a),e===a))return"";for(var c=1;c<e.length&&e.charCodeAt(c)===47;++c);for(var j=e.length,h=j-c,et=1;et<a.length&&a.charCodeAt(et)===47;++et);for(var ot=a.length,st=ot-et,lt=h<st?h:st,nt=-1,gt=0;gt<=lt;++gt){if(gt===lt){if(st>lt){if(a.charCodeAt(et+gt)===47)return a.slice(et+gt+1);if(gt===0)return a.slice(et+gt)}else h>lt&&(e.charCodeAt(c+gt)===47?nt=gt:gt===0&&(nt=0));break}var dt=e.charCodeAt(c+gt),mt=a.charCodeAt(et+gt);if(dt!==mt)break;dt===47&&(nt=gt)}var vt="";for(gt=c+nt+1;gt<=j;++gt)(gt===j||e.charCodeAt(gt)===47)&&(vt.length===0?vt+="..":vt+="/..");return vt.length>0?vt+a.slice(et+nt):(et+=nt,a.charCodeAt(et)===47&&++et,a.slice(et))},_makeLong:function o(e){return e},dirname:function o(e){if(assertPath(e),e.length===0)return".";for(var a=e.charCodeAt(0),c=a===47,j=-1,h=!0,et=e.length-1;et>=1;--et)if(a=e.charCodeAt(et),a===47){if(!h){j=et;break}}else h=!1;return j===-1?c?"/":".":c&&j===1?"//":e.slice(0,j)},basename:function o(e,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');assertPath(e);var c=0,j=-1,h=!0,et;if(a!==void 0&&a.length>0&&a.length<=e.length){if(a.length===e.length&&a===e)return"";var ot=a.length-1,st=-1;for(et=e.length-1;et>=0;--et){var lt=e.charCodeAt(et);if(lt===47){if(!h){c=et+1;break}}else st===-1&&(h=!1,st=et+1),ot>=0&&(lt===a.charCodeAt(ot)?--ot===-1&&(j=et):(ot=-1,j=st))}return c===j?j=st:j===-1&&(j=e.length),e.slice(c,j)}else{for(et=e.length-1;et>=0;--et)if(e.charCodeAt(et)===47){if(!h){c=et+1;break}}else j===-1&&(h=!1,j=et+1);return j===-1?"":e.slice(c,j)}},extname:function o(e){assertPath(e);for(var a=-1,c=0,j=-1,h=!0,et=0,ot=e.length-1;ot>=0;--ot){var st=e.charCodeAt(ot);if(st===47){if(!h){c=ot+1;break}continue}j===-1&&(h=!1,j=ot+1),st===46?a===-1?a=ot:et!==1&&(et=1):a!==-1&&(et=-1)}return a===-1||j===-1||et===0||et===1&&a===j-1&&a===c+1?"":e.slice(a,j)},format:function o(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return _format("/",e)},parse:function o(e){assertPath(e);var a={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return a;var c=e.charCodeAt(0),j=c===47,h;j?(a.root="/",h=1):h=0;for(var et=-1,ot=0,st=-1,lt=!0,nt=e.length-1,gt=0;nt>=h;--nt){if(c=e.charCodeAt(nt),c===47){if(!lt){ot=nt+1;break}continue}st===-1&&(lt=!1,st=nt+1),c===46?et===-1?et=nt:gt!==1&&(gt=1):et!==-1&&(gt=-1)}return et===-1||st===-1||gt===0||gt===1&&et===st-1&&et===ot+1?st!==-1&&(ot===0&&j?a.base=a.name=e.slice(1,st):a.base=a.name=e.slice(ot,st)):(ot===0&&j?(a.name=e.slice(1,et),a.base=e.slice(1,st)):(a.name=e.slice(ot,et),a.base=e.slice(ot,st)),a.ext=e.slice(et,st)),ot>0?a.dir=e.slice(0,ot-1):j&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};posix.posix=posix;var pathBrowserify=posix,define_process_env_default={},errors=errors$5,frames=frames_1,log$2=log$6,sasl$1=sasl$2,util$1=util_1,EndpointState=endpoint,Session=session$1,Transport=transport,fs=require$$6,os=browser,path=pathBrowserify,net$1=require$$6,tls$1=require$$6,EventEmitter$1=eventsExports.EventEmitter,AMQP_PROTOCOL_ID=0;function find_connect_config(){var o;define_process_env_default.MESSAGING_CONNECT_FILE?o=[define_process_env_default.MESSAGING_CONNECT_FILE]:o=[process$1.cwd(),path.join(os.homedir(),".config/messaging"),"/etc/messaging"].map(function(c){return path.join(c,"/connect.json")});for(var e=0;e<o.length;e++)if(fs.existsSync(o[e])){var a=JSON.parse(fs.readFileSync(o[e],"utf8"));return log$2.config("using config from %s: %j",o[e],a),a}return{}}function get_default_connect_config(){var o=find_connect_config(),e={};return o.scheme==="amqps"&&(e.transport="tls"),o.host&&(e.host=o.host),o.port==="amqp"?e.port=5672:o.port==="amqps"?e.port=5671:e.port=o.port,o.sasl&&o.sasl.enabled===!1||(o.user?e.username=o.user:e.username="anonymous",o.password&&(e.password=o.password),o.sasl_mechanisms&&(e.sasl_mechanisms=o.sasl_mechanisms)),o.tls&&(o.tls.key&&(e.key=fs.readFileSync(o.tls.key)),o.tls.cert&&(e.cert=fs.readFileSync(o.tls.cert)),o.tls.ca&&(e.ca=[fs.readFileSync(o.tls.ca)]),(o.verify===!1||o.tls.verify===!1)&&(e.rejectUnauthorized=!1)),e.transport==="tls"&&(e.servername=e.host),e}function get_socket_id(o){return o.get_id_string?o.get_id_string():o.localAddress+":"+o.localPort+" -> "+o.remoteAddress+":"+o.remotePort}function session_per_connection(o,e){var a=null;return{get_session:function(){return a||(a=o.create_session(e),a.observers.on("session_close",function(){a=null}),a.begin()),a}}}function restrict(o,e){if(o){var a=o,c;return function(j){return c!==j&&(a=o,c=j),a--?e(j):-1}}else return e}function backoff(o,e){var a=o,c;return function(j){c!==j&&(a=o,c=j);var h=a,et=a*2;return a=e>et?et:e,h}}function get_connect_fn(o){if(o.transport===void 0||o.transport==="tcp")return net$1.connect;if(o.transport==="tls"||o.transport==="ssl")return tls$1.connect;throw Error("Unrecognised transport: "+o.transport)}function connection_details(o){var e={};return e.connect=o.connect?o.connect:get_connect_fn(o),e.host=o.host?o.host:"localhost",e.port=o.port?o.port:5672,e.options=o,e}var aliases=["container_id","hostname","max_frame_size","channel_max","idle_time_out","outgoing_locales","incoming_locales","offered_capabilities","desired_capabilities","properties"];function remote_property_shortcut(o){return function(){return this.remote.open?this.remote.open[o]:void 0}}function connection_fields(o){var e={};return aliases.forEach(function(a){o[a]!==void 0&&(e[a]=o[a])}),e}function set_reconnect(o,e){if(typeof o=="boolean")if(o){var a=e.get_option("initial_reconnect_delay",100),c=e.get_option("max_reconnect_delay",6e4);e.options.reconnect=restrict(e.get_option("reconnect_limit"),backoff(a,c))}else e.options.reconnect=!1;else if(typeof o=="number"){var j=e.options.reconnect;e.options.reconnect=restrict(e.get_option("reconnect_limit"),function(){return j})}}var conn_counter=1,Connection$1=function(o,e){if(this.options={},o){for(var a in o)this.options[a]=o[a];(o.transport==="tls"||o.transport==="ssl")&&o.servername===void 0&&o.host!==void 0&&(this.options.servername=o.host),this.session_buffer_size=o.session_buffer_size}else this.options=get_default_connect_config();if(this.container=e,this.options.id||(this.options.id="connection-"+conn_counter++),this.options.container_id||(this.options.container_id=e?e.id:util$1.generate_uuid()),!this.options.connection_details){var j=this;this.options.connection_details=function(){return connection_details(j.options)}}var c=this.get_option("reconnect",!0);set_reconnect(c,this),this.registered=!1,this.state=new EndpointState,this.local_channel_map={},this.remote_channel_map={},this.local={},this.remote={},this.local.open=frames.open(connection_fields(this.options)),this.local.close=frames.close({}),this.session_policy=session_per_connection(this,this.session_buffer_size),this.amqp_transport=new Transport(this.options.id,AMQP_PROTOCOL_ID,frames.TYPE_AMQP,this),this.sasl_transport=void 0,this.transport=this.amqp_transport,this.conn_established_counter=0,this.heartbeat_out=void 0,this.heartbeat_in=void 0,this.abort_idle=void 0,this.socket_ready=!1,this.scheduled_reconnect=void 0,this.default_sender=void 0,this.closed_with_non_fatal_error=!1;var j=this;aliases.forEach(function(h){Object.defineProperty(j,h,{get:remote_property_shortcut(h)})}),Object.defineProperty(this,"error",{get:function(){return this.remote.close?this.remote.close.error:void 0}})};Connection$1.prototype=Object.create(EventEmitter$1.prototype);Connection$1.prototype.constructor=Connection$1;Connection$1.prototype.dispatch=function(o){return log$2.events("[%s] Connection got event: %s",this.options.id,o),this.listeners(o).length?(EventEmitter$1.prototype.emit.apply(this,arguments),!0):this.container?this.container.dispatch.apply(this.container,arguments):!1};Connection$1.prototype._disconnect=function(){this.state.disconnected();for(var o in this.local_channel_map)this.local_channel_map[o]._disconnect();this.socket_ready=!1};Connection$1.prototype._reconnect=function(){this.abort_idle&&(clearTimeout(this.abort_idle),this.abort_idle=void 0,this.local.close.error=void 0,this.state=new EndpointState,this.state.open()),this.state.reconnect(),this._reset_remote_state()};Connection$1.prototype._reset_remote_state=function(){this.amqp_transport=new Transport(this.options.id,AMQP_PROTOCOL_ID,frames.TYPE_AMQP,this),this.sasl_transport=void 0,this.transport=this.amqp_transport,this.remote={},this.remote_channel_map={};var o=this.local_channel_map;for(var e in o)o[e]._reconnect()};Connection$1.prototype.connect=function(){return this.is_server=!1,this.abort_idle&&(clearTimeout(this.abort_idle),this.abort_idle=void 0),this._reset_remote_state(),this._connect(this.options.connection_details(this.conn_established_counter)),this.open(),this};Connection$1.prototype.reconnect=function(){return this.scheduled_reconnect=void 0,log$2.reconnect("[%s] reconnecting...",this.options.id),this._reconnect(),this._connect(this.options.connection_details(this.conn_established_counter)),process$1.nextTick(this._process.bind(this)),this};Connection$1.prototype.set_reconnect=function(o){set_reconnect(o,this)};Connection$1.prototype._connect=function(o){return o.connect?this.init(o.connect(o.port,o.host,o.options,this.connected.bind(this))):this.init(get_connect_fn(o)(o.port,o.host,o.options,this.connected.bind(this))),this};Connection$1.prototype.accept=function(o){return this.is_server=!0,log$2.io("[%s] client accepted: %s",this.id,get_socket_id(o)),this.socket_ready=!0,this.init(o)};Connection$1.prototype.abort_socket=function(o){o===this.socket&&(this.abort_idle=void 0,log$2.io("[%s] aborting socket",this.options.id),this.socket.end(),this.socket.removeAllListeners&&(this.socket.removeAllListeners("data"),this.socket.removeAllListeners("error"),this.socket.removeAllListeners("end")),typeof this.socket.destroy=="function"&&this.socket.destroy(),this._disconnected())};Connection$1.prototype.init=function(o){if(this.socket=o,this.get_option("tcp_no_delay",!1)&&this.socket.setNoDelay&&this.socket.setNoDelay(!0),this.socket.on("data",this.input.bind(this)),this.socket.on("error",this.on_error.bind(this)),this.socket.on("end",this.eof.bind(this)),this.is_server){var e;if(this.container&&Object.getOwnPropertyNames(this.container.sasl_server_mechanisms).length&&(e=this.container.sasl_server_mechanisms),this.socket.encrypted&&this.socket.authorized&&this.get_option("enable_sasl_external",!1)&&(e=sasl$1.server_add_external(e?util$1.clone(e):{})),e)e.ANONYMOUS!==void 0&&!this.get_option("require_sasl",!1)?this.sasl_transport=new sasl$1.Selective(this,e):this.sasl_transport=new sasl$1.Server(this,e);else if(!this.get_option("disable_sasl",!1)){var a=sasl$1.server_mechanisms();a.enable_anonymous(),this.sasl_transport=new sasl$1.Selective(this,a)}}else{var c=this.get_option("sasl_mechanisms");if(!c){var j=this.get_option("username"),h=this.get_option("password"),et=this.get_option("token");j&&(c=sasl$1.client_mechanisms(),h?c.enable_plain(j,h):et?c.enable_xoauth2(j,et):c.enable_anonymous(j))}this.socket.encrypted&&this.options.cert&&this.get_option("enable_sasl_external",!1)&&(c||(c=sasl$1.client_mechanisms()),c.enable_external()),c&&(this.sasl_transport=new sasl$1.Client(this,c,this.options.sasl_init_hostname||this.options.servername||this.options.host))}return this.transport=this.sasl_transport?this.sasl_transport:this.amqp_transport,this};Connection$1.prototype.attach_sender=function(o){return this.session_policy.get_session().attach_sender(o)};Connection$1.prototype.open_sender=Connection$1.prototype.attach_sender;Connection$1.prototype.attach_receiver=function(o){return this.get_option("tcp_no_delay",!0)&&this.socket.setNoDelay&&this.socket.setNoDelay(!0),this.session_policy.get_session().attach_receiver(o)};Connection$1.prototype.open_receiver=Connection$1.prototype.attach_receiver;Connection$1.prototype.get_option=function(o,e){return this.options[o]!==void 0?this.options[o]:this.container?this.container.get_option(o,e):e};Connection$1.prototype.send=function(o){return this.default_sender===void 0&&(this.default_sender=this.open_sender({target:{}})),this.default_sender.send(o)};Connection$1.prototype.connected=function(){this.socket_ready=!0,this.conn_established_counter++,log$2.io("[%s] connected %s",this.options.id,get_socket_id(this.socket)),this.output()};Connection$1.prototype.sasl_failed=function(o,e){this.transport_error=new errors.ConnectionError(o,e||"amqp:unauthorized-access",this),this._handle_error(),this.socket.end()};Connection$1.prototype._is_fatal=function(o){var e=this.get_option("all_errors_non_fatal",!1);if(e)return!1;var a=this.get_option("non_fatal_errors",["amqp:connection:forced"]);return a.indexOf(o)<0};Connection$1.prototype._handle_error=function(){var o=this.get_error();if(o){var e=this.dispatch("connection_error",this._context({error:o}));return e=this.dispatch("connection_close",this._context({error:o}))||e,this._is_fatal(o.condition)?e||this.dispatch("error",new errors.ConnectionError(o.description,o.condition,this)):this.state.local_open&&(this.closed_with_non_fatal_error=!0),!0}else return!1};Connection$1.prototype.get_error=function(){if(this.transport_error)return this.transport_error;if(this.remote.close&&this.remote.close.error)return new errors.ConnectionError(this.remote.close.error.description,this.remote.close.error.condition,this)};Connection$1.prototype._get_peer_details=function(){var o="";return this.remote.open&&this.remote.open.container&&(o+=this.remote.open.container+" "),this.remote.open&&this.remote.open.properties&&(o+=JSON.stringify(this.remote.open.properties)),o};Connection$1.prototype.output=function(){try{this.socket&&this.socket_ready&&(this.heartbeat_out&&clearTimeout(this.heartbeat_out),this.transport.write(this.socket),(this.is_closed()&&this.state.has_settled()||this.abort_idle||this.transport_error)&&!this.transport.has_writes_pending()?this.socket.end():this.is_open()&&this.remote.open.idle_time_out&&(this.heartbeat_out=setTimeout(this._write_frame.bind(this),this.remote.open.idle_time_out/2)),this.local.open.idle_time_out&&this.heartbeat_in===void 0&&(this.heartbeat_in=setTimeout(this.idle.bind(this),this.local.open.idle_time_out)))}catch(o){this.saved_error=o,o.name==="ProtocolError"?(console.error("["+this.options.id+"] error on write: "+o+" "+this._get_peer_details()+" "+o.name),this.dispatch("protocol_error",o)||console.error("["+this.options.id+"] error on write: "+o+" "+this._get_peer_details())):this.dispatch("error",o),this.socket.end()}};function byte_to_hex(o){return o<16?"0x0"+Number(o).toString(16):"0x"+Number(o).toString(16)}function buffer_to_hex(o){for(var e=[],a=0;a<o.length;a++)e.push(byte_to_hex(o[a]));return e.join(",")}Connection$1.prototype.input=function(o){var e;try{if(this.heartbeat_in&&clearTimeout(this.heartbeat_in),log$2.io("[%s] read %d bytes",this.options.id,o.length),this.frame_size)if(this.received_bytes+=o.length,this.chunks.push(o),this.frame_size<=this.received_bytes)e=Buffer.concat(this.chunks,this.received_bytes),this.chunks=null,this.frame_size=void 0;else{log$2.io("[%s] pushed %d bytes",this.options.id,o.length);return}else this.previous_input?(e=Buffer.concat([this.previous_input,o]),this.previous_input=null):e=o;const a=this.transport.read(e,this);if(a<e.length){const c=e.slice(a);this.frame_size=this.transport.peek_size(c),this.frame_size?(this.chunks=[c],this.received_bytes=c.length,log$2.io("[%s] waiting frame_size %s",this.options.id,this.frame_size)):this.previous_input=c}this.local.open.idle_time_out&&(this.heartbeat_in=setTimeout(this.idle.bind(this),this.local.open.idle_time_out)),this.transport.has_writes_pending()?this.output():this.is_closed()&&this.state.has_settled()?this.socket.end():this.is_open()&&this.remote.open.idle_time_out&&!this.heartbeat_out&&(this.heartbeat_out=setTimeout(this._write_frame.bind(this),this.remote.open.idle_time_out/2))}catch(a){this.saved_error=a,a.name==="ProtocolError"?this.dispatch("protocol_error",a)||console.error("["+this.options.id+"] error on read: "+a+" "+this._get_peer_details()+" (buffer:"+buffer_to_hex(e)+")"):this.dispatch("error",a),this.socket.end()}};Connection$1.prototype.idle=function(){this.is_closed()||(this.closed_with_non_fatal_error=!0,this.local.close.error={condition:"amqp:resource-limit-exceeded",description:"max idle time exceeded"},this.close(),this.abort_idle=setTimeout(this.abort_socket.bind(this,this.socket),1e3))};Connection$1.prototype.on_error=function(o){this._disconnected(o)};Connection$1.prototype.eof=function(o){var e=o||this.saved_error;this.saved_error=void 0,this._disconnected(e)};Connection$1.prototype._disconnected=function(o){this.heartbeat_out&&(clearTimeout(this.heartbeat_out),this.heartbeat_out=void 0),this.heartbeat_in&&(clearTimeout(this.heartbeat_in),this.heartbeat_in=void 0),this.abort_idle&&(clearTimeout(this.abort_idle),this.abort_idle=void 0);var e=this.closed_with_non_fatal_error;if(this.closed_with_non_fatal_error&&(this.closed_with_non_fatal_error=!1,this.options.reconnect&&this.open()),(!this.is_closed()||e)&&this.scheduled_reconnect===void 0){this._disconnect();var a={};if(o&&(a.error=o),!this.is_server&&!this.transport_error&&this.options.reconnect){var c=this.options.reconnect(this.conn_established_counter);c>=0?(log$2.reconnect("[%s] Scheduled reconnect in "+c+"ms",this.options.id),this.scheduled_reconnect=setTimeout(this.reconnect.bind(this),c),a.reconnecting=!0):a.reconnecting=!1}this.dispatch("disconnected",this._context(a))||console.warn("["+this.options.id+"] disconnected %s",a.error||"")}};Connection$1.prototype.open=function(){this.state.open()&&this._register()};Connection$1.prototype.close=function(o){o&&(this.local.close.error=o),this.state.close()&&this._register()};Connection$1.prototype.is_open=function(){return this.state.is_open()};Connection$1.prototype.is_remote_open=function(){return this.state.remote_open};Connection$1.prototype.is_closed=function(){return this.state.is_closed()};Connection$1.prototype.create_session=function(o){for(var e=0;this.local_channel_map[e];)e++;var a=new Session(this,e,o);return this.local_channel_map[e]=a,a};Connection$1.prototype.find_sender=function(o){return this.find_link(util$1.sender_filter(o))};Connection$1.prototype.find_receiver=function(o){return this.find_link(util$1.receiver_filter(o))};Connection$1.prototype.find_link=function(o){for(var e in this.local_channel_map){var a=this.local_channel_map[e],c=a.find_link(o);if(c)return c}};Connection$1.prototype.each_receiver=function(o,e){this.each_link(o,util$1.receiver_filter(e))};Connection$1.prototype.each_sender=function(o,e){this.each_link(o,util$1.sender_filter(e))};Connection$1.prototype.each_link=function(o,e){for(var a in this.local_channel_map){var c=this.local_channel_map[a];c.each_link(o,e)}};Connection$1.prototype.on_open=function(o){if(this.state.remote_opened())this.remote.open=o.performative,this.open(),this.dispatch("connection_open",this._context());else throw new errors.ProtocolError("Open already received")};Connection$1.prototype.on_close=function(o){if(this.state.remote_closed()){this.remote.close=o.performative,this.remote.close.error?this._handle_error():this.dispatch("connection_close",this._context()),this.heartbeat_out&&clearTimeout(this.heartbeat_out);var e=this;process$1.nextTick(function(){e.close()})}else throw new errors.ProtocolError("Close already received")};Connection$1.prototype._register=function(){this.registered||(this.registered=!0,process$1.nextTick(this._process.bind(this)))};Connection$1.prototype._process=function(){this.registered=!1;do{this.state.need_open()&&this._write_open();var o=this.local_channel_map;for(var e in o)o[e]._process();this.state.need_close()&&this._write_close()}while(!this.state.has_settled())};Connection$1.prototype._write_frame=function(o,e,a){this.amqp_transport.encode(frames.amqp_frame(o,e,a)),this.output()};Connection$1.prototype._write_open=function(){this._write_frame(0,this.local.open)};Connection$1.prototype._write_close=function(){this._write_frame(0,this.local.close),this.local.close.error=void 0};Connection$1.prototype.on_begin=function(o){var e;if(o.performative.remote_channel===null||o.performative.remote_channel===void 0)e=this.create_session(this.session_buffer_size),e.local.begin.remote_channel=o.channel;else if(e=this.local_channel_map[o.performative.remote_channel],!e)throw new errors.ProtocolError("Invalid value for remote channel "+o.performative.remote_channel);e.on_begin(o),this.remote_channel_map[o.channel]=e};Connection$1.prototype.get_peer_certificate=function(){if(this.socket&&this.socket.getPeerCertificate)return this.socket.getPeerCertificate()};Connection$1.prototype.get_tls_socket=function(){if(this.socket&&(this.options.transport==="tls"||this.options.transport==="ssl"))return this.socket};Connection$1.prototype._context=function(o){var e=o||{};return e.connection=this,this.container&&(e.container=this.container),e};Connection$1.prototype.remove_session=function(o){this.remote_channel_map[o.remote.channel]===o&&delete this.remote_channel_map[o.remote.channel],this.local_channel_map[o.local.channel]===o&&delete this.local_channel_map[o.local.channel]};Connection$1.prototype.remove_all_sessions=function(){clearObject(this.remote_channel_map),clearObject(this.local_channel_map)};function clearObject(o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&delete o[e]}function delegate_to_session(o){Connection$1.prototype["on_"+o]=function(e){var a=this.remote_channel_map[e.channel];if(!a)throw new errors.ProtocolError(o+" received on invalid channel "+e.channel);a["on_"+o](e)}}delegate_to_session("end");delegate_to_session("attach");delegate_to_session("detach");delegate_to_session("transfer");delegate_to_session("disposition");delegate_to_session("flow");var connection$1=Connection$1,ReceiverEvents;(function(o){o.message="message",o.receiverOpen="receiver_open",o.receiverDrained="receiver_drained",o.receiverFlow="receiver_flow",o.receiverError="receiver_error",o.receiverClose="receiver_close",o.settled="settled"})(ReceiverEvents||(ReceiverEvents={}));var SenderEvents;(function(o){o.sendable="sendable",o.senderOpen="sender_open",o.senderDraining="sender_draining",o.senderFlow="sender_flow",o.senderError="sender_error",o.senderClose="sender_close",o.accepted="accepted",o.released="released",o.rejected="rejected",o.modified="modified",o.settled="settled"})(SenderEvents||(SenderEvents={}));var SessionEvents;(function(o){o.sessionOpen="session_open",o.sessionError="session_error",o.sessionClose="session_close",o.settled="settled"})(SessionEvents||(SessionEvents={}));var ConnectionEvents;(function(o){o.connectionOpen="connection_open",o.connectionClose="connection_close",o.connectionError="connection_error",o.protocolError="protocol_error",o.error="error",o.disconnected="disconnected",o.settled="settled"})(ConnectionEvents||(ConnectionEvents={}));var eventTypes$1={ReceiverEvents,SenderEvents,SessionEvents,ConnectionEvents},ws$1,hasRequiredWs;function requireWs(){if(hasRequiredWs)return ws$1;hasRequiredWs=1;function o(j){return j}function e(j){return j instanceof ArrayBuffer?Buffer.from(new Uint8Array(j)):Buffer.from(j)}function a(j){return new Uint8Array(j)}function c(j){var h=o,et=o;return j.binaryType&&(j.binaryType="arraybuffer",h=e,et=a),{end:function(){j.close()},write:function(ot){try{j.send(et(ot),{binary:!0})}catch(st){j.onerror(st)}},on:function(ot,st){ot==="data"?j.onmessage=function(lt){st(h(lt.data))}:ot==="end"?j.onclose=st:ot==="error"?j.onerror=st:console.error("ERROR: Attempt to set unrecognised handler on websocket wrapper: "+ot)},get_id_string:function(){return j.url}}}return ws$1={connect:function(j){return function(h,et,ot){return function(){return{connect:function(st,lt,nt,gt){var dt=new j(h,et,ot);return dt.onopen=gt,c(dt)}}}}},wrap:c},ws$1}var filter,hasRequiredFilter;function requireFilter(){if(hasRequiredFilter)return filter;hasRequiredFilter=1;var o=requireTypes();return filter={selector:function(e){return{"jms-selector":o.wrap_described(e,77567109365764)}}},filter}var Connection=connection$1,log$1=log$6,sasl=sasl$2,util=util_1,eventTypes=eventTypes$1,net=require$$6,tls=require$$6,EventEmitter=eventsExports.EventEmitter,Container=function(o){this.options=o?Object.create(o):{},this.options.id||(this.options.id=util.generate_uuid()),this.id=this.options.id,this.sasl_server_mechanisms=sasl.server_mechanisms()};Container.prototype=Object.create(EventEmitter.prototype);Container.prototype.constructor=Container;Container.prototype.dispatch=function(o){return log$1.events("[%s] Container got event: "+o,this.id),EventEmitter.prototype.emit.apply(this,arguments),!!this.listeners(o).length};Container.prototype.connect=function(o){return new Connection(o,this).connect()};Container.prototype.create_connection=function(o){return new Connection(o,this)};Container.prototype.listen=function(o){var e=this,a;if(o.transport===void 0||o.transport==="tcp")a=net.createServer(o),a.on("connection",function(c){new Connection(o,e).accept(c)});else if(o.transport==="tls"||o.transport==="ssl")a=tls.createServer(o),a.on("secureConnection",function(c){new Connection(o,e).accept(c)});else throw Error("Unrecognised transport: "+o.transport);return process$1.version.match(/v0\.10\.\d+/)?a.listen(o.port,o.host):a.listen(o),a};Container.prototype.create_container=function(o){return new Container(o)};Container.prototype.get_option=function(o,e){return this.options[o]!==void 0?this.options[o]:e};Container.prototype.generate_uuid=util.generate_uuid;Container.prototype.string_to_uuid=util.string_to_uuid;Container.prototype.uuid_to_string=util.uuid_to_string;var ws=requireWs();Container.prototype.websocket_accept=function(o,e){new Connection(e,this).accept(ws.wrap(o))};Container.prototype.websocket_connect=ws.connect;Container.prototype.filter=requireFilter();Container.prototype.types=requireTypes();Container.prototype.message=requireMessage();Container.prototype.sasl=sasl;Container.prototype.ReceiverEvents=eventTypes.ReceiverEvents;Container.prototype.SenderEvents=eventTypes.SenderEvents;Container.prototype.SessionEvents=eventTypes.SessionEvents;Container.prototype.ConnectionEvents=eventTypes.ConnectionEvents;var container$1=new Container,eventContext={},session={},extendStatics=function(o,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var j in c)Object.prototype.hasOwnProperty.call(c,j)&&(a[j]=c[j])},extendStatics(o,e)};function __extends(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics(o,e);function a(){this.constructor=o}o.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}var __assign=function(){return __assign=Object.assign||function(e){for(var a,c=1,j=arguments.length;c<j;c++){a=arguments[c];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},__assign.apply(this,arguments)};function __rest(o,e){var a={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&e.indexOf(c)<0&&(a[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,c=Object.getOwnPropertySymbols(o);j<c.length;j++)e.indexOf(c[j])<0&&Object.prototype.propertyIsEnumerable.call(o,c[j])&&(a[c[j]]=o[c[j]]);return a}function __decorate(o,e,a,c){var j=arguments.length,h=j<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,a):c,et;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(o,e,a,c);else for(var ot=o.length-1;ot>=0;ot--)(et=o[ot])&&(h=(j<3?et(h):j>3?et(e,a,h):et(e,a))||h);return j>3&&h&&Object.defineProperty(e,a,h),h}function __param(o,e){return function(a,c){e(a,c,o)}}function __esDecorate(o,e,a,c,j,h){function et(ht){if(ht!==void 0&&typeof ht!="function")throw new TypeError("Function expected");return ht}for(var ot=c.kind,st=ot==="getter"?"get":ot==="setter"?"set":"value",lt=!e&&o?c.static?o:o.prototype:null,nt=e||(lt?Object.getOwnPropertyDescriptor(lt,c.name):{}),gt,dt=!1,mt=a.length-1;mt>=0;mt--){var vt={};for(var tt in c)vt[tt]=tt==="access"?{}:c[tt];for(var tt in c.access)vt.access[tt]=c.access[tt];vt.addInitializer=function(ht){if(dt)throw new TypeError("Cannot add initializers after decoration has completed");h.push(et(ht||null))};var bt=(0,a[mt])(ot==="accessor"?{get:nt.get,set:nt.set}:nt[st],vt);if(ot==="accessor"){if(bt===void 0)continue;if(bt===null||typeof bt!="object")throw new TypeError("Object expected");(gt=et(bt.get))&&(nt.get=gt),(gt=et(bt.set))&&(nt.set=gt),(gt=et(bt.init))&&j.unshift(gt)}else(gt=et(bt))&&(ot==="field"?j.unshift(gt):nt[st]=gt)}lt&&Object.defineProperty(lt,c.name,nt),dt=!0}function __runInitializers(o,e,a){for(var c=arguments.length>2,j=0;j<e.length;j++)a=c?e[j].call(o,a):e[j].call(o);return c?a:void 0}function __propKey(o){return typeof o=="symbol"?o:"".concat(o)}function __setFunctionName(o,e,a){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:a?"".concat(a," ",e):e})}function __metadata(o,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,e)}function __awaiter(o,e,a,c){function j(h){return h instanceof a?h:new a(function(et){et(h)})}return new(a||(a=Promise))(function(h,et){function ot(nt){try{lt(c.next(nt))}catch(gt){et(gt)}}function st(nt){try{lt(c.throw(nt))}catch(gt){et(gt)}}function lt(nt){nt.done?h(nt.value):j(nt.value).then(ot,st)}lt((c=c.apply(o,e||[])).next())})}function __generator(o,e){var a={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},c,j,h,et=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return et.next=ot(0),et.throw=ot(1),et.return=ot(2),typeof Symbol=="function"&&(et[Symbol.iterator]=function(){return this}),et;function ot(lt){return function(nt){return st([lt,nt])}}function st(lt){if(c)throw new TypeError("Generator is already executing.");for(;et&&(et=0,lt[0]&&(a=0)),a;)try{if(c=1,j&&(h=lt[0]&2?j.return:lt[0]?j.throw||((h=j.return)&&h.call(j),0):j.next)&&!(h=h.call(j,lt[1])).done)return h;switch(j=0,h&&(lt=[lt[0]&2,h.value]),lt[0]){case 0:case 1:h=lt;break;case 4:return a.label++,{value:lt[1],done:!1};case 5:a.label++,j=lt[1],lt=[0];continue;case 7:lt=a.ops.pop(),a.trys.pop();continue;default:if(h=a.trys,!(h=h.length>0&&h[h.length-1])&&(lt[0]===6||lt[0]===2)){a=0;continue}if(lt[0]===3&&(!h||lt[1]>h[0]&&lt[1]<h[3])){a.label=lt[1];break}if(lt[0]===6&&a.label<h[1]){a.label=h[1],h=lt;break}if(h&&a.label<h[2]){a.label=h[2],a.ops.push(lt);break}h[2]&&a.ops.pop(),a.trys.pop();continue}lt=e.call(o,a)}catch(nt){lt=[6,nt],j=0}finally{c=h=0}if(lt[0]&5)throw lt[1];return{value:lt[0]?lt[1]:void 0,done:!0}}}var __createBinding=Object.create?function(o,e,a,c){c===void 0&&(c=a);var j=Object.getOwnPropertyDescriptor(e,a);(!j||("get"in j?!e.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return e[a]}}),Object.defineProperty(o,c,j)}:function(o,e,a,c){c===void 0&&(c=a),o[c]=e[a]};function __exportStar(o,e){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(e,o,a)}function __values(o){var e=typeof Symbol=="function"&&Symbol.iterator,a=e&&o[e],c=0;if(a)return a.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&c>=o.length&&(o=void 0),{value:o&&o[c++],done:!o}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,e){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var c=a.call(o),j,h=[],et;try{for(;(e===void 0||e-- >0)&&!(j=c.next()).done;)h.push(j.value)}catch(ot){et={error:ot}}finally{try{j&&!j.done&&(a=c.return)&&a.call(c)}finally{if(et)throw et.error}}return h}function __spread(){for(var o=[],e=0;e<arguments.length;e++)o=o.concat(__read(arguments[e]));return o}function __spreadArrays(){for(var o=0,e=0,a=arguments.length;e<a;e++)o+=arguments[e].length;for(var c=Array(o),j=0,e=0;e<a;e++)for(var h=arguments[e],et=0,ot=h.length;et<ot;et++,j++)c[j]=h[et];return c}function __spreadArray(o,e,a){if(a||arguments.length===2)for(var c=0,j=e.length,h;c<j;c++)(h||!(c in e))&&(h||(h=Array.prototype.slice.call(e,0,c)),h[c]=e[c]);return o.concat(h||Array.prototype.slice.call(e))}function __await(o){return this instanceof __await?(this.v=o,this):new __await(o)}function __asyncGenerator(o,e,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=a.apply(o,e||[]),j,h=[];return j=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),ot("next"),ot("throw"),ot("return",et),j[Symbol.asyncIterator]=function(){return this},j;function et(mt){return function(vt){return Promise.resolve(vt).then(mt,gt)}}function ot(mt,vt){c[mt]&&(j[mt]=function(tt){return new Promise(function(bt,ht){h.push([mt,tt,bt,ht])>1||st(mt,tt)})},vt&&(j[mt]=vt(j[mt])))}function st(mt,vt){try{lt(c[mt](vt))}catch(tt){dt(h[0][3],tt)}}function lt(mt){mt.value instanceof __await?Promise.resolve(mt.value.v).then(nt,gt):dt(h[0][2],mt)}function nt(mt){st("next",mt)}function gt(mt){st("throw",mt)}function dt(mt,vt){mt(vt),h.shift(),h.length&&st(h[0][0],h[0][1])}}function __asyncDelegator(o){var e,a;return e={},c("next"),c("throw",function(j){throw j}),c("return"),e[Symbol.iterator]=function(){return this},e;function c(j,h){e[j]=o[j]?function(et){return(a=!a)?{value:__await(o[j](et)),done:!1}:h?h(et):et}:h}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],a;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a);function c(h){a[h]=o[h]&&function(et){return new Promise(function(ot,st){et=o[h](et),j(ot,st,et.done,et.value)})}}function j(h,et,ot,st){Promise.resolve(st).then(function(lt){h({value:lt,done:ot})},et)}}function __makeTemplateObject(o,e){return Object.defineProperty?Object.defineProperty(o,"raw",{value:e}):o.raw=e,o}var __setModuleDefault=Object.create?function(o,e){Object.defineProperty(o,"default",{enumerable:!0,value:e})}:function(o,e){o.default=e},ownKeys=function(o){return ownKeys=Object.getOwnPropertyNames||function(e){var a=[];for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(a[a.length]=c);return a},ownKeys(o)};function __importStar(o){if(o&&o.__esModule)return o;var e={};if(o!=null)for(var a=ownKeys(o),c=0;c<a.length;c++)a[c]!=="default"&&__createBinding(e,o,a[c]);return __setModuleDefault(e,o),e}function __importDefault(o){return o&&o.__esModule?o:{default:o}}function __classPrivateFieldGet(o,e,a,c){if(a==="a"&&!c)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?o!==e||!c:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?c:a==="a"?c.call(o):c?c.value:e.get(o)}function __classPrivateFieldSet(o,e,a,c,j){if(c==="m")throw new TypeError("Private method is not writable");if(c==="a"&&!j)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?o!==e||!j:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return c==="a"?j.call(o,a):j?j.value=a:e.set(o,a),a}function __classPrivateFieldIn(o,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?e===o:o.has(e)}function __addDisposableResource(o,e,a){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var c,j;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");c=e[Symbol.asyncDispose]}if(c===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");c=e[Symbol.dispose],a&&(j=c)}if(typeof c!="function")throw new TypeError("Object not disposable.");j&&(c=function(){try{j.call(this)}catch(h){return Promise.reject(h)}}),o.stack.push({value:e,dispose:c,async:a})}else a&&o.stack.push({async:!0});return e}var _SuppressedError=typeof SuppressedError=="function"?SuppressedError:function(o,e,a){var c=new Error(a);return c.name="SuppressedError",c.error=o,c.suppressed=e,c};function __disposeResources(o){function e(h){o.error=o.hasError?new _SuppressedError(h,o.error,"An error was suppressed during disposal."):h,o.hasError=!0}var a,c=0;function j(){for(;a=o.stack.pop();)try{if(!a.async&&c===1)return c=0,o.stack.push(a),Promise.resolve().then(j);if(a.dispose){var h=a.dispose.call(a.value);if(a.async)return c|=2,Promise.resolve(h).then(j,function(et){return e(et),j()})}else c|=1}catch(et){e(et)}if(c===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return j()}function __rewriteRelativeImportExtension(o,e){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,c,j,h,et){return c?e?".jsx":".js":j&&(!h||!et)?a:j+h+"."+et.toLowerCase()+"js"}):o}const tslib_es6={__extends,__assign,__rest,__decorate,__param,__esDecorate,__runInitializers,__propKey,__setFunctionName,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources,__rewriteRelativeImportExtension},tslib_es6$1=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource,get __assign(){return __assign},__asyncDelegator,__asyncGenerator,__asyncValues,__await,__awaiter,__classPrivateFieldGet,__classPrivateFieldIn,__classPrivateFieldSet,__createBinding,__decorate,__disposeResources,__esDecorate,__exportStar,__extends,__generator,__importDefault,__importStar,__makeTemplateObject,__metadata,__param,__propKey,__read,__rest,__rewriteRelativeImportExtension,__runInitializers,__setFunctionName,__spread,__spreadArray,__spreadArrays,__values,default:tslib_es6},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(tslib_es6$1);var log={};Object.defineProperty(log,"__esModule",{value:!0});log.contextTranslator=log.eventHandler=log.error=log.receiver=log.sender=log.session=log.connection=log.container=void 0;const debugModule=browserExports;log.container=debugModule("rhea-promise:container");log.connection=debugModule("rhea-promise:connection");log.session=debugModule("rhea-promise:session");log.sender=debugModule("rhea-promise:sender");log.receiver=debugModule("rhea-promise:receiver");log.error=debugModule("rhea-promise:error");log.eventHandler=debugModule("rhea-promise:eventhandler");log.contextTranslator=debugModule("rhea-promise:translate");var receiver={},link={},utils={},hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.createAbortError=o.abortErrorName=o.emitEvent=o.parseConnectionString=o.delay=o.isAmqpError=o.messageHeader=o.messageProperties=o.AmqpResponseStatusCode=void 0;const e=log,a=requireEventContext();(function(st){st[st.Continue=100]="Continue",st[st.SwitchingProtocols=101]="SwitchingProtocols",st[st.OK=200]="OK",st[st.Created=201]="Created",st[st.Accepted=202]="Accepted",st[st.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",st[st.NoContent=204]="NoContent",st[st.ResetContent=205]="ResetContent",st[st.PartialContent=206]="PartialContent",st[st.Ambiguous=300]="Ambiguous",st[st.MultipleChoices=300]="MultipleChoices",st[st.Moved=301]="Moved",st[st.MovedPermanently=301]="MovedPermanently",st[st.Found=302]="Found",st[st.Redirect=302]="Redirect",st[st.RedirectMethod=303]="RedirectMethod",st[st.SeeOther=303]="SeeOther",st[st.NotModified=304]="NotModified",st[st.UseProxy=305]="UseProxy",st[st.Unused=306]="Unused",st[st.RedirectKeepVerb=307]="RedirectKeepVerb",st[st.TemporaryRedirect=307]="TemporaryRedirect",st[st.BadRequest=400]="BadRequest",st[st.Unauthorized=401]="Unauthorized",st[st.PaymentRequired=402]="PaymentRequired",st[st.Forbidden=403]="Forbidden",st[st.NotFound=404]="NotFound",st[st.MethodNotAllowed=405]="MethodNotAllowed",st[st.NotAcceptable=406]="NotAcceptable",st[st.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",st[st.RequestTimeout=408]="RequestTimeout",st[st.Conflict=409]="Conflict",st[st.Gone=410]="Gone",st[st.LengthRequired=411]="LengthRequired",st[st.PreconditionFailed=412]="PreconditionFailed",st[st.RequestEntityTooLarge=413]="RequestEntityTooLarge",st[st.RequestUriTooLong=414]="RequestUriTooLong",st[st.UnsupportedMediaType=415]="UnsupportedMediaType",st[st.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable",st[st.ExpectationFailed=417]="ExpectationFailed",st[st.UpgradeRequired=426]="UpgradeRequired",st[st.InternalServerError=500]="InternalServerError",st[st.NotImplemented=501]="NotImplemented",st[st.BadGateway=502]="BadGateway",st[st.ServiceUnavailable=503]="ServiceUnavailable",st[st.GatewayTimeout=504]="GatewayTimeout",st[st.HttpVersionNotSupported=505]="HttpVersionNotSupported"})(o.AmqpResponseStatusCode||(o.AmqpResponseStatusCode={})),o.messageProperties=["message_id","reply_to","to","correlation_id","content_type","absolute_expiry_time","group_id","group_sequence","reply_to_group_id","content_encoding","creation_time","subject","user_id"],o.messageHeader=["first_acquirer","delivery_count","ttl","durable","priority"];function c(st){if(!st||typeof st!="object")throw new Error("err is a required parameter and must be of type 'object'.");let lt=!1;return(st.condition&&typeof st.condition=="string"&&st.description&&typeof st.description=="string"||st.value&&Array.isArray(st.value)||st.constructor&&st.constructor.name==="c")&&(lt=!0),lt}o.isAmqpError=c;function j(st,lt){return new Promise(nt=>setTimeout(()=>nt(lt),st))}o.delay=j;function h(st,lt){lt||(lt={});const nt=lt.entitySeperator||";",gt=lt.keyValueSeparator||"=";return st.split(nt).reduce((dt,mt)=>{const vt=mt.indexOf(gt);return Object.assign(Object.assign({},dt),{[mt.substring(0,vt)]:mt.substring(vt+1)})},{})}o.parseConnectionString=h;function et(st){const lt=()=>{const nt=st.emitter&&(st.emitter.id||st.emitter.name);e[st.emitterType]("[%s] %s '%s' got event: '%s'. Re-emitting the translated context.",st.connectionId,st.emitterType,nt,st.eventName),st.emitter.emit(st.eventName,a.EventContext.translate(st.rheaContext,st.emitter,st.eventName))};st.eventName.indexOf("error")!==-1&&st.emitter.actionInitiated>0?(e[st.emitterType]("[%s] %s got event: '%s'. Will re-emit in the next tick, since this happened before the promise for create/close was resolved.",st.connectionId,st.emitterType,st.eventName),setTimeout(lt)):lt()}o.emitEvent=et,o.abortErrorName="AbortError";function ot(){const st=new Error("The operation was aborted.");return st.name=o.abortErrorName,st}o.createAbortError=ot}(utils)),utils}var entity={};Object.defineProperty(entity,"__esModule",{value:!0});entity.Entity=void 0;const events_1=eventsExports;class Entity extends events_1.EventEmitter{constructor(){super(),this.actionInitiated=0}}entity.Entity=Entity;var errorDefinitions={};Object.defineProperty(errorDefinitions,"__esModule",{value:!0});errorDefinitions.SendOperationFailedError=errorDefinitions.InsufficientCreditError=errorDefinitions.OperationTimeoutError=void 0;class OperationTimeoutError extends Error{constructor(e){super(e),this.name="OperationTimeoutError"}}errorDefinitions.OperationTimeoutError=OperationTimeoutError;class InsufficientCreditError extends Error{constructor(e){super(e),this.name="InsufficientCreditError"}}errorDefinitions.InsufficientCreditError=InsufficientCreditError;class SendOperationFailedError extends Error{constructor(e,a,c){super(e),this.message=e,this.code=a,this.innerError=c,this.name="SendOperationFailedError",this.code=a,this.innerError=c}}errorDefinitions.SendOperationFailedError=SendOperationFailedError;var hasRequiredLink;function requireLink(){return hasRequiredLink||(hasRequiredLink=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Link=o.LinkType=void 0;const e=require$$0,a=log,c=container$1,j=requireUtils(),h=entity,et=errorDefinitions;var ot;(function(lt){lt.sender="sender",lt.receiver="receiver"})(ot=o.LinkType||(o.LinkType={}));class st extends h.Entity{constructor(nt,gt,dt,mt){super(),this.type=nt,this._session=gt,this._link=dt,this.linkOptions=mt,this._initializeEventListeners()}get name(){return this._link.name}get error(){return this._link.error}get properties(){return this._link.properties}get sendSettleMode(){return this._link.snd_settle_mode}get receiveSettleMode(){return this._link.rcv_settle_mode}get source(){return this._link.source}set source(nt){this._link.set_source(nt)}get target(){return this._link.target}set target(nt){this._link.set_source(nt)}get maxMessageSize(){return this._link.max_message_size}get offeredCapabilities(){return this._link.offered_capabilities}get desiredCapabilities(){return this._link.desired_capabilities}get address(){return this.source.address}get credit(){return this._link.credit}get session(){return this._session}get connection(){return this._session.connection}isOpen(){let nt=!1;return this._session.isOpen()&&this._link.is_open()&&(nt=!0),nt}isRemoteOpen(){return this._link.is_remote_open()}hasCredit(){return this._link.has_credit()}isSender(){return this._link.is_sender()}isReceiver(){return this._link.is_receiver()}isClosed(){return this._link.is_closed()}isItselfClosed(){return this._link.is_itself_closed()}isSessionClosed(){return this._session.isClosed()}isSessionItselfClosed(){return this._session.isItselfClosed()}remove(){this._link&&(this.removeAllListeners(),this._link.removeAllListeners(),this._link.remove()),this._session&&this._session.remove()}close(nt){return e.__awaiter(this,void 0,void 0,function*(){nt||(nt={}),nt.closeSession==null&&(nt.closeSession=!0);const gt=new Promise((dt,mt)=>{if(a.error("[%s] The %s '%s' on amqp session '%s' is open ? -> %s",this.connection.id,this.type,this.name,this.session.id,this.isOpen()),this.isOpen()){const vt=this.type===ot.sender?c.SenderEvents.senderError:c.ReceiverEvents.receiverError,tt=this.type===ot.sender?c.SenderEvents.senderClose:c.ReceiverEvents.receiverClose,bt=()=>{clearTimeout(ft),this.actionInitiated--,this._link.removeListener(vt,St),this._link.removeListener(tt,ht),this._link.connection.removeListener(c.ConnectionEvents.disconnected,At)},ht=_t=>(bt(),a[this.type]("[%s] Resolving the promise as the %s '%s' on amqp session '%s' has been closed.",this.connection.id,this.type,this.name,this.session.id),dt()),St=_t=>{bt();let Rt=_t.session.error;return this.type===ot.sender&&_t.sender&&_t.sender.error?Rt=_t.sender.error:this.type===ot.receiver&&_t.receiver&&_t.receiver.error&&(Rt=_t.receiver.error),a.error("[%s] Error occurred while closing %s '%s' on amqp session '%s': %O.",this.connection.id,this.type,this.name,this.session.id,Rt),mt(Rt)},At=_t=>{bt();const Rt=_t.connection&&_t.connection.error?_t.connection.error:_t.error;a.error("[%s] Connection got disconnected while closing amqp %s '%s' on amqp session '%s': %O.",this.connection.id,this.type,this.name,this.session.id,Rt)},Tt=()=>{bt();const _t=`Unable to close the ${this.type} '${this.name}' on amqp session '${this.session.id}' due to operation timeout.`;return a.error("[%s] %s",this.connection.id,_t),mt(new et.OperationTimeoutError(_t))};this._link.once(tt,ht),this._link.once(vt,St),this._link.connection.once(c.ConnectionEvents.disconnected,At);const ft=setTimeout(Tt,this.connection.options.operationTimeoutInSeconds*1e3);this._link.close(),this.actionInitiated++}else return dt()});try{yield gt}finally{this.removeAllListeners()}if(nt.closeSession)return a[this.type]("[%s] %s '%s' has been closed, now closing it's amqp session '%s'.",this.connection.id,this.type,this.name,this.session.id),this._session.close()})}_initializeEventListeners(){const nt=this.type===ot.sender?c.SenderEvents:c.ReceiverEvents;for(const gt of Object.keys(nt))this._link.on(nt[gt],dt=>{const mt={rheaContext:dt,emitter:this,eventName:nt[gt],emitterType:this.type,connectionId:this.connection.id};(0,j.emitEvent)(mt)});typeof this._link.eventNames=="function"&&a.eventHandler("[%s] rhea-promise '%s' object is listening for events: %o emitted by rhea's '%s' object.",this.connection.id,this.type,this._link.eventNames(),this.type),typeof this._link.listenerCount=="function"&&a.eventHandler("[%s] ListenerCount for event '%s_error' on rhea's '%s' object is: %d.",this.connection.id,this.type,this.type,this._link.listenerCount(`${this.type}_error`))}}o.Link=st}(link)),link}var hasRequiredReceiver;function requireReceiver(){if(hasRequiredReceiver)return receiver;hasRequiredReceiver=1,Object.defineProperty(receiver,"__esModule",{value:!0}),receiver.Receiver=void 0;const o=requireLink();class e extends o.Link{constructor(c,j,h){super(o.LinkType.receiver,c,j,h)}get drain(){return this._link.drain}set drain(c){this._link.drain=c}addCredit(c){this._link.add_credit(c)}drainCredit(){this._link.drain_credit()}setCreditWindow(c){this._link.set_credit_window(c)}}return receiver.Receiver=e,receiver}var sender={},hasRequiredSender;function requireSender(){if(hasRequiredSender)return sender;hasRequiredSender=1,Object.defineProperty(sender,"__esModule",{value:!0}),sender.Sender=sender.SenderSendOptions=sender.BaseSender=void 0;const o=requireLink();class e extends o.Link{constructor(h,et,ot){super(o.LinkType.sender,h,et,ot)}setDrained(h){this._link.set_drained(h)}sendable(){return this._link.sendable()}}sender.BaseSender=e;class a{}sender.SenderSendOptions=a;class c extends e{constructor(h,et,ot){super(h,et,ot)}send(h,et={}){return this._link.send(h,et.tag,et.format)}}return sender.Sender=c,sender}var awaitableSender={},hasRequiredAwaitableSender;function requireAwaitableSender(){if(hasRequiredAwaitableSender)return awaitableSender;hasRequiredAwaitableSender=1,Object.defineProperty(awaitableSender,"__esModule",{value:!0}),awaitableSender.AwaitableSender=void 0;const o=container$1,e=log,a=requireSender(),c=container$1,j=errorDefinitions,h=requireUtils();class et extends a.BaseSender{constructor(st,lt,nt={}){super(st,lt,nt),this.deliveryDispositionMap=new Map;const gt=vt=>{const tt=vt.id;if(this.deliveryDispositionMap.has(vt.id)){const bt=this.deliveryDispositionMap.get(tt);clearTimeout(bt.timer);const ht=this.deliveryDispositionMap.delete(tt);return e.sender("[%s] Event: 'Accepted', Successfully deleted the delivery with id %d from the map of sender '%s' on amqp session '%s' and cleared the timer: %s.",this.connection.id,tt,this.name,this.session.id,ht),bt.resolve(vt)}},dt=(vt,tt,bt)=>{if(this.deliveryDispositionMap.has(tt)){const ht=this.deliveryDispositionMap.get(tt);clearTimeout(ht.timer);const St=this.deliveryDispositionMap.delete(tt);e.sender("[%s] Event: '%s', Successfully deleted the delivery with id %d from the  map of sender '%s' on amqp session '%s' and cleared the timer: %s.",this.connection.id,vt,tt,this.name,this.session.id,St);const At=`Sender '${this.name}' on amqp session '${this.session.id}', received a '${vt}' disposition. Hence we are rejecting the promise.`,Tt=new j.SendOperationFailedError(At,vt,bt);return e.error("[%s] %s",this.connection.id,At),ht.reject(Tt)}},mt=(vt,tt)=>{for(const bt of this.deliveryDispositionMap.keys())dt(vt,bt,tt)};this.on(c.SenderEvents.accepted,vt=>{gt(vt.delivery)}),this.on(c.SenderEvents.rejected,vt=>{const tt=vt.delivery;dt(c.SenderEvents.rejected,tt.id,tt.remote_state&&tt.remote_state.error)}),this.on(c.SenderEvents.released,vt=>{const tt=vt.delivery;dt(c.SenderEvents.released,tt.id,tt.remote_state&&tt.remote_state.error)}),this.on(c.SenderEvents.modified,vt=>{const tt=vt.delivery;dt(c.SenderEvents.modified,tt.id,tt.remote_state&&tt.remote_state.error)}),nt.onError||this.on(c.SenderEvents.senderError,vt=>{mt(c.SenderEvents.senderError,vt.sender.error)}),nt.onSessionError||this.session.on(o.SessionEvents.sessionError,vt=>{mt(o.SessionEvents.sessionError,vt.session.error)})}send(st,lt={}){return new Promise((nt,gt)=>{e.sender("[%s] Sender '%s' on amqp session '%s', credit: %d available: %d",this.connection.id,this.name,this.session.id,this.credit,this.session.outgoing.available());const dt=lt&&lt.abortSignal,mt=lt.timeoutInSeconds||20;if(dt&&dt.aborted){const vt=(0,h.createAbortError)();return e.error("[%s] %s",this.connection.id,vt.message),gt(vt)}if(this.sendable()){const vt=setTimeout(()=>{this.deliveryDispositionMap.delete(ht.id);const St=`Sender '${this.name}' on amqp session '${this.session.id}', with address '${this.address}' was not able to send the message with delivery id ${ht.id} right now, due to operation timeout.`;return e.error("[%s] %s",this.connection.id,St),gt(new j.OperationTimeoutError(St))},mt*1e3),tt=()=>{if(this.deliveryDispositionMap.has(ht.id)){const St=this.deliveryDispositionMap.get(ht.id);clearTimeout(St.timer);const At=this.deliveryDispositionMap.delete(ht.id);e.sender("[%s] Event: 'abort', Successfully deleted the delivery with id %d from the  map of sender '%s' on amqp session '%s' and cleared the timer: %s.",this.connection.id,ht.id,this.name,this.session.id,At);const Tt=(0,h.createAbortError)();e.error("[%s] %s",this.connection.id,Tt.message),St.reject(Tt)}},bt=()=>{dt&&dt.removeEventListener("abort",tt)},ht=this._link.send(st,lt.tag,lt.format);this.deliveryDispositionMap.set(ht.id,{resolve:St=>{nt(St),bt()},reject:St=>{gt(St),bt()},timer:vt}),dt&&dt.addEventListener("abort",tt)}else{const vt=`Sender "${this.name}" on amqp session "${this.session.id}", with address ${this.address} cannot send the message right now as it does not have enough credit. Please try later.`;e.error("[%s] %s",this.connection.id,vt),gt(new j.InsufficientCreditError(vt))}})}}return awaitableSender.AwaitableSender=et,awaitableSender}var hasRequiredSession;function requireSession(){if(hasRequiredSession)return session;hasRequiredSession=1,Object.defineProperty(session,"__esModule",{value:!0}),session.Session=void 0;const o=require$$0,e=log,a=requireReceiver(),c=requireSender(),j=container$1,h=requireUtils(),et=entity,ot=errorDefinitions,st=requireAwaitableSender();var lt;(function(gt){gt.sender="sender",gt.AwaitableSender="AwaitableSender"})(lt||(lt={}));class nt extends et.Entity{constructor(dt,mt){super(),this._connection=dt,this._session=mt,this._initializeEventListeners()}get connection(){return this._connection}get incoming(){return this._session.incoming}get outgoing(){return this._session.outgoing}get error(){return this._session.error}get id(){let dt="";const mt=this._session;return mt.local&&(dt+=`local-${mt.local.channel}_`),mt.remote&&(dt+=`remote-${mt.remote.channel}_`),dt&&(dt+=`${this._connection.id}`),dt}isOpen(){let dt=!1;return this._connection.isOpen()&&this._session.is_open()&&(dt=!0),dt}isClosed(){return this._session.is_closed()}isItselfClosed(){return this._session.is_itself_closed()}remove(){this._session&&(this.removeAllListeners(),this._session.removeAllListeners(),this._session.remove())}begin(){this._session&&this._session.begin()}close(dt){return o.__awaiter(this,void 0,void 0,function*(){const mt=new Promise((vt,tt)=>{if(e.error("[%s] The amqp session '%s' is open ? -> %s",this.connection.id,this.id,this.isOpen()),this.isOpen()){const bt=dt&&dt.abortSignal,ht=()=>{clearTimeout(Rt),this.actionInitiated--,this._session.removeListener(j.SessionEvents.sessionError,At),this._session.removeListener(j.SessionEvents.sessionClose,St),this._session.connection.removeListener(j.ConnectionEvents.disconnected,Tt),bt&&bt.removeEventListener("abort",ft)},St=Mt=>(ht(),e.session("[%s] Resolving the promise as the amqp session '%s' has been closed.",this.connection.id,this.id),vt()),At=Mt=>{ht(),e.error("[%s] Error occurred while closing amqp session '%s'.",this.connection.id,this.id,Mt.session.error),tt(Mt.session.error)},Tt=Mt=>{ht();const Et=Mt.connection&&Mt.connection.error?Mt.connection.error:Mt.error;e.error("[%s] Connection got disconnected while closing amqp session '%s': %O.",this.connection.id,this.id,Et)},ft=()=>{ht();const Mt=(0,h.createAbortError)();return e.error("[%s] [%s]",this.connection.id,Mt.message),tt(Mt)},_t=()=>{ht();const Mt=`Unable to close the amqp session ${this.id} due to operation timeout.`;e.error("[%s] %s",this.connection.id,Mt),tt(new ot.OperationTimeoutError(Mt))};this._session.once(j.SessionEvents.sessionClose,St),this._session.once(j.SessionEvents.sessionError,At),this._session.connection.once(j.ConnectionEvents.disconnected,Tt),e.session("[%s] Calling session.close() for amqp session '%s'.",this.connection.id,this.id);const Rt=setTimeout(_t,this.connection.options.operationTimeoutInSeconds*1e3);this._session.close(),this.actionInitiated++,bt&&(bt.aborted?ft():bt.addEventListener("abort",ft))}else return vt()});try{yield mt}finally{this.removeAllListeners()}})}createReceiver(dt){return new Promise((mt,vt)=>{if(dt&&(dt.onMessage&&!dt.onError||dt.onError&&!dt.onMessage)&&dt.credit_window!==0)return vt(new Error("Either provide both 'onMessage' and 'onError' handlers, or please set the credit_window to 0, if you want to provide only the 'onError' handler. This ensures no messages are lost between the receiver getting created  and the 'onMessage' handler being added."));const tt=dt&&dt.abortSignal;let bt;if(tt){const Et=()=>{const kt=(0,h.createAbortError)();return e.error("[%s] [%s]",this.connection.id,kt.message),vt(kt)};if(bt=()=>(At(),ht.is_open()?ht.close():ht.is_closed()||ht.once(j.ReceiverEvents.receiverOpen,()=>{ht.close()}),Et()),tt.aborted)return Et();tt.addEventListener("abort",bt)}dt&&dt.onSessionError&&(this.on(j.SessionEvents.sessionError,dt.onSessionError),e.session("[%s] Added event handler for event '%s' on rhea-promise 'session: %s', while creating the 'receiver'.",this.connection.id,j.SessionEvents.sessionError,this.id)),dt&&dt.onSessionClose&&(this.on(j.SessionEvents.sessionClose,dt.onSessionClose),e.session("[%s] Added event handler for event '%s' on rhea-promise 'session: %s',  while creating the 'receiver'.",this.connection.id,j.SessionEvents.sessionClose,this.id));const ht=this._session.attach_receiver(dt),St=new a.Receiver(this,ht,dt);St.actionInitiated++,dt&&dt.onMessage&&(St.on(j.ReceiverEvents.message,dt.onMessage),e.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,j.ReceiverEvents.message)),dt&&dt.onError&&(St.on(j.ReceiverEvents.receiverError,dt.onError),e.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,j.ReceiverEvents.receiverError)),dt&&dt.onClose&&(St.on(j.ReceiverEvents.receiverClose,dt.onClose),e.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,j.ReceiverEvents.receiverClose)),dt&&dt.onSettled&&(St.on(j.ReceiverEvents.settled,dt.onSettled),e.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,j.ReceiverEvents.settled));const At=()=>{clearTimeout(Mt),St.actionInitiated--,ht.removeListener(j.ReceiverEvents.receiverOpen,Tt),ht.removeListener(j.ReceiverEvents.receiverClose,ft),ht.session.connection.removeListener(j.ConnectionEvents.disconnected,_t),tt&&tt.removeEventListener("abort",bt)},Tt=Et=>(At(),e.receiver("[%s] Resolving the promise with amqp receiver '%s' on amqp session '%s'.",this.connection.id,St.name,this.id),mt(St)),ft=Et=>(At(),e.error("[%s] Error occurred while creating the amqp receiver '%s' on amqp session '%s' over amqp connection: %O.",this.connection.id,St.name,this.id,Et.receiver.error),vt(Et.receiver.error)),_t=Et=>{At();const kt=Et.connection&&Et.connection.error?Et.connection.error:Et.error;return e.error("[%s] Connection got disconnected while creating amqp receiver '%s' on amqp session '%s': %O.",this.connection.id,St.name,this.id,kt),vt(kt)},Rt=()=>{var Et;At();const kt=`Unable to create the amqp receiver '${St.name}' on amqp session '${this.id}' due to operation timeout.`;e.error("[%s] %s",this.connection.id,kt);const at=dt;return!((Et=at==null?void 0:at.session)===null||Et===void 0)&&Et.createReceiver?St.close({closeSession:!1}).then(()=>{St.remove()}):St.close({closeSession:!0}).then(()=>{St.remove()}),vt(new ot.OperationTimeoutError(kt))};ht.once(j.ReceiverEvents.receiverOpen,Tt),ht.once(j.ReceiverEvents.receiverClose,ft),ht.session.connection.on(j.ConnectionEvents.disconnected,_t);const Mt=setTimeout(Rt,this.connection.options.operationTimeoutInSeconds*1e3)})}createSender(dt){return this._createSender(lt.sender,dt)}createAwaitableSender(dt){return this._createSender(lt.AwaitableSender,dt)}_createSender(dt,mt){return new Promise((vt,tt)=>{const bt=mt&&mt.abortSignal;let ht;if(bt){const kt=()=>{const at=(0,h.createAbortError)();return e.error("[%s] [%s]",this.connection.id,at.message),tt(at)};if(ht=()=>(Tt(),St.is_open()?St.close():St.is_closed()||St.once(j.SenderEvents.senderOpen,()=>{St.close()}),kt()),bt.aborted)return kt();bt.addEventListener("abort",ht)}mt&&mt.onSessionError&&(this.on(j.SessionEvents.sessionError,mt.onSessionError),e.session("[%s] Added event handler for event '%s' on rhea-promise 'session: %s', while creating the sender.",this.connection.id,j.SessionEvents.sessionError,this.id)),mt&&mt.onSessionClose&&(this.on(j.SessionEvents.sessionClose,mt.onSessionClose),e.session("[%s] Added event handler for event '%s' on rhea-promise 'session: %s', while creating the sender.",this.connection.id,j.SessionEvents.sessionClose,this.id));const St=this._session.attach_sender(mt);let At;dt===lt.sender?At=new c.Sender(this,St,mt):At=new st.AwaitableSender(this,St,mt),At.actionInitiated++,mt&&(mt.onError&&At.on(j.SenderEvents.senderError,mt.onError),mt.onClose&&At.on(j.SenderEvents.senderClose,mt.onClose),dt===lt.sender&&(mt.onAccepted&&At.on(j.SenderEvents.accepted,mt.onAccepted),mt.onRejected&&At.on(j.SenderEvents.rejected,mt.onRejected),mt.onReleased&&At.on(j.SenderEvents.released,mt.onReleased),mt.onModified&&At.on(j.SenderEvents.modified,mt.onModified)));const Tt=()=>{clearTimeout(Et),At.actionInitiated--,St.removeListener(j.SenderEvents.senderOpen,ft),St.removeListener(j.SenderEvents.senderClose,_t),St.session.connection.removeListener(j.ConnectionEvents.disconnected,Rt),bt&&bt.removeEventListener("abort",ht)},ft=kt=>(Tt(),e.sender("[%s] Resolving the promise with amqp sender '%s' on amqp session '%s'.",this.connection.id,At.name,this.id),vt(At)),_t=kt=>(Tt(),e.error("[%s] Error occurred while creating the amqp sender '%s' on amqp session '%s' over amqp connection: %O.",this.connection.id,At.name,this.id,kt.sender.error),tt(kt.sender.error)),Rt=kt=>{Tt();const at=kt.connection&&kt.connection.error?kt.connection.error:kt.error;return e.error("[%s] Connection got disconnected while creating amqp sender '%s' on amqp session '%s': %O.",this.connection.id,At.name,this.id,at),tt(at)},Mt=()=>{Tt();const kt=`Unable to create the amqp sender '${At.name}' on amqp session '${this.id}' due to operation timeout.`;return e.error("[%s] %s",this.connection.id,kt),tt(new ot.OperationTimeoutError(kt))};St.once(j.SenderEvents.sendable,ft),St.once(j.SenderEvents.senderClose,_t),St.session.connection.on(j.ConnectionEvents.disconnected,Rt);const Et=setTimeout(Mt,this.connection.options.operationTimeoutInSeconds*1e3)})}_initializeEventListeners(){for(const dt of Object.keys(j.SessionEvents))this._session.on(j.SessionEvents[dt],mt=>{const vt={rheaContext:mt,emitter:this,eventName:j.SessionEvents[dt],emitterType:"session",connectionId:this.connection.id};(0,h.emitEvent)(vt)});this._session.on(j.SenderEvents.senderError,dt=>{const mt={rheaContext:dt,emitter:this,eventName:j.SenderEvents.senderError,emitterType:"session",connectionId:this.connection.id};(0,h.emitEvent)(mt)}),this._session.on(j.SenderEvents.senderClose,dt=>{const mt={rheaContext:dt,emitter:this,eventName:j.SenderEvents.senderClose,emitterType:"session",connectionId:this.connection.id};(0,h.emitEvent)(mt)}),this._session.on(j.ReceiverEvents.receiverError,dt=>{const mt={rheaContext:dt,emitter:this,eventName:j.ReceiverEvents.receiverError,emitterType:"session",connectionId:this.connection.id};(0,h.emitEvent)(mt)}),this._session.on(j.ReceiverEvents.receiverClose,dt=>{const mt={rheaContext:dt,emitter:this,eventName:j.ReceiverEvents.receiverClose,emitterType:"session",connectionId:this.connection.id};(0,h.emitEvent)(mt)}),typeof this._session.eventNames=="function"&&e.eventHandler("[%s] rhea-promise 'session' object '%s' is listening for events: %o emitted by rhea's 'session' object.",this.connection.id,this.id,this._session.eventNames())}}return session.Session=nt,session}var hasRequiredEventContext;function requireEventContext(){return hasRequiredEventContext||(hasRequiredEventContext=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.EventContext=void 0;const e=requireSession(),a=requireLink(),c=log;function j(h){return h&&h.connection}(function(h){function et(ot,st,lt){const nt=j(st)?st.connection:st;c.contextTranslator("[%s] Translating the context for event: '%s'.",nt.id,lt);const gt=Object.assign({_context:ot},ot);return gt.connection=nt,gt.container=nt.container,st instanceof a.Link?(gt.session=st.session,st.type===a.LinkType.receiver&&ot.receiver?gt.receiver=st:st.type===a.LinkType.sender&&ot.sender&&(gt.sender=st)):st instanceof e.Session&&(gt.session=st),gt}h.translate=et})(o.EventContext||(o.EventContext={}))}(eventContext)),eventContext}var container={},connection={},constants={};Object.defineProperty(constants,"__esModule",{value:!0});constants.defaultOperationTimeoutInSeconds=void 0;constants.defaultOperationTimeoutInSeconds=60;var hasRequiredConnection;function requireConnection(){if(hasRequiredConnection)return connection;hasRequiredConnection=1,Object.defineProperty(connection,"__esModule",{value:!0}),connection.Connection=void 0;const o=require$$0,e=log,a=requireSession(),c=requireContainer(),j=constants,h=requireUtils(),et=container$1,ot=entity,st=errorDefinitions;function lt(dt){return dt&&typeof dt.container=="object"&&typeof dt.rheaConnection=="object"}const nt=1e3;class gt extends ot.Entity{constructor(mt){var vt;if(super(),lt(mt))this._connection=mt.rheaConnection,this.container=mt.container;else{let tt=mt;if(tt||(tt={transport:"tls"}),tt.operationTimeoutInSeconds||(tt.operationTimeoutInSeconds=j.defaultOperationTimeoutInSeconds),tt.webSocketOptions){const bt=(0,et.websocket_connect)(tt.webSocketOptions.webSocket);tt.connection_details=bt(tt.webSocketOptions.url,tt.webSocketOptions.protocol,tt.webSocketOptions.options)}this._connection=(0,et.create_connection)(tt),this.container=c.Container.copyFromContainerInstance(this._connection.container),mt=tt}this.options=this._connection.options,this.options.operationTimeoutInSeconds=(vt=mt==null?void 0:mt.operationTimeoutInSeconds)!==null&&vt!==void 0?vt:j.defaultOperationTimeoutInSeconds,this._initializeEventListeners(),this._connection.setMaxListeners(nt)}get id(){return this._connection.options.id}get properties(){return this._connection.properties}get maxFrameSize(){return this._connection.max_frame_size}get idleTimeout(){return this._connection.idle_time_out}get channelMax(){return this._connection.channel_max}get error(){return this._connection.error}removeSession(mt){return mt.remove()}open(mt){return new Promise((vt,tt)=>{if(this.isOpen())return vt(this);{const bt=mt&&mt.abortSignal,ht=()=>{clearTimeout(_t),this.actionInitiated--,this._connection.removeListener(et.ConnectionEvents.connectionOpen,St),this._connection.removeListener(et.ConnectionEvents.connectionClose,At),this._connection.removeListener(et.ConnectionEvents.disconnected,At),bt&&bt.removeEventListener("abort",Tt)},St=Rt=>(ht(),e.connection("[%s] Resolving the promise with amqp connection.",this.id),vt(this)),At=Rt=>{ht();const Mt=Rt.error||Rt.connection.error||Error("Failed to connect");return e.error("[%s] Error occurred while establishing amqp connection: %O",this.id,Mt),tt(Mt)},Tt=()=>{ht(),this._connection.close();const Rt=(0,h.createAbortError)();return e.error("[%s] [%s]",this.id,Rt.message),tt(Rt)},ft=()=>{ht();const Rt=`Unable to open the amqp connection "${this.id}" due to operation timeout.`;return e.error("[%s] %s",this.id,Rt),tt(new Error(Rt))};this._connection.once(et.ConnectionEvents.connectionOpen,St),this._connection.once(et.ConnectionEvents.connectionClose,At),this._connection.once(et.ConnectionEvents.disconnected,At);const _t=setTimeout(ft,this.options.operationTimeoutInSeconds*1e3);e.connection("[%s] Trying to create a new amqp connection.",this.id),this._connection.connect(),this.actionInitiated++,bt&&(bt.aborted?Tt():bt.addEventListener("abort",Tt))}})}close(mt){return new Promise((vt,tt)=>{if(e.error("[%s] The connection is open ? -> %s",this.id,this.isOpen()),this.isOpen()){const bt=mt&&mt.abortSignal,ht=()=>{clearTimeout(Rt),this.actionInitiated--,this._connection.removeListener(et.ConnectionEvents.connectionError,At),this._connection.removeListener(et.ConnectionEvents.connectionClose,St),this._connection.removeListener(et.ConnectionEvents.disconnected,Tt),bt&&bt.removeEventListener("abort",ft)},St=Mt=>(ht(),e.connection("[%s] Resolving the promise as the connection has been successfully closed.",this.id),vt()),At=Mt=>(ht(),e.error("[%s] Error occurred while closing amqp connection: %O.",this.id,Mt.connection.error),tt(Mt.connection.error)),Tt=Mt=>{ht();const Et=Mt.connection&&Mt.connection.error?Mt.connection.error:Mt.error;e.error("[%s] Connection got disconnected while closing itself: %O.",this.id,Et)},ft=()=>{ht();const Mt=(0,h.createAbortError)();return e.error("[%s] [%s]",this.id,Mt.message),tt(Mt)},_t=()=>{ht();const Mt=`Unable to close the amqp connection "${this.id}" due to operation timeout.`;return e.error("[%s] %s",this.id,Mt),tt(new Error(Mt))};this._connection.once(et.ConnectionEvents.connectionClose,St),this._connection.once(et.ConnectionEvents.connectionError,At),this._connection.once(et.ConnectionEvents.disconnected,Tt);const Rt=setTimeout(_t,this.options.operationTimeoutInSeconds*1e3);this._connection.close(),this.actionInitiated++,bt&&(bt.aborted?ft():bt.addEventListener("abort",ft))}else return vt()})}isOpen(){let mt=!1;return this._connection&&this._connection.is_open&&this._connection.is_open()&&(mt=!0),mt}removeAllSessions(){this._connection&&this._connection.remove_all_sessions()}isRemoteOpen(){return this._connection.is_remote_open()}getError(){return this._connection.get_error()}getPeerCertificate(){return this._connection.get_peer_certificate()}getTlsSocket(){return this._connection.get_tls_socket()}wasCloseInitiated(){return this._connection.is_closed()}createSession(mt){return new Promise((vt,tt)=>{const bt=mt&&mt.abortSignal;let ht;if(bt){const kt=()=>{const at=(0,h.createAbortError)();return e.error("[%s] [%s]",this.id,at.message),tt(at)};if(ht=()=>(Tt(),St.is_open()?St.close():St.is_closed()||St.once(et.SessionEvents.sessionOpen,()=>{St.close()}),kt()),bt.aborted)return kt();bt.addEventListener("abort",ht)}const St=this._connection.create_session(),At=new a.Session(this,St);At.actionInitiated++;const Tt=()=>{clearTimeout(Et),At.actionInitiated--,St.removeListener(et.SessionEvents.sessionOpen,ft),St.removeListener(et.SessionEvents.sessionClose,_t),St.connection.removeListener(et.ConnectionEvents.disconnected,Rt),bt&&bt.removeEventListener("abort",ht)},ft=kt=>(Tt(),e.session("[%s] Resolving the promise with amqp session '%s'.",this.id,At.id),vt(At)),_t=kt=>(Tt(),e.error("[%s] Error occurred while establishing a session over amqp connection: %O.",this.id,kt.session.error),tt(kt.session.error)),Rt=kt=>{Tt();const at=kt.connection&&kt.connection.error?kt.connection.error:kt.error;return e.error("[%s] Connection got disconnected while creating amqp session '%s': %O.",this.id,At.id,at),tt(at)},Mt=()=>{Tt();const kt="Unable to create the amqp session due to operation timeout.";return e.error("[%s] %s",this.id,kt),tt(new st.OperationTimeoutError(kt))};St.once(et.SessionEvents.sessionOpen,ft),St.once(et.SessionEvents.sessionClose,_t),St.connection.once(et.ConnectionEvents.disconnected,Rt),e.session("[%s] Calling amqp session.begin().",this.id);const Et=setTimeout(Mt,this.options.operationTimeoutInSeconds*1e3);St.begin()})}createSender(mt){return o.__awaiter(this,void 0,void 0,function*(){return mt&&mt.session&&mt.session.createSender?mt.session.createSender(mt):(yield this.createSession({abortSignal:mt&&mt.abortSignal})).createSender(mt)})}createAwaitableSender(mt){return o.__awaiter(this,void 0,void 0,function*(){return mt&&mt.session&&mt.session.createAwaitableSender?mt.session.createAwaitableSender(mt):(yield this.createSession({abortSignal:mt&&mt.abortSignal})).createAwaitableSender(mt)})}createReceiver(mt){return o.__awaiter(this,void 0,void 0,function*(){return mt&&mt.session&&mt.session.createReceiver?mt.session.createReceiver(mt):(yield this.createSession({abortSignal:mt&&mt.abortSignal})).createReceiver(mt)})}createRequestResponseLink(mt,vt,tt={}){return o.__awaiter(this,void 0,void 0,function*(){if(!mt)throw new Error("Please provide sender options.");if(!vt)throw new Error("Please provide receiver options.");const{session:bt,abortSignal:ht}=tt,St=bt||(yield this.createSession({abortSignal:ht})),[At,Tt]=yield Promise.all([St.createSender(Object.assign(Object.assign({},mt),{abortSignal:ht})),St.createReceiver(Object.assign(Object.assign({},vt),{abortSignal:ht}))]);return e.connection("[%s] Successfully created the sender '%s' and receiver '%s' on the same amqp session '%s'.",this.id,At.name,Tt.name,St.id),{session:St,sender:At,receiver:Tt}})}_initializeEventListeners(){for(const mt of Object.keys(et.ConnectionEvents))this._connection.on(et.ConnectionEvents[mt],vt=>{const tt={rheaContext:vt,emitter:this,eventName:et.ConnectionEvents[mt],emitterType:"connection",connectionId:this.id};et.ConnectionEvents[mt]===et.ConnectionEvents.protocolError&&e.connection("[%s] ProtocolError is: %O.",this.id,vt),(0,h.emitEvent)(tt)});this._connection.on(et.SenderEvents.senderError,mt=>{const vt={rheaContext:mt,emitter:this,eventName:et.SenderEvents.senderError,emitterType:"connection",connectionId:this.id};(0,h.emitEvent)(vt)}),this._connection.on(et.SenderEvents.senderClose,mt=>{const vt={rheaContext:mt,emitter:this,eventName:et.SenderEvents.senderClose,emitterType:"connection",connectionId:this.id};(0,h.emitEvent)(vt)}),this._connection.on(et.ReceiverEvents.receiverError,mt=>{const vt={rheaContext:mt,emitter:this,eventName:et.ReceiverEvents.receiverError,emitterType:"connection",connectionId:this.id};(0,h.emitEvent)(vt)}),this._connection.on(et.ReceiverEvents.receiverClose,mt=>{const vt={rheaContext:mt,emitter:this,eventName:et.ReceiverEvents.receiverClose,emitterType:"connection",connectionId:this.id};(0,h.emitEvent)(vt)}),this._connection.on(et.SessionEvents.sessionError,mt=>{const vt={rheaContext:mt,emitter:this,eventName:et.SessionEvents.sessionError,emitterType:"connection",connectionId:this.id};(0,h.emitEvent)(vt)}),this._connection.on(et.SessionEvents.sessionClose,mt=>{const vt={rheaContext:mt,emitter:this,eventName:et.SessionEvents.sessionClose,emitterType:"connection",connectionId:this.id};(0,h.emitEvent)(vt)}),typeof this._connection.eventNames=="function"&&e.eventHandler("[%s] rhea-promise 'connection' object is listening for events: %o emitted by rhea's 'connection' object.",this.id,this._connection.eventNames())}}return connection.Connection=gt,connection}var hasRequiredContainer;function requireContainer(){if(hasRequiredContainer)return container;hasRequiredContainer=1,Object.defineProperty(container,"__esModule",{value:!0}),container.Container=void 0;const o=require$$0,e=container$1,a=eventsExports,c=requireConnection();class j extends a.EventEmitter{constructor(et){et||(et={}),super(),et.createdInstance?(this._container=et.createdInstance,delete et.createdInstance):this._container=(0,e.create_container)(et),this.options=this._container.options}get id(){return this._container.id}get filter(){return this._container.filter}get types(){return this._container.types}get message(){return this._container.message}get sasl(){return this._container.sasl}get saslServerMechanisms(){return this._container.sasl_server_mechanisms}createConnection(et){const ot=this._container.create_connection(et);return new c.Connection({rheaConnection:ot,container:this})}connect(et){return o.__awaiter(this,void 0,void 0,function*(){return this.createConnection(et).open()})}listen(et){return this._container.listen(et)}generateUUid(){return this._container.generate_uuid()}stringToUuid(et){return this._container.string_to_uuid(et)}uuidToString(et){return this._container.uuid_to_string(et)}websocketAccept(et,ot){return this._container.websocket_accept(et,ot)}websocketConnect(et){return this._container.websocket_connect(et)}static create(et){return new j(et)}static copyFromContainerInstance(et){return new j({createdInstance:et})}}return container.Container=j,container}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.SendOperationFailedError=o.OperationTimeoutError=o.InsufficientCreditError=o.parseConnectionString=o.messageProperties=o.messageHeader=o.delay=o.isAmqpError=o.AmqpResponseStatusCode=o.AwaitableSender=o.SenderSendOptions=o.Sender=o.Receiver=o.Session=o.Connection=o.Container=o.EventContext=o.Typed=o.SessionEvents=o.ConnectionEvents=o.SenderEvents=o.ReceiverEvents=o.string_to_uuid=o.generate_uuid=o.uuid_to_string=o.filter=o.message=o.types=void 0;var e=container$1;Object.defineProperty(o,"types",{enumerable:!0,get:function(){return e.types}}),Object.defineProperty(o,"message",{enumerable:!0,get:function(){return e.message}}),Object.defineProperty(o,"filter",{enumerable:!0,get:function(){return e.filter}}),Object.defineProperty(o,"uuid_to_string",{enumerable:!0,get:function(){return e.uuid_to_string}}),Object.defineProperty(o,"generate_uuid",{enumerable:!0,get:function(){return e.generate_uuid}}),Object.defineProperty(o,"string_to_uuid",{enumerable:!0,get:function(){return e.string_to_uuid}}),Object.defineProperty(o,"ReceiverEvents",{enumerable:!0,get:function(){return e.ReceiverEvents}}),Object.defineProperty(o,"SenderEvents",{enumerable:!0,get:function(){return e.SenderEvents}}),Object.defineProperty(o,"ConnectionEvents",{enumerable:!0,get:function(){return e.ConnectionEvents}}),Object.defineProperty(o,"SessionEvents",{enumerable:!0,get:function(){return e.SessionEvents}}),Object.defineProperty(o,"Typed",{enumerable:!0,get:function(){return e.Typed}});var a=requireEventContext();Object.defineProperty(o,"EventContext",{enumerable:!0,get:function(){return a.EventContext}});var c=requireContainer();Object.defineProperty(o,"Container",{enumerable:!0,get:function(){return c.Container}});var j=requireConnection();Object.defineProperty(o,"Connection",{enumerable:!0,get:function(){return j.Connection}});var h=requireSession();Object.defineProperty(o,"Session",{enumerable:!0,get:function(){return h.Session}});var et=requireReceiver();Object.defineProperty(o,"Receiver",{enumerable:!0,get:function(){return et.Receiver}});var ot=requireSender();Object.defineProperty(o,"Sender",{enumerable:!0,get:function(){return ot.Sender}}),Object.defineProperty(o,"SenderSendOptions",{enumerable:!0,get:function(){return ot.SenderSendOptions}});var st=requireAwaitableSender();Object.defineProperty(o,"AwaitableSender",{enumerable:!0,get:function(){return st.AwaitableSender}});var lt=requireUtils();Object.defineProperty(o,"AmqpResponseStatusCode",{enumerable:!0,get:function(){return lt.AmqpResponseStatusCode}}),Object.defineProperty(o,"isAmqpError",{enumerable:!0,get:function(){return lt.isAmqpError}}),Object.defineProperty(o,"delay",{enumerable:!0,get:function(){return lt.delay}}),Object.defineProperty(o,"messageHeader",{enumerable:!0,get:function(){return lt.messageHeader}}),Object.defineProperty(o,"messageProperties",{enumerable:!0,get:function(){return lt.messageProperties}}),Object.defineProperty(o,"parseConnectionString",{enumerable:!0,get:function(){return lt.parseConnectionString}});var nt=errorDefinitions;Object.defineProperty(o,"InsufficientCreditError",{enumerable:!0,get:function(){return nt.InsufficientCreditError}}),Object.defineProperty(o,"OperationTimeoutError",{enumerable:!0,get:function(){return nt.OperationTimeoutError}}),Object.defineProperty(o,"SendOperationFailedError",{enumerable:!0,get:function(){return nt.SendOperationFailedError}})})(lib);const Constants={associatedLinkName:"associated-link-name",partitionKey:"x-opt-partition-key",sequenceNumber:"x-opt-sequence-number",enqueueSequenceNumber:"x-opt-enqueue-sequence-number",enqueuedTime:"x-opt-enqueued-time",scheduledEnqueueTime:"x-opt-scheduled-enqueue-time",offset:"x-opt-offset",lockedUntil:"x-opt-locked-until",partitionIdName:"x-opt-partition-id",publisher:"x-opt-publisher-name",viaPartitionKey:"x-opt-via-partition-key",deadLetterSource:"x-opt-deadletter-source",messageState:"x-opt-message-state",enqueuedTimeAnnotation:"amqp.annotation.x-opt-enqueued-time",offsetAnnotation:"amqp.annotation.x-opt-offset",sequenceNumberAnnotation:"amqp.annotation.x-opt-sequence-number",guidSize:16,message:"message",error:"error",statusCode:"status-code",statusDescription:"status-description",errorCondition:"error-condition",management:"$management",partition:"partition",partitionId:"partitionId",readOperation:"READ",TLS:"tls",TCP:"tcp",establishConnection:"establishConnection",defaultConsumerGroup:"$default",eventHub:"eventhub",cbsEndpoint:"$cbs",cbsReplyTo:"cbs",operationPutToken:"put-token",aadEventHubsAudience:"https://eventhubs.azure.net/",aadEventHubsScope:"https://eventhubs.azure.net//.default",aadServiceBusAudience:"https://servicebus.azure.net/",aadServiceBusScope:"https://servicebus.azure.net//.default",maxUserAgentLength:512,vendorString:"com.microsoft",attachEpoch:"com.microsoft:epoch",receiverIdentifierName:"com.microsoft:receiver-name",enableReceiverRuntimeMetricName:"com.microsoft:enable-receiver-runtime-metric",timespan:"com.microsoft:timespan",uri:"com.microsoft:uri",dateTimeOffset:"com.microsoft:datetime-offset",sessionFilterName:"com.microsoft:session-filter",receiverError:"receiver_error",senderError:"sender_error",sessionError:"session_error",connectionError:"connection_error",defaultOperationTimeoutInMs:6e4,defaultConnectionIdleTimeoutInMs:6e4,managementRequestKey:"managementRequest",negotiateCbsKey:"negotiateCbs",negotiateClaim:"negotiateClaim",ensureContainerAndBlob:"ensureContainerAndBlob",defaultPrefetchCount:1e3,reconnectLimit:100,maxMessageIdLength:128,maxPartitionKeyLength:128,maxSessionIdLength:128,pathDelimiter:"/",ruleNameMaximumLength:50,maximumSqlFilterStatementLength:1024,maximumSqlRuleActionStatementLength:1024,maxDeadLetterReasonLength:4096,maxDurationValue:922337203685477,minDurationValue:-922337203685477,maxAbsoluteExpiryTime:new Date("9999-12-31T07:59:59.000Z").getTime(),maxUint32Value:4294967295,aadTokenValidityMarginInMs:5e3,connectionReconnectDelay:300,defaultMaxRetries:3,defaultMaxRetriesForConnection:150,defaultDelayBetweenOperationRetriesInMs:3e4,defaultMaxDelayForExponentialRetryInMs:9e4,receiverSettleMode:"receiver-settle-mode",dispositionStatus:"disposition-status",fromSequenceNumber:"from-sequence-number",messageCount:"message-count",enqueuedTimeUtc:"enqueued-time-utc",lockTokens:"lock-tokens",messageIdMapKey:"message-id",sequenceNumberMapKey:"sequence-number",lockTokenMapKey:"lock-token",sessionIdMapKey:"session-id",sequenceNumbers:"sequence-numbers",deadLetterReason:"deadletter-reason",deadLetterDescription:"deadletter-description",propertiesToModify:"properties-to-modify",deadLetterName:"com.microsoft:dead-letter",trackingId:"com.microsoft:tracking-id",serverTimeout:"com.microsoft:server-timeout",operations:{putToken:"put-token",read:"READ",cancelScheduledMessage:"com.microsoft:cancel-scheduled-message",scheduleMessage:"com.microsoft:schedule-message",renewLock:"com.microsoft:renew-lock",peekMessage:"com.microsoft:peek-message",receiveBySequenceNumber:"com.microsoft:receive-by-sequence-number",deleteMessages:"com.microsoft:batch-delete-messages",updateDisposition:"com.microsoft:update-disposition",renewSessionLock:"com.microsoft:renew-session-lock",setSessionState:"com.microsoft:set-session-state",getSessionState:"com.microsoft:get-session-state",enumerateSessions:"com.microsoft:get-message-sessions",addRule:"com.microsoft:add-rule",removeRule:"com.microsoft:remove-rule",enumerateRules:"com.microsoft:enumerate-rules"},descriptorCodes:{ruleDescriptionList:1335734829060,sqlFilterList:83483426822,correlationFilterList:83483426825,sqlRuleActionList:1335734829062,trueFilterList:83483426823,falseFilterList:83483426824}},StandardAbortMessage="The operation was aborted.",logger=createClientLogger("core-amqp");function logErrorStackTrace(o){isObjectWithProperties(o,["stack"])&&logger.verbose(o.stack)}class CancellableAsyncLockImpl{constructor(){this._keyMap=new Map,this._executionRunningSet=new Set}acquire(e,a,c){var j;const{abortSignal:h,timeoutInMs:et}=c;if(h!=null&&h.aborted)return Promise.reject(new AbortError(StandardAbortMessage));const ot=(j=this._keyMap.get(e))!==null&&j!==void 0?j:[];this._keyMap.set(e,ot);const{promise:st,rejecter:lt,resolver:nt}=getPromiseParts(),gt={reject:lt,resolve:nt,task:a};if(typeof et=="number"){const dt=setTimeout(()=>{this._removeTaskDetails(e,gt),lt(new lib.OperationTimeoutError(`The task timed out waiting to acquire a lock for ${e}`))},et);gt.tid=dt}if(h){const dt=()=>{this._removeTaskDetails(e,gt),lt(new AbortError(StandardAbortMessage))};h.addEventListener("abort",dt),gt.abortSignal=h,gt.abortListener=dt}return ot.push(gt),logger.verbose(`Called acquire() for lock "${e}". Lock "${e}" has ${ot.length} pending tasks.`),this._execute(e),st}async _execute(e){if(this._executionRunningSet.has(e))return;const a=this._keyMap.get(e);if(!(!a||!a.length)){for(this._executionRunningSet.add(e);a.length;){const c=a.shift();if(c){try{logger.verbose(`Acquired lock for "${e}", invoking task.`),cleanupTaskDetails(c);const j=await c.task();c.resolve(j)}catch(j){c.reject(j)}logger.verbose(`Task completed for lock "${e}". Lock "${e}" has ${a.length} pending tasks.`)}}this._executionRunningSet.delete(e),this._keyMap.delete(e)}}_removeTaskDetails(e,a){const c=this._keyMap.get(e);if(!c||!c.length)return;const j=c.indexOf(a);if(j!==-1){const[h]=c.splice(j,1);cleanupTaskDetails(h)}}}function getPromiseParts(){let o,e;return{promise:new Promise((c,j)=>{o=c,e=j}),resolver:o,rejecter:e}}function cleanupTaskDetails(o){o.tid&&clearTimeout(o.tid),o.abortSignal&&o.abortListener&&o.abortSignal.removeEventListener("abort",o.abortListener)}function parseConnectionString(o){const e={},a=o.trim().split(";");for(let c of a){if(c=c.trim(),c==="")continue;const j=c.indexOf("=");if(j===-1)throw new Error("Connection string malformed: each part of the connection string must have an `=` assignment.");const h=c.substring(0,j).trim();if(h==="")throw new Error("Connection string malformed: missing key for assignment");const et=c.substring(j+1).trim();e[h]=et}return e}const defaultCancellableLock=new CancellableAsyncLockImpl;async function delay$1(o,e,a,c){await delay$2(o,{abortSignal:e,abortErrorMsg:a})}function isString(o){return typeof o=="string"}function isNumber(o){return typeof o=="number"}var ConditionStatusMapper;(function(o){o[o["com.microsoft:timeout"]=408]="com.microsoft:timeout",o[o["amqp:not-found"]=404]="amqp:not-found",o[o["amqp:not-implemented"]=501]="amqp:not-implemented",o[o["com.microsoft:entity-already-exists"]=409]="com.microsoft:entity-already-exists",o[o["com.microsoft:message-lock-lost"]=410]="com.microsoft:message-lock-lost",o[o["com.microsoft:session-lock-lost"]=410]="com.microsoft:session-lock-lost",o[o["com.microsoft:no-matching-subscription"]=500]="com.microsoft:no-matching-subscription",o[o["amqp:link:message-size-exceeded"]=403]="amqp:link:message-size-exceeded",o[o["com.microsoft:server-busy"]=503]="com.microsoft:server-busy",o[o["com.microsoft:argument-error"]=400]="com.microsoft:argument-error",o[o["com.microsoft:argument-out-of-range"]=400]="com.microsoft:argument-out-of-range",o[o["com.microsoft:store-lock-lost"]=410]="com.microsoft:store-lock-lost",o[o["com.microsoft:session-cannot-be-locked"]=410]="com.microsoft:session-cannot-be-locked",o[o["com.microsoft:partition-not-owned"]=410]="com.microsoft:partition-not-owned",o[o["com.microsoft:entity-disabled"]=400]="com.microsoft:entity-disabled",o[o["com.microsoft:publisher-revoked"]=401]="com.microsoft:publisher-revoked",o[o["amqp:link:stolen"]=410]="amqp:link:stolen",o[o["amqp:not-allowed"]=400]="amqp:not-allowed",o[o["amqp:unauthorized-access"]=401]="amqp:unauthorized-access",o[o["amqp:resource-limit-exceeded"]=403]="amqp:resource-limit-exceeded"})(ConditionStatusMapper||(ConditionStatusMapper={}));var ConditionErrorNameMapper$1;(function(o){o["com.microsoft:address-already-in-use"]="AddressAlreadyInUseError",o["com.microsoft:store-lock-lost"]="StoreLockLostError",o["com.microsoft:no-matching-subscription"]="NoMatchingSubscriptionError",o["com.microsoft:partition-not-owned"]="PartitionNotOwnedError",o["com.microsoft:publisher-revoked"]="PublisherRevokedError",o["com.microsoft:entity-already-exists"]="MessagingEntityAlreadyExistsError",o["com.microsoft:entity-disabled"]="MessagingEntityDisabledError",o["com.microsoft:message-lock-lost"]="MessageLockLostError",o["com.microsoft:session-lock-lost"]="SessionLockLostError",o["com.microsoft:session-cannot-be-locked"]="SessionCannotBeLockedError",o["amqp:internal-error"]="InternalServerError",o["amqp:not-found"]="ServiceCommunicationError",o["com.microsoft:message-not-found"]="MessageNotFoundError",o["com.microsoft:relay-not-found"]="RelayNotFoundError",o["amqp:not-implemented"]="NotImplementedError",o["amqp:not-allowed"]="InvalidOperationError",o["amqp:resource-limit-exceeded"]="QuotaExceededError",o["amqp:unauthorized-access"]="UnauthorizedError",o["com.microsoft:auth-failed"]="UnauthorizedError",o["com.microsoft:timeout"]="ServiceUnavailableError",o["com.microsoft:message-wait-timeout"]="MessageWaitTimeout",o["com.microsoft:argument-out-of-range"]="ArgumentOutOfRangeError",o["amqp:precondition-failed"]="PreconditionFailedError",o["com.microsoft:precondition-failed"]="PreconditionFailedError",o["amqp:decode-error"]="DecodeError",o["amqp:invalid-field"]="InvalidFieldError",o["amqp:resource-locked"]="ResourceLockedError",o["amqp:resource-deleted"]="ResourceDeletedError",o["amqp:illegal-state"]="IllegalStateError",o["amqp:frame-size-too-small"]="FrameSizeTooSmallError",o["amqp:link:detach-forced"]="DetachForcedError",o["amqp:link:transfer-limit-exceeded"]="TransferLimitExceededError",o["amqp:link:message-size-exceeded"]="MessageTooLargeError",o["amqp:link:redirect"]="LinkRedirectError",o["amqp:link:stolen"]="ReceiverDisconnectedError",o["amqp:session:window-violation"]="SessionWindowViolationError",o["amqp:session:errant-link"]="ErrantLinkError",o["amqp:session:handle-in-use"]="HandleInUseError",o["amqp:session:unattached-handle"]="UnattachedHandleError",o["amqp:connection:forced"]="ConnectionForcedError",o["amqp:connection:framing-error"]="FramingError",o["amqp:connection:redirect"]="ConnectionRedirectError",o["com.microsoft:server-busy"]="ServerBusyError",o["com.microsoft:argument-error"]="ArgumentError",o["com.microsoft:operation-cancelled"]="OperationCancelledError",o["client.sender:not-enough-link-credit"]="SenderBusyError",o["client.sender:link-not-ready"]="SenderNotReadyError",o["system:error"]="SystemError"})(ConditionErrorNameMapper$1||(ConditionErrorNameMapper$1={}));var ErrorNameConditionMapper;(function(o){o.AddressAlreadyInUseError="com.microsoft:address-already-in-use",o.StoreLockLostError="com.microsoft:store-lock-lost",o.NoMatchingSubscriptionError="com.microsoft:no-matching-subscription",o.PartitionNotOwnedError="com.microsoft:partition-not-owned",o.PublisherRevokedError="com.microsoft:publisher-revoked",o.MessagingEntityAlreadyExistsError="com.microsoft:entity-already-exists",o.MessagingEntityDisabledError="com.microsoft:entity-disabled",o.MessageLockLostError="com.microsoft:message-lock-lost",o.SessionLockLostError="com.microsoft:session-lock-lost",o.SessionCannotBeLockedError="com.microsoft:session-cannot-be-locked",o.InternalServerError="amqp:internal-error",o.ServiceCommunicationError="amqp:not-found",o.MessageNotFoundError="com.microsoft:message-not-found",o.RelayNotFoundError="com.microsoft:relay-not-found",o.NotImplementedError="amqp:not-implemented",o.InvalidOperationError="amqp:not-allowed",o.QuotaExceededError="amqp:resource-limit-exceeded",o.UnauthorizedError="amqp:unauthorized-access",o.ServiceUnavailableError="com.microsoft:timeout",o.MessageWaitTimeout="com.microsoft:message-wait-timeout",o.ArgumentOutOfRangeError="com.microsoft:argument-out-of-range",o.PreconditionFailedError="amqp:precondition-failed",o.DecodeError="amqp:decode-error",o.InvalidFieldError="amqp:invalid-field",o.ResourceLockedError="amqp:resource-locked",o.ResourceDeletedError="amqp:resource-deleted",o.IllegalStateError="amqp:illegal-state",o.FrameSizeTooSmallError="amqp:frame-size-too-small",o.DetachForcedError="amqp:link:detach-forced",o.TransferLimitExceededError="amqp:link:transfer-limit-exceeded",o.MessageTooLargeError="amqp:link:message-size-exceeded",o.LinkRedirectError="amqp:link:redirect",o.ReceiverDisconnectedError="amqp:link:stolen",o.SessionWindowViolationError="amqp:session:window-violation",o.ErrantLinkError="amqp:session:errant-link",o.HandleInUseError="amqp:session:handle-in-use",o.UnattachedHandleError="amqp:session:unattached-handle",o.ConnectionForcedError="amqp:connection:forced",o.FramingError="amqp:connection:framing-error",o.ConnectionRedirectError="amqp:connection:redirect",o.ServerBusyError="com.microsoft:server-busy",o.ArgumentError="com.microsoft:argument-error",o.OperationCancelledError="com.microsoft:operation-cancelled",o.SenderBusyError="client.sender:not-enough-link-credit",o.SenderNotReadyError="client.sender:link-not-ready",o.SystemError="system:error"})(ErrorNameConditionMapper||(ErrorNameConditionMapper={}));const systemErrorFieldsToCopy=["address","code","errno","info","port","stack","syscall"];class MessagingError extends Error{constructor(e,a){if(super(e),this.name="MessagingError",this.retryable=!0,!!a)for(const c of systemErrorFieldsToCopy)a[c]!=null&&(this[c]=a[c])}}const retryableErrors=["InternalServerError","ServerBusyError","ServiceUnavailableError","OperationCancelledError","UnauthorizedError","OperationTimeoutError","SenderBusyError","SenderNotReadyError","MessagingError","DetachForcedError","ConnectionForcedError","TransferLimitExceededError","InsufficientCreditError"];var SystemErrorConditionMapper;(function(o){o.ENOTFOUND="amqp:not-found",o.EBUSY="com.microsoft:server-busy",o.ECONNREFUSED="amqp:connection:forced",o.ETIMEDOUT="com.microsoft:timeout",o.ECONNRESET="com.microsoft:timeout",o.ENETDOWN="com.microsoft:timeout",o.EHOSTDOWN="com.microsoft:timeout",o.ENETRESET="com.microsoft:timeout",o.ENETUNREACH="com.microsoft:timeout",o.ENONET="com.microsoft:timeout"})(SystemErrorConditionMapper||(SystemErrorConditionMapper={}));function isSystemError(o){return!(!isObjectWithProperties(o,["code","syscall","errno"])||!isString(o.code)||!isString(o.syscall)||!isString(o.errno)&&!isNumber(o.errno))}function isBrowserWebsocketError(o){let e=!1;return!isNodeLike&&self&&o.type==="error"&&o.target instanceof self.WebSocket&&(e=!0),e}function isErrorEvent(o){return typeof o.error=="object"&&typeof o.message=="string"}const rheaPromiseErrors=["OperationTimeoutError","InsufficientCreditError","SendOperationFailedError"];function translate(o){if(isDefined(o)){if(typeof o!="object")return new Error(String(o))}else return new Error("Unknown error encountered.");const e=isErrorEvent(o)?o.error:o;if(e instanceof TypeError||e instanceof RangeError)return e;if(isAmqpError(e)){const a=e.condition,c=e.description,j=new MessagingError(c);return e.stack&&(j.stack=e.stack),j.info=e.info,a&&(j.code=ConditionErrorNameMapper$1[a]),c&&(c.includes("status-code: 404")||c.match(/The messaging entity .* could not be found.*/i)!==null)&&(j.code="MessagingEntityNotFoundError"),j.code&&retryableErrors.indexOf(j.code)===-1&&(j.retryable=!1),j}if(e instanceof Error&&e.name==="MessagingError")return e;if(isSystemError(e)){const a=e.code,c=e.message,j=new MessagingError(c,e);let h="SystemError";if(a){const et=SystemErrorConditionMapper[a];h=ConditionErrorNameMapper$1[et]}return retryableErrors.indexOf(h)===-1&&(j.retryable=!1),j}if(isBrowserWebsocketError(e)){const a=new MessagingError("Websocket connection failed.");return a.code=ConditionErrorNameMapper$1[ErrorNameConditionMapper.ServiceCommunicationError],a.retryable=!1,a}if(isError(e)&&rheaPromiseErrors.indexOf(e.name)!==-1){const a=new MessagingError(e.message,e);return a.code=e.name,a.code&&retryableErrors.indexOf(a.code)===-1&&(a.retryable=!1),a}return isError(e)?e:new Error(String(e))}function isAmqpError(o){return lib.isAmqpError(o)}class RequestResponseLink{constructor(e,a,c){this.session=e,this.sender=a,this.receiver=c,this._responsesMap=new Map,this.session=e,this.sender=a,this.receiver=c,this.receiver.on(lib.ReceiverEvents.message,j=>{onMessageReceived(j,this.connection.id,this._responsesMap)}),this.sender.on(lib.SenderEvents.senderError,j=>{onSenderError(j,this.connection.id,this._responsesMap)})}get connection(){return this.session.connection}isOpen(){return this.session.isOpen()&&this.sender.isOpen()&&this.receiver.isOpen()}sendRequest(e,a={}){const c=a.timeoutInMs||Constants.defaultOperationTimeoutInMs,j=a.abortSignal;return e.message_id||(e.message_id=lib.generate_uuid()),new Promise((h,et)=>{let ot;const st=()=>{this._responsesMap.delete(e.message_id);const nt=this.receiver.address||"address",gt=a.requestName,dt=`[${this.connection.id}] The request "${gt}" to "${nt}" has been cancelled by the user.`;logger.info(dt);const mt=new AbortError(StandardAbortMessage);et(mt)},lt=()=>{isDefined(ot)&&clearTimeout(ot),j.removeEventListener("abort",lt),st()};if(j){if(j.aborted)return st();j.addEventListener("abort",lt)}ot=setTimeout(()=>{var nt;this._responsesMap.delete(e.message_id),j&&j.removeEventListener("abort",lt);const gt=((nt=this.receiver)===null||nt===void 0?void 0:nt.address)||"address",mt={name:"OperationTimeoutError",message:`The request with message_id "${e.message_id}" to "${gt}" endpoint timed out. Please try again later.`};return et(translate(mt))},c),this._responsesMap.set(e.message_id,{resolve:h,reject:et,cleanupBeforeResolveOrReject:()=>{j&&j.removeEventListener("abort",lt),isDefined(ot)&&clearTimeout(ot)}}),logger.verbose("[%s] %s request sent: %O",this.connection.id,e.to||"$management"),this.sender.send(e)})}async close(){await this.sender.close({closeSession:!1}),await this.receiver.close({closeSession:!1}),await this.session.close()}remove(){this.sender.remove(),this.receiver.remove(),this.session.remove()}static async create(e,a,c,j={}){const{abortSignal:h}=j,et=await e.createSession({abortSignal:h}),ot=await et.createSender(Object.assign(Object.assign({},a),{abortSignal:h})),st=await et.createReceiver(Object.assign(Object.assign({},c),{abortSignal:h}));return logger.verbose("[%s] Successfully created the sender and receiver links on the same session.",e.id),new RequestResponseLink(et,ot,st)}}const getCodeDescriptionAndError=(o={})=>({statusCode:o[Constants.statusCode]||o.statusCode,statusDescription:o[Constants.statusDescription]||o.statusDescription,errorCondition:o[Constants.errorCondition]||o.errorCondition});function onMessageReceived(o,e,a){const c=o.message;if(!c){logger.verbose(`[${e}] "message" property on the EventContext is "undefined" which is unexpected, returning from the "onMessageReceived" handler without resolving or rejecting the promise upon encountering the message event.`);return}const j=c.correlation_id;if(!a.has(j)){logger.verbose(`[${e}] correlationId "${j}" property on the response does not match with any of the "request-id"s in the map, returning from the "onMessageReceived" handler without resolving or rejecting the promise upon encountering the message event.`);return}const h=a.get(j);h.cleanupBeforeResolveOrReject();const et=a.delete(j);logger.verbose(`[${e}] Successfully deleted the response with id ${j} from the map. Delete result - ${et}`);const ot=getCodeDescriptionAndError(c.application_properties);let st;if(ot.statusCode||(st=new Error(`[${e}] No statusCode in the "application_properties" in the returned response with correlation-id: ${j}`)),ot.statusCode>199&&ot.statusCode<300)return logger.verbose(`[${e}] Resolving the response with correlation-id: ${j}`),h.resolve(c);if(!st){const lt=ot.errorCondition||ConditionStatusMapper[ot.statusCode]||"amqp:internal-error";st=translate({condition:lt,description:ot.statusDescription}),logger.warning(`${st==null?void 0:st.name}: ${st==null?void 0:st.message}`)}return logErrorStackTrace(st),h.reject(st)}function onSenderError(o,e,a){if(o.sender){for(const[c,j]of a.entries())logger.verbose(`[${e}] Sender closed due to error when sending request with message_id "${c}"`),j.cleanupBeforeResolveOrReject(),j.reject(o.sender.error);a.clear()}}function checkNetworkConnection(){return Promise.resolve(self.navigator.onLine)}function isDelivery(o){let e=!1;return o&&typeof o.id=="number"&&typeof o.settled=="boolean"&&typeof o.remote_settled=="boolean"&&typeof o.format=="number"&&(e=!0),e}var RetryMode;(function(o){o[o.Exponential=0]="Exponential",o[o.Fixed=1]="Fixed"})(RetryMode||(RetryMode={}));var RetryOperationType;(function(o){o.cbsAuth="cbsAuth",o.connection="connection",o.management="management",o.receiverLink="receiverLink",o.senderLink="senderLink",o.sendMessage="sendMessage",o.receiveMessage="receiveMessage",o.session="session",o.messageSettlement="settlement"})(RetryOperationType||(RetryOperationType={}));function validateRetryConfig(o){if(!o.operation)throw new TypeError("Missing 'operation' in retry configuration");if(!o.connectionId)throw new TypeError("Missing 'connectionId' in retry configuration");if(!o.operationType)throw new TypeError("Missing 'operationType' in retry configuration")}function calculateDelay(o,e,a,c){if(c===RetryMode.Exponential){const h=(e*.8+Math.floor(Math.random()*(e*1.2-e*.8)))*(Math.pow(2,o)-1);return Math.min(h,a)}return e}async function retry(o){validateRetryConfig(o);const e=Object.assign({},o);e.retryOptions||(e.retryOptions={}),(e.retryOptions.maxRetries==null||e.retryOptions.maxRetries<0)&&(e.retryOptions.maxRetries=Constants.defaultMaxRetries),(e.retryOptions.retryDelayInMs==null||e.retryOptions.retryDelayInMs<0)&&(e.retryOptions.retryDelayInMs=Constants.defaultDelayBetweenOperationRetriesInMs),(e.retryOptions.maxRetryDelayInMs==null||e.retryOptions.maxRetryDelayInMs<0)&&(e.retryOptions.maxRetryDelayInMs=Constants.defaultMaxDelayForExponentialRetryInMs),e.retryOptions.mode==null&&(e.retryOptions.mode=RetryMode.Fixed);const a=[];let c,j=!1;const h=e.retryOptions.maxRetries+1;for(let et=1;et<=h;et++){logger.verbose("[%s] Attempt number for '%s': %d.",e.connectionId,e.operationType,et);try{c=await e.operation(),j=!0,logger.verbose("[%s] Success for '%s', after attempt number: %d.",e.connectionId,e.operationType,et),c&&!isDelivery(c)&&logger.verbose("[%s] Success result for '%s': %O",e.connectionId,e.operationType,c);break}catch(ot){const st=translate(ot);if(!st.retryable&&st.name==="ServiceCommunicationError"&&e.connectionHost&&(await checkNetworkConnection(e.connectionHost)||(st.name="ConnectionLostError",st.retryable=!0)),logger.verbose("[%s] Error occurred for '%s' in attempt number %d: %O",e.connectionId,e.operationType,et,st),a.push(st),a[(a==null?void 0:a.length)-1].retryable&&h>et){const lt=calculateDelay(et,e.retryOptions.retryDelayInMs,e.retryOptions.maxRetryDelayInMs,e.retryOptions.mode);logger.verbose("[%s] Sleeping for %d milliseconds for '%s'.",e.connectionId,lt,e.operationType),await delay$2(lt,{abortSignal:e.abortSignal,abortErrorMsg:"The retry operation has been cancelled by the user."});continue}else break}}if(j)return c;throw a.length===1?a[0]:new AggregateError(a)}var TokenType;(function(o){o.CbsTokenTypeJwt="jwt",o.CbsTokenTypeSas="servicebus.windows.net:sastoken"})(TokenType||(TokenType={}));const specialLocalIPs=["::1","0:0:0:0:0:0:0:1"];function getHost(o){for(const c of specialLocalIPs)if(o.includes(c))return c;const e=/.*:\/\/([^/:]*)/.exec(o),a=e==null?void 0:e[1];return a||o}function extractPort(o){const e=/.*:(\d*)/.exec(o),a=e==null?void 0:e[1];return a?parseInt(a,10):void 0}function getPort(o){for(const e of specialLocalIPs)if(o.includes(e))return extractPort(o.replace(e,""));return extractPort(o)}const ConnectionConfig={create(o,e){o=String(o);const a=parseConnectionString(o);if(!a.Endpoint)throw new TypeError("Missing Endpoint in Connection String.");a.Endpoint.endsWith("/")||(a.Endpoint+="/");let c;a.Endpoint.includes(":")&&(c=getPort(a.Endpoint));const j=Object.assign({connectionString:o,endpoint:a.Endpoint,host:getHost(a.Endpoint),sharedAccessKeyName:a.SharedAccessKeyName,sharedAccessKey:a.SharedAccessKey,useDevelopmentEmulator:a.UseDevelopmentEmulator==="true"},c!==void 0?{port:c}:void 0);return(e||a.EntityPath)&&(j.entityPath=e||a.EntityPath),j},validate(o,e){if(e||(e={}),!o)throw new TypeError("Missing configuration");if(!o.endpoint)throw new TypeError("Missing 'endpoint' in configuration");if(o.endpoint=String(o.endpoint),!o.host)throw new TypeError("Missing 'host' in configuration");if(o.host=String(o.host),o.port!==void 0&&!(o.port>=0&&o.port<=65535))throw new TypeError(`Invalid 'port' of ${o.port} in configuration`);if(e.isEntityPathRequired&&!o.entityPath)throw new TypeError("Missing 'entityPath' in configuration");if(isDefined(o.entityPath)&&(o.entityPath=String(o.entityPath)),!isSharedAccessSignature(o.connectionString)){if(!o.sharedAccessKeyName)throw new TypeError("Missing 'sharedAccessKeyName' in configuration");if(o.sharedAccessKeyName=String(o.sharedAccessKeyName),!o.sharedAccessKey)throw new TypeError("Missing 'sharedAccessKey' in configuration");o.sharedAccessKey=String(o.sharedAccessKey)}}};function isSharedAccessSignature(o){return o.match(/;{0,1}SharedAccessSignature=SharedAccessSignature /)!=null}class CbsClient{constructor(e,a){this.endpoint=Constants.cbsEndpoint,this.replyTo=`${Constants.cbsReplyTo}-${lib.generate_uuid()}`,this.cbsLock=`${Constants.negotiateCbsKey}-${lib.generate_uuid()}`,this.connection=e,this.connectionLock=a}async init(e={}){const{abortSignal:a,timeoutInMs:c}=e;try{if(a!=null&&a.aborted)throw new AbortError(StandardAbortMessage);if(this.connection.isOpen()||(logger.verbose("The CBS client is trying to establish an AMQP connection."),await defaultCancellableLock.acquire(this.connectionLock,()=>this.connection.open({abortSignal:a}),{abortSignal:a,timeoutInMs:c})),this.isOpen())logger.verbose("[%s] CBS session is already present. Reusing the cbs sender '%s' and receiver '%s' links over cbs session.",this.connection.id,this._cbsSenderReceiverLink.sender.name,this._cbsSenderReceiverLink.receiver.name);else{const j={source:{address:this.endpoint},name:this.replyTo,onSessionError:et=>{const ot=et.connection.options.id,st=translate(et.session.error);logger.verbose("[%s] An error occurred on the session for request/response links for $cbs: %O",ot,st)}},h={target:{address:this.endpoint}};logger.verbose("[%s] Creating sender/receiver links on a session for $cbs endpoint.",this.connection.id),this._cbsSenderReceiverLink=await RequestResponseLink.create(this.connection,h,j,{abortSignal:a}),this._cbsSenderReceiverLink.sender.on(lib.SenderEvents.senderError,et=>{const ot=et.connection.options.id,st=translate(et.sender.error);logger.verbose("[%s] An error occurred on the cbs sender link.. %O",ot,st)}),this._cbsSenderReceiverLink.receiver.on(lib.ReceiverEvents.receiverError,et=>{const ot=et.connection.options.id,st=translate(et.receiver.error);logger.verbose("[%s] An error occurred on the cbs receiver link.. %O",ot,st)}),logger.verbose("[%s] Successfully created the cbs sender '%s' and receiver '%s' links over cbs session.",this.connection.id,this._cbsSenderReceiverLink.sender.name,this._cbsSenderReceiverLink.receiver.name)}}catch(j){const h=translate(j);throw logger.warning("[%s] An error occurred while establishing the cbs links: %s",this.connection.id,`${h==null?void 0:h.name}: ${h==null?void 0:h.message}`),logErrorStackTrace(h),h}}async negotiateClaim(e,a,c,j={}){const{abortSignal:h,timeoutInMs:et}=j;try{if(h!=null&&h.aborted)throw new AbortError(StandardAbortMessage);if(!this._cbsSenderReceiverLink)throw new Error("Attempted to negotiate a claim but the CBS link does not exist.");const ot={body:a,message_id:lib.generate_uuid(),reply_to:this.replyTo,to:this.endpoint,application_properties:{operation:Constants.operationPutToken,name:e,type:c}},st=await this._cbsSenderReceiverLink.sendRequest(ot,{abortSignal:h,timeoutInMs:et,requestName:"negotiateClaim"});return logger.verbose("[%s] The CBS response is: %O",this.connection.id,st),this._fromRheaMessageResponse(st)}catch(ot){throw logger.warning("[%s] An error occurred while negotiating the cbs claim: %s",this.connection.id,isError(ot)?`${ot.name}: ${ot.message}`:String(ot)),logErrorStackTrace(ot),ot}}async close(){try{if(this.isOpen()){const e=this._cbsSenderReceiverLink;this._cbsSenderReceiverLink=void 0,await e.close(),logger.verbose("[%s] Successfully closed the cbs session.",this.connection.id)}}catch(e){const a=`An error occurred while closing the cbs link: ${isError(e)&&e.stack?e.stack:JSON.stringify(e)}.`;throw logger.verbose("[%s] %s",this.connection.id,a),new Error(a)}}remove(){try{if(this._cbsSenderReceiverLink){const e=this._cbsSenderReceiverLink;this._cbsSenderReceiverLink=void 0,e.remove(),logger.verbose("[%s] Successfully removed the cbs session.",this.connection.id)}}catch(e){const a=`An error occurred while removing the cbs link: ${isError(e)&&e.stack?e.stack:JSON.stringify(e)}.`;throw logger.verbose("[%s] %s",this.connection.id,a),new Error(a)}}isOpen(){var e;return!!(!((e=this._cbsSenderReceiverLink)===null||e===void 0)&&e.isOpen())}_fromRheaMessageResponse(e){const a={correlationId:e.correlation_id,statusCode:e.application_properties?e.application_properties["status-code"]:"",statusDescription:e.application_properties?e.application_properties["status-description"]:""};return logger.verbose("[%s] The deserialized CBS response is: %o",this.connection.id,a),a}}const AmqpMessageHeader={toRheaMessageHeader(o){const e={};return o.deliveryCount!=null&&(e.delivery_count=o.deliveryCount),o.durable!=null&&(e.durable=o.durable),o.firstAcquirer!=null&&(e.first_acquirer=o.firstAcquirer),o.priority!=null&&(e.priority=o.priority),o.timeToLive!=null&&(e.ttl=o.timeToLive),logger.verbose("To RheaMessageHeader: %O",e),e},fromRheaMessageHeader(o){const e={};return o.delivery_count!=null&&(e.deliveryCount=o.delivery_count),o.durable!=null&&(e.durable=o.durable),o.first_acquirer!=null&&(e.firstAcquirer=o.first_acquirer),o.priority!=null&&(e.priority=o.priority),o.ttl!=null&&(e.timeToLive=o.ttl),logger.verbose("From RheaMessageHeader: %O",e),e}},AmqpMessageProperties={toRheaMessageProperties(o){const e={};return o.absoluteExpiryTime!=null&&(e.absolute_expiry_time=new Date(o.absoluteExpiryTime)),o.contentEncoding!=null&&(e.content_encoding=o.contentEncoding),o.contentType!=null&&(e.content_type=o.contentType),o.correlationId!=null&&(e.correlation_id=o.correlationId),o.creationTime!=null&&(e.creation_time=new Date(o.creationTime)),o.groupId!=null&&(e.group_id=o.groupId),o.groupSequence!=null&&(e.group_sequence=o.groupSequence),o.messageId!=null&&(e.message_id=o.messageId),o.replyTo!=null&&(e.reply_to=o.replyTo),o.replyToGroupId!=null&&(e.reply_to_group_id=o.replyToGroupId),o.subject!=null&&(e.subject=o.subject),o.to!=null&&(e.to=o.to),logger.verbose("To RheaMessageProperties: %O",e),e},fromRheaMessageProperties(o){const e={};return o.absolute_expiry_time!=null&&(e.absoluteExpiryTime=o.absolute_expiry_time.getTime()),o.content_encoding!=null&&(e.contentEncoding=o.content_encoding),o.content_type!=null&&(e.contentType=o.content_type),o.correlation_id!=null&&(e.correlationId=o.correlation_id),o.creation_time!=null&&(e.creationTime=o.creation_time.getTime()),o.group_id!=null&&(e.groupId=o.group_id),o.group_sequence!=null&&(e.groupSequence=o.group_sequence),o.message_id!=null&&(e.messageId=o.message_id),o.reply_to!=null&&(e.replyTo=o.reply_to),o.reply_to_group_id!=null&&(e.replyToGroupId=o.reply_to_group_id),o.subject!=null&&(e.subject=o.subject),o.to!=null&&(e.to=o.to),logger.verbose("From RheaMessageProperties: %O",e),e}};function getPlatformInfo(){return`(javascript-Browser-${getReleaseInfo$1()})`}function getFrameworkInfo(){return`Browser/${getReleaseInfo$1()}`}function getReleaseInfo$1(){return typeof self>"u"?"":self.navigator.appVersion}const maxListenerLimit=1e3;class CoreAmqpConnection extends lib.Connection{async createSender(e){const a=await super.createSender(e);return a.setMaxListeners(maxListenerLimit),a}async createAwaitableSender(e){const a=await super.createAwaitableSender(e);return a.setMaxListeners(maxListenerLimit),a}async createReceiver(e){const a=await super.createReceiver(e);return a.setMaxListeners(maxListenerLimit),a}}const ConnectionContextBase={create(o){var e,a,c;ConnectionConfig.validate(o.config,{isEntityPathRequired:o.isEntityPathRequired||!1});const j=o.connectionProperties.userAgent;if(j.length>Constants.maxUserAgentLength)throw new Error(`The user-agent string cannot be more than ${Constants.maxUserAgentLength} characters in length.The given user-agent string is: ${j} with length: ${j.length}`);const h={transport:o.config.useDevelopmentEmulator?Constants.TCP:Constants.TLS,host:o.config.host,hostname:(e=o.config.amqpHostname)!==null&&e!==void 0?e:o.config.host,username:o.config.sharedAccessKeyName,port:(a=o.config.port)!==null&&a!==void 0?a:o.config.useDevelopmentEmulator?5672:5671,reconnect:!1,properties:{product:o.connectionProperties.product,version:o.connectionProperties.version,"user-agent":j,platform:getPlatformInfo(),framework:getFrameworkInfo()},idle_time_out:Constants.defaultConnectionIdleTimeoutInMs,operationTimeoutInSeconds:o.operationTimeoutInMs?o.operationTimeoutInMs/1e3:void 0};if(o.config.webSocket||!isNodeLike&&typeof self<"u"&&self.WebSocket){const lt=o.config.webSocket||self.WebSocket,nt=o.config.host,gt=o.config.webSocketEndpointPath||"",dt=o.config.webSocketConstructorOptions||{},mt=(c=o.config.port)!==null&&c!==void 0?c:443;h.webSocketOptions={webSocket:lt,url:`wss://${nt}:${mt}/${gt}`,protocol:["AMQPWSB10"],options:dt}}const et=new CoreAmqpConnection(h),ot=`${Constants.establishConnection}-${lib.generate_uuid()}`;return{wasConnectionCloseCalled:!1,connectionLock:ot,negotiateClaimLock:`${Constants.negotiateClaim}-${lib.generate_uuid()}`,connection:et,connectionId:et.id,cbsSession:new CbsClient(et,ot),config:o.config,refreshConnection(){const lt=new CoreAmqpConnection(h),nt=`${Constants.establishConnection}-${lib.generate_uuid()}`;this.wasConnectionCloseCalled=!1,this.connectionLock=nt,this.negotiateClaimLock=`${Constants.negotiateClaim} - ${lib.generate_uuid()}`,this.connection=lt,this.connectionId=lt.id,this.cbsSession=new CbsClient(lt,nt)}}}},AmqpAnnotatedMessage={fromRheaMessage(o){const e={header:AmqpMessageHeader.fromRheaMessageHeader(o),footer:o.footer,messageAnnotations:o.message_annotations,deliveryAnnotations:o.delivery_annotations,applicationProperties:o.application_properties,properties:AmqpMessageProperties.fromRheaMessageProperties(o),body:o.body};if(o.absolute_expiry_time){const a=o.absolute_expiry_time.getTime();e.properties.absoluteExpiryTime=Math.min(a,Constants.maxAbsoluteExpiryTime),o.creation_time&&(e.header.timeToLive=e.properties.absoluteExpiryTime-o.creation_time.getTime())}return e},toRheaMessage(o){var e,a;const c=Object.assign(Object.assign(Object.assign({},AmqpMessageProperties.toRheaMessageProperties(o.properties||{})),AmqpMessageHeader.toRheaMessageHeader(o.header||{})),{body:o.body,message_annotations:o.messageAnnotations,delivery_annotations:o.deliveryAnnotations,application_properties:o.applicationProperties,footer:o.footer});if(!((e=o.header)===null||e===void 0)&&e.timeToLive){const j=o.header.timeToLive;c.ttl=Math.min(j,Constants.maxUint32Value),c.creation_time=(a=c.creation_time)!==null&&a!==void 0?a:new Date,c.absolute_expiry_time=new Date(Math.min(c.creation_time.getTime()+j,Constants.maxAbsoluteExpiryTime))}return c}};function isNamedKeyCredential(o){return isObjectWithProperties(o,["name","key"])&&typeof o.key=="string"&&typeof o.name=="string"}function isSASCredential(o){return isObjectWithProperties(o,["signature"])&&typeof o.signature=="string"}function isTokenCredential(o){const e=o;return e&&typeof e.getToken=="function"&&(e.signRequest===void 0||e.getToken.length>0)}async function signString(o,e){const a=new TextEncoder,c={name:"HMAC",hash:{name:"SHA-256"}},j=await globalThis.crypto.subtle.importKey("raw",a.encode(o),c,!1,["sign","verify"]),h=await globalThis.crypto.subtle.sign(c,j,a.encode(e)),et=btoa(String.fromCharCode(...new Uint8Array(h)));return encodeURIComponent(et)}function createSasTokenProvider(o){return isNamedKeyCredential(o)||isSASCredential(o)?new SasTokenProviderImpl(o):"sharedAccessKeyName"in o&&"sharedAccessKey"in o?new SasTokenProviderImpl({name:o.sharedAccessKeyName,key:o.sharedAccessKey}):new SasTokenProviderImpl({signature:o.sharedAccessSignature})}class SasTokenProviderImpl{get isSasTokenProvider(){return!0}constructor(e){this._credential=e}async getToken(e){return isNamedKeyCredential(this._credential)?createToken(this._credential.name,this._credential.key,Math.floor(Date.now()/1e3)+3600,e):{token:this._credential.signature,expiresOnTimestamp:0}}}async function createToken(o,e,a,c){c=encodeURIComponent(c),o=encodeURIComponent(o);const j=c+`
`+a,h=await signString(e,j);return{token:`SharedAccessSignature sr=${c}&sig=${h}&se=${a}&skn=${o}`,expiresOnTimestamp:a}}function isSasTokenProvider(o){return isObjectWithProperties(o,["isSasTokenProvider"])&&o.isSasTokenProvider===!0}function getEventPositionFilter(o){let e;if(isDefined(o.offset))e=o.isInclusive?`${Constants.offsetAnnotation} >= '${o.offset}'`:`${Constants.offsetAnnotation} > '${o.offset}'`;else if(isDefined(o.sequenceNumber))e=o.isInclusive?`${Constants.sequenceNumberAnnotation} >= '${o.sequenceNumber}'`:`${Constants.sequenceNumberAnnotation} > '${o.sequenceNumber}'`;else if(isDefined(o.enqueuedOn)){const a=o.enqueuedOn instanceof Date?o.enqueuedOn.getTime():o.enqueuedOn;e=`${Constants.enqueuedTimeAnnotation} > '${a}'`}if(!e)throw translate({condition:ErrorNameConditionMapper.ArgumentError,description:"No starting position was set in the EventPosition."});return e}const latestEventPosition={offset:"@latest"};function validateEventPositions(o){if(!isDefined(o))return;const e=Object.keys(o);if(!e.length)throw new TypeError("Invalid value for EventPosition found. Pass an object with either of offset, sequenceNumber or enqueuedOn properties set.");if(isEventPosition(o)){validateEventPosition(o);return}const a=o;for(let c=0;c<e.length;c++)Object.prototype.hasOwnProperty.call(a,e[c])&&validateEventPosition(a[e[c]])}function isEventPosition(o){return o?!!(objectHasProperty(o,"offset")&&isDefined(o.offset)||objectHasProperty(o,"sequenceNumber")&&isDefined(o.sequenceNumber)||objectHasProperty(o,"enqueuedOn")&&isDefined(o.enqueuedOn)):!1}function validateEventPosition(o){if(!isDefined(o))return;const e=isDefined(o.offset),a=isDefined(o.sequenceNumber),c=isDefined(o.enqueuedOn);if(e&&a||e&&c||c&&a)throw new TypeError("Invalid value for EventPosition found. Set only one of offset, sequenceNumber or enqueuedOn properties.");if(!e&&!c&&!a)throw new TypeError("Invalid value for EventPosition found. Pass an object with either of offset, sequenceNumber or enqueuedOn properties set.")}var CloseReason;(function(o){o.OwnershipLost="OwnershipLost",o.Shutdown="Shutdown"})(CloseReason||(CloseReason={}));/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer=function o(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)};const isBuffer$1=getDefaultExportFromCjs$1(isBuffer),dataSectionTypeCode=117,sequenceSectionTypeCode=118,valueSectionTypeCode=119,defaultDataTransformer={encode(o,e){let a;if(o===void 0&&(o=null),e==="value")a=lib.message.data_section(o),a.typecode=valueSectionTypeCode;else if(e==="sequence")a=lib.message.sequence_section(o);else if(isBuffer$1(o)||o instanceof Uint8Array)a=lib.message.data_section(o);else if(o===null&&e==="data")a=lib.message.data_section(null);else try{const c=JSON.stringify(o);a=lib.message.data_section(Buffer$1.from(c,"utf8"))}catch(c){const j="An error occurred while executing JSON.stringify() on the given body "+o+`${c?c.stack:JSON.stringify(c)}`;throw logger$1.warning("[encode] "+j),logErrorStackTrace$1(c),new Error(j)}return a},decode(o,e){try{if(isRheaAmqpSection(o))switch(o.typecode){case dataSectionTypeCode:return{body:e?o.content:tryToJsonDecode(o.content),bodyType:"data"};case sequenceSectionTypeCode:return{body:o.content,bodyType:"sequence"};case valueSectionTypeCode:return{body:o.content,bodyType:"value"}}else return isBuffer$1(o)?{body:e?o:tryToJsonDecode(o),bodyType:"data"}:{body:o,bodyType:"value"}}catch(a){throw logger$1.verbose("[decode] An error occurred while decoding the received message body. The error is: %O",a),a}}};function tryToJsonDecode(o){let e=o;try{const a=e.toString("utf8");e=JSON.parse(a)}catch(a){logger$1.verbose("[decode] An error occurred while trying JSON.parse() on the received body. The error is %O",a)}return e}function isRheaAmqpSection(o){return o!=null&&typeof o.typecode=="number"&&(o.typecode===dataSectionTypeCode||o.typecode===valueSectionTypeCode||o.typecode===sequenceSectionTypeCode)}const packageJsonInfo={name:"@azure/event-hubs",version:"5.12.2"},receiverIdPropertyName="com.microsoft:receiver-name",messagePropertiesMap={message_id:"messageId",user_id:"userId",to:"to",subject:"subject",reply_to:"replyTo",correlation_id:"correlationId",content_type:"contentType",content_encoding:"contentEncoding",absolute_expiry_time:"absoluteExpiryTime",creation_time:"creationTime",group_id:"groupId",group_sequence:"groupSequence",reply_to_group_id:"replyToGroupId"};function fromRheaMessage(o,e){const a=AmqpAnnotatedMessage.fromRheaMessage(o),{body:c,bodyType:j}=defaultDataTransformer.decode(o.body,e);a.bodyType=j;const h={body:c,getRawAmqpMessage(){return a}};if(o.message_annotations)for(const ot of Object.keys(o.message_annotations))switch(ot){case Constants.partitionKey:h.partitionKey=o.message_annotations[ot];break;case Constants.sequenceNumber:h.sequenceNumber=o.message_annotations[ot];break;case Constants.enqueuedTime:h.enqueuedTimeUtc=new Date(o.message_annotations[ot]);break;case Constants.offset:h.offset=o.message_annotations[ot];break;default:h.systemProperties||(h.systemProperties={}),h.systemProperties[ot]=convertDatesToNumbers(o.message_annotations[ot]);break}o.application_properties&&(h.properties=convertDatesToNumbers(o.application_properties)),o.delivery_annotations&&(h.lastEnqueuedOffset=o.delivery_annotations.last_enqueued_offset,h.lastSequenceNumber=o.delivery_annotations.last_enqueued_sequence_number,h.lastEnqueuedTime=new Date(o.delivery_annotations.last_enqueued_time_utc),h.retrievalTime=new Date(o.delivery_annotations.runtime_info_retrieval_time_utc));const et=Object.keys(messagePropertiesMap);for(const ot of et)h.systemProperties||(h.systemProperties={}),o[ot]!=null&&(h.systemProperties[messagePropertiesMap[ot]]=convertDatesToNumbers(o[ot]));return o.content_type!=null&&(h.contentType=o.content_type),o.correlation_id!=null&&(h.correlationId=o.correlation_id),o.message_id!=null&&(h.messageId=o.message_id),h}function convertDatesToNumbers(o){if(!isDefined(o))return o;if(typeof o=="object"&&objectHasProperty(o,"getTime")&&typeof o.getTime=="function")return o.getTime();if(Array.isArray(o))return o.map(convertDatesToNumbers);if(typeof o=="object"&&isDefined(o)){const e=Object.assign({},o);for(const a of Object.keys(e))e[a]=convertDatesToNumbers(e[a]);return e}return o}function getRetryAttemptTimeoutInMs(o={}){const{timeoutInMs:e}=o;return typeof e!="number"||!isFinite(e)?Constants.defaultOperationTimeoutInMs:e}function getRandomName(o){const e=randomUUID();return o?`${o}-${e}`:e}function createTimerLoop(o,e){let a;const c={start:()=>{clearTimeout(a),a=setTimeout(()=>e().catch(()=>{}).finally(c.start),o),c.isRunning=!0},stop:()=>{clearTimeout(a),c.isRunning=!1},isRunning:!1};return c}async function withAuth(o,e,a,c,j,h){const et=await getTokenInfo(e.tokenCredential,a);await setupClaimNegotiation(e,a,et,c,j,h),await o();async function ot(){try{const lt=await getTokenInfo(e.tokenCredential,a);await setupClaimNegotiation(e,a,lt,c,j,h),j.verbose(`next token renewal is in ${lt.timeToLiveInMs} milliseconds @(${new Date(Date.now()+lt.timeToLiveInMs).toString()}).`)}catch(lt){j.verbose(`an error occurred while renewing the token: ${logObj(lt)}`)}}const st=createTimerLoop(et.timeToLiveInMs,ot);return st.start(),st}async function openCbsSession(o,e,{abortSignal:a}={}){return defaultCancellableLock.acquire(o.cbsLock,()=>o.init({abortSignal:a,timeoutInMs:e-Date.now()}),{abortSignal:a,timeoutInMs:e-Date.now()})}async function getAadToken(o){const e=await o.getToken(Constants.aadEventHubsScope);if(!e)throw new Error('Failed to get token from the provided "TokenCredential" object');return{token:e,type:TokenType.CbsTokenTypeJwt,timeToLiveInMs:e.expiresOnTimestamp-Date.now()-2*60*1e3}}async function getSharedKeyBasedToken(o,e){return{token:await o.getToken(e),type:TokenType.CbsTokenTypeSas,timeToLiveInMs:45*60*1e3}}async function getTokenInfo(o,e){return isSasTokenProvider(o)?getSharedKeyBasedToken(o,e):getAadToken(o)}function negotiateClaim({token:o,type:e},a,c,j,h,et){return defaultCancellableLock.acquire(h,()=>c.negotiateClaim(a,o.token,e,{abortSignal:et,timeoutInMs:j-Date.now()}),{abortSignal:et,timeoutInMs:j-Date.now()})}async function setupClaimNegotiation(o,e,a,c,j,{abortSignal:h}){const et=Date.now();j.verbose(`acquiring cbs lock: '${o.cbsSession.cbsLock}' for creating the cbs session`),await openCbsSession(o.cbsSession,c+et,{abortSignal:h}),j.verbose(`acquiring cbs lock: '${o.negotiateClaimLock}' for cbs auth`),await negotiateClaim(a,e,o.cbsSession,c+et,o.negotiateClaimLock,h),j.verbose("claim negotiation succeeded")}const abortLogMessage="operation has been cancelled by the user",qReadIntervalInMs=20;function createReceiver(o,e,a,c,j,h={}){const et=o.config.getReceiverAddress(c,e),ot=getRandomName(et),st=o.config.getReceiverAudience(c,e),lt=createReceiverLogPrefix(a,o.connectionId,c),nt=createSimpleLogger(logger$1,lt),gt=[],dt={isConnecting:!1},mt={_onError:void 0,checkpoint:-1,lastEnqueuedEventProperties:{},isClosed:!1,close:async()=>{var vt,tt;return clearHandlers(mt),delete o.receivers[ot],nt.verbose("deleted the receiver from the client cache"),(vt=dt.authLoop)===null||vt===void 0||vt.stop(),(tt=dt.link)===null||tt===void 0?void 0:tt.close().catch(bt=>{throw nt.warning(`an error occurred while closing: ${bt==null?void 0:bt.name}: ${bt==null?void 0:bt.message}`),logErrorStackTrace$1(bt),bt}).finally(()=>{mt.isClosed=!0,nt.verbose("is closed"),dt.link=void 0,dt.authLoop=void 0})},abort:()=>{var vt;return(vt=mt._onError)===null||vt===void 0||vt.call(mt,new AbortError(StandardAbortMessage)),nt.info(abortLogMessage),mt.close()},isOpen:()=>{var vt;const tt=!!(!((vt=dt.link)===null||vt===void 0)&&vt.isOpen());return nt.verbose(`is open? -> ${tt}`),tt},async connect({abortSignal:vt,timeoutInMs:tt}){if(!(dt.isConnecting||mt.isOpen())){dt.isConnecting=!0,nt.verbose("is trying to connect");try{await o.readyToOpenLink({abortSignal:vt}),dt.authLoop=await withAuth(()=>setupLink(a,o,ot,et,mt,dt,gt,j,nt,h,vt),o,st,tt,nt,{abortSignal:vt})}catch(bt){dt.isConnecting=!1;const ht=translate(bt);throw nt.error(`an error occurred while creating the receiver: ${ht==null?void 0:ht.name}: ${ht==null?void 0:ht.message}`),logErrorStackTrace$1(bt),ht}}},receiveBatch:(vt,tt=60,bt)=>{var ht,St;const At=(ht=h.prefetchCount)!==null&&ht!==void 0?ht:vt*3,Tt=()=>(nt.info(abortLogMessage),mt.close());return retry(Object.defineProperties({operation:()=>{const _t=Math.max(vt-gt.length,0);return nt.verbose(`already has ${gt.length} events and wants to receive ${_t} more events`),bt!=null&&bt.aborted?(Tt(),Promise.reject(new AbortError(StandardAbortMessage))):mt.isClosed||o.wasConnectionCloseCalled||_t===0?Promise.resolve(gt.splice(0,vt)):new Promise((Rt,Mt)=>{mt._onError=Mt,mt.connect({abortSignal:bt,timeoutInMs:getRetryAttemptTimeoutInMs(h.retryOptions)}).then(()=>(addCredits(dt.link,Math.max(At,vt)-gt.length),nt.verbose(`setting the max wait time to ${tt} seconds`),waitForEvents(vt,tt*1e3,qReadIntervalInMs,gt,{abortSignal:bt,cleanupBeforeAbort:Tt,receivedAfterWait:()=>nt.info(`${Math.min(vt,gt.length)} messages received within ${tt} seconds`),receivedAlready:()=>nt.info(`${vt} messages already received`),receivedNone:()=>nt.info(`no messages received when max wait time in seconds ${tt} is over`)}))).catch(Mt).then(Rt)}).then(()=>gt.splice(0,vt)).finally(()=>clearHandlers(mt))},operationType:RetryOperationType.receiveMessage,abortSignal:bt,retryOptions:(St=h.retryOptions)!==null&&St!==void 0?St:{}},{connectionId:{enumerable:!0,get:()=>o.connectionId},connectionHost:{enumerable:!0,get:()=>o.config.host}}))}};return mt}function delay(o,e){let a;return createAbortablePromise(c=>{a=setTimeout(c,o)},e).finally(()=>clearTimeout(a))}function checkOnInterval(o,e,a){let c;return createAbortablePromise(j=>{c=setInterval(()=>{e()&&j()},o)},a).finally(()=>clearInterval(c))}function waitForEvents(o,e,a,c,j={}){const{abortSignal:h,cleanupBeforeAbort:et,receivedNone:ot,receivedAfterWait:st,receivedAlready:lt}=j;if(c.length>=o)return Promise.resolve().then(lt);const nt=new AbortController,gt=()=>{nt.abort()};h==null||h.addEventListener("abort",gt);let dt=!1;const mt={abortSignal:nt.signal,abortErrorMsg:StandardAbortMessage,cleanupBeforeAbort:()=>{h!=null&&h.aborted&&!dt&&(et==null||et(),dt=!0)}};return Promise.race([checkOnInterval(a,()=>c.length>0,mt).then(()=>delay(a,mt)).then(st),delay(e,mt).then(ot)]).finally(()=>{nt.abort(),h==null||h.removeEventListener("abort",gt)})}function convertAMQPMesage(o){const e=o.getRawAmqpMessage(),a={body:o.body,properties:o.properties,offset:o.offset,sequenceNumber:o.sequenceNumber,enqueuedTimeUtc:o.enqueuedTimeUtc,partitionKey:o.partitionKey,systemProperties:o.systemProperties,getRawAmqpMessage(){return e}};return o.correlationId!=null&&(a.correlationId=o.correlationId),o.contentType!=null&&(a.contentType=o.contentType),o.messageId!=null&&(a.messageId=o.messageId),a}function setEventProps(o,e){o.sequenceNumber=e.lastSequenceNumber,o.enqueuedOn=e.lastEnqueuedTime,o.offset=`${e.lastEnqueuedOffset}`,o.retrievedOn=e.retrievalTime}function clearHandlers(o){o._onError=void 0}function onMessage(o,e,a,c){if(!o.message)return;const j=fromRheaMessage(o.message,!!c.skipParsingBodyAsJson),h=convertAMQPMesage(j);e.checkpoint=h.sequenceNumber,c.trackLastEnqueuedEventProperties&&setEventProps(e.lastEnqueuedEventProperties,j),a.push(h)}function onError(o,e,a,c){const j=a||o.receiver,h=j==null?void 0:j.error;if(c.verbose(`'receiver_error' event occurred: ${logObj(h)}`),e._onError&&h){const et=translate(h);logErrorStackTrace$1(et),e._onError(et)}}function onSessionError(o,e,a){var c;const j=(c=o.session)===null||c===void 0?void 0:c.error;if(a.verbose(`'session_error' event occurred: ${logObj(j)}`),e._onError&&j){const h=translate(j);logErrorStackTrace$1(h),e._onError(h)}}async function onClose(o,e,a){const c=e.link||o.receiver;if(a.verbose(`'receiver_close' event occurred. Value for isItselfClosed on the receiver is: '${c==null?void 0:c.isItselfClosed().toString()}' Value for isConnecting on the session is: '${e.isConnecting}'`),c&&!e.isConnecting)return c.close().catch(j=>{a.verbose(`error when closing after 'receiver_close' event: ${logObj(j)}`)})}async function onSessionClose(o,e,a){const c=e.link||o.receiver;if(a.verbose(`'session_close' event occurred. Value for isSessionItselfClosed on the session is: '${c==null?void 0:c.isSessionItselfClosed().toString()}' Value for isConnecting on the session is: '${e.isConnecting}'`),c&&!e.isConnecting)return c.close().catch(j=>{a.verbose(`error when closing after 'session_close' event: ${logObj(j)}`)})}function createRheaOptions(o,e,a,c,j,h,et,ot,st){const lt={name:e,autoaccept:!0,target:o,source:{address:a},credit_window:0,properties:{[receiverIdPropertyName]:o},onClose:dt=>onClose(dt,j,ot),onSessionClose:dt=>onSessionClose(dt,j,ot),onError:dt=>onError(dt,c,j.link,ot),onMessage:dt=>onMessage(dt,c,h,st),onSessionError:dt=>onSessionError(dt,c,ot)},nt=st.ownerLevel;typeof nt=="number"&&(lt.properties[Constants.attachEpoch]=lib.types.wrap_long(nt)),st.trackLastEnqueuedEventProperties&&(lt.desired_capabilities=[Constants.enableReceiverRuntimeMetricName]);const gt=getEventPositionFilter(c.checkpoint>-1?{sequenceNumber:c.checkpoint}:et);return lt.source.filter={"apache.org:selector-filter:string":lib.types.wrap_described(gt,77567109365764)},lt}async function setupLink(o,e,a,c,j,h,et,ot,st,lt,nt){const gt=createRheaOptions(o,a,c,j,h,et,ot,st,lt);st.verbose(`trying to be created with options ${logObj(gt)}`),h.link=await e.connection.createReceiver(Object.assign(Object.assign({},gt),{abortSignal:nt})),h.isConnecting=!1,st.verbose("is created successfully"),e.receivers[a]=j}function addCredits(o,e){e>0&&(o==null||o.addCredit(e))}const knownContextKeys={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function createTracingContext(o={}){let e=new TracingContextImpl(o.parentContext);return o.span&&(e=e.setValue(knownContextKeys.span,o.span)),o.namespace&&(e=e.setValue(knownContextKeys.namespace,o.namespace)),e}class TracingContextImpl{constructor(e){this._contextMap=e instanceof TracingContextImpl?new Map(e._contextMap):new Map}setValue(e,a){const c=new TracingContextImpl(this);return c._contextMap.set(e,a),c}getValue(e){return this._contextMap.get(e)}deleteValue(e){const a=new TracingContextImpl(this);return a._contextMap.delete(e),a}}const state={instrumenterImplementation:void 0};function createDefaultTracingSpan(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function createDefaultInstrumenter(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(o,e)=>({span:createDefaultTracingSpan(),tracingContext:createTracingContext({parentContext:e.tracingContext})}),withContext(o,e,...a){return e(...a)}}}function getInstrumenter(){return state.instrumenterImplementation||(state.instrumenterImplementation=createDefaultInstrumenter()),state.instrumenterImplementation}function createTracingClient(o){const{namespace:e,packageName:a,packageVersion:c}=o;function j(lt,nt,gt){var dt;const mt=getInstrumenter().startSpan(lt,Object.assign(Object.assign({},gt),{packageName:a,packageVersion:c,tracingContext:(dt=nt==null?void 0:nt.tracingOptions)===null||dt===void 0?void 0:dt.tracingContext}));let vt=mt.tracingContext;const tt=mt.span;vt.getValue(knownContextKeys.namespace)||(vt=vt.setValue(knownContextKeys.namespace,e)),tt.setAttribute("az.namespace",vt.getValue(knownContextKeys.namespace));const bt=Object.assign({},nt,{tracingOptions:Object.assign(Object.assign({},nt==null?void 0:nt.tracingOptions),{tracingContext:vt})});return{span:tt,updatedOptions:bt}}async function h(lt,nt,gt,dt){const{span:mt,updatedOptions:vt}=j(lt,nt,dt);try{const tt=await et(vt.tracingOptions.tracingContext,()=>Promise.resolve(gt(vt,mt)));return mt.setStatus({status:"success"}),tt}catch(tt){throw mt.setStatus({status:"error",error:tt}),tt}finally{mt.end()}}function et(lt,nt,...gt){return getInstrumenter().withContext(lt,nt,...gt)}function ot(lt){return getInstrumenter().parseTraceparentHeader(lt)}function st(lt){return getInstrumenter().createRequestHeaders(lt)}return{startSpan:j,withSpan:h,withContext:et,parseTraceparentHeader:ot,createRequestHeaders:st}}const tracingClient=createTracingClient({namespace:"Microsoft.EventHub",packageName:packageJsonInfo.name,packageVersion:packageJsonInfo.version});function toSpanOptions(o,e,a){const j={"messaging.system":"eventhubs",[e==="process"||e==="receive"?"messaging.source.name":"messaging.destination.name"]:o.entityPath,"net.peer.name":o.host};return e&&(j["messaging.operation"]=e),{spanAttributes:j}}const TRACEPARENT_PROPERTY="Diagnostic-Id";function extractSpanContextFromEventData(o){if(!o.properties||!o.properties[TRACEPARENT_PROPERTY])return;const e=o.properties[TRACEPARENT_PROPERTY];return tracingClient.parseTraceparentHeader(e)}class PartitionPump{constructor(e,a,c,j){this._context=e,this._startPosition=c,this._isReceiving=!1,this._isStopped=!1,this._partitionProcessor=a,this._processorOptions=j,this._abortController=new AbortController}get isReceiving(){return this._isReceiving}async start(){this._isReceiving=!0;try{await this._partitionProcessor.initialize()}catch(e){this._partitionProcessor.processError(e)}this._receiveEvents(this._partitionProcessor.partitionId),logger$1.info(`Successfully started the receiver for partition "${this._partitionProcessor.partitionId}".`)}_setOrReplaceReceiver(e,a){const c=a>=0?{sequenceNumber:a,isInclusive:!1}:this._startPosition;return this._receiver=createReceiver(this._context,this._partitionProcessor.consumerGroup,this._partitionProcessor.eventProcessorId,e,c,{ownerLevel:this._processorOptions.ownerLevel,trackLastEnqueuedEventProperties:this._processorOptions.trackLastEnqueuedEventProperties,retryOptions:this._processorOptions.retryOptions,skipParsingBodyAsJson:this._processorOptions.skipParsingBodyAsJson,prefetchCount:this._processorOptions.prefetchCount}),this._receiver}async _receiveEvents(e){let a=-1,c=this._setOrReplaceReceiver(e,a);for(;this._isReceiving;)try{c.isClosed&&(c=this._setOrReplaceReceiver(e,a));const j=await c.receiveBatch(this._processorOptions.maxBatchSize,this._processorOptions.maxWaitTimeInSeconds,this._abortController.signal);if(this._processorOptions.trackLastEnqueuedEventProperties&&c.lastEnqueuedEventProperties&&(this._partitionProcessor.lastEnqueuedEventProperties=c.lastEnqueuedEventProperties),!this._isReceiving)return;j.length&&(a=j[j.length-1].sequenceNumber),await tracingClient.withSpan("PartitionPump.process",{},()=>this._partitionProcessor.processEvents(j),toProcessingSpanOptions(j,this._context.config))}catch(j){if(!this._isReceiving)return;logger$1.warning(`An error was thrown while receiving or processing events on partition "${this._partitionProcessor.partitionId}"`),logErrorStackTrace$1(j);try{await this._partitionProcessor.processError(j)}catch(h){logger$1.verbose("An error was thrown by user's processError method: ",h)}if(typeof j!="object"||!j.retryable)try{return j.code==="ReceiverDisconnectedError"?await this.stop(CloseReason.OwnershipLost):await this.stop(CloseReason.Shutdown)}catch(h){logger$1.verbose(`An error occurred while closing the receiver with reason ${CloseReason.Shutdown}: `,h)}}}async stop(e){var a;if(!this._isStopped){this._isStopped=!0,this._isReceiving=!1;try{this._abortController.abort(),await((a=this._receiver)===null||a===void 0?void 0:a.close()),await this._partitionProcessor.close(e)}catch(c){throw logger$1.warning(`An error occurred while closing the receiver: ${c==null?void 0:c.name}: ${c==null?void 0:c.message}`),logErrorStackTrace$1(c),this._partitionProcessor.processError(c),c}}}}function toProcessingSpanOptions(o,e){const a=[];for(const c of o){const j=extractSpanContextFromEventData(c);j&&a.push({tracingContext:j,attributes:{enqueuedTime:c.enqueuedTimeUtc.getTime()}})}return Object.assign({spanLinks:a,spanKind:"consumer"},toSpanOptions(e,"process"))}class PumpManagerImpl{constructor(e,a){this._partitionIdToPumps={},this._eventProcessorName=e,this._options=a}receivingFromPartitions(){return Object.keys(this._partitionIdToPumps).filter(e=>{const a=this._partitionIdToPumps[e];return!!(a&&a.isReceiving)})}isReceivingFromPartition(e){const a=this._partitionIdToPumps[e];return!!(a&&a.isReceiving)}async createPump(e,a,c,j){const h=c.partitionId;if(j.aborted){logger$1.verbose(`${this._eventProcessorName}] The subscription was closed before creating the pump for partition ${h}.`);return}const et=this._partitionIdToPumps[h];if(et){if(et.isReceiving){logger$1.verbose(`[${this._eventProcessorName}] [${h}] The existing pump is running.`);return}logger$1.verbose(`[${this._eventProcessorName}] [${h}] The existing pump is not running.`),await this.removePump(h,CloseReason.OwnershipLost)}logger$1.verbose(`[${this._eventProcessorName}] [${h}] Creating a new pump.`);const ot=new PartitionPump(a,c,e,this._options);try{this._partitionIdToPumps[h]=ot,await ot.start()}catch(st){logger$1.verbose(`[${this._eventProcessorName}] [${h}] An error occured while adding/updating a pump: ${st}`),logErrorStackTrace$1(st)}}async removePump(e,a){try{const c=this._partitionIdToPumps[e];c?(delete this._partitionIdToPumps[e],logger$1.verbose(`[${this._eventProcessorName}] [${e}] Stopping the pump.`),await c.stop(a)):logger$1.verbose(`[${this._eventProcessorName}] [${e}] No pump was found to remove.`)}catch(c){logger$1.verbose(`[${this._eventProcessorName}] [${e}] An error occured while removing a pump: ${c}`),logErrorStackTrace$1(c)}}async removeAllPumps(e){const a=Object.keys(this._partitionIdToPumps);logger$1.verbose(`[${this._eventProcessorName}] Removing all pumps due to reason ${e}.`);const c=[];for(const j of a){const h=this._partitionIdToPumps[j];h&&c.push(h.stop(e))}try{await Promise.all(c)}catch(j){logger$1.verbose(`[${this._eventProcessorName}] An error occured while removing all pumps: ${j}`),logErrorStackTrace$1(j)}finally{this._partitionIdToPumps={}}}}async function delayWithoutThrow(o,e){try{await delay$1(o,e)}catch{}}class EventProcessor{constructor(e,a,c,j,h){this._consumerGroup=e,this._context=a,this._subscriptionEventHandlers=c,this._checkpointStore=j,this._isRunning=!1,h.ownerId?(this._id=h.ownerId,logger$1.verbose(`Starting event processor with ID ${this._id}`)):(this._id=getRandomName(),logger$1.verbose(`Starting event processor with autogenerated ID ${this._id}`)),this._eventHubName=this._context.config.entityPath,this._fullyQualifiedNamespace=this._context.config.host,this._processorOptions=h,this._pumpManager=h.pumpManager||new PumpManagerImpl(this._id,this._processorOptions),this._processingTarget=h.processingTarget,this._loopIntervalInMs=h.loopIntervalInMs,this._loadBalancingStrategy=h.loadBalancingStrategy}get id(){return this._id}_createPartitionOwnershipRequest(e,a){const c=e.get(a);return{ownerId:this._id,partitionId:a,fullyQualifiedNamespace:this._fullyQualifiedNamespace,consumerGroup:this._consumerGroup,eventHubName:this._eventHubName,etag:c?c.etag:void 0}}async _claimOwnership(e,a){if(a.aborted){logger$1.verbose(`[${this._id}] Subscription was closed before claiming ownership of ${e.partitionId}.`);return}logger$1.info(`[${this._id}] Attempting to claim ownership of partition ${e.partitionId}.`);try{if(!(await this._checkpointStore.claimOwnership([e])).length)return;logger$1.info(`[${this._id}] Successfully claimed ownership of partition ${e.partitionId}.`),await this._startPump(e.partitionId,a)}catch(c){logger$1.warning(`[${this._id}] Failed to claim ownership of partition ${e.partitionId}`),logErrorStackTrace$1(c),await this._handleSubscriptionError(c)}}async _startPump(e,a){if(a.aborted){logger$1.verbose(`[${this._id}] The subscription was closed before starting to read from ${e}.`);return}if(this._pumpManager.isReceivingFromPartition(e)){logger$1.verbose(`[${this._id}] There is already an active partitionPump for partition "${e}", skipping pump creation.`);return}logger$1.verbose(`[${this._id}] [${e}] Calling user-provided PartitionProcessorFactory.`);const c=new PartitionProcessor(this._subscriptionEventHandlers,this._checkpointStore,{fullyQualifiedNamespace:this._fullyQualifiedNamespace,eventHubName:this._eventHubName,consumerGroup:this._consumerGroup,partitionId:e,eventProcessorId:this._id}),j=await this._getStartingPosition(e);await this._pumpManager.createPump(j,this._context,c,a),logger$1.verbose(`[${this._id}] PartitionPump created successfully.`)}async _getStartingPosition(e){const c=(await this._checkpointStore.listCheckpoints(this._fullyQualifiedNamespace,this._eventHubName,this._consumerGroup)).filter(j=>j.partitionId===e);return c.length>0?{offset:c[0].offset}:(logger$1.verbose(`No checkpoint found for partition ${e}. Looking for fallback.`),getStartPosition(e,this._processorOptions.startPosition))}async _runLoopForSinglePartition(e,a){for(;!a.aborted;)try{await this._startPump(e,a)}catch(c){logger$1.warning(`[${this._id}] An error occurred within the EventProcessor loop: ${c==null?void 0:c.name}: ${c==null?void 0:c.message}`),logErrorStackTrace$1(c),await this._handleSubscriptionError(c)}finally{logger$1.verbose(`[${this._id}] Pausing the EventProcessor loop for ${this._loopIntervalInMs} ms.`),await delayWithoutThrow(this._loopIntervalInMs,a)}this._isRunning=!1}async _runLoopWithLoadBalancing(e,a){let c;const j=new Promise(h=>{if(c=h,a.aborted){h();return}a.addEventListener("abort",h)});for(;!a.aborted;){const h=Date.now();try{const{partitionIds:et}=await this._context.managementSession.getEventHubProperties({abortSignal:a});await this._performLoadBalancing(e,et,a)}catch(et){logger$1.warning(`[${this._id}] An error occurred within the EventProcessor loop: ${et==null?void 0:et.name}: ${et==null?void 0:et.message}`),logErrorStackTrace$1(et),await Promise.race([this._handleSubscriptionError(et),j])}finally{const et=Date.now()-h,ot=Math.max(this._loopIntervalInMs-et,0);logger$1.verbose(`[${this._id}] Pausing the EventProcessor loop for ${ot} ms.`),await delayWithoutThrow(ot,a)}}c&&a.removeEventListener("abort",c),this._isRunning=!1}async _performLoadBalancing(e,a,c){if(c.aborted)throw new AbortError(StandardAbortMessage);const j=await this._checkpointStore.listOwnership(this._fullyQualifiedNamespace,this._eventHubName,this._consumerGroup);if(c.aborted)throw new AbortError(StandardAbortMessage);const{partitionOwnershipMap:h,partitionsToClaim:et}=computePartitionsToClaim({id:this._id,isReceivingFromPartition:ot=>this._pumpManager.isReceivingFromPartition(ot),loadBalancingStrategy:e,partitionIds:a,partitionOwnership:j});for(const ot of et){const st=this._createPartitionOwnershipRequest(h,ot);await this._claimOwnership(st,c)}}async _handleSubscriptionError(e){if(e.name!=="AbortError"&&this._subscriptionEventHandlers.processError)try{await this._subscriptionEventHandlers.processError(e,{fullyQualifiedNamespace:this._fullyQualifiedNamespace,eventHubName:this._eventHubName,consumerGroup:this._consumerGroup,partitionId:"",updateCheckpoint:async()=>{}})}catch(a){logger$1.verbose(`[${this._id}] An error was thrown from the user's processError handler: ${a}`)}}start(){if(this._isRunning){logger$1.verbose(`[${this._id}] Attempted to start an already running EventProcessor.`);return}this._isRunning=!0,this._abortController=new AbortController,logger$1.verbose(`[${this._id}] Starting an EventProcessor.`),this._processingTarget?(logger$1.verbose(`[${this._id}] Single partition target: ${this._processingTarget}`),this._loopTask=this._runLoopForSinglePartition(this._processingTarget,this._abortController.signal)):(logger$1.verbose(`[${this._id}] Multiple partitions, using load balancer`),this._loopTask=this._runLoopWithLoadBalancing(this._loadBalancingStrategy,this._abortController.signal))}isRunning(){return this._isRunning}async stop(){var e;logger$1.verbose(`[${this._id}] Stopping an EventProcessor.`),(e=this._abortController)===null||e===void 0||e.abort();try{await this._pumpManager.removeAllPumps(CloseReason.Shutdown),this._loopTask&&await this._loopTask}catch(a){logger$1.verbose(`[${this._id}] An error occurred while stopping the EventProcessor: ${a}`)}finally{logger$1.verbose(`[${this._id}] EventProcessor stopped.`)}this._processingTarget?logger$1.verbose(`[${this._id}] No partitions owned, skipping abandoning.`):await this.abandonPartitionOwnerships()}async abandonPartitionOwnerships(){logger$1.verbose(`[${this._id}] Abandoning owned partitions`);const a=(await this._checkpointStore.listOwnership(this._fullyQualifiedNamespace,this._eventHubName,this._consumerGroup)).filter(c=>c.ownerId===this._id);for(const c of a)c.ownerId="";return this._checkpointStore.claimOwnership(a)}}function isAbandoned(o){return o.ownerId===""}function getStartPosition(o,e){if(e==null)return latestEventPosition;if(isEventPosition(e))return e;const a=e[o];return a??latestEventPosition}function computePartitionsToClaim(o){const{partitionOwnership:e,id:a,isReceivingFromPartition:c,loadBalancingStrategy:j,partitionIds:h}=o,et=new Map,ot=new Map,st=[];for(const nt of e)et.set(nt.partitionId,nt),isAbandoned(nt)||ot.set(nt.partitionId,nt),nt.ownerId===a&&c(nt.partitionId)&&st.push(nt.partitionId);const lt=j.getPartitionsToClaim(a,ot,h);return lt.push(...st),{partitionsToClaim:new Set(lt),partitionOwnershipMap:et}}function parseEventHubConnectionString(o){const e=parseConnectionString(o);validateProperties(e.Endpoint,e.SharedAccessSignature,e.SharedAccessKey,e.SharedAccessKeyName);const a={fullyQualifiedNamespace:(e.Endpoint.match(".*://([^/]*)")||[])[1],endpoint:e.Endpoint};return e.EntityPath&&(a.eventHubName=e.EntityPath),e.SharedAccessSignature&&(a.sharedAccessSignature=e.SharedAccessSignature),e.SharedAccessKey&&e.SharedAccessKeyName&&(a.sharedAccessKey=e.SharedAccessKey,a.sharedAccessKeyName=e.SharedAccessKeyName),a}function validateProperties(o,e,a,c){if(!o)throw new Error("Connection string should have an Endpoint key.");if(e){if(a||c)throw new Error("Connection string cannot have both SharedAccessSignature and SharedAccessKey keys.")}else{if(a&&!c)throw new Error("Connection string with SharedAccessKey should have SharedAccessKeyName.");if(!a&&c)throw new Error("Connection string with SharedAccessKeyName should have SharedAccessKey as well.")}}function throwErrorIfConnectionClosed(o){if(o&&o.wasConnectionCloseCalled){const e="The underlying AMQP connection is closed.",a=new Error(e);throw logger$1.warning(`[${o.connectionId}] ${a.name}: ${a.message}`),logErrorStackTrace$1(a),a}}function throwTypeErrorIfParameterMissing(o,e,a,c){if(!isDefined(c)){const j=new TypeError(`${e} called without required argument "${a}"`);throw logger$1.warning(`[${o}] ${j.name}: ${j.message}`),logErrorStackTrace$1(j),j}}var ConditionErrorNameMapper;(function(o){o["com.microsoft:out-of-order-sequence"]="SequenceOutOfOrderError",o["com.microsoft:producer-epoch-stolen"]="ProducerDisconnectedError"})(ConditionErrorNameMapper||(ConditionErrorNameMapper={}));class ManagementClient{constructor(e,{address:a,audience:c}={}){this.managementLock=getRandomName(Constants.managementRequestKey),this.replyTo=getRandomName(),this.address=a??Constants.management,this.audience=c??e.config.getManagementAudience(),this._context=e;const j=createManagementLogPrefix(this._context.connectionId);this.logger=createSimpleLogger(logger$1,j),this.entityPath=e.config.entityPath}async getSecurityToken(){if(isSasTokenProvider(this._context.tokenCredential)){const e=this.audience.split("/");e[e.length-1]===this.address&&e.pop();const a=e.join("/");return this._context.tokenCredential.getToken(a)}return this._context.tokenCredential.getToken(Constants.aadEventHubsScope)}async getEventHubProperties(e={}){return throwErrorIfConnectionClosed(this._context),tracingClient.withSpan("ManagementClient.getEventHubProperties",e,async a=>{try{const c=await this.getSecurityToken(),j={body:Buffer.from(JSON.stringify([])),message_id:getRandomName(),reply_to:this.replyTo,application_properties:{operation:Constants.readOperation,name:this.entityPath,type:`${Constants.vendorString}:${Constants.eventHub}`,security_token:c==null?void 0:c.token}},h=await this._makeManagementRequest(j,Object.assign(Object.assign({},a),{requestName:"getHubRuntimeInformation"})),et={name:h.name,createdOn:new Date(h.created_at),partitionIds:h.partition_ids};return logger$1.verbose("the hub runtime info is: %O",et),et}catch(c){throw logger$1.warning(`an error occurred while getting the hub runtime information: ${c==null?void 0:c.name}: ${c==null?void 0:c.message}`),logErrorStackTrace$1(c),c}},toSpanOptions(this._context.config))}async getPartitionProperties(e,a={}){return throwErrorIfConnectionClosed(this._context),throwTypeErrorIfParameterMissing(this._context.connectionId,"getPartitionProperties","partitionId",e),e=String(e),tracingClient.withSpan("ManagementClient.getPartitionProperties",a,async c=>{try{const j=await this.getSecurityToken(),h={body:Buffer.from(JSON.stringify([])),message_id:getRandomName(),reply_to:this.replyTo,application_properties:{operation:Constants.readOperation,name:this.entityPath,type:`${Constants.vendorString}:${Constants.partition}`,partition:`${e}`,security_token:j==null?void 0:j.token}},et=await this._makeManagementRequest(h,Object.assign(Object.assign({},c),{requestName:"getPartitionInformation"})),ot={beginningSequenceNumber:et.begin_sequence_number,eventHubName:et.name,lastEnqueuedOffset:et.last_enqueued_offset,lastEnqueuedOnUtc:new Date(et.last_enqueued_time_utc),lastEnqueuedSequenceNumber:et.last_enqueued_sequence_number,partitionId:et.partition,isEmpty:et.is_partition_empty};return logger$1.verbose("the partition info is: %O.",ot),ot}catch(j){throw logger$1.warning(`an error occurred while getting the partition information: ${j==null?void 0:j.name}: ${j==null?void 0:j.message}`),logErrorStackTrace$1(j),j}},toSpanOptions(this._context.config))}async close(){var e;try{if((e=this.authLoop)===null||e===void 0||e.stop(),this._isMgmtRequestResponseLinkOpen()){const a=this._mgmtReqResLink;this._mgmtReqResLink=void 0,await a.close(),logger$1.info("successfully closed the management session.")}}catch(a){const c=`an error occurred while closing the management session: ${a==null?void 0:a.name}: ${a==null?void 0:a.message}`;throw logger$1.warning(c),logErrorStackTrace$1(a),new Error(c)}}async _init({abortSignal:e,timeoutInMs:a}){const c=async()=>{const j={source:{address:this.address},name:this.replyTo,target:{address:this.replyTo},onSessionError:et=>{const ot=translate(et.session.error);logger$1.verbose("an error occurred on the session for request/response links for $management: %O",ot)}},h={target:{address:this.address}};logger$1.verbose("creating sender/receiver links with srOpts: %o, receiverOpts: %O.",h,j),this._mgmtReqResLink=await RequestResponseLink.create(this._context.connection,h,j,{abortSignal:e}),this._mgmtReqResLink.sender.on(lib.SenderEvents.senderError,et=>{const ot=translate(et.sender.error);logger$1.verbose("an error occurred on the $management sender link.. %O",ot)}),this._mgmtReqResLink.receiver.on(lib.ReceiverEvents.receiverError,et=>{const ot=translate(et.receiver.error);logger$1.verbose("an error occurred on the $management receiver link.. %O",ot)}),logger$1.verbose("created sender '%s' and receiver '%s' links",this._mgmtReqResLink.sender.name,this._mgmtReqResLink.receiver.name)};try{this._isMgmtRequestResponseLinkOpen()||(await this._context.readyToOpenLink(),this.authLoop=await withAuth(c,this._context,this.audience,a,this.logger,{abortSignal:e}))}catch(j){const h=translate(j);throw logger$1.warning(`an error occurred while establishing the links: ${h==null?void 0:h.name}: ${h==null?void 0:h.message}`),logErrorStackTrace$1(h),h}}async _makeManagementRequest(e,a={}){const c=a.retryOptions||{};try{const j=a&&a.abortSignal,et=Object.defineProperties({operation:async()=>{let ot=0;const st=getRetryAttemptTimeoutInMs(a.retryOptions);let lt=0;if(!this._isMgmtRequestResponseLinkOpen()){logger$1.verbose("acquiring lock to get the management req res link.");const dt=Date.now();try{await defaultCancellableLock.acquire(this.managementLock,()=>{const mt=Date.now(),vt=st-(mt-dt);return this._init({abortSignal:j,timeoutInMs:vt})},{abortSignal:j,timeoutInMs:st})}catch(mt){const vt=translate(mt);throw logger$1.warning("an error occurred while creating the link: %s",`${vt==null?void 0:vt.name}: ${vt==null?void 0:vt.message}`),logErrorStackTrace$1(vt),vt}lt=Date.now()-dt}const nt=st-lt,gt={abortSignal:a.abortSignal,requestName:a.requestName,timeoutInMs:nt};return ot++,ot!==1?e.message_id=getRandomName():e.message_id||(e.message_id=getRandomName()),this._mgmtReqResLink.sendRequest(e,gt)},operationType:RetryOperationType.management,abortSignal:j,retryOptions:c},{connectionId:{enumerable:!0,get:()=>this._context.connectionId}});return(await retry(et)).body}catch(j){const h=translate(j);throw logger$1.warning("an error occurred during send on management request-response link with address: %s",`${h==null?void 0:h.name}: ${h==null?void 0:h.message}`),logErrorStackTrace$1(h),h}}_isMgmtRequestResponseLinkOpen(){return this._mgmtReqResLink&&this._mgmtReqResLink.isOpen()}}function parseEndpoint(o){const e=o.match(/.*:\/\/([^/]*)/);if(!e)throw new TypeError(`Invalid endpoint missing host: ${o}`);const[,a]=e,[c,j]=a.split(":");return{host:a,hostname:c,port:j}}const EventHubConnectionConfig={create(o,e){const a=ConnectionConfig.create(o,e);if(!a.entityPath)throw new TypeError(`Either provide "path" or the "connectionString": "${o}", must contain EntityPath="<path-to-the-entity>".`);return EventHubConnectionConfig.createFromConnectionConfig(a)},createFromConnectionConfig(o){return ConnectionConfig.validate(o,{isEntityPathRequired:!0}),o.getManagementAudience=()=>`${o.endpoint}${o.entityPath}/$management`,o.getManagementAddress=()=>`${o.entityPath}/$management`,o.getSenderAudience=e=>e!=null?`${o.endpoint}${o.entityPath}/Partitions/${e}`:`${o.endpoint}${o.entityPath}`,o.getSenderAddress=e=>e!=null?`${o.entityPath}/Partitions/${e}`:`${o.entityPath}`,o.getReceiverAudience=(e,a)=>(a||(a="$default"),`${o.endpoint}${o.entityPath}/ConsumerGroups/${a}/Partitions/${e}`),o.getReceiverAddress=(e,a)=>(a||(a="$default"),`${o.entityPath}/ConsumerGroups/${a}/Partitions/${e}`),o},setCustomEndpointAddress(o,e){o.amqpHostname=o.host;const{hostname:a,port:c}=parseEndpoint(e);o.host=a,c&&(o.port=parseInt(c,10))},validate(o){return ConnectionConfig.validate(o,{isEntityPathRequired:!0})}};function getRuntimeInfo(){return`BROWSER-VERSION; Browser ${getReleaseInfo()}`}function getReleaseInfo(){return typeof self>"u"?"":self.navigator.appVersion}function isCredential(o){return isTokenCredential(o)||isNamedKeyCredential(o)||isSASCredential(o)}var ConnectionContext;(function(o){const e=`azsdk-js-azureeventhubs/${packageJsonInfo.version} (${getRuntimeInfo()})`;function a(j){const h=j.userAgent?`${e},${j.userAgent}`:e;if(h.length>Constants.maxUserAgentLength)throw new Error(`The user-agent string cannot be more than ${Constants.maxUserAgentLength} characters in length.The given user-agent string is: ${h} with length: ${h.length}`);return h}o.getUserAgent=a;function c(j,h,et){et||(et={}),j.webSocket=et.webSocketOptions&&et.webSocketOptions.webSocket,j.webSocketEndpointPath="$servicebus/websocket",j.webSocketConstructorOptions=et.webSocketOptions&&et.webSocketOptions.webSocketConstructorOptions;const ot={config:j,isEntityPathRequired:!0,connectionProperties:{product:"MSJSClient",userAgent:a(et),version:packageJsonInfo.version}},st=ConnectionContextBase.create(ot);st.tokenCredential=h,st.wasConnectionCloseCalled=!1,st.senders={},st.receivers={};const lt={address:et.managementSessionAddress,audience:et.managementSessionAudience};st.managementSession=new ManagementClient(st,lt);let nt,gt;Object.assign(st,{isConnectionClosing(){return!!(!this.connection.isOpen()&&this.connection.isRemoteOpen())},async readyToOpenLink(At){this.isConnectionClosing()&&await this.waitForDisconnectedEvent(At),await this.waitForConnectionReset()},waitForDisconnectedEvent(At){return createAbortablePromise(Tt=>{logger$1.verbose(`[${this.connectionId}] Attempting to reinitialize connection but the connection is in the process of closing. Waiting for the disconnect event before continuing.`),this.connection.once(lib.ConnectionEvents.disconnected,Tt)},At)},waitForConnectionReset(){return gt||Promise.resolve()},async close(){var At;try{this.connection.isOpen()&&(await Promise.all(Object.keys(st.senders).map(Tt=>{var ft;return(ft=st.senders[Tt])===null||ft===void 0?void 0:ft.close().catch(()=>{})})),await Promise.all(Object.keys(st.receivers).map(Tt=>{var ft;return(ft=st.receivers[Tt])===null||ft===void 0?void 0:ft.close().catch(()=>{})})),await this.cbsSession.close(),await((At=this.managementSession)===null||At===void 0?void 0:At.close()),await this.connection.close(),this.wasConnectionCloseCalled=!0,logger$1.info("Closed the amqp connection '%s' on the client.",this.connectionId))}catch(Tt){const ft=Tt instanceof Error?`${Tt.name}: ${Tt.message}`:JSON.stringify(Tt);throw logger$1.warning(`An error occurred while closing the connection "${this.connectionId}":
${ft}`),logErrorStackTrace$1(Tt),Tt}}});const dt=()=>{st.wasConnectionCloseCalled=!1,logger$1.verbose("[%s] setting 'wasConnectionCloseCalled' property of connection context to %s.",st.connection.id,st.wasConnectionCloseCalled)},mt=async At=>{var Tt,ft;if(!gt){gt=new Promise(_t=>{nt=_t});try{logger$1.verbose("[%s] 'disconnected' event occurred on the amqp connection.",st.connection.id),At.connection&&At.connection.error&&logger$1.verbose("[%s] Accompanying error on the context.connection: %O",st.connection.id,At.connection&&At.connection.error),At.error&&logger$1.verbose("[%s] Accompanying error on the context: %O",st.connection.id,At.error);const _t={wasConnectionCloseCalled:st.wasConnectionCloseCalled,numSenders:Object.keys(st.senders).length,numReceivers:Object.keys(st.receivers).length};logger$1.verbose("[%s] Closing all open senders and receivers in the state: %O",st.connection.id,_t),st.connection.removeAllSessions(),await((Tt=st.cbsSession)===null||Tt===void 0?void 0:Tt.close().catch(()=>{})),await((ft=st.managementSession)===null||ft===void 0?void 0:ft.close().catch(()=>{})),(_t.numSenders||_t.numReceivers)&&(await Promise.all(Object.keys(st.senders).map(Rt=>{var Mt;return(Mt=st.senders[Rt])===null||Mt===void 0?void 0:Mt.close().catch(()=>{})})),await Promise.all(Object.keys(st.receivers).map(Rt=>{var Mt;return(Mt=st.receivers[Rt])===null||Mt===void 0?void 0:Mt.close().catch(()=>{})})))}catch(_t){logger$1.verbose(`[${st.connectionId}] An error occurred while closing the connection in 'disconnected'. %O`,_t)}try{await St(st)}catch(_t){logger$1.verbose(`[${st.connectionId}] An error occurred while refreshing the connection in 'disconnected'. %O`,_t)}finally{nt(),gt=void 0}}},vt=async At=>{logger$1.verbose("[%s] 'protocol_error' event occurred on the amqp connection.",st.connection.id),At.connection&&At.connection.error&&logger$1.verbose("[%s] Accompanying error on the context.connection: %O",st.connection.id,At.connection&&At.connection.error),At.error&&logger$1.verbose("[%s] Accompanying error on the context: %O",st.connection.id,At.error)},tt=async At=>{logger$1.verbose("[%s] 'error' event occurred on the amqp connection.",st.connection.id),At.connection&&At.connection.error&&logger$1.verbose("[%s] Accompanying error on the context.connection: %O",st.connection.id,At.connection&&At.connection.error),At.error&&logger$1.verbose("[%s] Accompanying error on the context: %O",st.connection.id,At.error)};function bt(At){At.on(lib.ConnectionEvents.connectionOpen,dt),At.on(lib.ConnectionEvents.disconnected,mt),At.on(lib.ConnectionEvents.protocolError,vt),At.on(lib.ConnectionEvents.error,tt)}function ht(At){return At.connection.removeListener(lib.ConnectionEvents.connectionOpen,dt),At.connection.removeListener(lib.ConnectionEvents.disconnected,mt),At.connection.removeListener(lib.ConnectionEvents.protocolError,vt),At.connection.removeListener(lib.ConnectionEvents.error,tt),At.connection.close()}async function St(At){const Tt=At.connectionId;try{await ht(At)}catch(ft){logger$1.verbose(`[${At.connectionId}] There was an error closing the connection before reconnecting: %O`,ft)}At.refreshConnection(),bt(At.connection),logger$1.verbose(`The connection "${Tt}" has been updated to "${At.connectionId}".`)}return bt(st.connection),logger$1.verbose("[%s] Created connection context successfully.",st.connectionId),st}o.create=c})(ConnectionContext||(ConnectionContext={}));function createConnectionContext(o,e,a,c){let j,h,et;if(o=String(o),isCredential(a)){const ot=e;let st=o;if(isNamedKeyCredential(a)||isSASCredential(a)?et=createSasTokenProvider(a):et=a,!ot)throw new TypeError('"eventHubName" is missing');st.endsWith("/")||(st+="/"),j=`Endpoint=sb://${st};SharedAccessKeyName=defaultKeyName;SharedAccessKey=defaultKeyValue;EntityPath=${ot}`,h=EventHubConnectionConfig.create(j)}else{const ot=parseEventHubConnectionString(o);if(!(ot.eventHubName||typeof e=="string"&&e))throw new TypeError(`Either provide "eventHubName" or the "connectionString": "${o}", must contain "EntityPath=<your-event-hub-name>".`);if(ot.eventHubName&&typeof e=="string"&&e&&ot.eventHubName!==e)throw new TypeError(`The entity path "${ot.eventHubName}" in connectionString: "${o}" doesn't match with eventHubName: "${e}".`);if(j=o,typeof e!="string")h=EventHubConnectionConfig.create(j),c=e;else{const lt=e;h=EventHubConnectionConfig.create(j,lt),c=a}const st=parseEventHubConnectionString(j);et=createSasTokenProvider(st)}return c!=null&&c.customEndpointAddress&&EventHubConnectionConfig.setCustomEndpointAddress(h,c.customEndpointAddress),ConnectionConfig.validate(h),ConnectionContext.create(h,et,c)}function getActivePartitionOwnerships(o,e){const a=new Map;return o.forEach((c,j)=>{if(typeof c.lastModifiedTimeInMs>"u"||c.lastModifiedTimeInMs===null)return;Date.now()-c.lastModifiedTimeInMs<e&&c.ownerId&&a.set(j,c)}),a}function calculateBalancedLoadCounts(o,e){const a=Math.floor(e.length/o.size),c=e.length%o.size;return{minPartitionsPerOwner:a,requiredNumberOfOwnersWithExtraPartition:c}}function getEventProcessorCounts(o,e){const a={haveRequiredPartitions:0,haveAdditionalPartition:0,haveTooManyPartitions:0};for(const c of e.values()){const j=c.length;j===o?a.haveRequiredPartitions++:j===o+1?a.haveAdditionalPartition++:j>o+1&&a.haveTooManyPartitions++}return a}function isLoadBalanced(o,e,{haveAdditionalPartition:a,haveRequiredPartitions:c}){return a===o&&c+a===e}function getNumberOfPartitionsToClaim(o,e,a,{haveAdditionalPartition:c,haveTooManyPartitions:j}){let h=o;return e>0&&c+j<e&&(h=o+1),h-a}function findPartitionsToSteal(o,e,a,c,j){const h=[],et=[];j.forEach((lt,nt)=>{nt===c||lt.length<=e||et.push(lt)}),et.sort((lt,nt)=>lt.length>nt.length?-1:lt.length<nt.length?1:0);let ot=0,st=et.shift();for(;o>0&&st;){let lt=e;ot<a&&lt++,ot++;let nt=st.length-lt;for(;Math.min(o,nt);){const gt=Math.floor(Math.random()*st.length);h.push(st.splice(gt,1)[0].partitionId),o--,nt--}st=et.shift()}return h}function listAvailablePartitions(o,e,a,c){if(!a.length)return[];const j=getActivePartitionOwnerships(e,c);if(logger$1.verbose(`[${o}] Number of active ownership records: ${j.size}.`),j.size===0)return a;const h=new Map;for(const mt of j.values()){const vt=h.get(mt.ownerId)||[];vt.push(mt),h.set(mt.ownerId,vt)}h.has(o)||h.set(o,[]),logger$1.info(`[${o}] Number of active event processors: ${h.size}.`);const{minPartitionsPerOwner:et,requiredNumberOfOwnersWithExtraPartition:ot}=calculateBalancedLoadCounts(h,a);logger$1.verbose(`[${o}] Expected minimum number of partitions per event processor: ${et},expected number of event processors with additional partition: ${ot}.`);const st=getEventProcessorCounts(et,h);if(isLoadBalanced(ot,h.size,st))return[];let lt=getNumberOfPartitionsToClaim(et,ot,h.get(o).length,st);if(lt<=0)return[];const nt=[],gt=a.filter(mt=>!j.has(mt));for(;Math.min(lt,gt.length);){const mt=Math.floor(Math.random()*gt.length);nt.push(gt.splice(mt,1)[0]),lt--}if(lt===0)return nt;const dt=findPartitionsToSteal(lt,et,ot,o,h);return nt.concat(dt)}class BalancedLoadBalancingStrategy{constructor(e){this._partitionOwnershipExpirationIntervalInMs=e}getPartitionsToClaim(e,a,c){const j=listAvailablePartitions(e,a,c,this._partitionOwnershipExpirationIntervalInMs);if(!j.length)return[];const h=Math.floor(Math.random()*j.length);return[j[h]]}}class GreedyLoadBalancingStrategy{constructor(e){this._partitionOwnershipExpirationIntervalInMs=e}getPartitionsToClaim(e,a,c){return listAvailablePartitions(e,a,c,this._partitionOwnershipExpirationIntervalInMs)}}class InMemoryCheckpointStore{constructor(){this._partitionOwnershipMap=new Map,this._committedCheckpoints=new Map}async listOwnership(e,a,c){const j=[];for(const h of this._partitionOwnershipMap.values())j.push(Object.assign({},h));return j}async claimOwnership(e){const a=[];for(const c of e)if(!this._partitionOwnershipMap.has(c.partitionId)||this._partitionOwnershipMap.get(c.partitionId).etag===c.etag){const j=new Date,h=Object.assign(Object.assign({},c),{etag:getRandomName(),lastModifiedTimeInMs:j.getTime()});this._partitionOwnershipMap.set(h.partitionId,h),a.push(h)}return a}async updateCheckpoint(e){throwTypeErrorIfParameterMissing("","updateCheckpoint","sequenceNumber",e.sequenceNumber),throwTypeErrorIfParameterMissing("","updateCheckpoint","offset",e.offset),e=Object.assign({},e);const a=this._partitionOwnershipMap.get(e.partitionId);if(a){a.etag=getRandomName();const c=`${e.fullyQualifiedNamespace}:${e.eventHubName}:${e.consumerGroup}`;let j=this._committedCheckpoints.get(c);j==null&&(j=new Map,this._committedCheckpoints.set(c,j)),j.set(e.partitionId,e)}}async listCheckpoints(e,a,c){const j=`${e}:${a}:${c}`,h=this._committedCheckpoints.get(j);if(h==null)return[];const et=[];for(const ot of h.values())et.push(Object.assign({},ot));return et}}class PartitionGate{constructor(){this._partitions=new Set}add(e){if(e==="all"&&this._partitions.size>0||this._partitions.has(e)||this._partitions.has("all"))throw new Error("Partition already has a subscriber.");this._partitions.add(e)}remove(e){this._partitions.delete(e)}}class UnbalancedLoadBalancingStrategy{getPartitionsToClaim(e,a,c){return c}}const defaultConsumerClientOptions={maxBatchSize:1,maxWaitTimeInSeconds:60};class EventHubConsumerClient{get eventHubName(){return this._context.config.entityPath}get fullyQualifiedNamespace(){return this._context.config.host}constructor(e,a,c,j,h,et){var ot,st;this._consumerGroup=e,this._partitionGate=new PartitionGate,this._subscriptions=new Set,isCredential(j)?(logger$1.info("Creating EventHubConsumerClient with TokenCredential."),isCheckpointStore(h)?(this._checkpointStore=h,this._userChoseCheckpointStore=!0,this._clientOptions=et||{}):(this._checkpointStore=new InMemoryCheckpointStore,this._userChoseCheckpointStore=!1,this._clientOptions=h||{}),this._context=createConnectionContext(a,c,j,this._clientOptions)):typeof c=="string"?(logger$1.info("Creating EventHubConsumerClient with connection string and event hub name."),isCheckpointStore(j)?(this._checkpointStore=j,this._userChoseCheckpointStore=!0,this._clientOptions=h||{}):(this._checkpointStore=new InMemoryCheckpointStore,this._userChoseCheckpointStore=!1,this._clientOptions=j||{}),this._context=createConnectionContext(a,c,this._clientOptions)):(logger$1.info("Creating EventHubConsumerClient with connection string."),isCheckpointStore(c)?(this._checkpointStore=c,this._userChoseCheckpointStore=!0,this._clientOptions=j||{}):(this._checkpointStore=new InMemoryCheckpointStore,this._userChoseCheckpointStore=!1,this._clientOptions=c||{}),this._context=createConnectionContext(a,this._clientOptions)),this.identifier=(ot=this._clientOptions.identifier)!==null&&ot!==void 0?ot:getRandomName(),this._loadBalancingOptions=Object.assign({strategy:"balanced",updateIntervalInMs:1e4,partitionOwnershipExpirationIntervalInMs:6e4},(st=this._clientOptions)===null||st===void 0?void 0:st.loadBalancingOptions)}async close(){const e=Array.from(this._subscriptions);return await Promise.all(e.map(a=>a.close())),this._context.close()}getPartitionIds(e={}){return this._context.managementSession.getEventHubProperties(Object.assign(Object.assign({},e),{retryOptions:this._clientOptions.retryOptions})).then(a=>a.partitionIds)}getPartitionProperties(e,a={}){return this._context.managementSession.getPartitionProperties(e,Object.assign(Object.assign({},a),{retryOptions:this._clientOptions.retryOptions}))}getEventHubProperties(e={}){return this._context.managementSession.getEventHubProperties(Object.assign(Object.assign({},e),{retryOptions:this._clientOptions.retryOptions}))}subscribe(e,a,c){let j,h;if(isSubscriptionEventHandlers(e)){const ot=a;ot&&ot.startPosition&&validateEventPositions(ot.startPosition),{targetedPartitionId:h,eventProcessor:j}=this.createEventProcessorForAllPartitions(e,ot)}else if(isSubscriptionEventHandlers(a)){const ot=c;ot&&ot.startPosition&&validateEventPositions(ot.startPosition),{targetedPartitionId:h,eventProcessor:j}=this.createEventProcessorForSinglePartition(String(e),a,c)}else throw new TypeError("Unhandled subscribe() overload");j.start();const et={get isRunning(){return j.isRunning()},close:()=>(this._partitionGate.remove(h),this._subscriptions.delete(et),j.stop())};return this._subscriptions.add(et),et}_getLoadBalancingStrategy(){var e;if(!this._userChoseCheckpointStore)return new UnbalancedLoadBalancingStrategy;const a=this._loadBalancingOptions.partitionOwnershipExpirationIntervalInMs;return((e=this._loadBalancingOptions)===null||e===void 0?void 0:e.strategy)==="greedy"?new GreedyLoadBalancingStrategy(a):new BalancedLoadBalancingStrategy(a)}createEventProcessorForAllPartitions(e,a){this._partitionGate.add("all"),this._userChoseCheckpointStore?logger$1.verbose("EventHubConsumerClient subscribing to all partitions, using a checkpoint store."):logger$1.verbose("EventHubConsumerClient subscribing to all partitions, no checkpoint store.");const c=this._getLoadBalancingStrategy();return{targetedPartitionId:"all",eventProcessor:this._createEventProcessor(this._context,e,this._checkpointStore,Object.assign(Object.assign(Object.assign({},defaultConsumerClientOptions),a),{ownerLevel:getOwnerLevel(a,this._userChoseCheckpointStore),ownerId:this.identifier,retryOptions:this._clientOptions.retryOptions,loadBalancingStrategy:c,loopIntervalInMs:this._loadBalancingOptions.updateIntervalInMs}))}}createEventProcessorForSinglePartition(e,a,c){var j;this._partitionGate.add(e);const h=c;this._userChoseCheckpointStore?logger$1.verbose(`EventHubConsumerClient subscribing to specific partition (${e}), using a checkpoint store.`):logger$1.verbose(`EventHubConsumerClient subscribing to specific partition (${e}), no checkpoint store.`);const et=this._createEventProcessor(this._context,a,this._checkpointStore,Object.assign(Object.assign(Object.assign({},defaultConsumerClientOptions),c),{processingTarget:e,ownerLevel:getOwnerLevel(h,this._userChoseCheckpointStore),retryOptions:this._clientOptions.retryOptions,loadBalancingStrategy:new UnbalancedLoadBalancingStrategy,loopIntervalInMs:(j=this._loadBalancingOptions.updateIntervalInMs)!==null&&j!==void 0?j:1e4}));return{targetedPartitionId:e,eventProcessor:et}}_createEventProcessor(e,a,c,j){return new EventProcessor(this._consumerGroup,e,a,c,j)}}EventHubConsumerClient.defaultConsumerGroupName=Constants.defaultConsumerGroup;function isCheckpointStore(o){if(!o)return!1;const e=o;return typeof e.claimOwnership=="function"&&typeof e.listCheckpoints=="function"&&typeof e.listOwnership=="function"&&typeof e.updateCheckpoint=="function"}function isSubscriptionEventHandlers(o){return typeof o.processEvents=="function"}function getOwnerLevel(o,e){if(o&&o.ownerLevel)return o.ownerLevel;if(e)return 0}const initialState={assetId:"",assetStatus:"nominal"},statusSlice=createSlice({name:"status",initialState,reducers:{setStatus:(o,e)=>{o.assetId=e.payload.assetId,o.assetStatus=e.payload.assetStatus}}}),{setStatus}=statusSlice.actions,statusReducer=statusSlice.reducer;process$1.nextTick=o=>Promise.resolve().then(o);const EventHubStreamComponent=()=>{const o=useDispatch(),{instance:e,inProgress:a}=useMsal(),c=useIsAuthenticated(),[j,h]=reactExports.useState([]),[et,ot]=reactExports.useState("Not Started"),[st,lt]=reactExports.useState(!1),[nt,gt]=reactExports.useState(),[dt,mt]=reactExports.useState(),vt=5,tt=reactExports.useMemo(()=>({scopes:["https://eventhubs.azure.net/.default"]}),[]),bt=(Rt,Mt)=>{o(setStatus({assetId:Rt,assetStatus:Mt}))},ht=reactExports.useCallback(async()=>{if(a!==InteractionStatus.None){console.warn("MSAL is not ready yet.");return}try{const Rt={...tt,account:e.getActiveAccount()};return(await e.acquireTokenSilent(Rt)).accessToken}catch(Rt){console.warn("Silent token acquisition failed, attempting redirect",Rt);try{e.acquireTokenRedirect(tt)}catch(Mt){throw console.error("Redirect token acquisition failed",Mt),Mt}}},[a,e,tt]),St=reactExports.useMemo(()=>({getToken:async()=>({token:await ht(),expiresOnTimestamp:Date.now()+3600*1e3})}),[ht]),At=reactExports.useCallback((Rt,Mt)=>{if(lt(!1),gt(void 0),Rt.length===0){ot("No events received within wait time. Waiting for next interval"),console.log("No events received within wait time. Waiting for next interval");return}if(Rt.length>0&&Rt[0].body!=null&&Rt[0].body.Pressure001!=null){const Et=Rt[0].body.Pressure001;Et.Value>1&&Et.Value<1.5||Et.Value>2?bt("Pump 1","fault"):bt("Pump 1","nominal")}ot(`Received ${Rt.length} event(s)`),h([]),h(Et=>[...Et,...Rt]),Mt.updateCheckpoint(Rt[Rt.length-1])},[]),Tt=reactExports.useCallback((Rt,Mt)=>{console.log("Error:",Rt,Mt),lt(!0),gt(Et=>Et||JSON.stringify(Rt))},[vt]),ft=reactExports.useCallback(async(Rt,Mt)=>{try{dt&&await dt.close();const Et=Rt.subscribe({processInitialize:async kt=>{console.log(`Initialized subscription for partition ${kt.partitionId}`,kt),ot(`Initialized subscription for partition ${kt.partitionId}`),lt(!1)},processClose:async(kt,at)=>{console.log(`Closing subscription due to ${kt}.`),ot(`Stopped processing events from partition ${at.partitionId}`)},processEvents:async(kt,at)=>{At(kt,at)},processError:Mt},{startPosition:latestEventPosition});mt(Et),ot("Subscription created, waiting for events...")}catch(Et){console.error("Failed to create subscription:",Et)}},[At]),_t=reactExports.useCallback(Rt=>{dt==null||dt.close(),Rt.close()},[dt]);return reactExports.useEffect(()=>{if(!c)return;console.log("Creating Event Hub consumer client...");const Rt=new EventHubConsumerClient("","<eventhubnamespace>.servicebus.windows.net","<eventhubname>",St);return ft(Rt,Tt),()=>{_t(Rt)}},["","<eventhubnamespace>.servicebus.windows.net","<eventhubname>",St,ft,c]),jsxRuntimeExports.jsxs("div",{id:"eventView",children:[jsxRuntimeExports.jsx("ul",{children:j.map((Rt,Mt)=>jsxRuntimeExports.jsxs("li",{children:["Pressure001: ",Rt.body.Pressure001!=null?Rt.body.Pressure001.Value:""]},Mt))}),jsxRuntimeExports.jsxs("div",{id:"eventErrors",children:[et,st,nt]})]})};var powerbi={exports:{}};(function(o,e){(function(c,j){o.exports=j()})(commonjsGlobal,()=>(()=>{var a={"./node_modules/http-post-message/dist/httpPostMessage.js":function(et){/*! http-post-message v0.2.3 | (c) 2016 Microsoft Corporation MIT */(function(st,lt){et.exports=lt()})(this,function(){return function(ot){var st={};function lt(nt){if(st[nt])return st[nt].exports;var gt=st[nt]={exports:{},id:nt,loaded:!1};return ot[nt].call(gt.exports,gt,gt.exports,lt),gt.loaded=!0,gt.exports}return lt.m=ot,lt.c=st,lt.p="",lt(0)}([function(ot,st){var lt=function(){function nt(gt,dt,mt){dt===void 0&&(dt={}),this.defaultHeaders=dt,this.defaultTargetWindow=mt,this.windowPostMessageProxy=gt}return nt.addTrackingProperties=function(gt,dt){return gt.headers=gt.headers||{},dt&&dt.id&&(gt.headers.id=dt.id),gt},nt.getTrackingProperties=function(gt){return{id:gt.headers&&gt.headers.id}},nt.isErrorMessage=function(gt){return typeof(gt&&gt.statusCode)!="number"?!1:!(200<=gt.statusCode&&gt.statusCode<300)},nt.prototype.get=function(gt,dt,mt){return dt===void 0&&(dt={}),mt===void 0&&(mt=this.defaultTargetWindow),this.send({method:"GET",url:gt,headers:dt},mt)},nt.prototype.post=function(gt,dt,mt,vt){return mt===void 0&&(mt={}),vt===void 0&&(vt=this.defaultTargetWindow),this.send({method:"POST",url:gt,headers:mt,body:dt},vt)},nt.prototype.put=function(gt,dt,mt,vt){return mt===void 0&&(mt={}),vt===void 0&&(vt=this.defaultTargetWindow),this.send({method:"PUT",url:gt,headers:mt,body:dt},vt)},nt.prototype.patch=function(gt,dt,mt,vt){return mt===void 0&&(mt={}),vt===void 0&&(vt=this.defaultTargetWindow),this.send({method:"PATCH",url:gt,headers:mt,body:dt},vt)},nt.prototype.delete=function(gt,dt,mt,vt){return dt===void 0&&(dt=null),mt===void 0&&(mt={}),vt===void 0&&(vt=this.defaultTargetWindow),this.send({method:"DELETE",url:gt,headers:mt,body:dt},vt)},nt.prototype.send=function(gt,dt){if(dt===void 0&&(dt=this.defaultTargetWindow),gt.headers=this.assign({},this.defaultHeaders,gt.headers),!dt)throw new Error("target window is not provided.  You must either provide the target window explicitly as argument to request, or specify default target window when constructing instance of this class.");return this.windowPostMessageProxy.postMessage(dt,gt)},nt.prototype.assign=function(gt){for(var dt=[],mt=1;mt<arguments.length;mt++)dt[mt-1]=arguments[mt];if(gt==null)throw new TypeError("Cannot convert undefined or null to object");var vt=Object(gt);return dt.forEach(function(tt){if(tt!=null)for(var bt in tt)Object.prototype.hasOwnProperty.call(tt,bt)&&(vt[bt]=tt[bt])}),vt},nt}();st.HttpPostMessage=lt}])})},"./node_modules/powerbi-models/dist/models.js":function(et){(function(st,lt){et.exports=lt()})(this,()=>(()=>{var ot=[function(gt,dt,mt){var vt=this&&this.__extends||function(){var $t=function(or,Yr){return $t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Vr,Hr){Vr.__proto__=Hr}||function(Vr,Hr){for(var Rn in Hr)Object.prototype.hasOwnProperty.call(Hr,Rn)&&(Vr[Rn]=Hr[Rn])},$t(or,Yr)};return function(or,Yr){if(typeof Yr!="function"&&Yr!==null)throw new TypeError("Class extends value "+String(Yr)+" is not a constructor or null");$t(or,Yr);function Vr(){this.constructor=or}or.prototype=Yr===null?Object.create(Yr):(Vr.prototype=Yr.prototype,new Vr)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.CommonErrorCodes=dt.BookmarksPlayMode=dt.ExportDataType=dt.QnaMode=dt.PageNavigationPosition=dt.BrowserPrintAdjustmentsMode=dt.AggregateFunction=dt.DataCacheMode=dt.CredentialType=dt.isPercentOfGrandTotal=dt.isColumnAggr=dt.isHierarchyLevelAggr=dt.isHierarchyLevel=dt.isColumn=dt.isMeasure=dt.getFilterType=dt.isBasicFilterWithKeys=dt.isFilterKeyColumnsTarget=dt.HierarchyIdentityFilter=dt.HierarchyFilter=dt.AdvancedFilter=dt.TupleFilter=dt.IdentityFilter=dt.BasicFilterWithKeys=dt.BasicFilter=dt.RelativeTimeFilter=dt.RelativeDateFilter=dt.TopNFilter=dt.IncludeExcludeFilter=dt.NotSupportedFilter=dt.Filter=dt.RelativeDateOperators=dt.RelativeDateFilterTimeUnit=dt.FilterType=dt.FiltersLevel=dt.FiltersOperations=dt.MenuLocation=dt.ContrastMode=dt.TokenType=dt.ViewMode=dt.Permissions=dt.SectionVisibility=dt.ReportAlignment=dt.HyperlinkClickBehavior=dt.LayoutType=dt.VisualContainerDisplayMode=dt.BackgroundType=dt.DisplayOption=dt.PageSizeType=dt.TraceType=void 0,dt.validateExportDataRequest=dt.validateQnaInterpretInputData=dt.validateLoadQnaConfiguration=dt.validateSaveAsParameters=dt.validateUpdateFiltersRequest=dt.validateFilter=dt.validatePage=dt.validateTileLoad=dt.validateDashboardLoad=dt.validateQuickCreate=dt.validateCreateReport=dt.validatePaginatedReportLoad=dt.validateReportLoad=dt.validateMenuGroupExtension=dt.validateExtension=dt.validateCustomPageSize=dt.validateVisualizationsPane=dt.validateSyncSlicersPane=dt.validateSelectionPane=dt.validatePageNavigationPane=dt.validateFieldsPane=dt.validateFiltersPane=dt.validateBookmarksPane=dt.validatePanes=dt.validateSettings=dt.validateCaptureBookmarkRequest=dt.validateApplyBookmarkStateRequest=dt.validateApplyBookmarkByNameRequest=dt.validateAddBookmarkRequest=dt.validatePlayBookmarkRequest=dt.validateSlicerState=dt.validateSlicer=dt.validateVisualSelector=dt.isIExtensionArray=dt.isIExtensions=dt.isGroupedMenuExtension=dt.isFlatMenuExtension=dt.isReportFiltersArray=dt.isOnLoadFilters=dt.VisualDataRoleKindPreference=dt.VisualDataRoleKind=dt.CommandDisplayOption=dt.SlicerTargetSelector=dt.VisualTypeSelector=dt.VisualSelector=dt.PageSelector=dt.Selector=dt.SortDirection=dt.LegendPosition=dt.TextAlignment=void 0,dt.validatePrintSettings=dt.validateZoomLevel=dt.validateCustomTheme=dt.validateCommandsSettings=dt.validateVisualSettings=dt.validateVisualHeader=void 0;var tt=mt(1);(function($t){$t[$t.Information=0]="Information",$t[$t.Verbose=1]="Verbose",$t[$t.Warning=2]="Warning",$t[$t.Error=3]="Error",$t[$t.ExpectedError=4]="ExpectedError",$t[$t.UnexpectedError=5]="UnexpectedError",$t[$t.Fatal=6]="Fatal"})(dt.TraceType||(dt.TraceType={})),function($t){$t[$t.Widescreen=0]="Widescreen",$t[$t.Standard=1]="Standard",$t[$t.Cortana=2]="Cortana",$t[$t.Letter=3]="Letter",$t[$t.Custom=4]="Custom",$t[$t.Mobile=5]="Mobile"}(dt.PageSizeType||(dt.PageSizeType={})),function($t){$t[$t.FitToPage=0]="FitToPage",$t[$t.FitToWidth=1]="FitToWidth",$t[$t.ActualSize=2]="ActualSize"}(dt.DisplayOption||(dt.DisplayOption={})),function($t){$t[$t.Default=0]="Default",$t[$t.Transparent=1]="Transparent"}(dt.BackgroundType||(dt.BackgroundType={})),function($t){$t[$t.Visible=0]="Visible",$t[$t.Hidden=1]="Hidden"}(dt.VisualContainerDisplayMode||(dt.VisualContainerDisplayMode={})),function($t){$t[$t.Master=0]="Master",$t[$t.Custom=1]="Custom",$t[$t.MobilePortrait=2]="MobilePortrait",$t[$t.MobileLandscape=3]="MobileLandscape"}(dt.LayoutType||(dt.LayoutType={})),function($t){$t[$t.Navigate=0]="Navigate",$t[$t.NavigateAndRaiseEvent=1]="NavigateAndRaiseEvent",$t[$t.RaiseEvent=2]="RaiseEvent"}(dt.HyperlinkClickBehavior||(dt.HyperlinkClickBehavior={})),function($t){$t[$t.Left=0]="Left",$t[$t.Center=1]="Center",$t[$t.Right=2]="Right",$t[$t.None=3]="None"}(dt.ReportAlignment||(dt.ReportAlignment={})),function($t){$t[$t.AlwaysVisible=0]="AlwaysVisible",$t[$t.HiddenInViewMode=1]="HiddenInViewMode"}(dt.SectionVisibility||(dt.SectionVisibility={})),function($t){$t[$t.Read=0]="Read",$t[$t.ReadWrite=1]="ReadWrite",$t[$t.Copy=2]="Copy",$t[$t.Create=4]="Create",$t[$t.All=7]="All"}(dt.Permissions||(dt.Permissions={})),function($t){$t[$t.View=0]="View",$t[$t.Edit=1]="Edit"}(dt.ViewMode||(dt.ViewMode={})),function($t){$t[$t.Aad=0]="Aad",$t[$t.Embed=1]="Embed"}(dt.TokenType||(dt.TokenType={})),function($t){$t[$t.None=0]="None",$t[$t.HighContrast1=1]="HighContrast1",$t[$t.HighContrast2=2]="HighContrast2",$t[$t.HighContrastBlack=3]="HighContrastBlack",$t[$t.HighContrastWhite=4]="HighContrastWhite"}(dt.ContrastMode||(dt.ContrastMode={})),function($t){$t[$t.Bottom=0]="Bottom",$t[$t.Top=1]="Top"}(dt.MenuLocation||(dt.MenuLocation={})),function($t){$t[$t.RemoveAll=0]="RemoveAll",$t[$t.ReplaceAll=1]="ReplaceAll",$t[$t.Add=2]="Add",$t[$t.Replace=3]="Replace"}(dt.FiltersOperations||(dt.FiltersOperations={})),function($t){$t[$t.Report=0]="Report",$t[$t.Page=1]="Page",$t[$t.Visual=2]="Visual"}(dt.FiltersLevel||(dt.FiltersLevel={}));var bt;(function($t){$t[$t.Advanced=0]="Advanced",$t[$t.Basic=1]="Basic",$t[$t.Unknown=2]="Unknown",$t[$t.IncludeExclude=3]="IncludeExclude",$t[$t.RelativeDate=4]="RelativeDate",$t[$t.TopN=5]="TopN",$t[$t.Tuple=6]="Tuple",$t[$t.RelativeTime=7]="RelativeTime",$t[$t.Identity=8]="Identity",$t[$t.Hierarchy=9]="Hierarchy",$t[$t.HierarchyIdentity=10]="HierarchyIdentity"})(bt=dt.FilterType||(dt.FilterType={})),function($t){$t[$t.Days=0]="Days",$t[$t.Weeks=1]="Weeks",$t[$t.CalendarWeeks=2]="CalendarWeeks",$t[$t.Months=3]="Months",$t[$t.CalendarMonths=4]="CalendarMonths",$t[$t.Years=5]="Years",$t[$t.CalendarYears=6]="CalendarYears",$t[$t.Minutes=7]="Minutes",$t[$t.Hours=8]="Hours"}(dt.RelativeDateFilterTimeUnit||(dt.RelativeDateFilterTimeUnit={})),function($t){$t[$t.InLast=0]="InLast",$t[$t.InThis=1]="InThis",$t[$t.InNext=2]="InNext"}(dt.RelativeDateOperators||(dt.RelativeDateOperators={}));var ht=function(){function $t(or,Yr){this.target=or,this.filterType=Yr}return $t.prototype.toJSON=function(){var or={$schema:this.schemaUrl,target:this.target,filterType:this.filterType};return this.displaySettings!==void 0&&(or.displaySettings=this.displaySettings),or},$t}();dt.Filter=ht;var St=function($t){vt(or,$t);function or(Yr,Vr,Hr){var Rn=$t.call(this,Yr,bt.Unknown)||this;return Rn.message=Vr,Rn.notSupportedTypeName=Hr,Rn.schemaUrl=or.schemaUrl,Rn}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.message=this.message,Yr.notSupportedTypeName=this.notSupportedTypeName,Yr},or.schemaUrl="http://powerbi.com/product/schema#notSupported",or}(ht);dt.NotSupportedFilter=St;var At=function($t){vt(or,$t);function or(Yr,Vr,Hr){var Rn=$t.call(this,Yr,bt.IncludeExclude)||this;return Rn.target=Yr,Rn.values=Hr,Rn.isExclude=Vr,Rn.schemaUrl=or.schemaUrl,Rn}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.isExclude=this.isExclude,Yr.values=this.values,Yr},or.schemaUrl="http://powerbi.com/product/schema#includeExclude",or}(ht);dt.IncludeExcludeFilter=At;var Tt=function($t){vt(or,$t);function or(Yr,Vr,Hr,Rn){var Ur=$t.call(this,Yr,bt.TopN)||this;return Ur.operator=Vr,Ur.itemCount=Hr,Ur.schemaUrl=or.schemaUrl,Ur.orderBy=Rn,Ur}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.itemCount=this.itemCount,Yr.orderBy=this.orderBy,Yr},or.schemaUrl="http://powerbi.com/product/schema#topN",or}(ht);dt.TopNFilter=Tt;var ft=function($t){vt(or,$t);function or(Yr,Vr,Hr,Rn,Ur){var tn=$t.call(this,Yr,bt.RelativeDate)||this;return tn.operator=Vr,tn.timeUnitsCount=Hr,tn.timeUnitType=Rn,tn.includeToday=Ur,tn.schemaUrl=or.schemaUrl,tn}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.timeUnitsCount=this.timeUnitsCount,Yr.timeUnitType=this.timeUnitType,Yr.includeToday=this.includeToday,Yr},or.schemaUrl="http://powerbi.com/product/schema#relativeDate",or}(ht);dt.RelativeDateFilter=ft;var _t=function($t){vt(or,$t);function or(Yr,Vr,Hr,Rn){var Ur=$t.call(this,Yr,bt.RelativeTime)||this;return Ur.operator=Vr,Ur.timeUnitsCount=Hr,Ur.timeUnitType=Rn,Ur.schemaUrl=or.schemaUrl,Ur}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.timeUnitsCount=this.timeUnitsCount,Yr.timeUnitType=this.timeUnitType,Yr},or.schemaUrl="http://powerbi.com/product/schema#relativeTime",or}(ht);dt.RelativeTimeFilter=_t;var Rt=function($t){vt(or,$t);function or(Yr,Vr){for(var Hr=[],Rn=2;Rn<arguments.length;Rn++)Hr[Rn-2]=arguments[Rn];var Ur=$t.call(this,Yr,bt.Basic)||this;if(Ur.operator=Vr,Ur.schemaUrl=or.schemaUrl,Hr.length===0&&Vr!=="All")throw new Error('values must be a non-empty array unless your operator is "All".');return Array.isArray(Hr[0])?Ur.values=Hr[0]:Ur.values=Hr,Ur}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.values=this.values,Yr.requireSingleSelection=!!this.requireSingleSelection,Yr},or.schemaUrl="http://powerbi.com/product/schema#basic",or}(ht);dt.BasicFilter=Rt;var Mt=function($t){vt(or,$t);function or(Yr,Vr,Hr,Rn){var Ur=$t.call(this,Yr,Vr,Hr)||this;Ur.keyValues=Rn,Ur.target=Yr;var tn=Yr.keys?Yr.keys.length:0;if(tn>0&&!Rn)throw new Error("You should pass the values to be filtered for each key. You passed: no values and ".concat(tn," keys"));if(tn===0&&Rn&&Rn.length>0)throw new Error("You passed key values but your target object doesn't contain the keys to be filtered");for(var Un=0,Hn=Ur.keyValues;Un<Hn.length;Un++){var so=Hn[Un];if(so){var uo=so.length;if(uo!==tn)throw new Error("Each tuple of key values should contain a value for each of the keys. You passed: ".concat(uo," values and ").concat(tn," keys"))}}return Ur}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.keyValues=this.keyValues,Yr},or}(Rt);dt.BasicFilterWithKeys=Mt;var Et=function($t){vt(or,$t);function or(Yr,Vr){var Hr=$t.call(this,Yr,bt.Identity)||this;return Hr.operator=Vr,Hr.schemaUrl=or.schemaUrl,Hr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.target=this.target,Yr},or.schemaUrl="http://powerbi.com/product/schema#identity",or}(ht);dt.IdentityFilter=Et;var kt=function($t){vt(or,$t);function or(Yr,Vr,Hr){var Rn=$t.call(this,Yr,bt.Tuple)||this;return Rn.operator=Vr,Rn.schemaUrl=or.schemaUrl,Rn.values=Hr,Rn}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.values=this.values,Yr.target=this.target,Yr},or.schemaUrl="http://powerbi.com/product/schema#tuple",or}(ht);dt.TupleFilter=kt;var at=function($t){vt(or,$t);function or(Yr,Vr){for(var Hr=[],Rn=2;Rn<arguments.length;Rn++)Hr[Rn-2]=arguments[Rn];var Ur=$t.call(this,Yr,bt.Advanced)||this;if(Ur.schemaUrl=or.schemaUrl,typeof Vr!="string"||Vr.length===0)throw new Error("logicalOperator must be a valid operator, You passed: ".concat(Vr));Ur.logicalOperator=Vr;var tn;if(Array.isArray(Hr[0])?tn=Hr[0]:tn=Hr,tn.length>2)throw new Error("AdvancedFilters may not have more than two conditions. You passed: ".concat(Hr.length));if(tn.length===1&&Vr!=="And")throw new Error('Logical Operator must be "And" when there is only one condition provided');return Ur.conditions=tn,Ur}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.logicalOperator=this.logicalOperator,Yr.conditions=this.conditions,Yr},or.schemaUrl="http://powerbi.com/product/schema#advanced",or}(ht);dt.AdvancedFilter=at;var s=function($t){vt(or,$t);function or(Yr,Vr){var Hr=$t.call(this,Yr,bt.Hierarchy)||this;return Hr.schemaUrl=or.schemaUrl,Hr.hierarchyData=Vr,Hr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.hierarchyData=this.hierarchyData,Yr.target=this.target,Yr},or.schemaUrl="http://powerbi.com/product/schema#hierarchy",or}(ht);dt.HierarchyFilter=s;var b=function($t){vt(or,$t);function or(Yr,Vr){var Hr=$t.call(this,Yr,bt.HierarchyIdentity)||this;return Hr.schemaUrl=or.schemaUrl,Hr.hierarchyData=Vr,Hr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.hierarchyData=this.hierarchyData,Yr.target=this.target,Yr},or.schemaUrl="http://powerbi.com/product/schema#hierarchyIdentity",or}(ht);dt.HierarchyIdentityFilter=b;function $($t){return yt($t)&&!!$t.keys}dt.isFilterKeyColumnsTarget=$;function _e($t){return it($t)===bt.Basic&&!!$t.keyValues}dt.isBasicFilterWithKeys=_e;function it($t){if($t.filterType)return $t.filterType;var or=$t,Yr=$t;return typeof or.operator=="string"&&Array.isArray(or.values)?bt.Basic:typeof Yr.logicalOperator=="string"&&Array.isArray(Yr.conditions)?bt.Advanced:bt.Unknown}dt.getFilterType=it;function pt($t){return $t.table!==void 0&&$t.measure!==void 0}dt.isMeasure=pt;function yt($t){return!!($t.table&&$t.column&&!$t.aggregationFunction)}dt.isColumn=yt;function ct($t){return!!($t.table&&$t.hierarchy&&$t.hierarchyLevel&&!$t.aggregationFunction)}dt.isHierarchyLevel=ct;function _($t){return!!($t.table&&$t.hierarchy&&$t.hierarchyLevel&&$t.aggregationFunction)}dt.isHierarchyLevelAggr=_;function rt($t){return!!($t.table&&$t.column&&$t.aggregationFunction)}dt.isColumnAggr=rt;function Ct($t){return!!$t.percentOfGrandTotal}dt.isPercentOfGrandTotal=Ct,function($t){$t[$t.NoConnection=0]="NoConnection",$t[$t.OnBehalfOf=1]="OnBehalfOf",$t[$t.Anonymous=2]="Anonymous"}(dt.CredentialType||(dt.CredentialType={})),function($t){$t[$t.Import=0]="Import",$t[$t.DirectQuery=1]="DirectQuery"}(dt.DataCacheMode||(dt.DataCacheMode={})),function($t){$t[$t.Default=1]="Default",$t[$t.None=2]="None",$t[$t.Sum=3]="Sum",$t[$t.Min=4]="Min",$t[$t.Max=5]="Max",$t[$t.Count=6]="Count",$t[$t.Average=7]="Average",$t[$t.DistinctCount=8]="DistinctCount"}(dt.AggregateFunction||(dt.AggregateFunction={})),function($t){$t[$t.Default=0]="Default",$t[$t.NoAdjustments=1]="NoAdjustments"}(dt.BrowserPrintAdjustmentsMode||(dt.BrowserPrintAdjustmentsMode={})),function($t){$t[$t.Bottom=0]="Bottom",$t[$t.Left=1]="Left"}(dt.PageNavigationPosition||(dt.PageNavigationPosition={})),function($t){$t[$t.Interactive=0]="Interactive",$t[$t.ResultOnly=1]="ResultOnly"}(dt.QnaMode||(dt.QnaMode={})),function($t){$t[$t.Summarized=0]="Summarized",$t[$t.Underlying=1]="Underlying"}(dt.ExportDataType||(dt.ExportDataType={})),function($t){$t[$t.Off=0]="Off",$t[$t.Presentation=1]="Presentation"}(dt.BookmarksPlayMode||(dt.BookmarksPlayMode={})),dt.CommonErrorCodes={TokenExpired:"TokenExpired",NotFound:"PowerBIEntityNotFound",InvalidParameters:"Invalid parameters",LoadReportFailed:"LoadReportFailed",NotAuthorized:"PowerBINotAuthorizedException",FailedToLoadModel:"ExplorationContainer_FailedToLoadModel_DefaultDetails"},dt.TextAlignment={Left:"left",Center:"center",Right:"right"},dt.LegendPosition={Top:"Top",Bottom:"Bottom",Right:"Right",Left:"Left",TopCenter:"TopCenter",BottomCenter:"BottomCenter",RightCenter:"RightCenter",LeftCenter:"LeftCenter"},function($t){$t[$t.Ascending=1]="Ascending",$t[$t.Descending=2]="Descending"}(dt.SortDirection||(dt.SortDirection={}));var It=function(){function $t(or){this.$schema=or}return $t.prototype.toJSON=function(){return{$schema:this.$schema}},$t}();dt.Selector=It;var Nt=function($t){vt(or,$t);function or(Yr){var Vr=$t.call(this,or.schemaUrl)||this;return Vr.pageName=Yr,Vr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.pageName=this.pageName,Yr},or.schemaUrl="http://powerbi.com/product/schema#pageSelector",or}(It);dt.PageSelector=Nt;var Ut=function($t){vt(or,$t);function or(Yr){var Vr=$t.call(this,or.schemaUrl)||this;return Vr.visualName=Yr,Vr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.visualName=this.visualName,Yr},or.schemaUrl="http://powerbi.com/product/schema#visualSelector",or}(It);dt.VisualSelector=Ut;var Gt=function($t){vt(or,$t);function or(Yr){var Vr=$t.call(this,Ut.schemaUrl)||this;return Vr.visualType=Yr,Vr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.visualType=this.visualType,Yr},or.schemaUrl="http://powerbi.com/product/schema#visualTypeSelector",or}(It);dt.VisualTypeSelector=Gt;var Pt=function($t){vt(or,$t);function or(Yr){var Vr=$t.call(this,Ut.schemaUrl)||this;return Vr.target=Yr,Vr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.target=this.target,Yr},or.schemaUrl="http://powerbi.com/product/schema#slicerTargetSelector",or}(It);dt.SlicerTargetSelector=Pt,function($t){$t[$t.Enabled=0]="Enabled",$t[$t.Disabled=1]="Disabled",$t[$t.Hidden=2]="Hidden"}(dt.CommandDisplayOption||(dt.CommandDisplayOption={})),function($t){$t[$t.Grouping=0]="Grouping",$t[$t.Measure=1]="Measure",$t[$t.GroupingOrMeasure=2]="GroupingOrMeasure"}(dt.VisualDataRoleKind||(dt.VisualDataRoleKind={})),function($t){$t[$t.Measure=0]="Measure",$t[$t.Grouping=1]="Grouping"}(dt.VisualDataRoleKindPreference||(dt.VisualDataRoleKindPreference={}));function qt($t){return $t&&!Kt($t)}dt.isOnLoadFilters=qt;function Kt($t){return Array.isArray($t)}dt.isReportFiltersArray=Kt;function jt($t){return $t&&!Ht($t)}dt.isFlatMenuExtension=jt;function Ht($t){return $t&&!!$t.groupName}dt.isGroupedMenuExtension=Ht;function Bt($t){return $t&&!Jt($t)}dt.isIExtensions=Bt;function Jt($t){return Array.isArray($t)}dt.isIExtensionArray=Jt;function sr($t){var or=$t.message;return or||(or="".concat($t.path," is invalid. Not meeting ").concat($t.keyword," constraint")),{message:or}}function hr($t){var or=tt.Validators.visualSelectorValidator.validate($t);return or?or.map(sr):void 0}dt.validateVisualSelector=hr;function Ar($t){var or=tt.Validators.slicerValidator.validate($t);return or?or.map(sr):void 0}dt.validateSlicer=Ar;function yn($t){var or=tt.Validators.slicerStateValidator.validate($t);return or?or.map(sr):void 0}dt.validateSlicerState=yn;function Lr($t){var or=tt.Validators.playBookmarkRequestValidator.validate($t);return or?or.map(sr):void 0}dt.validatePlayBookmarkRequest=Lr;function wr($t){var or=tt.Validators.addBookmarkRequestValidator.validate($t);return or?or.map(sr):void 0}dt.validateAddBookmarkRequest=wr;function En($t){var or=tt.Validators.applyBookmarkByNameRequestValidator.validate($t);return or?or.map(sr):void 0}dt.validateApplyBookmarkByNameRequest=En;function Dr($t){var or=tt.Validators.applyBookmarkStateRequestValidator.validate($t);return or?or.map(sr):void 0}dt.validateApplyBookmarkStateRequest=Dr;function Qr($t){var or=tt.Validators.captureBookmarkRequestValidator.validate($t);return or?or.map(sr):void 0}dt.validateCaptureBookmarkRequest=Qr;function Bn($t){var or=tt.Validators.settingsValidator.validate($t);return or?or.map(sr):void 0}dt.validateSettings=Bn;function Br($t){var or=tt.Validators.reportPanesValidator.validate($t);return or?or.map(sr):void 0}dt.validatePanes=Br;function Gr($t){var or=tt.Validators.bookmarksPaneValidator.validate($t);return or?or.map(sr):void 0}dt.validateBookmarksPane=Gr;function Dn($t){var or=tt.Validators.filtersPaneValidator.validate($t);return or?or.map(sr):void 0}dt.validateFiltersPane=Dn;function Fr($t){var or=tt.Validators.fieldsPaneValidator.validate($t);return or?or.map(sr):void 0}dt.validateFieldsPane=Fr;function _i($t){var or=tt.Validators.pageNavigationPaneValidator.validate($t);return or?or.map(sr):void 0}dt.validatePageNavigationPane=_i;function Gn($t){var or=tt.Validators.selectionPaneValidator.validate($t);return or?or.map(sr):void 0}dt.validateSelectionPane=Gn;function Wt($t){var or=tt.Validators.syncSlicersPaneValidator.validate($t);return or?or.map(sr):void 0}dt.validateSyncSlicersPane=Wt;function Lt($t){var or=tt.Validators.visualizationsPaneValidator.validate($t);return or?or.map(sr):void 0}dt.validateVisualizationsPane=Lt;function zt($t){var or=tt.Validators.customPageSizeValidator.validate($t);return or?or.map(sr):void 0}dt.validateCustomPageSize=zt;function Zt($t){var or=tt.Validators.extensionValidator.validate($t);return or?or.map(sr):void 0}dt.validateExtension=Zt;function ar($t){var or=tt.Validators.menuGroupExtensionValidator.validate($t);return or?or.map(sr):void 0}dt.validateMenuGroupExtension=ar;function Or($t){var or=tt.Validators.reportLoadValidator.validate($t);return or?or.map(sr):void 0}dt.validateReportLoad=Or;function vr($t){var or=tt.Validators.paginatedReportLoadValidator.validate($t);return or?or.map(sr):void 0}dt.validatePaginatedReportLoad=vr;function Rr($t){var or=tt.Validators.reportCreateValidator.validate($t);return or?or.map(sr):void 0}dt.validateCreateReport=Rr;function fr($t){var or=tt.Validators.quickCreateValidator.validate($t);return or?or.map(sr):void 0}dt.validateQuickCreate=fr;function tr($t){var or=tt.Validators.dashboardLoadValidator.validate($t);return or?or.map(sr):void 0}dt.validateDashboardLoad=tr;function yr($t){var or=tt.Validators.tileLoadValidator.validate($t);return or?or.map(sr):void 0}dt.validateTileLoad=yr;function hn($t){var or=tt.Validators.pageValidator.validate($t);return or?or.map(sr):void 0}dt.validatePage=hn;function Nr($t){var or=tt.Validators.filterValidator.validate($t);return or?or.map(sr):void 0}dt.validateFilter=Nr;function zr($t){var or=tt.Validators.updateFiltersRequestValidator.validate($t);return or?or.map(sr):void 0}dt.validateUpdateFiltersRequest=zr;function kn($t){var or=tt.Validators.saveAsParametersValidator.validate($t);return or?or.map(sr):void 0}dt.validateSaveAsParameters=kn;function Kr($t){var or=tt.Validators.loadQnaValidator.validate($t);return or?or.map(sr):void 0}dt.validateLoadQnaConfiguration=Kr;function nn($t){var or=tt.Validators.qnaInterpretInputDataValidator.validate($t);return or?or.map(sr):void 0}dt.validateQnaInterpretInputData=nn;function Qn($t){var or=tt.Validators.exportDataRequestValidator.validate($t);return or?or.map(sr):void 0}dt.validateExportDataRequest=Qn;function Zr($t){var or=tt.Validators.visualHeaderValidator.validate($t);return or?or.map(sr):void 0}dt.validateVisualHeader=Zr;function on($t){var or=tt.Validators.visualSettingsValidator.validate($t);return or?or.map(sr):void 0}dt.validateVisualSettings=on;function Zn($t){var or=tt.Validators.commandsSettingsValidator.validate($t);return or?or.map(sr):void 0}dt.validateCommandsSettings=Zn;function en($t){var or=tt.Validators.customThemeValidator.validate($t);return or?or.map(sr):void 0}dt.validateCustomTheme=en;function ln($t){var or=tt.Validators.zoomLevelValidator.validate($t);return or?or.map(sr):void 0}dt.validateZoomLevel=ln;function eo($t){var or=tt.Validators.printSettingsValidator.validate($t);return or?or.map(sr):void 0}dt.validatePrintSettings=eo},(gt,dt,mt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.Validators=void 0;var vt=mt(2),tt=mt(5),bt=mt(6),ht=mt(7),St=mt(8),At=mt(9),Tt=mt(10),ft=mt(11),_t=mt(12),Rt=mt(13),Mt=mt(14),Et=mt(15),kt=mt(16),at=mt(17),s=mt(18),b=mt(19),$=mt(20),_e=mt(21),it=mt(22),pt=mt(23),yt=mt(24),ct=mt(25),_=mt(26),rt=mt(27),Ct=mt(28),It=mt(29),Nt=mt(4),Ut=mt(30),Gt=mt(31),Pt=mt(32),qt=mt(33),Kt=mt(34);dt.Validators={addBookmarkRequestValidator:new tt.AddBookmarkRequestValidator,advancedFilterTypeValidator:new Nt.EnumValidator([0]),advancedFilterValidator:new _t.AdvancedFilterValidator,anyArrayValidator:new Nt.ArrayValidator([new _.AnyOfValidator([new Nt.StringValidator,new Nt.NumberValidator,new Nt.BooleanValidator])]),anyFilterValidator:new _.AnyOfValidator([new _t.BasicFilterValidator,new _t.AdvancedFilterValidator,new _t.IncludeExcludeFilterValidator,new _t.NotSupportedFilterValidator,new _t.RelativeDateFilterValidator,new _t.TopNFilterValidator,new _t.RelativeTimeFilterValidator,new _t.HierarchyFilterValidator]),anyValueValidator:new _.AnyOfValidator([new Nt.StringValidator,new Nt.NumberValidator,new Nt.BooleanValidator]),actionBarValidator:new vt.ActionBarValidator,statusBarValidator:new vt.StatusBarValidator,applyBookmarkByNameRequestValidator:new tt.ApplyBookmarkByNameRequestValidator,applyBookmarkStateRequestValidator:new tt.ApplyBookmarkStateRequestValidator,applyBookmarkValidator:new _.AnyOfValidator([new tt.ApplyBookmarkByNameRequestValidator,new tt.ApplyBookmarkStateRequestValidator]),backgroundValidator:new Nt.EnumValidator([0,1]),basicFilterTypeValidator:new Nt.EnumValidator([1]),basicFilterValidator:new _t.BasicFilterValidator,booleanArrayValidator:new Nt.BooleanArrayValidator,booleanValidator:new Nt.BooleanValidator,bookmarksPaneValidator:new Et.BookmarksPaneValidator,captureBookmarkOptionsValidator:new tt.CaptureBookmarkOptionsValidator,captureBookmarkRequestValidator:new tt.CaptureBookmarkRequestValidator,columnSchemaArrayValidator:new Nt.ArrayValidator([new Gt.ColumnSchemaValidator]),commandDisplayOptionValidator:new Nt.EnumValidator([0,1,2]),commandExtensionSelectorValidator:new _.AnyOfValidator([new _e.VisualSelectorValidator,new _e.VisualTypeSelectorValidator]),commandExtensionArrayValidator:new Nt.ArrayValidator([new ft.CommandExtensionValidator]),commandExtensionValidator:new ft.CommandExtensionValidator,commandsSettingsArrayValidator:new Nt.ArrayValidator([new bt.CommandsSettingsValidator]),commandsSettingsValidator:new bt.CommandsSettingsValidator,conditionItemValidator:new _t.ConditionItemValidator,contrastModeValidator:new Nt.EnumValidator([0,1,2,3,4]),credentialDetailsValidator:new It.MapValidator([new Nt.StringValidator],[new Nt.StringValidator]),credentialsValidator:new Gt.CredentialsValidator,credentialTypeValidator:new Nt.EnumValidator([0,1,2]),customLayoutDisplayOptionValidator:new Nt.EnumValidator([0,1,2]),customLayoutValidator:new Rt.CustomLayoutValidator,customPageSizeValidator:new Mt.CustomPageSizeValidator,customThemeValidator:new ht.CustomThemeValidator,dashboardLoadValidator:new St.DashboardLoadValidator,dataCacheModeValidator:new Nt.EnumValidator([0,1]),datasetBindingValidator:new At.DatasetBindingValidator,datasetCreateConfigValidator:new Gt.DatasetCreateConfigValidator,datasourceConnectionConfigValidator:new Gt.DatasourceConnectionConfigValidator,displayStateModeValidator:new Nt.EnumValidator([0,1]),displayStateValidator:new Rt.DisplayStateValidator,exportDataRequestValidator:new Tt.ExportDataRequestValidator,extensionArrayValidator:new Nt.ArrayValidator([new ft.ExtensionValidator]),extensionsValidator:new _.AnyOfValidator([new Nt.ArrayValidator([new ft.ExtensionValidator]),new ft.ExtensionsValidator]),extensionPointsValidator:new ft.ExtensionPointsValidator,extensionValidator:new ft.ExtensionValidator,fieldForbiddenValidator:new rt.FieldForbiddenValidator,fieldRequiredValidator:new Ct.FieldRequiredValidator,fieldsPaneValidator:new Et.FieldsPaneValidator,filterColumnTargetValidator:new _t.FilterColumnTargetValidator,filterDisplaySettingsValidator:new _t.FilterDisplaySettingsValidator,filterConditionsValidator:new Nt.ArrayValidator([new _t.ConditionItemValidator]),filterHierarchyTargetValidator:new _t.FilterHierarchyTargetValidator,filterMeasureTargetValidator:new _t.FilterMeasureTargetValidator,filterTargetValidator:new _.AnyOfValidator([new _t.FilterColumnTargetValidator,new _t.FilterHierarchyTargetValidator,new _t.FilterMeasureTargetValidator,new Nt.ArrayValidator([new _.AnyOfValidator([new _t.FilterColumnTargetValidator,new _t.FilterHierarchyTargetValidator,new _t.FilterMeasureTargetValidator,new _t.FilterKeyColumnsTargetValidator,new _t.FilterKeyHierarchyTargetValidator,new Nt.ArrayValidator([new _.AnyOfValidator([new _t.FilterColumnTargetValidator,new _t.FilterHierarchyTargetValidator,new _t.FilterMeasureTargetValidator,new _t.FilterKeyColumnsTargetValidator,new _t.FilterKeyHierarchyTargetValidator])])])])]),filterValidator:new _t.FilterValidator,filterTypeValidator:new Nt.EnumValidator([0,1,2,3,4,5,6,7,9]),filtersArrayValidator:new Nt.ArrayValidator([new _t.FilterValidator]),filtersOperationsUpdateValidator:new Nt.EnumValidator([1,2,3]),filtersOperationsRemoveAllValidator:new Nt.EnumValidator([0]),filtersPaneValidator:new Et.FiltersPaneValidator,hyperlinkClickBehaviorValidator:new Nt.EnumValidator([0,1,2]),includeExcludeFilterValidator:new _t.IncludeExcludeFilterValidator,includeExludeFilterTypeValidator:new Nt.EnumValidator([3]),includeExcludeFilterValuesValidator:new Nt.ArrayValidator([new _.AnyOfValidator([new Nt.StringValidator,new Nt.NumberValidator,new Nt.BooleanValidator,new Nt.ArrayValidator([new Nt.ArrayValidator([new _t.IncludeExcludePointValueValidator])])])]),hierarchyFilterTypeValidator:new Nt.EnumValidator([9]),hierarchyFilterValuesValidator:new Nt.ArrayValidator([new _t.HierarchyFilterNodeValidator]),layoutTypeValidator:new Nt.EnumValidator([0,1,2,3]),loadQnaValidator:new kt.LoadQnaValidator,menuExtensionValidator:new _.AnyOfValidator([new ft.FlatMenuExtensionValidator,new ft.GroupedMenuExtensionValidator]),menuGroupExtensionArrayValidator:new Nt.ArrayValidator([new ft.MenuGroupExtensionValidator]),menuGroupExtensionValidator:new ft.MenuGroupExtensionValidator,menuLocationValidator:new Nt.EnumValidator([0,1]),notSupportedFilterTypeValidator:new Nt.EnumValidator([2]),notSupportedFilterValidator:new _t.NotSupportedFilterValidator,numberArrayValidator:new Nt.NumberArrayValidator,numberValidator:new Nt.NumberValidator,onLoadFiltersBaseValidator:new _.AnyOfValidator([new _t.OnLoadFiltersBaseValidator,new _t.OnLoadFiltersBaseRemoveOperationValidator]),pageLayoutValidator:new It.MapValidator([new Nt.StringValidator],[new Rt.VisualLayoutValidator]),pageNavigationPaneValidator:new Et.PageNavigationPaneValidator,pageNavigationPositionValidator:new Nt.EnumValidator([0,1]),pageSizeTypeValidator:new Nt.EnumValidator([0,1,2,3,4,5]),pageSizeValidator:new Mt.PageSizeValidator,pageValidator:new Mt.PageValidator,pageViewFieldValidator:new Mt.PageViewFieldValidator,pagesLayoutValidator:new It.MapValidator([new Nt.StringValidator],[new Rt.PageLayoutValidator]),paginatedReportCommandsValidator:new bt.PaginatedReportCommandsValidator,paginatedReportDatasetBindingArrayValidator:new Nt.ArrayValidator([new Kt.PaginatedReportDatasetBindingValidator]),paginatedReportLoadValidator:new b.PaginatedReportLoadValidator,paginatedReportsettingsValidator:new it.PaginatedReportSettingsValidator,parameterValuesArrayValidator:new Nt.ArrayValidator([new b.ReportParameterFieldsValidator]),parametersPanelValidator:new Ut.ParametersPanelValidator,permissionsValidator:new Nt.EnumValidator([0,1,2,4,7]),playBookmarkRequestValidator:new tt.PlayBookmarkRequestValidator,printSettingsValidator:new qt.PrintSettingsValidator,qnaInterpretInputDataValidator:new kt.QnaInterpretInputDataValidator,qnaPanesValidator:new Et.QnaPanesValidator,qnaSettingValidator:new kt.QnaSettingsValidator,quickCreateValidator:new Pt.QuickCreateValidator,rawDataValidator:new Nt.ArrayValidator([new Nt.ArrayValidator([new Nt.StringValidator])]),relativeDateFilterOperatorValidator:new Nt.EnumValidator([0,1,2]),relativeDateFilterTimeUnitTypeValidator:new Nt.EnumValidator([0,1,2,3,4,5,6]),relativeDateFilterTypeValidator:new Nt.EnumValidator([4]),relativeDateFilterValidator:new _t.RelativeDateFilterValidator,relativeDateTimeFilterTypeValidator:new Nt.EnumValidator([4,7]),relativeDateTimeFilterUnitTypeValidator:new Nt.EnumValidator([0,1,2,3,4,5,6,7,8]),relativeTimeFilterTimeUnitTypeValidator:new Nt.EnumValidator([7,8]),relativeTimeFilterTypeValidator:new Nt.EnumValidator([7]),relativeTimeFilterValidator:new _t.RelativeTimeFilterValidator,reportBarsValidator:new vt.ReportBarsValidator,reportCreateValidator:new at.ReportCreateValidator,reportLoadFiltersValidator:new _.AnyOfValidator([new Nt.ArrayValidator([new _t.FilterValidator]),new _t.OnLoadFiltersValidator]),reportLoadValidator:new s.ReportLoadValidator,reportPanesValidator:new Et.ReportPanesValidator,saveAsParametersValidator:new $.SaveAsParametersValidator,selectionPaneValidator:new Et.SelectionPaneValidator,settingsValidator:new it.SettingsValidator,singleCommandSettingsValidator:new bt.SingleCommandSettingsValidator,slicerSelectorValidator:new _.AnyOfValidator([new _e.VisualSelectorValidator,new _e.SlicerTargetSelectorValidator]),slicerStateValidator:new pt.SlicerStateValidator,slicerTargetValidator:new _.AnyOfValidator([new _t.FilterColumnTargetValidator,new _t.FilterHierarchyTargetValidator,new _t.FilterMeasureTargetValidator,new _t.FilterKeyColumnsTargetValidator,new _t.FilterKeyHierarchyTargetValidator]),slicerValidator:new pt.SlicerValidator,stringArrayValidator:new Nt.StringArrayValidator,stringValidator:new Nt.StringValidator,syncSlicersPaneValidator:new Et.SyncSlicersPaneValidator,tableDataArrayValidator:new Nt.ArrayValidator([new Gt.TableDataValidator]),tableSchemaListValidator:new Nt.ArrayValidator([new Gt.TableSchemaValidator]),tileLoadValidator:new yt.TileLoadValidator,tokenTypeValidator:new Nt.EnumValidator([0,1]),topNFilterTypeValidator:new Nt.EnumValidator([5]),topNFilterValidator:new _t.TopNFilterValidator,updateFiltersRequestValidator:new _.AnyOfValidator([new _t.UpdateFiltersRequestValidator,new _t.RemoveFiltersRequestValidator]),viewModeValidator:new Nt.EnumValidator([0,1]),visualCommandSelectorValidator:new _.AnyOfValidator([new _e.VisualSelectorValidator,new _e.VisualTypeSelectorValidator]),visualHeaderSelectorValidator:new _.AnyOfValidator([new _e.VisualSelectorValidator,new _e.VisualTypeSelectorValidator]),visualHeaderSettingsValidator:new ct.VisualHeaderSettingsValidator,visualHeaderValidator:new ct.VisualHeaderValidator,visualHeadersValidator:new Nt.ArrayValidator([new ct.VisualHeaderValidator]),visualizationsPaneValidator:new Et.VisualizationsPaneValidator,visualLayoutValidator:new Rt.VisualLayoutValidator,visualSelectorValidator:new _e.VisualSelectorValidator,visualSettingsValidator:new ct.VisualSettingsValidator,visualTypeSelectorValidator:new _e.VisualTypeSelectorValidator,zoomLevelValidator:new Nt.RangeValidator(.25,4)}},function(gt,dt,mt){var vt=this&&this.__extends||function(){var ft=function(_t,Rt){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,Et){Mt.__proto__=Et}||function(Mt,Et){for(var kt in Et)Object.prototype.hasOwnProperty.call(Et,kt)&&(Mt[kt]=Et[kt])},ft(_t,Rt)};return function(_t,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");ft(_t,Rt);function Mt(){this.constructor=_t}_t.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.StatusBarValidator=dt.ActionBarValidator=dt.ReportBarsValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"actionBar",validators:[ht.Validators.actionBarValidator]},{field:"statusBar",validators:[ht.Validators.statusBarValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.ReportBarsValidator=St;var At=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"visible",validators:[ht.Validators.booleanValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.ActionBarValidator=At;var Tt=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"visible",validators:[ht.Validators.booleanValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.StatusBarValidator=Tt},(gt,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.MultipleFieldsValidator=void 0;var mt=function(){function vt(tt){this.fieldValidatorsPairs=tt}return vt.prototype.validate=function(tt,bt,ht){if(!this.fieldValidatorsPairs)return null;for(var St=bt?bt+"."+ht:ht,At=0,Tt=this.fieldValidatorsPairs;At<Tt.length;At++)for(var ft=Tt[At],_t=0,Rt=ft.validators;_t<Rt.length;_t++){var Mt=Rt[_t],Et=Mt.validate(tt[ft.field],St,ft.field);if(Et)return Et}return null},vt}();dt.MultipleFieldsValidator=mt},function(gt,dt){var mt=this&&this.__extends||function(){var at=function(s,b){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&($[it]=_e[it])},at(s,b)};return function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");at(s,b);function $(){this.constructor=s}s.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.RangeValidator=dt.NumberArrayValidator=dt.BooleanArrayValidator=dt.StringArrayValidator=dt.EnumValidator=dt.SchemaValidator=dt.ValueValidator=dt.NumberValidator=dt.BooleanValidator=dt.StringValidator=dt.TypeValidator=dt.ArrayValidator=dt.ObjectValidator=void 0;var vt=function(){function at(){}return at.prototype.validate=function(s,b,$){return s==null?null:typeof s!="object"||Array.isArray(s)?[{message:$!==void 0?$+" must be an object":"input must be an object",path:b,keyword:"type"}]:null},at}();dt.ObjectValidator=vt;var tt=function(){function at(s){this.itemValidators=s}return at.prototype.validate=function(s,b,$){if(s==null)return null;if(!Array.isArray(s))return[{message:$+" property is invalid",path:(b?b+".":"")+$,keyword:"type"}];for(var _e=0;_e<s.length;_e++)for(var it=(b?b+".":"")+$+"."+_e.toString(),pt=0,yt=this.itemValidators;pt<yt.length;pt++){var ct=yt[pt],_=ct.validate(s[_e],it,$);if(_)return[{message:$+" property is invalid",path:(b?b+".":"")+$,keyword:"type"}]}return null},at}();dt.ArrayValidator=tt;var bt=function(){function at(s){this.expectedType=s}return at.prototype.validate=function(s,b,$){return s==null?null:typeof s!==this.expectedType?[{message:$+" must be a "+this.expectedType,path:(b?b+".":"")+$,keyword:"type"}]:null},at}();dt.TypeValidator=bt;var ht=function(at){mt(s,at);function s(){return at.call(this,"string")||this}return s}(bt);dt.StringValidator=ht;var St=function(at){mt(s,at);function s(){return at.call(this,"boolean")||this}return s}(bt);dt.BooleanValidator=St;var At=function(at){mt(s,at);function s(){return at.call(this,"number")||this}return s}(bt);dt.NumberValidator=At;var Tt=function(){function at(s){this.possibleValues=s}return at.prototype.validate=function(s,b,$){return s==null?null:this.possibleValues.indexOf(s)<0?[{message:$+" property is invalid",path:(b?b+".":"")+$,keyword:"invalid"}]:null},at}();dt.ValueValidator=Tt;var ft=function(at){mt(s,at);function s(b){var $=at.call(this,[b])||this;return $.schemaValue=b,$}return s.prototype.validate=function(b,$,_e){return at.prototype.validate.call(this,b,$,_e)},s}(Tt);dt.SchemaValidator=ft;var _t=function(at){mt(s,at);function s(b){var $=at.call(this)||this;return $.possibleValues=b,$}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=new Tt(this.possibleValues);return pt.validate(b,$,_e)},s}(At);dt.EnumValidator=_t;var Rt=function(at){mt(s,at);function s(){return at.call(this,[new ht])||this}return s.prototype.validate=function(b,$,_e){var it=at.prototype.validate.call(this,b,$,_e);return it?[{message:_e+" must be an array of strings",path:($?$+".":"")+_e,keyword:"type"}]:null},s}(tt);dt.StringArrayValidator=Rt;var Mt=function(at){mt(s,at);function s(){return at.call(this,[new St])||this}return s.prototype.validate=function(b,$,_e){var it=at.prototype.validate.call(this,b,$,_e);return it?[{message:_e+" must be an array of booleans",path:($?$+".":"")+_e,keyword:"type"}]:null},s}(tt);dt.BooleanArrayValidator=Mt;var Et=function(at){mt(s,at);function s(){return at.call(this,[new At])||this}return s.prototype.validate=function(b,$,_e){var it=at.prototype.validate.call(this,b,$,_e);return it?[{message:_e+" must be an array of numbers",path:($?$+".":"")+_e,keyword:"type"}]:null},s}(tt);dt.NumberArrayValidator=Et;var kt=function(at){mt(s,at);function s(b,$){var _e=at.call(this)||this;return _e.minValue=b,_e.maxValue=$,_e}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);return it||(b>this.maxValue||b<this.minValue?[{message:_e+" must be a number between "+this.minValue.toString()+" and "+this.maxValue.toString(),path:($?$+".":"")+_e,keyword:"range"}]:null)},s}(At);dt.RangeValidator=kt},function(gt,dt,mt){var vt=this&&this.__extends||function(){var Mt=function(Et,kt){return Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,s){at.__proto__=s}||function(at,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(at[b]=s[b])},Mt(Et,kt)};return function(Et,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");Mt(Et,kt);function at(){this.constructor=Et}Et.prototype=kt===null?Object.create(kt):(at.prototype=kt.prototype,new at)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.CaptureBookmarkRequestValidator=dt.CaptureBookmarkOptionsValidator=dt.ApplyBookmarkStateRequestValidator=dt.ApplyBookmarkByNameRequestValidator=dt.AddBookmarkRequestValidator=dt.PlayBookmarkRequestValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"playMode",validators:[ht.Validators.fieldRequiredValidator,new bt.EnumValidator([0,1])]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.PlayBookmarkRequestValidator=St;var At=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"state",validators:[ht.Validators.stringValidator]},{field:"displayName",validators:[ht.Validators.stringValidator]},{field:"apply",validators:[ht.Validators.booleanValidator]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.AddBookmarkRequestValidator=At;var Tt=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.ApplyBookmarkByNameRequestValidator=Tt;var ft=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"state",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.ApplyBookmarkStateRequestValidator=ft;var _t=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"personalizeVisuals",validators:[ht.Validators.booleanValidator]},{field:"allPages",validators:[ht.Validators.booleanValidator]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.CaptureBookmarkOptionsValidator=_t;var Rt=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"options",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.captureBookmarkOptionsValidator]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.CaptureBookmarkRequestValidator=Rt},function(gt,dt,mt){var vt=this&&this.__extends||function(){var ft=function(_t,Rt){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,Et){Mt.__proto__=Et}||function(Mt,Et){for(var kt in Et)Object.prototype.hasOwnProperty.call(Et,kt)&&(Mt[kt]=Et[kt])},ft(_t,Rt)};return function(_t,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");ft(_t,Rt);function Mt(){this.constructor=_t}_t.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.PaginatedReportCommandsValidator=dt.SingleCommandSettingsValidator=dt.CommandsSettingsValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"copy",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"drill",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"drillthrough",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"expandCollapse",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"exportData",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"includeExclude",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"removeVisual",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"search",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"seeData",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"sort",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"spotlight",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"insightsAnalysis",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"addComment",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"groupVisualContainers",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"summarize",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"clearSelection",validators:[ht.Validators.singleCommandSettingsValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.CommandsSettingsValidator=St;var At=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"displayOption",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.commandDisplayOptionValidator]},{field:"selector",validators:[ht.Validators.visualCommandSelectorValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.SingleCommandSettingsValidator=At;var Tt=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"parameterPanel",validators:[ht.Validators.parametersPanelValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.PaginatedReportCommandsValidator=Tt},function(gt,dt,mt){var vt=this&&this.__extends||function(){var St=function(At,Tt){return St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,_t){ft.__proto__=_t}||function(ft,_t){for(var Rt in _t)Object.prototype.hasOwnProperty.call(_t,Rt)&&(ft[Rt]=_t[Rt])},St(At,Tt)};return function(At,Tt){if(typeof Tt!="function"&&Tt!==null)throw new TypeError("Class extends value "+String(Tt)+" is not a constructor or null");St(At,Tt);function ft(){this.constructor=At}At.prototype=Tt===null?Object.create(Tt):(ft.prototype=Tt.prototype,new ft)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.CustomThemeValidator=void 0;var tt=mt(3),bt=mt(4),ht=function(St){vt(At,St);function At(){return St!==null&&St.apply(this,arguments)||this}return At.prototype.validate=function(Tt,ft,_t){if(Tt==null)return null;var Rt=St.prototype.validate.call(this,Tt,ft,_t);if(Rt)return Rt;var Mt=[{field:"themeJson",validators:[new bt.ObjectValidator]}],Et=new tt.MultipleFieldsValidator(Mt);return Et.validate(Tt,ft,_t)},At}(bt.ObjectValidator);dt.CustomThemeValidator=ht},function(gt,dt,mt){var vt=this&&this.__extends||function(){var At=function(Tt,ft){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Rt){_t.__proto__=Rt}||function(_t,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(_t[Mt]=Rt[Mt])},At(Tt,ft)};return function(Tt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");At(Tt,ft);function _t(){this.constructor=Tt}Tt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.DashboardLoadValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(At){vt(Tt,At);function Tt(){return At!==null&&At.apply(this,arguments)||this}return Tt.prototype.validate=function(ft,_t,Rt){if(ft==null)return null;var Mt=At.prototype.validate.call(this,ft,_t,Rt);if(Mt)return Mt;var Et=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"id",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"pageView",validators:[ht.Validators.pageViewFieldValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"embedUrl",validators:[ht.Validators.stringValidator]}],kt=new tt.MultipleFieldsValidator(Et);return kt.validate(ft,_t,Rt)},Tt}(bt.ObjectValidator);dt.DashboardLoadValidator=St},function(gt,dt,mt){var vt=this&&this.__extends||function(){var At=function(Tt,ft){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Rt){_t.__proto__=Rt}||function(_t,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(_t[Mt]=Rt[Mt])},At(Tt,ft)};return function(Tt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");At(Tt,ft);function _t(){this.constructor=Tt}Tt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.DatasetBindingValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(At){vt(Tt,At);function Tt(){return At!==null&&At.apply(this,arguments)||this}return Tt.prototype.validate=function(ft,_t,Rt){if(ft==null)return null;var Mt=At.prototype.validate.call(this,ft,_t,Rt);if(Mt)return Mt;if(!ft.datasetId&&!ft.paginatedReportBindings)return[{message:"datasetBinding cannot be empty",path:(_t?_t+".":"")+Rt,keyword:"invalid"}];var Et=[{field:"datasetId",validators:[ht.Validators.stringValidator]},{field:"paginatedReportBindings",validators:[ht.Validators.paginatedReportDatasetBindingArrayValidator]}],kt=new tt.MultipleFieldsValidator(Et);return kt.validate(ft,_t,Rt)},Tt}(bt.ObjectValidator);dt.DatasetBindingValidator=St},function(gt,dt,mt){var vt=this&&this.__extends||function(){var St=function(At,Tt){return St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,_t){ft.__proto__=_t}||function(ft,_t){for(var Rt in _t)Object.prototype.hasOwnProperty.call(_t,Rt)&&(ft[Rt]=_t[Rt])},St(At,Tt)};return function(At,Tt){if(typeof Tt!="function"&&Tt!==null)throw new TypeError("Class extends value "+String(Tt)+" is not a constructor or null");St(At,Tt);function ft(){this.constructor=At}At.prototype=Tt===null?Object.create(Tt):(ft.prototype=Tt.prototype,new ft)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.ExportDataRequestValidator=void 0;var tt=mt(3),bt=mt(4),ht=function(St){vt(At,St);function At(){return St!==null&&St.apply(this,arguments)||this}return At.prototype.validate=function(Tt,ft,_t){if(Tt==null)return null;var Rt=St.prototype.validate.call(this,Tt,ft,_t);if(Rt)return Rt;var Mt=[{field:"rows",validators:[new bt.NumberValidator]},{field:"exportDataType",validators:[new bt.EnumValidator([0,1])]}],Et=new tt.MultipleFieldsValidator(Mt);return Et.validate(Tt,ft,_t)},At}(bt.ObjectValidator);dt.ExportDataRequestValidator=ht},function(gt,dt,mt){var vt=this&&this.__extends||function(){var at=function(s,b){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&($[it]=_e[it])},at(s,b)};return function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");at(s,b);function $(){this.constructor=s}s.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.ExtensionsValidator=dt.MenuGroupExtensionValidator=dt.ExtensionValidator=dt.CommandExtensionValidator=dt.ExtensionItemValidator=dt.ExtensionPointsValidator=dt.GroupedMenuExtensionValidator=dt.FlatMenuExtensionValidator=dt.MenuExtensionBaseValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"title",validators:[ht.Validators.stringValidator]},{field:"icon",validators:[ht.Validators.stringValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.MenuExtensionBaseValidator=St;var At=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"menuLocation",validators:[ht.Validators.menuLocationValidator]},{field:"groupName",validators:[ht.Validators.fieldForbiddenValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(St);dt.FlatMenuExtensionValidator=At;var Tt=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"groupName",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"menuLocation",validators:[ht.Validators.fieldForbiddenValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(St);dt.GroupedMenuExtensionValidator=Tt;var ft=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visualContextMenu",validators:[ht.Validators.menuExtensionValidator]},{field:"visualOptionsMenu",validators:[ht.Validators.menuExtensionValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.ExtensionPointsValidator=ft;var _t=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"extend",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.extensionPointsValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.ExtensionItemValidator=_t;var Rt=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"title",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"icon",validators:[ht.Validators.stringValidator]},{field:"selector",validators:[ht.Validators.commandExtensionSelectorValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(_t);dt.CommandExtensionValidator=Rt;var Mt=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"command",validators:[ht.Validators.commandExtensionValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.ExtensionValidator=Mt;var Et=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"title",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"menuLocation",validators:[ht.Validators.menuLocationValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.MenuGroupExtensionValidator=Et;var kt=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"commands",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.commandExtensionArrayValidator]},{field:"groups",validators:[ht.Validators.menuGroupExtensionArrayValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.ExtensionsValidator=kt},function(gt,dt,mt){var vt=this&&this.__extends||function(){var Pt=function(qt,Kt){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Ht){jt.__proto__=Ht}||function(jt,Ht){for(var Bt in Ht)Object.prototype.hasOwnProperty.call(Ht,Bt)&&(jt[Bt]=Ht[Bt])},Pt(qt,Kt)};return function(qt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Class extends value "+String(Kt)+" is not a constructor or null");Pt(qt,Kt);function jt(){this.constructor=qt}qt.prototype=Kt===null?Object.create(Kt):(jt.prototype=Kt.prototype,new jt)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.OnLoadFiltersValidator=dt.OnLoadFiltersBaseRemoveOperationValidator=dt.OnLoadFiltersBaseValidator=dt.ConditionItemValidator=dt.RemoveFiltersRequestValidator=dt.UpdateFiltersRequestValidator=dt.FilterValidator=dt.IncludeExcludePointValueValidator=dt.HierarchyFilterNodeValidator=dt.HierarchyFilterValidator=dt.IncludeExcludeFilterValidator=dt.NotSupportedFilterValidator=dt.TopNFilterValidator=dt.RelativeTimeFilterValidator=dt.RelativeDateFilterValidator=dt.RelativeDateTimeFilterValidator=dt.AdvancedFilterValidator=dt.BasicFilterValidator=dt.FilterValidatorBase=dt.FilterDisplaySettingsValidator=dt.FilterMeasureTargetValidator=dt.FilterKeyHierarchyTargetValidator=dt.FilterHierarchyTargetValidator=dt.FilterKeyColumnsTargetValidator=dt.FilterColumnTargetValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"table",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"column",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.FilterColumnTargetValidator=St;var At=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"keys",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringArrayValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(St);dt.FilterKeyColumnsTargetValidator=At;var Tt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"table",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"hierarchy",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"hierarchyLevel",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.FilterHierarchyTargetValidator=Tt;var ft=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"keys",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringArrayValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Tt);dt.FilterKeyHierarchyTargetValidator=ft;var _t=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"table",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"measure",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.FilterMeasureTargetValidator=_t;var Rt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"isLockedInViewMode",validators:[ht.Validators.booleanValidator]},{field:"isHiddenInViewMode",validators:[ht.Validators.booleanValidator]},{field:"displayName",validators:[ht.Validators.stringValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.FilterDisplaySettingsValidator=Rt;var Mt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"target",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filterTargetValidator]},{field:"$schema",validators:[ht.Validators.stringValidator]},{field:"filterType",validators:[ht.Validators.filterTypeValidator]},{field:"displaySettings",validators:[ht.Validators.filterDisplaySettingsValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.FilterValidatorBase=Mt;var Et=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"operator",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"values",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.anyArrayValidator]},{field:"filterType",validators:[ht.Validators.basicFilterTypeValidator]},{field:"requireSingleSelection",validators:[ht.Validators.booleanValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);dt.BasicFilterValidator=Et;var kt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"logicalOperator",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"conditions",validators:[ht.Validators.filterConditionsValidator]},{field:"filterType",validators:[ht.Validators.advancedFilterTypeValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);dt.AdvancedFilterValidator=kt;var at=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"operator",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.relativeDateFilterOperatorValidator]},{field:"timeUnitsCount",validators:[ht.Validators.numberValidator]},{field:"timeUnitType",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.relativeDateTimeFilterUnitTypeValidator]},{field:"filterType",validators:[ht.Validators.relativeDateTimeFilterTypeValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);dt.RelativeDateTimeFilterValidator=at;var s=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"includeToday",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.booleanValidator]},{field:"timeUnitType",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.relativeDateFilterTimeUnitTypeValidator]},{field:"filterType",validators:[ht.Validators.relativeDateFilterTypeValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(at);dt.RelativeDateFilterValidator=s;var b=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"timeUnitType",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.relativeTimeFilterTimeUnitTypeValidator]},{field:"filterType",validators:[ht.Validators.relativeTimeFilterTypeValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(at);dt.RelativeTimeFilterValidator=b;var $=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"operator",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"itemCount",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.numberValidator]},{field:"filterType",validators:[ht.Validators.topNFilterTypeValidator]},{field:"orderBy",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filterTargetValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);dt.TopNFilterValidator=$;var _e=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"message",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"notSupportedTypeName",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"filterType",validators:[ht.Validators.notSupportedFilterTypeValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);dt.NotSupportedFilterValidator=_e;var it=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"isExclude",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.booleanValidator]},{field:"values",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.includeExcludeFilterValuesValidator]},{field:"filterType",validators:[ht.Validators.includeExludeFilterTypeValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);dt.IncludeExcludeFilterValidator=it;var pt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"hierarchyData",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.hierarchyFilterValuesValidator]},{field:"filterType",validators:[ht.Validators.hierarchyFilterTypeValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);dt.HierarchyFilterValidator=pt;var yt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"value",validators:[ht.Validators.anyValueValidator]},{field:"keyValues",validators:[ht.Validators.anyArrayValidator]},{field:"children",validators:[ht.Validators.hierarchyFilterValuesValidator]},{field:"operator",validators:[ht.Validators.stringValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.HierarchyFilterNodeValidator=yt;var ct=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"value",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.anyValueValidator]},{field:"keyValues",validators:[ht.Validators.anyArrayValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.IncludeExcludePointValueValidator=ct;var _=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);return Bt||ht.Validators.anyFilterValidator.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.FilterValidator=_;var rt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"filtersOperation",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersOperationsUpdateValidator]},{field:"filters",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersArrayValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.UpdateFiltersRequestValidator=rt;var Ct=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"filtersOperation",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersOperationsRemoveAllValidator]},{field:"filters",validators:[ht.Validators.fieldForbiddenValidator,ht.Validators.filtersArrayValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.RemoveFiltersRequestValidator=Ct;var It=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"value",validators:[ht.Validators.anyValueValidator]},{field:"operator",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.ConditionItemValidator=It;var Nt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"operation",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersOperationsUpdateValidator]},{field:"filters",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersArrayValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.OnLoadFiltersBaseValidator=Nt;var Ut=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"operation",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersOperationsRemoveAllValidator]},{field:"filters",validators:[ht.Validators.fieldForbiddenValidator,ht.Validators.filtersArrayValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.OnLoadFiltersBaseRemoveOperationValidator=Ut;var Gt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"allPages",validators:[ht.Validators.onLoadFiltersBaseValidator]},{field:"currentPage",validators:[ht.Validators.onLoadFiltersBaseValidator]}],sr=new tt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);dt.OnLoadFiltersValidator=Gt},function(gt,dt,mt){var vt=this&&this.__extends||function(){var _t=function(Rt,Mt){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},_t(Rt,Mt)};return function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");_t(Rt,Mt);function Et(){this.constructor=Rt}Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.PageLayoutValidator=dt.DisplayStateValidator=dt.VisualLayoutValidator=dt.CustomLayoutValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"pageSize",validators:[ht.Validators.pageSizeValidator]},{field:"displayOption",validators:[ht.Validators.customLayoutDisplayOptionValidator]},{field:"pagesLayout",validators:[ht.Validators.pagesLayoutValidator]}],b=new tt.MultipleFieldsValidator(s);return b.validate(Mt,Et,kt)},Rt}(bt.ObjectValidator);dt.CustomLayoutValidator=St;var At=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"x",validators:[ht.Validators.numberValidator]},{field:"y",validators:[ht.Validators.numberValidator]},{field:"z",validators:[ht.Validators.numberValidator]},{field:"width",validators:[ht.Validators.numberValidator]},{field:"height",validators:[ht.Validators.numberValidator]},{field:"displayState",validators:[ht.Validators.displayStateValidator]}],b=new tt.MultipleFieldsValidator(s);return b.validate(Mt,Et,kt)},Rt}(bt.ObjectValidator);dt.VisualLayoutValidator=At;var Tt=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"mode",validators:[ht.Validators.displayStateModeValidator]}],b=new tt.MultipleFieldsValidator(s);return b.validate(Mt,Et,kt)},Rt}(bt.ObjectValidator);dt.DisplayStateValidator=Tt;var ft=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"visualsLayout",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.pageLayoutValidator]},{field:"defaultLayout",validators:[ht.Validators.visualLayoutValidator]}],b=new tt.MultipleFieldsValidator(s);return b.validate(Mt,Et,kt)},Rt}(bt.ObjectValidator);dt.PageLayoutValidator=ft},function(gt,dt,mt){var vt=this&&this.__extends||function(){var _t=function(Rt,Mt){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},_t(Rt,Mt)};return function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");_t(Rt,Mt);function Et(){this.constructor=Rt}Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.PageViewFieldValidator=dt.PageValidator=dt.CustomPageSizeValidator=dt.PageSizeValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"type",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.pageSizeTypeValidator]}],b=new tt.MultipleFieldsValidator(s);return b.validate(Mt,Et,kt)},Rt}(bt.ObjectValidator);dt.PageSizeValidator=St;var At=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"width",validators:[ht.Validators.numberValidator]},{field:"height",validators:[ht.Validators.numberValidator]}],b=new tt.MultipleFieldsValidator(s);return b.validate(Mt,Et,kt)},Rt}(St);dt.CustomPageSizeValidator=At;var Tt=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],b=new tt.MultipleFieldsValidator(s);return b.validate(Mt,Et,kt)},Rt}(bt.ObjectValidator);dt.PageValidator=Tt;var ft=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=["actualSize","fitToWidth","oneColumn"];return s.indexOf(Mt)<0?[{message:'pageView must be a string with one of the following values: "actualSize", "fitToWidth", "oneColumn"'}]:null},Rt}(bt.StringValidator);dt.PageViewFieldValidator=ft},function(gt,dt,mt){var vt=this&&this.__extends||function(){var at=function(s,b){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&($[it]=_e[it])},at(s,b)};return function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");at(s,b);function $(){this.constructor=s}s.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.VisualizationsPaneValidator=dt.SyncSlicersPaneValidator=dt.SelectionPaneValidator=dt.PageNavigationPaneValidator=dt.FiltersPaneValidator=dt.FieldsPaneValidator=dt.BookmarksPaneValidator=dt.QnaPanesValidator=dt.ReportPanesValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"bookmarks",validators:[ht.Validators.bookmarksPaneValidator]},{field:"fields",validators:[ht.Validators.fieldsPaneValidator]},{field:"filters",validators:[ht.Validators.filtersPaneValidator]},{field:"pageNavigation",validators:[ht.Validators.pageNavigationPaneValidator]},{field:"selection",validators:[ht.Validators.selectionPaneValidator]},{field:"syncSlicers",validators:[ht.Validators.syncSlicersPaneValidator]},{field:"visualizations",validators:[ht.Validators.visualizationsPaneValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.ReportPanesValidator=St;var At=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"filters",validators:[ht.Validators.filtersPaneValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.QnaPanesValidator=At;var Tt=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visible",validators:[ht.Validators.booleanValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.BookmarksPaneValidator=Tt;var ft=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"expanded",validators:[ht.Validators.booleanValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.FieldsPaneValidator=ft;var _t=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visible",validators:[ht.Validators.booleanValidator]},{field:"expanded",validators:[ht.Validators.booleanValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.FiltersPaneValidator=_t;var Rt=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visible",validators:[ht.Validators.booleanValidator]},{field:"position",validators:[ht.Validators.pageNavigationPositionValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.PageNavigationPaneValidator=Rt;var Mt=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visible",validators:[ht.Validators.booleanValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.SelectionPaneValidator=Mt;var Et=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visible",validators:[ht.Validators.booleanValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.SyncSlicersPaneValidator=Et;var kt=function(at){vt(s,at);function s(){return at!==null&&at.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=at.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"expanded",validators:[ht.Validators.booleanValidator]}],yt=new tt.MultipleFieldsValidator(pt);return yt.validate(b,$,_e)},s}(bt.ObjectValidator);dt.VisualizationsPaneValidator=kt},function(gt,dt,mt){var vt=this&&this.__extends||function(){var ft=function(_t,Rt){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,Et){Mt.__proto__=Et}||function(Mt,Et){for(var kt in Et)Object.prototype.hasOwnProperty.call(Et,kt)&&(Mt[kt]=Et[kt])},ft(_t,Rt)};return function(_t,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");ft(_t,Rt);function Mt(){this.constructor=_t}_t.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.QnaInterpretInputDataValidator=dt.QnaSettingsValidator=dt.LoadQnaValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"datasetIds",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringArrayValidator]},{field:"question",validators:[ht.Validators.stringValidator]},{field:"viewMode",validators:[ht.Validators.viewModeValidator]},{field:"settings",validators:[ht.Validators.qnaSettingValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.LoadQnaValidator=St;var At=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"filterPaneEnabled",validators:[ht.Validators.booleanValidator]},{field:"hideErrors",validators:[ht.Validators.booleanValidator]},{field:"panes",validators:[ht.Validators.qnaPanesValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.QnaSettingsValidator=At;var Tt=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"datasetIds",validators:[ht.Validators.stringArrayValidator]},{field:"question",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.QnaInterpretInputDataValidator=Tt},function(gt,dt,mt){var vt=this&&this.__extends||function(){var At=function(Tt,ft){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Rt){_t.__proto__=Rt}||function(_t,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(_t[Mt]=Rt[Mt])},At(Tt,ft)};return function(Tt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");At(Tt,ft);function _t(){this.constructor=Tt}Tt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.ReportCreateValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(At){vt(Tt,At);function Tt(){return At!==null&&At.apply(this,arguments)||this}return Tt.prototype.validate=function(ft,_t,Rt){if(ft==null)return null;var Mt=At.prototype.validate.call(this,ft,_t,Rt);if(Mt)return Mt;var Et=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"datasetId",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"theme",validators:[ht.Validators.customThemeValidator]}],kt=new tt.MultipleFieldsValidator(Et);return kt.validate(ft,_t,Rt)},Tt}(bt.ObjectValidator);dt.ReportCreateValidator=St},function(gt,dt,mt){var vt=this&&this.__extends||function(){var At=function(Tt,ft){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Rt){_t.__proto__=Rt}||function(_t,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(_t[Mt]=Rt[Mt])},At(Tt,ft)};return function(Tt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");At(Tt,ft);function _t(){this.constructor=Tt}Tt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.ReportLoadValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(At){vt(Tt,At);function Tt(){return At!==null&&At.apply(this,arguments)||this}return Tt.prototype.validate=function(ft,_t,Rt){if(ft==null)return null;var Mt=At.prototype.validate.call(this,ft,_t,Rt);if(Mt)return Mt;var Et=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"id",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"settings",validators:[ht.Validators.settingsValidator]},{field:"pageName",validators:[ht.Validators.stringValidator]},{field:"filters",validators:[ht.Validators.reportLoadFiltersValidator]},{field:"permissions",validators:[ht.Validators.permissionsValidator]},{field:"viewMode",validators:[ht.Validators.viewModeValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"bookmark",validators:[ht.Validators.applyBookmarkValidator]},{field:"theme",validators:[ht.Validators.customThemeValidator]},{field:"embedUrl",validators:[ht.Validators.stringValidator]},{field:"datasetBinding",validators:[ht.Validators.datasetBindingValidator]},{field:"contrastMode",validators:[ht.Validators.contrastModeValidator]}],kt=new tt.MultipleFieldsValidator(Et);return kt.validate(ft,_t,Rt)},Tt}(bt.ObjectValidator);dt.ReportLoadValidator=St},function(gt,dt,mt){var vt=this&&this.__extends||function(){var Tt=function(ft,_t){return Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Mt){Rt.__proto__=Mt}||function(Rt,Mt){for(var Et in Mt)Object.prototype.hasOwnProperty.call(Mt,Et)&&(Rt[Et]=Mt[Et])},Tt(ft,_t)};return function(ft,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Class extends value "+String(_t)+" is not a constructor or null");Tt(ft,_t);function Rt(){this.constructor=ft}ft.prototype=_t===null?Object.create(_t):(Rt.prototype=_t.prototype,new Rt)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.ReportParameterFieldsValidator=dt.PaginatedReportLoadValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(Tt){vt(ft,Tt);function ft(){return Tt!==null&&Tt.apply(this,arguments)||this}return ft.prototype.validate=function(_t,Rt,Mt){if(_t==null)return null;var Et=Tt.prototype.validate.call(this,_t,Rt,Mt);if(Et)return Et;var kt=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"id",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"settings",validators:[ht.Validators.paginatedReportsettingsValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"embedUrl",validators:[ht.Validators.stringValidator]},{field:"type",validators:[ht.Validators.stringValidator]},{field:"parameterValues",validators:[ht.Validators.parameterValuesArrayValidator]},{field:"datasetBindings",validators:[ht.Validators.paginatedReportDatasetBindingArrayValidator]}],at=new tt.MultipleFieldsValidator(kt);return at.validate(_t,Rt,Mt)},ft}(bt.ObjectValidator);dt.PaginatedReportLoadValidator=St;var At=function(){function Tt(){}return Tt.prototype.validate=function(ft,_t,Rt){if(ft==null)return null;var Mt=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"value",validators:[ht.Validators.stringValidator]}],Et=new tt.MultipleFieldsValidator(Mt);return Et.validate(ft,_t,Rt)},Tt}();dt.ReportParameterFieldsValidator=At},function(gt,dt,mt){var vt=this&&this.__extends||function(){var At=function(Tt,ft){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Rt){_t.__proto__=Rt}||function(_t,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(_t[Mt]=Rt[Mt])},At(Tt,ft)};return function(Tt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");At(Tt,ft);function _t(){this.constructor=Tt}Tt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.SaveAsParametersValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(At){vt(Tt,At);function Tt(){return At!==null&&At.apply(this,arguments)||this}return Tt.prototype.validate=function(ft,_t,Rt){if(ft==null)return null;var Mt=At.prototype.validate.call(this,ft,_t,Rt);if(Mt)return Mt;var Et=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],kt=new tt.MultipleFieldsValidator(Et);return kt.validate(ft,_t,Rt)},Tt}(bt.ObjectValidator);dt.SaveAsParametersValidator=St},function(gt,dt,mt){var vt=this&&this.__extends||function(){var _t=function(Rt,Mt){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},_t(Rt,Mt)};return function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");_t(Rt,Mt);function Et(){this.constructor=Rt}Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.SlicerTargetSelectorValidator=dt.VisualTypeSelectorValidator=dt.VisualSelectorValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(4),St=mt(1),At=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"$schema",validators:[St.Validators.stringValidator,new ht.SchemaValidator("http://powerbi.com/product/schema#visualSelector")]},{field:"visualName",validators:[St.Validators.fieldRequiredValidator,St.Validators.stringValidator]}],b=new tt.MultipleFieldsValidator(s);return b.validate(Mt,Et,kt)},Rt}(bt.ObjectValidator);dt.VisualSelectorValidator=At;var Tt=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"$schema",validators:[St.Validators.fieldRequiredValidator,St.Validators.stringValidator,new ht.SchemaValidator("http://powerbi.com/product/schema#visualTypeSelector")]},{field:"visualType",validators:[St.Validators.fieldRequiredValidator,St.Validators.stringValidator]}],b=new tt.MultipleFieldsValidator(s);return b.validate(Mt,Et,kt)},Rt}(bt.ObjectValidator);dt.VisualTypeSelectorValidator=Tt;var ft=function(_t){vt(Rt,_t);function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"$schema",validators:[St.Validators.fieldRequiredValidator,St.Validators.stringValidator,new ht.SchemaValidator("http://powerbi.com/product/schema#slicerTargetSelector")]},{field:"target",validators:[St.Validators.fieldRequiredValidator,St.Validators.slicerTargetValidator]}],b=new tt.MultipleFieldsValidator(s);return b.validate(Mt,Et,kt)},Rt}(bt.ObjectValidator);dt.SlicerTargetSelectorValidator=ft},function(gt,dt,mt){var vt=this&&this.__extends||function(){var Tt=function(ft,_t){return Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Mt){Rt.__proto__=Mt}||function(Rt,Mt){for(var Et in Mt)Object.prototype.hasOwnProperty.call(Mt,Et)&&(Rt[Et]=Mt[Et])},Tt(ft,_t)};return function(ft,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Class extends value "+String(_t)+" is not a constructor or null");Tt(ft,_t);function Rt(){this.constructor=ft}ft.prototype=_t===null?Object.create(_t):(Rt.prototype=_t.prototype,new Rt)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.PaginatedReportSettingsValidator=dt.SettingsValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(Tt){vt(ft,Tt);function ft(){return Tt!==null&&Tt.apply(this,arguments)||this}return ft.prototype.validate=function(_t,Rt,Mt){if(_t==null)return null;var Et=Tt.prototype.validate.call(this,_t,Rt,Mt);if(Et)return Et;var kt=[{field:"filterPaneEnabled",validators:[ht.Validators.booleanValidator]},{field:"navContentPaneEnabled",validators:[ht.Validators.booleanValidator]},{field:"bookmarksPaneEnabled",validators:[ht.Validators.booleanValidator]},{field:"useCustomSaveAsDialog",validators:[ht.Validators.booleanValidator]},{field:"extensions",validators:[ht.Validators.extensionsValidator]},{field:"layoutType",validators:[ht.Validators.layoutTypeValidator]},{field:"customLayout",validators:[ht.Validators.customLayoutValidator]},{field:"background",validators:[ht.Validators.backgroundValidator]},{field:"visualSettings",validators:[ht.Validators.visualSettingsValidator]},{field:"hideErrors",validators:[ht.Validators.booleanValidator]},{field:"commands",validators:[ht.Validators.commandsSettingsArrayValidator]},{field:"hyperlinkClickBehavior",validators:[ht.Validators.hyperlinkClickBehaviorValidator]},{field:"bars",validators:[ht.Validators.reportBarsValidator]},{field:"panes",validators:[ht.Validators.reportPanesValidator]},{field:"personalBookmarksEnabled",validators:[ht.Validators.booleanValidator]},{field:"persistentFiltersEnabled",validators:[ht.Validators.booleanValidator]},{field:"visualRenderedEvents",validators:[ht.Validators.booleanValidator]},{field:"authoringHintsEnabled",validators:[ht.Validators.booleanValidator]},{field:"printSettings",validators:[ht.Validators.printSettingsValidator]}],at=new tt.MultipleFieldsValidator(kt);return at.validate(_t,Rt,Mt)},ft}(bt.ObjectValidator);dt.SettingsValidator=St;var At=function(Tt){vt(ft,Tt);function ft(){return Tt!==null&&Tt.apply(this,arguments)||this}return ft.prototype.validate=function(_t,Rt,Mt){if(_t==null)return null;var Et=Tt.prototype.validate.call(this,_t,Rt,Mt);if(Et)return Et;var kt=[{field:"commands",validators:[ht.Validators.paginatedReportCommandsValidator]}],at=new tt.MultipleFieldsValidator(kt);return at.validate(_t,Rt,Mt)},ft}(bt.ObjectValidator);dt.PaginatedReportSettingsValidator=At},function(gt,dt,mt){var vt=this&&this.__extends||function(){var Tt=function(ft,_t){return Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Mt){Rt.__proto__=Mt}||function(Rt,Mt){for(var Et in Mt)Object.prototype.hasOwnProperty.call(Mt,Et)&&(Rt[Et]=Mt[Et])},Tt(ft,_t)};return function(ft,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Class extends value "+String(_t)+" is not a constructor or null");Tt(ft,_t);function Rt(){this.constructor=ft}ft.prototype=_t===null?Object.create(_t):(Rt.prototype=_t.prototype,new Rt)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.SlicerStateValidator=dt.SlicerValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(Tt){vt(ft,Tt);function ft(){return Tt!==null&&Tt.apply(this,arguments)||this}return ft.prototype.validate=function(_t,Rt,Mt){if(_t==null)return null;var Et=Tt.prototype.validate.call(this,_t,Rt,Mt);if(Et)return Et;var kt=[{field:"selector",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.slicerSelectorValidator]},{field:"state",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.slicerStateValidator]}],at=new tt.MultipleFieldsValidator(kt);return at.validate(_t,Rt,Mt)},ft}(bt.ObjectValidator);dt.SlicerValidator=St;var At=function(Tt){vt(ft,Tt);function ft(){return Tt!==null&&Tt.apply(this,arguments)||this}return ft.prototype.validate=function(_t,Rt,Mt){if(_t==null)return null;var Et=Tt.prototype.validate.call(this,_t,Rt,Mt);if(Et)return Et;var kt=[{field:"filters",validators:[ht.Validators.filtersArrayValidator]}],at=new tt.MultipleFieldsValidator(kt);return at.validate(_t,Rt,Mt)},ft}(bt.ObjectValidator);dt.SlicerStateValidator=At},function(gt,dt,mt){var vt=this&&this.__extends||function(){var At=function(Tt,ft){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Rt){_t.__proto__=Rt}||function(_t,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(_t[Mt]=Rt[Mt])},At(Tt,ft)};return function(Tt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");At(Tt,ft);function _t(){this.constructor=Tt}Tt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.TileLoadValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(At){vt(Tt,At);function Tt(){return At!==null&&At.apply(this,arguments)||this}return Tt.prototype.validate=function(ft,_t,Rt){if(ft==null)return null;var Mt=At.prototype.validate.call(this,ft,_t,Rt);if(Mt)return Mt;var Et=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"id",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"dashboardId",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"pageView",validators:[ht.Validators.stringValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"width",validators:[ht.Validators.numberValidator]},{field:"height",validators:[ht.Validators.numberValidator]}],kt=new tt.MultipleFieldsValidator(Et);return kt.validate(ft,_t,Rt)},Tt}(bt.ObjectValidator);dt.TileLoadValidator=St},function(gt,dt,mt){var vt=this&&this.__extends||function(){var ft=function(_t,Rt){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,Et){Mt.__proto__=Et}||function(Mt,Et){for(var kt in Et)Object.prototype.hasOwnProperty.call(Et,kt)&&(Mt[kt]=Et[kt])},ft(_t,Rt)};return function(_t,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");ft(_t,Rt);function Mt(){this.constructor=_t}_t.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.VisualHeaderValidator=dt.VisualHeaderSettingsValidator=dt.VisualSettingsValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"visualHeaders",validators:[ht.Validators.visualHeadersValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.VisualSettingsValidator=St;var At=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"visible",validators:[ht.Validators.booleanValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.VisualHeaderSettingsValidator=At;var Tt=function(ft){vt(_t,ft);function _t(){return ft!==null&&ft.apply(this,arguments)||this}return _t.prototype.validate=function(Rt,Mt,Et){if(Rt==null)return null;var kt=ft.prototype.validate.call(this,Rt,Mt,Et);if(kt)return kt;var at=[{field:"settings",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.visualHeaderSettingsValidator]},{field:"selector",validators:[ht.Validators.visualHeaderSelectorValidator]}],s=new tt.MultipleFieldsValidator(at);return s.validate(Rt,Mt,Et)},_t}(bt.ObjectValidator);dt.VisualHeaderValidator=Tt},(gt,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.AnyOfValidator=void 0;var mt=function(){function vt(tt){this.validators=tt}return vt.prototype.validate=function(tt,bt,ht){if(tt==null)return null;for(var St=!1,At=0,Tt=this.validators;At<Tt.length;At++){var ft=Tt[At],_t=ft.validate(tt,bt,ht);if(!_t){St=!0;break}}return St?null:[{message:ht+" property is invalid",path:(bt?bt+".":"")+ht,keyword:"invalid"}]},vt}();dt.AnyOfValidator=mt},(gt,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.FieldForbiddenValidator=void 0;var mt=function(){function vt(){}return vt.prototype.validate=function(tt,bt,ht){return tt!==void 0?[{message:ht+" is forbidden",path:(bt?bt+".":"")+ht,keyword:"forbidden"}]:null},vt}();dt.FieldForbiddenValidator=mt},(gt,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.FieldRequiredValidator=void 0;var mt=function(){function vt(){}return vt.prototype.validate=function(tt,bt,ht){return tt==null?[{message:ht+" is required",path:(bt?bt+".":"")+ht,keyword:"required"}]:null},vt}();dt.FieldRequiredValidator=mt},function(gt,dt,mt){var vt=this&&this.__extends||function(){var ht=function(St,At){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,ft){Tt.__proto__=ft}||function(Tt,ft){for(var _t in ft)Object.prototype.hasOwnProperty.call(ft,_t)&&(Tt[_t]=ft[_t])},ht(St,At)};return function(St,At){if(typeof At!="function"&&At!==null)throw new TypeError("Class extends value "+String(At)+" is not a constructor or null");ht(St,At);function Tt(){this.constructor=St}St.prototype=At===null?Object.create(At):(Tt.prototype=At.prototype,new Tt)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.MapValidator=void 0;var tt=mt(4),bt=function(ht){vt(St,ht);function St(At,Tt){var ft=ht.call(this)||this;return ft.keyValidators=At,ft.valueValidators=Tt,ft}return St.prototype.validate=function(At,Tt,ft){if(At==null)return null;var _t=ht.prototype.validate.call(this,At,Tt,ft);if(_t)return _t;for(var Rt in At)if(At.hasOwnProperty(Rt)){for(var Mt=(Tt?Tt+".":"")+ft+"."+Rt,Et=0,kt=this.keyValidators;Et<kt.length;Et++){var at=kt[Et];if(_t=at.validate(Rt,Mt,ft),_t)return _t}for(var s=0,b=this.valueValidators;s<b.length;s++){var $=b[s];if(_t=$.validate(At[Rt],Mt,ft),_t)return _t}}return null},St}(tt.ObjectValidator);dt.MapValidator=bt},function(gt,dt,mt){var vt=this&&this.__extends||function(){var At=function(Tt,ft){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Rt){_t.__proto__=Rt}||function(_t,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(_t[Mt]=Rt[Mt])},At(Tt,ft)};return function(Tt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");At(Tt,ft);function _t(){this.constructor=Tt}Tt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.ParametersPanelValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(At){vt(Tt,At);function Tt(){return At!==null&&At.apply(this,arguments)||this}return Tt.prototype.validate=function(ft,_t,Rt){if(ft==null)return null;var Mt=At.prototype.validate.call(this,ft,_t,Rt);if(Mt)return Mt;var Et=[{field:"expanded",validators:[ht.Validators.booleanValidator]},{field:"enabled",validators:[ht.Validators.booleanValidator]}],kt=new tt.MultipleFieldsValidator(Et);return kt.validate(ft,_t,Rt)},Tt}(bt.ObjectValidator);dt.ParametersPanelValidator=St},function(gt,dt,mt){var vt=this&&this.__extends||function(){var Mt=function(Et,kt){return Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,s){at.__proto__=s}||function(at,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(at[b]=s[b])},Mt(Et,kt)};return function(Et,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");Mt(Et,kt);function at(){this.constructor=Et}Et.prototype=kt===null?Object.create(kt):(at.prototype=kt.prototype,new at)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.TableDataValidator=dt.TableSchemaValidator=dt.ColumnSchemaValidator=dt.CredentialsValidator=dt.DatasourceConnectionConfigValidator=dt.DatasetCreateConfigValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"locale",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"mashupDocument",validators:[ht.Validators.stringValidator]},{field:"datasourceConnectionConfig",validators:[ht.Validators.datasourceConnectionConfigValidator]},{field:"tableSchemaList",validators:[ht.Validators.tableSchemaListValidator]},{field:"data",validators:[ht.Validators.tableDataArrayValidator]}],_e=new tt.MultipleFieldsValidator($);if(b=_e.validate(kt,at,s),b)return b;if(kt.datasourceConnectionConfig&&kt.mashupDocument==null)return[{message:"mashupDocument cannot be empty when datasourceConnectionConfig is presented"}];if(kt.data&&kt.tableSchemaList==null)return[{message:"tableSchemaList cannot be empty when data is provided"}];if(kt.data==null&&kt.mashupDocument==null)return[{message:"At least one of data or mashupDocument must be provided"}]},Et}(bt.ObjectValidator);dt.DatasetCreateConfigValidator=St;var At=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"dataCacheMode",validators:[ht.Validators.dataCacheModeValidator]},{field:"credentials",validators:[ht.Validators.credentialsValidator]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.DatasourceConnectionConfigValidator=At;var Tt=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"credentialType",validators:[ht.Validators.credentialTypeValidator]},{field:"credentialDetails",validators:[ht.Validators.credentialDetailsValidator]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.CredentialsValidator=Tt;var ft=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"displayName",validators:[ht.Validators.stringValidator]},{field:"dataType",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.ColumnSchemaValidator=ft;var _t=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"columns",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.columnSchemaArrayValidator]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.TableSchemaValidator=_t;var Rt=function(Mt){vt(Et,Mt);function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"rows",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.rawDataValidator]}],_e=new tt.MultipleFieldsValidator($);return _e.validate(kt,at,s)},Et}(bt.ObjectValidator);dt.TableDataValidator=Rt},function(gt,dt,mt){var vt=this&&this.__extends||function(){var At=function(Tt,ft){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Rt){_t.__proto__=Rt}||function(_t,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(_t[Mt]=Rt[Mt])},At(Tt,ft)};return function(Tt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");At(Tt,ft);function _t(){this.constructor=Tt}Tt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.QuickCreateValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(At){vt(Tt,At);function Tt(){return At!==null&&At.apply(this,arguments)||this}return Tt.prototype.validate=function(ft,_t,Rt){if(ft==null)return null;var Mt=At.prototype.validate.call(this,ft,_t,Rt);if(Mt)return Mt;var Et=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"theme",validators:[ht.Validators.customThemeValidator]},{field:"datasetCreateConfig",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.datasetCreateConfigValidator]}],kt=new tt.MultipleFieldsValidator(Et);return kt.validate(ft,_t,Rt)},Tt}(bt.ObjectValidator);dt.QuickCreateValidator=St},function(gt,dt,mt){var vt=this&&this.__extends||function(){var St=function(At,Tt){return St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,_t){ft.__proto__=_t}||function(ft,_t){for(var Rt in _t)Object.prototype.hasOwnProperty.call(_t,Rt)&&(ft[Rt]=_t[Rt])},St(At,Tt)};return function(At,Tt){if(typeof Tt!="function"&&Tt!==null)throw new TypeError("Class extends value "+String(Tt)+" is not a constructor or null");St(At,Tt);function ft(){this.constructor=At}At.prototype=Tt===null?Object.create(Tt):(ft.prototype=Tt.prototype,new ft)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.PrintSettingsValidator=void 0;var tt=mt(3),bt=mt(4),ht=function(St){vt(At,St);function At(){return St!==null&&St.apply(this,arguments)||this}return At.prototype.validate=function(Tt,ft,_t){if(Tt==null)return null;var Rt=St.prototype.validate.call(this,Tt,ft,_t);if(Rt)return Rt;var Mt=[{field:"browserPrintAdjustmentsMode",validators:[new bt.EnumValidator([0,1])]}],Et=new tt.MultipleFieldsValidator(Mt);return Et.validate(Tt,ft,_t)},At}(bt.ObjectValidator);dt.PrintSettingsValidator=ht},function(gt,dt,mt){var vt=this&&this.__extends||function(){var At=function(Tt,ft){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Rt){_t.__proto__=Rt}||function(_t,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(_t[Mt]=Rt[Mt])},At(Tt,ft)};return function(Tt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");At(Tt,ft);function _t(){this.constructor=Tt}Tt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)}}();Object.defineProperty(dt,"__esModule",{value:!0}),dt.PaginatedReportDatasetBindingValidator=void 0;var tt=mt(3),bt=mt(4),ht=mt(1),St=function(At){vt(Tt,At);function Tt(){return At!==null&&At.apply(this,arguments)||this}return Tt.prototype.validate=function(ft,_t,Rt){if(ft==null)return null;var Mt=At.prototype.validate.call(this,ft,_t,Rt);if(Mt)return Mt;var Et=[{field:"sourceDatasetId",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"targetDatasetId",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],kt=new tt.MultipleFieldsValidator(Et);return kt.validate(ft,_t,Rt)},Tt}(bt.ObjectValidator);dt.PaginatedReportDatasetBindingValidator=St}],st={};function lt(gt){var dt=st[gt];if(dt!==void 0)return dt.exports;var mt=st[gt]={exports:{}};return ot[gt].call(mt.exports,mt,mt.exports,lt),mt.exports}var nt=lt(0);return nt})())},"./node_modules/powerbi-router/dist/router.js":function(et){/*! powerbi-router v0.1.5 | (c) 2016 Microsoft Corporation MIT */(function(st,lt){et.exports=lt()})(this,function(){return function(ot){var st={};function lt(nt){if(st[nt])return st[nt].exports;var gt=st[nt]={exports:{},id:nt,loaded:!1};return ot[nt].call(gt.exports,gt,gt.exports,lt),gt.loaded=!0,gt.exports}return lt.m=ot,lt.c=st,lt.p="",lt(0)}([function(ot,st,lt){var nt=lt(1),gt=function(){function mt(vt){this.handlers=vt,this.getRouteRecognizer=new nt,this.patchRouteRecognizer=new nt,this.postRouteRecognizer=new nt,this.putRouteRecognizer=new nt,this.deleteRouteRecognizer=new nt}return mt.prototype.get=function(vt,tt){return this.registerHandler(this.getRouteRecognizer,"GET",vt,tt),this},mt.prototype.patch=function(vt,tt){return this.registerHandler(this.patchRouteRecognizer,"PATCH",vt,tt),this},mt.prototype.post=function(vt,tt){return this.registerHandler(this.postRouteRecognizer,"POST",vt,tt),this},mt.prototype.put=function(vt,tt){return this.registerHandler(this.putRouteRecognizer,"PUT",vt,tt),this},mt.prototype.delete=function(vt,tt){return this.registerHandler(this.deleteRouteRecognizer,"DELETE",vt,tt),this},mt.prototype.registerHandler=function(vt,tt,bt,ht){var St=function(Tt){var ft=new dt;return Promise.resolve(ht(Tt,ft)).then(function(_t){return ft})};vt.add([{path:bt,handler:St}]);var At={test:function(Tt){if(Tt.method!==tt)return!1;var ft=vt.recognize(Tt.url);if(ft===void 0)return!1;var _t=ft[0];return Tt.params=_t.params,Tt.queryParams=ft.queryParams,Tt.handler=_t.handler,!0},handle:function(Tt){return Tt.handler(Tt)}};this.handlers.addHandler(At)},mt}();st.Router=gt;var dt=function(){function mt(){this.statusCode=200,this.headers={},this.body=null}return mt.prototype.send=function(vt,tt){this.statusCode=vt,this.body=tt},mt}();st.Response=dt},function(ot,st,lt){var nt;(function(gt){(function(){function dt(ct,_,rt){this.path=ct,this.matcher=_,this.delegate=rt}dt.prototype={to:function(ct,_){var rt=this.delegate;if(rt&&rt.willAddRoute&&(ct=rt.willAddRoute(this.matcher.target,ct)),this.matcher.add(this.path,ct),_){if(_.length===0)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,ct,_,this.delegate)}return this}};function mt(ct){this.routes={},this.children={},this.target=ct}mt.prototype={add:function(ct,_){this.routes[ct]=_},addChild:function(ct,_,rt,Ct){var It=new mt(_);this.children[ct]=It;var Nt=vt(ct,It,Ct);Ct&&Ct.contextEntered&&Ct.contextEntered(_,Nt),rt(Nt)}};function vt(ct,_,rt){return function(Ct,It){var Nt=ct+Ct;if(It)It(vt(Nt,_,rt));else return new dt(ct+Ct,_,rt)}}function tt(ct,_,rt){for(var Ct=0,It=0;It<ct.length;It++)Ct+=ct[It].path.length;_=_.substr(Ct);var Nt={path:_,handler:rt};ct.push(Nt)}function bt(ct,_,rt,Ct){var It=_.routes;for(var Nt in It)if(It.hasOwnProperty(Nt)){var Ut=ct.slice();tt(Ut,Nt,It[Nt]),_.children[Nt]?bt(Ut,_.children[Nt],rt,Ct):rt.call(Ct,Ut)}}var ht=function(ct,_){var rt=new mt;ct(vt("",rt,this.delegate)),bt([],rt,function(Ct){_?_(this,Ct):this.add(Ct)},this)},St=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],At=new RegExp("(\\"+St.join("|\\")+")","g");function Tt(ct){return Object.prototype.toString.call(ct)==="[object Array]"}function ft(ct){this.string=ct}ft.prototype={eachChar:function(ct){for(var _=this.string,rt,Ct=0;Ct<_.length;Ct++)rt=_.charAt(Ct),ct=ct.put({invalidChars:void 0,repeat:!1,validChars:rt});return ct},regex:function(){return this.string.replace(At,"\\$1")},generate:function(){return this.string}};function _t(ct){this.name=ct}_t.prototype={eachChar:function(ct){return ct.put({invalidChars:"/",repeat:!0,validChars:void 0})},regex:function(){return"([^/]+)"},generate:function(ct){return ct[this.name]}};function Rt(ct){this.name=ct}Rt.prototype={eachChar:function(ct){return ct.put({invalidChars:"",repeat:!0,validChars:void 0})},regex:function(){return"(.+)"},generate:function(ct){return ct[this.name]}};function Mt(){}Mt.prototype={eachChar:function(ct){return ct},regex:function(){return""},generate:function(){return""}};function Et(ct,_,rt){ct.charAt(0)==="/"&&(ct=ct.substr(1));var Ct=ct.split("/"),It=new Array(Ct.length);rt.val="";for(var Nt=0;Nt<Ct.length;Nt++){var Ut=Ct[Nt],Gt;(Gt=Ut.match(/^:([^\/]+)$/))?(It[Nt]=new _t(Gt[1]),_.push(Gt[1]),rt.val+="3"):(Gt=Ut.match(/^\*([^\/]+)$/))?(It[Nt]=new Rt(Gt[1]),rt.val+="1",_.push(Gt[1])):Ut===""?(It[Nt]=new Mt,rt.val+="2"):(It[Nt]=new ft(Ut),rt.val+="4")}return rt.val=+rt.val,It}function kt(ct){this.charSpec=ct,this.nextStates=[],this.charSpecs={},this.regex=void 0,this.handlers=void 0,this.specificity=void 0}kt.prototype={get:function(ct){if(this.charSpecs[ct.validChars])return this.charSpecs[ct.validChars];for(var _=this.nextStates,rt=0;rt<_.length;rt++){var Ct=_[rt],It=Ct.charSpec.validChars===ct.validChars;if(It=It&&Ct.charSpec.invalidChars===ct.invalidChars,It)return this.charSpecs[ct.validChars]=Ct,Ct}},put:function(ct){var _;return(_=this.get(ct))||(_=new kt(ct),this.nextStates.push(_),ct.repeat&&_.nextStates.push(_)),_},match:function(ct){for(var _=this.nextStates,rt,Ct,It,Nt=[],Ut=0;Ut<_.length;Ut++)rt=_[Ut],Ct=rt.charSpec,typeof(It=Ct.validChars)<"u"?It.indexOf(ct)!==-1&&Nt.push(rt):typeof(It=Ct.invalidChars)<"u"&&It.indexOf(ct)===-1&&Nt.push(rt);return Nt}};function at(ct){return ct.sort(function(_,rt){return rt.specificity.val-_.specificity.val})}function s(ct,_){for(var rt=[],Ct=0,It=ct.length;Ct<It;Ct++){var Nt=ct[Ct];rt=rt.concat(Nt.match(_))}return rt}var b=Object.create||function(ct){function _(){}return _.prototype=ct,new _};function $(ct){this.queryParams=ct||{}}$.prototype=b({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});function _e(ct,_,rt){var Ct=ct.handlers,It=ct.regex,Nt=_.match(It),Ut=1,Gt=new $(rt);Gt.length=Ct.length;for(var Pt=0;Pt<Ct.length;Pt++){for(var qt=Ct[Pt],Kt=qt.names,jt={},Ht=0;Ht<Kt.length;Ht++)jt[Kt[Ht]]=Nt[Ut++];Gt[Pt]={handler:qt.handler,params:jt,isDynamic:!!Kt.length}}return Gt}function it(ct){ct=ct.replace(/\+/gm,"%20");var _;try{_=decodeURIComponent(ct)}catch{_=""}return _}var pt=function(){this.rootState=new kt,this.names={}};pt.prototype={add:function(ct,_){for(var rt=this.rootState,Ct="^",It={},Nt=new Array(ct.length),Ut=[],Gt,Pt=!0,qt=0;qt<ct.length;qt++){var Kt=ct[qt],jt=[],Ht=Et(Kt.path,jt,It);Ut=Ut.concat(Ht);for(var Bt=0;Bt<Ht.length;Bt++){var Jt=Ht[Bt];Jt instanceof Mt||(Pt=!1,rt=rt.put({invalidChars:void 0,repeat:!1,validChars:"/"}),Ct+="/",rt=Jt.eachChar(rt),Ct+=Jt.regex())}var sr={handler:Kt.handler,names:jt};Nt[qt]=sr}Pt&&(rt=rt.put({invalidChars:void 0,repeat:!1,validChars:"/"}),Ct+="/"),rt.handlers=Nt,rt.regex=new RegExp(Ct+"$"),rt.specificity=It,(Gt=_&&_.as)&&(this.names[Gt]={segments:Ut,handlers:Nt})},handlersFor:function(ct){var _=this.names[ct];if(!_)throw new Error("There is no route named "+ct);for(var rt=new Array(_.handlers.length),Ct=0;Ct<_.handlers.length;Ct++)rt[Ct]=_.handlers[Ct];return rt},hasRoute:function(ct){return!!this.names[ct]},generate:function(ct,_){var rt=this.names[ct],Ct="";if(!rt)throw new Error("There is no route named "+ct);for(var It=rt.segments,Nt=0;Nt<It.length;Nt++){var Ut=It[Nt];Ut instanceof Mt||(Ct+="/",Ct+=Ut.generate(_))}return Ct.charAt(0)!=="/"&&(Ct="/"+Ct),_&&_.queryParams&&(Ct+=this.generateQueryString(_.queryParams,rt.handlers)),Ct},generateQueryString:function(ct,_){var rt=[],Ct=[];for(var It in ct)ct.hasOwnProperty(It)&&Ct.push(It);Ct.sort();for(var Nt=0;Nt<Ct.length;Nt++){It=Ct[Nt];var Ut=ct[It];if(Ut!=null){var Gt=encodeURIComponent(It);if(Tt(Ut))for(var Pt=0;Pt<Ut.length;Pt++){var qt=It+"[]="+encodeURIComponent(Ut[Pt]);rt.push(qt)}else Gt+="="+encodeURIComponent(Ut),rt.push(Gt)}}return rt.length===0?"":"?"+rt.join("&")},parseQueryString:function(ct){for(var _=ct.split("&"),rt={},Ct=0;Ct<_.length;Ct++){var It=_[Ct].split("="),Nt=it(It[0]),Ut=Nt.length,Gt=!1,Pt;It.length===1?Pt="true":(Ut>2&&Nt.slice(Ut-2)==="[]"&&(Gt=!0,Nt=Nt.slice(0,Ut-2),rt[Nt]||(rt[Nt]=[])),Pt=It[1]?it(It[1]):""),Gt?rt[Nt].push(Pt):rt[Nt]=Pt}return rt},recognize:function(ct){var _=[this.rootState],rt,Ct,It,Nt={},Ut=!1;if(It=ct.indexOf("?"),It!==-1){var Gt=ct.substr(It+1,ct.length);ct=ct.substr(0,It),Nt=this.parseQueryString(Gt)}for(ct=decodeURI(ct),ct.charAt(0)!=="/"&&(ct="/"+ct),rt=ct.length,rt>1&&ct.charAt(rt-1)==="/"&&(ct=ct.substr(0,rt-1),Ut=!0),Ct=0;Ct<ct.length&&(_=s(_,ct.charAt(Ct)),!!_.length);Ct++);var Pt=[];for(Ct=0;Ct<_.length;Ct++)_[Ct].handlers&&Pt.push(_[Ct]);_=at(Pt);var qt=Pt[0];if(qt&&qt.handlers)return Ut&&qt.regex.source.slice(-5)==="(.+)$"&&(ct=ct+"/"),_e(qt,ct,Nt)}},pt.prototype.map=ht,pt.VERSION="0.1.11";var yt=pt;lt(3).amd?(nt=(function(){return yt}).call(st,lt,st,gt),nt!==void 0&&(gt.exports=nt)):typeof gt<"u"&&gt.exports?gt.exports=yt:typeof this<"u"&&(this.RouteRecognizer=yt)}).call(this)}).call(st,lt(2)(ot))},function(ot,st){ot.exports=function(lt){return lt.webpackPolyfill||(lt.deprecate=function(){},lt.paths=[],lt.children=[],lt.webpackPolyfill=1),lt}},function(ot,st){ot.exports=function(){throw new Error("define cannot be used indirect")}}])})},"./src/FilterBuilders/advancedFilterBuilder.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var mt=function(vt,tt){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var St in ht)Object.prototype.hasOwnProperty.call(ht,St)&&(bt[St]=ht[St])},mt(vt,tt)};return function(vt,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");mt(vt,tt);function bt(){this.constructor=vt}vt.prototype=tt===null?Object.create(tt):(bt.prototype=tt.prototype,new bt)}}();Object.defineProperty(ot,"__esModule",{value:!0}),ot.AdvancedFilterBuilder=void 0;var nt=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/FilterBuilders/filterBuilder.ts"),dt=function(mt){lt(vt,mt);function vt(){var tt=mt!==null&&mt.apply(this,arguments)||this;return tt.conditions=[],tt}return vt.prototype.and=function(){return this.logicalOperator="And",this},vt.prototype.or=function(){return this.logicalOperator="Or",this},vt.prototype.addCondition=function(tt,bt){var ht={operator:tt,value:bt};return this.conditions.push(ht),this},vt.prototype.build=function(){var tt=new nt.AdvancedFilter(this.target,this.logicalOperator,this.conditions);return tt},vt}(gt.FilterBuilder);ot.AdvancedFilterBuilder=dt},"./src/FilterBuilders/basicFilterBuilder.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var mt=function(vt,tt){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var St in ht)Object.prototype.hasOwnProperty.call(ht,St)&&(bt[St]=ht[St])},mt(vt,tt)};return function(vt,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");mt(vt,tt);function bt(){this.constructor=vt}vt.prototype=tt===null?Object.create(tt):(bt.prototype=tt.prototype,new bt)}}();Object.defineProperty(ot,"__esModule",{value:!0}),ot.BasicFilterBuilder=void 0;var nt=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/FilterBuilders/filterBuilder.ts"),dt=function(mt){lt(vt,mt);function vt(){var tt=mt!==null&&mt.apply(this,arguments)||this;return tt.isRequireSingleSelection=!1,tt}return vt.prototype.in=function(tt){return this.operator="In",this.values=tt,this},vt.prototype.notIn=function(tt){return this.operator="NotIn",this.values=tt,this},vt.prototype.all=function(){return this.operator="All",this.values=[],this},vt.prototype.requireSingleSelection=function(tt){return tt===void 0&&(tt=!1),this.isRequireSingleSelection=tt,this},vt.prototype.build=function(){var tt=new nt.BasicFilter(this.target,this.operator,this.values);return tt.requireSingleSelection=this.isRequireSingleSelection,tt},vt}(gt.FilterBuilder);ot.BasicFilterBuilder=dt},"./src/FilterBuilders/filterBuilder.ts":(et,ot)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.FilterBuilder=void 0;var st=function(){function lt(){}return lt.prototype.withTargetObject=function(nt){return this.target=nt,this},lt.prototype.withColumnTarget=function(nt,gt){return this.target={table:nt,column:gt},this},lt.prototype.withMeasureTarget=function(nt,gt){return this.target={table:nt,measure:gt},this},lt.prototype.withHierarchyLevelTarget=function(nt,gt,dt){return this.target={table:nt,hierarchy:gt,hierarchyLevel:dt},this},lt.prototype.withColumnAggregation=function(nt,gt,dt){return this.target={table:nt,column:gt,aggregationFunction:dt},this},lt.prototype.withHierarchyLevelAggregationTarget=function(nt,gt,dt,mt){return this.target={table:nt,hierarchy:gt,hierarchyLevel:dt,aggregationFunction:mt},this},lt}();ot.FilterBuilder=st},"./src/FilterBuilders/index.ts":(et,ot,st)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.RelativeTimeFilterBuilder=ot.RelativeDateFilterBuilder=ot.TopNFilterBuilder=ot.AdvancedFilterBuilder=ot.BasicFilterBuilder=void 0;var lt=st("./src/FilterBuilders/basicFilterBuilder.ts");Object.defineProperty(ot,"BasicFilterBuilder",{enumerable:!0,get:function(){return lt.BasicFilterBuilder}});var nt=st("./src/FilterBuilders/advancedFilterBuilder.ts");Object.defineProperty(ot,"AdvancedFilterBuilder",{enumerable:!0,get:function(){return nt.AdvancedFilterBuilder}});var gt=st("./src/FilterBuilders/topNFilterBuilder.ts");Object.defineProperty(ot,"TopNFilterBuilder",{enumerable:!0,get:function(){return gt.TopNFilterBuilder}});var dt=st("./src/FilterBuilders/relativeDateFilterBuilder.ts");Object.defineProperty(ot,"RelativeDateFilterBuilder",{enumerable:!0,get:function(){return dt.RelativeDateFilterBuilder}});var mt=st("./src/FilterBuilders/relativeTimeFilterBuilder.ts");Object.defineProperty(ot,"RelativeTimeFilterBuilder",{enumerable:!0,get:function(){return mt.RelativeTimeFilterBuilder}})},"./src/FilterBuilders/relativeDateFilterBuilder.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var mt=function(vt,tt){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var St in ht)Object.prototype.hasOwnProperty.call(ht,St)&&(bt[St]=ht[St])},mt(vt,tt)};return function(vt,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");mt(vt,tt);function bt(){this.constructor=vt}vt.prototype=tt===null?Object.create(tt):(bt.prototype=tt.prototype,new bt)}}();Object.defineProperty(ot,"__esModule",{value:!0}),ot.RelativeDateFilterBuilder=void 0;var nt=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/FilterBuilders/filterBuilder.ts"),dt=function(mt){lt(vt,mt);function vt(){var tt=mt!==null&&mt.apply(this,arguments)||this;return tt.isTodayIncluded=!0,tt}return vt.prototype.inLast=function(tt,bt){return this.operator=nt.RelativeDateOperators.InLast,this.timeUnitsCount=tt,this.timeUnitType=bt,this},vt.prototype.inThis=function(tt,bt){return this.operator=nt.RelativeDateOperators.InThis,this.timeUnitsCount=tt,this.timeUnitType=bt,this},vt.prototype.inNext=function(tt,bt){return this.operator=nt.RelativeDateOperators.InNext,this.timeUnitsCount=tt,this.timeUnitType=bt,this},vt.prototype.includeToday=function(tt){return this.isTodayIncluded=tt,this},vt.prototype.build=function(){var tt=new nt.RelativeDateFilter(this.target,this.operator,this.timeUnitsCount,this.timeUnitType,this.isTodayIncluded);return tt},vt}(gt.FilterBuilder);ot.RelativeDateFilterBuilder=dt},"./src/FilterBuilders/relativeTimeFilterBuilder.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var mt=function(vt,tt){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var St in ht)Object.prototype.hasOwnProperty.call(ht,St)&&(bt[St]=ht[St])},mt(vt,tt)};return function(vt,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");mt(vt,tt);function bt(){this.constructor=vt}vt.prototype=tt===null?Object.create(tt):(bt.prototype=tt.prototype,new bt)}}();Object.defineProperty(ot,"__esModule",{value:!0}),ot.RelativeTimeFilterBuilder=void 0;var nt=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/FilterBuilders/filterBuilder.ts"),dt=function(mt){lt(vt,mt);function vt(){return mt!==null&&mt.apply(this,arguments)||this}return vt.prototype.inLast=function(tt,bt){return this.operator=nt.RelativeDateOperators.InLast,this.timeUnitsCount=tt,this.timeUnitType=bt,this},vt.prototype.inThis=function(tt,bt){return this.operator=nt.RelativeDateOperators.InThis,this.timeUnitsCount=tt,this.timeUnitType=bt,this},vt.prototype.inNext=function(tt,bt){return this.operator=nt.RelativeDateOperators.InNext,this.timeUnitsCount=tt,this.timeUnitType=bt,this},vt.prototype.build=function(){var tt=new nt.RelativeTimeFilter(this.target,this.operator,this.timeUnitsCount,this.timeUnitType);return tt},vt}(gt.FilterBuilder);ot.RelativeTimeFilterBuilder=dt},"./src/FilterBuilders/topNFilterBuilder.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var mt=function(vt,tt){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var St in ht)Object.prototype.hasOwnProperty.call(ht,St)&&(bt[St]=ht[St])},mt(vt,tt)};return function(vt,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");mt(vt,tt);function bt(){this.constructor=vt}vt.prototype=tt===null?Object.create(tt):(bt.prototype=tt.prototype,new bt)}}();Object.defineProperty(ot,"__esModule",{value:!0}),ot.TopNFilterBuilder=void 0;var nt=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/FilterBuilders/filterBuilder.ts"),dt=function(mt){lt(vt,mt);function vt(){return mt!==null&&mt.apply(this,arguments)||this}return vt.prototype.top=function(tt){return this.operator="Top",this.itemCount=tt,this},vt.prototype.bottom=function(tt){return this.operator="Bottom",this.itemCount=tt,this},vt.prototype.orderByTarget=function(tt){return this.orderByTargetValue=tt,this},vt.prototype.build=function(){var tt=new nt.TopNFilter(this.target,this.operator,this.itemCount,this.orderByTargetValue);return tt},vt}(gt.FilterBuilder);ot.TopNFilterBuilder=dt},"./src/bookmarksManager.ts":function(et,ot,st){var lt=this&&this.__awaiter||function(vt,tt,bt,ht){function St(At){return At instanceof bt?At:new bt(function(Tt){Tt(At)})}return new(bt||(bt=Promise))(function(At,Tt){function ft(Mt){try{Rt(ht.next(Mt))}catch(Et){Tt(Et)}}function _t(Mt){try{Rt(ht.throw(Mt))}catch(Et){Tt(Et)}}function Rt(Mt){Mt.done?At(Mt.value):St(Mt.value).then(ft,_t)}Rt((ht=ht.apply(vt,tt||[])).next())})},nt=this&&this.__generator||function(vt,tt){var bt={label:0,sent:function(){if(At[0]&1)throw At[1];return At[1]},trys:[],ops:[]},ht,St,At,Tt;return Tt={next:ft(0),throw:ft(1),return:ft(2)},typeof Symbol=="function"&&(Tt[Symbol.iterator]=function(){return this}),Tt;function ft(Rt){return function(Mt){return _t([Rt,Mt])}}function _t(Rt){if(ht)throw new TypeError("Generator is already executing.");for(;bt;)try{if(ht=1,St&&(At=Rt[0]&2?St.return:Rt[0]?St.throw||((At=St.return)&&At.call(St),0):St.next)&&!(At=At.call(St,Rt[1])).done)return At;switch(St=0,At&&(Rt=[Rt[0]&2,At.value]),Rt[0]){case 0:case 1:At=Rt;break;case 4:return bt.label++,{value:Rt[1],done:!1};case 5:bt.label++,St=Rt[1],Rt=[0];continue;case 7:Rt=bt.ops.pop(),bt.trys.pop();continue;default:if(At=bt.trys,!(At=At.length>0&&At[At.length-1])&&(Rt[0]===6||Rt[0]===2)){bt=0;continue}if(Rt[0]===3&&(!At||Rt[1]>At[0]&&Rt[1]<At[3])){bt.label=Rt[1];break}if(Rt[0]===6&&bt.label<At[1]){bt.label=At[1],At=Rt;break}if(At&&bt.label<At[2]){bt.label=At[2],bt.ops.push(Rt);break}At[2]&&bt.ops.pop(),bt.trys.pop();continue}Rt=tt.call(vt,bt)}catch(Mt){Rt=[6,Mt],St=0}finally{ht=At=0}if(Rt[0]&5)throw Rt[1];return{value:Rt[0]?Rt[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.BookmarksManager=void 0;var gt=st("./src/util.ts"),dt=st("./src/errors.ts"),mt=function(){function vt(tt,bt,ht){this.service=tt,this.config=bt,this.iframe=ht}return vt.prototype.getBookmarks=function(){return lt(this,void 0,void 0,function(){var tt,bt;return nt(this,function(ht){switch(ht.label){case 0:if((0,gt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(dt.APINotSupportedForRDLError)];ht.label=1;case 1:return ht.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/bookmarks",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return tt=ht.sent(),[2,tt.body];case 3:throw bt=ht.sent(),bt.body;case 4:return[2]}})})},vt.prototype.apply=function(tt){return lt(this,void 0,void 0,function(){var bt,ht;return nt(this,function(St){switch(St.label){case 0:if((0,gt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(dt.APINotSupportedForRDLError)];bt={name:tt},St.label=1;case 1:return St.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/bookmarks/applyByName",bt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,St.sent()];case 3:throw ht=St.sent(),ht.body;case 4:return[2]}})})},vt.prototype.play=function(tt){return lt(this,void 0,void 0,function(){var bt,ht;return nt(this,function(St){switch(St.label){case 0:if((0,gt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(dt.APINotSupportedForRDLError)];bt={playMode:tt},St.label=1;case 1:return St.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/bookmarks/play",bt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,St.sent()];case 3:throw ht=St.sent(),ht.body;case 4:return[2]}})})},vt.prototype.capture=function(tt){return lt(this,void 0,void 0,function(){var bt,ht,St;return nt(this,function(At){switch(At.label){case 0:if((0,gt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(dt.APINotSupportedForRDLError)];bt={options:tt||{}},At.label=1;case 1:return At.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/bookmarks/capture",bt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return ht=At.sent(),[2,ht.body];case 3:throw St=At.sent(),St.body;case 4:return[2]}})})},vt.prototype.applyState=function(tt){return lt(this,void 0,void 0,function(){var bt,ht;return nt(this,function(St){switch(St.label){case 0:if((0,gt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(dt.APINotSupportedForRDLError)];bt={state:tt},St.label=1;case 1:return St.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/bookmarks/applyState",bt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,St.sent()];case 3:throw ht=St.sent(),ht.body;case 4:return[2]}})})},vt}();ot.BookmarksManager=mt},"./src/config.ts":(et,ot)=>{Object.defineProperty(ot,"__esModule",{value:!0});var st={version:"2.23.1",type:"js"};ot.default=st},"./src/create.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var bt=function(ht,St){return bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(At,Tt){At.__proto__=Tt}||function(At,Tt){for(var ft in Tt)Object.prototype.hasOwnProperty.call(Tt,ft)&&(At[ft]=Tt[ft])},bt(ht,St)};return function(ht,St){if(typeof St!="function"&&St!==null)throw new TypeError("Class extends value "+String(St)+" is not a constructor or null");bt(ht,St);function At(){this.constructor=ht}ht.prototype=St===null?Object.create(St):(At.prototype=St.prototype,new At)}}(),nt=this&&this.__awaiter||function(bt,ht,St,At){function Tt(ft){return ft instanceof St?ft:new St(function(_t){_t(ft)})}return new(St||(St=Promise))(function(ft,_t){function Rt(kt){try{Et(At.next(kt))}catch(at){_t(at)}}function Mt(kt){try{Et(At.throw(kt))}catch(at){_t(at)}}function Et(kt){kt.done?ft(kt.value):Tt(kt.value).then(Rt,Mt)}Et((At=At.apply(bt,ht||[])).next())})},gt=this&&this.__generator||function(bt,ht){var St={label:0,sent:function(){if(ft[0]&1)throw ft[1];return ft[1]},trys:[],ops:[]},At,Tt,ft,_t;return _t={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Rt(Et){return function(kt){return Mt([Et,kt])}}function Mt(Et){if(At)throw new TypeError("Generator is already executing.");for(;St;)try{if(At=1,Tt&&(ft=Et[0]&2?Tt.return:Et[0]?Tt.throw||((ft=Tt.return)&&ft.call(Tt),0):Tt.next)&&!(ft=ft.call(Tt,Et[1])).done)return ft;switch(Tt=0,ft&&(Et=[Et[0]&2,ft.value]),Et[0]){case 0:case 1:ft=Et;break;case 4:return St.label++,{value:Et[1],done:!1};case 5:St.label++,Tt=Et[1],Et=[0];continue;case 7:Et=St.ops.pop(),St.trys.pop();continue;default:if(ft=St.trys,!(ft=ft.length>0&&ft[ft.length-1])&&(Et[0]===6||Et[0]===2)){St=0;continue}if(Et[0]===3&&(!ft||Et[1]>ft[0]&&Et[1]<ft[3])){St.label=Et[1];break}if(Et[0]===6&&St.label<ft[1]){St.label=ft[1],ft=Et;break}if(ft&&St.label<ft[2]){St.label=ft[2],St.ops.push(Et);break}ft[2]&&St.ops.pop(),St.trys.pop();continue}Et=ht.call(bt,St)}catch(kt){Et=[6,kt],Tt=0}finally{At=ft=0}if(Et[0]&5)throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.Create=void 0;var dt=st("./node_modules/powerbi-models/dist/models.js"),mt=st("./src/embed.ts"),vt=st("./src/util.ts"),tt=function(bt){lt(ht,bt);function ht(St,At,Tt,ft,_t){return bt.call(this,St,At,Tt,void 0,ft,_t)||this}return ht.prototype.getId=function(){var St=this.createConfig&&this.createConfig.datasetId?this.createConfig.datasetId:ht.findIdFromEmbedUrl(this.config.embedUrl);if(typeof St!="string"||St.length===0)throw new Error("Dataset id is required, but it was not found. You must provide an id either as part of embed configuration.");return St},ht.prototype.validate=function(St){return(0,dt.validateCreateReport)(St)},ht.prototype.configChanged=function(St){if(!St){var At=this.config;this.createConfig={accessToken:At.accessToken,datasetId:At.datasetId||this.getId(),groupId:At.groupId,settings:At.settings,tokenType:At.tokenType,theme:At.theme}}},ht.prototype.getDefaultEmbedUrlEndpoint=function(){return"reportEmbed"},ht.prototype.isSaved=function(){return nt(this,void 0,void 0,function(){return gt(this,function(St){switch(St.label){case 0:return[4,vt.isSavedInternal(this.service.hpm,this.config.uniqueId,this.iframe.contentWindow)];case 1:return[2,St.sent()]}})})},ht.findIdFromEmbedUrl=function(St){var At=/datasetId="?([^&]+)"?/,Tt=St.match(At),ft;return Tt&&(ft=Tt[1]),ft},ht.prototype.create=function(){var St;return nt(this,void 0,void 0,function(){var At,Tt,ft,_t;return gt(this,function(Rt){switch(Rt.label){case 0:if(At=(0,dt.validateCreateReport)(this.createConfig),At)throw At;Rt.label=1;case 1:return Rt.trys.push([1,3,,4]),Tt={uid:this.config.uniqueId,sdkSessionId:this.service.getSdkSessionId()},!((St=this.eventHooks)===null||St===void 0)&&St.accessTokenProvider&&(Tt.tokenProviderSupplied=!0),[4,this.service.hpm.post("/report/create",this.createConfig,Tt,this.iframe.contentWindow)];case 2:return ft=Rt.sent(),[2,ft.body];case 3:throw _t=Rt.sent(),_t.body;case 4:return[2]}})})},ht}(mt.Embed);ot.Create=tt},"./src/dashboard.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var mt=function(vt,tt){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var St in ht)Object.prototype.hasOwnProperty.call(ht,St)&&(bt[St]=ht[St])},mt(vt,tt)};return function(vt,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");mt(vt,tt);function bt(){this.constructor=vt}vt.prototype=tt===null?Object.create(tt):(bt.prototype=tt.prototype,new bt)}}();Object.defineProperty(ot,"__esModule",{value:!0}),ot.Dashboard=void 0;var nt=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/embed.ts"),dt=function(mt){lt(vt,mt);function vt(tt,bt,ht,St,At){var Tt=mt.call(this,tt,bt,ht,void 0,St,At)||this;return Tt.loadPath="/dashboard/load",Tt.phasedLoadPath="/dashboard/prepare",Array.prototype.push.apply(Tt.allowedEvents,vt.allowedEvents),Tt}return vt.findIdFromEmbedUrl=function(tt){var bt=/dashboardId="?([^&]+)"?/,ht=tt.match(bt),St;return ht&&(St=ht[1]),St},vt.prototype.getId=function(){var tt=this.config,bt=tt.id||this.element.getAttribute(vt.dashboardIdAttribute)||vt.findIdFromEmbedUrl(tt.embedUrl);if(typeof bt!="string"||bt.length===0)throw new Error("Dashboard id is required, but it was not found. You must provide an id either as part of embed configuration or as attribute '".concat(vt.dashboardIdAttribute,"'."));return bt},vt.prototype.validate=function(tt){var bt=tt,ht=(0,nt.validateDashboardLoad)(bt);return ht||this.validatePageView(bt.pageView)},vt.prototype.configChanged=function(tt){tt||(this.config.id=this.getId())},vt.prototype.getDefaultEmbedUrlEndpoint=function(){return"dashboardEmbed"},vt.prototype.validatePageView=function(tt){if(tt&&tt!=="fitToWidth"&&tt!=="oneColumn"&&tt!=="actualSize")return[{message:"pageView must be one of the followings: fitToWidth, oneColumn, actualSize"}]},vt.allowedEvents=["tileClicked","error"],vt.dashboardIdAttribute="powerbi-dashboard-id",vt.typeAttribute="powerbi-type",vt.type="Dashboard",vt}(gt.Embed);ot.Dashboard=dt},"./src/embed.ts":function(et,ot,st){var lt=this&&this.__awaiter||function(bt,ht,St,At){function Tt(ft){return ft instanceof St?ft:new St(function(_t){_t(ft)})}return new(St||(St=Promise))(function(ft,_t){function Rt(kt){try{Et(At.next(kt))}catch(at){_t(at)}}function Mt(kt){try{Et(At.throw(kt))}catch(at){_t(at)}}function Et(kt){kt.done?ft(kt.value):Tt(kt.value).then(Rt,Mt)}Et((At=At.apply(bt,ht||[])).next())})},nt=this&&this.__generator||function(bt,ht){var St={label:0,sent:function(){if(ft[0]&1)throw ft[1];return ft[1]},trys:[],ops:[]},At,Tt,ft,_t;return _t={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Rt(Et){return function(kt){return Mt([Et,kt])}}function Mt(Et){if(At)throw new TypeError("Generator is already executing.");for(;St;)try{if(At=1,Tt&&(ft=Et[0]&2?Tt.return:Et[0]?Tt.throw||((ft=Tt.return)&&ft.call(Tt),0):Tt.next)&&!(ft=ft.call(Tt,Et[1])).done)return ft;switch(Tt=0,ft&&(Et=[Et[0]&2,ft.value]),Et[0]){case 0:case 1:ft=Et;break;case 4:return St.label++,{value:Et[1],done:!1};case 5:St.label++,Tt=Et[1],Et=[0];continue;case 7:Et=St.ops.pop(),St.trys.pop();continue;default:if(ft=St.trys,!(ft=ft.length>0&&ft[ft.length-1])&&(Et[0]===6||Et[0]===2)){St=0;continue}if(Et[0]===3&&(!ft||Et[1]>ft[0]&&Et[1]<ft[3])){St.label=Et[1];break}if(Et[0]===6&&St.label<ft[1]){St.label=ft[1],ft=Et;break}if(ft&&St.label<ft[2]){St.label=ft[2],St.ops.push(Et);break}ft[2]&&St.ops.pop(),St.trys.pop();continue}Et=ht.call(bt,St)}catch(kt){Et=[6,kt],Tt=0}finally{At=ft=0}if(Et[0]&5)throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.Embed=void 0;var gt=st("./node_modules/powerbi-models/dist/models.js"),dt=st("./src/config.ts"),mt=st("./src/errors.ts"),vt=st("./src/util.ts"),tt=function(){function bt(ht,St,At,Tt,ft,_t){if(this.allowedEvents=[],(0,vt.autoAuthInEmbedUrl)(At.embedUrl))throw new Error(mt.EmbedUrlNotSupported);Array.prototype.push.apply(this.allowedEvents,bt.allowedEvents),this.eventHandlers=[],this.service=ht,this.element=St,this.iframe=Tt,this.iframeLoaded=!1,this.embedtype=At.type.toLowerCase(),this.commands=[],this.groups=[],this.populateConfig(At,_t),(0,vt.isCreate)(this.embedtype)?this.setIframe(!1,ft,_t):this.setIframe(!0,ft,_t)}return bt.prototype.create=function(){throw new Error("no create support")},bt.prototype.save=function(){return lt(this,void 0,void 0,function(){var ht,St;return nt(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,this.service.hpm.post("/report/save",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return ht=At.sent(),[2,ht.body];case 2:throw St=At.sent(),St.body;case 3:return[2]}})})},bt.prototype.saveAs=function(ht){return lt(this,void 0,void 0,function(){var St,At;return nt(this,function(Tt){switch(Tt.label){case 0:return Tt.trys.push([0,2,,3]),[4,this.service.hpm.post("/report/saveAs",ht,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return St=Tt.sent(),[2,St.body];case 2:throw At=Tt.sent(),At.body;case 3:return[2]}})})},bt.prototype.getCorrelationId=function(){return lt(this,void 0,void 0,function(){var ht,St;return nt(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,this.service.hpm.get("/getCorrelationId",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return ht=At.sent(),[2,ht.body];case 2:throw St=At.sent(),St.body;case 3:return[2]}})})},bt.prototype.load=function(ht){var St;return lt(this,void 0,void 0,function(){var At,Tt,ft,_t,Rt;return nt(this,function(Mt){switch(Mt.label){case 0:if(!this.config.accessToken)return console.debug("Power BI SDK iframe is loaded but powerbi.embed is not called yet."),[2];if(!this.iframeLoaded)return console.debug("Power BI SDK is trying to post /report/load before iframe is ready."),[2];if(At=ht&&this.config.type==="report"?this.phasedLoadPath:this.loadPath,Tt={uid:this.config.uniqueId,sdkSessionId:this.service.getSdkSessionId(),bootstrapped:this.config.bootstrapped,sdkVersion:dt.default.version},!((St=this.eventHooks)===null||St===void 0)&&St.accessTokenProvider&&(Tt.tokenProviderSupplied=!0),ft=new Date,this.lastLoadRequest&&(0,vt.getTimeDiffInMilliseconds)(this.lastLoadRequest,ft)<100)return console.debug("Power BI SDK sent more than two /report/load requests in the last 100ms interval."),[2];this.lastLoadRequest=ft,Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.post(At,this.config,Tt,this.iframe.contentWindow)];case 2:return _t=Mt.sent(),[2,_t.body];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},bt.prototype.off=function(ht,St){var At=this,Tt={name:ht,type:null,id:null,value:null};if(St)(0,vt.remove)(function(_t){return _t.test(Tt)&&_t.handle===St},this.eventHandlers),this.element.removeEventListener(ht,St);else{var ft=this.eventHandlers.filter(function(_t){return _t.test(Tt)});ft.forEach(function(_t){(0,vt.remove)(function(Rt){return Rt===_t},At.eventHandlers),At.element.removeEventListener(ht,_t.handle)})}},bt.prototype.on=function(ht,St){if(this.allowedEvents.indexOf(ht)===-1)throw new Error("eventName must be one of ".concat(this.allowedEvents,". You passed: ").concat(ht));this.eventHandlers.push({test:function(At){return At.name===ht},handle:St}),this.element.addEventListener(ht,St)},bt.prototype.reload=function(){return lt(this,void 0,void 0,function(){return nt(this,function(ht){switch(ht.label){case 0:return[4,this.load()];case 1:return[2,ht.sent()]}})})},bt.prototype.setAccessToken=function(ht){return lt(this,void 0,void 0,function(){var St,At,Tt;return nt(this,function(ft){switch(ft.label){case 0:if(!ht)throw new Error("Access token cannot be empty");St=this.config.type,St=St==="create"||St==="visual"||St==="qna"||St==="quickCreate"?"report":St,ft.label=1;case 1:return ft.trys.push([1,3,,4]),[4,this.service.hpm.post("/"+St+"/token",ht,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return At=ft.sent(),this.config.accessToken=ht,this.element.setAttribute(bt.accessTokenAttribute,ht),this.service.accessToken=ht,[2,At.body];case 3:throw Tt=ft.sent(),Tt.body;case 4:return[2]}})})},bt.prototype.getAccessToken=function(ht){var St=this.config.accessToken||this.element.getAttribute(bt.accessTokenAttribute)||ht;if(!St)throw new Error("No access token was found for element. You must specify an access token directly on the element using attribute '".concat(bt.accessTokenAttribute,"' or specify a global token at: powerbi.accessToken."));return St},bt.prototype.populateConfig=function(ht,St){var At=this,Tt,ft,_t,Rt,Mt,Et,kt,at,s;this.bootstrapConfig?(this.config=(0,vt.assign)({},this.bootstrapConfig,ht),this.bootstrapConfig=null):this.config=(0,vt.assign)({},ht),this.config.embedUrl=this.getEmbedUrl(St),this.config.groupId=this.getGroupId(),this.addLocaleToEmbedUrl(ht),this.config.uniqueId=this.getUniqueId();var b=(ft=(Tt=this.config)===null||Tt===void 0?void 0:Tt.settings)===null||ft===void 0?void 0:ft.extensions;this.commands=(_t=b==null?void 0:b.commands)!==null&&_t!==void 0?_t:[],this.groups=(Rt=b==null?void 0:b.groups)!==null&&Rt!==void 0?Rt:[],this.initialLayoutType=(kt=(Et=(Mt=this.config)===null||Mt===void 0?void 0:Mt.settings)===null||Et===void 0?void 0:Et.layoutType)!==null&&kt!==void 0?kt:gt.LayoutType.Master;var $=(s=(at=this.config)===null||at===void 0?void 0:at.settings)===null||s===void 0?void 0:s.extensions;Array.isArray($)&&(this.commands=[],$.map(function(_e){_e!=null&&_e.command&&At.commands.push(_e.command)})),St?(this.bootstrapConfig=this.config,this.bootstrapConfig.bootstrapped=!0):this.config.accessToken=this.getAccessToken(this.service.accessToken),this.eventHooks=this.config.eventHooks,this.validateEventHooks(this.eventHooks),delete this.config.eventHooks,this.configChanged(St)},bt.prototype.validateEventHooks=function(ht){if(ht){for(var St in ht)if(ht.hasOwnProperty(St)&&typeof ht[St]!="function")throw new Error(St+" must be a function");var At=ht.applicationContextProvider;if(At){if(this.embedtype.toLowerCase()!=="report")throw new Error("applicationContextProvider is only supported in report embed");this.config.embedUrl=(0,vt.addParamToUrl)(this.config.embedUrl,"registerQueryCallback","true")}var Tt=ht.accessTokenProvider;if(Tt&&(["create","quickcreate","report"].indexOf(this.embedtype.toLowerCase())===-1||this.config.tokenType!==gt.TokenType.Aad))throw new Error("accessTokenProvider is only supported in report SaaS embed")}},bt.prototype.addLocaleToEmbedUrl=function(ht){if(ht.settings){var St=ht.settings.localeSettings;St&&St.language&&(this.config.embedUrl=(0,vt.addParamToUrl)(this.config.embedUrl,"language",St.language)),St&&St.formatLocale&&(this.config.embedUrl=(0,vt.addParamToUrl)(this.config.embedUrl,"formatLocale",St.formatLocale))}},bt.prototype.getEmbedUrl=function(ht){var St=this.config.embedUrl||this.element.getAttribute(bt.embedUrlAttribute);if(ht&&!St&&(St=this.getDefaultEmbedUrl(this.config.hostname)),typeof St!="string"||St.length===0)throw new Error("Embed Url is required, but it was not found. You must provide an embed url either as part of embed configuration or as attribute '".concat(bt.embedUrlAttribute,"'."));return St},bt.prototype.getDefaultEmbedUrl=function(ht){ht||(ht=bt.defaultEmbedHostName);var St=this.getDefaultEmbedUrlEndpoint();return ht=ht.toLowerCase().trim(),ht.indexOf("https://")===0?"".concat(ht,"/").concat(St):"https://".concat(ht,"/").concat(St)},bt.prototype.getUniqueId=function(){return this.config.uniqueId||this.element.getAttribute(bt.nameAttribute)||(0,vt.createRandomString)()},bt.prototype.getGroupId=function(){return this.config.groupId||bt.findGroupIdFromEmbedUrl(this.config.embedUrl)},bt.prototype.fullscreen=function(){var ht=this.iframe.requestFullscreen||this.iframe.msRequestFullscreen||this.iframe.mozRequestFullScreen||this.iframe.webkitRequestFullscreen;ht.call(this.iframe)},bt.prototype.exitFullscreen=function(){if(this.isFullscreen(this.iframe)){var ht=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;ht.call(document)}},bt.prototype.isFullscreen=function(ht){var St=["fullscreenElement","webkitFullscreenElement","mozFullscreenScreenElement","msFullscreenElement"];return St.some(function(At){return document[At]===ht})},bt.prototype.setIframe=function(ht,St,At){var Tt=this;if(!this.iframe){var ft=document.createElement("iframe"),_t=this.config.uniqueId?(0,vt.addParamToUrl)(this.config.embedUrl,"uid",this.config.uniqueId):this.config.embedUrl;if(!(0,vt.validateEmbedUrl)(_t))throw new Error(mt.invalidEmbedUrlErrorMessage);ft.style.width="100%",ft.style.height="100%",ft.setAttribute("src",_t),ft.setAttribute("scrolling","no"),ft.setAttribute("allowfullscreen","true");for(var Rt=this.element;Rt.firstChild;)Rt.removeChild(Rt.firstChild);Rt.appendChild(ft),this.iframe=Rt.firstChild}if(ht){if(!At){var Mt=this.validate(this.config);if(Mt)throw Mt}this.iframe.addEventListener("load",function(){Tt.iframeLoaded=!0,Tt.load(St)},!1),this.service.getNumberOfComponents()<=bt.maxFrontLoadTimes&&(this.frontLoadHandler=function(){Tt.frontLoadSendConfig(Tt.config)},this.element.addEventListener("ready",this.frontLoadHandler,!1))}else this.iframe.addEventListener("load",function(){return Tt.create()},!1)},bt.prototype.setComponentTitle=function(ht){this.iframe&&(ht==null?this.iframe.removeAttribute("title"):this.iframe.setAttribute("title",ht))},bt.prototype.setComponentTabIndex=function(ht){this.element&&this.element.setAttribute("tabindex",ht==null?"0":ht.toString())},bt.prototype.removeComponentTabIndex=function(ht){this.element&&this.element.removeAttribute("tabindex")},bt.findGroupIdFromEmbedUrl=function(ht){var St=/groupId="?([^&]+)"?/,At=ht.match(St),Tt;return At&&(Tt=At[1]),Tt},bt.prototype.frontLoadSendConfig=function(ht){return lt(this,void 0,void 0,function(){var St,At,Tt;return nt(this,function(ft){switch(ft.label){case 0:if(!ht.accessToken)return[2];if(St=this.validate(ht),St)throw St;if(this.iframe.contentWindow==null)return[2];ft.label=1;case 1:return ft.trys.push([1,3,,4]),[4,this.service.hpm.post("/frontload/config",ht,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return At=ft.sent(),[2,At.body];case 3:throw Tt=ft.sent(),Tt.body;case 4:return[2]}})})},bt.allowedEvents=["loaded","saved","rendered","saveAsTriggered","error","dataSelected","buttonClicked","info"],bt.accessTokenAttribute="powerbi-access-token",bt.embedUrlAttribute="powerbi-embed-url",bt.nameAttribute="powerbi-name",bt.typeAttribute="powerbi-type",bt.defaultEmbedHostName="https://app.powerbi.com",bt.maxFrontLoadTimes=2,bt}();ot.Embed=tt},"./src/errors.ts":(et,ot)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.invalidEmbedUrlErrorMessage=ot.EmbedUrlNotSupported=ot.APINotSupportedForRDLError=void 0,ot.APINotSupportedForRDLError="This API is currently not supported for RDL reports",ot.EmbedUrlNotSupported="Embed URL is invalid for this scenario. Please use Power BI REST APIs to get the valid URL",ot.invalidEmbedUrlErrorMessage="Invalid embed URL detected. Either URL hostname or protocol are invalid. Please use Power BI REST APIs to get the valid URL"},"./src/factories.ts":(et,ot,st)=>{Object.defineProperty(ot,"__esModule",{value:!0}),ot.routerFactory=ot.wpmpFactory=ot.hpmFactory=void 0;var lt=st("./node_modules/window-post-message-proxy/dist/windowPostMessageProxy.js"),nt=st("./node_modules/http-post-message/dist/httpPostMessage.js"),gt=st("./node_modules/powerbi-router/dist/router.js"),dt=st("./src/config.ts"),mt=function(bt,ht,St,At,Tt){return St===void 0&&(St=dt.default.version),At===void 0&&(At=dt.default.type),new nt.HttpPostMessage(bt,{"x-sdk-type":At,"x-sdk-version":St,"x-sdk-wrapper-version":Tt},ht)};ot.hpmFactory=mt;var vt=function(bt,ht,St){return new lt.WindowPostMessageProxy({processTrackingProperties:{addTrackingProperties:nt.HttpPostMessage.addTrackingProperties,getTrackingProperties:nt.HttpPostMessage.getTrackingProperties},isErrorMessage:nt.HttpPostMessage.isErrorMessage,suppressWarnings:!0,name:bt,logMessages:ht,eventSourceOverrideWindow:St})};ot.wpmpFactory=vt;var tt=function(bt){return new gt.Router(bt)};ot.routerFactory=tt},"./src/page.ts":function(et,ot,st){var lt=this&&this.__awaiter||function(bt,ht,St,At){function Tt(ft){return ft instanceof St?ft:new St(function(_t){_t(ft)})}return new(St||(St=Promise))(function(ft,_t){function Rt(kt){try{Et(At.next(kt))}catch(at){_t(at)}}function Mt(kt){try{Et(At.throw(kt))}catch(at){_t(at)}}function Et(kt){kt.done?ft(kt.value):Tt(kt.value).then(Rt,Mt)}Et((At=At.apply(bt,ht||[])).next())})},nt=this&&this.__generator||function(bt,ht){var St={label:0,sent:function(){if(ft[0]&1)throw ft[1];return ft[1]},trys:[],ops:[]},At,Tt,ft,_t;return _t={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Rt(Et){return function(kt){return Mt([Et,kt])}}function Mt(Et){if(At)throw new TypeError("Generator is already executing.");for(;St;)try{if(At=1,Tt&&(ft=Et[0]&2?Tt.return:Et[0]?Tt.throw||((ft=Tt.return)&&ft.call(Tt),0):Tt.next)&&!(ft=ft.call(Tt,Et[1])).done)return ft;switch(Tt=0,ft&&(Et=[Et[0]&2,ft.value]),Et[0]){case 0:case 1:ft=Et;break;case 4:return St.label++,{value:Et[1],done:!1};case 5:St.label++,Tt=Et[1],Et=[0];continue;case 7:Et=St.ops.pop(),St.trys.pop();continue;default:if(ft=St.trys,!(ft=ft.length>0&&ft[ft.length-1])&&(Et[0]===6||Et[0]===2)){St=0;continue}if(Et[0]===3&&(!ft||Et[1]>ft[0]&&Et[1]<ft[3])){St.label=Et[1];break}if(Et[0]===6&&St.label<ft[1]){St.label=ft[1],ft=Et;break}if(ft&&St.label<ft[2]){St.label=ft[2],St.ops.push(Et);break}ft[2]&&St.ops.pop(),St.trys.pop();continue}Et=ht.call(bt,St)}catch(kt){Et=[6,kt],Tt=0}finally{At=ft=0}if(Et[0]&5)throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.Page=void 0;var gt=st("./node_modules/powerbi-models/dist/models.js"),dt=st("./src/visualDescriptor.ts"),mt=st("./src/util.ts"),vt=st("./src/errors.ts"),tt=function(){function bt(ht,St,At,Tt,ft,_t,Rt,Mt,Et,kt){this.report=ht,this.name=St,this.displayName=At,this.isActive=Tt,this.visibility=ft,this.defaultSize=_t,this.mobileSize=Mt,this.defaultDisplayOption=Rt,this.background=Et,this.wallpaper=kt}return bt.prototype.getSmartNarrativeInsights=function(){return lt(this,void 0,void 0,function(){var ht,St;return nt(this,function(At){switch(At.label){case 0:if((0,mt.isRDLEmbed)(this.report.config.embedUrl))return[2,Promise.reject(vt.APINotSupportedForRDLError)];At.label=1;case 1:return At.trys.push([1,3,,4]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/smartNarrativeInsights"),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return ht=At.sent(),[2,ht.body];case 3:throw St=At.sent(),St.body;case 4:return[2]}})})},bt.prototype.getFilters=function(){return lt(this,void 0,void 0,function(){var ht,St;return nt(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/filters"),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 1:return ht=At.sent(),[2,ht.body];case 2:throw St=At.sent(),St.body;case 3:return[2]}})})},bt.prototype.updateFilters=function(ht,St){return lt(this,void 0,void 0,function(){var At,Tt;return nt(this,function(ft){switch(ft.label){case 0:At={filtersOperation:ht,filters:St},ft.label=1;case 1:return ft.trys.push([1,3,,4]),[4,this.report.service.hpm.post("/report/pages/".concat(this.name,"/filters"),At,{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return[2,ft.sent()];case 3:throw Tt=ft.sent(),Tt.body;case 4:return[2]}})})},bt.prototype.removeFilters=function(){return lt(this,void 0,void 0,function(){return nt(this,function(ht){switch(ht.label){case 0:return[4,this.updateFilters(gt.FiltersOperations.RemoveAll)];case 1:return[2,ht.sent()]}})})},bt.prototype.setFilters=function(ht){return lt(this,void 0,void 0,function(){var St;return nt(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,this.report.service.hpm.put("/report/pages/".concat(this.name,"/filters"),ht,{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 1:return[2,At.sent()];case 2:throw St=At.sent(),St.body;case 3:return[2]}})})},bt.prototype.delete=function(){return lt(this,void 0,void 0,function(){var ht,St;return nt(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,this.report.service.hpm.delete("/report/pages/".concat(this.name),{},{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 1:return ht=At.sent(),[2,ht.body];case 2:throw St=At.sent(),St.body;case 3:return[2]}})})},bt.prototype.setActive=function(){return lt(this,void 0,void 0,function(){var ht,St;return nt(this,function(At){switch(At.label){case 0:ht={name:this.name,displayName:null,isActive:!0},At.label=1;case 1:return At.trys.push([1,3,,4]),[4,this.report.service.hpm.put("/report/pages/active",ht,{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return[2,At.sent()];case 3:throw St=At.sent(),St.body;case 4:return[2]}})})},bt.prototype.setDisplayName=function(ht){return lt(this,void 0,void 0,function(){var St,At;return nt(this,function(Tt){switch(Tt.label){case 0:St={name:this.name,displayName:ht},Tt.label=1;case 1:return Tt.trys.push([1,3,,4]),[4,this.report.service.hpm.put("/report/pages/".concat(this.name,"/name"),St,{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return[2,Tt.sent()];case 3:throw At=Tt.sent(),At.body;case 4:return[2]}})})},bt.prototype.getVisuals=function(){return lt(this,void 0,void 0,function(){var ht,St,At=this;return nt(this,function(Tt){switch(Tt.label){case 0:if((0,mt.isRDLEmbed)(this.report.config.embedUrl))return[2,Promise.reject(vt.APINotSupportedForRDLError)];Tt.label=1;case 1:return Tt.trys.push([1,3,,4]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/visuals"),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return ht=Tt.sent(),[2,ht.body.map(function(ft){return new dt.VisualDescriptor(At,ft.name,ft.title,ft.type,ft.layout)})];case 3:throw St=Tt.sent(),St.body;case 4:return[2]}})})},bt.prototype.getVisualByName=function(ht){return lt(this,void 0,void 0,function(){var St,At,Tt;return nt(this,function(ft){switch(ft.label){case 0:if((0,mt.isRDLEmbed)(this.report.config.embedUrl))return[2,Promise.reject(vt.APINotSupportedForRDLError)];ft.label=1;case 1:return ft.trys.push([1,3,,4]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/visuals"),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return St=ft.sent(),At=St.body.find(function(_t){return _t.name===ht}),At?[2,new dt.VisualDescriptor(this,At.name,At.title,At.type,At.layout)]:[2,Promise.reject(gt.CommonErrorCodes.NotFound)];case 3:throw Tt=ft.sent(),Tt.body;case 4:return[2]}})})},bt.prototype.setVisualDisplayState=function(ht,St){return lt(this,void 0,void 0,function(){var At,Tt;return nt(this,function(ft){return At=this.name,Tt=this.report,[2,Tt.setVisualDisplayState(At,ht,St)]})})},bt.prototype.moveVisual=function(ht,St,At,Tt){return lt(this,void 0,void 0,function(){var ft,_t;return nt(this,function(Rt){return ft=this.name,_t=this.report,[2,_t.moveVisual(ft,ht,St,At,Tt)]})})},bt.prototype.resizeVisual=function(ht,St,At){return lt(this,void 0,void 0,function(){var Tt,ft;return nt(this,function(_t){return Tt=this.name,ft=this.report,[2,ft.resizeVisual(Tt,ht,St,At)]})})},bt.prototype.resizePage=function(ht,St,At){return lt(this,void 0,void 0,function(){var Tt;return nt(this,function(ft){return this.isActive?(Tt=this.report,[2,Tt.resizeActivePage(ht,St,At)]):[2,Promise.reject("Cannot resize the page. Only the active page can be resized")]})})},bt.prototype.getSlicers=function(){return lt(this,void 0,void 0,function(){var ht,St,At=this;return nt(this,function(Tt){switch(Tt.label){case 0:if((0,mt.isRDLEmbed)(this.report.config.embedUrl))return[2,Promise.reject(vt.APINotSupportedForRDLError)];Tt.label=1;case 1:return Tt.trys.push([1,3,,4]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/visuals"),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return ht=Tt.sent(),[2,ht.body.filter(function(ft){return ft.type==="slicer"}).map(function(ft){return new dt.VisualDescriptor(At,ft.name,ft.title,ft.type,ft.layout)})];case 3:throw St=Tt.sent(),St.body;case 4:return[2]}})})},bt.prototype.hasLayout=function(ht){return lt(this,void 0,void 0,function(){var St,At,Tt;return nt(this,function(ft){switch(ft.label){case 0:if((0,mt.isRDLEmbed)(this.report.config.embedUrl))return[2,Promise.reject(vt.APINotSupportedForRDLError)];St=gt.LayoutType[ht],ft.label=1;case 1:return ft.trys.push([1,3,,4]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/layoutTypes/").concat(St),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return At=ft.sent(),[2,At.body];case 3:throw Tt=ft.sent(),Tt.body;case 4:return[2]}})})},bt}();ot.Page=tt},"./src/qna.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var tt=function(bt,ht){return tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(St,At){St.__proto__=At}||function(St,At){for(var Tt in At)Object.prototype.hasOwnProperty.call(At,Tt)&&(St[Tt]=At[Tt])},tt(bt,ht)};return function(bt,ht){if(typeof ht!="function"&&ht!==null)throw new TypeError("Class extends value "+String(ht)+" is not a constructor or null");tt(bt,ht);function St(){this.constructor=bt}bt.prototype=ht===null?Object.create(ht):(St.prototype=ht.prototype,new St)}}(),nt=this&&this.__awaiter||function(tt,bt,ht,St){function At(Tt){return Tt instanceof ht?Tt:new ht(function(ft){ft(Tt)})}return new(ht||(ht=Promise))(function(Tt,ft){function _t(Et){try{Mt(St.next(Et))}catch(kt){ft(kt)}}function Rt(Et){try{Mt(St.throw(Et))}catch(kt){ft(kt)}}function Mt(Et){Et.done?Tt(Et.value):At(Et.value).then(_t,Rt)}Mt((St=St.apply(tt,bt||[])).next())})},gt=this&&this.__generator||function(tt,bt){var ht={label:0,sent:function(){if(Tt[0]&1)throw Tt[1];return Tt[1]},trys:[],ops:[]},St,At,Tt,ft;return ft={next:_t(0),throw:_t(1),return:_t(2)},typeof Symbol=="function"&&(ft[Symbol.iterator]=function(){return this}),ft;function _t(Mt){return function(Et){return Rt([Mt,Et])}}function Rt(Mt){if(St)throw new TypeError("Generator is already executing.");for(;ht;)try{if(St=1,At&&(Tt=Mt[0]&2?At.return:Mt[0]?At.throw||((Tt=At.return)&&Tt.call(At),0):At.next)&&!(Tt=Tt.call(At,Mt[1])).done)return Tt;switch(At=0,Tt&&(Mt=[Mt[0]&2,Tt.value]),Mt[0]){case 0:case 1:Tt=Mt;break;case 4:return ht.label++,{value:Mt[1],done:!1};case 5:ht.label++,At=Mt[1],Mt=[0];continue;case 7:Mt=ht.ops.pop(),ht.trys.pop();continue;default:if(Tt=ht.trys,!(Tt=Tt.length>0&&Tt[Tt.length-1])&&(Mt[0]===6||Mt[0]===2)){ht=0;continue}if(Mt[0]===3&&(!Tt||Mt[1]>Tt[0]&&Mt[1]<Tt[3])){ht.label=Mt[1];break}if(Mt[0]===6&&ht.label<Tt[1]){ht.label=Tt[1],Tt=Mt;break}if(Tt&&ht.label<Tt[2]){ht.label=Tt[2],ht.ops.push(Mt);break}Tt[2]&&ht.ops.pop(),ht.trys.pop();continue}Mt=bt.call(tt,ht)}catch(Et){Mt=[6,Et],At=0}finally{St=Tt=0}if(Mt[0]&5)throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.Qna=void 0;var dt=st("./node_modules/powerbi-models/dist/models.js"),mt=st("./src/embed.ts"),vt=function(tt){lt(bt,tt);function bt(ht,St,At,Tt,ft){var _t=tt.call(this,ht,St,At,void 0,Tt,ft)||this;return _t.loadPath="/qna/load",_t.phasedLoadPath="/qna/prepare",Array.prototype.push.apply(_t.allowedEvents,bt.allowedEvents),_t}return bt.prototype.getId=function(){return null},bt.prototype.setQuestion=function(ht){return nt(this,void 0,void 0,function(){var St,At;return gt(this,function(Tt){switch(Tt.label){case 0:St={question:ht},Tt.label=1;case 1:return Tt.trys.push([1,3,,4]),[4,this.service.hpm.post("/qna/interpret",St,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,Tt.sent()];case 3:throw At=Tt.sent(),At.body;case 4:return[2]}})})},bt.prototype.configChanged=function(ht){},bt.prototype.getDefaultEmbedUrlEndpoint=function(){return"qnaEmbed"},bt.prototype.validate=function(ht){return(0,dt.validateLoadQnaConfiguration)(ht)},bt.type="Qna",bt.allowedEvents=["loaded","visualRendered"],bt}(mt.Embed);ot.Qna=vt},"./src/quickCreate.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var tt=function(bt,ht){return tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(St,At){St.__proto__=At}||function(St,At){for(var Tt in At)Object.prototype.hasOwnProperty.call(At,Tt)&&(St[Tt]=At[Tt])},tt(bt,ht)};return function(bt,ht){if(typeof ht!="function"&&ht!==null)throw new TypeError("Class extends value "+String(ht)+" is not a constructor or null");tt(bt,ht);function St(){this.constructor=bt}bt.prototype=ht===null?Object.create(ht):(St.prototype=ht.prototype,new St)}}(),nt=this&&this.__awaiter||function(tt,bt,ht,St){function At(Tt){return Tt instanceof ht?Tt:new ht(function(ft){ft(Tt)})}return new(ht||(ht=Promise))(function(Tt,ft){function _t(Et){try{Mt(St.next(Et))}catch(kt){ft(kt)}}function Rt(Et){try{Mt(St.throw(Et))}catch(kt){ft(kt)}}function Mt(Et){Et.done?Tt(Et.value):At(Et.value).then(_t,Rt)}Mt((St=St.apply(tt,bt||[])).next())})},gt=this&&this.__generator||function(tt,bt){var ht={label:0,sent:function(){if(Tt[0]&1)throw Tt[1];return Tt[1]},trys:[],ops:[]},St,At,Tt,ft;return ft={next:_t(0),throw:_t(1),return:_t(2)},typeof Symbol=="function"&&(ft[Symbol.iterator]=function(){return this}),ft;function _t(Mt){return function(Et){return Rt([Mt,Et])}}function Rt(Mt){if(St)throw new TypeError("Generator is already executing.");for(;ht;)try{if(St=1,At&&(Tt=Mt[0]&2?At.return:Mt[0]?At.throw||((Tt=At.return)&&Tt.call(At),0):At.next)&&!(Tt=Tt.call(At,Mt[1])).done)return Tt;switch(At=0,Tt&&(Mt=[Mt[0]&2,Tt.value]),Mt[0]){case 0:case 1:Tt=Mt;break;case 4:return ht.label++,{value:Mt[1],done:!1};case 5:ht.label++,At=Mt[1],Mt=[0];continue;case 7:Mt=ht.ops.pop(),ht.trys.pop();continue;default:if(Tt=ht.trys,!(Tt=Tt.length>0&&Tt[Tt.length-1])&&(Mt[0]===6||Mt[0]===2)){ht=0;continue}if(Mt[0]===3&&(!Tt||Mt[1]>Tt[0]&&Mt[1]<Tt[3])){ht.label=Mt[1];break}if(Mt[0]===6&&ht.label<Tt[1]){ht.label=Tt[1],Tt=Mt;break}if(Tt&&ht.label<Tt[2]){ht.label=Tt[2],ht.ops.push(Mt);break}Tt[2]&&ht.ops.pop(),ht.trys.pop();continue}Mt=bt.call(tt,ht)}catch(Et){Mt=[6,Et],At=0}finally{St=Tt=0}if(Mt[0]&5)throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.QuickCreate=void 0;var dt=st("./node_modules/powerbi-models/dist/models.js"),mt=st("./src/embed.ts"),vt=function(tt){lt(bt,tt);function bt(ht,St,At,Tt,ft){var _t=tt.call(this,ht,St,At,void 0,Tt,ft)||this;return ht.router.post("/reports/".concat(_t.config.uniqueId,"/eventHooks/:eventName"),function(Rt,Mt){return nt(_t,void 0,void 0,function(){var Et,kt;return gt(this,function(at){switch(at.label){case 0:switch(Et=Rt.params.eventName,Et){case"newAccessToken":return[3,1]}return[3,3];case 1:return Rt.body=Rt.body||{},Rt.body.report=this,[4,ht.invokeSDKHook((kt=this.eventHooks)===null||kt===void 0?void 0:kt.accessTokenProvider,Rt,Mt)];case 2:return at.sent(),[3,4];case 3:return[3,4];case 4:return[2]}})})}),_t}return bt.prototype.getId=function(){return null},bt.prototype.validate=function(ht){return(0,dt.validateQuickCreate)(ht)},bt.prototype.configChanged=function(ht){ht||(this.createConfig=this.config)},bt.prototype.getDefaultEmbedUrlEndpoint=function(){return"quickCreate"},bt.prototype.create=function(){var ht;return nt(this,void 0,void 0,function(){var St,At,Tt,ft;return gt(this,function(_t){switch(_t.label){case 0:if(St=(0,dt.validateQuickCreate)(this.createConfig),St)throw St;_t.label=1;case 1:return _t.trys.push([1,3,,4]),At={uid:this.config.uniqueId,sdkSessionId:this.service.getSdkSessionId()},!((ht=this.eventHooks)===null||ht===void 0)&&ht.accessTokenProvider&&(At.tokenProviderSupplied=!0),[4,this.service.hpm.post("/quickcreate",this.createConfig,At,this.iframe.contentWindow)];case 2:return Tt=_t.sent(),[2,Tt.body];case 3:throw ft=_t.sent(),ft.body;case 4:return[2]}})})},bt}(mt.Embed);ot.QuickCreate=vt},"./src/report.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var Tt=function(ft,_t){return Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Mt){Rt.__proto__=Mt}||function(Rt,Mt){for(var Et in Mt)Object.prototype.hasOwnProperty.call(Mt,Et)&&(Rt[Et]=Mt[Et])},Tt(ft,_t)};return function(ft,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Class extends value "+String(_t)+" is not a constructor or null");Tt(ft,_t);function Rt(){this.constructor=ft}ft.prototype=_t===null?Object.create(_t):(Rt.prototype=_t.prototype,new Rt)}}(),nt=this&&this.__awaiter||function(Tt,ft,_t,Rt){function Mt(Et){return Et instanceof _t?Et:new _t(function(kt){kt(Et)})}return new(_t||(_t=Promise))(function(Et,kt){function at($){try{b(Rt.next($))}catch(_e){kt(_e)}}function s($){try{b(Rt.throw($))}catch(_e){kt(_e)}}function b($){$.done?Et($.value):Mt($.value).then(at,s)}b((Rt=Rt.apply(Tt,ft||[])).next())})},gt=this&&this.__generator||function(Tt,ft){var _t={label:0,sent:function(){if(Et[0]&1)throw Et[1];return Et[1]},trys:[],ops:[]},Rt,Mt,Et,kt;return kt={next:at(0),throw:at(1),return:at(2)},typeof Symbol=="function"&&(kt[Symbol.iterator]=function(){return this}),kt;function at(b){return function($){return s([b,$])}}function s(b){if(Rt)throw new TypeError("Generator is already executing.");for(;_t;)try{if(Rt=1,Mt&&(Et=b[0]&2?Mt.return:b[0]?Mt.throw||((Et=Mt.return)&&Et.call(Mt),0):Mt.next)&&!(Et=Et.call(Mt,b[1])).done)return Et;switch(Mt=0,Et&&(b=[b[0]&2,Et.value]),b[0]){case 0:case 1:Et=b;break;case 4:return _t.label++,{value:b[1],done:!1};case 5:_t.label++,Mt=b[1],b=[0];continue;case 7:b=_t.ops.pop(),_t.trys.pop();continue;default:if(Et=_t.trys,!(Et=Et.length>0&&Et[Et.length-1])&&(b[0]===6||b[0]===2)){_t=0;continue}if(b[0]===3&&(!Et||b[1]>Et[0]&&b[1]<Et[3])){_t.label=b[1];break}if(b[0]===6&&_t.label<Et[1]){_t.label=Et[1],Et=b;break}if(Et&&_t.label<Et[2]){_t.label=Et[2],_t.ops.push(b);break}Et[2]&&_t.ops.pop(),_t.trys.pop();continue}b=ft.call(Tt,_t)}catch($){b=[6,$],Mt=0}finally{Rt=Et=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},dt=this&&this.__spreadArray||function(Tt,ft,_t){if(_t||arguments.length===2)for(var Rt=0,Mt=ft.length,Et;Rt<Mt;Rt++)(Et||!(Rt in ft))&&(Et||(Et=Array.prototype.slice.call(ft,0,Rt)),Et[Rt]=ft[Rt]);return Tt.concat(Et||Array.prototype.slice.call(ft))};Object.defineProperty(ot,"__esModule",{value:!0}),ot.Report=void 0;var mt=st("./node_modules/powerbi-models/dist/models.js"),vt=st("./src/embed.ts"),tt=st("./src/util.ts"),bt=st("./src/errors.ts"),ht=st("./src/page.ts"),St=st("./src/bookmarksManager.ts"),At=function(Tt){lt(ft,Tt);function ft(_t,Rt,Mt,Et,kt,at){var s=this,b=Mt;return s=Tt.call(this,_t,Rt,b,at,Et,kt)||this,s.loadPath="/report/load",s.phasedLoadPath="/report/prepare",Array.prototype.push.apply(s.allowedEvents,ft.allowedEvents),s.bookmarksManager=new St.BookmarksManager(_t,b,s.iframe),_t.router.post("/reports/".concat(s.config.uniqueId,"/eventHooks/:eventName"),function($,_e){return nt(s,void 0,void 0,function(){var it,pt,yt;return gt(this,function(ct){switch(ct.label){case 0:switch(it=$.params.eventName,it){case"preQuery":return[3,1];case"newAccessToken":return[3,3]}return[3,5];case 1:return $.body=$.body||{},$.body.report=this,[4,_t.invokeSDKHook((pt=this.eventHooks)===null||pt===void 0?void 0:pt.applicationContextProvider,$,_e)];case 2:return ct.sent(),[3,6];case 3:return $.body=$.body||{},$.body.report=this,[4,_t.invokeSDKHook((yt=this.eventHooks)===null||yt===void 0?void 0:yt.accessTokenProvider,$,_e)];case 4:return ct.sent(),[3,6];case 5:return[3,6];case 6:return[2]}})})}),s}return ft.findIdFromEmbedUrl=function(_t){var Rt=/reportId="?([^&]+)"?/,Mt=_t.match(Rt),Et;return Mt&&(Et=Mt[1]),Et},ft.prototype.render=function(_t){return nt(this,void 0,void 0,function(){var Rt,Mt;return gt(this,function(Et){switch(Et.label){case 0:return Et.trys.push([0,2,,3]),[4,this.service.hpm.post("/report/render",_t,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return Rt=Et.sent(),[2,Rt.body];case 2:throw Mt=Et.sent(),Mt.body;case 3:return[2]}})})},ft.prototype.addPage=function(_t){return nt(this,void 0,void 0,function(){var Rt,Mt,Et,kt;return gt(this,function(at){switch(at.label){case 0:Rt={displayName:_t},at.label=1;case 1:return at.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/addPage",Rt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Mt=at.sent(),Et=Mt.body,[2,new ht.Page(this,Et.name,Et.displayName,Et.isActive,Et.visibility,Et.defaultSize,Et.defaultDisplayOption)];case 3:throw kt=at.sent(),kt.body;case 4:return[2]}})})},ft.prototype.deletePage=function(_t){return nt(this,void 0,void 0,function(){var Rt,Mt;return gt(this,function(Et){switch(Et.label){case 0:return Et.trys.push([0,2,,3]),[4,this.service.hpm.delete("/report/pages/".concat(_t),{},{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return Rt=Et.sent(),[2,Rt.body];case 2:throw Mt=Et.sent(),Mt.body;case 3:return[2]}})})},ft.prototype.renamePage=function(_t,Rt){return nt(this,void 0,void 0,function(){var Mt,Et,kt;return gt(this,function(at){switch(at.label){case 0:Mt={name:_t,displayName:Rt},at.label=1;case 1:return at.trys.push([1,3,,4]),[4,this.service.hpm.put("/report/pages/".concat(_t,"/name"),Mt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Et=at.sent(),[2,Et.body];case 3:throw kt=at.sent(),kt.body;case 4:return[2]}})})},ft.prototype.getFilters=function(){return nt(this,void 0,void 0,function(){var _t,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/filters",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return _t=Mt.sent(),[2,_t.body];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},ft.prototype.updateFilters=function(_t,Rt){return nt(this,void 0,void 0,function(){var Mt,Et;return gt(this,function(kt){switch(kt.label){case 0:Mt={filtersOperation:_t,filters:Rt},kt.label=1;case 1:return kt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/filters",Mt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,kt.sent()];case 3:throw Et=kt.sent(),Et.body;case 4:return[2]}})})},ft.prototype.removeFilters=function(){return nt(this,void 0,void 0,function(){return gt(this,function(_t){return(0,tt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:[2,this.updateFilters(mt.FiltersOperations.RemoveAll)]})})},ft.prototype.setFilters=function(_t){return nt(this,void 0,void 0,function(){var Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.put("/report/filters",_t,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,Mt.sent()];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},ft.prototype.getId=function(){var _t=this.config,Rt=_t.id||this.element.getAttribute(ft.reportIdAttribute)||ft.findIdFromEmbedUrl(_t.embedUrl);if(typeof Rt!="string"||Rt.length===0)throw new Error("Report id is required, but it was not found. You must provide an id either as part of embed configuration or as attribute '".concat(ft.reportIdAttribute,"'."));return Rt},ft.prototype.getPages=function(){return nt(this,void 0,void 0,function(){var _t,Rt,Mt=this;return gt(this,function(Et){switch(Et.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Et.label=1;case 1:return Et.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/pages",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return _t=Et.sent(),[2,_t.body.map(function(kt){return new ht.Page(Mt,kt.name,kt.displayName,kt.isActive,kt.visibility,kt.defaultSize,kt.defaultDisplayOption,kt.mobileSize,kt.background,kt.wallpaper)})];case 3:throw Rt=Et.sent(),Rt.body;case 4:return[2]}})})},ft.prototype.getPageByName=function(_t){return nt(this,void 0,void 0,function(){var Rt,Mt,Et;return gt(this,function(kt){switch(kt.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];kt.label=1;case 1:return kt.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/pages",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Rt=kt.sent(),Mt=Rt.body.find(function(at){return at.name===_t}),Mt?[2,new ht.Page(this,Mt.name,Mt.displayName,Mt.isActive,Mt.visibility,Mt.defaultSize,Mt.defaultDisplayOption,Mt.mobileSize,Mt.background,Mt.wallpaper)]:[2,Promise.reject(mt.CommonErrorCodes.NotFound)];case 3:throw Et=kt.sent(),Et.body;case 4:return[2]}})})},ft.prototype.getActivePage=function(){return nt(this,void 0,void 0,function(){var _t,Rt,Mt;return gt(this,function(Et){switch(Et.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Et.label=1;case 1:return Et.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/pages",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return _t=Et.sent(),Rt=_t.body.find(function(kt){return kt.isActive}),[2,new ht.Page(this,Rt.name,Rt.displayName,Rt.isActive,Rt.visibility,Rt.defaultSize,Rt.defaultDisplayOption,Rt.mobileSize,Rt.background,Rt.wallpaper)];case 3:throw Mt=Et.sent(),Mt.body;case 4:return[2]}})})},ft.prototype.page=function(_t,Rt,Mt,Et){return new ht.Page(this,_t,Rt,Mt,Et)},ft.prototype.print=function(){return nt(this,void 0,void 0,function(){var _t,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/print",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return _t=Mt.sent(),[2,_t.body];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},ft.prototype.setPage=function(_t){return nt(this,void 0,void 0,function(){var Rt,Mt;return gt(this,function(Et){switch(Et.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Rt={name:_t,displayName:null,isActive:!0},Et.label=1;case 1:return Et.trys.push([1,3,,4]),[4,this.service.hpm.put("/report/pages/active",Rt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,Et.sent()];case 3:throw Mt=Et.sent(),Mt.body;case 4:return[2]}})})},ft.prototype.updateSettings=function(_t){var Rt,Mt;return nt(this,void 0,void 0,function(){var Et,kt,at,s,b=this;return gt(this,function($){switch($.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl)&&_t.customLayout!=null)return[2,Promise.reject(bt.APINotSupportedForRDLError)];$.label=1;case 1:return $.trys.push([1,3,,4]),[4,this.service.hpm.patch("/report/settings",_t,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Et=$.sent(),kt=_t==null?void 0:_t.extensions,this.commands=(Rt=kt==null?void 0:kt.commands)!==null&&Rt!==void 0?Rt:this.commands,this.groups=(Mt=kt==null?void 0:kt.groups)!==null&&Mt!==void 0?Mt:this.groups,at=_t==null?void 0:_t.extensions,Array.isArray(at)&&(this.commands=[],at.map(function(_e){_e!=null&&_e.command&&b.commands.push(_e.command)})),[2,Et];case 3:throw s=$.sent(),s.body;case 4:return[2]}})})},ft.prototype.validate=function(_t){return(0,tt.isRDLEmbed)(this.config.embedUrl)?(0,mt.validatePaginatedReportLoad)(_t):(0,mt.validateReportLoad)(_t)},ft.prototype.configChanged=function(_t){var Rt=this.config;this.isMobileSettings(Rt.settings)&&(Rt.embedUrl=(0,tt.addParamToUrl)(Rt.embedUrl,"isMobile","true"));var Mt=this.element.getAttribute(ft.filterPaneEnabledAttribute),Et=this.element.getAttribute(ft.navContentPaneEnabledAttribute),kt={filterPaneEnabled:Mt==null?void 0:Mt!=="false",navContentPaneEnabled:Et==null?void 0:Et!=="false"};this.config.settings=(0,tt.assign)({},kt,Rt.settings),!_t&&(Rt.id=this.getId())},ft.prototype.getDefaultEmbedUrlEndpoint=function(){return"reportEmbed"},ft.prototype.switchMode=function(_t){return nt(this,void 0,void 0,function(){var Rt,Mt,Et,kt;return gt(this,function(at){switch(at.label){case 0:typeof _t=="string"?Rt=_t:Rt=this.viewModeToString(_t),Mt="/report/switchMode/"+Rt,at.label=1;case 1:return at.trys.push([1,3,,4]),[4,this.service.hpm.post(Mt,null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Et=at.sent(),[2,Et.body];case 3:throw kt=at.sent(),kt.body;case 4:return[2]}})})},ft.prototype.refresh=function(){return nt(this,void 0,void 0,function(){var _t,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/refresh",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return _t=Mt.sent(),[2,_t.body];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},ft.prototype.isSaved=function(){return nt(this,void 0,void 0,function(){return gt(this,function(_t){switch(_t.label){case 0:return(0,tt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:[4,(0,tt.isSavedInternal)(this.service.hpm,this.config.uniqueId,this.iframe.contentWindow)];case 1:return[2,_t.sent()]}})})},ft.prototype.applyTheme=function(_t){return nt(this,void 0,void 0,function(){return gt(this,function(Rt){switch(Rt.label){case 0:return(0,tt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:[4,this.applyThemeInternal(_t)];case 1:return[2,Rt.sent()]}})})},ft.prototype.resetTheme=function(){return nt(this,void 0,void 0,function(){return gt(this,function(_t){switch(_t.label){case 0:return(0,tt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:[4,this.applyThemeInternal({})];case 1:return[2,_t.sent()]}})})},ft.prototype.getTheme=function(){return nt(this,void 0,void 0,function(){var _t,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/theme",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return _t=Mt.sent(),[2,_t.body];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},ft.prototype.resetPersistentFilters=function(){return nt(this,void 0,void 0,function(){var _t;return gt(this,function(Rt){switch(Rt.label){case 0:return Rt.trys.push([0,2,,3]),[4,this.service.hpm.delete("/report/userState",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return[2,Rt.sent()];case 2:throw _t=Rt.sent(),_t.body;case 3:return[2]}})})},ft.prototype.savePersistentFilters=function(){return nt(this,void 0,void 0,function(){var _t;return gt(this,function(Rt){switch(Rt.label){case 0:return Rt.trys.push([0,2,,3]),[4,this.service.hpm.post("/report/userState",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return[2,Rt.sent()];case 2:throw _t=Rt.sent(),_t.body;case 3:return[2]}})})},ft.prototype.arePersistentFiltersApplied=function(){return nt(this,void 0,void 0,function(){var _t,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:return Mt.trys.push([0,2,,3]),[4,this.service.hpm.get("/report/isUserStateApplied",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return _t=Mt.sent(),[2,_t.body];case 2:throw Rt=Mt.sent(),Rt.body;case 3:return[2]}})})},ft.prototype.removeContextMenuCommand=function(_t,Rt){return nt(this,void 0,void 0,function(){var Mt,Et,kt;return gt(this,function(at){switch(at.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];if(Mt=JSON.parse(JSON.stringify(this.commands)),Et=this.findCommandMenuIndex("visualContextMenu",Mt,_t,Rt),Et===-1)throw mt.CommonErrorCodes.NotFound;return delete Mt[Et].extend.visualContextMenu,kt={extensions:{commands:Mt,groups:this.groups}},[4,this.updateSettings(kt)];case 1:return[2,at.sent()]}})})},ft.prototype.addContextMenuCommand=function(_t,Rt,Mt,Et,kt,at,s){return Mt===void 0&&(Mt=Rt),Et===void 0&&(Et=mt.MenuLocation.Bottom),kt===void 0&&(kt=void 0),s===void 0&&(s=void 0),nt(this,void 0,void 0,function(){var b,$;return gt(this,function(_e){switch(_e.label){case 0:return(0,tt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:(b=this.createMenuCommand("visualContextMenu",_t,Rt,Mt,Et,kt,at,s),$={extensions:{commands:b,groups:this.groups}},[4,this.updateSettings($)]);case 1:return[2,_e.sent()]}})})},ft.prototype.removeOptionsMenuCommand=function(_t,Rt){return nt(this,void 0,void 0,function(){var Mt,Et,kt;return gt(this,function(at){switch(at.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];if(Mt=JSON.parse(JSON.stringify(this.commands)),Et=this.findCommandMenuIndex("visualOptionsMenu",Mt,_t,Rt),Et===-1)throw mt.CommonErrorCodes.NotFound;return delete Mt[Et].extend.visualOptionsMenu,delete Mt[Et].icon,kt={extensions:{commands:Mt,groups:this.groups}},[4,this.updateSettings(kt)];case 1:return[2,at.sent()]}})})},ft.prototype.addOptionsMenuCommand=function(_t,Rt,Mt,Et,kt,at,s,b){return Mt===void 0&&(Mt=Rt),Et===void 0&&(Et=mt.MenuLocation.Bottom),kt===void 0&&(kt=void 0),at===void 0&&(at=void 0),s===void 0&&(s=void 0),b===void 0&&(b=void 0),nt(this,void 0,void 0,function(){var $,_e;return gt(this,function(it){switch(it.label){case 0:return(0,tt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:($=this.createMenuCommand("visualOptionsMenu",_t,Rt,Mt,Et,kt,at,s,b),_e={extensions:{commands:$,groups:this.groups}},[4,this.updateSettings(_e)]);case 1:return[2,it.sent()]}})})},ft.prototype.setVisualDisplayState=function(_t,Rt,Mt){return nt(this,void 0,void 0,function(){var Et,kt;return gt(this,function(at){switch(at.label){case 0:return[4,this.validateVisual(_t,Rt)];case 1:return at.sent(),Et={displayState:{mode:Mt}},kt=this.buildLayoutSettingsObject(_t,Rt,Et),[2,this.updateSettings(kt)]}})})},ft.prototype.resizeVisual=function(_t,Rt,Mt,Et){return nt(this,void 0,void 0,function(){var kt,at;return gt(this,function(s){switch(s.label){case 0:return[4,this.validateVisual(_t,Rt)];case 1:return s.sent(),kt={width:Mt,height:Et},at=this.buildLayoutSettingsObject(_t,Rt,kt),[2,this.updateSettings(at)]}})})},ft.prototype.resizeActivePage=function(_t,Rt,Mt){return nt(this,void 0,void 0,function(){var Et,kt;return gt(this,function(at){return Et={type:_t,width:Rt,height:Mt},kt={layoutType:mt.LayoutType.Custom,customLayout:{pageSize:Et}},[2,this.updateSettings(kt)]})})},ft.prototype.moveVisual=function(_t,Rt,Mt,Et,kt){return nt(this,void 0,void 0,function(){var at,s;return gt(this,function(b){switch(b.label){case 0:return[4,this.validateVisual(_t,Rt)];case 1:return b.sent(),at={x:Mt,y:Et,z:kt},s=this.buildLayoutSettingsObject(_t,Rt,at),[2,this.updateSettings(s)]}})})},ft.prototype.switchLayout=function(_t){return nt(this,void 0,void 0,function(){var Rt,Mt,Et,kt;return gt(this,function(at){switch(at.label){case 0:if(Rt=this.isMobileSettings({layoutType:this.initialLayoutType}),Mt=this.isMobileSettings({layoutType:_t}),Rt!==Mt)throw"Switching between mobile and desktop layouts is not supported. Please reset the embed container and re-embed with required layout.";return Et={layoutType:_t},[4,this.updateSettings(Et)];case 1:return kt=at.sent(),this.initialLayoutType=_t,[2,kt]}})})},ft.prototype.createMenuCommand=function(_t,Rt,Mt,Et,kt,at,s,b,$){var _e={name:Rt,title:Mt,extend:{}};if(_e.extend[_t]={title:Et,menuLocation:kt},_t==="visualOptionsMenu"&&(_e.icon=$),b){var it=_e.extend[_t];delete it.menuLocation;var pt=_e.extend[_t];pt.groupName=b}return at&&(_e.selector={$schema:"http://powerbi.com/product/schema#visualSelector",visualName:at}),s&&(_e.selector={$schema:"http://powerbi.com/product/schema#visualTypeSelector",visualType:s}),dt(dt([],this.commands,!0),[_e],!1)},ft.prototype.findCommandMenuIndex=function(_t,Rt,Mt,Et){var kt=-1;return Rt.some(function(at,s){return at.name===Mt&&at.extend[_t]&&at.extend[_t].title===Et?(kt=s,!0):!1}),kt},ft.prototype.buildLayoutSettingsObject=function(_t,Rt,Mt){var Et={layoutType:mt.LayoutType.Custom,customLayout:{pagesLayout:{}}};return Et.customLayout.pagesLayout[_t]={visualsLayout:{}},Et.customLayout.pagesLayout[_t].visualsLayout[Rt]=Mt,Et},ft.prototype.validateVisual=function(_t,Rt){return nt(this,void 0,void 0,function(){var Mt;return gt(this,function(Et){switch(Et.label){case 0:return[4,this.getPageByName(_t)];case 1:return Mt=Et.sent(),[4,Mt.getVisualByName(Rt)];case 2:return[2,Et.sent()]}})})},ft.prototype.applyThemeInternal=function(_t){return nt(this,void 0,void 0,function(){var Rt,Mt;return gt(this,function(Et){switch(Et.label){case 0:return Et.trys.push([0,2,,3]),[4,this.service.hpm.put("/report/theme",_t,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return Rt=Et.sent(),[2,Rt.body];case 2:throw Mt=Et.sent(),Mt.body;case 3:return[2]}})})},ft.prototype.viewModeToString=function(_t){var Rt;switch(_t){case mt.ViewMode.Edit:Rt="edit";break;case mt.ViewMode.View:Rt="view";break}return Rt},ft.prototype.isMobileSettings=function(_t){return _t&&(_t.layoutType===mt.LayoutType.MobileLandscape||_t.layoutType===mt.LayoutType.MobilePortrait)},ft.prototype.getZoom=function(){return nt(this,void 0,void 0,function(){var _t,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:return Mt.trys.push([0,2,,3]),[4,this.service.hpm.get("/report/zoom",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return _t=Mt.sent(),[2,_t.body];case 2:throw Rt=Mt.sent(),Rt.body;case 3:return[2]}})})},ft.prototype.setZoom=function(_t){return nt(this,void 0,void 0,function(){return gt(this,function(Rt){switch(Rt.label){case 0:return[4,this.updateSettings({zoomLevel:_t})];case 1:return Rt.sent(),[2]}})})},ft.prototype.closeAllOverlays=function(){return nt(this,void 0,void 0,function(){var _t,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/closeAllOverlays",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return _t=Mt.sent(),[2,_t.body];case 3:return Rt=Mt.sent(),[2,Promise.reject(Rt)];case 4:return[2]}})})},ft.prototype.clearSelectedVisuals=function(_t){return nt(this,void 0,void 0,function(){var Rt,Mt;return gt(this,function(Et){switch(Et.label){case 0:if(_t=_t===!0,(0,tt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Et.label=1;case 1:return Et.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/clearSelectedVisuals/".concat(_t.toString()),null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Rt=Et.sent(),[2,Rt.body];case 3:return Mt=Et.sent(),[2,Promise.reject(Mt)];case 4:return[2]}})})},ft.allowedEvents=["filtersApplied","pageChanged","commandTriggered","swipeStart","swipeEnd","bookmarkApplied","dataHyperlinkClicked","visualRendered","visualClicked","selectionChanged","renderingStarted","blur"],ft.reportIdAttribute="powerbi-report-id",ft.filterPaneEnabledAttribute="powerbi-settings-filter-pane-enabled",ft.navContentPaneEnabledAttribute="powerbi-settings-nav-content-pane-enabled",ft.typeAttribute="powerbi-type",ft.type="Report",ft}(vt.Embed);ot.Report=At},"./src/service.ts":function(et,ot,st){var lt=this&&this.__assign||function(){return lt=Object.assign||function(Et){for(var kt,at=1,s=arguments.length;at<s;at++){kt=arguments[at];for(var b in kt)Object.prototype.hasOwnProperty.call(kt,b)&&(Et[b]=kt[b])}return Et},lt.apply(this,arguments)},nt=this&&this.__awaiter||function(Et,kt,at,s){function b($){return $ instanceof at?$:new at(function(_e){_e($)})}return new(at||(at=Promise))(function($,_e){function it(ct){try{yt(s.next(ct))}catch(_){_e(_)}}function pt(ct){try{yt(s.throw(ct))}catch(_){_e(_)}}function yt(ct){ct.done?$(ct.value):b(ct.value).then(it,pt)}yt((s=s.apply(Et,kt||[])).next())})},gt=this&&this.__generator||function(Et,kt){var at={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},s,b,$,_e;return _e={next:it(0),throw:it(1),return:it(2)},typeof Symbol=="function"&&(_e[Symbol.iterator]=function(){return this}),_e;function it(yt){return function(ct){return pt([yt,ct])}}function pt(yt){if(s)throw new TypeError("Generator is already executing.");for(;at;)try{if(s=1,b&&($=yt[0]&2?b.return:yt[0]?b.throw||(($=b.return)&&$.call(b),0):b.next)&&!($=$.call(b,yt[1])).done)return $;switch(b=0,$&&(yt=[yt[0]&2,$.value]),yt[0]){case 0:case 1:$=yt;break;case 4:return at.label++,{value:yt[1],done:!1};case 5:at.label++,b=yt[1],yt=[0];continue;case 7:yt=at.ops.pop(),at.trys.pop();continue;default:if($=at.trys,!($=$.length>0&&$[$.length-1])&&(yt[0]===6||yt[0]===2)){at=0;continue}if(yt[0]===3&&(!$||yt[1]>$[0]&&yt[1]<$[3])){at.label=yt[1];break}if(yt[0]===6&&at.label<$[1]){at.label=$[1],$=yt;break}if($&&at.label<$[2]){at.label=$[2],at.ops.push(yt);break}$[2]&&at.ops.pop(),at.trys.pop();continue}yt=kt.call(Et,at)}catch(ct){yt=[6,ct],b=0}finally{s=$=0}if(yt[0]&5)throw yt[1];return{value:yt[0]?yt[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.Service=void 0;var dt=st("./src/embed.ts"),mt=st("./src/report.ts"),vt=st("./src/create.ts"),tt=st("./src/dashboard.ts"),bt=st("./src/tile.ts"),ht=st("./src/page.ts"),St=st("./src/qna.ts"),At=st("./src/visual.ts"),Tt=st("./src/util.ts"),ft=st("./src/quickCreate.ts"),_t=st("./src/config.ts"),Rt=st("./src/errors.ts"),Mt=function(){function Et(kt,at,s,b){b===void 0&&(b={});var $=this;this.registeredComponents={},this.wpmp=at(b.wpmpName,b.logMessages),this.hpm=kt(this.wpmp,null,b.version,b.type,b.sdkWrapperVersion),this.router=s(this.wpmp),this.uniqueSessionId=Tt.generateUUID(),this.router.post("/reports/:uniqueId/events/:eventName",function(_e,it){var pt={type:"report",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/reports/:uniqueId/pages/:pageName/events/:eventName",function(_e,it){var pt={type:"report",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/reports/:uniqueId/pages/:pageName/visuals/:visualName/events/:eventName",function(_e,it){var pt={type:"report",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/dashboards/:uniqueId/events/:eventName",function(_e,it){var pt={type:"dashboard",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/tile/:uniqueId/events/:eventName",function(_e,it){var pt={type:"tile",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/qna/:uniqueId/events/:eventName",function(_e,it){var pt={type:"qna",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/ready/:uniqueId",function(_e,it){var pt={type:"report",id:_e.params.uniqueId,name:"ready",value:_e.body};$.handleEvent(pt)}),this.embeds=[],this.config=Tt.assign({},Et.defaultConfig,b),this.config.autoEmbedOnContentLoaded&&this.enableAutoEmbed()}return Et.prototype.createReport=function(kt,at){at.type="create";var s=kt,b=new vt.Create(this,s,at);return s.powerBiEmbed=b,this.addOrOverwriteEmbed(b,kt),b},Et.prototype.quickCreate=function(kt,at){at.type="quickCreate";var s=kt,b=new ft.QuickCreate(this,s,at);return s.powerBiEmbed=b,this.addOrOverwriteEmbed(b,kt),b},Et.prototype.init=function(kt,at){var s=this;at===void 0&&(at=void 0),kt=kt&&kt instanceof HTMLElement?kt:document.body;var b=Array.prototype.slice.call(kt.querySelectorAll("[".concat(dt.Embed.embedUrlAttribute,"]")));return b.map(function($){return s.embed($,at)})},Et.prototype.embed=function(kt,at){return at===void 0&&(at={}),this.embedInternal(kt,at)},Et.prototype.load=function(kt,at){return at===void 0&&(at={}),this.embedInternal(kt,at,!0,!1)},Et.prototype.bootstrap=function(kt,at){return this.embedInternal(kt,at,!1,!0)},Et.prototype.embedInternal=function(kt,at,s,b){at===void 0&&(at={});var $,_e=kt;if(_e.powerBiEmbed){if(b)throw new Error("Attempted to bootstrap element ".concat(kt.outerHTML,", but the element is already a powerbi element."));$=this.embedExisting(_e,at,s)}else $=this.embedNew(_e,at,s,b);return $},Et.prototype.getNumberOfComponents=function(){return this.embeds?this.embeds.length:0},Et.prototype.getSdkSessionId=function(){return this.uniqueSessionId},Et.prototype.getSDKVersion=function(){return _t.default.version},Et.prototype.embedNew=function(kt,at,s,b){var $=at.type||kt.getAttribute(dt.Embed.typeAttribute);if(!$){var _e=lt(lt({},at),{accessToken:""});throw new Error("Attempted to embed using config ".concat(JSON.stringify(_e)," on element ").concat(kt.outerHTML,", but could not determine what type of component to embed. You must specify a type in the configuration or as an attribute such as '").concat(dt.Embed.typeAttribute,'="').concat(mt.Report.type.toLowerCase(),`"'.`))}at.type=$;var it=this.createEmbedComponent($,kt,at,s,b);return kt.powerBiEmbed=it,this.addOrOverwriteEmbed(it,kt),it},Et.prototype.createEmbedComponent=function(kt,at,s,b,$){var _e=Tt.find(function(pt){return kt===pt.type.toLowerCase()},Et.components);if(_e)return new _e(this,at,s,b,$);var it=Tt.find(function(pt){return kt.toLowerCase()===pt.toLowerCase()},Object.keys(this.registeredComponents));if(!it)throw new Error("Attempted to embed component of type: ".concat(kt," but did not find any matching component.  Please verify the type you specified is intended."));return this.registeredComponents[it](this,at,s,b,$)},Et.prototype.embedExisting=function(kt,at,s){var b=Tt.find(function(it){return it.element===kt},this.embeds);if(!b){var $=lt(lt({},at),{accessToken:""});throw new Error("Attempted to embed using config ".concat(JSON.stringify($)," on element ").concat(kt.outerHTML," which already has embedded component associated, but could not find the existing component in the list of active components. This could indicate the embeds list is out of sync with the DOM, or the component is referencing the incorrect HTML element."))}if(at.type&&at.type.toLowerCase()==="qna")return this.embedNew(kt,at);if(typeof at.type=="string"&&at.type!==b.config.type){if(at.type==="report"&&Tt.isCreate(b.config.type)){var _e=new mt.Report(this,kt,at,!1,!1,kt.powerBiEmbed.iframe);return b.populateConfig(at,!1),_e.load(),kt.powerBiEmbed=_e,this.addOrOverwriteEmbed(b,kt),_e}var $=lt(lt({},at),{accessToken:""});throw new Error("Embedding on an existing element with a different type than the previous embed object is not supported.  Attempted to embed using config ".concat(JSON.stringify($)," on element ").concat(kt.outerHTML,", but the existing element contains an embed of type: ").concat(this.config.type," which does not match the new type: ").concat(at.type))}return b.populateConfig(at,!1),b.load(s),b},Et.prototype.enableAutoEmbed=function(){var kt=this;window.addEventListener("DOMContentLoaded",function(at){return kt.init(document.body)},!1)},Et.prototype.get=function(kt){var at=kt;if(!at.powerBiEmbed)throw new Error("You attempted to get an instance of powerbi component associated with element: ".concat(kt.outerHTML," but there was no associated instance."));return at.powerBiEmbed},Et.prototype.find=function(kt){return Tt.find(function(at){return at.config.uniqueId===kt},this.embeds)},Et.prototype.addOrOverwriteEmbed=function(kt,at){this.embeds=this.embeds.filter(function(s){return s.element!==at}),this.embeds.push(kt)},Et.prototype.reset=function(kt){var at=kt;if(at.powerBiEmbed){var s=at.powerBiEmbed;s.frontLoadHandler&&s.element.removeEventListener("ready",s.frontLoadHandler,!1),s.allowedEvents.forEach(function($){s.off($)}),Tt.remove(function($){return $===at.powerBiEmbed},this.embeds),delete at.powerBiEmbed;var b=kt.querySelector("iframe");b&&(b.remove!==void 0?b.remove():b.parentElement.removeChild(b))}},Et.prototype.handleTileEvents=function(kt){kt.type==="tile"&&this.handleEvent(kt)},Et.prototype.invokeSDKHook=function(kt,at,s){return nt(this,void 0,void 0,function(){var b,$;return gt(this,function(_e){switch(_e.label){case 0:if(!kt)return s.send(404,null),[2];_e.label=1;case 1:return _e.trys.push([1,3,,4]),[4,kt(at.body)];case 2:return b=_e.sent(),s.send(200,b),[3,4];case 3:return $=_e.sent(),s.send(400,null),console.error($),[3,4];case 4:return[2]}})})},Et.prototype.handleEvent=function(kt){var at=Tt.find(function(_e){return _e.config.uniqueId===kt.id},this.embeds);if(at){var s=kt.value;if(kt.name==="pageChanged"){var b="newPage",$=s[b];if(!$)throw new Error("Page model not found at 'event.value.".concat(b,"'."));s[b]=new ht.Page(at,$.name,$.displayName,!0)}Tt.raiseCustomEvent(at.element,kt.name,s)}},Et.prototype.preload=function(kt,at){if(!Tt.validateEmbedUrl(kt.embedUrl))throw new Error(Rt.invalidEmbedUrlErrorMessage);var s=document.createElement("iframe");s.setAttribute("style","display:none;"),s.setAttribute("src",kt.embedUrl),s.setAttribute("scrolling","no"),s.setAttribute("allowfullscreen","false");var b=at;return b||(b=document.getElementsByTagName("body")[0]),b.appendChild(s),s.onload=function(){Tt.raiseCustomEvent(s,"preloaded",{})},s},Et.prototype.setSdkInfo=function(kt,at){this.hpm.defaultHeaders["x-sdk-type"]=kt,this.hpm.defaultHeaders["x-sdk-wrapper-version"]=at},Et.prototype.register=function(kt,at,s){var b=this;if(Tt.find(function($){return kt.toLowerCase()===$.type.toLowerCase()},Et.components))throw new Error("The component name is reserved. Cannot register a component with this name.");if(Tt.find(function($){return kt.toLowerCase()===$.toLowerCase()},Object.keys(this.registeredComponents)))throw new Error("A component with this type is already registered.");this.registeredComponents[kt]=at,s.forEach(function($){if(!$.includes(":uniqueId")||!$.includes(":eventName"))throw new Error("Invalid router event URL");b.router.post($,function(_e,it){var pt={type:kt,id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};b.handleEvent(pt)})})},Et.components=[bt.Tile,mt.Report,tt.Dashboard,St.Qna,At.Visual],Et.defaultConfig={autoEmbedOnContentLoaded:!1,onError:function(){for(var kt=[],at=0;at<arguments.length;at++)kt[at]=arguments[at];return console.log(kt[0],kt.slice(1))}},Et}();ot.Service=Mt},"./src/tile.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var mt=function(vt,tt){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var St in ht)Object.prototype.hasOwnProperty.call(ht,St)&&(bt[St]=ht[St])},mt(vt,tt)};return function(vt,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");mt(vt,tt);function bt(){this.constructor=vt}vt.prototype=tt===null?Object.create(tt):(bt.prototype=tt.prototype,new bt)}}();Object.defineProperty(ot,"__esModule",{value:!0}),ot.Tile=void 0;var nt=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/embed.ts"),dt=function(mt){lt(vt,mt);function vt(tt,bt,ht,St,At){var Tt=this,ft=ht;return Tt=mt.call(this,tt,bt,ft,void 0,St,At)||this,Tt.loadPath="/tile/load",Array.prototype.push.apply(Tt.allowedEvents,vt.allowedEvents),Tt}return vt.prototype.getId=function(){var tt=this.config,bt=tt.id||vt.findIdFromEmbedUrl(this.config.embedUrl);if(typeof bt!="string"||bt.length===0)throw new Error("Tile id is required, but it was not found. You must provide an id either as part of embed configuration.");return bt},vt.prototype.validate=function(tt){var bt=tt;return(0,nt.validateTileLoad)(bt)},vt.prototype.configChanged=function(tt){tt||(this.config.id=this.getId())},vt.prototype.getDefaultEmbedUrlEndpoint=function(){return"tileEmbed"},vt.findIdFromEmbedUrl=function(tt){var bt=/tileId="?([^&]+)"?/,ht=tt.match(bt),St;return ht&&(St=ht[1]),St},vt.type="Tile",vt.allowedEvents=["tileClicked","tileLoaded"],vt}(gt.Embed);ot.Tile=dt},"./src/util.ts":function(et,ot){var st=this&&this.__awaiter||function(s,b,$,_e){function it(pt){return pt instanceof $?pt:new $(function(yt){yt(pt)})}return new($||($=Promise))(function(pt,yt){function ct(Ct){try{rt(_e.next(Ct))}catch(It){yt(It)}}function _(Ct){try{rt(_e.throw(Ct))}catch(It){yt(It)}}function rt(Ct){Ct.done?pt(Ct.value):it(Ct.value).then(ct,_)}rt((_e=_e.apply(s,b||[])).next())})},lt=this&&this.__generator||function(s,b){var $={label:0,sent:function(){if(pt[0]&1)throw pt[1];return pt[1]},trys:[],ops:[]},_e,it,pt,yt;return yt={next:ct(0),throw:ct(1),return:ct(2)},typeof Symbol=="function"&&(yt[Symbol.iterator]=function(){return this}),yt;function ct(rt){return function(Ct){return _([rt,Ct])}}function _(rt){if(_e)throw new TypeError("Generator is already executing.");for(;$;)try{if(_e=1,it&&(pt=rt[0]&2?it.return:rt[0]?it.throw||((pt=it.return)&&pt.call(it),0):it.next)&&!(pt=pt.call(it,rt[1])).done)return pt;switch(it=0,pt&&(rt=[rt[0]&2,pt.value]),rt[0]){case 0:case 1:pt=rt;break;case 4:return $.label++,{value:rt[1],done:!1};case 5:$.label++,it=rt[1],rt=[0];continue;case 7:rt=$.ops.pop(),$.trys.pop();continue;default:if(pt=$.trys,!(pt=pt.length>0&&pt[pt.length-1])&&(rt[0]===6||rt[0]===2)){$=0;continue}if(rt[0]===3&&(!pt||rt[1]>pt[0]&&rt[1]<pt[3])){$.label=rt[1];break}if(rt[0]===6&&$.label<pt[1]){$.label=pt[1],pt=rt;break}if(pt&&$.label<pt[2]){$.label=pt[2],$.ops.push(rt);break}pt[2]&&$.ops.pop(),$.trys.pop();continue}rt=b.call(s,$)}catch(Ct){rt=[6,Ct],it=0}finally{_e=pt=0}if(rt[0]&5)throw rt[1];return{value:rt[0]?rt[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.validateEmbedUrl=ot.isCreate=ot.getTimeDiffInMilliseconds=ot.getRandomValue=ot.autoAuthInEmbedUrl=ot.isRDLEmbed=ot.isSavedInternal=ot.addParamToUrl=ot.generateUUID=ot.createRandomString=ot.assign=ot.remove=ot.find=ot.findIndex=ot.raiseCustomEvent=void 0;var nt=new RegExp(/(.+\.powerbi\.com$)|(.+\.fabric\.microsoft\.com$)|(.+\.analysis\.windows-int\.net$)|(.+\.analysis-df\.windows\.net$)/),gt=new RegExp(/^app\.powerbi\.cn$|^app(\.mil\.|\.high\.|\.)powerbigov\.us$|^app\.powerbi\.eaglex\.ic\.gov$|^app\.powerbi\.microsoft\.scloud$/),dt="https:";function mt(s,b,$){var _e;typeof CustomEvent=="function"?_e=new CustomEvent(b,{detail:$,bubbles:!0,cancelable:!0}):(_e=document.createEvent("CustomEvent"),_e.initCustomEvent(b,!0,!0,$)),s.dispatchEvent(_e)}ot.raiseCustomEvent=mt;function vt(s,b){if(!Array.isArray(b))throw new Error("You attempted to call find with second parameter that was not an array. You passed: ".concat(b));var $;return b.some(function(_e,it){if(s(_e))return $=it,!0}),$}ot.findIndex=vt;function tt(s,b){var $=vt(s,b);return b[$]}ot.find=tt;function bt(s,b){var $=vt(s,b);b.splice($,1)}ot.remove=bt;function ht(){for(var s=[],b=0;b<arguments.length;b++)s[b]=arguments[b];var $=s[0];if($==null)throw new TypeError("Cannot convert undefined or null to object");for(var _e=Object($),it=1;it<arguments.length;it++){var pt=arguments[it];if(pt!=null)for(var yt in pt)pt.hasOwnProperty(yt)&&(_e[yt]=pt[yt])}return _e}ot.assign=ht;function St(){return Mt().toString(36).substring(1)}ot.createRandomString=St;function At(){var s=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(s+=performance.now()),"xxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(b){var $=Mt()%16;return s>>=4,$.toString(16)})}ot.generateUUID=At;function Tt(s,b,$){var _e=s.indexOf("?")>0?"&":"?";return s+=_e+b+"="+$,s}ot.addParamToUrl=Tt;function ft(s,b,$){return st(this,void 0,void 0,function(){var _e,it;return lt(this,function(pt){switch(pt.label){case 0:return pt.trys.push([0,2,,3]),[4,s.get("/report/hasUnsavedChanges",{uid:b},$)];case 1:return _e=pt.sent(),[2,!_e.body];case 2:throw it=pt.sent(),it.body;case 3:return[2]}})})}ot.isSavedInternal=ft;function _t(s){return s&&s.toLowerCase().indexOf("/rdlembed?")>=0}ot.isRDLEmbed=_t;function Rt(s){return s&&decodeURIComponent(s).toLowerCase().indexOf("autoauth=true")>=0}ot.autoAuthInEmbedUrl=Rt;function Mt(){var s=window.crypto||window.msCrypto,b=new Uint32Array(1);return s.getRandomValues(b),b[0]}ot.getRandomValue=Mt;function Et(s,b){return Math.abs(s.getTime()-b.getTime())}ot.getTimeDiffInMilliseconds=Et;function kt(s){return s==="create"||s==="quickcreate"}ot.isCreate=kt;function at(s){if(s){var b=void 0;try{b=new URL(s.toLowerCase())}catch{return!1}return b.protocol===dt&&(nt.test(b.hostname)||gt.test(b.hostname))}}ot.validateEmbedUrl=at},"./src/visual.ts":function(et,ot,st){var lt=this&&this.__extends||function(){var bt=function(ht,St){return bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(At,Tt){At.__proto__=Tt}||function(At,Tt){for(var ft in Tt)Object.prototype.hasOwnProperty.call(Tt,ft)&&(At[ft]=Tt[ft])},bt(ht,St)};return function(ht,St){if(typeof St!="function"&&St!==null)throw new TypeError("Class extends value "+String(St)+" is not a constructor or null");bt(ht,St);function At(){this.constructor=ht}ht.prototype=St===null?Object.create(St):(At.prototype=St.prototype,new At)}}(),nt=this&&this.__awaiter||function(bt,ht,St,At){function Tt(ft){return ft instanceof St?ft:new St(function(_t){_t(ft)})}return new(St||(St=Promise))(function(ft,_t){function Rt(kt){try{Et(At.next(kt))}catch(at){_t(at)}}function Mt(kt){try{Et(At.throw(kt))}catch(at){_t(at)}}function Et(kt){kt.done?ft(kt.value):Tt(kt.value).then(Rt,Mt)}Et((At=At.apply(bt,ht||[])).next())})},gt=this&&this.__generator||function(bt,ht){var St={label:0,sent:function(){if(ft[0]&1)throw ft[1];return ft[1]},trys:[],ops:[]},At,Tt,ft,_t;return _t={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Rt(Et){return function(kt){return Mt([Et,kt])}}function Mt(Et){if(At)throw new TypeError("Generator is already executing.");for(;St;)try{if(At=1,Tt&&(ft=Et[0]&2?Tt.return:Et[0]?Tt.throw||((ft=Tt.return)&&ft.call(Tt),0):Tt.next)&&!(ft=ft.call(Tt,Et[1])).done)return ft;switch(Tt=0,ft&&(Et=[Et[0]&2,ft.value]),Et[0]){case 0:case 1:ft=Et;break;case 4:return St.label++,{value:Et[1],done:!1};case 5:St.label++,Tt=Et[1],Et=[0];continue;case 7:Et=St.ops.pop(),St.trys.pop();continue;default:if(ft=St.trys,!(ft=ft.length>0&&ft[ft.length-1])&&(Et[0]===6||Et[0]===2)){St=0;continue}if(Et[0]===3&&(!ft||Et[1]>ft[0]&&Et[1]<ft[3])){St.label=Et[1];break}if(Et[0]===6&&St.label<ft[1]){St.label=ft[1],ft=Et;break}if(ft&&St.label<ft[2]){St.label=ft[2],St.ops.push(Et);break}ft[2]&&St.ops.pop(),St.trys.pop();continue}Et=ht.call(bt,St)}catch(kt){Et=[6,kt],Tt=0}finally{At=ft=0}if(Et[0]&5)throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.Visual=void 0;var dt=st("./node_modules/powerbi-models/dist/models.js"),mt=st("./src/report.ts"),vt=st("./src/visualDescriptor.ts"),tt=function(bt){lt(ht,bt);function ht(St,At,Tt,ft,_t,Rt){return bt.call(this,St,At,Tt,ft,_t,Rt)||this}return ht.prototype.load=function(St){var At=this.config;if(At.accessToken){if(typeof At.pageName!="string"||At.pageName.length===0)throw new Error("Page name is required when embedding a visual.");if(typeof At.visualName!="string"||At.visualName.length===0)throw new Error("Visual name is required, but it was not found. You must provide a visual name as part of embed configuration.");var Tt=At.width?At.width:this.iframe.offsetWidth,ft=At.height?At.height:this.iframe.offsetHeight,_t={type:dt.PageSizeType.Custom,width:Tt,height:ft},Rt={};return Rt[At.pageName]={defaultLayout:{displayState:{mode:dt.VisualContainerDisplayMode.Hidden}},visualsLayout:{}},Rt[At.pageName].visualsLayout[At.visualName]={displayState:{mode:dt.VisualContainerDisplayMode.Visible},x:1,y:1,z:1,width:_t.width,height:_t.height},At.settings=At.settings||{},At.settings.filterPaneEnabled=!1,At.settings.navContentPaneEnabled=!1,At.settings.layoutType=dt.LayoutType.Custom,At.settings.customLayout={displayOption:dt.DisplayOption.FitToPage,pageSize:_t,pagesLayout:Rt},this.config=At,bt.prototype.load.call(this,St)}},ht.prototype.getPages=function(){throw ht.GetPagesNotSupportedError},ht.prototype.setPage=function(St){throw ht.SetPageNotSupportedError},ht.prototype.render=function(St){return nt(this,void 0,void 0,function(){return gt(this,function(At){throw ht.RenderNotSupportedError})})},ht.prototype.getVisualDescriptor=function(){return nt(this,void 0,void 0,function(){var St,At,Tt,ft,_t,Rt,Mt;return gt(this,function(Et){switch(Et.label){case 0:St=this.config,Et.label=1;case 1:return Et.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/pages/".concat(St.pageName,"/visuals"),{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:if(At=Et.sent(),Tt=At.body.filter(function(kt){return kt.name===St.visualName}),Tt.length===0)throw ft={message:"visualNotFound",detailedMessage:"Visual not found"},ft;return _t=Tt[0],Rt=this.page(St.pageName),[2,new vt.VisualDescriptor(Rt,_t.name,_t.title,_t.type,_t.layout)];case 3:throw Mt=Et.sent(),Mt.body;case 4:return[2]}})})},ht.prototype.getFilters=function(St){return nt(this,void 0,void 0,function(){var At,Tt,ft;return gt(this,function(_t){switch(_t.label){case 0:At=this.getFiltersLevelUrl(St),_t.label=1;case 1:return _t.trys.push([1,3,,4]),[4,this.service.hpm.get(At,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Tt=_t.sent(),[2,Tt.body];case 3:throw ft=_t.sent(),ft.body;case 4:return[2]}})})},ht.prototype.updateFilters=function(St,At,Tt){return nt(this,void 0,void 0,function(){var ft,_t,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:ft={filtersOperation:St,filters:At},_t=this.getFiltersLevelUrl(Tt),Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.post(_t,ft,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,Mt.sent()];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},ht.prototype.setFilters=function(St,At){return nt(this,void 0,void 0,function(){var Tt,ft;return gt(this,function(_t){switch(_t.label){case 0:Tt=this.getFiltersLevelUrl(At),_t.label=1;case 1:return _t.trys.push([1,3,,4]),[4,this.service.hpm.put(Tt,St,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,_t.sent()];case 3:throw ft=_t.sent(),ft.body;case 4:return[2]}})})},ht.prototype.removeFilters=function(St){return nt(this,void 0,void 0,function(){return gt(this,function(At){switch(At.label){case 0:return[4,this.updateFilters(dt.FiltersOperations.RemoveAll,void 0,St)];case 1:return[2,At.sent()]}})})},ht.prototype.getFiltersLevelUrl=function(St){var At=this.config;switch(St){case dt.FiltersLevel.Report:return"/report/filters";case dt.FiltersLevel.Page:return"/report/pages/".concat(At.pageName,"/filters");default:return"/report/pages/".concat(At.pageName,"/visuals/").concat(At.visualName,"/filters")}},ht.type="visual",ht.GetPagesNotSupportedError="Get pages is not supported while embedding a visual.",ht.SetPageNotSupportedError="Set page is not supported while embedding a visual.",ht.RenderNotSupportedError="render is not supported while embedding a visual.",ht}(mt.Report);ot.Visual=tt},"./src/visualDescriptor.ts":function(et,ot,st){var lt=this&&this.__awaiter||function(mt,vt,tt,bt){function ht(St){return St instanceof tt?St:new tt(function(At){At(St)})}return new(tt||(tt=Promise))(function(St,At){function Tt(Rt){try{_t(bt.next(Rt))}catch(Mt){At(Mt)}}function ft(Rt){try{_t(bt.throw(Rt))}catch(Mt){At(Mt)}}function _t(Rt){Rt.done?St(Rt.value):ht(Rt.value).then(Tt,ft)}_t((bt=bt.apply(mt,vt||[])).next())})},nt=this&&this.__generator||function(mt,vt){var tt={label:0,sent:function(){if(St[0]&1)throw St[1];return St[1]},trys:[],ops:[]},bt,ht,St,At;return At={next:Tt(0),throw:Tt(1),return:Tt(2)},typeof Symbol=="function"&&(At[Symbol.iterator]=function(){return this}),At;function Tt(_t){return function(Rt){return ft([_t,Rt])}}function ft(_t){if(bt)throw new TypeError("Generator is already executing.");for(;tt;)try{if(bt=1,ht&&(St=_t[0]&2?ht.return:_t[0]?ht.throw||((St=ht.return)&&St.call(ht),0):ht.next)&&!(St=St.call(ht,_t[1])).done)return St;switch(ht=0,St&&(_t=[_t[0]&2,St.value]),_t[0]){case 0:case 1:St=_t;break;case 4:return tt.label++,{value:_t[1],done:!1};case 5:tt.label++,ht=_t[1],_t=[0];continue;case 7:_t=tt.ops.pop(),tt.trys.pop();continue;default:if(St=tt.trys,!(St=St.length>0&&St[St.length-1])&&(_t[0]===6||_t[0]===2)){tt=0;continue}if(_t[0]===3&&(!St||_t[1]>St[0]&&_t[1]<St[3])){tt.label=_t[1];break}if(_t[0]===6&&tt.label<St[1]){tt.label=St[1],St=_t;break}if(St&&tt.label<St[2]){tt.label=St[2],tt.ops.push(_t);break}St[2]&&tt.ops.pop(),tt.trys.pop();continue}_t=vt.call(mt,tt)}catch(Rt){_t=[6,Rt],ht=0}finally{bt=St=0}if(_t[0]&5)throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.VisualDescriptor=void 0;var gt=st("./node_modules/powerbi-models/dist/models.js"),dt=function(){function mt(vt,tt,bt,ht,St){this.name=tt,this.title=bt,this.type=ht,this.layout=St,this.page=vt}return mt.prototype.getFilters=function(){return lt(this,void 0,void 0,function(){var vt,tt;return nt(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.get("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/filters"),{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return vt=bt.sent(),[2,vt.body];case 2:throw tt=bt.sent(),tt.body;case 3:return[2]}})})},mt.prototype.updateFilters=function(vt,tt){return lt(this,void 0,void 0,function(){var bt,ht;return nt(this,function(St){switch(St.label){case 0:bt={filtersOperation:vt,filters:tt},St.label=1;case 1:return St.trys.push([1,3,,4]),[4,this.page.report.service.hpm.post("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/filters"),bt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 2:return[2,St.sent()];case 3:throw ht=St.sent(),ht.body;case 4:return[2]}})})},mt.prototype.removeFilters=function(){return lt(this,void 0,void 0,function(){return nt(this,function(vt){switch(vt.label){case 0:return[4,this.updateFilters(gt.FiltersOperations.RemoveAll)];case 1:return[2,vt.sent()]}})})},mt.prototype.setFilters=function(vt){return lt(this,void 0,void 0,function(){var tt;return nt(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.put("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/filters"),vt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return[2,bt.sent()];case 2:throw tt=bt.sent(),tt.body;case 3:return[2]}})})},mt.prototype.exportData=function(vt,tt){return lt(this,void 0,void 0,function(){var bt,ht,St;return nt(this,function(At){switch(At.label){case 0:bt={rows:tt,exportDataType:vt},At.label=1;case 1:return At.trys.push([1,3,,4]),[4,this.page.report.service.hpm.post("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/exportData"),bt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 2:return ht=At.sent(),[2,ht.body];case 3:throw St=At.sent(),St.body;case 4:return[2]}})})},mt.prototype.setSlicerState=function(vt){return lt(this,void 0,void 0,function(){var tt;return nt(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.put("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/slicer"),vt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return[2,bt.sent()];case 2:throw tt=bt.sent(),tt.body;case 3:return[2]}})})},mt.prototype.getSlicerState=function(){return lt(this,void 0,void 0,function(){var vt,tt;return nt(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.get("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/slicer"),{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return vt=bt.sent(),[2,vt.body];case 2:throw tt=bt.sent(),tt.body;case 3:return[2]}})})},mt.prototype.clone=function(vt){return vt===void 0&&(vt={}),lt(this,void 0,void 0,function(){var tt,bt;return nt(this,function(ht){switch(ht.label){case 0:return ht.trys.push([0,2,,3]),[4,this.page.report.service.hpm.post("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/clone"),vt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return tt=ht.sent(),[2,tt.body];case 2:throw bt=ht.sent(),bt.body;case 3:return[2]}})})},mt.prototype.sortBy=function(vt){return lt(this,void 0,void 0,function(){var tt;return nt(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.put("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/sortBy"),vt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return[2,bt.sent()];case 2:throw tt=bt.sent(),tt.body;case 3:return[2]}})})},mt.prototype.moveVisual=function(vt,tt,bt){return lt(this,void 0,void 0,function(){var ht,St,At;return nt(this,function(Tt){return ht=this.page.name,St=this.name,At=this.page.report,[2,At.moveVisual(ht,St,vt,tt,bt)]})})},mt.prototype.setVisualDisplayState=function(vt){return lt(this,void 0,void 0,function(){var tt,bt,ht;return nt(this,function(St){return tt=this.page.name,bt=this.name,ht=this.page.report,[2,ht.setVisualDisplayState(tt,bt,vt)]})})},mt.prototype.resizeVisual=function(vt,tt){return lt(this,void 0,void 0,function(){var bt,ht,St;return nt(this,function(At){return bt=this.page.name,ht=this.name,St=this.page.report,[2,St.resizeVisual(bt,ht,vt,tt)]})})},mt.prototype.getSmartNarrativeInsights=function(){return lt(this,void 0,void 0,function(){var vt,tt;return nt(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.get("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/smartNarrativeInsights"),{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return vt=bt.sent(),[2,vt.body];case 2:throw tt=bt.sent(),tt.body;case 3:return[2]}})})},mt}();ot.VisualDescriptor=dt},"./node_modules/window-post-message-proxy/dist/windowPostMessageProxy.js":et=>{/*! For license information please see windowPostMessageProxy.js.LICENSE.txt */(function(ot,st){et.exports=st()})(self,()=>(()=>{var ot={};return(()=>{var st=ot;Object.defineProperty(st,"__esModule",{value:!0}),st.WindowPostMessageProxy=void 0;var lt=function(){function nt(gt){gt===void 0&&(gt={processTrackingProperties:{addTrackingProperties:nt.defaultAddTrackingProperties,getTrackingProperties:nt.defaultGetTrackingProperties},isErrorMessage:nt.defaultIsErrorMessage,receiveWindow:window,name:nt.createRandomString()});var dt=this;this.pendingRequestPromises={},this.addTrackingProperties=gt.processTrackingProperties&&gt.processTrackingProperties.addTrackingProperties||nt.defaultAddTrackingProperties,this.getTrackingProperties=gt.processTrackingProperties&&gt.processTrackingProperties.getTrackingProperties||nt.defaultGetTrackingProperties,this.isErrorMessage=gt.isErrorMessage||nt.defaultIsErrorMessage,this.receiveWindow=gt.receiveWindow||window,this.name=gt.name||nt.createRandomString(),this.logMessages=gt.logMessages||!1,this.eventSourceOverrideWindow=gt.eventSourceOverrideWindow,this.suppressWarnings=gt.suppressWarnings||!1,this.logMessages&&console.log("new WindowPostMessageProxy created with name: ".concat(this.name," receiving on window: ").concat(this.receiveWindow.document.title)),this.handlers=[],this.windowMessageHandler=function(mt){return dt.onMessageReceived(mt)},this.start()}return nt.defaultAddTrackingProperties=function(gt,dt){return gt[nt.messagePropertyName]=dt,gt},nt.defaultGetTrackingProperties=function(gt){return gt[nt.messagePropertyName]},nt.defaultIsErrorMessage=function(gt){return!!gt.error},nt.createDeferred=function(){var gt={resolve:null,reject:null,promise:null},dt=new Promise(function(mt,vt){gt.resolve=mt,gt.reject=vt});return gt.promise=dt,gt},nt.createRandomString=function(){var gt=window.crypto||window.msCrypto,dt=new Uint32Array(1);return gt.getRandomValues(dt),dt[0].toString(36).substring(1)},nt.prototype.addHandler=function(gt){this.handlers.push(gt)},nt.prototype.removeHandler=function(gt){var dt=this.handlers.indexOf(gt);if(dt===-1)throw new Error("You attempted to remove a handler but no matching handler was found.");this.handlers.splice(dt,1)},nt.prototype.start=function(){this.receiveWindow.addEventListener("message",this.windowMessageHandler)},nt.prototype.stop=function(){this.receiveWindow.removeEventListener("message",this.windowMessageHandler)},nt.prototype.postMessage=function(gt,dt){var mt={id:nt.createRandomString()};this.addTrackingProperties(dt,mt),this.logMessages&&(console.log("".concat(this.name," Posting message:")),console.log(JSON.stringify(dt,null,"  "))),gt.postMessage(dt,"*");var vt=nt.createDeferred();return this.pendingRequestPromises[mt.id]=vt,vt.promise},nt.prototype.sendResponse=function(gt,dt,mt){this.addTrackingProperties(dt,mt),this.logMessages&&(console.log("".concat(this.name," Sending response:")),console.log(JSON.stringify(dt,null,"  "))),gt.postMessage(dt,"*")},nt.prototype.onMessageReceived=function(gt){var dt=this;this.logMessages&&(console.log("".concat(this.name," Received message:")),console.log("type: ".concat(gt.type)),console.log(JSON.stringify(gt.data,null,"  ")));var mt=this.eventSourceOverrideWindow||gt.source;if(mt){var vt=gt.data;if(typeof vt=="object"){var tt,bt;try{tt=this.getTrackingProperties(vt)}catch(St){this.suppressWarnings||console.warn("Proxy(".concat(this.name,"): Error occurred when attempting to get tracking properties from incoming message:"),JSON.stringify(vt,null,"  "),"Error: ",St)}if(tt&&(bt=this.pendingRequestPromises[tt.id]),bt){var ht=!0;try{ht=this.isErrorMessage(vt)}catch(St){console.warn("Proxy(".concat(this.name,") Error occurred when trying to determine if message is consider an error response. Message: "),JSON.stringify(vt,null,""),"Error: ",St)}ht?bt.reject(vt):bt.resolve(vt),delete this.pendingRequestPromises[tt.id]}else this.handlers.some(function(St){var At=!1;try{At=St.test(vt)}catch(ft){dt.suppressWarnings||console.warn("Proxy(".concat(dt.name,"): Error occurred when handler was testing incoming message:"),JSON.stringify(vt,null,"  "),"Error: ",ft)}if(At){var Tt=void 0;try{Tt=Promise.resolve(St.handle(vt))}catch(ft){dt.suppressWarnings||console.warn("Proxy(".concat(dt.name,"): Error occurred when handler was processing incoming message:"),JSON.stringify(vt,null,"  "),"Error: ",ft),Tt=Promise.resolve()}return Tt.then(function(ft){if(!ft){var _t="Handler for message: ".concat(JSON.stringify(vt,null,"  ")," did not return a response message. The default response message will be returned instead.");dt.suppressWarnings||console.warn("Proxy(".concat(dt.name,"): ").concat(_t)),ft={warning:_t}}dt.sendResponse(mt,ft,tt)}),!0}})||this.suppressWarnings||console.warn("Proxy(".concat(this.name,") did not handle message. Handlers: ").concat(this.handlers.length,"  Message: ").concat(JSON.stringify(vt,null,""),"."))}else this.suppressWarnings||console.warn("Proxy(".concat(this.name,"): Received message that was not an object. Discarding message"))}},nt.messagePropertyName="windowPostMessageProxy",nt}();st.WindowPostMessageProxy=lt})(),ot})())}},c={};function j(et){var ot=c[et];if(ot!==void 0)return ot.exports;var st=c[et]={exports:{}};return a[et].call(st.exports,st,st.exports,j),st.exports}var h={};return(()=>{var et=h;/*!*******************************!*\
  !*** ./src/powerbi-client.ts ***!
  \*******************************/Object.defineProperty(et,"__esModule",{value:!0}),et.RelativeTimeFilterBuilder=et.RelativeDateFilterBuilder=et.TopNFilterBuilder=et.AdvancedFilterBuilder=et.BasicFilterBuilder=et.Create=et.QuickCreate=et.VisualDescriptor=et.Visual=et.Qna=et.Page=et.Embed=et.Tile=et.Dashboard=et.Report=et.models=et.factories=et.service=void 0;var ot=j("./node_modules/powerbi-models/dist/models.js");et.models=ot;var st=j("./src/service.ts");et.service=st;var lt=j("./src/factories.ts");et.factories=lt;var nt=j("./src/report.ts");Object.defineProperty(et,"Report",{enumerable:!0,get:function(){return nt.Report}});var gt=j("./src/dashboard.ts");Object.defineProperty(et,"Dashboard",{enumerable:!0,get:function(){return gt.Dashboard}});var dt=j("./src/tile.ts");Object.defineProperty(et,"Tile",{enumerable:!0,get:function(){return dt.Tile}});var mt=j("./src/embed.ts");Object.defineProperty(et,"Embed",{enumerable:!0,get:function(){return mt.Embed}});var vt=j("./src/page.ts");Object.defineProperty(et,"Page",{enumerable:!0,get:function(){return vt.Page}});var tt=j("./src/qna.ts");Object.defineProperty(et,"Qna",{enumerable:!0,get:function(){return tt.Qna}});var bt=j("./src/visual.ts");Object.defineProperty(et,"Visual",{enumerable:!0,get:function(){return bt.Visual}});var ht=j("./src/visualDescriptor.ts");Object.defineProperty(et,"VisualDescriptor",{enumerable:!0,get:function(){return ht.VisualDescriptor}});var St=j("./src/quickCreate.ts");Object.defineProperty(et,"QuickCreate",{enumerable:!0,get:function(){return St.QuickCreate}});var At=j("./src/create.ts");Object.defineProperty(et,"Create",{enumerable:!0,get:function(){return At.Create}});var Tt=j("./src/FilterBuilders/index.ts");Object.defineProperty(et,"BasicFilterBuilder",{enumerable:!0,get:function(){return Tt.BasicFilterBuilder}}),Object.defineProperty(et,"AdvancedFilterBuilder",{enumerable:!0,get:function(){return Tt.AdvancedFilterBuilder}}),Object.defineProperty(et,"TopNFilterBuilder",{enumerable:!0,get:function(){return Tt.TopNFilterBuilder}}),Object.defineProperty(et,"RelativeDateFilterBuilder",{enumerable:!0,get:function(){return Tt.RelativeDateFilterBuilder}}),Object.defineProperty(et,"RelativeTimeFilterBuilder",{enumerable:!0,get:function(){return Tt.RelativeTimeFilterBuilder}});var ft=new st.Service(lt.hpmFactory,lt.wpmpFactory,lt.routerFactory);window.powerbi&&window.powerBISDKGlobalServiceInstanceName?window[window.powerBISDKGlobalServiceInstanceName]=ft:window.powerbi=ft})(),h})())})(powerbi);var powerbiExports=powerbi.exports,powerbiClientReact={exports:{}},lodash_isequal={exports:{}};lodash_isequal.exports;var hasRequiredLodash_isequal;function requireLodash_isequal(){return hasRequiredLodash_isequal||(hasRequiredLodash_isequal=1,function(o,e){var a=200,c="__lodash_hash_undefined__",j=1,h=2,et=9007199254740991,ot="[object Arguments]",st="[object Array]",lt="[object AsyncFunction]",nt="[object Boolean]",gt="[object Date]",dt="[object Error]",mt="[object Function]",vt="[object GeneratorFunction]",tt="[object Map]",bt="[object Number]",ht="[object Null]",St="[object Object]",At="[object Promise]",Tt="[object Proxy]",ft="[object RegExp]",_t="[object Set]",Rt="[object String]",Mt="[object Symbol]",Et="[object Undefined]",kt="[object WeakMap]",at="[object ArrayBuffer]",s="[object DataView]",b="[object Float32Array]",$="[object Float64Array]",_e="[object Int8Array]",it="[object Int16Array]",pt="[object Int32Array]",yt="[object Uint8Array]",ct="[object Uint8ClampedArray]",_="[object Uint16Array]",rt="[object Uint32Array]",Ct=/[\\^$.*+?()[\]{}|]/g,It=/^\[object .+?Constructor\]$/,Nt=/^(?:0|[1-9]\d*)$/,Ut={};Ut[b]=Ut[$]=Ut[_e]=Ut[it]=Ut[pt]=Ut[yt]=Ut[ct]=Ut[_]=Ut[rt]=!0,Ut[ot]=Ut[st]=Ut[at]=Ut[nt]=Ut[s]=Ut[gt]=Ut[dt]=Ut[mt]=Ut[tt]=Ut[bt]=Ut[St]=Ut[ft]=Ut[_t]=Ut[Rt]=Ut[kt]=!1;var Gt=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Pt=typeof self=="object"&&self&&self.Object===Object&&self,qt=Gt||Pt||Function("return this")(),Kt=e&&!e.nodeType&&e,jt=Kt&&!0&&o&&!o.nodeType&&o,Ht=jt&&jt.exports===Kt,Bt=Ht&&Gt.process,Jt=function(){try{return Bt&&Bt.binding&&Bt.binding("util")}catch{}}(),sr=Jt&&Jt.isTypedArray;function hr(pr,qr){for(var pn=-1,Ln=pr==null?0:pr.length,Eo=0,ro=[];++pn<Ln;){var xo=pr[pn];qr(xo,pn,pr)&&(ro[Eo++]=xo)}return ro}function Ar(pr,qr){for(var pn=-1,Ln=qr.length,Eo=pr.length;++pn<Ln;)pr[Eo+pn]=qr[pn];return pr}function yn(pr,qr){for(var pn=-1,Ln=pr==null?0:pr.length;++pn<Ln;)if(qr(pr[pn],pn,pr))return!0;return!1}function Lr(pr,qr){for(var pn=-1,Ln=Array(pr);++pn<pr;)Ln[pn]=qr(pn);return Ln}function wr(pr){return function(qr){return pr(qr)}}function En(pr,qr){return pr.has(qr)}function Dr(pr,qr){return pr==null?void 0:pr[qr]}function Qr(pr){var qr=-1,pn=Array(pr.size);return pr.forEach(function(Ln,Eo){pn[++qr]=[Eo,Ln]}),pn}function Bn(pr,qr){return function(pn){return pr(qr(pn))}}function Br(pr){var qr=-1,pn=Array(pr.size);return pr.forEach(function(Ln){pn[++qr]=Ln}),pn}var Gr=Array.prototype,Dn=Function.prototype,Fr=Object.prototype,_i=qt["__core-js_shared__"],Gn=Dn.toString,Wt=Fr.hasOwnProperty,Lt=function(){var pr=/[^.]+$/.exec(_i&&_i.keys&&_i.keys.IE_PROTO||"");return pr?"Symbol(src)_1."+pr:""}(),zt=Fr.toString,Zt=RegExp("^"+Gn.call(Wt).replace(Ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ar=Ht?qt.Buffer:void 0,Or=qt.Symbol,vr=qt.Uint8Array,Rr=Fr.propertyIsEnumerable,fr=Gr.splice,tr=Or?Or.toStringTag:void 0,yr=Object.getOwnPropertySymbols,hn=ar?ar.isBuffer:void 0,Nr=Bn(Object.keys,Object),zr=ss(qt,"DataView"),kn=ss(qt,"Map"),Kr=ss(qt,"Promise"),nn=ss(qt,"Set"),Qn=ss(qt,"WeakMap"),Zr=ss(Object,"create"),on=hs(zr),Zn=hs(kn),en=hs(Kr),ln=hs(nn),eo=hs(Qn),$t=Or?Or.prototype:void 0,or=$t?$t.valueOf:void 0;function Yr(pr){var qr=-1,pn=pr==null?0:pr.length;for(this.clear();++qr<pn;){var Ln=pr[qr];this.set(Ln[0],Ln[1])}}function Vr(){this.__data__=Zr?Zr(null):{},this.size=0}function Hr(pr){var qr=this.has(pr)&&delete this.__data__[pr];return this.size-=qr?1:0,qr}function Rn(pr){var qr=this.__data__;if(Zr){var pn=qr[pr];return pn===c?void 0:pn}return Wt.call(qr,pr)?qr[pr]:void 0}function Ur(pr){var qr=this.__data__;return Zr?qr[pr]!==void 0:Wt.call(qr,pr)}function tn(pr,qr){var pn=this.__data__;return this.size+=this.has(pr)?0:1,pn[pr]=Zr&&qr===void 0?c:qr,this}Yr.prototype.clear=Vr,Yr.prototype.delete=Hr,Yr.prototype.get=Rn,Yr.prototype.has=Ur,Yr.prototype.set=tn;function Un(pr){var qr=-1,pn=pr==null?0:pr.length;for(this.clear();++qr<pn;){var Ln=pr[qr];this.set(Ln[0],Ln[1])}}function Hn(){this.__data__=[],this.size=0}function so(pr){var qr=this.__data__,pn=Jn(qr,pr);if(pn<0)return!1;var Ln=qr.length-1;return pn==Ln?qr.pop():fr.call(qr,pn,1),--this.size,!0}function uo(pr){var qr=this.__data__,pn=Jn(qr,pr);return pn<0?void 0:qr[pn][1]}function io(pr){return Jn(this.__data__,pr)>-1}function mo(pr,qr){var pn=this.__data__,Ln=Jn(pn,pr);return Ln<0?(++this.size,pn.push([pr,qr])):pn[Ln][1]=qr,this}Un.prototype.clear=Hn,Un.prototype.delete=so,Un.prototype.get=uo,Un.prototype.has=io,Un.prototype.set=mo;function ao(pr){var qr=-1,pn=pr==null?0:pr.length;for(this.clear();++qr<pn;){var Ln=pr[qr];this.set(Ln[0],Ln[1])}}function go(){this.size=0,this.__data__={hash:new Yr,map:new(kn||Un),string:new Yr}}function po(pr){var qr=Wo(this,pr).delete(pr);return this.size-=qr?1:0,qr}function yo(pr){return Wo(this,pr).get(pr)}function wo(pr){return Wo(this,pr).has(pr)}function ur(pr,qr){var pn=Wo(this,pr),Ln=pn.size;return pn.set(pr,qr),this.size+=pn.size==Ln?0:1,this}ao.prototype.clear=go,ao.prototype.delete=po,ao.prototype.get=yo,ao.prototype.has=wo,ao.prototype.set=ur;function Cr(pr){var qr=-1,pn=pr==null?0:pr.length;for(this.__data__=new ao;++qr<pn;)this.add(pr[qr])}function $r(pr){return this.__data__.set(pr,c),this}function dn(pr){return this.__data__.has(pr)}Cr.prototype.add=Cr.prototype.push=$r,Cr.prototype.has=dn;function rn(pr){var qr=this.__data__=new Un(pr);this.size=qr.size}function An(){this.__data__=new Un,this.size=0}function Pn(pr){var qr=this.__data__,pn=qr.delete(pr);return this.size=qr.size,pn}function Tn(pr){return this.__data__.get(pr)}function jn(pr){return this.__data__.has(pr)}function Nn(pr,qr){var pn=this.__data__;if(pn instanceof Un){var Ln=pn.__data__;if(!kn||Ln.length<a-1)return Ln.push([pr,qr]),this.size=++pn.size,this;pn=this.__data__=new ao(Ln)}return pn.set(pr,qr),this.size=pn.size,this}rn.prototype.clear=An,rn.prototype.delete=Pn,rn.prototype.get=Tn,rn.prototype.has=jn,rn.prototype.set=Nn;function zn(pr,qr){var pn=Ts(pr),Ln=!pn&&Hs(pr),Eo=!pn&&!Ln&&gs(pr),ro=!pn&&!Ln&&!Eo&&Ms(pr),xo=pn||Ln||Eo||ro,Po=xo?Lr(pr.length,String):[],Io=Po.length;for(var Co in pr)Wt.call(pr,Co)&&!(xo&&(Co=="length"||Eo&&(Co=="offset"||Co=="parent")||ro&&(Co=="buffer"||Co=="byteLength"||Co=="byteOffset")||El(Co,Io)))&&Po.push(Co);return Po}function Jn(pr,qr){for(var pn=pr.length;pn--;)if(Ml(pr[pn][0],qr))return pn;return-1}function _o(pr,qr,pn){var Ln=qr(pr);return Ts(pr)?Ln:Ar(Ln,pn(pr))}function fo(pr){return pr==null?pr===void 0?Et:ht:tr&&tr in Object(pr)?Al(pr):Us(pr)}function $o(pr){return ys(pr)&&fo(pr)==ot}function Es(pr,qr,pn,Ln,Eo){return pr===qr?!0:pr==null||qr==null||!ys(pr)&&!ys(qr)?pr!==pr&&qr!==qr:$s(pr,qr,pn,Ln,Es,Eo)}function $s(pr,qr,pn,Ln,Eo,ro){var xo=Ts(pr),Po=Ts(qr),Io=xo?st:ls(pr),Co=Po?st:ls(qr);Io=Io==ot?St:Io,Co=Co==ot?St:Co;var Do=Io==St,qo=Co==St,Lo=Io==Co;if(Lo&&gs(pr)){if(!gs(qr))return!1;xo=!0,Do=!1}if(Lo&&!Do)return ro||(ro=new rn),xo||Ms(pr)?qs(pr,qr,pn,Ln,Eo,ro):js(pr,qr,Io,pn,Ln,Eo,ro);if(!(pn&j)){var zo=Do&&Wt.call(pr,"__wrapped__"),Fo=qo&&Wt.call(qr,"__wrapped__");if(zo||Fo){var ba=zo?pr.value():pr,Zo=Fo?qr.value():qr;return ro||(ro=new rn),Eo(ba,Zo,pn,Ln,ro)}}return Lo?(ro||(ro=new rn),Vo(pr,qr,pn,Ln,Eo,ro)):!1}function Ho(pr){if(!Gs(pr)||Cs(pr))return!1;var qr=Os(pr)?Zt:It;return qr.test(hs(pr))}function Sl(pr){return ys(pr)&&Ks(pr.length)&&!!Ut[fo(pr)]}function ns(pr){if(!Tl(pr))return Nr(pr);var qr=[];for(var pn in Object(pr))Wt.call(pr,pn)&&pn!="constructor"&&qr.push(pn);return qr}function qs(pr,qr,pn,Ln,Eo,ro){var xo=pn&j,Po=pr.length,Io=qr.length;if(Po!=Io&&!(xo&&Io>Po))return!1;var Co=ro.get(pr);if(Co&&ro.get(qr))return Co==qr;var Do=-1,qo=!0,Lo=pn&h?new Cr:void 0;for(ro.set(pr,qr),ro.set(qr,pr);++Do<Po;){var zo=pr[Do],Fo=qr[Do];if(Ln)var ba=xo?Ln(Fo,zo,Do,qr,pr,ro):Ln(zo,Fo,Do,pr,qr,ro);if(ba!==void 0){if(ba)continue;qo=!1;break}if(Lo){if(!yn(qr,function(Zo,er){if(!En(Lo,er)&&(zo===Zo||Eo(zo,Zo,pn,Ln,ro)))return Lo.push(er)})){qo=!1;break}}else if(!(zo===Fo||Eo(zo,Fo,pn,Ln,ro))){qo=!1;break}}return ro.delete(pr),ro.delete(qr),qo}function js(pr,qr,pn,Ln,Eo,ro,xo){switch(pn){case s:if(pr.byteLength!=qr.byteLength||pr.byteOffset!=qr.byteOffset)return!1;pr=pr.buffer,qr=qr.buffer;case at:return!(pr.byteLength!=qr.byteLength||!ro(new vr(pr),new vr(qr)));case nt:case gt:case bt:return Ml(+pr,+qr);case dt:return pr.name==qr.name&&pr.message==qr.message;case ft:case Rt:return pr==qr+"";case tt:var Po=Qr;case _t:var Io=Ln&j;if(Po||(Po=Br),pr.size!=qr.size&&!Io)return!1;var Co=xo.get(pr);if(Co)return Co==qr;Ln|=h,xo.set(pr,qr);var Do=qs(Po(pr),Po(qr),Ln,Eo,ro,xo);return xo.delete(pr),Do;case Mt:if(or)return or.call(pr)==or.call(qr)}return!1}function Vo(pr,qr,pn,Ln,Eo,ro){var xo=pn&j,Po=as(pr),Io=Po.length,Co=as(qr),Do=Co.length;if(Io!=Do&&!xo)return!1;for(var qo=Io;qo--;){var Lo=Po[qo];if(!(xo?Lo in qr:Wt.call(qr,Lo)))return!1}var zo=ro.get(pr);if(zo&&ro.get(qr))return zo==qr;var Fo=!0;ro.set(pr,qr),ro.set(qr,pr);for(var ba=xo;++qo<Io;){Lo=Po[qo];var Zo=pr[Lo],er=qr[Lo];if(Ln)var Pr=xo?Ln(er,Zo,Lo,qr,pr,ro):Ln(Zo,er,Lo,pr,qr,ro);if(!(Pr===void 0?Zo===er||Eo(Zo,er,pn,Ln,ro):Pr)){Fo=!1;break}ba||(ba=Lo=="constructor")}if(Fo&&!ba){var xr=pr.constructor,jr=qr.constructor;xr!=jr&&"constructor"in pr&&"constructor"in qr&&!(typeof xr=="function"&&xr instanceof xr&&typeof jr=="function"&&jr instanceof jr)&&(Fo=!1)}return ro.delete(pr),ro.delete(qr),Fo}function as(pr){return _o(pr,Wl,_l)}function Wo(pr,qr){var pn=pr.__data__;return Cl(qr)?pn[typeof qr=="string"?"string":"hash"]:pn.map}function ss(pr,qr){var pn=Dr(pr,qr);return Ho(pn)?pn:void 0}function Al(pr){var qr=Wt.call(pr,tr),pn=pr[tr];try{pr[tr]=void 0;var Ln=!0}catch{}var Eo=zt.call(pr);return Ln&&(qr?pr[tr]=pn:delete pr[tr]),Eo}var _l=yr?function(pr){return pr==null?[]:(pr=Object(pr),hr(yr(pr),function(qr){return Rr.call(pr,qr)}))}:xl,ls=fo;(zr&&ls(new zr(new ArrayBuffer(1)))!=s||kn&&ls(new kn)!=tt||Kr&&ls(Kr.resolve())!=At||nn&&ls(new nn)!=_t||Qn&&ls(new Qn)!=kt)&&(ls=function(pr){var qr=fo(pr),pn=qr==St?pr.constructor:void 0,Ln=pn?hs(pn):"";if(Ln)switch(Ln){case on:return s;case Zn:return tt;case en:return At;case ln:return _t;case eo:return kt}return qr});function El(pr,qr){return qr=qr??et,!!qr&&(typeof pr=="number"||Nt.test(pr))&&pr>-1&&pr%1==0&&pr<qr}function Cl(pr){var qr=typeof pr;return qr=="string"||qr=="number"||qr=="symbol"||qr=="boolean"?pr!=="__proto__":pr===null}function Cs(pr){return!!Lt&&Lt in pr}function Tl(pr){var qr=pr&&pr.constructor,pn=typeof qr=="function"&&qr.prototype||Fr;return pr===pn}function Us(pr){return zt.call(pr)}function hs(pr){if(pr!=null){try{return Gn.call(pr)}catch{}try{return pr+""}catch{}}return""}function Ml(pr,qr){return pr===qr||pr!==pr&&qr!==qr}var Hs=$o(function(){return arguments}())?$o:function(pr){return ys(pr)&&Wt.call(pr,"callee")&&!Rr.call(pr,"callee")},Ts=Array.isArray;function zs(pr){return pr!=null&&Ks(pr.length)&&!Os(pr)}var gs=hn||Xo;function Rl(pr,qr){return Es(pr,qr)}function Os(pr){if(!Gs(pr))return!1;var qr=fo(pr);return qr==mt||qr==vt||qr==lt||qr==Tt}function Ks(pr){return typeof pr=="number"&&pr>-1&&pr%1==0&&pr<=et}function Gs(pr){var qr=typeof pr;return pr!=null&&(qr=="object"||qr=="function")}function ys(pr){return pr!=null&&typeof pr=="object"}var Ms=sr?wr(sr):Sl;function Wl(pr){return zs(pr)?zn(pr):ns(pr)}function xl(){return[]}function Xo(){return!1}o.exports=Rl}(lodash_isequal,lodash_isequal.exports)),lodash_isequal.exports}(function(o,e){(function(a,c){o.exports=c(reactExports,powerbiExports,requireLodash_isequal())})(self,(a,c,j)=>(()=>{var h={149:function(lt){var nt;nt=()=>(()=>{var gt=[function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(fr,tr){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yr,hn){yr.__proto__=hn}||function(yr,hn){for(var Nr in hn)Object.prototype.hasOwnProperty.call(hn,Nr)&&(yr[Nr]=hn[Nr])},ht(fr,tr)},function(fr,tr){if(typeof tr!="function"&&tr!==null)throw new TypeError("Class extends value "+String(tr)+" is not a constructor or null");function yr(){this.constructor=fr}ht(fr,tr),fr.prototype=tr===null?Object.create(tr):(yr.prototype=tr.prototype,new yr)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.TextAlignment=tt.CommonErrorCodes=tt.BookmarksPlayMode=tt.ExportDataType=tt.QnaMode=tt.PageNavigationPosition=tt.BrowserPrintAdjustmentsMode=tt.AggregateFunction=tt.DataCacheMode=tt.CredentialType=tt.isPercentOfGrandTotal=tt.isColumnAggr=tt.isHierarchyLevelAggr=tt.isHierarchyLevel=tt.isColumn=tt.isMeasure=tt.getFilterType=tt.isBasicFilterWithKeys=tt.isFilterKeyColumnsTarget=tt.HierarchyFilter=tt.AdvancedFilter=tt.TupleFilter=tt.IdentityFilter=tt.BasicFilterWithKeys=tt.BasicFilter=tt.RelativeTimeFilter=tt.RelativeDateFilter=tt.TopNFilter=tt.IncludeExcludeFilter=tt.NotSupportedFilter=tt.Filter=tt.RelativeDateOperators=tt.RelativeDateFilterTimeUnit=tt.FilterType=tt.FiltersLevel=tt.FiltersOperations=tt.MenuLocation=tt.ContrastMode=tt.TokenType=tt.ViewMode=tt.Permissions=tt.SectionVisibility=tt.ReportAlignment=tt.HyperlinkClickBehavior=tt.LayoutType=tt.VisualContainerDisplayMode=tt.BackgroundType=tt.DisplayOption=tt.PageSizeType=tt.TraceType=void 0,tt.validateVisualHeader=tt.validateExportDataRequest=tt.validateQnaInterpretInputData=tt.validateLoadQnaConfiguration=tt.validateSaveAsParameters=tt.validateUpdateFiltersRequest=tt.validateFilter=tt.validatePage=tt.validateTileLoad=tt.validateDashboardLoad=tt.validateQuickCreate=tt.validateCreateReport=tt.validatePaginatedReportLoad=tt.validateReportLoad=tt.validateMenuGroupExtension=tt.validateExtension=tt.validateCustomPageSize=tt.validateVisualizationsPane=tt.validateSyncSlicersPane=tt.validateSelectionPane=tt.validatePageNavigationPane=tt.validateFieldsPane=tt.validateFiltersPane=tt.validateBookmarksPane=tt.validatePanes=tt.validateSettings=tt.validateCaptureBookmarkRequest=tt.validateApplyBookmarkStateRequest=tt.validateApplyBookmarkByNameRequest=tt.validateAddBookmarkRequest=tt.validatePlayBookmarkRequest=tt.validateSlicerState=tt.validateSlicer=tt.validateVisualSelector=tt.isIExtensionArray=tt.isIExtensions=tt.isGroupedMenuExtension=tt.isFlatMenuExtension=tt.isReportFiltersArray=tt.isOnLoadFilters=tt.VisualDataRoleKindPreference=tt.VisualDataRoleKind=tt.CommandDisplayOption=tt.SlicerTargetSelector=tt.VisualTypeSelector=tt.VisualSelector=tt.PageSelector=tt.Selector=tt.SortDirection=tt.LegendPosition=void 0,tt.validatePrintSettings=tt.validateZoomLevel=tt.validateCustomTheme=tt.validateCommandsSettings=tt.validateVisualSettings=void 0;var At,Tt,ft,_t,Rt,Mt,Et,kt,at,s,b,$,_e,it,pt,yt,ct,_,rt,Ct=bt(1);(rt=tt.TraceType||(tt.TraceType={}))[rt.Information=0]="Information",rt[rt.Verbose=1]="Verbose",rt[rt.Warning=2]="Warning",rt[rt.Error=3]="Error",rt[rt.ExpectedError=4]="ExpectedError",rt[rt.UnexpectedError=5]="UnexpectedError",rt[rt.Fatal=6]="Fatal",(_=tt.PageSizeType||(tt.PageSizeType={}))[_.Widescreen=0]="Widescreen",_[_.Standard=1]="Standard",_[_.Cortana=2]="Cortana",_[_.Letter=3]="Letter",_[_.Custom=4]="Custom",_[_.Mobile=5]="Mobile",(ct=tt.DisplayOption||(tt.DisplayOption={}))[ct.FitToPage=0]="FitToPage",ct[ct.FitToWidth=1]="FitToWidth",ct[ct.ActualSize=2]="ActualSize",(yt=tt.BackgroundType||(tt.BackgroundType={}))[yt.Default=0]="Default",yt[yt.Transparent=1]="Transparent",(pt=tt.VisualContainerDisplayMode||(tt.VisualContainerDisplayMode={}))[pt.Visible=0]="Visible",pt[pt.Hidden=1]="Hidden",(it=tt.LayoutType||(tt.LayoutType={}))[it.Master=0]="Master",it[it.Custom=1]="Custom",it[it.MobilePortrait=2]="MobilePortrait",it[it.MobileLandscape=3]="MobileLandscape",(_e=tt.HyperlinkClickBehavior||(tt.HyperlinkClickBehavior={}))[_e.Navigate=0]="Navigate",_e[_e.NavigateAndRaiseEvent=1]="NavigateAndRaiseEvent",_e[_e.RaiseEvent=2]="RaiseEvent",($=tt.ReportAlignment||(tt.ReportAlignment={}))[$.Left=0]="Left",$[$.Center=1]="Center",$[$.Right=2]="Right",$[$.None=3]="None",(b=tt.SectionVisibility||(tt.SectionVisibility={}))[b.AlwaysVisible=0]="AlwaysVisible",b[b.HiddenInViewMode=1]="HiddenInViewMode",(s=tt.Permissions||(tt.Permissions={}))[s.Read=0]="Read",s[s.ReadWrite=1]="ReadWrite",s[s.Copy=2]="Copy",s[s.Create=4]="Create",s[s.All=7]="All",(at=tt.ViewMode||(tt.ViewMode={}))[at.View=0]="View",at[at.Edit=1]="Edit",(kt=tt.TokenType||(tt.TokenType={}))[kt.Aad=0]="Aad",kt[kt.Embed=1]="Embed",(Et=tt.ContrastMode||(tt.ContrastMode={}))[Et.None=0]="None",Et[Et.HighContrast1=1]="HighContrast1",Et[Et.HighContrast2=2]="HighContrast2",Et[Et.HighContrastBlack=3]="HighContrastBlack",Et[Et.HighContrastWhite=4]="HighContrastWhite",(Mt=tt.MenuLocation||(tt.MenuLocation={}))[Mt.Bottom=0]="Bottom",Mt[Mt.Top=1]="Top",(Rt=tt.FiltersOperations||(tt.FiltersOperations={}))[Rt.RemoveAll=0]="RemoveAll",Rt[Rt.ReplaceAll=1]="ReplaceAll",Rt[Rt.Add=2]="Add",Rt[Rt.Replace=3]="Replace",(_t=tt.FiltersLevel||(tt.FiltersLevel={}))[_t.Report=0]="Report",_t[_t.Page=1]="Page",_t[_t.Visual=2]="Visual",function(fr){fr[fr.Advanced=0]="Advanced",fr[fr.Basic=1]="Basic",fr[fr.Unknown=2]="Unknown",fr[fr.IncludeExclude=3]="IncludeExclude",fr[fr.RelativeDate=4]="RelativeDate",fr[fr.TopN=5]="TopN",fr[fr.Tuple=6]="Tuple",fr[fr.RelativeTime=7]="RelativeTime",fr[fr.Identity=8]="Identity",fr[fr.Hierarchy=9]="Hierarchy"}(At=tt.FilterType||(tt.FilterType={})),(ft=tt.RelativeDateFilterTimeUnit||(tt.RelativeDateFilterTimeUnit={}))[ft.Days=0]="Days",ft[ft.Weeks=1]="Weeks",ft[ft.CalendarWeeks=2]="CalendarWeeks",ft[ft.Months=3]="Months",ft[ft.CalendarMonths=4]="CalendarMonths",ft[ft.Years=5]="Years",ft[ft.CalendarYears=6]="CalendarYears",ft[ft.Minutes=7]="Minutes",ft[ft.Hours=8]="Hours",(Tt=tt.RelativeDateOperators||(tt.RelativeDateOperators={}))[Tt.InLast=0]="InLast",Tt[Tt.InThis=1]="InThis",Tt[Tt.InNext=2]="InNext";var It=function(){function fr(tr,yr){this.target=tr,this.filterType=yr}return fr.prototype.toJSON=function(){var tr={$schema:this.schemaUrl,target:this.target,filterType:this.filterType};return this.displaySettings!==void 0&&(tr.displaySettings=this.displaySettings),tr},fr}();tt.Filter=It;var Nt=function(fr){function tr(yr,hn,Nr){var zr=fr.call(this,yr,At.Unknown)||this;return zr.message=hn,zr.notSupportedTypeName=Nr,zr.schemaUrl=tr.schemaUrl,zr}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.message=this.message,yr.notSupportedTypeName=this.notSupportedTypeName,yr},tr.schemaUrl="http://powerbi.com/product/schema#notSupported",tr}(It);tt.NotSupportedFilter=Nt;var Ut=function(fr){function tr(yr,hn,Nr){var zr=fr.call(this,yr,At.IncludeExclude)||this;return zr.values=Nr,zr.isExclude=hn,zr.schemaUrl=tr.schemaUrl,zr}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.isExclude=this.isExclude,yr.values=this.values,yr},tr.schemaUrl="http://powerbi.com/product/schema#includeExclude",tr}(It);tt.IncludeExcludeFilter=Ut;var Gt=function(fr){function tr(yr,hn,Nr,zr){var kn=fr.call(this,yr,At.TopN)||this;return kn.operator=hn,kn.itemCount=Nr,kn.schemaUrl=tr.schemaUrl,kn.orderBy=zr,kn}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.itemCount=this.itemCount,yr.orderBy=this.orderBy,yr},tr.schemaUrl="http://powerbi.com/product/schema#topN",tr}(It);tt.TopNFilter=Gt;var Pt=function(fr){function tr(yr,hn,Nr,zr,kn){var Kr=fr.call(this,yr,At.RelativeDate)||this;return Kr.operator=hn,Kr.timeUnitsCount=Nr,Kr.timeUnitType=zr,Kr.includeToday=kn,Kr.schemaUrl=tr.schemaUrl,Kr}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.timeUnitsCount=this.timeUnitsCount,yr.timeUnitType=this.timeUnitType,yr.includeToday=this.includeToday,yr},tr.schemaUrl="http://powerbi.com/product/schema#relativeDate",tr}(It);tt.RelativeDateFilter=Pt;var qt=function(fr){function tr(yr,hn,Nr,zr){var kn=fr.call(this,yr,At.RelativeTime)||this;return kn.operator=hn,kn.timeUnitsCount=Nr,kn.timeUnitType=zr,kn.schemaUrl=tr.schemaUrl,kn}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.timeUnitsCount=this.timeUnitsCount,yr.timeUnitType=this.timeUnitType,yr},tr.schemaUrl="http://powerbi.com/product/schema#relativeTime",tr}(It);tt.RelativeTimeFilter=qt;var Kt=function(fr){function tr(yr,hn){for(var Nr=[],zr=2;zr<arguments.length;zr++)Nr[zr-2]=arguments[zr];var kn=fr.call(this,yr,At.Basic)||this;if(kn.operator=hn,kn.schemaUrl=tr.schemaUrl,Nr.length===0&&hn!=="All")throw new Error('values must be a non-empty array unless your operator is "All".');return Array.isArray(Nr[0])?kn.values=Nr[0]:kn.values=Nr,kn}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.values=this.values,yr.requireSingleSelection=!!this.requireSingleSelection,yr},tr.schemaUrl="http://powerbi.com/product/schema#basic",tr}(It);tt.BasicFilter=Kt;var jt=function(fr){function tr(yr,hn,Nr,zr){var kn=fr.call(this,yr,hn,Nr)||this;kn.keyValues=zr,kn.target=yr;var Kr=yr.keys?yr.keys.length:0;if(Kr>0&&!zr)throw new Error("You should pass the values to be filtered for each key. You passed: no values and ".concat(Kr," keys"));if(Kr===0&&zr&&zr.length>0)throw new Error("You passed key values but your target object doesn't contain the keys to be filtered");for(var nn=0,Qn=kn.keyValues;nn<Qn.length;nn++){var Zr=Qn[nn];if(Zr){var on=Zr.length;if(on!==Kr)throw new Error("Each tuple of key values should contain a value for each of the keys. You passed: ".concat(on," values and ").concat(Kr," keys"))}}return kn}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.keyValues=this.keyValues,yr},tr}(Kt);tt.BasicFilterWithKeys=jt;var Ht=function(fr){function tr(yr,hn){var Nr=fr.call(this,yr,At.Identity)||this;return Nr.operator=hn,Nr.schemaUrl=tr.schemaUrl,Nr}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.target=this.target,yr},tr.schemaUrl="http://powerbi.com/product/schema#identity",tr}(It);tt.IdentityFilter=Ht;var Bt=function(fr){function tr(yr,hn,Nr){var zr=fr.call(this,yr,At.Tuple)||this;return zr.operator=hn,zr.schemaUrl=tr.schemaUrl,zr.values=Nr,zr}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.values=this.values,yr.target=this.target,yr},tr.schemaUrl="http://powerbi.com/product/schema#tuple",tr}(It);tt.TupleFilter=Bt;var Jt=function(fr){function tr(yr,hn){for(var Nr=[],zr=2;zr<arguments.length;zr++)Nr[zr-2]=arguments[zr];var kn,Kr=fr.call(this,yr,At.Advanced)||this;if(Kr.schemaUrl=tr.schemaUrl,typeof hn!="string"||hn.length===0)throw new Error("logicalOperator must be a valid operator, You passed: ".concat(hn));if(Kr.logicalOperator=hn,(kn=Array.isArray(Nr[0])?Nr[0]:Nr).length>2)throw new Error("AdvancedFilters may not have more than two conditions. You passed: ".concat(Nr.length));if(kn.length===1&&hn!=="And")throw new Error('Logical Operator must be "And" when there is only one condition provided');return Kr.conditions=kn,Kr}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.logicalOperator=this.logicalOperator,yr.conditions=this.conditions,yr},tr.schemaUrl="http://powerbi.com/product/schema#advanced",tr}(It);tt.AdvancedFilter=Jt;var sr,hr,Ar,yn,Lr,wr,En,Dr,Qr,Bn=function(fr){function tr(yr,hn){var Nr=fr.call(this,yr,At.Hierarchy)||this;return Nr.schemaUrl=tr.schemaUrl,Nr.hierarchyData=hn,Nr}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.hierarchyData=this.hierarchyData,yr.target=this.target,yr},tr.schemaUrl="http://powerbi.com/product/schema#hierarchy",tr}(It);function Br(fr){if(fr.filterType)return fr.filterType;var tr=fr,yr=fr;return typeof tr.operator=="string"&&Array.isArray(tr.values)?At.Basic:typeof yr.logicalOperator=="string"&&Array.isArray(yr.conditions)?At.Advanced:At.Unknown}function Gr(fr){return!(!fr.table||!fr.column||fr.aggregationFunction)}tt.HierarchyFilter=Bn,tt.isFilterKeyColumnsTarget=function(fr){return Gr(fr)&&!!fr.keys},tt.isBasicFilterWithKeys=function(fr){return Br(fr)===At.Basic&&!!fr.keyValues},tt.getFilterType=Br,tt.isMeasure=function(fr){return fr.table!==void 0&&fr.measure!==void 0},tt.isColumn=Gr,tt.isHierarchyLevel=function(fr){return!(!(fr.table&&fr.hierarchy&&fr.hierarchyLevel)||fr.aggregationFunction)},tt.isHierarchyLevelAggr=function(fr){return!!(fr.table&&fr.hierarchy&&fr.hierarchyLevel&&fr.aggregationFunction)},tt.isColumnAggr=function(fr){return!!(fr.table&&fr.column&&fr.aggregationFunction)},tt.isPercentOfGrandTotal=function(fr){return!!fr.percentOfGrandTotal},(Qr=tt.CredentialType||(tt.CredentialType={}))[Qr.NoConnection=0]="NoConnection",Qr[Qr.OnBehalfOf=1]="OnBehalfOf",Qr[Qr.Anonymous=2]="Anonymous",(Dr=tt.DataCacheMode||(tt.DataCacheMode={}))[Dr.Import=0]="Import",Dr[Dr.DirectQuery=1]="DirectQuery",(En=tt.AggregateFunction||(tt.AggregateFunction={}))[En.Default=1]="Default",En[En.None=2]="None",En[En.Sum=3]="Sum",En[En.Min=4]="Min",En[En.Max=5]="Max",En[En.Count=6]="Count",En[En.Average=7]="Average",En[En.DistinctCount=8]="DistinctCount",(wr=tt.BrowserPrintAdjustmentsMode||(tt.BrowserPrintAdjustmentsMode={}))[wr.Default=0]="Default",wr[wr.NoAdjustments=1]="NoAdjustments",(Lr=tt.PageNavigationPosition||(tt.PageNavigationPosition={}))[Lr.Bottom=0]="Bottom",Lr[Lr.Left=1]="Left",(yn=tt.QnaMode||(tt.QnaMode={}))[yn.Interactive=0]="Interactive",yn[yn.ResultOnly=1]="ResultOnly",(Ar=tt.ExportDataType||(tt.ExportDataType={}))[Ar.Summarized=0]="Summarized",Ar[Ar.Underlying=1]="Underlying",(hr=tt.BookmarksPlayMode||(tt.BookmarksPlayMode={}))[hr.Off=0]="Off",hr[hr.Presentation=1]="Presentation",tt.CommonErrorCodes={TokenExpired:"TokenExpired",NotFound:"PowerBIEntityNotFound",InvalidParameters:"Invalid parameters",LoadReportFailed:"LoadReportFailed",NotAuthorized:"PowerBINotAuthorizedException",FailedToLoadModel:"ExplorationContainer_FailedToLoadModel_DefaultDetails"},tt.TextAlignment={Left:"left",Center:"center",Right:"right"},tt.LegendPosition={Top:"Top",Bottom:"Bottom",Right:"Right",Left:"Left",TopCenter:"TopCenter",BottomCenter:"BottomCenter",RightCenter:"RightCenter",LeftCenter:"LeftCenter"},(sr=tt.SortDirection||(tt.SortDirection={}))[sr.Ascending=1]="Ascending",sr[sr.Descending=2]="Descending";var Dn=function(){function fr(tr){this.$schema=tr}return fr.prototype.toJSON=function(){return{$schema:this.$schema}},fr}();tt.Selector=Dn;var Fr=function(fr){function tr(yr){var hn=fr.call(this,tr.schemaUrl)||this;return hn.pageName=yr,hn}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.pageName=this.pageName,yr},tr.schemaUrl="http://powerbi.com/product/schema#pageSelector",tr}(Dn);tt.PageSelector=Fr;var _i=function(fr){function tr(yr){var hn=fr.call(this,tr.schemaUrl)||this;return hn.visualName=yr,hn}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.visualName=this.visualName,yr},tr.schemaUrl="http://powerbi.com/product/schema#visualSelector",tr}(Dn);tt.VisualSelector=_i;var Gn=function(fr){function tr(yr){var hn=fr.call(this,_i.schemaUrl)||this;return hn.visualType=yr,hn}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.visualType=this.visualType,yr},tr.schemaUrl="http://powerbi.com/product/schema#visualTypeSelector",tr}(Dn);tt.VisualTypeSelector=Gn;var Wt,Lt,zt,Zt=function(fr){function tr(yr){var hn=fr.call(this,_i.schemaUrl)||this;return hn.target=yr,hn}return St(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.target=this.target,yr},tr.schemaUrl="http://powerbi.com/product/schema#slicerTargetSelector",tr}(Dn);function ar(fr){return Array.isArray(fr)}function Or(fr){return fr&&!!fr.groupName}function vr(fr){return Array.isArray(fr)}function Rr(fr){var tr=fr.message;return tr||(tr="".concat(fr.path," is invalid. Not meeting ").concat(fr.keyword," constraint")),{message:tr}}tt.SlicerTargetSelector=Zt,(zt=tt.CommandDisplayOption||(tt.CommandDisplayOption={}))[zt.Enabled=0]="Enabled",zt[zt.Disabled=1]="Disabled",zt[zt.Hidden=2]="Hidden",(Lt=tt.VisualDataRoleKind||(tt.VisualDataRoleKind={}))[Lt.Grouping=0]="Grouping",Lt[Lt.Measure=1]="Measure",Lt[Lt.GroupingOrMeasure=2]="GroupingOrMeasure",(Wt=tt.VisualDataRoleKindPreference||(tt.VisualDataRoleKindPreference={}))[Wt.Measure=0]="Measure",Wt[Wt.Grouping=1]="Grouping",tt.isOnLoadFilters=function(fr){return fr&&!ar(fr)},tt.isReportFiltersArray=ar,tt.isFlatMenuExtension=function(fr){return fr&&!Or(fr)},tt.isGroupedMenuExtension=Or,tt.isIExtensions=function(fr){return fr&&!vr(fr)},tt.isIExtensionArray=vr,tt.validateVisualSelector=function(fr){var tr=Ct.Validators.visualSelectorValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateSlicer=function(fr){var tr=Ct.Validators.slicerValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateSlicerState=function(fr){var tr=Ct.Validators.slicerStateValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validatePlayBookmarkRequest=function(fr){var tr=Ct.Validators.playBookmarkRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateAddBookmarkRequest=function(fr){var tr=Ct.Validators.addBookmarkRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateApplyBookmarkByNameRequest=function(fr){var tr=Ct.Validators.applyBookmarkByNameRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateApplyBookmarkStateRequest=function(fr){var tr=Ct.Validators.applyBookmarkStateRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateCaptureBookmarkRequest=function(fr){var tr=Ct.Validators.captureBookmarkRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateSettings=function(fr){var tr=Ct.Validators.settingsValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validatePanes=function(fr){var tr=Ct.Validators.reportPanesValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateBookmarksPane=function(fr){var tr=Ct.Validators.bookmarksPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateFiltersPane=function(fr){var tr=Ct.Validators.filtersPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateFieldsPane=function(fr){var tr=Ct.Validators.fieldsPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validatePageNavigationPane=function(fr){var tr=Ct.Validators.pageNavigationPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateSelectionPane=function(fr){var tr=Ct.Validators.selectionPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateSyncSlicersPane=function(fr){var tr=Ct.Validators.syncSlicersPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateVisualizationsPane=function(fr){var tr=Ct.Validators.visualizationsPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateCustomPageSize=function(fr){var tr=Ct.Validators.customPageSizeValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateExtension=function(fr){var tr=Ct.Validators.extensionValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateMenuGroupExtension=function(fr){var tr=Ct.Validators.menuGroupExtensionValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateReportLoad=function(fr){var tr=Ct.Validators.reportLoadValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validatePaginatedReportLoad=function(fr){var tr=Ct.Validators.paginatedReportLoadValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateCreateReport=function(fr){var tr=Ct.Validators.reportCreateValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateQuickCreate=function(fr){var tr=Ct.Validators.quickCreateValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateDashboardLoad=function(fr){var tr=Ct.Validators.dashboardLoadValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateTileLoad=function(fr){var tr=Ct.Validators.tileLoadValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validatePage=function(fr){var tr=Ct.Validators.pageValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateFilter=function(fr){var tr=Ct.Validators.filterValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateUpdateFiltersRequest=function(fr){var tr=Ct.Validators.updateFiltersRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateSaveAsParameters=function(fr){var tr=Ct.Validators.saveAsParametersValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateLoadQnaConfiguration=function(fr){var tr=Ct.Validators.loadQnaValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateQnaInterpretInputData=function(fr){var tr=Ct.Validators.qnaInterpretInputDataValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateExportDataRequest=function(fr){var tr=Ct.Validators.exportDataRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateVisualHeader=function(fr){var tr=Ct.Validators.visualHeaderValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateVisualSettings=function(fr){var tr=Ct.Validators.visualSettingsValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateCommandsSettings=function(fr){var tr=Ct.Validators.commandsSettingsValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateCustomTheme=function(fr){var tr=Ct.Validators.customThemeValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validateZoomLevel=function(fr){var tr=Ct.Validators.zoomLevelValidator.validate(fr);return tr?tr.map(Rr):void 0},tt.validatePrintSettings=function(fr){var tr=Ct.Validators.printSettingsValidator.validate(fr);return tr?tr.map(Rr):void 0}},(vt,tt,bt)=>{Object.defineProperty(tt,"__esModule",{value:!0}),tt.Validators=void 0;var ht=bt(2),St=bt(5),At=bt(6),Tt=bt(7),ft=bt(8),_t=bt(9),Rt=bt(10),Mt=bt(11),Et=bt(12),kt=bt(13),at=bt(14),s=bt(15),b=bt(16),$=bt(17),_e=bt(18),it=bt(19),pt=bt(20),yt=bt(21),ct=bt(22),_=bt(23),rt=bt(24),Ct=bt(25),It=bt(26),Nt=bt(27),Ut=bt(28),Gt=bt(29),Pt=bt(4),qt=bt(30),Kt=bt(31),jt=bt(32),Ht=bt(33);tt.Validators={addBookmarkRequestValidator:new St.AddBookmarkRequestValidator,advancedFilterTypeValidator:new Pt.EnumValidator([0]),advancedFilterValidator:new Et.AdvancedFilterValidator,anyArrayValidator:new Pt.ArrayValidator([new It.AnyOfValidator([new Pt.StringValidator,new Pt.NumberValidator,new Pt.BooleanValidator])]),anyFilterValidator:new It.AnyOfValidator([new Et.BasicFilterValidator,new Et.AdvancedFilterValidator,new Et.IncludeExcludeFilterValidator,new Et.NotSupportedFilterValidator,new Et.RelativeDateFilterValidator,new Et.TopNFilterValidator,new Et.RelativeTimeFilterValidator,new Et.HierarchyFilterValidator]),anyValueValidator:new It.AnyOfValidator([new Pt.StringValidator,new Pt.NumberValidator,new Pt.BooleanValidator]),actionBarValidator:new ht.ActionBarValidator,statusBarValidator:new ht.StatusBarValidator,applyBookmarkByNameRequestValidator:new St.ApplyBookmarkByNameRequestValidator,applyBookmarkStateRequestValidator:new St.ApplyBookmarkStateRequestValidator,applyBookmarkValidator:new It.AnyOfValidator([new St.ApplyBookmarkByNameRequestValidator,new St.ApplyBookmarkStateRequestValidator]),backgroundValidator:new Pt.EnumValidator([0,1]),basicFilterTypeValidator:new Pt.EnumValidator([1]),basicFilterValidator:new Et.BasicFilterValidator,booleanArrayValidator:new Pt.BooleanArrayValidator,booleanValidator:new Pt.BooleanValidator,bookmarksPaneValidator:new s.BookmarksPaneValidator,captureBookmarkOptionsValidator:new St.CaptureBookmarkOptionsValidator,captureBookmarkRequestValidator:new St.CaptureBookmarkRequestValidator,columnSchemaArrayValidator:new Pt.ArrayValidator([new Kt.ColumnSchemaValidator]),commandDisplayOptionValidator:new Pt.EnumValidator([0,1,2]),commandExtensionSelectorValidator:new It.AnyOfValidator([new yt.VisualSelectorValidator,new yt.VisualTypeSelectorValidator]),commandExtensionArrayValidator:new Pt.ArrayValidator([new Mt.CommandExtensionValidator]),commandExtensionValidator:new Mt.CommandExtensionValidator,commandsSettingsArrayValidator:new Pt.ArrayValidator([new At.CommandsSettingsValidator]),commandsSettingsValidator:new At.CommandsSettingsValidator,conditionItemValidator:new Et.ConditionItemValidator,contrastModeValidator:new Pt.EnumValidator([0,1,2,3,4]),credentialDetailsValidator:new Gt.MapValidator([new Pt.StringValidator],[new Pt.StringValidator]),credentialsValidator:new Kt.CredentialsValidator,credentialTypeValidator:new Pt.EnumValidator([0,1,2]),customLayoutDisplayOptionValidator:new Pt.EnumValidator([0,1,2]),customLayoutValidator:new kt.CustomLayoutValidator,customPageSizeValidator:new at.CustomPageSizeValidator,customThemeValidator:new Tt.CustomThemeValidator,dashboardLoadValidator:new ft.DashboardLoadValidator,dataCacheModeValidator:new Pt.EnumValidator([0,1]),datasetBindingValidator:new _t.DatasetBindingValidator,datasetCreateConfigValidator:new Kt.DatasetCreateConfigValidator,datasourceConnectionConfigValidator:new Kt.DatasourceConnectionConfigValidator,displayStateModeValidator:new Pt.EnumValidator([0,1]),displayStateValidator:new kt.DisplayStateValidator,exportDataRequestValidator:new Rt.ExportDataRequestValidator,extensionArrayValidator:new Pt.ArrayValidator([new Mt.ExtensionValidator]),extensionsValidator:new It.AnyOfValidator([new Pt.ArrayValidator([new Mt.ExtensionValidator]),new Mt.ExtensionsValidator]),extensionPointsValidator:new Mt.ExtensionPointsValidator,extensionValidator:new Mt.ExtensionValidator,fieldForbiddenValidator:new Nt.FieldForbiddenValidator,fieldRequiredValidator:new Ut.FieldRequiredValidator,fieldsPaneValidator:new s.FieldsPaneValidator,filterColumnTargetValidator:new Et.FilterColumnTargetValidator,filterDisplaySettingsValidator:new Et.FilterDisplaySettingsValidator,filterConditionsValidator:new Pt.ArrayValidator([new Et.ConditionItemValidator]),filterHierarchyTargetValidator:new Et.FilterHierarchyTargetValidator,filterMeasureTargetValidator:new Et.FilterMeasureTargetValidator,filterTargetValidator:new It.AnyOfValidator([new Et.FilterColumnTargetValidator,new Et.FilterHierarchyTargetValidator,new Et.FilterMeasureTargetValidator,new Pt.ArrayValidator([new It.AnyOfValidator([new Et.FilterColumnTargetValidator,new Et.FilterHierarchyTargetValidator,new Et.FilterMeasureTargetValidator,new Et.FilterKeyColumnsTargetValidator,new Et.FilterKeyHierarchyTargetValidator])])]),filterValidator:new Et.FilterValidator,filterTypeValidator:new Pt.EnumValidator([0,1,2,3,4,5,6,7,9]),filtersArrayValidator:new Pt.ArrayValidator([new Et.FilterValidator]),filtersOperationsUpdateValidator:new Pt.EnumValidator([1,2,3]),filtersOperationsRemoveAllValidator:new Pt.EnumValidator([0]),filtersPaneValidator:new s.FiltersPaneValidator,hyperlinkClickBehaviorValidator:new Pt.EnumValidator([0,1,2]),includeExcludeFilterValidator:new Et.IncludeExcludeFilterValidator,includeExludeFilterTypeValidator:new Pt.EnumValidator([3]),hierarchyFilterTypeValidator:new Pt.EnumValidator([9]),hierarchyFilterValuesValidator:new Pt.ArrayValidator([new Et.HierarchyFilterNodeValidator]),layoutTypeValidator:new Pt.EnumValidator([0,1,2,3]),loadQnaValidator:new b.LoadQnaValidator,menuExtensionValidator:new It.AnyOfValidator([new Mt.FlatMenuExtensionValidator,new Mt.GroupedMenuExtensionValidator]),menuGroupExtensionArrayValidator:new Pt.ArrayValidator([new Mt.MenuGroupExtensionValidator]),menuGroupExtensionValidator:new Mt.MenuGroupExtensionValidator,menuLocationValidator:new Pt.EnumValidator([0,1]),notSupportedFilterTypeValidator:new Pt.EnumValidator([2]),notSupportedFilterValidator:new Et.NotSupportedFilterValidator,numberArrayValidator:new Pt.NumberArrayValidator,numberValidator:new Pt.NumberValidator,onLoadFiltersBaseValidator:new It.AnyOfValidator([new Et.OnLoadFiltersBaseValidator,new Et.OnLoadFiltersBaseRemoveOperationValidator]),pageLayoutValidator:new Gt.MapValidator([new Pt.StringValidator],[new kt.VisualLayoutValidator]),pageNavigationPaneValidator:new s.PageNavigationPaneValidator,pageNavigationPositionValidator:new Pt.EnumValidator([0,1]),pageSizeTypeValidator:new Pt.EnumValidator([0,1,2,3,4,5]),pageSizeValidator:new at.PageSizeValidator,pageValidator:new at.PageValidator,pageViewFieldValidator:new at.PageViewFieldValidator,pagesLayoutValidator:new Gt.MapValidator([new Pt.StringValidator],[new kt.PageLayoutValidator]),paginatedReportCommandsValidator:new At.PaginatedReportCommandsValidator,paginatedReportLoadValidator:new it.PaginatedReportLoadValidator,paginatedReportsettingsValidator:new ct.PaginatedReportSettingsValidator,parameterValuesArrayValidator:new Pt.ArrayValidator([new it.ReportParameterFieldsValidator]),parametersPanelValidator:new qt.ParametersPanelValidator,permissionsValidator:new Pt.EnumValidator([0,1,2,4,7]),playBookmarkRequestValidator:new St.PlayBookmarkRequestValidator,printSettingsValidator:new Ht.PrintSettingsValidator,qnaInterpretInputDataValidator:new b.QnaInterpretInputDataValidator,qnaPanesValidator:new s.QnaPanesValidator,qnaSettingValidator:new b.QnaSettingsValidator,quickCreateValidator:new jt.QuickCreateValidator,rawDataValidator:new Pt.ArrayValidator([new Pt.ArrayValidator([new Pt.StringValidator])]),relativeDateFilterOperatorValidator:new Pt.EnumValidator([0,1,2]),relativeDateFilterTimeUnitTypeValidator:new Pt.EnumValidator([0,1,2,3,4,5,6]),relativeDateFilterTypeValidator:new Pt.EnumValidator([4]),relativeDateFilterValidator:new Et.RelativeDateFilterValidator,relativeDateTimeFilterTypeValidator:new Pt.EnumValidator([4,7]),relativeDateTimeFilterUnitTypeValidator:new Pt.EnumValidator([0,1,2,3,4,5,6,7,8]),relativeTimeFilterTimeUnitTypeValidator:new Pt.EnumValidator([7,8]),relativeTimeFilterTypeValidator:new Pt.EnumValidator([7]),relativeTimeFilterValidator:new Et.RelativeTimeFilterValidator,reportBarsValidator:new ht.ReportBarsValidator,reportCreateValidator:new $.ReportCreateValidator,reportLoadFiltersValidator:new It.AnyOfValidator([new Pt.ArrayValidator([new Et.FilterValidator]),new Et.OnLoadFiltersValidator]),reportLoadValidator:new _e.ReportLoadValidator,reportPanesValidator:new s.ReportPanesValidator,saveAsParametersValidator:new pt.SaveAsParametersValidator,selectionPaneValidator:new s.SelectionPaneValidator,settingsValidator:new ct.SettingsValidator,singleCommandSettingsValidator:new At.SingleCommandSettingsValidator,slicerSelectorValidator:new It.AnyOfValidator([new yt.VisualSelectorValidator,new yt.SlicerTargetSelectorValidator]),slicerStateValidator:new _.SlicerStateValidator,slicerTargetValidator:new It.AnyOfValidator([new Et.FilterColumnTargetValidator,new Et.FilterHierarchyTargetValidator,new Et.FilterMeasureTargetValidator,new Et.FilterKeyColumnsTargetValidator,new Et.FilterKeyHierarchyTargetValidator]),slicerValidator:new _.SlicerValidator,stringArrayValidator:new Pt.StringArrayValidator,stringValidator:new Pt.StringValidator,syncSlicersPaneValidator:new s.SyncSlicersPaneValidator,tableDataArrayValidator:new Pt.ArrayValidator([new Kt.TableDataValidator]),tableSchemaListValidator:new Pt.ArrayValidator([new Kt.TableSchemaValidator]),tileLoadValidator:new rt.TileLoadValidator,tokenTypeValidator:new Pt.EnumValidator([0,1]),topNFilterTypeValidator:new Pt.EnumValidator([5]),topNFilterValidator:new Et.TopNFilterValidator,updateFiltersRequestValidator:new It.AnyOfValidator([new Et.UpdateFiltersRequestValidator,new Et.RemoveFiltersRequestValidator]),viewModeValidator:new Pt.EnumValidator([0,1]),visualCommandSelectorValidator:new It.AnyOfValidator([new yt.VisualSelectorValidator,new yt.VisualTypeSelectorValidator]),visualHeaderSelectorValidator:new It.AnyOfValidator([new yt.VisualSelectorValidator,new yt.VisualTypeSelectorValidator]),visualHeaderSettingsValidator:new Ct.VisualHeaderSettingsValidator,visualHeaderValidator:new Ct.VisualHeaderValidator,visualHeadersValidator:new Pt.ArrayValidator([new Ct.VisualHeaderValidator]),visualizationsPaneValidator:new s.VisualizationsPaneValidator,visualLayoutValidator:new kt.VisualLayoutValidator,visualSelectorValidator:new yt.VisualSelectorValidator,visualSettingsValidator:new Ct.VisualSettingsValidator,visualTypeSelectorValidator:new yt.VisualTypeSelectorValidator,zoomLevelValidator:new Pt.RangeValidator(.25,4)}},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Et,kt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,s){at.__proto__=s}||function(at,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(at[b]=s[b])},ht(Et,kt)},function(Et,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");function at(){this.constructor=Et}ht(Et,kt),Et.prototype=kt===null?Object.create(kt):(at.prototype=kt.prototype,new at)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.StatusBarValidator=tt.ActionBarValidator=tt.ReportBarsValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"actionBar",validators:[ft.Validators.actionBarValidator]},{field:"statusBar",validators:[ft.Validators.statusBarValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.ReportBarsValidator=_t;var Rt=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"visible",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.ActionBarValidator=Rt;var Mt=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"visible",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.StatusBarValidator=Mt},(vt,tt)=>{Object.defineProperty(tt,"__esModule",{value:!0}),tt.MultipleFieldsValidator=void 0;var bt=function(){function ht(St){this.fieldValidatorsPairs=St}return ht.prototype.validate=function(St,At,Tt){if(!this.fieldValidatorsPairs)return null;for(var ft=At?At+"."+Tt:Tt,_t=0,Rt=this.fieldValidatorsPairs;_t<Rt.length;_t++)for(var Mt=Rt[_t],Et=0,kt=Mt.validators;Et<kt.length;Et++){var at=kt[Et].validate(St[Mt.field],ft,Mt.field);if(at)return at}return null},ht}();tt.MultipleFieldsValidator=bt},function(vt,tt){var bt,ht=this&&this.__extends||(bt=function(_e,it){return bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,yt){pt.__proto__=yt}||function(pt,yt){for(var ct in yt)Object.prototype.hasOwnProperty.call(yt,ct)&&(pt[ct]=yt[ct])},bt(_e,it)},function(_e,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");function pt(){this.constructor=_e}bt(_e,it),_e.prototype=it===null?Object.create(it):(pt.prototype=it.prototype,new pt)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.RangeValidator=tt.NumberArrayValidator=tt.BooleanArrayValidator=tt.StringArrayValidator=tt.EnumValidator=tt.SchemaValidator=tt.ValueValidator=tt.NumberValidator=tt.BooleanValidator=tt.StringValidator=tt.TypeValidator=tt.ArrayValidator=tt.ObjectValidator=void 0;var St=function(){function _e(){}return _e.prototype.validate=function(it,pt,yt){return it==null?null:typeof it!="object"||Array.isArray(it)?[{message:yt!==void 0?yt+" must be an object":"input must be an object",path:pt,keyword:"type"}]:null},_e}();tt.ObjectValidator=St;var At=function(){function _e(it){this.itemValidators=it}return _e.prototype.validate=function(it,pt,yt){if(it==null)return null;if(!Array.isArray(it))return[{message:yt+" property is invalid",path:(pt?pt+".":"")+yt,keyword:"type"}];for(var ct=0;ct<it.length;ct++)for(var _=(pt?pt+".":"")+yt+"."+ct.toString(),rt=0,Ct=this.itemValidators;rt<Ct.length;rt++)if(Ct[rt].validate(it[ct],_,yt))return[{message:yt+" property is invalid",path:(pt?pt+".":"")+yt,keyword:"type"}];return null},_e}();tt.ArrayValidator=At;var Tt=function(){function _e(it){this.expectedType=it}return _e.prototype.validate=function(it,pt,yt){return it==null?null:typeof it!==this.expectedType?[{message:yt+" must be a "+this.expectedType,path:(pt?pt+".":"")+yt,keyword:"type"}]:null},_e}();tt.TypeValidator=Tt;var ft=function(_e){function it(){return _e.call(this,"string")||this}return ht(it,_e),it}(Tt);tt.StringValidator=ft;var _t=function(_e){function it(){return _e.call(this,"boolean")||this}return ht(it,_e),it}(Tt);tt.BooleanValidator=_t;var Rt=function(_e){function it(){return _e.call(this,"number")||this}return ht(it,_e),it}(Tt);tt.NumberValidator=Rt;var Mt=function(){function _e(it){this.possibleValues=it}return _e.prototype.validate=function(it,pt,yt){return it==null?null:this.possibleValues.indexOf(it)<0?[{message:yt+" property is invalid",path:(pt?pt+".":"")+yt,keyword:"invalid"}]:null},_e}();tt.ValueValidator=Mt;var Et=function(_e){function it(pt){var yt=_e.call(this,[pt])||this;return yt.schemaValue=pt,yt}return ht(it,_e),it.prototype.validate=function(pt,yt,ct){return _e.prototype.validate.call(this,pt,yt,ct)},it}(Mt);tt.SchemaValidator=Et;var kt=function(_e){function it(pt){var yt=_e.call(this)||this;return yt.possibleValues=pt,yt}return ht(it,_e),it.prototype.validate=function(pt,yt,ct){return pt==null?null:_e.prototype.validate.call(this,pt,yt,ct)||new Mt(this.possibleValues).validate(pt,yt,ct)},it}(Rt);tt.EnumValidator=kt;var at=function(_e){function it(){return _e.call(this,[new ft])||this}return ht(it,_e),it.prototype.validate=function(pt,yt,ct){return _e.prototype.validate.call(this,pt,yt,ct)?[{message:ct+" must be an array of strings",path:(yt?yt+".":"")+ct,keyword:"type"}]:null},it}(At);tt.StringArrayValidator=at;var s=function(_e){function it(){return _e.call(this,[new _t])||this}return ht(it,_e),it.prototype.validate=function(pt,yt,ct){return _e.prototype.validate.call(this,pt,yt,ct)?[{message:ct+" must be an array of booleans",path:(yt?yt+".":"")+ct,keyword:"type"}]:null},it}(At);tt.BooleanArrayValidator=s;var b=function(_e){function it(){return _e.call(this,[new Rt])||this}return ht(it,_e),it.prototype.validate=function(pt,yt,ct){return _e.prototype.validate.call(this,pt,yt,ct)?[{message:ct+" must be an array of numbers",path:(yt?yt+".":"")+ct,keyword:"type"}]:null},it}(At);tt.NumberArrayValidator=b;var $=function(_e){function it(pt,yt){var ct=_e.call(this)||this;return ct.minValue=pt,ct.maxValue=yt,ct}return ht(it,_e),it.prototype.validate=function(pt,yt,ct){return pt==null?null:_e.prototype.validate.call(this,pt,yt,ct)||(pt>this.maxValue||pt<this.minValue?[{message:ct+" must be a number between "+this.minValue.toString()+" and "+this.maxValue.toString(),path:(yt?yt+".":"")+ct,keyword:"range"}]:null)},it}(Rt);tt.RangeValidator=$},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(s,b){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&($[it]=_e[it])},ht(s,b)},function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function $(){this.constructor=s}ht(s,b),s.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.CaptureBookmarkRequestValidator=tt.CaptureBookmarkOptionsValidator=tt.ApplyBookmarkStateRequestValidator=tt.ApplyBookmarkByNameRequestValidator=tt.AddBookmarkRequestValidator=tt.PlayBookmarkRequestValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"playMode",validators:[ft.Validators.fieldRequiredValidator,new Tt.EnumValidator([0,1])]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.PlayBookmarkRequestValidator=_t;var Rt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"state",validators:[ft.Validators.stringValidator]},{field:"displayName",validators:[ft.Validators.stringValidator]},{field:"apply",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.AddBookmarkRequestValidator=Rt;var Mt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"name",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.ApplyBookmarkByNameRequestValidator=Mt;var Et=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"state",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.ApplyBookmarkStateRequestValidator=Et;var kt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"personalizeVisuals",validators:[ft.Validators.booleanValidator]},{field:"allPages",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.CaptureBookmarkOptionsValidator=kt;var at=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"options",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.captureBookmarkOptionsValidator]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.CaptureBookmarkRequestValidator=at},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Et,kt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,s){at.__proto__=s}||function(at,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(at[b]=s[b])},ht(Et,kt)},function(Et,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");function at(){this.constructor=Et}ht(Et,kt),Et.prototype=kt===null?Object.create(kt):(at.prototype=kt.prototype,new at)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.PaginatedReportCommandsValidator=tt.SingleCommandSettingsValidator=tt.CommandsSettingsValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"copy",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"drill",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"drillthrough",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"expandCollapse",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"exportData",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"includeExclude",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"removeVisual",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"search",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"seeData",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"sort",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"spotlight",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"insightsAnalysis",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"addComment",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"groupVisualContainers",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"summarize",validators:[ft.Validators.singleCommandSettingsValidator]},{field:"clearSelection",validators:[ft.Validators.singleCommandSettingsValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.CommandsSettingsValidator=_t;var Rt=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"displayOption",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.commandDisplayOptionValidator]},{field:"selector",validators:[ft.Validators.visualCommandSelectorValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.SingleCommandSettingsValidator=Rt;var Mt=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"parameterPanel",validators:[ft.Validators.parametersPanelValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.PaginatedReportCommandsValidator=Mt},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(_t,Rt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,Et){Mt.__proto__=Et}||function(Mt,Et){for(var kt in Et)Object.prototype.hasOwnProperty.call(Et,kt)&&(Mt[kt]=Et[kt])},ht(_t,Rt)},function(_t,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");function Mt(){this.constructor=_t}ht(_t,Rt),_t.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.CustomThemeValidator=void 0;var At=bt(3),Tt=bt(4),ft=function(_t){function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return St(Rt,_t),Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"themeJson",validators:[new Tt.ObjectValidator]}];return new At.MultipleFieldsValidator(s).validate(Mt,Et,kt)},Rt}(Tt.ObjectValidator);tt.CustomThemeValidator=ft},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function Et(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.DashboardLoadValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return St(Mt,Rt),Mt.prototype.validate=function(Et,kt,at){if(Et==null)return null;var s=Rt.prototype.validate.call(this,Et,kt,at);if(s)return s;var b=[{field:"accessToken",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"id",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"groupId",validators:[ft.Validators.stringValidator]},{field:"pageView",validators:[ft.Validators.pageViewFieldValidator]},{field:"tokenType",validators:[ft.Validators.tokenTypeValidator]},{field:"embedUrl",validators:[ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(b).validate(Et,kt,at)},Mt}(Tt.ObjectValidator);tt.DashboardLoadValidator=_t},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function Et(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.DatasetBindingValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return St(Mt,Rt),Mt.prototype.validate=function(Et,kt,at){if(Et==null)return null;var s=Rt.prototype.validate.call(this,Et,kt,at);if(s)return s;var b=[{field:"datasetId",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(b).validate(Et,kt,at)},Mt}(Tt.ObjectValidator);tt.DatasetBindingValidator=_t},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(_t,Rt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,Et){Mt.__proto__=Et}||function(Mt,Et){for(var kt in Et)Object.prototype.hasOwnProperty.call(Et,kt)&&(Mt[kt]=Et[kt])},ht(_t,Rt)},function(_t,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");function Mt(){this.constructor=_t}ht(_t,Rt),_t.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.ExportDataRequestValidator=void 0;var At=bt(3),Tt=bt(4),ft=function(_t){function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return St(Rt,_t),Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"rows",validators:[new Tt.NumberValidator]},{field:"exportDataType",validators:[new Tt.EnumValidator([0,1])]}];return new At.MultipleFieldsValidator(s).validate(Mt,Et,kt)},Rt}(Tt.ObjectValidator);tt.ExportDataRequestValidator=ft},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(_e,it){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,yt){pt.__proto__=yt}||function(pt,yt){for(var ct in yt)Object.prototype.hasOwnProperty.call(yt,ct)&&(pt[ct]=yt[ct])},ht(_e,it)},function(_e,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");function pt(){this.constructor=_e}ht(_e,it),_e.prototype=it===null?Object.create(it):(pt.prototype=it.prototype,new pt)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.ExtensionsValidator=tt.MenuGroupExtensionValidator=tt.ExtensionValidator=tt.CommandExtensionValidator=tt.ExtensionItemValidator=tt.ExtensionPointsValidator=tt.GroupedMenuExtensionValidator=tt.FlatMenuExtensionValidator=tt.MenuExtensionBaseValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"title",validators:[ft.Validators.stringValidator]},{field:"icon",validators:[ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.MenuExtensionBaseValidator=_t;var Rt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"menuLocation",validators:[ft.Validators.menuLocationValidator]},{field:"groupName",validators:[ft.Validators.fieldForbiddenValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(_t);tt.FlatMenuExtensionValidator=Rt;var Mt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"groupName",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"menuLocation",validators:[ft.Validators.fieldForbiddenValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(_t);tt.GroupedMenuExtensionValidator=Mt;var Et=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"visualContextMenu",validators:[ft.Validators.menuExtensionValidator]},{field:"visualOptionsMenu",validators:[ft.Validators.menuExtensionValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.ExtensionPointsValidator=Et;var kt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"name",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"extend",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.extensionPointsValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.ExtensionItemValidator=kt;var at=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"title",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"icon",validators:[ft.Validators.stringValidator]},{field:"selector",validators:[ft.Validators.commandExtensionSelectorValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(kt);tt.CommandExtensionValidator=at;var s=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"command",validators:[ft.Validators.commandExtensionValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.ExtensionValidator=s;var b=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"name",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"title",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"menuLocation",validators:[ft.Validators.menuLocationValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.MenuGroupExtensionValidator=b;var $=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"commands",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.commandExtensionArrayValidator]},{field:"groups",validators:[ft.Validators.menuGroupExtensionArrayValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.ExtensionsValidator=$},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(jt,Ht){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Bt,Jt){Bt.__proto__=Jt}||function(Bt,Jt){for(var sr in Jt)Object.prototype.hasOwnProperty.call(Jt,sr)&&(Bt[sr]=Jt[sr])},ht(jt,Ht)},function(jt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Class extends value "+String(Ht)+" is not a constructor or null");function Bt(){this.constructor=jt}ht(jt,Ht),jt.prototype=Ht===null?Object.create(Ht):(Bt.prototype=Ht.prototype,new Bt)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.OnLoadFiltersValidator=tt.OnLoadFiltersBaseRemoveOperationValidator=tt.OnLoadFiltersBaseValidator=tt.ConditionItemValidator=tt.RemoveFiltersRequestValidator=tt.UpdateFiltersRequestValidator=tt.FilterValidator=tt.HierarchyFilterNodeValidator=tt.HierarchyFilterValidator=tt.IncludeExcludeFilterValidator=tt.NotSupportedFilterValidator=tt.TopNFilterValidator=tt.RelativeTimeFilterValidator=tt.RelativeDateFilterValidator=tt.RelativeDateTimeFilterValidator=tt.AdvancedFilterValidator=tt.BasicFilterValidator=tt.FilterValidatorBase=tt.FilterDisplaySettingsValidator=tt.FilterMeasureTargetValidator=tt.FilterKeyHierarchyTargetValidator=tt.FilterHierarchyTargetValidator=tt.FilterKeyColumnsTargetValidator=tt.FilterColumnTargetValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"table",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"column",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.FilterColumnTargetValidator=_t;var Rt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"keys",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(_t);tt.FilterKeyColumnsTargetValidator=Rt;var Mt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"table",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"hierarchy",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"hierarchyLevel",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.FilterHierarchyTargetValidator=Mt;var Et=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"keys",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Mt);tt.FilterKeyHierarchyTargetValidator=Et;var kt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"table",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"measure",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.FilterMeasureTargetValidator=kt;var at=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"isLockedInViewMode",validators:[ft.Validators.booleanValidator]},{field:"isHiddenInViewMode",validators:[ft.Validators.booleanValidator]},{field:"displayName",validators:[ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.FilterDisplaySettingsValidator=at;var s=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"target",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.filterTargetValidator]},{field:"$schema",validators:[ft.Validators.stringValidator]},{field:"filterType",validators:[ft.Validators.filterTypeValidator]},{field:"displaySettings",validators:[ft.Validators.filterDisplaySettingsValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.FilterValidatorBase=s;var b=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"operator",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"values",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.anyArrayValidator]},{field:"filterType",validators:[ft.Validators.basicFilterTypeValidator]},{field:"requireSingleSelection",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);tt.BasicFilterValidator=b;var $=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"logicalOperator",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"conditions",validators:[ft.Validators.filterConditionsValidator]},{field:"filterType",validators:[ft.Validators.advancedFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);tt.AdvancedFilterValidator=$;var _e=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"operator",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.relativeDateFilterOperatorValidator]},{field:"timeUnitsCount",validators:[ft.Validators.numberValidator]},{field:"timeUnitType",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.relativeDateTimeFilterUnitTypeValidator]},{field:"filterType",validators:[ft.Validators.relativeDateTimeFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);tt.RelativeDateTimeFilterValidator=_e;var it=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"includeToday",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.booleanValidator]},{field:"timeUnitType",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.relativeDateFilterTimeUnitTypeValidator]},{field:"filterType",validators:[ft.Validators.relativeDateFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(_e);tt.RelativeDateFilterValidator=it;var pt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"timeUnitType",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.relativeTimeFilterTimeUnitTypeValidator]},{field:"filterType",validators:[ft.Validators.relativeTimeFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(_e);tt.RelativeTimeFilterValidator=pt;var yt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"operator",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"itemCount",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.numberValidator]},{field:"filterType",validators:[ft.Validators.topNFilterTypeValidator]},{field:"orderBy",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.filterTargetValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);tt.TopNFilterValidator=yt;var ct=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"message",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"notSupportedTypeName",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"filterType",validators:[ft.Validators.notSupportedFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);tt.NotSupportedFilterValidator=ct;var _=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"isExclude",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.booleanValidator]},{field:"values",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.anyArrayValidator]},{field:"filterType",validators:[ft.Validators.includeExludeFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);tt.IncludeExcludeFilterValidator=_;var rt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"hierarchyData",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.hierarchyFilterValuesValidator]},{field:"filterType",validators:[ft.Validators.hierarchyFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);tt.HierarchyFilterValidator=rt;var Ct=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"value",validators:[ft.Validators.anyValueValidator]},{field:"keyValues",validators:[ft.Validators.anyArrayValidator]},{field:"children",validators:[ft.Validators.hierarchyFilterValuesValidator]},{field:"operator",validators:[ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.HierarchyFilterNodeValidator=Ct;var It=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){return Bt==null?null:jt.prototype.validate.call(this,Bt,Jt,sr)||ft.Validators.anyFilterValidator.validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.FilterValidator=It;var Nt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"filtersOperation",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.filtersOperationsUpdateValidator]},{field:"filters",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.filtersArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.UpdateFiltersRequestValidator=Nt;var Ut=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"filtersOperation",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.filtersOperationsRemoveAllValidator]},{field:"filters",validators:[ft.Validators.fieldForbiddenValidator,ft.Validators.filtersArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.RemoveFiltersRequestValidator=Ut;var Gt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"value",validators:[ft.Validators.anyValueValidator]},{field:"operator",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.ConditionItemValidator=Gt;var Pt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"operation",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.filtersOperationsUpdateValidator]},{field:"filters",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.filtersArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.OnLoadFiltersBaseValidator=Pt;var qt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"operation",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.filtersOperationsRemoveAllValidator]},{field:"filters",validators:[ft.Validators.fieldForbiddenValidator,ft.Validators.filtersArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.OnLoadFiltersBaseRemoveOperationValidator=qt;var Kt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return St(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"allPages",validators:[ft.Validators.onLoadFiltersBaseValidator]},{field:"currentPage",validators:[ft.Validators.onLoadFiltersBaseValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Tt.ObjectValidator);tt.OnLoadFiltersValidator=Kt},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(kt,at){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,b){s.__proto__=b}||function(s,b){for(var $ in b)Object.prototype.hasOwnProperty.call(b,$)&&(s[$]=b[$])},ht(kt,at)},function(kt,at){if(typeof at!="function"&&at!==null)throw new TypeError("Class extends value "+String(at)+" is not a constructor or null");function s(){this.constructor=kt}ht(kt,at),kt.prototype=at===null?Object.create(at):(s.prototype=at.prototype,new s)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.PageLayoutValidator=tt.DisplayStateValidator=tt.VisualLayoutValidator=tt.CustomLayoutValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"pageSize",validators:[ft.Validators.pageSizeValidator]},{field:"displayOption",validators:[ft.Validators.customLayoutDisplayOptionValidator]},{field:"pagesLayout",validators:[ft.Validators.pagesLayoutValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},at}(Tt.ObjectValidator);tt.CustomLayoutValidator=_t;var Rt=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"x",validators:[ft.Validators.numberValidator]},{field:"y",validators:[ft.Validators.numberValidator]},{field:"z",validators:[ft.Validators.numberValidator]},{field:"width",validators:[ft.Validators.numberValidator]},{field:"height",validators:[ft.Validators.numberValidator]},{field:"displayState",validators:[ft.Validators.displayStateValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},at}(Tt.ObjectValidator);tt.VisualLayoutValidator=Rt;var Mt=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"mode",validators:[ft.Validators.displayStateModeValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},at}(Tt.ObjectValidator);tt.DisplayStateValidator=Mt;var Et=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"visualsLayout",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.pageLayoutValidator]},{field:"defaultLayout",validators:[ft.Validators.visualLayoutValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},at}(Tt.ObjectValidator);tt.PageLayoutValidator=Et},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(kt,at){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,b){s.__proto__=b}||function(s,b){for(var $ in b)Object.prototype.hasOwnProperty.call(b,$)&&(s[$]=b[$])},ht(kt,at)},function(kt,at){if(typeof at!="function"&&at!==null)throw new TypeError("Class extends value "+String(at)+" is not a constructor or null");function s(){this.constructor=kt}ht(kt,at),kt.prototype=at===null?Object.create(at):(s.prototype=at.prototype,new s)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.PageViewFieldValidator=tt.PageValidator=tt.CustomPageSizeValidator=tt.PageSizeValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"type",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.pageSizeTypeValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},at}(Tt.ObjectValidator);tt.PageSizeValidator=_t;var Rt=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"width",validators:[ft.Validators.numberValidator]},{field:"height",validators:[ft.Validators.numberValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},at}(_t);tt.CustomPageSizeValidator=Rt;var Mt=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"name",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},at}(Tt.ObjectValidator);tt.PageValidator=Mt;var Et=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){return s==null?null:kt.prototype.validate.call(this,s,b,$)||(["actualSize","fitToWidth","oneColumn"].indexOf(s)<0?[{message:'pageView must be a string with one of the following values: "actualSize", "fitToWidth", "oneColumn"'}]:null)},at}(Tt.StringValidator);tt.PageViewFieldValidator=Et},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(_e,it){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,yt){pt.__proto__=yt}||function(pt,yt){for(var ct in yt)Object.prototype.hasOwnProperty.call(yt,ct)&&(pt[ct]=yt[ct])},ht(_e,it)},function(_e,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");function pt(){this.constructor=_e}ht(_e,it),_e.prototype=it===null?Object.create(it):(pt.prototype=it.prototype,new pt)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.VisualizationsPaneValidator=tt.SyncSlicersPaneValidator=tt.SelectionPaneValidator=tt.PageNavigationPaneValidator=tt.FiltersPaneValidator=tt.FieldsPaneValidator=tt.BookmarksPaneValidator=tt.QnaPanesValidator=tt.ReportPanesValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"bookmarks",validators:[ft.Validators.bookmarksPaneValidator]},{field:"fields",validators:[ft.Validators.fieldsPaneValidator]},{field:"filters",validators:[ft.Validators.filtersPaneValidator]},{field:"pageNavigation",validators:[ft.Validators.pageNavigationPaneValidator]},{field:"selection",validators:[ft.Validators.selectionPaneValidator]},{field:"syncSlicers",validators:[ft.Validators.syncSlicersPaneValidator]},{field:"visualizations",validators:[ft.Validators.visualizationsPaneValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.ReportPanesValidator=_t;var Rt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"filters",validators:[ft.Validators.filtersPaneValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.QnaPanesValidator=Rt;var Mt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"visible",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.BookmarksPaneValidator=Mt;var Et=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"expanded",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.FieldsPaneValidator=Et;var kt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"visible",validators:[ft.Validators.booleanValidator]},{field:"expanded",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.FiltersPaneValidator=kt;var at=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"visible",validators:[ft.Validators.booleanValidator]},{field:"position",validators:[ft.Validators.pageNavigationPositionValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.PageNavigationPaneValidator=at;var s=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"visible",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.SelectionPaneValidator=s;var b=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"visible",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.SyncSlicersPaneValidator=b;var $=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return St(it,_e),it.prototype.validate=function(pt,yt,ct){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,yt,ct);if(_)return _;var rt=[{field:"expanded",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(rt).validate(pt,yt,ct)},it}(Tt.ObjectValidator);tt.VisualizationsPaneValidator=$},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Et,kt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,s){at.__proto__=s}||function(at,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(at[b]=s[b])},ht(Et,kt)},function(Et,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");function at(){this.constructor=Et}ht(Et,kt),Et.prototype=kt===null?Object.create(kt):(at.prototype=kt.prototype,new at)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.QnaInterpretInputDataValidator=tt.QnaSettingsValidator=tt.LoadQnaValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"accessToken",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"datasetIds",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringArrayValidator]},{field:"question",validators:[ft.Validators.stringValidator]},{field:"viewMode",validators:[ft.Validators.viewModeValidator]},{field:"settings",validators:[ft.Validators.qnaSettingValidator]},{field:"tokenType",validators:[ft.Validators.tokenTypeValidator]},{field:"groupId",validators:[ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.LoadQnaValidator=_t;var Rt=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"filterPaneEnabled",validators:[ft.Validators.booleanValidator]},{field:"hideErrors",validators:[ft.Validators.booleanValidator]},{field:"panes",validators:[ft.Validators.qnaPanesValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.QnaSettingsValidator=Rt;var Mt=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"datasetIds",validators:[ft.Validators.stringArrayValidator]},{field:"question",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.QnaInterpretInputDataValidator=Mt},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function Et(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.ReportCreateValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return St(Mt,Rt),Mt.prototype.validate=function(Et,kt,at){if(Et==null)return null;var s=Rt.prototype.validate.call(this,Et,kt,at);if(s)return s;var b=[{field:"accessToken",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"datasetId",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"groupId",validators:[ft.Validators.stringValidator]},{field:"tokenType",validators:[ft.Validators.tokenTypeValidator]},{field:"theme",validators:[ft.Validators.customThemeValidator]}];return new At.MultipleFieldsValidator(b).validate(Et,kt,at)},Mt}(Tt.ObjectValidator);tt.ReportCreateValidator=_t},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function Et(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.ReportLoadValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return St(Mt,Rt),Mt.prototype.validate=function(Et,kt,at){if(Et==null)return null;var s=Rt.prototype.validate.call(this,Et,kt,at);if(s)return s;var b=[{field:"accessToken",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"id",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"groupId",validators:[ft.Validators.stringValidator]},{field:"settings",validators:[ft.Validators.settingsValidator]},{field:"pageName",validators:[ft.Validators.stringValidator]},{field:"filters",validators:[ft.Validators.reportLoadFiltersValidator]},{field:"permissions",validators:[ft.Validators.permissionsValidator]},{field:"viewMode",validators:[ft.Validators.viewModeValidator]},{field:"tokenType",validators:[ft.Validators.tokenTypeValidator]},{field:"bookmark",validators:[ft.Validators.applyBookmarkValidator]},{field:"theme",validators:[ft.Validators.customThemeValidator]},{field:"embedUrl",validators:[ft.Validators.stringValidator]},{field:"datasetBinding",validators:[ft.Validators.datasetBindingValidator]},{field:"contrastMode",validators:[ft.Validators.contrastModeValidator]}];return new At.MultipleFieldsValidator(b).validate(Et,kt,at)},Mt}(Tt.ObjectValidator);tt.ReportLoadValidator=_t},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Mt,Et){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,at){kt.__proto__=at}||function(kt,at){for(var s in at)Object.prototype.hasOwnProperty.call(at,s)&&(kt[s]=at[s])},ht(Mt,Et)},function(Mt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Class extends value "+String(Et)+" is not a constructor or null");function kt(){this.constructor=Mt}ht(Mt,Et),Mt.prototype=Et===null?Object.create(Et):(kt.prototype=Et.prototype,new kt)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.ReportParameterFieldsValidator=tt.PaginatedReportLoadValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Mt){function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return St(Et,Mt),Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"accessToken",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"id",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"groupId",validators:[ft.Validators.stringValidator]},{field:"settings",validators:[ft.Validators.paginatedReportsettingsValidator]},{field:"tokenType",validators:[ft.Validators.tokenTypeValidator]},{field:"embedUrl",validators:[ft.Validators.stringValidator]},{field:"type",validators:[ft.Validators.stringValidator]},{field:"parameterValues",validators:[ft.Validators.parameterValuesArrayValidator]}];return new At.MultipleFieldsValidator($).validate(kt,at,s)},Et}(Tt.ObjectValidator);tt.PaginatedReportLoadValidator=_t;var Rt=function(){function Mt(){}return Mt.prototype.validate=function(Et,kt,at){if(Et==null)return null;var s=[{field:"name",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"value",validators:[ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(s).validate(Et,kt,at)},Mt}();tt.ReportParameterFieldsValidator=Rt},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function Et(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.SaveAsParametersValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return St(Mt,Rt),Mt.prototype.validate=function(Et,kt,at){if(Et==null)return null;var s=Rt.prototype.validate.call(this,Et,kt,at);if(s)return s;var b=[{field:"name",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(b).validate(Et,kt,at)},Mt}(Tt.ObjectValidator);tt.SaveAsParametersValidator=_t},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(kt,at){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,b){s.__proto__=b}||function(s,b){for(var $ in b)Object.prototype.hasOwnProperty.call(b,$)&&(s[$]=b[$])},ht(kt,at)},function(kt,at){if(typeof at!="function"&&at!==null)throw new TypeError("Class extends value "+String(at)+" is not a constructor or null");function s(){this.constructor=kt}ht(kt,at),kt.prototype=at===null?Object.create(at):(s.prototype=at.prototype,new s)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.SlicerTargetSelectorValidator=tt.VisualTypeSelectorValidator=tt.VisualSelectorValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(4),_t=bt(1),Rt=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"$schema",validators:[_t.Validators.stringValidator,new ft.SchemaValidator("http://powerbi.com/product/schema#visualSelector")]},{field:"visualName",validators:[_t.Validators.fieldRequiredValidator,_t.Validators.stringValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},at}(Tt.ObjectValidator);tt.VisualSelectorValidator=Rt;var Mt=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"$schema",validators:[_t.Validators.fieldRequiredValidator,_t.Validators.stringValidator,new ft.SchemaValidator("http://powerbi.com/product/schema#visualTypeSelector")]},{field:"visualType",validators:[_t.Validators.fieldRequiredValidator,_t.Validators.stringValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},at}(Tt.ObjectValidator);tt.VisualTypeSelectorValidator=Mt;var Et=function(kt){function at(){return kt!==null&&kt.apply(this,arguments)||this}return St(at,kt),at.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"$schema",validators:[_t.Validators.fieldRequiredValidator,_t.Validators.stringValidator,new ft.SchemaValidator("http://powerbi.com/product/schema#slicerTargetSelector")]},{field:"target",validators:[_t.Validators.fieldRequiredValidator,_t.Validators.slicerTargetValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},at}(Tt.ObjectValidator);tt.SlicerTargetSelectorValidator=Et},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Mt,Et){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,at){kt.__proto__=at}||function(kt,at){for(var s in at)Object.prototype.hasOwnProperty.call(at,s)&&(kt[s]=at[s])},ht(Mt,Et)},function(Mt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Class extends value "+String(Et)+" is not a constructor or null");function kt(){this.constructor=Mt}ht(Mt,Et),Mt.prototype=Et===null?Object.create(Et):(kt.prototype=Et.prototype,new kt)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.PaginatedReportSettingsValidator=tt.SettingsValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Mt){function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return St(Et,Mt),Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"filterPaneEnabled",validators:[ft.Validators.booleanValidator]},{field:"navContentPaneEnabled",validators:[ft.Validators.booleanValidator]},{field:"bookmarksPaneEnabled",validators:[ft.Validators.booleanValidator]},{field:"useCustomSaveAsDialog",validators:[ft.Validators.booleanValidator]},{field:"extensions",validators:[ft.Validators.extensionsValidator]},{field:"layoutType",validators:[ft.Validators.layoutTypeValidator]},{field:"customLayout",validators:[ft.Validators.customLayoutValidator]},{field:"background",validators:[ft.Validators.backgroundValidator]},{field:"visualSettings",validators:[ft.Validators.visualSettingsValidator]},{field:"hideErrors",validators:[ft.Validators.booleanValidator]},{field:"commands",validators:[ft.Validators.commandsSettingsArrayValidator]},{field:"hyperlinkClickBehavior",validators:[ft.Validators.hyperlinkClickBehaviorValidator]},{field:"bars",validators:[ft.Validators.reportBarsValidator]},{field:"panes",validators:[ft.Validators.reportPanesValidator]},{field:"personalBookmarksEnabled",validators:[ft.Validators.booleanValidator]},{field:"persistentFiltersEnabled",validators:[ft.Validators.booleanValidator]},{field:"visualRenderedEvents",validators:[ft.Validators.booleanValidator]},{field:"authoringHintsEnabled",validators:[ft.Validators.booleanValidator]},{field:"printSettings",validators:[ft.Validators.printSettingsValidator]}];return new At.MultipleFieldsValidator($).validate(kt,at,s)},Et}(Tt.ObjectValidator);tt.SettingsValidator=_t;var Rt=function(Mt){function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return St(Et,Mt),Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"commands",validators:[ft.Validators.paginatedReportCommandsValidator]}];return new At.MultipleFieldsValidator($).validate(kt,at,s)},Et}(Tt.ObjectValidator);tt.PaginatedReportSettingsValidator=Rt},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Mt,Et){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,at){kt.__proto__=at}||function(kt,at){for(var s in at)Object.prototype.hasOwnProperty.call(at,s)&&(kt[s]=at[s])},ht(Mt,Et)},function(Mt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Class extends value "+String(Et)+" is not a constructor or null");function kt(){this.constructor=Mt}ht(Mt,Et),Mt.prototype=Et===null?Object.create(Et):(kt.prototype=Et.prototype,new kt)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.SlicerStateValidator=tt.SlicerValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Mt){function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return St(Et,Mt),Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"selector",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.slicerSelectorValidator]},{field:"state",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.slicerStateValidator]}];return new At.MultipleFieldsValidator($).validate(kt,at,s)},Et}(Tt.ObjectValidator);tt.SlicerValidator=_t;var Rt=function(Mt){function Et(){return Mt!==null&&Mt.apply(this,arguments)||this}return St(Et,Mt),Et.prototype.validate=function(kt,at,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,at,s);if(b)return b;var $=[{field:"filters",validators:[ft.Validators.filtersArrayValidator]}];return new At.MultipleFieldsValidator($).validate(kt,at,s)},Et}(Tt.ObjectValidator);tt.SlicerStateValidator=Rt},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function Et(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.TileLoadValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return St(Mt,Rt),Mt.prototype.validate=function(Et,kt,at){if(Et==null)return null;var s=Rt.prototype.validate.call(this,Et,kt,at);if(s)return s;var b=[{field:"accessToken",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"id",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"dashboardId",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"groupId",validators:[ft.Validators.stringValidator]},{field:"pageView",validators:[ft.Validators.stringValidator]},{field:"tokenType",validators:[ft.Validators.tokenTypeValidator]},{field:"width",validators:[ft.Validators.numberValidator]},{field:"height",validators:[ft.Validators.numberValidator]}];return new At.MultipleFieldsValidator(b).validate(Et,kt,at)},Mt}(Tt.ObjectValidator);tt.TileLoadValidator=_t},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Et,kt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,s){at.__proto__=s}||function(at,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(at[b]=s[b])},ht(Et,kt)},function(Et,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");function at(){this.constructor=Et}ht(Et,kt),Et.prototype=kt===null?Object.create(kt):(at.prototype=kt.prototype,new at)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.VisualHeaderValidator=tt.VisualHeaderSettingsValidator=tt.VisualSettingsValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"visualHeaders",validators:[ft.Validators.visualHeadersValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.VisualSettingsValidator=_t;var Rt=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"visible",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.VisualHeaderSettingsValidator=Rt;var Mt=function(Et){function kt(){return Et!==null&&Et.apply(this,arguments)||this}return St(kt,Et),kt.prototype.validate=function(at,s,b){if(at==null)return null;var $=Et.prototype.validate.call(this,at,s,b);if($)return $;var _e=[{field:"settings",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.visualHeaderSettingsValidator]},{field:"selector",validators:[ft.Validators.visualHeaderSelectorValidator]}];return new At.MultipleFieldsValidator(_e).validate(at,s,b)},kt}(Tt.ObjectValidator);tt.VisualHeaderValidator=Mt},(vt,tt)=>{Object.defineProperty(tt,"__esModule",{value:!0}),tt.AnyOfValidator=void 0;var bt=function(){function ht(St){this.validators=St}return ht.prototype.validate=function(St,At,Tt){if(St==null)return null;for(var ft=!1,_t=0,Rt=this.validators;_t<Rt.length;_t++)if(!Rt[_t].validate(St,At,Tt)){ft=!0;break}return ft?null:[{message:Tt+" property is invalid",path:(At?At+".":"")+Tt,keyword:"invalid"}]},ht}();tt.AnyOfValidator=bt},(vt,tt)=>{Object.defineProperty(tt,"__esModule",{value:!0}),tt.FieldForbiddenValidator=void 0;var bt=function(){function ht(){}return ht.prototype.validate=function(St,At,Tt){return St!==void 0?[{message:Tt+" is forbidden",path:(At?At+".":"")+Tt,keyword:"forbidden"}]:null},ht}();tt.FieldForbiddenValidator=bt},(vt,tt)=>{Object.defineProperty(tt,"__esModule",{value:!0}),tt.FieldRequiredValidator=void 0;var bt=function(){function ht(){}return ht.prototype.validate=function(St,At,Tt){return St==null?[{message:Tt+" is required",path:(At?At+".":"")+Tt,keyword:"required"}]:null},ht}();tt.FieldRequiredValidator=bt},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Tt,ft){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Rt){_t.__proto__=Rt}||function(_t,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(_t[Mt]=Rt[Mt])},ht(Tt,ft)},function(Tt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");function _t(){this.constructor=Tt}ht(Tt,ft),Tt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.MapValidator=void 0;var At=function(Tt){function ft(_t,Rt){var Mt=Tt.call(this)||this;return Mt.keyValidators=_t,Mt.valueValidators=Rt,Mt}return St(ft,Tt),ft.prototype.validate=function(_t,Rt,Mt){if(_t==null)return null;var Et=Tt.prototype.validate.call(this,_t,Rt,Mt);if(Et)return Et;for(var kt in _t)if(_t.hasOwnProperty(kt)){for(var at=(Rt?Rt+".":"")+Mt+"."+kt,s=0,b=this.keyValidators;s<b.length;s++)if(Et=b[s].validate(kt,at,Mt))return Et;for(var $=0,_e=this.valueValidators;$<_e.length;$++)if(Et=_e[$].validate(_t[kt],at,Mt))return Et}return null},ft}(bt(4).ObjectValidator);tt.MapValidator=At},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function Et(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.ParametersPanelValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return St(Mt,Rt),Mt.prototype.validate=function(Et,kt,at){if(Et==null)return null;var s=Rt.prototype.validate.call(this,Et,kt,at);if(s)return s;var b=[{field:"expanded",validators:[ft.Validators.booleanValidator]},{field:"enabled",validators:[ft.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(b).validate(Et,kt,at)},Mt}(Tt.ObjectValidator);tt.ParametersPanelValidator=_t},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(s,b){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&($[it]=_e[it])},ht(s,b)},function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function $(){this.constructor=s}ht(s,b),s.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.TableDataValidator=tt.TableSchemaValidator=tt.ColumnSchemaValidator=tt.CredentialsValidator=tt.DatasourceConnectionConfigValidator=tt.DatasetCreateConfigValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"locale",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"mashupDocument",validators:[ft.Validators.stringValidator]},{field:"datasourceConnectionConfig",validators:[ft.Validators.datasourceConnectionConfigValidator]},{field:"tableSchemaList",validators:[ft.Validators.tableSchemaListValidator]},{field:"data",validators:[ft.Validators.tableDataArrayValidator]}];return(pt=new At.MultipleFieldsValidator(yt).validate($,_e,it))||($.datasourceConnectionConfig&&$.mashupDocument==null?[{message:"mashupDocument cannot be empty when datasourceConnectionConfig is presented"}]:$.data&&$.tableSchemaList==null?[{message:"tableSchemaList cannot be empty when data is provided"}]:$.data==null&&$.mashupDocument==null?[{message:"At least one of data or mashupDocument must be provided"}]:void 0)},b}(Tt.ObjectValidator);tt.DatasetCreateConfigValidator=_t;var Rt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"dataCacheMode",validators:[ft.Validators.dataCacheModeValidator]},{field:"credentials",validators:[ft.Validators.credentialsValidator]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.DatasourceConnectionConfigValidator=Rt;var Mt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"credentialType",validators:[ft.Validators.credentialTypeValidator]},{field:"credentialDetails",validators:[ft.Validators.credentialDetailsValidator]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.CredentialsValidator=Mt;var Et=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"name",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"displayName",validators:[ft.Validators.stringValidator]},{field:"dataType",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.ColumnSchemaValidator=Et;var kt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"name",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"columns",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.columnSchemaArrayValidator]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.TableSchemaValidator=kt;var at=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return St(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var yt=[{field:"name",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"rows",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.rawDataValidator]}];return new At.MultipleFieldsValidator(yt).validate($,_e,it)},b}(Tt.ObjectValidator);tt.TableDataValidator=at},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,kt){Et.__proto__=kt}||function(Et,kt){for(var at in kt)Object.prototype.hasOwnProperty.call(kt,at)&&(Et[at]=kt[at])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function Et(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(Et.prototype=Mt.prototype,new Et)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.QuickCreateValidator=void 0;var At=bt(3),Tt=bt(4),ft=bt(1),_t=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return St(Mt,Rt),Mt.prototype.validate=function(Et,kt,at){if(Et==null)return null;var s=Rt.prototype.validate.call(this,Et,kt,at);if(s)return s;var b=[{field:"accessToken",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.stringValidator]},{field:"groupId",validators:[ft.Validators.stringValidator]},{field:"tokenType",validators:[ft.Validators.tokenTypeValidator]},{field:"theme",validators:[ft.Validators.customThemeValidator]},{field:"datasetCreateConfig",validators:[ft.Validators.fieldRequiredValidator,ft.Validators.datasetCreateConfigValidator]}];return new At.MultipleFieldsValidator(b).validate(Et,kt,at)},Mt}(Tt.ObjectValidator);tt.QuickCreateValidator=_t},function(vt,tt,bt){var ht,St=this&&this.__extends||(ht=function(_t,Rt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,Et){Mt.__proto__=Et}||function(Mt,Et){for(var kt in Et)Object.prototype.hasOwnProperty.call(Et,kt)&&(Mt[kt]=Et[kt])},ht(_t,Rt)},function(_t,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");function Mt(){this.constructor=_t}ht(_t,Rt),_t.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)});Object.defineProperty(tt,"__esModule",{value:!0}),tt.PrintSettingsValidator=void 0;var At=bt(3),Tt=bt(4),ft=function(_t){function Rt(){return _t!==null&&_t.apply(this,arguments)||this}return St(Rt,_t),Rt.prototype.validate=function(Mt,Et,kt){if(Mt==null)return null;var at=_t.prototype.validate.call(this,Mt,Et,kt);if(at)return at;var s=[{field:"browserPrintAdjustmentsMode",validators:[new Tt.EnumValidator([0,1])]}];return new At.MultipleFieldsValidator(s).validate(Mt,Et,kt)},Rt}(Tt.ObjectValidator);tt.PrintSettingsValidator=ft}],dt={},mt=function vt(tt){var bt=dt[tt];if(bt!==void 0)return bt.exports;var ht=dt[tt]={exports:{}};return gt[tt].call(ht.exports,ht,ht.exports,vt),ht.exports}(0);return mt})(),lt.exports=nt()},890:lt=>{lt.exports=j},719:lt=>{lt.exports=c},156:lt=>{lt.exports=a}},et={};function ot(lt){var nt=et[lt];if(nt!==void 0)return nt.exports;var gt=et[lt]={exports:{}};return h[lt].call(gt.exports,gt,gt.exports,ot),gt.exports}ot.n=lt=>{var nt=lt&&lt.__esModule?()=>lt.default:()=>lt;return ot.d(nt,{a:nt}),nt},ot.d=(lt,nt)=>{for(var gt in nt)ot.o(nt,gt)&&!ot.o(lt,gt)&&Object.defineProperty(lt,gt,{enumerable:!0,get:nt[gt]})},ot.o=(lt,nt)=>Object.prototype.hasOwnProperty.call(lt,nt),ot.r=lt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(lt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(lt,"__esModule",{value:!0})};var st={};return(()=>{ot.r(st),ot.d(st,{EmbedType:()=>nt,PowerBIEmbed:()=>Tt});var lt,nt,gt=ot(156),dt=ot(719),mt=ot(149),vt=ot(890),tt=ot.n(vt),bt=(lt=function(ft,_t){return lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Mt){Rt.__proto__=Mt}||function(Rt,Mt){for(var Et in Mt)Object.prototype.hasOwnProperty.call(Mt,Et)&&(Rt[Et]=Mt[Et])},lt(ft,_t)},function(ft,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Class extends value "+String(_t)+" is not a constructor or null");function Rt(){this.constructor=ft}lt(ft,_t),ft.prototype=_t===null?Object.create(_t):(Rt.prototype=_t.prototype,new Rt)}),ht=function(ft,_t,Rt,Mt){return new(Rt||(Rt=Promise))(function(Et,kt){function at($){try{b(Mt.next($))}catch(_e){kt(_e)}}function s($){try{b(Mt.throw($))}catch(_e){kt(_e)}}function b($){var _e;$.done?Et($.value):(_e=$.value,_e instanceof Rt?_e:new Rt(function(it){it(_e)})).then(at,s)}b((Mt=Mt.apply(ft,[])).next())})},St=function(ft,_t){var Rt,Mt,Et,kt,at={label:0,sent:function(){if(1&Et[0])throw Et[1];return Et[1]},trys:[],ops:[]};return kt={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(kt[Symbol.iterator]=function(){return this}),kt;function s(b){return function($){return function(_e){if(Rt)throw new TypeError("Generator is already executing.");for(;kt&&(kt=0,_e[0]&&(at=0)),at;)try{if(Rt=1,Mt&&(Et=2&_e[0]?Mt.return:_e[0]?Mt.throw||((Et=Mt.return)&&Et.call(Mt),0):Mt.next)&&!(Et=Et.call(Mt,_e[1])).done)return Et;switch(Mt=0,Et&&(_e=[2&_e[0],Et.value]),_e[0]){case 0:case 1:Et=_e;break;case 4:return at.label++,{value:_e[1],done:!1};case 5:at.label++,Mt=_e[1],_e=[0];continue;case 7:_e=at.ops.pop(),at.trys.pop();continue;default:if(!((Et=(Et=at.trys).length>0&&Et[Et.length-1])||_e[0]!==6&&_e[0]!==2)){at=0;continue}if(_e[0]===3&&(!Et||_e[1]>Et[0]&&_e[1]<Et[3])){at.label=_e[1];break}if(_e[0]===6&&at.label<Et[1]){at.label=Et[1],Et=_e;break}if(Et&&at.label<Et[2]){at.label=Et[2],at.ops.push(_e);break}Et[2]&&at.ops.pop(),at.trys.pop();continue}_e=_t.call(ft,at)}catch(it){_e=[6,it],Mt=0}finally{Rt=Et=0}if(5&_e[0])throw _e[1];return{value:_e[0]?_e[1]:void 0,done:!0}}([b,$])}}},At=function(ft,_t,Rt){for(var Mt,Et=0,kt=_t.length;Et<kt;Et++)!Mt&&Et in _t||(Mt||(Mt=Array.prototype.slice.call(_t,0,Et)),Mt[Et]=_t[Et]);return ft.concat(Mt||Array.prototype.slice.call(_t))};(function(ft){ft.Create="create",ft.Report="report",ft.Dashboard="dashboard",ft.Tile="tile",ft.Qna="qna",ft.Visual="visual"})(nt||(nt={}));var Tt=function(ft){function _t(Rt){var Mt=ft.call(this,Rt)||this;return Mt.containerRef=gt.createRef(),Mt.prevEventHandlerMapString="",Mt.props.service?Mt.powerbi=Mt.props.service:Mt.powerbi=new dt.service.Service(dt.factories.hpmFactory,dt.factories.wpmpFactory,dt.factories.routerFactory),Mt.powerbi.setSdkInfo("powerbi-client-react","1.4.0"),Mt}return bt(_t,ft),Object.defineProperty(_t.prototype,"embed",{get:function(){return this._embed},set:function(Rt){this._embed=Rt,this.invokeGetEmbedCallback()},enumerable:!1,configurable:!0}),_t.prototype.componentDidMount=function(){this.containerRef.current&&(this.props.embedConfig.accessToken&&this.props.embedConfig.embedUrl?this.embedEntity():this.embed=this.powerbi.bootstrap(this.containerRef.current,this.props.embedConfig)),this.props.eventHandlers&&this.embed&&this.setEventHandlers(this.embed,this.props.eventHandlers)},_t.prototype.componentDidUpdate=function(Rt){return ht(this,void 0,void 0,function(){var Mt,Et,kt,at;return St(this,function(s){switch(s.label){case 0:return this.embedOrUpdateAccessToken(Rt),this.props.eventHandlers&&this.embed&&this.setEventHandlers(this.embed,this.props.eventHandlers),tt()(this.props.embedConfig.settings,Rt.embedConfig.settings)?[3,2]:[4,this.updateSettings()];case 1:s.sent(),s.label=2;case 2:if(this.props.embedConfig.type!==nt.Report)return[3,11];s.label=3;case 3:return s.trys.push([3,10,,11]),Mt=this.props.embedConfig,Et=Mt.filters,kt=Rt.embedConfig,Mt.pageName&&Mt.pageName!==kt.pageName?[4,this.embed.setPage(Mt.pageName)]:[3,5];case 4:s.sent(),s.label=5;case 5:return!Et||tt()(Et,kt.filters)?[3,7]:[4,this.embed.updateFilters(mt.FiltersOperations.Replace,Et)];case 6:return s.sent(),[3,9];case 7:return Et||!kt.filters?[3,9]:[4,this.embed.updateFilters(mt.FiltersOperations.RemoveAll)];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:return at=s.sent(),console.error(at),[3,11];case 11:return[2]}})})},_t.prototype.componentWillUnmount=function(){this.containerRef.current&&this.powerbi.reset(this.containerRef.current),this.prevEventHandlerMapString=""},_t.prototype.render=function(){return gt.createElement("div",{ref:this.containerRef,className:this.props.cssClassName})},_t.prototype.embedEntity=function(){this.containerRef.current&&(this.props.phasedEmbedding&&this.props.embedConfig.type===nt.Report?this.embed=this.powerbi.load(this.containerRef.current,this.props.embedConfig):(this.props.phasedEmbedding&&console.error("Phased embedding is not supported for type ".concat(this.props.embedConfig.type)),this.props.embedConfig.type===nt.Create?this.embed=this.powerbi.createReport(this.containerRef.current,this.props.embedConfig):this.embed=this.powerbi.embed(this.containerRef.current,this.props.embedConfig)))},_t.prototype.embedOrUpdateAccessToken=function(Rt){return ht(this,void 0,void 0,function(){var Mt;return St(this,function(Et){switch(Et.label){case 0:return this.props.embedConfig.accessToken&&this.props.embedConfig.embedUrl?!this.containerRef.current||Rt.embedConfig.accessToken&&this.props.embedConfig.embedUrl===Rt.embedConfig.embedUrl?[3,1]:(this.embedEntity(),[3,5]):[2];case 1:if(this.props.embedConfig.accessToken===Rt.embedConfig.accessToken||this.props.embedConfig.embedUrl!==Rt.embedConfig.embedUrl||!this.embed)return[3,5];Et.label=2;case 2:return Et.trys.push([2,4,,5]),[4,this.embed.setAccessToken(this.props.embedConfig.accessToken)];case 3:return Et.sent(),[3,5];case 4:return Mt=Et.sent(),console.error(`setAccessToken error:
`,Mt),[3,5];case 5:return[2]}})})},_t.prototype.setEventHandlers=function(Rt,Mt){var Et=this,kt=function($){if(!$)return"";var _e=Array.from($);return JSON.stringify(_e.map(function(it){return[it[0],it[1]?it[1].toString():""]}))}(this.props.eventHandlers);if(this.prevEventHandlerMapString!==kt){this.prevEventHandlerMapString=kt;var at=dt.Embed.allowedEvents,s=Rt.embedtype;switch(s){case nt.Create:break;case nt.Report:at=At(At([],at,!0),dt.Report.allowedEvents);break;case nt.Dashboard:at=At(At([],at,!0),dt.Dashboard.allowedEvents);break;case nt.Tile:at=At(At([],at,!0),dt.Tile.allowedEvents);break;case nt.Qna:at=At(At([],at,!0),dt.Qna.allowedEvents);break;case nt.Visual:at=At(At([],at,!0),dt.Visual.allowedEvents);break;default:console.error("Invalid embed type ".concat(s))}var b=[];Mt.forEach(function($,_e){at.includes(_e)?(Rt.off(_e),$&&Rt.on(_e,function(it){$(it,Et.embed)})):b.push(_e)}),b.length&&console.error("Following events are invalid: ".concat(b.join(",")))}},_t.prototype.invokeGetEmbedCallback=function(){this.props.getEmbeddedComponent&&this.embed&&this.props.getEmbeddedComponent(this.embed)},_t.prototype.updateSettings=function(){return ht(this,void 0,void 0,function(){var Rt,Mt;return St(this,function(Et){switch(Et.label){case 0:if(!this.embed||!this.props.embedConfig.settings)return[2];switch(this.props.embedConfig.type){case nt.Report:return[3,1];case nt.Dashboard:case nt.Tile:case nt.Qna:case nt.Visual:return[3,6]}return[3,7];case 1:Rt=this.props.embedConfig.settings,Et.label=2;case 2:return Et.trys.push([2,4,,5]),[4,this.embed.updateSettings(Rt)];case 3:return Et.sent(),[3,5];case 4:return Mt=Et.sent(),console.error("Error in method updateSettings: ".concat(Mt)),[3,5];case 5:case 6:return[3,8];case 7:console.error("Invalid embed type ".concat(this.props.embedConfig.type)),Et.label=8;case 8:return[2]}})})},_t}(gt.Component)})(),st})())})(powerbiClientReact);var powerbiClientReactExports=powerbiClientReact.exports;const EmbedPowerBIComponent=()=>{const o=useDispatch(),[e,a]=reactExports.useState(!0),{instance:c}=useMsal(),j=c.getActiveAccount(),[h,et]=reactExports.useState(),ot=useSelector(dt=>dt.selection.assetIds),st=async()=>{const dt={scopes:["https://analysis.windows.net/powerbi/api/Report.Read.All"],account:j};try{const mt=await c.acquireTokenSilent(dt);et(mt.accessToken),a(!1)}catch(mt){console.error(mt),a(!1)}};reactExports.useEffect(()=>{a(!0),st()},[]);const lt=dt=>{let mt;ot.includes(dt)?mt=ot.filter(vt=>vt!==dt):mt=[...ot,dt],o(setSelection(mt))},nt={$schema:"http://powerbi.com/product/schema#basic",target:{table:"<tablename>",column:"<columnname>"},operator:"In",values:ot,filterType:powerbiExports.models.FilterType.Basic},gt=()=>{if(window.report)return window.report.getPages().then(mt=>{mt[0].getVisuals().then(vt=>{for(let tt of vt)tt.type==="slicer"&&tt.name==="xxxxxxxxxxxxxxxxxx"&&(nt.values.length>0?tt.setSlicerState({filters:[nt]}):tt.setSlicerState({filters:[]}))})}),""};return jsxRuntimeExports.jsxs("div",{children:[gt(),e?jsxRuntimeExports.jsx("div",{className:"pbi-div",children:"Loading"}):jsxRuntimeExports.jsx("div",{className:"pbi-div",children:jsxRuntimeExports.jsx(powerbiClientReactExports.PowerBIEmbed,{embedConfig:{type:"report",id:"<reportid>",embedUrl:"https://app.powerbi.com/reportEmbed?reportId=<reportid>&ctid=<ctid>",accessToken:h||"",tokenType:powerbiExports.models.TokenType.Aad,settings:{panes:{filters:{expanded:!1,visible:!1},pageNavigation:{visible:!1}},background:powerbiExports.models.BackgroundType.Transparent}},eventHandlers:new Map([["loaded",function(){gt();let dt=window.report;dt==null||dt.on("visualClicked",async function(){const mt=await(dt==null?void 0:dt.getPages()),vt=await(mt==null?void 0:mt[0].getVisuals());if(vt){for(let tt of vt)if(tt.type==="slicer"&&tt.name==="xxxxxxxxxxxxxxxxxx"){const bt=await tt.getSlicerState();bt.filters.length>0&&bt.filters[0].values.forEach(St=>{let At=St;console.log(tt.name+" "+At),lt(At)})}}})}],["rendered",function(){console.log("Report rendered")}],["error",function(dt){console.log(dt.detail)}]]),cssClassName:"bi-embedded",getEmbeddedComponent:dt=>{window.report=dt}})})]})},PageLayout=o=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(NavigationBar,{}),o.children,jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs(AuthenticatedTemplate,{children:[jsxRuntimeExports.jsx(EventHubStreamComponent,{}),jsxRuntimeExports.jsx(EmbedPowerBIComponent,{}),jsxRuntimeExports.jsx(ServiceComponent,{}),jsxRuntimeExports.jsx(AppStreamComponent,{}),jsxRuntimeExports.jsx(USDStorageComponent,{}),jsxRuntimeExports.jsx(SelectionComponent,{}),jsxRuntimeExports.jsx(StatusComponent,{})]})]}),store=configureStore({reducer:{service:serviceReducer,appStream:appStreamReducer,usdStorage:usdStorageReducer,selection:selectionReducer,status:statusReducer}}),Controls=()=>{const o=useDispatch(),e=useSelector(ht=>ht.service.sessionService),a=useSelector(ht=>ht.appStream.server),c=useSelector(ht=>ht.selection.assetIds),[j,h]=reactExports.useState(a),[et,ot]=reactExports.useState(e.address);reactExports.useEffect(()=>{h(a)},[a]),reactExports.useEffect(()=>{ot(e.address)},[e]);const st=()=>{o(setURL("/app/samples/stage02.usd")),o(setService({address:et,desiredState:"connected"}))},lt=()=>{o(setService({address:et,desiredState:"destroyed"}))},nt=()=>{o(setServer(j))},gt=()=>{o(setService({address:et,desiredState:"destroyed"})),o(setServer(""))},dt=()=>{e.address&&e.desiredState,o(setURL("https://stovusd.blob.core.windows.net/private/scn_houston_facility_3/scn_houston_facility.usd"))},mt=()=>{e.address&&e.desiredState==="connected"?o(setURL("/app/samples/stage02.usd")):o(setURL("./samples/stage02.usd"))},vt=()=>{o(setURL("https://<blobname>.blob.core.windows.net/containername/folder/file.usd?sasToken=<sastoken>&hostName=<blobname>.blob.core.windows.net&containerName=<containername>"))},tt=ht=>{const St=c.includes(ht)?c.filter(At=>At!==ht):[...c,ht];o(setSelection(St))},bt=(ht,St)=>{o(setStatus({assetId:ht,assetStatus:St}))};return jsxRuntimeExports.jsxs("div",{id:"debugControls",children:[jsxRuntimeExports.jsx("strong",{children:"DEBUG CONTROLS"}),jsxRuntimeExports.jsxs("div",{className:"section",children:[jsxRuntimeExports.jsx("div",{className:"section-label",children:"Service"}),jsxRuntimeExports.jsxs("div",{className:"section-content",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter Service Address",value:et,onChange:ht=>ot(ht.target.value)}),jsxRuntimeExports.jsx("button",{onClick:st,children:"Start Session"}),jsxRuntimeExports.jsx("button",{onClick:lt,children:"End Session"})]})]}),jsxRuntimeExports.jsxs("div",{className:"section",children:[jsxRuntimeExports.jsx("div",{className:"section-label",children:"Server"}),jsxRuntimeExports.jsxs("div",{className:"section-content",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter Server URL",value:j,onChange:ht=>h(ht.target.value)}),jsxRuntimeExports.jsx("button",{onClick:nt,children:"Start Local Server"}),jsxRuntimeExports.jsx("button",{onClick:gt,children:"Stop Local Server"})]})]}),jsxRuntimeExports.jsxs("div",{className:"section",children:[jsxRuntimeExports.jsx("div",{className:"section-label",children:"Assets"}),jsxRuntimeExports.jsxs("div",{className:"section-content",children:[jsxRuntimeExports.jsx("button",{onClick:dt,children:"Set Asset 1 URL"}),jsxRuntimeExports.jsx("button",{onClick:mt,children:"Set Asset 2 URL"}),jsxRuntimeExports.jsx("button",{onClick:vt,children:"Set Asset SAS URL"})]})]}),jsxRuntimeExports.jsxs("div",{className:"section",children:[jsxRuntimeExports.jsx("div",{className:"section-label",children:"Selection"}),jsxRuntimeExports.jsxs("div",{className:"section-content",children:[jsxRuntimeExports.jsx("button",{onClick:()=>tt("cube"),children:"cube"}),jsxRuntimeExports.jsx("button",{onClick:()=>tt("sphere"),children:"sphere"}),jsxRuntimeExports.jsx("button",{onClick:()=>tt("cone"),children:"cone"}),jsxRuntimeExports.jsx("button",{onClick:()=>tt("group"),children:"group"})]})]}),jsxRuntimeExports.jsxs("div",{className:"section",children:[jsxRuntimeExports.jsx("div",{className:"section-label",children:"Asset State"}),jsxRuntimeExports.jsxs("div",{className:"section-content-grid",children:[jsxRuntimeExports.jsx("button",{onClick:()=>bt("cube","nominal"),style:{fontSize:"12px"},children:"cube nominal"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("cube","warning"),style:{fontSize:"12px"},children:"cube warning"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("cube","fault"),style:{fontSize:"12px"},children:"cube fault"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("sphere","nominal"),style:{fontSize:"12px"},children:"sphere nominal"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("sphere","warning"),style:{fontSize:"12px"},children:"sphere warning"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("sphere","fault"),style:{fontSize:"12px"},children:"sphere fault"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("cone","nominal"),style:{fontSize:"12px"},children:"cone nominal"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("cone","warning"),style:{fontSize:"12px"},children:"cone warning"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("cone","fault"),style:{fontSize:"12px"},children:"cone fault"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("group","nominal"),style:{fontSize:"12px"},children:"group nominal"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("group","warning"),style:{fontSize:"12px"},children:"group warning"}),jsxRuntimeExports.jsx("button",{onClick:()=>bt("group","fault"),style:{fontSize:"12px"},children:"group fault"})]})]})]})},State=()=>{const o=useSelector(tt=>tt.service.sessionService),e=useSelector(tt=>tt.service.appId),a=useSelector(tt=>tt.service.version),c=useSelector(tt=>tt.service.profile),j=useSelector(tt=>tt.service.sessionId),h=useSelector(tt=>tt.appStream.server),et=useSelector(tt=>tt.appStream.remoteStream),ot=useSelector(tt=>tt.appStream.kitState),st=useSelector(tt=>tt.usdStorage.url),lt=useSelector(tt=>tt.usdStorage.loadingState),nt=useSelector(tt=>tt.usdStorage.loadedUrl),gt=useSelector(tt=>tt.selection.assetIds),dt=useSelector(tt=>tt.selection.selectionChangeOrigin),mt=useSelector(tt=>tt.status.assetId),vt=useSelector(tt=>tt.status.assetStatus);return jsxRuntimeExports.jsxs("div",{id:"debugState",children:[jsxRuntimeExports.jsx("strong",{children:"DEBUG STATE"}),jsxRuntimeExports.jsxs("div",{className:"state-column",children:[jsxRuntimeExports.jsx("table",{className:"state-table",children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{className:"table-heading",children:jsxRuntimeExports.jsx("i",{children:"sessionService"})})}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"address"}),jsxRuntimeExports.jsx("td",{className:"value",children:o.address})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"desiredState"}),jsxRuntimeExports.jsx("td",{className:"value",children:o.desiredState})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"appId"}),jsxRuntimeExports.jsx("td",{className:"value",children:e})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"version"}),jsxRuntimeExports.jsx("td",{className:"value",children:a})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"profile"}),jsxRuntimeExports.jsx("td",{className:"value",children:c})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"sessionId"}),jsxRuntimeExports.jsx("td",{className:"value",children:j})]})]})}),jsxRuntimeExports.jsx("table",{className:"state-table",children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{className:"table-heading",children:jsxRuntimeExports.jsx("i",{children:"appStream"})})}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"remoteStream.accessToken"}),jsxRuntimeExports.jsx("td",{className:"value",children:et.accessToken})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"remoteStream.mediaport"}),jsxRuntimeExports.jsx("td",{className:"value",children:et.mediaport})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"remoteStream.mediaserver"}),jsxRuntimeExports.jsx("td",{className:"value",children:et.mediaserver})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"remoteStream.sessionid"}),jsxRuntimeExports.jsx("td",{className:"value",children:et.sessionid})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"remoteStream.signalingport"}),jsxRuntimeExports.jsx("td",{className:"value",children:et.signalingport})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"remoteStream.signalingserver"}),jsxRuntimeExports.jsx("td",{className:"value",children:et.signalingserver})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"server"}),jsxRuntimeExports.jsx("td",{className:"value",children:h})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"kitState"}),jsxRuntimeExports.jsx("td",{className:"value",children:ot})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"state-column",children:[jsxRuntimeExports.jsx("table",{className:"state-table",children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{className:"table-heading",children:jsxRuntimeExports.jsx("i",{children:"usdStorage"})})}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"url"}),jsxRuntimeExports.jsx("td",{className:"value",children:st})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"loadingState"}),jsxRuntimeExports.jsx("td",{className:"value",children:lt})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"loadedUrl"}),jsxRuntimeExports.jsx("td",{className:"value",children:nt})]})]})}),jsxRuntimeExports.jsx("table",{className:"state-table",children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{className:"table-heading",children:jsxRuntimeExports.jsx("i",{children:"selection"})})}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"assetIds"}),jsxRuntimeExports.jsx("td",{className:"value",children:jsxRuntimeExports.jsx("ul",{className:"asset-ids",children:gt&&gt.length>0?gt.map((tt,bt)=>jsxRuntimeExports.jsx("li",{className:"asset-id-item",children:tt},bt)):jsxRuntimeExports.jsx("li",{className:"asset-id-item",children:"EMPTY"})})})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"selectionChangeOrigin"}),jsxRuntimeExports.jsx("td",{className:"value",children:dt})]})]})}),jsxRuntimeExports.jsx("table",{className:"state-table",children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"table-heading",children:jsxRuntimeExports.jsx("i",{children:"status"})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("i",{children:"(most recent)"})})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"assetId"}),jsxRuntimeExports.jsx("td",{className:"value",children:mt})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"label",children:"assetStatus"}),jsxRuntimeExports.jsx("td",{className:"value",children:vt})]})]})})]})]})},SessionManagement=()=>{const[o,e]=reactExports.useState([]),a="<ovestreamingurl>",c=async()=>{const ot=(await getStreamingSessions(a)).data;e(ot.items)},j=async et=>{await destroyStreamingSession(a,et),c()},h=async()=>{for(const et of o)await destroyStreamingSession(a,et.id);c()};return jsxRuntimeExports.jsxs("div",{id:"sessionManagement",children:[jsxRuntimeExports.jsx("strong",{children:"SESSION MANAGEMENT"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("button",{onClick:c,style:{fontSize:"12px"},children:"Get Sessions"}),o.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("ul",{children:o.map(et=>jsxRuntimeExports.jsxs("li",{children:[et.id,jsxRuntimeExports.jsx("button",{onClick:()=>j(et.id),children:"Delete"})]},et.id))}),jsxRuntimeExports.jsx("button",{onClick:h,children:"Delete All Sessions"})]})]})},DebugPanel=()=>{const[o,e]=reactExports.useState(!0);return reactExports.useEffect(()=>{const a=c=>{c.ctrlKey&&c.key==="m"&&e(j=>!j)};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[]),o?jsxRuntimeExports.jsxs("div",{className:"debug-panel",children:[jsxRuntimeExports.jsx("div",{className:"debug-panel-header",children:"Debug Panel"}),jsxRuntimeExports.jsx("div",{className:"debug-panel-body",children:"Toggle with CTRL+M"}),jsxRuntimeExports.jsx(Controls,{}),jsxRuntimeExports.jsx(State,{}),jsxRuntimeExports.jsx(SessionManagement,{})]}):null},MainContent=()=>jsxRuntimeExports.jsx("div",{className:"App"}),App=o=>jsxRuntimeExports.jsx(Provider_default,{store,children:jsxRuntimeExports.jsxs(MsalProvider,{instance:o.instance,children:[jsxRuntimeExports.jsx(DebugPanel,{}),jsxRuntimeExports.jsx(PageLayout,{children:jsxRuntimeExports.jsx(MainContent,{})})]})}),msalInstance=new PublicClientApplication(msalConfig),allAccounts=msalInstance.getAllAccounts();!msalInstance.getActiveAccount()&&allAccounts.length>0&&msalInstance.setActiveAccount(allAccounts[0]);msalInstance.addEventCallback(o=>{if(o.eventType===EventType.LOGIN_SUCCESS&&o.payload){const a=o.payload.account;msalInstance.setActiveAccount(a)}});const root=client.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(React$1.StrictMode,{children:jsxRuntimeExports.jsx(App,{instance:msalInstance})}));
